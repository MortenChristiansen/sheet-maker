/*! For license information please see entry.7433ee4175d28d4b2995.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={2661:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".add-item-input-field {\r\n    margin-top: 15px;\r\n    width: 250px;\r\n    border-bottom-style: dashed !important;\r\n    display: block;\r\n}",""]);const a=o},288:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8390),n.b),h=new URL(n(3208),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"checkbox {\r\n    display: inline-block;\r\n}\r\n\r\ncheckbox > .container:not(.readonly) {\r\n    cursor: pointer;\r\n}\r\n\r\ncheckbox .container {\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\ncheckbox .container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncheckbox .container.s {\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n\r\ncheckbox .container.xs {\r\n    width: 13px;\r\n    height: 13px;\r\n}\r\n\r\ncheckbox .container.checked {\r\n    background-image: url("+d+");\r\n}\r\n\r\ncheckbox .container.unchecked {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},1187:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7786),n.b),h=o()(s()),u=l()(c);h.push([t.id,"cross-button {\r\n    display: inline-block;\r\n}\r\n\r\ncross-button .button-container {\r\n    width: 30px;\r\n    height: 30px;\r\n    background-size: contain;\r\n    background-image: url("+u+");\r\n}\r\n\r\ncross-button .button-container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncross-button .button-container:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}\r\n\r\ncross-button .button-container.angled:hover {\r\n    cursor: pointer;\r\n    transform: rotate(45deg) scale(1.1);\r\n}",""]);const d=h},3055:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(1526),n.b),h=new URL(n(6035),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"dialog-box {\r\n    display: block;\r\n}\r\n\r\ndialog-box .dialog-container {\r\n    padding: 20px;\r\n    filter: drop-shadow(8px 8px 10px rgba(0, 0, 0, 0.371));\r\n}\r\n\r\ndialog-box  .inner-container {\r\n    margin: 10px 20px;\r\n}\r\n\r\ndialog-box .dialog-container.m {\r\n    width: 960px;\r\n    height: 710px;\r\n    background-image: url("+d+");\r\n}\r\n\r\ndialog-box .dialog-container.s {\r\n    width: 460px;\r\n    height: 335px;\r\n    background-image: url("+p+");\r\n}\r\n\r\n/* Fixes rendering error for the built in dialog UI, which does not work with scrolling */\r\nau-dialog-overlay {\r\n    position: fixed !important;\r\n}\r\nau-dialog-container {\r\n    position: fixed !important;\r\n}",""]);const f=u},2001:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nlist > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nlist .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nlist .list-entry {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},8908:(t,e,n)=>{n.d(e,{Z:()=>y});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8801),n.b),h=new URL(n(9462),n.b),u=new URL(n(3473),n.b),d=new URL(n(2867),n.b),p=o()(s()),f=l()(c),g=l()(h),v=l()(u),m=l()(d);p.push([t.id,"primary-stat {\r\n    display: inline-block;\r\n}\r\n\r\nprimary-stat .container {\r\n    width: 60px;\r\n    height: 60px;\r\n    background-size: contain;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nprimary-stat > .container:not(.readonly) {\r\n    cursor: -webkit-grab;\r\n    cursor: grab;\r\n}\r\n\r\nprimary-stat .container.l {\r\n    width: 90px;\r\n    height: 90px;\r\n    font-size: 30px;\r\n}\r\n\r\nprimary-stat .container.s {\r\n    width: 45px;\r\n    height: 45px;\r\n    font-size: 13px;\r\n}\r\n\r\nprimary-stat .container.xs {\r\n    width: 36px;\r\n    height: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nprimary-stat .container.primary {\r\n    background-image: url("+f+");\r\n}\r\n\r\nprimary-stat .container.primary-angled {\r\n    background-image: url("+g+");\r\n}\r\n\r\nprimary-stat .container.secondary {\r\n    background-image: url("+v+");\r\n    width: 44px;\r\n    height: 44px;\r\n}\r\nprimary-stat .container.secondary.s {\r\n    width: 33px;\r\n    height: 33px;\r\n}\r\nprimary-stat .container.secondary.xs {\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nprimary-stat .container.secondary-angled {\r\n    background-image: url("+m+");\r\n}\r\n\r\nprimary-stat .container.active {\r\n    cursor: -webkit-grabbing;\r\n    cursor: grabbing;\r\n}\r\n\r\nprimary-stat .container .content {\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\nprimary-stat .overlay {\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 1;\r\n}",""]);const y=p},9909:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(164),n.b),h=new URL(n(2),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"radio-button {\r\n    display: inline-block;\r\n    cursor: pointer;\r\n}\r\n\r\nradio-button .container {\r\n    background-size: contain;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nradio-button .container.selected {\r\n    background-image: url("+d+");\r\n}\r\n\r\nradio-button .container.unselected {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},1247:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7552),n.b),h=o()(s()),u=l()(c);h.push([t.id,"stat-info-button {\r\n    display: inline-block;\r\n    width: 25px;\r\n    height: 25px;\r\n}\r\n\r\nstat-info-button:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}\r\n\r\nstat-info-button .button {\r\n    opacity: 0.5;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-image: url("+u+");\r\n    background-size: contain;\r\n}\r\n\r\nstat-info-button .button.active {\r\n    opacity: 1;\r\n}",""]);const d=h},835:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box {\r\n    display: block;\r\n    width: 300px;\r\n}\r\n\r\ntext-box > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\ntext-box textarea {\r\n    font-family: 'Estonia', cursive;\r\n    font-size: 30px;\r\n    background-color: transparent;\r\n    font-weight: bold;\r\n\r\n    width: 100%;\r\n    border: none;\r\n    overflow: auto;\r\n    outline: none;\r\n    box-shadow: none;\r\n\r\n    resize: none;\r\n}",""]);const a=o},2495:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box.text-dialog-input textarea {\r\n    height: 230px;\r\n    width: 405px;\r\n    padding: 7px;\r\n}\r\n\r\ntext-box.text-dialog-input .container {\r\n    margin: 0;\r\n}",""]);const a=o},4280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-field .input {\r\n    text-overflow: ellipsis;\r\n    display: inline-block;\r\n}",""]);const a=o},6140:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"footer {\r\n    display: block;\r\n}\r\n\r\nfooter .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1) scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block; \r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n}",""]);const f=u},6392:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8626),n.b),h=o()(s()),u=l()(c);h.push([t.id,"page-header {\r\n    display: block;\r\n    width: 100%;\r\n    margin-top: 20px;\r\n}\r\n\r\npage-header > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto 1fr;\r\n    grid-template-rows:  0 1fr;\r\n}\r\n\r\npage-header .name-box {\r\n    height: 150px;\r\n    width: 400px;\r\n    background-position: 50%;\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    background-image: url("+u+");\r\n    text-align: center;\r\n}\r\n\r\npage-header .name-box input {\r\n    margin-top: 30px;\r\n    text-align: center;\r\n    font-size: 70px;\r\n    width: 300px;\r\n    border: none;\r\n}\r\n\r\npage-header .left-page-links {\r\n    align-self: center;\r\n    justify-self: right;\r\n    margin: 20px;\r\n    margin-top: 45px;\r\n}\r\n\r\npage-header .right-page-links {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 20px;\r\n    margin-top: 45px;\r\n}\r\n\r\npage-header .page-link {\r\n    margin: 10px;\r\n    color: #446;;\r\n}\r\n\r\npage-header .page-link {\r\n    text-decoration: none;\r\n}\r\n\r\n\r\n\r\npage-header .page-link:hover:not(.active) {\r\n    color: black;\r\n}\r\n\r\npage-header .page-link.active{\r\n    cursor: default;\r\n    color: darkred;\r\n}",""]);const d=h},1525:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7283),n.b),h=o()(s()),u=l()(c);h.push([t.id,"rune-edge {\r\n    display: block;\r\n    width: 100%;\r\n    height: 20px;\r\n    background-size: contain;\r\n    background-repeat: repeat-x;\r\n    background-image: url("+u+");\r\n    margin: 45px 0;\r\n}",""]);const d=h},1939:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"title {\r\n    display: block;\r\n    height: auto;\r\n}\r\n\r\ntitle .text {\r\n    font-size: 18px;\r\n    color: darkred;\r\n    padding: 0 4px;\r\n    display: inline-block;\r\n}\r\n\r\ntitle .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1);\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto auto auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n    \r\n}",""]);const f=u},1138:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(4378),n.b),h=o()(s()),u=l()(c);h.push([t.id,".message {\n  background-color: red;\n}\n\nbody {\n  font-family: 'Eagle Lake', cursive;\n  font-size: 20px;\n  color: darkred;\n  background-image:  url("+u+");\n  background-color: #FBF5EB;\n  margin: 0;\n}\n\n.numbers {\n  font-family: 'MedievalSharp', cursive;\n}\n\n/*\nfont-family: 'Amatic SC', cursive;\nfont-family: 'Eagle Lake', cursive;\nfont-family: 'Estonia', cursive;\nfont-family: 'Fleur De Leah', cursive;\nfont-family: 'IM Fell DW Pica SC', serif;\nfont-family: 'IM Fell English SC', serif;\nfont-family: 'MedievalSharp', cursive;\n*/\n\n.monochrome {\n  filter: grayscale(100%);\n}\n\n.text {\n    font-size: 16px;\n    color: #446;\n}\n\ninput[type=\"text\"] {\n  border: none;\n  border-bottom: 2px solid #cbc1ad;\n  background: none;\n  padding: 0px 6px;\n  font-family: 'Estonia', cursive;\n  font-size: 30px;\n  font-weight: bold;\n  text-indent: 5px;\n}\n\ninput[type=\"text\"]:focus {\n  outline: none;\n}\n\ninput[type=\"text\"].specialisation {\n  text-align: center;\n  width: 150px;\n  color: #888;\n}\n\n::-moz-placeholder {\n  color: #bbb;\n  opacity: 1; /* Firefox */\n}\n\n::placeholder {\n  color: #bbb;\n  opacity: 1; /* Firefox */\n}\n\nmy-app > .page-view {\n  min-height: 1100px;\n}\n\n@-webkit-keyframes fadeIn {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@keyframes fadeIn {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@-webkit-keyframes fadeOut {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@keyframes fadeOut {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n.disable-scrolling {\n  overflow: hidden;\n}",""]);const d=h},927:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"abilities-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nabilities-block > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nabilities-block .ability > * {\r\n    display: inline-block;\r\n}\r\n\r\nabilities-block .ability .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .name {\r\n    opacity: 0.4;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability .specialisation {\r\n    width: 150px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .specialisation {\r\n    opacity: 0;\r\n}\r\n\r\nabilities-block .add-item-input {\r\n    margin-top: 15px;\r\n    width: 200px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nabilities-block .puissant-label {\r\n    width: 0;\r\n}",""]);const a=o},7804:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"active-magic-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n    width: 366px;\r\n}\r\n\r\nactive-magic-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nactive-magic-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nactive-magic-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nactive-magic-list .add-magic-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}",""]);const a=o},2012:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"age-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nage-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-template-rows: auto auto auto 60px;\r\n}\r\n\r\nage-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 4px;\r\n}\r\n\r\nage-block > .grid > .left {\r\n    justify-self: left;\r\n}\r\n\r\nage-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nage-block > .grid > .bottom {\r\n    align-self: end;\r\n}\r\n\r\nage-block > .grid > .top {\r\n    align-self: baseline;\r\n}\r\n\r\nage-block .small-text {\r\n    font-size: 14px;\r\n}",""]);const a=o},5185:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"arts-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\narts-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto 40px auto auto auto auto  10px auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\narts-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\narts-block .untrained {\r\n    opacity: 0.4;\r\n}",""]);const a=o},3260:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"background-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nbackground-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nbackground-block text-box textarea {\r\n    height: 1200px;\r\n}",""]);const a=o},8985:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"carried-belongings-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\ncarried-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\ncarried-belongings-block text-box textarea {\r\n    height: 800px;\r\n}",""]);const a=o},6767:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"character-type-selector {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    height: -webkit-fit-content;\r\n    height: -moz-fit-content;\r\n    height: fit-content;\r\n    color: #446;\r\n    margin: 20px;\r\n}\r\n\r\ncharacter-type-selector .container > * {\r\n    vertical-align: middle;\r\n}",""]);const a=o},3292:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"characteristics-block {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    color: #446;\r\n    margin: 30px;\r\n    float: left;\r\n}\r\n\r\ncharacteristics-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ncharacteristics-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr;\r\n}\r\n\r\ncharacteristics-block .grid > * {\r\n    align-self: center;\r\n}\r\n\r\ncharacteristics-block .grid .text.left-col {\r\n    justify-self: right;\r\n}\r\n\r\ncharacteristics-block .grid .text{\r\n    justify-self: left;\r\n    margin-left: 3px;\r\n    margin-right: 3px;\r\n}\r\n\r\n\r\ncharacteristics-block .grid primary-stat {\r\n    margin: 1px;\r\n}\r\n\r\ncharacteristics-block footer {\r\n    margin-top: 5px;\r\n}\r\n\r\ncharacteristics-block .specialisation {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},4397:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"confidence-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},6903:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"damage-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\ndamage-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ndamage-block .wound-type {\r\n    display: inline-block;\r\n    margin: 0 10px;\r\n}\r\n\r\ndamage-block .wound-type:nth-child(1) {\r\n    display: inline-block;\r\n    margin-left: 0;\r\n}\r\n",""]);const a=o},3845:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"description-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},1459:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"fatigue-block {\r\n    display: block;\r\n    margin: 30px;\r\n    min-width: 280px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nfatigue-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nfatigue-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\nfatigue-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nfatigue-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nfatigue-block radio-button {\r\n    margin-left: 5px;\r\n}",""]);const a=o},2820:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-description-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\nlab-description-block text-box {\r\n    width: 100%;\r\n}",""]);const a=o},6964:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,'lab-modifications-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    min-width: 845px;\r\n    float: left;\r\n}\r\n\r\nlab-modifications-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-modifications-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nlab-modifications-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-modifications-list .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .container > .title {\r\n    display: block;\r\n    margin-top: 30px;\r\n}\r\n\r\nlab-modifications-list .grid > .name {\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .grid > .category {\r\n    width: 100px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .grid > .description {\r\n    width: 400px;\r\n}\r\n\r\nlab-modifications-list .add-item-input.add-modifier-input {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: -15px;\r\n    width: 60px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .modifier-titles {\r\n    position: absolute;\r\n    right: 32px;\r\n    top: 40px;\r\n}\r\n\r\nlab-modifications-list .modifier-title {\r\n    font-size: 9px;\r\n    display: inline-block;\r\n    width: 33px;\r\n    margin: 2px;\r\n    text-align: center;\r\n    font-family: "Eagle Lake", cursive;\r\n    border-bottom: none;\r\n    padding: 0px;\r\n    font-weight: unset;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nlab-modifications-list .modifier-totals {\r\n    position: absolute;\r\n    right: 30px;\r\n    bottom: 20px;\r\n}\r\n\r\nlab-modifications-list .modifier-total {\r\n    font-size: 16px;\r\n    display: inline-block;\r\n    width: 33px;\r\n    margin: 2px;\r\n    text-align: center;\r\n}',""]);const a=o},8412:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-stats {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 1500px;\r\n    float: left;\r\n}\r\n\r\nlab-stats > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-stats > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr 1fr;\r\n}\r\n\r\nlab-stats > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-stats > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nlab-stats .modifier-selector {\r\n    text-align: center;\r\n    width: 100px;\r\n}",""]);const a=o},4769:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"magic-items-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 2128px;\r\n    float: left;\r\n}\r\n\r\nmagic-items-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nmagic-items-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content auto;\r\n    grid-template-columns: min-content min-content min-content min-content auto;\r\n    grid-auto-rows: auto auto;\r\n}\r\n\r\nmagic-items-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nmagic-items-block .magic-item > .effects {\r\n    grid-column-start: 1;\r\n    grid-column-end: 6;\r\n}\r\n\r\nmagic-items-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\nmagic-items-block .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nmagic-items-block .effect .usages, magic-items-block .effect .range, magic-items-block .effect .duration, magic-items-block .effect .target, magic-items-block .effect .arts {\r\n    width: 150px;\r\n}\r\n\r\nmagic-items-block .magic-item {\r\n    border-left: 3px solid darkred;\r\n    margin-bottom: 20px;\r\n    padding: 0 10px;\r\n}",""]);const a=o},3349:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"notes-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nnotes-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nnotes-block text-box textarea {\r\n    height: 1200px;\r\n}",""]);const a=o},280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"npc-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nnpc-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nnpc-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nnpc-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nnpc-list .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nnpc-list .description {\r\n    width: 500px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nnpc-list .add-item-input-field {\r\n    width: 200px;\r\n}",""]);const a=o},5555:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"personality-traits-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\npersonality-traits-list > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\npersonality-traits-list .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\npersonality-traits-list primary-stat {\r\n    margin-left: 10px;;\r\n}",""]);const a=o},7600:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"quest-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nquest-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nquest-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nquest-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nquest-list .name {\r\n    width: 650px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nquest-list .priority {\r\n    margin-left: 10px !important;\r\n}\r\n\r\nquest-list .add-item-input-field {\r\n    width: 600px;\r\n}",""]);const a=o},4467:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"research-projects {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 2128px;\r\n    float: left;\r\n}\r\n\r\nresearch-projects > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nresearch-projects .aura-bonus {\r\n    display: block;\r\n}\r\n\r\nresearch-projects .add-item-input {\r\n    margin-top: 15px;\r\n    width: 250px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nresearch-projects > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nresearch-projects > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nresearch-projects .description {\r\n    width: 600px;\r\n    margin-left: 40px !important;\r\n    text-overflow: ellipsis;\r\n}\r\nresearch-projects .arts, research-projects .prerequisites {\r\n    width: 50px;\r\n    text-align: center;\r\n}\r\nresearch-projects .level {\r\n    margin-right: 40px !important;\r\n}\r\n\r\nresearch-projects .material, research-projects .shape {\r\n    width: 150px;\r\n    text-align: center;\r\n}\r\n\r\nresearch-projects .total {\r\n    margin-left: 40px !important;\r\n}",""]);const a=o},5204:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"sanctum-belongings-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\nsanctum-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nsanctum-belongings-block text-box textarea {\r\n    height: 800px;\r\n}",""]);const a=o},7266:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(9462),n.b),h=new URL(n(3082),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"sigil {\r\n    display: block;\r\n    height: auto;\r\n    float: left;\r\n}\r\n\r\nsigil > .container {\r\n    width: 130px;\r\n    height: 130px;\r\n    background-size: contain;\r\n    background-image: url("+d+");\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nsigil > .container .sigil-image-placeholder {\r\n    width: 70px;\r\n    height: 35px;\r\n    background-size: contain;\r\n    background-image: url("+p+");\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container .sigil-image {\r\n    width: 70px;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container.active-drag {\r\n    opacity: 0.6;\r\n}",""]);const f=u},7624:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nspell-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-list .add-item-input-field {\r\n    width: 300px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-list .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-list .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-list .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-list .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-list .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-list .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-list .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-list .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-list .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-list .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-list .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-list .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #bbb;\r\n}\r\n\r\nspell-list .co-form ~ .co-form .form-header::before,\r\nspell-list .an-form ~ .an-form .form-header::before,\r\nspell-list .au-form ~ .au-form .form-header::before,\r\nspell-list .aq-form ~ .aq-form .form-header::before,\r\nspell-list .he-form ~ .he-form .form-header::before,\r\nspell-list .vi-form ~ .vi-form .form-header::before,\r\nspell-list .te-form ~ .te-form .form-header::before,\r\nspell-list .ig-form ~ .ig-form .form-header::before,\r\nspell-list .me-form ~ .me-form .form-header::before,\r\nspell-list .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}",""]);const a=o},6073:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-wishlist {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-wishlist > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nspell-wishlist > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-wishlist > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-wishlist .add-item-input-field {\r\n    width: 300px;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-wishlist .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-wishlist .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-wishlist .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-wishlist .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-wishlist .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-wishlist .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-wishlist .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-wishlist .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-wishlist .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-wishlist .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-wishlist .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-wishlist .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #bbb;\r\n}\r\n\r\nspell-wishlist .co-form ~ .co-form .form-header::before,\r\nspell-wishlist .an-form ~ .an-form .form-header::before,\r\nspell-wishlist .au-form ~ .au-form .form-header::before,\r\nspell-wishlist .aq-form ~ .aq-form .form-header::before,\r\nspell-wishlist .he-form ~ .he-form .form-header::before,\r\nspell-wishlist .vi-form ~ .vi-form .form-header::before,\r\nspell-wishlist .te-form ~ .te-form .form-header::before,\r\nspell-wishlist .ig-form ~ .ig-form .form-header::before,\r\nspell-wishlist .me-form ~ .me-form .form-header::before,\r\nspell-wishlist .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}",""]);const a=o},2244:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spellcasting-modifiers-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 1000px;\r\n    float: left;\r\n}\r\n\r\nspellcasting-modifiers-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid .arts {\r\n    width: 60px;\r\n    text-align: center;\r\n}",""]);const a=o},6019:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"talisman-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 2062px;\r\n    float: left;\r\n}\r\n\r\ntalisman-block .effects .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .container > .description {\r\n    width: 800px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .effects.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid > *, talisman-block > .container .effects.grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\ntalisman-block .bonuses, talisman-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\ntalisman-block .bonuses .name {\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .effect .notes {\r\n    width: 400px;\r\n}\r\n\r\ntalisman-block .effect .usages, talisman-block .effect .range, talisman-block .effect .duration, talisman-block .effect .target, talisman-block .effect .arts {\r\n    width: 150px;\r\n}",""]);const a=o},1860:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"vis-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nvis-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nvis-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nvis-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nvis-block .add-item-input {\r\n    margin-top: 15px;\r\n    width: 100px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nvis-block .name {\r\n    width: 100px;\r\n}\r\n\r\nvis-block .income, vis-block .notes {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},2410:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"warping-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n    width: 420px;\r\n}\r\n\r\nwarping-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nwarping-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nwarping-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nwarping-block .warping-level {\r\n    text-align: center;\r\n}\r\n\r\nwarping-block .add-effect-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}",""]);const a=o},8840:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"xp-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nxp-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nxp-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 70px 100px auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nxp-list > .container > .grid.past-xp-entry {\r\n    grid-template-columns: 70px 100px auto auto auto auto;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n}\r\n\r\nxp-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nxp-list .description, xp-list .plans {\r\n    width: 400px;\r\n}\r\n\r\nxp-list .xp {\r\n    width: 600px;\r\n}\r\n\r\nxp-list .correspondence, xp-list .area-lore  {\r\n    width: 150px;\r\n}\r\n\r\nxp-list .separator {\r\n    height: 40px;\r\n}",""]);const a=o},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,s,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},1667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:t=>{t.exports=function(t){return t[1]}},3379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],h=r[c]||0,u="".concat(c," ").concat(h);r[c]=h+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=s(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var r=i(t=t||[],s=s||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=n(r[o]);e[a].references--}for(var l=i(t,s),c=0;c<r.length;c++){var h=n(r[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=l}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},8390:(t,e,n)=>{t.exports=n.p+"3747d62d05f8f09fb741.png"},3208:(t,e,n)=>{t.exports=n.p+"b037ca7f505f5c048bae.png"},164:(t,e,n)=>{t.exports=n.p+"5c3d1b2ce7bb3793be6e.png"},2:(t,e,n)=>{t.exports=n.p+"2b9f9a8912419b0f4b69.png"},2867:(t,e,n)=>{t.exports=n.p+"fe3a2cf273f4367e50c9.png"},3473:(t,e,n)=>{t.exports=n.p+"60e08010af0453fec957.png"},9462:(t,e,n)=>{t.exports=n.p+"c945e6443b532c587958.png"},8801:(t,e,n)=>{t.exports=n.p+"8a70e34efeda3124235b.png"},7786:(t,e,n)=>{t.exports=n.p+"ec23475cb092652acfea.png"},3082:(t,e,n)=>{t.exports=n.p+"dd674023209c7164b31e.png"},7283:(t,e,n)=>{t.exports=n.p+"33cbb501e4e522021025.png"},7552:(t,e,n)=>{t.exports=n.p+"6b7b936e3906da3a44fa.png"},1668:(t,e,n)=>{t.exports=n.p+"92bd8516e50642f8233a.png"},3356:(t,e,n)=>{t.exports=n.p+"5bd76dab3a9d835f39f2.png"},8626:(t,e,n)=>{t.exports=n.p+"ec6a054a75f35ddbe8db.png"},4378:(t,e,n)=>{t.exports=n.p+"4a319709cc0699c694dc.png"},6035:(t,e,n)=>{t.exports=n.p+"d7f92444f5cd52674ec6.png"},1526:(t,e,n)=>{t.exports=n.p+"eed15122701badbc265d.png"}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/sheet-maker/",n.b=document.baseURI||self.location.href,n.nc=void 0;var i={};(()=>{n.d(i,{n:()=>KL});var t={};n.r(t),n.d(t,{default:()=>QS,dependencies:()=>GS,name:()=>KS,register:()=>YS,template:()=>_S});var e={};n.r(e),n.d(e,{CharacterTypeSelector:()=>QC});var s={};n.r(s),n.d(s,{default:()=>tA,dependencies:()=>eA,name:()=>YC,register:()=>iA,template:()=>JC});var r={};n.r(r),n.d(r,{DescriptionBlock:()=>sA});var o={};n.r(o),n.d(o,{default:()=>aA,dependencies:()=>lA,name:()=>rA,register:()=>hA,template:()=>oA});var a={};n.r(a),n.d(a,{VirtuesList:()=>uA});var l={};n.r(l),n.d(l,{default:()=>fA,dependencies:()=>gA,name:()=>dA,register:()=>mA,template:()=>pA});var c={};n.r(c),n.d(c,{FlawsList:()=>yA});var h={};n.r(h),n.d(h,{default:()=>SA,dependencies:()=>CA,name:()=>xA,register:()=>EA,template:()=>kA});var u={};n.r(u),n.d(u,{PersonalityTraitsList:()=>TA});var d={};n.r(d),n.d(d,{default:()=>PA,dependencies:()=>LA,name:()=>OA,register:()=>jA,template:()=>RA});var p={};n.r(p),n.d(p,{WarpingBlock:()=>UA});var f={};n.r(f),n.d(f,{default:()=>FA,dependencies:()=>VA,name:()=>NA,register:()=>zA,template:()=>BA});var g={};n.r(g),n.d(g,{Description:()=>qA});var v={};n.r(v),n.d(v,{default:()=>_A,dependencies:()=>QA,name:()=>WA,register:()=>XA,template:()=>KA});var m={};n.r(m),n.d(m,{AbilitiesBlock:()=>YA});var y={};n.r(y),n.d(y,{default:()=>iE,dependencies:()=>sE,name:()=>eE,register:()=>oE,template:()=>nE});var b={};n.r(b),n.d(b,{CharacteristicsBlock:()=>aE});var w={};n.r(w),n.d(w,{default:()=>dE,dependencies:()=>pE,name:()=>hE,register:()=>gE,template:()=>uE});var x={};n.r(x),n.d(x,{FatigueBlock:()=>vE});var k={};n.r(k),n.d(k,{default:()=>xE,dependencies:()=>kE,name:()=>bE,register:()=>CE,template:()=>wE});var S={};n.r(S),n.d(S,{DamageBlock:()=>AE});var C={};n.r(C),n.d(C,{default:()=>OE,dependencies:()=>RE,name:()=>$E,register:()=>LE,template:()=>IE});var A={};n.r(A),n.d(A,{ConfidenceBlock:()=>ME});var E={};n.r(E),n.d(E,{default:()=>FE,dependencies:()=>VE,name:()=>NE,register:()=>zE,template:()=>BE});var T={};n.r(T),n.d(T,{ActiveMagicList:()=>qE});var $={};n.r($),n.d($,{default:()=>WE,dependencies:()=>KE,name:()=>HE,register:()=>QE,template:()=>ZE});var I={};n.r(I),n.d(I,{Stats:()=>GE});var O={};n.r(O),n.d(O,{default:()=>eT,dependencies:()=>nT,name:()=>JE,register:()=>sT,template:()=>tT});var R={};n.r(R),n.d(R,{ArtsBlock:()=>rT});var P={};n.r(P),n.d(P,{default:()=>hT,dependencies:()=>uT,name:()=>lT,register:()=>pT,template:()=>cT});var L={};n.r(L),n.d(L,{SpellcastingModifiersBlock:()=>fT});var M={};n.r(M),n.d(M,{default:()=>bT,dependencies:()=>wT,name:()=>mT,register:()=>kT,template:()=>yT});var j={};n.r(j),n.d(j,{SpellList:()=>ST});var U={};n.r(U),n.d(U,{default:()=>$T,dependencies:()=>IT,name:()=>ET,register:()=>RT,template:()=>TT});var N={};n.r(N),n.d(N,{SpellWishlist:()=>PT});var B={};n.r(B),n.d(B,{default:()=>NT,dependencies:()=>BT,name:()=>jT,register:()=>VT,template:()=>UT});var F={};n.r(F),n.d(F,{Sigil:()=>DT});var V={};n.r(V),n.d(V,{default:()=>HT,dependencies:()=>ZT,name:()=>zT,register:()=>KT,template:()=>qT});var D={};n.r(D),n.d(D,{Magic:()=>_T});var z={};n.r(z),n.d(z,{default:()=>JT,dependencies:()=>t$,name:()=>XT,register:()=>n$,template:()=>YT});var q={};n.r(q),n.d(q,{LabStats:()=>i$});var H={};n.r(H),n.d(H,{default:()=>l$,dependencies:()=>c$,name:()=>o$,register:()=>u$,template:()=>a$});var Z={};n.r(Z),n.d(Z,{ResearchProjects:()=>d$});var W={};n.r(W),n.d(W,{default:()=>m$,dependencies:()=>y$,name:()=>g$,register:()=>w$,template:()=>v$});var K={};n.r(K),n.d(K,{LabModificationsList:()=>x$});var _={};n.r(_),n.d(_,{default:()=>E$,dependencies:()=>T$,name:()=>C$,register:()=>I$,template:()=>A$});var Q={};n.r(Q),n.d(Q,{LabDescriptionBlock:()=>O$});var G={};n.r(G),n.d(G,{default:()=>L$,dependencies:()=>M$,name:()=>R$,register:()=>U$,template:()=>P$});var X={};n.r(X),n.d(X,{Lab:()=>N$});var Y={};n.r(Y),n.d(Y,{default:()=>z$,dependencies:()=>q$,name:()=>V$,register:()=>Z$,template:()=>D$});var J={};n.r(J),n.d(J,{CarriedBelongingsBlock:()=>W$});var tt={};n.r(tt),n.d(tt,{default:()=>X$,dependencies:()=>Y$,name:()=>Q$,register:()=>tI,template:()=>G$});var et={};n.r(et),n.d(et,{SanctumBelongingsBlock:()=>eI});var nt={};n.r(nt),n.d(nt,{default:()=>oI,dependencies:()=>aI,name:()=>sI,register:()=>cI,template:()=>rI});var it={};n.r(it),n.d(it,{VisBlock:()=>hI});var st={};n.r(st),n.d(st,{default:()=>pI,dependencies:()=>fI,name:()=>uI,register:()=>vI,template:()=>dI});var rt={};n.r(rt),n.d(rt,{Belongings:()=>mI});var ot={};n.r(ot),n.d(ot,{default:()=>kI,dependencies:()=>SI,name:()=>wI,register:()=>AI,template:()=>xI});var at={};n.r(at),n.d(at,{NotesBlock:()=>EI});var lt={};n.r(lt),n.d(lt,{default:()=>RI,dependencies:()=>PI,name:()=>II,register:()=>MI,template:()=>OI});var ct={};n.r(ct),n.d(ct,{BackgroundBlock:()=>jI});var ht={};n.r(ht),n.d(ht,{default:()=>VI,dependencies:()=>DI,name:()=>BI,register:()=>qI,template:()=>FI});var ut={};n.r(ut),n.d(ut,{QuestList:()=>HI});var dt={};n.r(dt),n.d(dt,{default:()=>QI,dependencies:()=>GI,name:()=>KI,register:()=>YI,template:()=>_I});var pt={};n.r(pt),n.d(pt,{NpcList:()=>JI});var ft={};n.r(ft),n.d(ft,{default:()=>nO,dependencies:()=>iO,name:()=>tO,register:()=>rO,template:()=>eO});var gt={};n.r(gt),n.d(gt,{Notes:()=>oO});var vt={};n.r(vt),n.d(vt,{default:()=>uO,dependencies:()=>dO,name:()=>cO,register:()=>fO,template:()=>hO});var mt={};n.r(mt),n.d(mt,{XpList:()=>gO});var yt={};n.r(yt),n.d(yt,{default:()=>wO,dependencies:()=>xO,name:()=>yO,register:()=>SO,template:()=>bO});var bt={};n.r(bt),n.d(bt,{AgeBlock:()=>CO});var wt={};n.r(wt),n.d(wt,{default:()=>TO,dependencies:()=>$O,name:()=>AO,register:()=>OO,template:()=>EO});var xt={};n.r(xt),n.d(xt,{Progression:()=>RO});var kt={};n.r(kt),n.d(kt,{default:()=>UO,dependencies:()=>NO,name:()=>MO,register:()=>FO,template:()=>jO});var St={};n.r(St),n.d(St,{TalismanBlock:()=>VO});var Ct={};n.r(Ct),n.d(Ct,{default:()=>ZO,dependencies:()=>WO,name:()=>qO,register:()=>_O,template:()=>HO});var At={};n.r(At),n.d(At,{MagicItemsBlock:()=>QO});var Et={};n.r(Et),n.d(Et,{default:()=>YO,dependencies:()=>JO,name:()=>GO,register:()=>eR,template:()=>XO});var Tt={};n.r(Tt),n.d(Tt,{Enchantments:()=>nR});var $t={};n.r($t),n.d($t,{default:()=>rR,dependencies:()=>oR,name:()=>iR,register:()=>lR,template:()=>sR});var It={};n.r(It),n.d(It,{default:()=>fR,dependencies:()=>gR,name:()=>dR,register:()=>mR,template:()=>pR});var Ot={};n.r(Ot),n.d(Ot,{default:()=>CR,dependencies:()=>AR,name:()=>kR,register:()=>TR,template:()=>SR});var Rt={};n.r(Rt),n.d(Rt,{default:()=>LR,dependencies:()=>MR,name:()=>RR,register:()=>UR,template:()=>PR});var Pt={};n.r(Pt),n.d(Pt,{default:()=>zR,dependencies:()=>qR,name:()=>VR,register:()=>ZR,template:()=>DR});var Lt={};n.r(Lt),n.d(Lt,{default:()=>XR,dependencies:()=>YR,name:()=>QR,register:()=>tP,template:()=>GR});var Mt={};n.r(Mt),n.d(Mt,{default:()=>oP,dependencies:()=>aP,name:()=>sP,register:()=>cP,template:()=>rP});var jt={};n.r(jt),n.d(jt,{default:()=>gP,dependencies:()=>vP,name:()=>pP,register:()=>yP,template:()=>fP});var Ut={};n.r(Ut),n.d(Ut,{default:()=>CP,dependencies:()=>AP,name:()=>kP,register:()=>TP,template:()=>SP});var Nt={};n.r(Nt),n.d(Nt,{default:()=>LP,dependencies:()=>MP,name:()=>RP,register:()=>UP,template:()=>PP});var Bt={};n.r(Bt),n.d(Bt,{NameBlock:()=>NP});var Ft={};n.r(Ft),n.d(Ft,{default:()=>VP,dependencies:()=>DP,name:()=>BP,register:()=>qP,template:()=>FP});var Vt={};n.r(Vt),n.d(Vt,{default:()=>QP,dependencies:()=>GP,name:()=>KP,register:()=>YP,template:()=>_P});var Dt={};n.r(Dt),n.d(Dt,{default:()=>sL,dependencies:()=>rL,name:()=>nL,register:()=>aL,template:()=>iL});var zt={};n.r(zt),n.d(zt,{default:()=>pL,dependencies:()=>fL,name:()=>uL,register:()=>vL,template:()=>dL});var qt={};n.r(qt),n.d(qt,{default:()=>kL,dependencies:()=>SL,name:()=>wL,register:()=>AL,template:()=>xL});var Ht={};n.r(Ht),n.d(Ht,{default:()=>PL,dependencies:()=>LL,name:()=>OL,register:()=>jL,template:()=>RL});var Zt={};function Wt(t){return"object"==typeof t&&null!==t||"function"==typeof t}function Kt(t){return null==t}n.r(Zt),n.d(Zt,{default:()=>DL,dependencies:()=>zL,name:()=>FL,register:()=>HL,template:()=>VL});let _t=new WeakMap;function Qt(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function Gt(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function Xt(t,e,n){let i=_t.get(t);if(void 0===i){if(!n)return;i=new Map,_t.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function Yt(t,e,n){const i=Xt(e,n,!1);return void 0!==i&&i.has(t)}function Jt(t,e,n){if(Yt(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&Jt(t,i,n)}function te(t,e,n){const i=Xt(e,n,!1);if(void 0!==i)return i.get(t)}function ee(t,e,n){if(Yt(t,e,n))return te(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?ee(t,i,n):void 0}function ne(t,e,n,i){Xt(n,i,!0).set(t,e)}function ie(t,e){const n=[],i=Xt(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function se(t,e){const n=ie(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=se(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}function re(t,e){return function(n,i){if(!Wt(n))throw Qt("@metadata",[t,e,n,i],"target",n,"Object or Function");ne(t,e,n,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(i))}}function oe(t,e,n,i){if(void 0!==n){if(!Array.isArray(t))throw Qt("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if(!Wt(e))throw Qt("Metadata.decorate",[t,e,n,i],"target",e,"Object or Function");if(!Wt(i)&&!Kt(i))throw Qt("Metadata.decorate",[t,e,n,i],"attributes",i,"Object, Function, null, or undefined");return null===i&&(i=void 0),function(t,e,n,i){for(let s=t.length-1;s>=0;--s){const r=(0,t[s])(e,n,i);if(!Kt(r)){if(!Wt(r))throw Qt("DecorateProperty",[t,e,n,i],"decorated",r,"Object, Function, null, or undefined");i=r}}return i}(t,e,n=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(n),i)}if(!Array.isArray(t))throw Qt("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if("function"!=typeof e)throw Qt("Metadata.decorate",[t,e,n,i],"target",e,"Function");return function(t,e){for(let n=t.length-1;n>=0;--n){const i=(0,t[n])(e);if(!Kt(i)){if("function"!=typeof i)throw Qt("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function ae(t,e,n,i){if(!Wt(n))throw Qt("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return ne(t,e,n,Gt(i))}function le(t,e,n){if(!Wt(e))throw Qt("Metadata.has",[t,e,n],"target",e,"Object or Function");return Jt(t,e,Gt(n))}function ce(t,e,n){if(!Wt(e))throw Qt("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return Yt(t,e,Gt(n))}function he(t,e,n){if(!Wt(e))throw Qt("Metadata.get",[t,e,n],"target",e,"Object or Function");return ee(t,e,Gt(n))}function ue(t,e,n){if(!Wt(e))throw Qt("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return te(t,e,Gt(n))}function de(t,e){if(!Wt(t))throw Qt("Metadata.getKeys",[t,e],"target",t,"Object or Function");return se(t,Gt(e))}function pe(t,e){if(!Wt(t))throw Qt("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return ie(t,Gt(e))}function fe(t,e,n){if(!Wt(e))throw Qt("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=Xt(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,Gt(n))}const ge={define:ae,has:le,hasOwn:ce,get:he,getOwn:ue,getKeys:de,getOwnKeys:pe,delete:fe};function ve(t,e,n,i,s){if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:s,value:n}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}const me="[[$au]]";function ye(t,e,n){ve(t,me,_t,e,n),ve(t,"metadata",re,e,n),ve(t,"decorate",oe,e,n),ve(t,"defineMetadata",ae,e,n),ve(t,"hasMetadata",le,e,n),ve(t,"hasOwnMetadata",ce,e,n),ve(t,"getMetadata",he,e,n),ve(t,"getOwnMetadata",ue,e,n),ve(t,"getMetadataKeys",de,e,n),ve(t,"getOwnMetadataKeys",pe,e,n),ve(t,"deleteMetadata",fe,e,n)}const be=ge.getOwn,we=ge.hasOwn,xe=ge.define,ke=t=>"function"==typeof t,Se=t=>"string"==typeof t,Ce=()=>Object.create(null),Ae={};function Ee(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=Ae[t];if(void 0!==e)return e;const n=t.length;if(0===n)return Ae[t]=!1;let i=0,s=0;for(;s<n;++s)if(i=t.charCodeAt(s),0===s&&48===i&&n>1||i<48||i>57)return Ae[t]=!1;return Ae[t]=!0}default:return!1}}function Te(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function $e(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const Ie=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(Ce(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function n(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const i=t.length;if(0===i)return t;let s,r=!1,o="",a="",l=0,c=t.charAt(0),h=n(c),u=0;for(;u<i;++u)s=l,a=c,l=h,c=t.charAt(u+1),h=n(c),0===l?o.length>0&&(r=!0):(!r&&o.length>0&&2===l&&(r=3===s||3===h),o+=e(a,r),r=!1);return o}}(),Oe=function(){const t=Ce();function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=Ie(n,e)),i}}(),Re=function(){const t=Ce();return function(e){let n=t[e];return void 0===n&&(n=Oe(e),n.length>0&&(n=n[0].toUpperCase()+n.slice(1)),t[e]=n),n}}(),Pe=function(){const t=Ce();function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=Ie(n,e)),i}}();function Le(t){const{length:e}=t,n=Array(e);let i=0;for(;i<e;++i)n[i]=t[i];return n}const Me={};function je(t){return void 0===Me[t]&&(Me[t]=0),++Me[t]}function Ue(t,e){return t-e}function Ne(t,e,n){return{configurable:!0,enumerable:n.enumerable,get(){const t=n.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:n.enumerable}),t}}}function Be(...t){const e=[];let n=0;const i=t.length;let s,r=0,o=0;for(;o<i;++o)if(s=t[o],void 0!==s){r=s.length;let t=0;for(;t<r;++t)e[n++]=s[t]}return e}function Fe(...t){const e=t.length;let n,i=0;for(;e>i;++i)if(n=t[i],void 0!==n)return n;throw new Error("No default value found")}const Ve=function(){const t=Function.prototype,e=Object.getPrototypeOf,n=new WeakMap;let i,s=t,r=0;return function(o){if(i=n.get(o),void 0===i)for(n.set(o,i=[s=o]),r=0;(s=e(s))!==t;)i[++r]=s;return i}}();function De(...t){return Object.assign(Ce(),...t)}const ze=function(){const t=new WeakMap;let e=!1,n="",i=0;return function(s){return e=t.get(s),void 0===e&&(n=s.toString(),i=n.length,e=i>=29&&i<=100&&125===n.charCodeAt(i-1)&&n.charCodeAt(i-2)<=32&&93===n.charCodeAt(i-3)&&101===n.charCodeAt(i-4)&&100===n.charCodeAt(i-5)&&111===n.charCodeAt(i-6)&&99===n.charCodeAt(i-7)&&32===n.charCodeAt(i-8)&&101===n.charCodeAt(i-9)&&118===n.charCodeAt(i-10)&&105===n.charCodeAt(i-11)&&116===n.charCodeAt(i-12)&&97===n.charCodeAt(i-13)&&110===n.charCodeAt(i-14)&&88===n.charCodeAt(i-15),t.set(s,e)),e}}();function qe(t,e){return t instanceof Promise?t.then(e):e(t)}function He(...t){let e,n,i,s=0,r=t.length;for(;s<r;++s)e=t[s],(e=t[s])instanceof Promise&&(void 0===n?n=e:void 0===i?i=[n,e]:i.push(e));return void 0===i?n:Promise.all(i)}const Ze="au:annotation",We=(t,e)=>void 0===e?`${Ze}:${t}`:`${Ze}:${t}:${e}`,Ke=(t,e)=>{const n=be(Ze,t);void 0===n?xe(Ze,[e],t):n.push(e)},_e=Object.freeze({name:"au:annotation",appendTo:Ke,set(t,e,n){xe(We(e),n,t)},get:(t,e)=>be(We(e),t),getKeys(t){let e=be(Ze,t);return void 0===e&&xe(Ze,e=[],t),e},isKey:t=>t.startsWith(Ze),keyFor:We}),Qe="au:resource",Ge=Object.freeze({name:Qe,appendTo(t,e){const n=be(Qe,t);void 0===n?xe(Qe,[e],t):n.push(e)},has:t=>we(Qe,t),getAll(t){const e=be(Qe,t);return void 0===e?zn:e.map((e=>be(e,t)))},getKeys(t){let e=be(Qe,t);return void 0===e&&xe(Qe,e=[],t),e},isKey:t=>t.startsWith(Qe),keyFor:(t,e)=>void 0===e?`${Qe}:${t}`:`${Qe}:${t}:${e}`}),Xe={annotation:_e,resource:Ge},Ye=Object.prototype.hasOwnProperty;function Je(t,e,n,i){let s=be(We(t),n);return void 0===s?(s=e[t],void 0===s?(s=n[t],void 0!==s&&Ye.call(n,t)?s:i()):s):s}function tn(t,e,n){let i=be(We(t),e);return void 0===i?(i=e[t],void 0!==i&&Ye.call(e,t)?i:n()):i}function en(t,e,n){const i=e[t];return void 0===i?n():i}!function(t,e=!0,n=!1,i=!0,s=!0){if(function(t){return me in t}(t)){if(t[me]===_t)return;if(t[me]instanceof WeakMap)return void(_t=t[me]);throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const r=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`)}n&&ye(t,i,s)}else ye(t,i,s)}(Reflect,!1,!1);class nn{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,Un(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:n,key:i}=this;return this.container=this.key=void 0,n.registerResolver(i,new Sn(i,t,e))}}function sn(t){const e=t.slice(),n=Object.keys(t),i=n.length;let s;for(let r=0;r<i;++r)s=n[r],Ee(s)||(e[s]=t[s]);return e}const rn={none(t){throw Error(`AUR0002:${t.toString()}`)},singleton:t=>new Sn(t,1,t),transient:t=>new Sn(t,2,t)};class on{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){var e,n;return void 0===t||t===on.DEFAULT?on.DEFAULT:new on(null!==(e=t.inheritParentResources)&&void 0!==e&&e,null!==(n=t.defaultResolver)&&void 0!==n?n:rn.singleton)}}on.DEFAULT=on.from({});const an={createContainer:t=>new Ln(null,on.from(t)),getDesignParamtypes:t=>be("design:paramtypes",t),getAnnotationParamtypes(t){const e=We("di:paramtypes");return be(e,t)},getOrCreateAnnotationParamTypes:cn,getDependencies:ln,createInterface(t,e){const n=ke(t)?t:e,i=Se(t)?t:void 0,s=function(t,e,n){if(null==t||void 0!==new.target)throw new Error(`AUR0001:${s.friendlyName}`);cn(t)[n]=s};return s.$isInterface=!0,s.friendlyName=null==i?"(anonymous)":i,null!=n&&(s.register=function(t,e){return n(new nn(t,null!=e?e:s))}),s.toString=function(){return`InterfaceSymbol<${s.friendlyName}>`},s},inject:(...t)=>function(e,n,i){if("number"==typeof i){const n=cn(e),s=t[0];void 0!==s&&(n[i]=s)}else if(n){const i=cn(e.constructor),s=t[0];void 0!==s&&(i[n]=s)}else if(i){const e=cn(i.value);let n;for(let i=0;i<t.length;++i)n=t[i],void 0!==n&&(e[i]=n)}else{const n=cn(e);let i;for(let e=0;e<t.length;++e)i=t[e],void 0!==i&&(n[e]=i)}},transient:t=>(t.register=function(e){return Nn.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=vn)=>(t.register=function(e){return Nn.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)};function ln(t){const e=We("di:dependencies");let n=be(e,t);if(void 0===n){const i=t.inject;if(void 0===i){const e=an.getDesignParamtypes(t),i=an.getAnnotationParamtypes(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);n=ke(e)&&e!==Function.prototype?sn(ln(e)):[]}else n=sn(i);else if(void 0===i)n=sn(e);else{n=sn(e);let t,s=i.length,r=0;for(;r<s;++r)t=i[r],void 0!==t&&(n[r]=t);const o=Object.keys(i);let a;for(r=0,s=o.length,r=0;r<s;++r)a=o[r],Ee(a)||(n[a]=i[a])}}else n=sn(i);xe(e,n,t),Ke(t,e)}return n}function cn(t){const e=We("di:paramtypes");let n=be(e,t);return void 0===n&&(xe(e,n=[],t),Ke(t,e)),n}const hn=an.createInterface("IContainer"),un=hn;function dn(t){return function(e){const n=function(t,e,i){an.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return t(e,n,i)},n}}const pn=an.inject;function fn(t){return an.transient(t)}function gn(t){return null==t?fn:fn(t)}const vn={scoped:!1},mn=function(t,e){e=!!e;const n=function(t,e,i){an.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return((t,e,n,i)=>n.getAll(t,i))(t,0,i,e)},n},yn=(dn(((t,e,n)=>()=>n.get(t))),dn(((t,e,n)=>n.has(t,!0)?n.get(t):void 0)));function bn(t,e,n){an.inject(bn)(t,e,n)}function wn(t,e,n){return e.getFactory(t).construct(n)}var xn,kn;bn.$isResolver=!0,bn.resolve=()=>{},dn(((t,e,n)=>(...i)=>e.getFactory(t).construct(n,i))),dn(((t,e,n)=>{const i=wn(t,e,n),s=new Bn(String(t),i);return n.registerResolver(t,s,!0),i})),dn(((t,e,n)=>wn(t,e,n))),(kn=xn||(xn={}))[kn.instance=0]="instance",kn[kn.singleton=1]="singleton",kn[kn.transient=2]="transient",kn[kn.callback=3]="callback",kn[kn.array=4]="array",kn[kn.alias=5]="alias";class Sn{constructor(t,e,n){this.key=t,this.strategy=e,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`AUR0003:${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const n=t.getFactory(this.state);if(null===n)throw new Error(`AUR0004:${String(this.key)}`);return n.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`AUR0005:${this.strategy}`)}}getFactory(t){var e,n,i;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(i=null===(n=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===n?void 0:n.call(e,t))&&void 0!==i?i:null;default:return null}}}function Cn(t){return this.get(t)}function An(t,e){return e(t)}class En{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let n;return n=void 0===e?new this.Type(...this.dependencies.map(Cn,t)):new this.Type(...this.dependencies.map(Cn,t),...e),null==this.transformers?n:this.transformers.reduce(An,n)}registerTransformer(t){var e;(null!==(e=this.transformers)&&void 0!==e?e:this.transformers=[]).push(t)}}const Tn={$isResolver:!0,resolve:(t,e)=>e};function $n(t){return ke(t.register)}function In(t){return function(t){return $n(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}function On(t){return void 0!==t.prototype}const Rn=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]);let Pn=0;class Ln{constructor(t,e){this.parent=t,this.config=e,this.id=++Pn,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=Ce()):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign(Ce(),t.res,this.root.res):this.res=Ce()),this.u.set(hn,Tn)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw new Error(`AUR0006:${t.map(String)}`);let e,n,i,s,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],Wt(e))if($n(e))e.register(this);else if(Xe.resource.has(e)){const t=Xe.resource.getAll(e);if(1===t.length)t[0].register(this);else for(s=0,r=t.length;r>s;)t[s].register(this),++s}else if(On(e))Nn.singleton(e,e).register(this);else for(n=Object.keys(e),s=0,r=n.length;s<r;++s)i=e[n[s]],Wt(i)&&($n(i)?i.register(this):this.register(i));return--this.t,this}registerResolver(t,e,n=!1){Fn(t);const i=this.u,s=i.get(t);if(null==s){if(i.set(t,e),function(t){return Se(t)&&t.indexOf(":")>0}(t)){if(void 0!==this.res[t])throw new Error(`AUR0007:${t}`);this.res[t]=e}}else s instanceof Sn&&4===s.strategy?s.state.push(e):i.set(t,new Sn(t,4,[s,e]));return n&&this.i.set(t,e),e}registerTransformer(t,e){const n=this.getResolver(t);if(null==n)return!1;if(n.getFactory){const t=n.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(Fn(t),void 0!==t.resolve)return t;let n,i=this;for(;null!=i;){if(n=i.u.get(t),null!=n)return n;if(null==i.parent){const n=In(t)?this:i;return e?this.R(t,n):null}i=i.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(Fn(t),t.$isResolver)return t.resolve(this,this);let e,n=this;for(;null!=n;){if(e=n.u.get(t),null!=e)return e.resolve(n,this);if(null==n.parent){const i=In(t)?this:n;return e=this.R(t,i),e.resolve(n,this)}n=n.parent}throw new Error(`AUR0008:${String(t)}`)}getAll(t,e=!1){Fn(t);const n=this;let i,s=n;if(e){let e=zn;for(;null!=s;)i=s.u.get(t),null!=i&&(e=e.concat(Vn(i,s,n))),s=s.parent;return e}for(;null!=s;){if(i=s.u.get(t),null!=i)return Vn(i,s,n);if(s=s.parent,null==s)return zn}return zn}invoke(t,e){if(ze(t))throw Dn(t);return void 0===e?new t(...ln(t).map(Cn,this)):new t(...ln(t).map(Cn,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(ze(t))throw Dn(t);this.h.set(t,e=new En(t,ln(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===on.DEFAULT?new Ln(this,this.config):new Ln(this,on.from({...this.config,inheritParentResources:!1})):new Ln(this,on.from(null!=t?t:this.config))}disposeResolvers(){const t=this.u,e=this.i;let n,i;for([i,n]of e.entries())n.dispose(),t.delete(i);e.clear()}find(t,e){const n=t.keyFrom(e);let i=this.res[n];if(void 0===i&&(i=this.root.res[n],void 0===i))return null;if(null===i)return null;if(ke(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const n=be(t.name,e.Type);return void 0===n?null:n}return null}create(t,e){var n,i;const s=t.keyFrom(e);let r=this.res[s];return void 0===r?(r=this.root.res[s],void 0===r?null:null!==(n=r.resolve(this.root,this))&&void 0!==n?n:null):null!==(i=r.resolve(this,this))&&void 0!==i?i:null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}R(t,e){if(!ke(t))throw new Error(`AUR0009:${t}`);if(Rn.has(t.name))throw new Error(`AUR0010:${t.name}`);if($n(t)){const n=t.register(e,t);if(!(n instanceof Object)||null==n.resolve){const n=e.u.get(t);if(null!=n)return n;throw new Error("AUR0011")}return n}if(Xe.resource.has(t)){const n=Xe.resource.getAll(t);if(1===n.length)n[0].register(e);else{const t=n.length;for(let i=0;i<t;++i)n[i].register(e)}const i=e.u.get(t);if(null!=i)return i;throw new Error("AUR0011")}if(t.$isInterface)throw new Error(`AUR0012:${t.friendlyName}`);{const n=this.config.defaultResolver(t,e);return e.u.set(t,n),n}}}class Mn{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const jn=new WeakMap;function Un(t){return function(e,n,i){let s=jn.get(e);if(void 0===s&&jn.set(e,s=new WeakMap),s.has(i))return s.get(i);const r=t(e,n,i);return s.set(i,r),r}}const Nn={instance:(t,e)=>new Sn(t,0,e),singleton:(t,e)=>new Sn(t,1,e),transient:(t,e)=>new Sn(t,2,e),callback:(t,e)=>new Sn(t,3,e),cachedCallback:(t,e)=>new Sn(t,3,Un(e)),aliasTo:(t,e)=>new Sn(e,5,t),defer:(t,...e)=>new Mn(t,e)};class Bn{constructor(t,e){this.C=null,this.$=t,void 0!==e&&(this.C=e)}get friendlyName(){return this.$}prepare(t){this.C=t}get $isResolver(){return!0}resolve(){if(null==this.C)throw new Error(`AUR0013:${this.$}`);return this.C}dispose(){this.C=null}}function Fn(t){if(null==t)throw new Error("AUR0014")}function Vn(t,e,n){if(t instanceof Sn&&4===t.strategy){const i=t.state;let s=i.length;const r=new Array(s);for(;s--;)r[s]=i[s].resolve(e,n);return r}return[t.resolve(e,n)]}function Dn(t){return new Error(`AUR0015:${t.name}`)}const zn=Object.freeze([]),qn=Object.freeze({});function Hn(){}const Zn=an.createInterface("IPlatform");function Wn(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function Kn(t,e){return function(n,i){e(n,i,t)}}var _n,Qn;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(_n||(_n={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Qn||(Qn={}));const Gn=an.createInterface("ILogConfig",(t=>t.instance(new ii(0,3)))),Xn=an.createInterface("ISink"),Yn=an.createInterface("ILogEventFactory",(t=>t.singleton(ai))),Jn=an.createInterface("ILogger",(t=>t.singleton(ci))),ti=an.createInterface("ILogScope"),ei=Object.freeze({key:We("logger-sink-handles"),define(t,e){return xe(this.key,e.handles,t.prototype),t},getHandles(t){return ge.get(this.key,t)}}),ni=De({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class ii{constructor(t,e){this.colorOptions=t,this.level=e}}const si=function(){const t=[De({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),De({TRC:ni.grey("TRC"),DBG:ni.grey("DBG"),INF:ni.white("INF"),WRN:ni.yellow("WRN"),ERR:ni.red("ERR"),FTL:ni.red("FTL"),QQQ:ni.grey("???")})];return function(e,n){return e<=0?t[n].TRC:e<=1?t[n].DBG:e<=2?t[n].INF:e<=3?t[n].WRN:e<=4?t[n].ERR:e<=5?t[n].FTL:t[n].QQQ}}();function ri(t,e){return 0===e?new Date(t).toISOString():ni.grey(new Date(t).toISOString())}class oi{constructor(t,e,n,i,s,r){this.severity=t,this.message=e,this.optionalParams=n,this.scope=i,this.colorOptions=s,this.timestamp=r}toString(){const{severity:t,message:e,scope:n,colorOptions:i,timestamp:s}=this;return 0===n.length?`${ri(s,i)} [${si(t,i)}] ${e}`:`${ri(s,i)} [${si(t,i)} ${function(t,e){return 0===e?t.join("."):t.map(ni.cyan).join(".")}(n,i)}] ${e}`}}let ai=class{constructor(t){this.config=t}createLogEvent(t,e,n,i){return new oi(e,n,i,t.scope,this.config.colorOptions,Date.now())}};ai=Wn([Kn(0,Gn)],ai);let li=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const n=t.optionalParams;if(void 0===n||0===n.length){const n=t.toString();switch(t.severity){case 0:case 1:return e.debug(n);case 2:return e.info(n);case 3:return e.warn(n);case 4:case 5:return e.error(n)}}else{let i=t.toString(),s=0;for(;i.includes("%s");)i=i.replace("%s",String(n[s++]));switch(t.severity){case 0:case 1:return e.debug(i,...n.slice(s));case 2:return e.info(i,...n.slice(s));case 3:return e.warn(i,...n.slice(s));case 4:case 5:return e.error(i,...n.slice(s))}}}}static register(e){Nn.singleton(Xn,t).register(e)}};li=Wn([Kn(0,Zn)],li);let ci=class t{constructor(t,e,n,i=[],s=null){var r,o,a,l,c,h;let u,d,p,f,g,v;if(this.config=t,this.factory=e,this.scope=i,this.scopedLoggers=Ce(),null===s){this.root=this,this.parent=this,u=this.traceSinks=[],d=this.debugSinks=[],p=this.infoSinks=[],f=this.warnSinks=[],g=this.errorSinks=[],v=this.fatalSinks=[];for(const t of n){const e=ei.getHandles(t);(null===(r=null==e?void 0:e.includes(0))||void 0===r||r)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&d.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&p.push(t),(null===(l=null==e?void 0:e.includes(3))||void 0===l||l)&&f.push(t),(null===(c=null==e?void 0:e.includes(4))||void 0===c||c)&&g.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&v.push(t)}}else this.root=s.root,this.parent=s,u=this.traceSinks=s.traceSinks,d=this.debugSinks=s.debugSinks,p=this.infoSinks=s.infoSinks,f=this.warnSinks=s.warnSinks,g=this.errorSinks=s.errorSinks,v=this.fatalSinks=s.fatalSinks}trace(t,...e){this.config.level<=0&&this.emit(this.traceSinks,0,t,e)}debug(t,...e){this.config.level<=1&&this.emit(this.debugSinks,1,t,e)}info(t,...e){this.config.level<=2&&this.emit(this.infoSinks,2,t,e)}warn(t,...e){this.config.level<=3&&this.emit(this.warnSinks,3,t,e)}error(t,...e){this.config.level<=4&&this.emit(this.errorSinks,4,t,e)}fatal(t,...e){this.config.level<=5&&this.emit(this.fatalSinks,5,t,e)}scopeTo(e){const n=this.scopedLoggers;let i=n[e];return void 0===i&&(i=n[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),i}emit(t,e,n,i){const s=ke(n)?n():n,r=this.factory.createLogEvent(this,e,s,i);for(let e=0,n=t.length;e<n;++e)t[e].handleEvent(r)}};function hi(t){return t}Wn([Ne],ci.prototype,"trace",null),Wn([Ne],ci.prototype,"debug",null),Wn([Ne],ci.prototype,"info",null),Wn([Ne],ci.prototype,"warn",null),Wn([Ne],ci.prototype,"error",null),Wn([Ne],ci.prototype,"fatal",null),ci=Wn([Kn(0,Gn),Kn(1,Yn),Kn(2,mn(Xn)),Kn(3,yn(ti)),Kn(4,bn)],ci),De({create:({level:t=3,colorOptions:e=0,sinks:n=[]}={})=>De({register(i){i.register(Nn.instance(Gn,new ii(e,t)));for(const t of n)ke(t)?i.register(Nn.singleton(Xn,t)):i.register(t);return i}})}),an.createInterface((t=>t.singleton(di)));class ui{constructor(t){this.$transform=t,this.A=new Map,this.j=new Map}transform(t){if(t instanceof Promise)return this.I(t);if("object"==typeof t&&null!==t)return this.O(t);throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`)}I(t){if(this.A.has(t))return this.A.get(t);const e=t.then((t=>this.O(t)));return this.A.set(t,e),e.then((e=>{this.A.set(t,e)})),e}O(t){if(this.j.has(t))return this.j.get(t);const e=this.$transform(this.M(t));return this.j.set(t,e),e instanceof Promise&&e.then((e=>{this.j.set(t,e)})),e}M(t){let e,n,i,s;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;n=ke(e.register),i=!1,s=zn;break;case"function":n=ke(e.register),i=void 0!==e.prototype,s=Xe.resource.getAll(e);break;default:continue}r.push(new fi(o,e,n,i,s))}return new pi(t,r)}}class di{constructor(){this.transformers=new Map}load(t,e=hi){const n=this.transformers;let i=n.get(e);return void 0===i&&n.set(e,i=new ui(e)),i.transform(t)}dispose(){this.transformers.clear()}}class pi{constructor(t,e){this.raw=t,this.items=e}}class fi{constructor(t,e,n,i,s){this.key=t,this.value=e,this.isRegistry=n,this.isConstructable=i,this.definitions=s}}class gi{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}const vi=an.createInterface("IEventAggregator",(t=>t.singleton(mi)));class mi{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw new Error(`Invalid channel name or instance: ${t}.`);if(Se(t)){let n=this.eventLookup[t];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)n[i](e,t)}}else{const e=this.messageHandlers.slice();let n=e.length;for(;n-- >0;)e[n].handle(t)}}subscribe(t,e){if(!t)throw new Error(`Invalid channel name or type: ${t}.`);let n,i;return Se(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),n=e,i=this.eventLookup[t]):(n=new gi(t,e),i=this.messageHandlers),i.push(n),{dispose(){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const n=this.subscribe(t,(function(t,i){n.dispose(),e(t,i)}));return n}}const yi=Object.prototype.hasOwnProperty,bi=Reflect.defineProperty,wi=t=>"function"==typeof t,xi=t=>"string"==typeof t;function ki(t,e,n){return bi(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function Si(t,e,n,i=!1){!i&&yi.call(t,e)||ki(t,e,n)}const Ci=()=>Object.create(null),Ai=ge.getOwn,Ei=ge.hasOwn,Ti=ge.define,$i=Xe.annotation.keyFor,Ii=Xe.resource.keyFor,Oi=Xe.resource.appendTo;function Ri(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Nn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class Pi{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)yi.call(t,e)&&(this[e]=t[e])}static create(t,e){return new Pi(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class Li{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new Li(null,t,null==e?Mi.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new Li(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new Li(t,e,Mi.create(e),!1)}}class Mi{constructor(t){this.bindingContext=t}static create(t){return new Mi(t)}}const ji=an.createInterface("ISignaler",(t=>t.singleton(Ui)));class Ui{constructor(){this.signals=Ci()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var Ni;function Bi(t){return function(e){return Hi.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(Ni||(Ni={}));class Fi{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;xi(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===Di;return new Fi(e,Fe(qi(e,"name"),n),Be(qi(e,"aliases"),i.aliases,e.aliases),Hi.keyFrom(n),Je("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Nn.singleton(n,e).register(t);break;case 2:Nn.instance(n,new Vi(t,e)).register(t)}Nn.aliasTo(n,e).register(t),Ri(i,Hi,n,t)}}class Vi{constructor(t,e){this.ctn=t,this.Type=e,this.deps=an.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class Di{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{bi(Di.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const zi=Ii("binding-behavior"),qi=(t,e)=>Ai($i(e),t),Hi=Object.freeze({name:zi,keyFrom:t=>`${zi}:${t}`,isType:t=>wi(t)&&Ei(zi,t),define(t,e){const n=Fi.create(t,e);return Ti(zi,n,n.Type),Ti(zi,n,n),Oi(e,zi),n.Type},getDefinition(t){const e=Ai(zi,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){Ti($i(e),n,t)},getAnnotation:qi});function Zi(t){return function(e){return Qi.define(t,e)}}class Wi{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return xi(t)?(n=t,i={name:n}):(n=t.name,i=t),new Wi(e,Fe(_i(e,"name"),n),Be(_i(e,"aliases"),i.aliases,e.aliases),Qi.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Nn.singleton(n,e).register(t),Nn.aliasTo(n,e).register(t),Ri(i,Qi,n,t)}}const Ki=Ii("value-converter"),_i=(t,e)=>Ai($i(e),t),Qi=Object.freeze({name:Ki,keyFrom:t=>`${Ki}:${t}`,isType:t=>wi(t)&&Ei(Ki,t),define(t,e){const n=Wi.create(t,e);return Ti(Ki,n,n.Type),Ti(Ki,n,n),Oi(e,Ki),n.Type},getDefinition(t){const e=Ai(Ki,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){Ti($i(e),n,t)},getAnnotation:_i});var Gi;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(Gi||(Gi={}));class Xi{constructor(){this.text=""}static unparse(t){const e=new Xi;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",xi(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class Yi{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class Ji{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=Hi.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof Vi)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(wi(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return Xi.unparse(this)}}class ts{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=Qi.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(ji);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(ji);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return Xi.unparse(this)}}class es{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return Xi.unparse(this)}}class ns{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return Xi.unparse(this)}}class is{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return Xi.unparse(this)}}is.$this=new is(0),is.$parent=new is(1);class ss{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=Pi.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=Pi.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return Xi.unparse(this)}}class rs{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return Xi.unparse(this)}}class os{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return Xi.unparse(this)}}class as{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=Pi.get(e,this.name,this.ancestor,t),o=As(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return Xi.unparse(this)}}class ls{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=As(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return Xi.unparse(this)}}class cs{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(wi(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return Xi.unparse(this)}}class hs{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!wi(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(Te(s)||Te(r))return(s||0)+(r||0);if($e(s)||$e(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return Xi.unparse(this)}}class us{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return Xi.unparse(this)}}class ds{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return Xi.unparse(this)}}ds.$undefined=new ds(void 0),ds.$null=new ds(null),ds.$true=new ds(!0),ds.$false=new ds(!1),ds.$empty=new ds("");class ps{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return Xi.unparse(this)}}ps.$empty=new ps(zn);class fs{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return Xi.unparse(this)}}fs.$empty=new fs(zn,zn);class gs{constructor(t,e=zn){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return Xi.unparse(this)}}gs.$empty=new gs([""]);class vs{constructor(t,e,n,i=zn){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!wi(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return Xi.unparse(this)}}class ms{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return Xi.unparse(this)}}class ys{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return Xi.unparse(this)}}class bs{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return Xi.unparse(this)}}const ws=Object.prototype.toString;class xs{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(ws.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${ws.call(e)}`)}}iterate(t,e,n){switch(ws.call(e)){case"[object Array]":return Es(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;Es(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;Es(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;Es(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${ws.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return Xi.unparse(this)}}class ks{constructor(t,e=zn){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return Xi.unparse(this)}}class Ss{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,Li.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return Xi.unparse(this)}}class Cs{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,Li.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return Xi.unparse(this)}}function As(t,e,n){const i=null==e?null:e[n];if(wi(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function Es(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}const Ts=an.createInterface("ICoercionConfiguration");var $s,Is,Os,Rs,Ps,Ls;function Ms(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function js(t){return null==t?Us:Us(t)}function Us(t){const e=t.prototype;bi(e,"subs",{get:Bs}),Si(e,"subscribe",Fs),Si(e,"unsubscribe",Vs)}!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}($s||($s={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(Is||(Is={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(Os||(Os={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(Rs||(Rs={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(Ps||(Ps={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(Ls||(Ls={}));class Ns{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function Bs(){return ki(this,"subs",new Ns)}function Fs(t){return this.subs.add(t)}function Vs(t){return this.subs.remove(t)}function Ds(t){return null==t?zs:zs(t)}function zs(t){const e=t.prototype;bi(e,"queue",{get:Hs})}class qs{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(Zs)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function Hs(){return qs.instance}function Zs(t,e,n){n.delete(t),t.flush()}qs.instance=new qs;class Ws{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&Ee(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){Xs=this.h,this.h=this.v,this.subs.notify(this.v,Xs,this.f)}}class Ks{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){Xs=this.h,this.h=this.v,this.subs.notify(this.v,Xs,this.f)}}function _s(t){const e=t.prototype;Si(e,"subscribe",Qs,!0),Si(e,"unsubscribe",Gs,!0),Ds(t),js(t)}function Qs(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function Gs(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let Xs;_s(Ws),_s(Ks);const Ys=new WeakMap;function Js(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function tr(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function er(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function nr(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,y,b,w,x,k,S,C=0,A=0;for(;;){if(i-n<=10)return void er(t,e,n,i,s);C=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[C],h=e[C],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,y=n+1,b=i-1,t[C]=t[y],e[C]=e[y],t[y]=v,e[y]=m;t:for(A=y+1;A<b;A++)if(w=t[A],x=e[A],k=s(w,v),k<0)t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,y++;else if(k>0){do{if(b--,b==A)break t;S=t[b],k=s(S,v)}while(k>0);t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,k<0&&(w=t[A],x=e[A],t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,y++)}i-b<y-n?(nr(t,e,b,i,s),i=y):(nr(t,e,n,y,s),n=b)}}const ir=Array.prototype,sr=ir.push,rr=ir.unshift,or=ir.pop,ar=ir.shift,lr=ir.splice,cr=ir.reverse,hr=ir.sort,ur=["push","unshift","pop","shift","splice","reverse","sort"],dr={push:function(...t){const e=Ys.get(this);if(void 0===e)return sr.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=Ys.get(this);if(void 0===e)return rr.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;rr.apply(e.indexMap,i);const r=rr.apply(this,t);return e.notify(),r},pop:function(){const t=Ys.get(this);if(void 0===t)return or.call(this);const e=t.indexMap,n=or.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),or.call(e),t.notify(),n},shift:function(){const t=Ys.get(this);if(void 0===t)return ar.call(this);const e=t.indexMap,n=ar.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),ar.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=Ys.get(this);if(void 0===i)return lr.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;lr.call(a,e,n,...i)}else lr.apply(a,t);const h=lr.apply(this,t);return i.notify(),h},reverse:function(){const t=Ys.get(this);if(void 0===t)return cr.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=Ys.get(this);if(void 0===e)return hr.call(this,t),this;const n=this.length;if(n<2)return this;nr(this,e.indexMap,0,n,tr);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&wi(t)||(t=Js),nr(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of ur)bi(dr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let pr=!1;class fr{constructor(t){this.type=18,pr||(pr=!0,function(){for(const t of ur)!0!==ir[t].observing&&ki(ir,t,dr[t])}()),this.indexObservers={},this.collection=t,this.indexMap=Ms(t.length),this.lenObs=void 0,Ys.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=Ms(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Ws(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new gr(this,t)}}class gr{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function vr(t){let e=Ys.get(t);return void 0===e&&(e=new fr(t)),e}js(fr),js(gr);const mr=new WeakMap,yr=Set.prototype,br=yr.add,wr=yr.clear,xr=yr.delete,kr=["add","clear","delete"],Sr={add:function(t){const e=mr.get(this);if(void 0===e)return br.call(this,t),this;const n=this.size;return br.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=mr.get(this);if(void 0===t)return wr.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;wr.call(this),e.length=0,t.notify()}},delete:function(t){const e=mr.get(this);if(void 0===e)return xr.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=xr.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},Cr={writable:!0,enumerable:!1,configurable:!0};for(const t of kr)bi(Sr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Ar=!1;class Er{constructor(t){this.type=34,Ar||(Ar=!0,function(){for(const t of kr)!0!==yr[t].observing&&bi(yr,t,{...Cr,value:Sr[t]})}()),this.collection=t,this.indexMap=Ms(t.size),this.lenObs=void 0,mr.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Ms(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Ks(this)}}function Tr(t){let e=mr.get(t);return void 0===e&&(e=new Er(t)),e}js(Er);const $r=new WeakMap,Ir=Map.prototype,Or=Ir.set,Rr=Ir.clear,Pr=Ir.delete,Lr=["set","clear","delete"],Mr={set:function(t,e){const n=$r.get(this);if(void 0===n)return Or.call(this,t,e),this;const i=this.get(t),s=this.size;if(Or.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=$r.get(this);if(void 0===t)return Rr.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Rr.call(this),e.length=0,t.notify()}},delete:function(t){const e=$r.get(this);if(void 0===e)return Pr.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Pr.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},jr={writable:!0,enumerable:!1,configurable:!0};for(const t of Lr)bi(Mr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Ur=!1;class Nr{constructor(t){this.type=66,Ur||(Ur=!0,function(){for(const t of Lr)!0!==Ir[t].observing&&bi(Ir,t,{...jr,value:Mr[t]})}()),this.collection=t,this.indexMap=Ms(t.size),this.lenObs=void 0,$r.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Ms(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Ks(this)}}function Br(t){let e=$r.get(t);return void 0===e&&(e=new Nr(t)),e}function Fr(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function Vr(){return ki(this,"obs",new Zr(this))}function Dr(t){let e;if(t instanceof Array)e=vr(t);else if(t instanceof Set)e=Tr(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=Br(t)}this.obs.add(e)}function zr(t){this.obs.add(t)}function qr(){throw new Error("AUR2011:handleChange")}function Hr(){throw new Error("AUR2012:handleCollectionChange")}js(Nr);class Zr{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(Kr,this),this.count=this.o.size}clearAll(){this.o.forEach(Wr,this),this.o.clear(),this.count=0}}function Wr(t,e){e.unsubscribe(this)}function Kr(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function _r(t){const e=t.prototype;return Si(e,"observe",Fr,!0),Si(e,"observeCollection",Dr,!0),Si(e,"subscribeTo",zr,!0),bi(e,"obs",{get:Vr}),Si(e,"handleChange",qr),Si(e,"handleCollectionChange",Hr),t}function Qr(t){return null==t?_r:_r(t)}_r(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}});const Gr=an.createInterface("IExpressionParser",(t=>t.singleton(Xr)));class Xr{constructor(){this.u=Ci(),this.A=Ci(),this.U=Ci()}parse(t,e){let n;switch(e){case 16:return new Yi(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return ds.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return ho.ip=t,ho.length=t.length,ho.index=0,ho.O=t.charCodeAt(0),uo(ho,0,61,void 0===e?8:e)}}var Yr,Jr,to,eo;function no(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(Yr||(Yr={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(Jr||(Jr={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(to||(to={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(eo||(eo={}));const io=ds.$false,so=ds.$true,ro=ds.$null,oo=ds.$undefined,ao=is.$this,lo=is.$parent;var co;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(co||(co={}));const ho=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function uo(t,e,n,i){if(16===i)return new Yi(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),fo(t);const i=uo(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(no(go(t)));break;default:s+=String.fromCharCode(t.O)}go(t)}return n.length?(e.push(s),new ks(e,n)):null}(t);if(fo(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=xo[63&t.$];fo(t),s=new us(n,uo(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(fo(t),e++,!bo(t,16393)){if(524288&t.$){const t=511&e;s=0===t?ao:1===t?lo:new is(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new bs(t.L):(s=new ss(t.L,511&e),e=1024),t.R=!0,fo(t);break;case 3076:t.R=!1,fo(t),s=ao,e=512;break;case 671751:fo(t),s=uo(t,0,62,i),wo(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new Ss(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(fo(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return wo(t,1835022),n;function o(){""!==i?(e.push(new Cs(new rs(ao,i),new os(ao,new ds(r++)),void 0)),i=""):r++}}(t):function(t,e,n){fo(t);const i=new Array;for(;1835022!==t.$;)if(bo(t,1572876)){if(i.push(oo),1835022===t.$)break}else{if(i.push(uo(t,e,62,-3&n)),!bo(t,1572876))break;if(1835022===t.$)break}return wo(t,1835022),2&n?new ms(i):(t.R=!1,new ps(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(fo(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)fo(t),wo(t,1572879),i.push(uo(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;fo(t),bo(t,1572879)?i.push(uo(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(uo(t,0,450,-3&e)))}}1835018!==t.$&&wo(t,1572876)}return wo(t,1835018),2&e?new ys(n,i):(t.R=!1,new fs(n,i))}(t,i),e=0;break;case 540714:s=new gs([t.L]),t.R=!1,fo(t),e=0;break;case 540715:s=po(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new ds(t.L),t.R=!1,fo(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=xo[63&t.$],t.R=!1,fo(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);fo(t);const n=e,i=uo(t,0,61,0);return new xs(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,fo(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,fo(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new ss(r,s.ancestor):new rs(s,r);continue;case 671757:t.R=!0,fo(t),e=4096,s=new os(s,uo(t,0,62,i)),wo(t,1835022);break;case 671751:for(t.R=!1,fo(t);1835019!==t.$&&(n.push(uo(t,0,62,i)),bo(t,1572876)););wo(t,1835019),s=1024&e?new as(r,n,s.ancestor):2048&e?new ls(s,r,n):new cs(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new vs(o,o,s),fo(t);break;case 540715:s=po(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;fo(t),s=new hs(xo[63&r],s,uo(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(bo(t,1572880)){const n=uo(t,e,62,i);wo(t,1572879),s=new ns(s,n,uo(t,e,62,i)),t.R=!1}if(62<n)return s;if(bo(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new es(s,uo(t,e,62,i))}if(61<n)return s;for(;bo(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;fo(t);const r=new Array;for(;bo(t,1572879);)r.push(uo(t,e,62,i));s=new ts(s,n,r)}for(;bo(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;fo(t);const r=new Array;for(;bo(t,1572879);)r.push(uo(t,e,62,i));s=new Ji(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function po(t,e,n,i,s){const r=[t.L];wo(t,540715);const o=[uo(t,e,62,n)];for(;540714!==(t.$=yo(t));)r.push(t.L),wo(t,540715),o.push(uo(t,e,62,n));return r.push(t.L),t.R=!1,s?(fo(t),new vs(r,r,i,o)):(fo(t),new gs(r,o))}function fo(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=Io[t.O](t)))return;t.$=1572864}function go(t){return t.O=t.ip.charCodeAt(++t.index)}function vo(t,e){let n=t.O;if(!1===e){do{n=go(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=go(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=go(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function mo(t){let e=!0,n="";for(;96!==go(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(no(go(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return go(t),t.L=n,e?540714:540715}function yo(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,mo(t)}function bo(t,e){return t.$===e&&(fo(t),!0)}function wo(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);fo(t)}const xo=[io,so,ro,oo,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],ko=Ci();ko.true=2049,ko.null=2050,ko.false=2048,ko.undefined=2051,ko.$this=3076,ko.$parent=3078,ko.in=1640799,ko.instanceof=1640800,ko.typeof=34851,ko.void=34852,ko.of=1051180;const So=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Co=[48,58];function Ao(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function Eo(t){return e=>(go(e),t)}const To=t=>{throw new Error(`AUR0168:${t.ip}`)};To.notMapped=!0,Ao(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const $o=new Uint8Array(65535);Ao($o,null,So,1),Ao($o,null,Co,1);const Io=new Array(65535);Io.fill(To,0,65535),Ao(Io,null,[0,33,127,161],(t=>(go(t),null))),Ao(Io,null,So,(function(t){for(;$o[go(t)];);const e=ko[t.L=t.P];return void 0===e?1024:e})),Ao(Io,null,Co,(t=>vo(t,!1))),Io[34]=Io[39]=t=>function(t){const e=t.O;go(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),go(t),n=no(t.O),go(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);go(t)}const r=t.ip.slice(s,t.index);go(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),Io[96]=t=>mo(t),Io[33]=t=>61!==go(t)?32809:61!==go(t)?1638680:(go(t),1638682),Io[61]=t=>61!==go(t)?1048616:61!==go(t)?1638679:(go(t),1638681),Io[38]=t=>38!==go(t)?1572883:(go(t),1638614),Io[124]=t=>124!==go(t)?1572884:(go(t),1638549),Io[46]=t=>go(t)<=57&&t.O>=48?vo(t,!0):16393,Io[60]=t=>61!==go(t)?1638747:(go(t),1638749),Io[62]=t=>61!==go(t)?1638748:(go(t),1638750),Io[37]=Eo(1638886),Io[40]=Eo(671751),Io[41]=Eo(1835019),Io[42]=Eo(1638885),Io[43]=Eo(623009),Io[44]=Eo(1572876),Io[45]=Eo(623010),Io[47]=Eo(1638887),Io[58]=Eo(1572879),Io[63]=Eo(1572880),Io[91]=Eo(671757),Io[93]=Eo(1835022),Io[123]=Eo(131080),Io[125]=Eo(1835018);let Oo=null;const Ro=[];let Po=!1;function Lo(){return Oo}function Mo(t){if(null==t)throw new Error("AUR0206");if(null==Oo)return Oo=t,Ro[0]=Oo,void(Po=!0);if(Oo===t)throw new Error("AUR0207");Ro.push(t),Oo=t,Po=!0}function jo(t){if(null==t)throw new Error("AUR0208");if(Oo!==t)throw new Error("AUR0209");Ro.pop(),Oo=Ro.length>0?Ro[Ro.length-1]:null,Po=null!=Oo}const Uo=Object.freeze({get current(){return Oo},get connecting(){return Po},enter:Mo,exit:jo,pause:function(){Po=!1},resume:function(){Po=!0}}),No=Reflect.get,Bo=Object.prototype.toString,Fo=new WeakMap;function Vo(t){switch(Bo.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Do="__raw__";function zo(t){return Vo(t)?qo(t):t}function qo(t){var e;return null!==(e=Fo.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?_o:t instanceof Map||t instanceof Set?ma:Ko,n=new Proxy(t,e);return Fo.set(t,n),n}(t)}function Ho(t){var e;return null!==(e=t[Do])&&void 0!==e?e:t}function Zo(t){return Vo(t)&&t[Do]||t}function Wo(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const Ko={get(t,e,n){if(e===Do)return t;const i=Lo();return!Po||Wo(e)||null==i?No(t,e,n):(i.observe(t,e),zo(No(t,e,n)))}},_o={get(t,e,n){if(e===Do)return t;const i=Lo();if(!Po||Wo(e)||null==i)return No(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return Qo;case"includes":return Yo;case"indexOf":return Jo;case"lastIndexOf":return ta;case"every":return Go;case"filter":return Xo;case"find":return na;case"findIndex":return ea;case"flat":return ia;case"flatMap":return sa;case"join":return ra;case"push":return aa;case"pop":return oa;case"reduce":return ga;case"reduceRight":return va;case"reverse":return ua;case"shift":return la;case"unshift":return ca;case"slice":return fa;case"splice":return ha;case"some":return da;case"sort":return pa;case"keys":return Aa;case"values":case Symbol.iterator:return Ea;case"entries":return Ta}return i.observe(t,e),zo(No(t,e,n))},ownKeys(t){var e;return null===(e=Lo())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function Qo(t,e){var n;const i=Ho(this),s=i.map(((n,i)=>Zo(t.call(e,zo(n),i,this))));return null===(n=Lo())||void 0===n||n.observeCollection(i),zo(s)}function Go(t,e){var n;const i=Ho(this),s=i.every(((n,i)=>t.call(e,zo(n),i,this)));return null===(n=Lo())||void 0===n||n.observeCollection(i),s}function Xo(t,e){var n;const i=Ho(this),s=i.filter(((n,i)=>Zo(t.call(e,zo(n),i,this))));return null===(n=Lo())||void 0===n||n.observeCollection(i),zo(s)}function Yo(t){var e;const n=Ho(this),i=n.includes(Zo(t));return null===(e=Lo())||void 0===e||e.observeCollection(n),i}function Jo(t){var e;const n=Ho(this),i=n.indexOf(Zo(t));return null===(e=Lo())||void 0===e||e.observeCollection(n),i}function ta(t){var e;const n=Ho(this),i=n.lastIndexOf(Zo(t));return null===(e=Lo())||void 0===e||e.observeCollection(n),i}function ea(t,e){var n;const i=Ho(this),s=i.findIndex(((n,i)=>Zo(t.call(e,zo(n),i,this))));return null===(n=Lo())||void 0===n||n.observeCollection(i),s}function na(t,e){var n;const i=Ho(this),s=i.find(((e,n)=>t(zo(e),n,this)),e);return null===(n=Lo())||void 0===n||n.observeCollection(i),zo(s)}function ia(){var t;const e=Ho(this);return null===(t=Lo())||void 0===t||t.observeCollection(e),zo(e.flat())}function sa(t,e){var n;const i=Ho(this);return null===(n=Lo())||void 0===n||n.observeCollection(i),qo(i.flatMap(((n,i)=>zo(t.call(e,zo(n),i,this)))))}function ra(t){var e;const n=Ho(this);return null===(e=Lo())||void 0===e||e.observeCollection(n),n.join(t)}function oa(){return zo(Ho(this).pop())}function aa(...t){return Ho(this).push(...t)}function la(){return zo(Ho(this).shift())}function ca(...t){return Ho(this).unshift(...t)}function ha(...t){return zo(Ho(this).splice(...t))}function ua(...t){var e;const n=Ho(this),i=n.reverse();return null===(e=Lo())||void 0===e||e.observeCollection(n),zo(i)}function da(t,e){var n;const i=Ho(this),s=i.some(((n,i)=>Zo(t.call(e,zo(n),i,this))));return null===(n=Lo())||void 0===n||n.observeCollection(i),s}function pa(t){var e;const n=Ho(this),i=n.sort(t);return null===(e=Lo())||void 0===e||e.observeCollection(n),zo(i)}function fa(t,e){var n;const i=Ho(this);return null===(n=Lo())||void 0===n||n.observeCollection(i),qo(i.slice(t,e))}function ga(t,e){var n;const i=Ho(this),s=i.reduce(((e,n,i)=>t(e,zo(n),i,this)),e);return null===(n=Lo())||void 0===n||n.observeCollection(i),zo(s)}function va(t,e){var n;const i=Ho(this),s=i.reduceRight(((e,n,i)=>t(e,zo(n),i,this)),e);return null===(n=Lo())||void 0===n||n.observeCollection(i),zo(s)}const ma={get(t,e,n){if(e===Do)return t;const i=Lo();if(!Po||Wo(e)||null==i)return No(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Sa;case"delete":return Ca;case"forEach":return ya;case"add":if(t instanceof Set)return ka;break;case"get":if(t instanceof Map)return wa;break;case"set":if(t instanceof Map)return xa;break;case"has":return ba;case"keys":return Aa;case"values":return Ea;case"entries":return Ta;case Symbol.iterator:return t instanceof Map?Ta:Ea}return zo(No(t,e,n))}};function ya(t,e){var n;const i=Ho(this);return null===(n=Lo())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,zo(n),zo(i),this)}))}function ba(t){var e;const n=Ho(this);return null===(e=Lo())||void 0===e||e.observeCollection(n),n.has(Zo(t))}function wa(t){var e;const n=Ho(this);return null===(e=Lo())||void 0===e||e.observeCollection(n),zo(n.get(Zo(t)))}function xa(t,e){return zo(Ho(this).set(Zo(t),Zo(e)))}function ka(t){return zo(Ho(this).add(Zo(t)))}function Sa(){return zo(Ho(this).clear())}function Ca(t){return zo(Ho(this).delete(Zo(t)))}function Aa(){var t;const e=Ho(this);null===(t=Lo())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:zo(e),done:i}},[Symbol.iterator](){return this}}}function Ea(){var t;const e=Ho(this);null===(t=Lo())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:zo(e),done:i}},[Symbol.iterator](){return this}}}function Ta(){var t;const e=Ho(this);null===(t=Lo())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[zo(e[0]),zo(e[1])],done:i}},[Symbol.iterator](){return this}}}const $a=Object.freeze({getProxy:qo,getRaw:Ho,wrap:zo,unwrap:Zo,rawKey:Do});class Ia{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new Ia(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,bi(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!wi(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){Oa=this.ov,this.ov=this.v,this.subs.notify(this.v,Oa,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return Mo(this),this.v=Zo(this.get.call(this.up?zo(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,jo(this)}}}let Oa;Qr(Ia),js(Ia),Ds(Ia);const Ra=an.createInterface("IDirtyChecker",(t=>t.singleton(Ma))),Pa={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},La={persistent:!0};class Ma{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(Pa.disabled)return;if(++this.j<Pa.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(Pa.throw)throw new Error(`AUR0222:${e}`);return new ja(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,La))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}Ma.inject=[Zn],Ds(Ma);class ja{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}js(ja);class Ua{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Na{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}}let Ba;class Fa{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){Ba=this.ov,this.ov=this.v,this.subs.notify(this.v,Ba,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],bi(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(bi(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class Va{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=wi(n);const s=t[e];this.cb=wi(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){Ba=this.ov,this.ov=this.v,this.subs.notify(this.v,Ba,this.f)}}js(Fa),js(Va),Ds(Fa),Ds(Va);const Da=new Na,za=an.createInterface("IObserverLocator",(t=>t.singleton(Za))),qa=an.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(Jn).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new Ha)))));class Ha{handles(){return!1}getObserver(){return Da}getAccessor(){return Da}}class Za{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):Da}getArrayObserver(t){return vr(t)}getMapObserver(t){return Br(t)}getSetObserver(t){return Tr(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new Ua(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return vr(t).getLengthObserver();break;case"size":if(t instanceof Map)return Br(t).getLengthObserver();if(t instanceof Set)return Tr(t).getLengthObserver();break;default:if(t instanceof Array&&Ee(e))return vr(t).getIndexObserver(Number(e))}let o=Ka(t,e);if(void 0===o){let n=Wa(t);for(;null!==n&&(o=Ka(n,e),void 0===o);)n=Wa(n)}if(void 0!==o&&!yi.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?Ia.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new Fa(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(bi(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}Za.inject=[Ra,qa];const Wa=Object.getPrototypeOf,Ka=Object.getOwnPropertyDescriptor;an.createInterface("IObservation",(t=>t.singleton(_a)));class _a{constructor(t){this.oL=t}static get inject(){return[za]}run(t){const e=new Qa(this.oL,t);return e.run(),e}}class Qa{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Mo(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,jo(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}Qr(Qa);const Ga=new Map;function Xa(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}class Ya{constructor(t,e={}){var n,i,s,r,o,a,l,c,h,u,d,p,f;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,this.decodeURI="decodeURI"in e?e.decodeURI:t.decodeURI,this.decodeURIComponent="decodeURIComponent"in e?e.decodeURIComponent:t.decodeURIComponent,this.encodeURI="encodeURI"in e?e.encodeURI:t.encodeURI,this.encodeURIComponent="encodeURIComponent"in e?e.encodeURIComponent:t.encodeURIComponent,this.Date="Date"in e?e.Date:t.Date,this.Reflect="Reflect"in e?e.Reflect:t.Reflect,this.clearInterval="clearInterval"in e?e.clearInterval:null!==(i=null===(n=t.clearInterval)||void 0===n?void 0:n.bind(t))&&void 0!==i?i:Xa("clearInterval"),this.clearTimeout="clearTimeout"in e?e.clearTimeout:null!==(r=null===(s=t.clearTimeout)||void 0===s?void 0:s.bind(t))&&void 0!==r?r:Xa("clearTimeout"),this.queueMicrotask="queueMicrotask"in e?e.queueMicrotask:null!==(a=null===(o=t.queueMicrotask)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:Xa("queueMicrotask"),this.setInterval="setInterval"in e?e.setInterval:null!==(c=null===(l=t.setInterval)||void 0===l?void 0:l.bind(t))&&void 0!==c?c:Xa("setInterval"),this.setTimeout="setTimeout"in e?e.setTimeout:null!==(u=null===(h=t.setTimeout)||void 0===h?void 0:h.bind(t))&&void 0!==u?u:Xa("setTimeout"),this.console="console"in e?e.console:t.console,this.performanceNow="performanceNow"in e?e.performanceNow:null!==(f=null===(p=null===(d=t.performance)||void 0===d?void 0:d.now)||void 0===p?void 0:p.bind(t.performance))&&void 0!==f?f:Xa("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new tl(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let n=Ga.get(t);return void 0===n&&Ga.set(t,n=new Ya(t,e)),n}static set(t,e){Ga.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}function Ja(t){return t.persistent}class tl{constructor(t,e,n){this.platform=t,this.$request=e,this.$cancel=n,this.t=void 0,this.i=0,this.processing=[],this.pending=[],this.delayed=[],this.flushRequested=!1,this.h=void 0,this.taskPool=[],this.u=0,this.T=0,this.$=0,this.I=()=>{this.flushRequested||(this.flushRequested=!0,this.T=this.platform.performanceNow(),this.$request())},this.M=new ol(t.console)}get isEmpty(){return 0===this.i&&0===this.processing.length&&0===this.pending.length&&0===this.delayed.length}get P(){return 0===this.i&&this.processing.every(Ja)&&this.pending.every(Ja)&&this.delayed.every(Ja)}flush(t=this.platform.performanceNow()){if(this.flushRequested=!1,this.$=t,void 0===this.t){if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}let e;for(;this.processing.length>0;)if((e=this.processing.shift()).run(),1===e.status){if(!0===e.suspend)return this.t=e,void this.I();++this.i}if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}if((this.processing.length>0||this.delayed.length>0||this.i>0)&&this.I(),void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}}else this.I()}cancel(){this.flushRequested&&(this.$cancel(),this.flushRequested=!1)}async yield(){this.isEmpty||(void 0===this.h&&(this.h=ul()),await this.h)}queueTask(t,e){const{delay:n,preempt:i,persistent:s,reusable:r,suspend:o}={...al,...e};if(i){if(n>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(s)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}0===this.processing.length&&this.I();const a=this.platform.performanceNow();let l;if(r){const e=this.taskPool,c=this.u-1;c>=0?(l=e[c],e[c]=void 0,this.u=c,l.reuse(a,n,i,s,o,t)):l=new rl(this.M,this,a,a+n,i,s,o,r,t)}else l=new rl(this.M,this,a,a+n,i,s,o,r,t);return i?this.processing[this.processing.length]=l:0===n?this.pending[this.pending.length]=l:this.delayed[this.delayed.length]=l,l}remove(t){let e=this.processing.indexOf(t);if(e>-1)this.processing.splice(e,1);else if(e=this.pending.indexOf(t),e>-1)this.pending.splice(e,1);else{if(e=this.delayed.indexOf(t),!(e>-1))throw new Error(`Task #${t.id} could not be found`);this.delayed.splice(e,1)}}returnToPool(t){this.taskPool[this.u++]=t}resetPersistentTask(t){t.reset(this.platform.performanceNow()),t.createdTime===t.queueTime?this.pending[this.pending.length]=t:this.delayed[this.delayed.length]=t}completeAsyncTask(t){var e;if(!0===t.suspend){if(this.t!==t)throw new Error(`Async task completion mismatch: suspenderTask=${null===(e=this.t)||void 0===e?void 0:e.id}, task=${t.id}`);this.t=void 0}else--this.i;if(void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class el extends Error{constructor(t){super("Task was canceled."),this.task=t}}let nl=0;var il,sl;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(il||(il={}));class rl{constructor(t,e,n,i,s,r,o,a,l){this.taskQueue=e,this.createdTime=n,this.queueTime=i,this.preempt=s,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=l,this.id=++nl,this.R=void 0,this.A=void 0,this.q=void 0,this.C=0,this.M=t}get result(){const t=this.q;if(void 0===t)switch(this.C){case 0:{const t=this.q=ul();return this.R=t.resolve,this.A=t.reject,t}case 1:throw new Error("Trying to await task from within task will cause a deadlock.");case 2:return this.q=Promise.resolve();case 3:return this.q=Promise.reject(new el(this))}return t}get status(){return this.C}run(t=this.taskQueue.platform.performanceNow()){if(0!==this.C)throw new Error(`Cannot run task in ${this.C} state`);const{persistent:e,reusable:n,taskQueue:i,callback:s,R:r,A:o,createdTime:a}=this;let l;this.C=1;try{l=s(t-a),l instanceof Promise?l.then((t=>{this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),i.completeAsyncTask(this),void 0!==r&&r(t),!this.persistent&&n&&i.returnToPool(this)})).catch((t=>{if(this.persistent||this.dispose(),i.completeAsyncTask(this),void 0===o)throw t;o(t)})):(this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),void 0!==r&&r(l),!this.persistent&&n&&i.returnToPool(this))}catch(t){if(this.persistent||this.dispose(),void 0===o)throw t;o(t)}}cancel(){if(0===this.C){const t=this.taskQueue,e=this.reusable,n=this.A;return t.remove(this),t.isEmpty&&t.cancel(),this.C=3,this.dispose(),e&&t.returnToPool(this),void 0!==n&&n(new el(this)),!0}return!(1!==this.C||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.C=0,this.R=void 0,this.A=void 0,this.q=void 0}reuse(t,e,n,i,s,r){this.createdTime=t,this.queueTime=t+e,this.preempt=n,this.persistent=i,this.suspend=s,this.callback=r,this.C=0}dispose(){this.callback=void 0,this.R=void 0,this.A=void 0,this.q=void 0}}class ol{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,n){if(e instanceof tl){const i=`processing=${e.processing.length} pending=${e.pending.length} delayed=${e.delayed.length} flushReq=${e.flushRequested} susTask=${!!e.t}`;this.console.log(`${t}[Q.${n}] ${i}`)}else{const i=e.id,s=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,l=e.persistent,c=e.suspend,h=function(t){switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}}(e.C),u=`id=${i} created=${s} queue=${r} preempt=${o} persistent=${l} reusable=${a} status=${h} suspend=${c}`;this.console.log(`${t}[T.${n}] ${u}`)}}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(sl||(sl={}));const al={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let ll,cl;function hl(t,e){ll=t,cl=e}function ul(){const t=new Promise(hl);return t.resolve=ll,t.reject=cl,t}const dl=new Map;class pl extends Ya{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver,window,document,location,history,navigator,customElements".split(",").forEach((n=>{this[n]=n in e?e[n]:t[n]})),"fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((n=>{var i,s;this[n]=n in e?e[n]:null!==(s=null===(i=t[n])||void 0===i?void 0:i.bind(t))&&void 0!==s?s:function(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}(n)})),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new tl(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new tl(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let n=dl.get(t);return void 0===n&&dl.set(t,n=new pl(t,e)),n}static set(t,e){dl.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}function fl(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function gl(t,e){return function(n,i){e(n,i,t)}}const vl=ge.getOwn,ml=ge.hasOwn,yl=ge.define,{annotation:bl,resource:wl}=Xe,xl=bl.keyFor,kl=wl.keyFor,Sl=wl.appendTo,Cl=bl.appendTo,Al=bl.getKeys,El=()=>Object.create(null),Tl=Object.prototype.hasOwnProperty,$l=El(),Il=(t,e,n)=>{if(!0===$l[e])return!0;if(!Pl(e))return!1;const i=e.slice(0,5);return $l[e]="aria-"===i||"data-"===i||n.isStandardSvgAttribute(t,e)},Ol=t=>t instanceof Promise,Rl=t=>"function"==typeof t,Pl=t=>"string"==typeof t,Ll=Object.defineProperty,Ml=t=>{throw t};function jl(t,e){let n;function i(t,e){arguments.length>1&&(n.property=e),yl(Nl,Fl.create(e,t,n),t.constructor,e),Cl(t.constructor,Bl.keyFrom(e))}return arguments.length>1?(n={},void i(t,e)):Pl(t)?(n={},i):(n=void 0===t?{}:t,i)}function Ul(t){return t.startsWith(Nl)}const Nl=xl("bindable"),Bl=Object.freeze({name:Nl,keyFrom:t=>`${Nl}:${t}`,from(t,...e){const n={},i=Array.isArray;function s(e){n[e]=Fl.create(e,t)}function r(e,i){n[e]=i instanceof Fl?i:Fl.create(e,t,i)}return e.forEach((function(t){i(t)?t.forEach(s):t instanceof Fl?n[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>r(e,t[e])))})),n},for(t){let e;const n={add(i){let s,r;return Pl(i)?(s=i,r={property:s}):(s=i.property,r=i),e=Fl.create(s,t,r),ml(Nl,t,s)||Cl(t,Bl.keyFrom(s)),yl(Nl,e,t,s),n},mode:t=>(e.mode=t,n),callback:t=>(e.callback=t,n),attribute:t=>(e.attribute=t,n),primary:()=>(e.primary=!0,n),set:t=>(e.set=t,n)};return n},getAll(t){const e=Nl.length+1,n=[],i=Ve(t);let s,r,o,a,l=i.length,c=0;for(;--l>=0;)for(o=i[l],s=Al(o).filter(Ul),r=s.length,a=0;a<r;++a)n[c++]=vl(Nl,o,s[a].slice(e));return n}});class Fl{constructor(t,e,n,i,s,r){this.attribute=t,this.callback=e,this.mode=n,this.primary=i,this.property=s,this.set=r}static create(t,e,n={}){return new Fl(Fe(n.attribute,Pe(t)),Fe(n.callback,`${t}Changed`),Fe(n.mode,$s.toView),Fe(n.primary,!1),Fe(n.property,t),Fe(n.set,function(t,e,n={}){var i,s,r;const o=null!==(s=null!==(i=n.type)&&void 0!==i?i:Reflect.getMetadata("design:type",e,t))&&void 0!==s?s:null;if(null==o)return Hn;let a;switch(o){case Number:case Boolean:case String:case BigInt:a=o;break;default:{const t=o.coerce;a="function"==typeof t?t.bind(o):null!==(r=Vl.for(o))&&void 0!==r?r:Hn;break}}return a===Hn?a:function(t,e){return function(n,i){var s;return(null==i?void 0:i.enableCoercion)?(null!=e?e:null===(s=null==i?void 0:i.coerceNullish)||void 0===s||!s)&&null==n?n:t(n,i):n}}(a,n.nullable)}(t,e,n)))}}const Vl={key:xl("coercer"),define(t,e){yl(Vl.key,t[e].bind(t),t)},for:t=>vl(Vl.key,t)};class Dl{constructor(t,e,n,i,s,r){this.set=i,this.$controller=s,this.t=r,this.v=void 0,this.ov=void 0,this.f=0;const o=t[n],a=t.propertyChanged,l=this.i=Rl(o),c=this.u=Rl(a),h=this.hs=i!==Hn;let u;this.o=t,this.k=e,this.cb=l?o:Hn,this.C=c?a:Hn,void 0!==this.cb||c||h?(this.iO=!0,u=t[e],this.v=h&&void 0!==u?i(u,this.t):u,this.A()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t,e){this.hs&&(t=this.set(t,this.t));const n=this.v;if(this.iO){if(Object.is(t,n))return;this.v=t,this.ov=n,this.f=e,(null==this.$controller||this.$controller.isBound)&&(this.i&&this.cb.call(this.o,t,n,e),this.u&&this.C.call(this.o,this.k,t,n,e)),this.queue.add(this)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.t):this.o[this.k],this.A()),this.subs.add(t)}flush(){zl=this.ov,this.ov=this.v,this.subs.notify(this.v,zl,this.f)}A(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t,0)}})}}let zl;js(Dl),Ds(Dl);class ql{constructor(t,e,n,i){if(this.chars=t,this.repeat=e,this.isSymbol=n,this.isInverted=i,i)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.B;break;default:this.has=this.I}else switch(t.length){case 0:this.has=this.T;break;case 1:this.has=this.P;break;default:this.has=this.$}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}$(t){return this.chars.includes(t)}P(t){return this.chars===t}T(t){return!1}I(t){return!this.chars.includes(t)}B(t){return this.chars!==t}R(t){return!0}}class Hl{constructor(){this.parts=zn,this.O="",this.L={},this.q={}}get pattern(){const t=this.O;return""===t?null:t}set pattern(t){null==t?(this.O="",this.parts=zn):(this.O=t,this.parts=this.q[t])}append(t,e){const n=this.L;void 0===n[t]?n[t]=e:n[t]+=e}next(t){const e=this.L;let n;void 0!==e[t]&&(n=this.q,void 0===n[t]?n[t]=[e[t]]:n[t].push(e[t]),e[t]=void 0)}}class Zl{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,n=e.length;let i=null,s=0;for(;s<n;++s)if(i=e[s],t.equals(i.charSpec))return i;return null}append(t,e){const n=this.patterns;n.includes(e)||n.push(e);let i=this.findChild(t);return null==i&&(i=new Zl(t,e),this.nextStates.push(i),t.repeat&&i.nextStates.push(i)),i}findMatches(t,e){const n=[],i=this.nextStates,s=i.length;let r=0,o=null,a=0,l=0;for(;a<s;++a)if(o=i[a],o.charSpec.has(t))if(n.push(o),r=o.patterns.length,l=0,o.charSpec.isSymbol)for(;l<r;++l)e.next(o.patterns[l]);else for(;l<r;++l)e.append(o.patterns[l],t);return n}}class Wl{constructor(t){this.text=t;const e=this.len=t.length,n=this.specs=[];let i=0;for(;e>i;++i)n.push(new ql(t[i],!1,!1,!1))}eachChar(t){const e=this.len,n=this.specs;let i=0;for(;e>i;++i)t(n[i])}}class Kl{constructor(t){this.text="PART",this.spec=new ql(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class _l{constructor(t){this.text=t,this.spec=new ql(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class Ql{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Gl=an.createInterface("ISyntaxInterpreter",(t=>t.singleton(Xl)));class Xl{constructor(){this.rootState=new Zl(null),this.initialStates=[this.rootState]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let n,i,s,r,o,a,l,c,h=0;for(;e>h;){for(n=this.rootState,i=t[h],s=i.pattern,r=new Ql,o=this.parse(i,r),a=o.length,l=t=>{n=n.append(t,s)},c=0;a>c;++c)o[c].eachChar(l);n.types=r,n.isEndpoint=!0,++h}}interpret(t){const e=new Hl,n=t.length;let i,s=this.initialStates,r=0;for(;r<n&&(s=this.getNextStates(s,t.charAt(r),e),0!==s.length);++r);return s=s.filter(Yl),s.length>0&&(s.sort(Jl),i=s[0],i.charSpec.isSymbol||e.next(i.pattern),e.pattern=i.pattern),e}getNextStates(t,e,n){const i=[];let s=null;const r=t.length;let o=0;for(;o<r;++o)s=t[o],i.push(...s.findMatches(e,n));return i}parse(t,e){const n=[],i=t.pattern,s=i.length,r=t.symbols;let o=0,a=0,l="";for(;o<s;)l=i.charAt(o),0!==r.length&&r.includes(l)?o!==a?(n.push(new Wl(i.slice(a,o))),++e.statics,a=o):(n.push(new _l(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===l&&"PART"===i.slice(o,o+4)?(a=o+=4,n.push(new Kl(r)),++e.dynamics):++o;return a!==o&&(n.push(new Wl(i.slice(a,o))),++e.statics),n}}function Yl(t){return t.isEndpoint}function Jl(t,e){const n=t.types,i=e.types;return n.statics!==i.statics?i.statics-n.statics:n.dynamics!==i.dynamics?i.dynamics-n.dynamics:n.symbols!==i.symbols?i.symbols-n.symbols:0}class tc{constructor(t,e,n,i){this.rawName=t,this.rawValue=e,this.target=n,this.command=i}}const ec=an.createInterface("IAttributePattern"),nc=an.createInterface("IAttributeParser",(t=>t.singleton(ic)));class ic{constructor(t,e){this.U={},this._=t;const n=this.F={},i=e.reduce(((t,e)=>{const i=lc(e.constructor);return i.forEach((t=>n[t.pattern]=e)),t.concat(i)}),zn);t.add(i)}parse(t,e){let n=this.U[t];null==n&&(n=this.U[t]=this._.interpret(t));const i=n.pattern;return null==i?new tc(t,e,t,null):this.F[i][i](t,e,n.parts)}}function sc(...t){return function(e){return cc.define(t,e)}}ic.inject=[Gl,mn(ec)];class rc{constructor(t){this.Type=t,this.name=void 0}register(t){Nn.singleton(ec,this.Type).register(t)}}const oc=kl("attribute-pattern"),ac="attribute-pattern-definitions",lc=t=>Xe.annotation.get(t,ac),cc=Object.freeze({name:oc,definitionAnnotationKey:ac,define(t,e){const n=new rc(e);return yl(oc,n,e),Sl(e,oc),Xe.annotation.set(e,ac,t),Cl(e,ac),e},getPatternDefinitions:lc});let hc=class{"PART.PART"(t,e,n){return new tc(t,e,n[0],n[1])}"PART.PART.PART"(t,e,n){return new tc(t,e,n[0],n[2])}};hc=fl([sc({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],hc);let uc=class{ref(t,e,n){return new tc(t,e,"element","ref")}"PART.ref"(t,e,n){return new tc(t,e,n[0],"ref")}};uc=fl([sc({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],uc);let dc=class{":PART"(t,e,n){return new tc(t,e,n[0],"bind")}};dc=fl([sc({pattern:":PART",symbols:":"})],dc);let pc=class{"@PART"(t,e,n){return new tc(t,e,n[0],"trigger")}};pc=fl([sc({pattern:"@PART",symbols:"@"})],pc);let fc=class{"...$attrs"(t,e,n){return new tc(t,e,"","...$attrs")}};fc=fl([sc({pattern:"...$attrs",symbols:""})],fc);const gc=Zn,vc=an.createInterface("ISVGAnalyzer",(t=>t.singleton(mc)));class mc{isStandardSvgAttribute(t,e){return!1}}const yc=an.createInterface("IAttrMapper",(t=>t.singleton(bc)));class bc{constructor(t){this.svg=t,this.fns=[],this.N=El(),this.W=El(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[vc]}useMapping(t){var e,n;let i,s,r,o;for(r in t)for(o in i=t[r],s=null!==(e=(n=this.N)[r])&&void 0!==e?e:n[r]=El(),i){if(void 0!==s[o])throw wc(o,r);s[o]=i[o]}}useGlobalMapping(t){const e=this.W;for(const n in t){if(void 0!==e[n])throw wc(n,"*");e[n]=t[n]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((n=>n(t,e)))}map(t,e){var n,i,s;return null!==(s=null!==(i=null===(n=this.N[t.nodeName])||void 0===n?void 0:n[e])&&void 0!==i?i:this.W[e])&&void 0!==s?s:Il(t,e,this.svg)?e:null}}function wc(t,e){return new Error(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}class xc{constructor(t,e,n,i,s){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=s,this.interceptor=this,this.isBound=!1,this.targetObserver=i.getAccessor(e,n)}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(e,"$event"),n}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.targetObserver.setValue((t=>this.interceptor.callSource(t)),t,this.target,this.targetProperty),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t,this.target,this.targetProperty),this.isBound=!1)}observe(t,e){}handleChange(t,e,n){}}class kc{constructor(t,e,n){this.type=7,this.v=null,this.ov=null,this.H=!1,this.f=0,this.o=t,this.G=e,this.X=n}getValue(){return this.v}setValue(t,e){this.v=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H)switch(this.H=!1,this.ov=this.v,this.X){case"class":this.o.classList.toggle(this.G,!!this.v);break;case"style":{let t="",e=this.v;Pl(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.G,e,t);break}default:null==this.v?this.o.removeAttribute(this.X):this.o.setAttribute(this.X,String(this.v))}}handleMutation(t){let e=!1;for(let n=0,i=t.length;i>n;++n){const i=t[n];if("attributes"===i.type&&i.attributeName===this.G){e=!0;break}}if(e){let t;switch(this.X){case"class":t=this.o.classList.contains(this.G);break;case"style":t=this.o.style.getPropertyValue(this.G);break;default:throw new Error(`AUR0651:${this.X}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.H=!1,this.f=0,this.queue.add(this))}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.G),Sc(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&Cc(this.o,this)}flush(){Tc=this.ov,this.ov=this.v,this.subs.notify(this.v,Tc,this.f)}}js(kc),Ds(kc);const Sc=(t,e,n)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(Ac)).observe(e,{attributes:!0}),e.$eMObs.add(n)},Cc=(t,e)=>{const n=t.$eMObs;return!(!n||!n.delete(e)||(0===n.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},Ac=t=>{t[0].target.$eMObs.forEach(Ec,t)};function Ec(t){t.handleMutation(this)}let Tc;class $c{constructor(t){this.b=t}handleChange(t,e,n){const i=this.b;t!==i.sourceExpression.evaluate(n,i.$scope,i.locator,null)&&i.updateSource(t,n)}}const{oneTime:Ic,toView:Oc,fromView:Rc}=$s,Pc=Oc|Ic,Lc={reusable:!1,preempt:!0};class Mc{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.targetAttribute=n,this.targetProperty=i,this.mode=s,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=e,this.p=o.get(gc),this.oL=r}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;n|=this.persistentFlags;const i=this.mode,s=this.interceptor,r=this.sourceExpression,o=this.$scope,a=this.locator,l=this.targetObserver,c=0==(2&n)&&(4&l.type)>0;let h,u=!1;(10082!==r.$kind||this.obs.count>1)&&(u=0==(i&Ic),u&&this.obs.version++,t=r.evaluate(n,o,a,s),u&&this.obs.clear()),t!==this.value&&(this.value=t,c?(h=this.task,this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,s.updateTarget(t,n)}),Lc),null==h||h.cancel()):s.updateTarget(t,n))}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);let s=this.targetObserver;s||(s=this.targetObserver=new kc(this.target,this.targetProperty,this.targetAttribute)),i=this.sourceExpression;const r=this.mode,o=this.interceptor;let a=!1;r&Pc&&(a=(r&Oc)>0,o.updateTarget(this.value=i.evaluate(t,e,this.locator,a?o:null),t)),r&Rc&&s.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new $c(o)),this.isBound=!0}$unbind(t){var e;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.obs.clearAll(),this.isBound=!1)}}Qr(Mc);const{toView:jc}=$s,Uc={reusable:!1,preempt:!0};class Nc{constructor(t,e,n,i,s,r,o){this.interpolation=e,this.target=n,this.targetProperty=i,this.mode=s,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.oL=t,this.targetObserver=t.getAccessor(n,i);const a=e.expressions,l=this.partBindings=Array(a.length),c=a.length;let h=0;for(;c>h;++h)l[h]=new Bc(a[h],n,i,r,t,this)}updateTarget(t,e){const n=this.partBindings,i=this.interpolation.parts,s=n.length;let r="",o=0;if(1===s)r=i[0]+n[0].value+i[1];else for(r=i[0];s>o;++o)r+=n[o].value+i[o+1];const a=this.targetObserver;let l;0==(2&e)&&(4&a.type)>0?(l=this.task,this.task=this.taskQueue.queueTask((()=>{this.task=null,a.setValue(r,e,this.target,this.targetProperty)}),Uc),null==l||l.cancel(),l=null):a.setValue(r,e,this.target,this.targetProperty)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].$bind(t,e);this.updateTarget(void 0,t)}$unbind(t){var e;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].interceptor.$unbind(t);null===(e=this.task)||void 0===e||e.cancel(),this.task=null}}class Bc{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=i,this.owner=r,this.interceptor=this,this.mode=$s.toView,this.value="",this.task=null,this.isBound=!1,this.oL=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.sourceExpression,s=this.obs;let r=!1;10082===i.$kind&&1===s.count||(r=(this.mode&jc)>0,r&&s.version++,t=i.evaluate(n,this.$scope,this.locator,r?this.interceptor:null),r&&s.clear()),t!=this.value&&(this.value=t,t instanceof Array&&this.observeCollection(t),this.owner.updateTarget(t,n))}handleCollectionChange(t,e){this.owner.updateTarget(void 0,e)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&jc)>0?this.interceptor:null),this.value instanceof Array&&this.observeCollection(this.value)}$unbind(t){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll())}}Qr(Bc);class Fc{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.locator=n,this.p=s,this.strict=r,this.interceptor=this,this.mode=$s.toView,this.value="",this.task=null,this.isBound=!1,this.oL=i}updateTarget(t,e){var n,i;const s=this.target,r=this.p.Node,o=this.value;this.value=t,o instanceof r&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o)),t instanceof r?(s.textContent="",null===(i=s.parentNode)||void 0===i||i.insertBefore(t,s)):s.textContent=String(t)}handleChange(t,e,n){var i;if(!this.isBound)return;const s=this.sourceExpression,r=this.obs;let o=!1;if(10082===s.$kind&&1===r.count||(o=(this.mode&jc)>0,o&&r.version++,n|=this.strict?1:0,t=s.evaluate(n,this.$scope,this.locator,o?this.interceptor:null),o&&r.clear()),t===this.value)return null===(i=this.task)||void 0===i||i.cancel(),void(this.task=null);0==(2&n)?this.queueUpdate(t,n):this.updateTarget(t,n)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),t|=this.strict?1:0;const n=this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&jc)>0?this.interceptor:null);n instanceof Array&&this.observeCollection(n),this.updateTarget(n,t)}$unbind(t){var e;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),null===(e=this.task)||void 0===e||e.cancel(),this.task=null)}queueUpdate(t,e){const n=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(t,e)}),Uc),null==n||n.cancel()}}Qr(Fc);class Vc{constructor(t,e,n,i,s=!1){this.sourceExpression=t,this.targetProperty=e,this.locator=i,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.target=null,this.oL=n,this.Y=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.target,s=this.targetProperty,r=i[s];this.obs.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),this.obs.clear(),t!==r&&(i[s]=t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.target=this.Y?e.bindingContext:e.overrideContext;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|t,e,this.locator,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),this.isBound=!1}}Qr(Vc);const{oneTime:Dc,toView:zc,fromView:qc}=$s,Hc=zc|Dc,Zc={reusable:!1,preempt:!0};class Wc{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.mode=i,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null,this.oL=s}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;const i=0==(2&(n|=this.persistentFlags))&&(4&this.targetObserver.type)>0,s=this.obs;let r=!1;(10082!==this.sourceExpression.$kind||s.count>1)&&(r=this.mode>Dc,r&&s.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),r&&s.clear()),i?(Kc=this.task,this.task=this.taskQueue.queueTask((()=>{this.interceptor.updateTarget(t,n),this.task=null}),Zc),null==Kc||Kc.cancel(),Kc=null):this.interceptor.updateTarget(t,n)}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}t|=1,this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);const s=this.oL,r=this.mode;let o=this.targetObserver;o||(o=r&qc?s.getObserver(this.target,this.targetProperty):s.getAccessor(this.target,this.targetProperty),this.targetObserver=o),i=this.sourceExpression;const a=this.interceptor,l=(r&zc)>0;r&Hc&&a.updateTarget(i.evaluate(t,e,this.locator,l?a:null),t),r&qc&&(o.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new $c(a)),l||a.updateSource(o.getValue(this.target,this.targetProperty),t)),this.isBound=!0}$unbind(t){this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,Kc=this.task,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=Kc&&(Kc.cancel(),Kc=this.task=null),this.obs.clearAll(),this.isBound=!1)}}Qr(Wc);let Kc=null;class _c{constructor(t,e,n){this.sourceExpression=t,this.target=e,this.locator=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(t,this.$scope,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,null)===this.target&&e.assign(t,this.$scope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const Qc=an.createInterface("IAppTask");class Gc{constructor(t,e,n){this.c=void 0,this.slot=t,this.k=e,this.cb=n}register(t){return this.c=t.register(Nn.instance(Qc,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const Xc=Object.freeze({beforeCreate:Yc("beforeCreate"),hydrating:Yc("hydrating"),hydrated:Yc("hydrated"),beforeActivate:Yc("beforeActivate"),afterActivate:Yc("afterActivate"),beforeDeactivate:Yc("beforeDeactivate"),afterDeactivate:Yc("afterDeactivate")});function Yc(t){return function(e,n){return Rl(n)?new Gc(t,e,n):new Gc(t,null,e)}}function Jc(t){return t.startsWith(th)}const th=xl("children-observer"),eh=Object.freeze({name:th,keyFrom:t=>`${th}:${t}`,from(...t){const e={},n=Array.isArray;function i(t){e[t]=ih.create(t)}function s(t,n){e[t]=ih.create(t,n)}return t.forEach((function(t){n(t)?t.forEach(i):t instanceof ih?e[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>s(e,t)))})),e},getAll(t){const e=th.length+1,n=[],i=Ve(t);let s,r,o,a=i.length,l=0;for(;--a>=0;){o=i[a],s=Al(o).filter(Jc),r=s.length;for(let t=0;t<r;++t)n[l++]=vl(th,o,s[t].slice(e))}return n}}),nh={childList:!0};class ih{constructor(t,e,n,i,s,r){this.callback=t,this.property=e,this.options=n,this.query=i,this.filter=s,this.map=r}static create(t,e={}){var n;return new ih(Fe(e.callback,`${t}Changed`),Fe(e.property,t),null!==(n=e.options)&&void 0!==n?n:nh,e.query,e.filter,e.map)}}class sh{constructor(t,e,n,i,s=rh,r=oh,o=ah,a){this.controller=t,this.obj=e,this.propertyKey=n,this.query=s,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[i],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){var t;this.observing||(this.observing=!0,this.children=this.get(),(null!==(t=this.observer)&&void 0!==t?t:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.Z()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=zn)}Z(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(t,e,n,i){var s;const r=e(t),o=r.length,a=[];let l,c,h,u=0;for(;u<o;++u)l=r[u],c=Lh.for(l,lh),h=null!==(s=null==c?void 0:c.viewModel)&&void 0!==s?s:null,n(l,c,h)&&a.push(i(l,c,h));return a}(this.controller,this.query,this.filter,this.map)}}function rh(t){return t.host.childNodes}function oh(t,e,n){return!!n}function ah(t,e,n){return n}js()(sh);const lh={optional:!0};function ch(t){return function(e){return gh.define(t,e)}}function hh(t){return function(e){return gh.define(Pl(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class uh{constructor(t,e,n,i,s,r,o,a,l,c){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.defaultBindingMode=s,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=l,this.dependencies=c}get type(){return 2}static create(t,e){let n,i;return Pl(t)?(n=t,i={name:n}):(n=t.name,i=t),new uh(e,Fe(fh(e,"name"),n),Be(fh(e,"aliases"),i.aliases,e.aliases),gh.keyFrom(n),Fe(fh(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,$s.toView),Fe(fh(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Bl.from(e,...Bl.getAll(e),fh(e,"bindables"),e.bindables,i.bindables),Fe(fh(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),Be(yh.getAnnotation(e),e.watches),Be(fh(e,"dependencies"),i.dependencies,e.dependencies))}register(t){const{Type:e,key:n,aliases:i}=this;Nn.transient(n,e).register(t),Nn.aliasTo(n,e).register(t),Ri(i,gh,n,t)}}const dh=kl("custom-attribute"),ph=t=>`${dh}:${t}`,fh=(t,e)=>vl(xl(e),t),gh=Object.freeze({name:dh,keyFrom:ph,isType:t=>Rl(t)&&ml(dh,t),for(t,e){var n;return null!==(n=_u(t,ph(e)))&&void 0!==n?n:void 0},define(t,e){const n=uh.create(t,e);return yl(dh,n,n.Type),yl(dh,n,n),Sl(e,dh),n.Type},getDefinition(t){const e=vl(dh,t);if(void 0===e)throw new Error(`AUR0759:${t.name}`);return e},annotate(t,e,n){yl(xl(e),n,t)},getAnnotation:fh}),vh=zn,mh=xl("watch"),yh=Object.freeze({name:mh,add(t,e){let n=vl(mh,t);null==n&&yl(mh,n=[],t),n.push(e)},getAnnotation(t){var e;return null!==(e=vl(mh,t))&&void 0!==e?e:vh}});function bh(t){return function(e){return Lh.define(t,e)}}function wh(t){if(void 0===t)return function(t){Rh(t,"containerless",!0)};Rh(t,"containerless",!0)}const xh=new WeakMap;class kh{constructor(t,e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v,m,y,b,w){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.cache=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=g,this.shadowOptions=v,this.hasSlots=m,this.enhance=y,this.watches=b,this.processContent=w}get type(){return 1}static create(t,e=null){if(null===e){const n=t;if(Pl(n))throw new Error(`AUR0761:${t}`);const i=en("name",n,Oh);return e=Rl(n.Type)?n.Type:Lh.generateType(Re(i)),new kh(e,i,Be(n.aliases),en("key",n,(()=>Lh.keyFrom(i))),en("cache",n,Ch),en("capture",n,Eh),en("template",n,Ah),Be(n.instructions),Be(n.dependencies),en("injectable",n,Ah),en("needsCompile",n,Th),Be(n.surrogates),Bl.from(e,n.bindables),eh.from(n.childrenObservers),en("containerless",n,Eh),en("isStrictBinding",n,Eh),en("shadowOptions",n,Ah),en("hasSlots",n,Eh),en("enhance",n,Eh),en("watches",n,$h),tn("processContent",e,Ah))}if(Pl(t))return new kh(e,t,Be(Ph(e,"aliases"),e.aliases),Lh.keyFrom(t),tn("cache",e,Ch),tn("capture",e,Eh),tn("template",e,Ah),Be(Ph(e,"instructions"),e.instructions),Be(Ph(e,"dependencies"),e.dependencies),tn("injectable",e,Ah),tn("needsCompile",e,Th),Be(Ph(e,"surrogates"),e.surrogates),Bl.from(e,...Bl.getAll(e),Ph(e,"bindables"),e.bindables),eh.from(...eh.getAll(e),Ph(e,"childrenObservers"),e.childrenObservers),tn("containerless",e,Eh),tn("isStrictBinding",e,Eh),tn("shadowOptions",e,Ah),tn("hasSlots",e,Eh),tn("enhance",e,Eh),Be(yh.getAnnotation(e),e.watches),tn("processContent",e,Ah));const n=en("name",t,Oh);return new kh(e,n,Be(Ph(e,"aliases"),t.aliases,e.aliases),Lh.keyFrom(n),Je("cache",t,e,Ch),Je("capture",t,e,Eh),Je("template",t,e,Ah),Be(Ph(e,"instructions"),t.instructions,e.instructions),Be(Ph(e,"dependencies"),t.dependencies,e.dependencies),Je("injectable",t,e,Ah),Je("needsCompile",t,e,Th),Be(Ph(e,"surrogates"),t.surrogates,e.surrogates),Bl.from(e,...Bl.getAll(e),Ph(e,"bindables"),e.bindables,t.bindables),eh.from(...eh.getAll(e),Ph(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),Je("containerless",t,e,Eh),Je("isStrictBinding",t,e,Eh),Je("shadowOptions",t,e,Ah),Je("hasSlots",t,e,Eh),Je("enhance",t,e,Eh),Be(t.watches,yh.getAnnotation(e),e.watches),Je("processContent",t,e,Ah))}static getOrCreate(t){if(t instanceof kh)return t;if(xh.has(t))return xh.get(t);const e=kh.create(t);return xh.set(t,e),yl(Ih,e,e.Type),e}register(t){const{Type:e,key:n,aliases:i}=this;t.has(n,!1)||(Nn.transient(n,e).register(t),Nn.aliasTo(n,e).register(t),Ri(i,Lh,n,t))}}const Sh={name:void 0,searchParents:!1,optional:!1},Ch=()=>0,Ah=()=>null,Eh=()=>!1,Th=()=>!0,$h=()=>zn,Ih=kl("custom-element"),Oh=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),Rh=(t,e,n)=>{yl(xl(e),n,t)},Ph=(t,e)=>vl(xl(e),t),Lh=Object.freeze({name:Ih,keyFrom:t=>`${Ih}:${t}`,isType:t=>Rl(t)&&ml(Ih,t),for(t,e=Sh){if(void 0===e.name&&!0!==e.searchParents){const n=_u(t,Ih);if(null===n){if(!0===e.optional)return null;throw new Error("AUR0762")}return n}if(void 0!==e.name){if(!0!==e.searchParents){const n=_u(t,Ih);if(null===n)throw new Error("AUR0763");return n.is(e.name)?n:void 0}let n=t,i=!1;for(;null!==n;){const t=_u(n,Ih);if(null!==t&&(i=!0,t.is(e.name)))return t;n=ed(n)}if(i)return;throw new Error("AUR0764")}let n=t;for(;null!==n;){const t=_u(n,Ih);if(null!==t)return t;n=ed(n)}throw new Error("AUR0765")},define(t,e){const n=kh.create(t,e);return yl(Ih,n,n.Type),yl(Ih,n,n),Sl(n.Type,Ih),n.Type},getDefinition(t){const e=vl(Ih,t);if(void 0===e)throw new Error(`AUR0760:${t.name}`);return e},annotate:Rh,getAnnotation:Ph,generateName:Oh,createInjectable(){const t=function(e,n,i){return an.getOrCreateAnnotationParamTypes(e)[i]=t,e};return t.register=function(e){return{resolve:(e,n)=>n.has(t,!0)?n.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(n,i=e){const s=class{};return t.value=n,Reflect.defineProperty(s,"name",t),i!==e&&Object.assign(s.prototype,i),s}}()});xl("processContent");class Mh{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.J={},this.tt=0,this.H=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H){this.H=!1;const t=this.value,e=this.J,n=jh(t);let i=this.tt;if(this.ov=t,n.length>0&&this.it(n),this.tt+=1,0===i)return;i-=1;for(const t in e)Tl.call(e,t)&&e[t]===i&&this.obj.classList.remove(t)}}it(t){const e=this.obj,n=t.length;let i,s=0;for(;s<n;s++)i=t[s],0!==i.length&&(this.J[i]=this.tt,e.classList.add(i))}}function jh(t){if(Pl(t))return Uh(t);if("object"!=typeof t)return zn;if(t instanceof Array){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...jh(t[i]));return n}return zn}const e=[];let n;for(n in t)Boolean(t[n])&&(n.includes(" ")?e.push(...Uh(n)):e.push(n));return e}function Uh(t){const e=t.match(/\S+/g);return null===e?zn:e}an.createInterface("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>Dh.supported(t.get(gc))?t.get(Nh):t.get(Bh)))));class Nh{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new Dh(this.p,t,this.cache,e)}}Nh.inject=[gc];class Bh{constructor(t){this.p=t}createStyles(t,e){return new zh(this.p,t,e)}}Bh.inject=[gc];const Fh=an.createInterface("IShadowDOMStyles"),Vh=an.createInterface("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:Hn})));class Dh{constructor(t,e,n,i=null){this.sharedStyles=i,this.styleSheets=e.map((e=>{let i;return e instanceof t.CSSStyleSheet?i=e:(i=n.get(e),void 0===i&&(i=new t.CSSStyleSheet,i.replaceSync(e),n.set(e,i))),i}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class zh{constructor(t,e,n=null){this.p=t,this.localStyles=e,this.sharedStyles=n}applyTo(t){const e=this.localStyles,n=this.p;for(let i=e.length-1;i>-1;--i){const s=n.document.createElement("style");s.innerHTML=e[i],t.prepend(s)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:qh,exit:Hh}=Uo,{wrap:Zh,unwrap:Wh}=$a;class Kh{constructor(t,e,n,i,s){this.obj=t,this.get=n,this.cb=i,this.useProxy=s,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.value,n=this.compute();Object.is(n,e)||this.cb.call(t,n,e,t)}compute(){this.running=!0,this.obs.version++;try{return qh(this),this.value=Wh(this.get.call(void 0,this.useProxy?Zh(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,Hh(this)}}}class _h{constructor(t,e,n,i,s){this.scope=t,this.locator=e,this.oL=n,this.expression=i,this.callback=s,this.interceptor=this,this.isBound=!1,this.obj=t.bindingContext}handleChange(t){const e=this.expression,n=this.obj,i=this.value;10082===e.$kind&&1===this.obs.count||(this.obs.version++,t=e.evaluate(0,this.scope,this.locator,this),this.obs.clear()),Object.is(t,i)||(this.value=t,this.callback.call(n,t,i,n))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,this.locator,this),this.obs.clear())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.value=void 0)}}Qr(Kh),Qr(_h);const Qh=an.createInterface("ILifecycleHooks");class Gh{constructor(t,e){this.definition=t,this.instance=e}}class Xh{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const n=new Set;let i=e.prototype;for(;i!==Object.prototype;){for(const t of Object.getOwnPropertyNames(i))"constructor"!==t&&n.add(t);i=Object.getPrototypeOf(i)}return new Xh(e,n)}register(t){Nn.singleton(Qh,this.Type).register(t)}}const Yh=new WeakMap,Jh=xl("lifecycle-hooks"),tu=Object.freeze({name:Jh,define(t,e){const n=Xh.create(t,e);return yl(Jh,n,e),Sl(e,Jh),n.Type},resolve(t){let e=Yh.get(t);if(void 0===e){Yh.set(t,e=new eu);const n=t.root,i=n.id===t.id?t.getAll(Qh):t.has(Qh,!1)?n.getAll(Qh).concat(t.getAll(Qh)):n.getAll(Qh);let s,r,o,a,l;for(s of i)for(a of(r=vl(Jh,s.constructor),o=new Gh(r,s),r.propertyNames))l=e[a],void 0===l?e[a]=[o]:l.push(o)}return e}});class eu{}const nu=an.createInterface("IViewFactory");class iu{constructor(t,e){this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=iu.maxCacheSize:Pl(t)&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t){const e=this.cache;let n;return null!=e&&e.length>0?(n=e.pop(),n):(n=vu.$view(this,t),n)}}iu.maxCacheSize=65535;const su=new WeakSet;function ru(t){return!su.has(t)}function ou(t){return su.add(t),kh.create(t)}const au=kl("views"),lu=Object.freeze({name:au,has:t=>Rl(t)&&(ml(au,t)||"$views"in t),get(t){if(Rl(t)&&"$views"in t){const e=t.$views.filter(ru).map(ou);for(const n of e)lu.add(t,n)}let e=vl(au,t);return void 0===e&&yl(au,e=[],t),e},add(t,e){const n=kh.create(e);let i=vl(au,t);return void 0===i?yl(au,i=[n],t):i.push(n),i}}),cu=an.createInterface("IViewLocator",(t=>t.singleton(hu)));class hu{constructor(){this.et=new WeakMap,this.st=new Map}getViewComponentForObject(t,e){if(t){const n=lu.has(t.constructor)?lu.get(t.constructor):[],i=Rl(e)?e(t,n):this.nt(n,e);return this.rt(t,n,i)}return null}rt(t,e,n){let i,s=this.et.get(t);if(void 0===s?(s={},this.et.set(t,s)):i=s[n],void 0===i){const r=this.ot(t,e,n);i=Lh.define(Lh.getDefinition(r),class extends r{constructor(){super(t)}}),s[n]=i}return i}ot(t,e,n){let i,s=this.st.get(t.constructor);if(void 0===s?(s={},this.st.set(t.constructor,s)):i=s[n],void 0===i){i=Lh.define(this.lt(e,n),class{constructor(t){this.viewModel=t}define(t,e,n){const i=this.viewModel;if(t.scope=Li.fromParent(t.scope,i),void 0!==i.define)return i.define(t,e,n)}});const r=i.prototype;"hydrating"in t&&(r.hydrating=function(t){this.viewModel.hydrating(t)}),"hydrated"in t&&(r.hydrated=function(t){this.viewModel.hydrated(t)}),"created"in t&&(r.created=function(t){this.viewModel.created(t)}),"binding"in t&&(r.binding=function(t,e,n){return this.viewModel.binding(t,e,n)}),"bound"in t&&(r.bound=function(t,e,n){return this.viewModel.bound(t,e,n)}),"attaching"in t&&(r.attaching=function(t,e,n){return this.viewModel.attaching(t,e,n)}),"attached"in t&&(r.attached=function(t,e){return this.viewModel.attached(t,e)}),"detaching"in t&&(r.detaching=function(t,e,n){return this.viewModel.detaching(t,e,n)}),"unbinding"in t&&(r.unbinding=function(t,e,n){return this.viewModel.unbinding(t,e,n)}),"dispose"in t&&(r.dispose=function(){this.viewModel.dispose()}),s[n]=i}return i}nt(t,e){return e||(1===t.length?t[0].name:"default-view")}lt(t,e){const n=t.find((t=>t.name===e));if(void 0===n)throw new Error(`Could not find view: ${e}`);return n}}const uu=an.createInterface("IRendering",(t=>t.singleton(du)));class du{constructor(t){this.ht=new WeakMap,this.ct=new WeakMap,this.ut=(this.ft=t.root).get(gc),this.dt=new sd(this.ut,this.ut.document.createDocumentFragment())}get renderers(){return null==this.rs?this.rs=this.ft.getAll(zd,!1).reduce(((t,e)=>(t[e.target]=e,t)),El()):this.rs}compile(t,e,n){if(!1!==t.needsCompile){const i=this.ht,s=e.get(Dd);let r=i.get(t);return null==r?i.set(t,r=s.compile(t,e,n)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new iu(e,kh.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new sd(this.ut,t.template);let e;const n=this.ct;if(n.has(t))e=n.get(t);else{const i=this.ut,s=i.document,r=t.template;let o;null===r?e=null:r instanceof i.Node?"TEMPLATE"===r.nodeName?e=s.adoptNode(r.content):(e=s.adoptNode(s.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=s.createElement("template"),Pl(r)&&(o.innerHTML=r),s.adoptNode(e=o.content)),n.set(t,e)}return null==e?this.dt:new sd(this.ut,e.cloneNode(!0))}render(t,e,n,i){const s=n.instructions,r=this.renderers,o=e.length;if(e.length!==s.length)throw new Error(`AUR0757:${o}<>${s.length}`);let a,l,c,h=0,u=0,d=0;if(o>0)for(;o>h;){for(a=s[h],c=e[h],u=0,d=a.length;d>u;)l=a[u],r[l.type].render(t,c,l),++u;++h}if(null!=i&&(a=n.surrogates,(d=a.length)>0))for(u=0;d>u;)l=a[u],r[l.type].render(t,i,l),++u}}var pu;du.inject=[hn],function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(pu||(pu={}));const fu={optional:!0},gu=new WeakMap;class vu{constructor(t,e,n,i,s,r,o){switch(this.container=t,this.vmKind=e,this.definition=n,this.viewFactory=i,this.viewModel=s,this.host=r,this.id=je("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.vt=!1,this.gt=zn,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.wt=0,this.bt=0,this.xt=0,this.location=o,this.r=t.root.get(uu),e){case 1:case 0:this.hooks=new ku(s);break;case 2:this.hooks=ku.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var t;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(t=this.parent.definition)||void 0===t?void 0:t.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(t){return gu.get(t)}static getCachedOrThrow(t){const e=vu.getCached(t);if(void 0===e)throw new Error(`AUR0500:${t}`);return e}static $el(t,e,n,i,s,r=null){if(gu.has(e))return gu.get(e);s=null!=s?s:Lh.getDefinition(e.constructor);const o=new vu(t,0,s,null,e,n,r),a=t.get(yn($u));return s.dependencies.length>0&&t.register(...s.dependencies),t.registerResolver($u,new Bn("IHydrationContext",new Iu(o,i,a))),gu.set(e,o),null!=i&&!1===i.hydrate||o.hE(i,a),o}static $attr(t,e,n,i){if(gu.has(e))return gu.get(e);i=null!=i?i:gh.getDefinition(e.constructor);const s=new vu(t,1,i,null,e,n,null);return i.dependencies.length>0&&t.register(...i.dependencies),gu.set(e,s),s.yt(),s}static $view(t,e){const n=new vu(t.container,2,null,t,null,null,null);return n.parent=null!=e?e:null,n.kt(),n}hE(t,e){const n=this.container,i=(this.flags,this.viewModel);let s=this.definition;if(this.scope=Li.create(i,null,!0),s.watches.length>0&&xu(this,n,s,i),yu(this,s,0,i),this.gt=function(t,e,n){const i=e.childrenObservers,s=Object.getOwnPropertyNames(i),r=s.length;if(r>0){const e=mu(n),o=[];let a,l,c=0;for(;c<r;++c)a=s[c],null==e[a]&&(l=i[a],o[o.length]=e[a]=new sh(t,n,a,l.callback,l.query,l.filter,l.map,l.options));return o}return zn}(this,s,i),this.hooks.hasDefine){const t=i.define(this,e,s);void 0!==t&&t!==s&&(s=kh.getOrCreate(t))}this.lifecycleHooks=tu.resolve(n),s.register(n),null!==s.injectable&&n.registerResolver(s.injectable,new Bn("definition.injectable",i)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){void 0!==this.lifecycleHooks.hydrating&&this.lifecycleHooks.hydrating.forEach(Pu,this),this.hooks.hasHydrating&&this.viewModel.hydrating(this);const e=this.Ct=this.r.compile(this.definition,this.container,t),{shadowOptions:n,isStrictBinding:i,hasSlots:s}=e,r=this.location;if(this.isStrictBinding=i,null!==(this.hostController=Lh.for(this.host,fu))&&(this.host=this.container.root.get(gc).document.createElement(this.definition.name)),Qu(this.host,Lh.name,this),Qu(this.host,this.definition.key,this),null!==n||s){if(null!=r)throw new Error("AUR0501");Qu(this.shadowRoot=this.host.attachShadow(null!=n?n:Su),Lh.name,this),Qu(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=r?(Qu(r,Lh.name,this),Qu(r,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.lifecycleHooks.hydrated&&this.lifecycleHooks.hydrated.forEach(Lu,this),this.hooks.hasHydrated&&this.viewModel.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Ct,this.host),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(Ru,this),this.hooks.hasCreated&&this.viewModel.created(this)}yt(){const t=this.definition,e=this.viewModel;t.watches.length>0&&xu(this,this.container,t,e),yu(this,t,this.flags,e),e.$controller=this,this.lifecycleHooks=tu.resolve(this.container),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(Ru,this),this.hooks.hasCreated&&this.viewModel.created(this)}kt(){this.Ct=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Ct.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Ct)).findTargets(),this.Ct,void 0)}activate(t,e,n,i){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`AUR0502:${this.name}`);default:throw new Error(`AUR0503:${this.name} ${Eu(this.state)}`)}switch(this.parent=e,n|=2,this.vmKind){case 0:this.scope.parentScope=null!=i?i:null;break;case 1:this.scope=null!=i?i:null;break;case 2:if(null==i)throw new Error("AUR0504");this.hasLockedScope||(this.scope=i)}let s;return this.isStrictBinding&&(n|=1),this.$initiator=t,this.$flags=n,this.At(),2!==this.vmKind&&null!=this.lifecycleHooks.binding&&(s=He(...this.lifecycleHooks.binding.map(Mu,this))),this.hooks.hasBinding&&(s=He(s,this.viewModel.binding(this.$initiator,this.parent,this.$flags))),s instanceof Promise?(this.Rt(),s.then((()=>{this.bind()})).catch((t=>{this.St(t)})),this.$promise):(this.bind(),this.$promise)}bind(){let t,e=0,n=this.gt.length;if(n>0)for(;n>e;)this.gt[e].start(),++e;if(null!==this.bindings)for(e=0,n=this.bindings.length;n>e;)this.bindings[e].$bind(this.$flags,this.scope),++e;if(2!==this.vmKind&&null!=this.lifecycleHooks.bound&&(t=He(...this.lifecycleHooks.bound.map(ju,this))),this.hooks.hasBound&&(t=He(t,this.viewModel.bound(this.$initiator,this.parent,this.$flags))),t instanceof Promise)return this.Rt(),void t.then((()=>{this.isBound=!0,this.Et()})).catch((t=>{this.St(t)}));this.isBound=!0,this.Et()}Bt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Et(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Bt(this.host);break;case 3:this.hostController.Bt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(Fh,!1)?t.get(Fh):t.get(Vh)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.lifecycleHooks.attaching&&(t=He(...this.lifecycleHooks.attaching.map(Uu,this))),this.hooks.hasAttaching&&(t=He(t,this.viewModel.attaching(this.$initiator,this.parent,this.$flags))),t instanceof Promise&&(this.Rt(),this.At(),t.then((()=>{this.It()})).catch((t=>{this.St(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.It()}deactivate(t,e,n){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`AUR0505:${this.name} ${Eu(this.state)}`)}this.$initiator=t,this.$flags=n,t===this&&this.Tt();let i,s=0;if(this.gt.length)for(;s<this.gt.length;++s)this.gt[s].stop();if(null!==this.children)for(s=0;s<this.children.length;++s)this.children[s].deactivate(t,this,n);if(2!==this.vmKind&&null!=this.lifecycleHooks.detaching&&(i=He(...this.lifecycleHooks.detaching.map(Bu,this))),this.hooks.hasDetaching&&(i=He(i,this.viewModel.detaching(this.$initiator,this.parent,this.$flags))),i instanceof Promise&&(this.Rt(),t.Tt(),i.then((()=>{t.Dt()})).catch((e=>{t.St(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Dt(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=4|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].$unbind(t);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}16==(16&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.Pt()}Rt(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Rt())}Pt(){void 0!==this.$promise&&(Vu=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,Vu(),Vu=void 0)}St(t){void 0!==this.$promise&&(Du=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,Du(t),Du=void 0),this.$initiator!==this&&this.parent.St(t)}At(){++this.wt,this.$initiator!==this&&this.parent.At()}It(){if(0==--this.wt){if(2!==this.vmKind&&null!=this.lifecycleHooks.attached&&(zu=He(...this.lifecycleHooks.attached.map(Nu,this))),this.hooks.hasAttached&&(zu=He(zu,this.viewModel.attached(this.$initiator,this.$flags))),zu instanceof Promise)return this.Rt(),zu.then((()=>{this.state=2,this.Pt(),this.$initiator!==this&&this.parent.It()})).catch((t=>{this.St(t)})),void(zu=void 0);zu=void 0,this.state=2,this.Pt()}this.$initiator!==this&&this.parent.It()}Tt(){++this.bt}Dt(){if(0==--this.bt){this.$t(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),2!==e.vmKind&&null!=e.lifecycleHooks.unbinding&&(t=He(...e.lifecycleHooks.unbinding.map(Fu,this))),e.hooks.hasUnbinding&&(e.debug&&e.logger.trace("unbinding()"),t=He(t,e.viewModel.unbinding(e.$initiator,e.parent,e.$flags))),t instanceof Promise&&(this.Rt(),this.$t(),t.then((()=>{this.Ot()})).catch((t=>{this.St(t)}))),t=void 0,e=e.next;this.Ot()}}$t(){++this.xt}Ot(){if(0==--this.xt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return gh.getDefinition(this.viewModel.constructor).name===t;case 0:return Lh.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(Qu(t,Lh.name,this),Qu(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(Qu(t,Lh.name,this),Qu(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(Qu(t,Lh.name,this),Qu(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(Ou),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(gu.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}}function mu(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function yu(t,e,n,i){const s=e.bindables,r=Object.getOwnPropertyNames(s),o=r.length;if(o>0){let e,n,a=0;const l=mu(i),c=t.container,h=c.has(Ts,!0)?c.get(Ts):null;for(;a<o;++a)e=r[a],void 0===l[e]&&(n=s[e],l[e]=new Dl(i,e,n.callback,n.set,t,h))}}const bu=new Map,wu=t=>{let e=bu.get(t);return null==e&&(e=new ss(t,0),bu.set(t,e)),e};function xu(t,e,n,i){const s=e.get(za),r=e.get(Gr),o=n.watches,a=0===t.vmKind?t.scope:Li.create(i,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if(({expression:c,callback:h}=o[d]),h=Rl(h)?h:Reflect.get(i,h),!Rl(h))throw new Error(`AUR0506:${String(h)}`);Rl(c)?t.addBinding(new Kh(i,s,c,h,!0)):(u=Pl(c)?r.parse(c,8):wu(c),t.addBinding(new _h(a,e,s,u,h)))}}class ku{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}ku.none=new ku({});const Su={mode:"open"};var Cu,Au;function Eu(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(Cu||(Cu={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(Au||(Au={}));const Tu=an.createInterface("IController"),$u=an.createInterface("IHydrationContext");class Iu{constructor(t,e,n){this.instruction=e,this.parent=n,this.controller=t}}function Ou(t){t.dispose()}function Ru(t){t.instance.created(this.viewModel,this)}function Pu(t){t.instance.hydrating(this.viewModel,this)}function Lu(t){t.instance.hydrated(this.viewModel,this)}function Mu(t){return t.instance.binding(this.viewModel,this.$initiator,this.parent,this.$flags)}function ju(t){return t.instance.bound(this.viewModel,this.$initiator,this.parent,this.$flags)}function Uu(t){return t.instance.attaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Nu(t){return t.instance.attached(this.viewModel,this.$initiator,this.$flags)}function Bu(t){return t.instance.detaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Fu(t){return t.instance.unbinding(this.viewModel,this.$initiator,this.parent,this.$flags)}let Vu,Du,zu;const qu=an.createInterface("IAppRoot"),Hu=an.createInterface("IWorkTracker",(t=>t.singleton(Zu)));class Zu{constructor(t){this.Lt=0,this.qt=null,this.Pt=null,this.Ut=t.scopeTo("WorkTracker")}start(){this.Ut.trace(`start(stack:${this.Lt})`),++this.Lt}finish(){if(this.Ut.trace(`finish(stack:${this.Lt})`),0==--this.Lt){const t=this.Pt;null!==t&&(this.Pt=this.qt=null,t())}}wait(){if(this.Ut.trace(`wait(stack:${this.Lt})`),null===this.qt){if(0===this.Lt)return Promise.resolve();this.qt=new Promise((t=>{this.Pt=t}))}return this.qt}}Zu.inject=[Jn];class Wu{constructor(t,e,n,i){this.config=t,this.platform=e,this.container=n,this.controller=void 0,this._t=void 0,this.host=t.host,this.work=n.get(Hu),i.prepare(this),n.registerResolver(e.HTMLElement,n.registerResolver(e.Element,n.registerResolver(Gu,new Bn("ElementResolver",t.host)))),this._t=qe(this.Ft("beforeCreate"),(()=>{const e=t.component,i=n.createChild();let s;s=Lh.isType(e)?this.container.get(e):t.component;const r={hydrate:!1,projections:null},o=this.controller=vu.$el(i,s,this.host,r);return o.hE(r,null),qe(this.Ft("hydrating"),(()=>(o.hS(null),qe(this.Ft("hydrated"),(()=>{o.hC(),this._t=void 0})))))}))}activate(){return qe(this._t,(()=>qe(this.Ft("beforeActivate"),(()=>qe(this.controller.activate(this.controller,null,2,void 0),(()=>this.Ft("afterActivate")))))))}deactivate(){return qe(this.Ft("beforeDeactivate"),(()=>qe(this.controller.deactivate(this.controller,null,0),(()=>this.Ft("afterDeactivate")))))}Ft(t){return He(...this.container.getAll(Qc).reduce(((e,n)=>(n.slot===t&&e.push(n.run()),e)),[]))}dispose(){var t;null===(t=this.controller)||void 0===t||t.dispose()}}class Ku{}function _u(t,e){var n,i;return null!==(i=null===(n=t.$au)||void 0===n?void 0:n[e])&&void 0!==i?i:null}function Qu(t,e,n){var i,s;(null!==(i=(s=t).$au)&&void 0!==i?i:s.$au=new Ku)[e]=n}const Gu=an.createInterface("INode"),Xu=an.createInterface("IEventTarget",(t=>t.cachedCallback((t=>t.has(qu,!0)?t.get(qu).host:t.get(gc).document)))),Yu=an.createInterface("IRenderLocation");var Ju;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(Ju||(Ju={}));const td=new WeakMap;function ed(t){if(td.has(t))return td.get(t);let e=0,n=t.nextSibling;for(;null!==n;){if(8===n.nodeType)switch(n.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return n}n=n.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Lh.for(t);if(void 0===e)return null;if(2===e.mountTarget)return ed(e.host)}return t.parentNode}function nd(t){if(id(t))return t;const e=t.ownerDocument.createComment("au-end"),n=t.ownerDocument.createComment("au-start");return null!==t.parentNode&&(t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(n,e)),e.$start=n,e}function id(t){return"au-end"===t.textContent}class sd{constructor(t,e){this.platform=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const n=e.querySelectorAll(".au");let i,s=0,r=n.length,o=this.targets=Array(r);for(;r>s;)i=n[s],"AU-M"===i.nodeName?o[s]=nd(i):o[s]=i,++s;const a=e.childNodes,l=this.childNodes=Array(r=a.length);for(s=0;r>s;)l[s]=a[s],++s;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e,n=this.firstChild;const i=this.lastChild;for(;null!=n&&(e=n.nextSibling,t.appendChild(n),n!==i);)n=e}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let n,i=this.firstChild;for(;null!==i&&(n=i.nextSibling,t.appendChild(i),i!==e);)i=n}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,id(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}const rd=an.createInterface("IWindow",(t=>t.callback((t=>t.get(gc).window)))),od=an.createInterface("ILocation",(t=>t.callback((t=>t.get(rd).location)))),ad=an.createInterface("IHistory",(t=>t.callback((t=>t.get(rd).history)))),ld={[Rs.capturing]:{capture:!0},[Rs.bubbling]:{capture:!1}};class cd{constructor(t,e,n){this.prevent=t,this.strategy=e,this.expAsHandler=n}}class hd{constructor(t,e,n,i,s,r,o){this.platform=t,this.targetEvent=e,this.sourceExpression=n,this.target=i,this.eventDelegator=s,this.locator=r,this.Vt=o,this.interceptor=this,this.isBound=!1,this.handler=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;let n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);if(delete e.$event,this.Vt.expAsHandler){if(!Rl(n))throw new Error(`Handler of "${this.targetEvent}" event is not a function.`);n=n(t)}return!0!==n&&this.Vt.prevent&&t.preventDefault(),n}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.Vt.strategy===Rs.none?this.target.addEventListener(this.targetEvent,this):this.handler=this.eventDelegator.addEventListener(this.locator.get(Xu),this.target,this.targetEvent,this,ld[this.Vt.strategy]),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.Vt.strategy===Rs.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const ud={capture:!1};class dd{constructor(t,e,n=ud){this.Mt=t,this.jt=e,this.Vt=n,this.Nt=0,this.Wt=new Map,this.Ht=new Map}zt(){1==++this.Nt&&this.Mt.addEventListener(this.jt,this,this.Vt)}Gt(){0==--this.Nt&&this.Mt.removeEventListener(this.jt,this,this.Vt)}dispose(){this.Nt>0&&(this.Nt=0,this.Mt.removeEventListener(this.jt,this,this.Vt)),this.Wt.clear(),this.Ht.clear()}Xt(t){const e=!0===this.Vt.capture?this.Wt:this.Ht;let n=e.get(t);return void 0===n&&e.set(t,n=El()),n}handleEvent(t){const e=!0===this.Vt.capture?this.Wt:this.Ht,n=t.composedPath();!0===this.Vt.capture&&n.reverse();for(const i of n){const n=e.get(i);if(void 0===n)continue;const s=n[this.jt];if(void 0!==s&&(Rl(s)?s(t):s.handleEvent(t),!0===t.cancelBubble))return}}}class pd{constructor(t,e,n,i){this.Kt=t,this.Yt=e,this.jt=n,t.zt(),e[n]=i}dispose(){this.Kt.Gt(),this.Yt[this.jt]=void 0}}class fd{constructor(t){this.config=t,this.target=null,this.handler=null}subscribe(t,e){let n;for(n of(this.target=t,this.handler=e,this.config.events))t.addEventListener(n,e)}dispose(){const{target:t,handler:e}=this;let n;if(null!==t&&null!==e)for(n of this.config.events)t.removeEventListener(n,e);this.target=this.handler=null}}const gd=an.createInterface("IEventDelegator",(t=>t.singleton(vd)));class vd{constructor(){this.Zt=El()}addEventListener(t,e,n,i,s){var r,o;const a=null!==(r=(o=this.Zt)[n])&&void 0!==r?r:o[n]=new Map;let l=a.get(t);return void 0===l&&a.set(t,l=new dd(t,n,s)),new pd(l,l.Xt(e),n,i)}dispose(){for(const t in this.Zt){const e=this.Zt[t];for(const t of e.values())t.dispose();e.clear()}}}an.createInterface("IProjections");const md=an.createInterface("IAuSlotsInfo");class yd{constructor(t){this.projectedSlots=t}}var bd;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}(bd||(bd={}));const wd=an.createInterface("Instruction");function xd(t){const e=t.type;return Pl(e)&&2===e.length}class kd{constructor(t,e){this.from=t,this.to=e}get type(){return"rf"}}class Sd{constructor(t,e,n){this.from=t,this.to=e,this.mode=n}get type(){return"rg"}}class Cd{constructor(t,e){this.from=t,this.to=e}get type(){return"rk"}}class Ad{constructor(t,e){this.from=t,this.to=e}get type(){return"rh"}}class Ed{constructor(t,e){this.from=t,this.to=e}get type(){return"rj"}}class Td{constructor(t,e){this.value=t,this.to=e}get type(){return"re"}}class $d{constructor(t,e,n,i,s,r){this.res=t,this.alias=e,this.props=n,this.projections=i,this.containerless=s,this.captures=r,this.auSlot=null}get type(){return"ra"}}class Id{constructor(t,e,n){this.res=t,this.alias=e,this.props=n}get type(){return"rb"}}class Od{constructor(t,e,n,i){this.def=t,this.res=e,this.alias=n,this.props=i}get type(){return"rc"}}class Rd{constructor(t,e){this.instructions=t,this.toBindingContext=e}get type(){return"rd"}}class Pd{constructor(t,e){this.from=t,this.to=e}get type(){return"ri"}}class Ld{constructor(t,e){this.from=t,this.strict=e}get type(){return"ha"}}class Md{constructor(t,e,n,i){this.from=t,this.to=e,this.preventDefault=n,this.strategy=i}get type(){return"hb"}}class jd{constructor(t,e){this.value=t,this.to=e}get type(){return"he"}}class Ud{constructor(t){this.value=t,this.type="hf"}}class Nd{constructor(t){this.value=t,this.type="hg"}}class Bd{constructor(t,e,n){this.attr=t,this.from=e,this.to=n}get type(){return"hc"}}class Fd{get type(){return"hs"}}class Vd{constructor(t){this.instructions=t}get type(){return"hp"}}const Dd=an.createInterface("ITemplateCompiler"),zd=an.createInterface("IRenderer");function qd(t){return function(e){return e.register=function(t){Nn.singleton(zd,this).register(t)},Ll(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function Hd(t,e,n){return Pl(e)?t.parse(e,n):e}function Zd(t){return null!=t.viewModel?t.viewModel:t}let Wd=class{render(t,e,n){const i=Zd(e);void 0!==i.$observers&&void 0!==i.$observers[n.to]?i.$observers[n.to].setValue(n.value,2):i[n.to]=n.value}};Wd=fl([qd("re")],Wd);let Kd=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[uu,gc]}render(t,e,n){let i,s,r,o;const a=n.res,l=n.projections,c=t.container;if("string"==typeof a){if(i=c.find(Lh,a),null==i)throw new Error(`AUR0752:${a}@${t.name}`)}else i=a;const h=n.containerless||i.containerless?nd(e):null,u=function(t,e,n,i,s,r){const o=e.container.createChild();return o.registerResolver(t.HTMLElement,o.registerResolver(t.Element,o.registerResolver(Gu,new Bn("ElementResolver",n)))),o.registerResolver(Tu,new Bn(mp,e)),o.registerResolver(wd,new Bn(yp,i)),o.registerResolver(Yu,null==s?Sp:new kp(s)),o.registerResolver(nu,Cp),o.registerResolver(md,null==r?Ap:new Bn(bp,r)),o}(this.p,t,e,n,h,null==l?void 0:new yd(Object.keys(l)));s=i.Type,r=u.invoke(s),u.registerResolver(s,new Bn(i.key,r)),o=vu.$el(u,r,e,n,i,h),Qu(e,i.key,o);const d=this.r.renderers,p=n.props,f=p.length;let g,v=0;for(;f>v;)g=p[v],d[g.type].render(t,o,g),++v;t.addChild(o)}};Kd=fl([qd("ra")],Kd);let _d=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[uu,gc]}render(t,e,n){let i,s=t.container;if("string"==typeof n.res){if(i=s.find(gh,n.res),null==i)throw new Error(`AUR0753:${n.res}@${t.name}`)}else i=n.res;const r=xp(this.p,i,t,e,n,void 0,void 0),o=vu.$attr(r.ctn,r.vm,e,i);Qu(e,i.key,o);const a=this.r.renderers,l=n.props,c=l.length;let h,u=0;for(;c>u;)h=l[u],a[h.type].render(t,o,h),++u;t.addChild(o)}};_d=fl([qd("rb")],_d);let Qd=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[uu,gc]}render(t,e,n){var i,s;let r,o=t.container;if("string"==typeof n.res){if(r=o.find(gh,n.res),null==r)throw new Error(`AUR0754:${n.res}@${t.name}`)}else r=n.res;const a=this.r.getViewFactory(n.def,o),l=nd(e),c=xp(this.p,r,t,e,n,a,l),h=vu.$attr(c.ctn,c.vm,e,r);Qu(l,r.key,h),null===(s=(i=c.vm).link)||void 0===s||s.call(i,t,h,e,n);const u=this.r.renderers,d=n.props,p=d.length;let f,g=0;for(;p>g;)f=d[g],u[f.type].render(t,h,f),++g;t.addChild(h)}};Qd=fl([qd("rc")],Qd);let Gd=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){e.remove();const i=n.instructions,s=n.toBindingContext,r=t.container,o=i.length;let a,l,c,h=0;for(;o>h;)a=i[h],l=Hd(this.ep,a.from,8),c=new Vc(l,a.to,this.oL,r,s),t.addBinding(38962===l.$kind?sp(c,l,r):c),++h}};Gd.inject=[Gr,za],Gd=fl([qd("rd")],Gd);let Xd=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=Hd(this.ep,n.from,12),s=new xc(i,Zd(e),n.to,this.oL,t.container);t.addBinding(38962===i.$kind?sp(s,i,t.container):s)}};Xd.inject=[Gr,za],Xd=fl([qd("rh")],Xd);let Yd=class{constructor(t){this.ep=t}render(t,e,n){const i=Hd(this.ep,n.from,8),s=new _c(i,function(t,e){if("element"===e)return t;switch(e){case"controller":return Lh.for(t);case"view":throw new Error("AUR0750");case"view-model":return Lh.for(t).viewModel;default:{const n=gh.for(t,e);if(void 0!==n)return n.viewModel;const i=Lh.for(t,{name:e});if(void 0===i)throw new Error(`AUR0751:${e}`);return i.viewModel}}}(e,n.to),t.container);t.addBinding(38962===i.$kind?sp(s,i,t.container):s)}};Yd.inject=[Gr],Yd=fl([qd("rj")],Yd);let Jd=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=Hd(this.ep,n.from,1),r=new Nc(this.oL,s,Zd(e),n.to,$s.toView,i,this.p.domWriteQueue),o=r.partBindings,a=o.length;let l,c=0;for(;a>c;++c)l=o[c],38962===l.sourceExpression.$kind&&(o[c]=sp(l,l.sourceExpression,i));t.addBinding(r)}};Jd.inject=[Gr,za,gc],Jd=fl([qd("rf")],Jd);let tp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Hd(this.ep,n.from,8),s=new Wc(i,Zd(e),n.to,n.mode,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?sp(s,i,t.container):s)}};tp.inject=[Gr,za,gc],tp=fl([qd("rg")],tp);let ep=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Hd(this.ep,n.from,2),s=new Wc(i,Zd(e),n.to,$s.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.iterable.$kind?sp(s,i.iterable,t.container):s)}};ep.inject=[Gr,za,gc],ep=fl([qd("rk")],ep);let np=0;const ip=[];function sp(t,e,n){for(;e instanceof Ji;)ip[np++]=e,e=e.expression;for(;np>0;){const e=ip[--np],i=n.get(e.behaviorKey);i instanceof Vi&&(t=i.construct(t,e))}return ip.length=0,t}let rp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=e.nextSibling,r=e.parentNode,o=this.p.document,a=Hd(this.ep,n.from,1),l=a.parts,c=a.expressions,h=c.length;let u,d,p=0,f=l[0];for(""!==f&&r.insertBefore(o.createTextNode(f),s);h>p;++p)d=c[p],u=new Fc(d,r.insertBefore(o.createTextNode(""),s),i,this.oL,this.p,n.strict),t.addBinding(38962===d.$kind?sp(u,d,i):u),f=l[p+1],""!==f&&r.insertBefore(o.createTextNode(f),s);"AU-M"===e.nodeName&&e.remove()}};rp.inject=[Gr,za,gc],rp=fl([qd("ha")],rp);const op=an.createInterface("IListenerBehaviorOptions",(t=>t.singleton(ap)));class ap{constructor(){this.expAsHandler=!1}}let lp=class{constructor(t,e,n,i){this.ep=t,this.Jt=e,this.p=n,this.Qt=i}render(t,e,n){const i=Hd(this.ep,n.from,4),s=new hd(this.p,n.to,i,e,this.Jt,t.container,new cd(n.preventDefault,n.strategy,this.Qt.expAsHandler));t.addBinding(38962===i.$kind?sp(s,i,t.container):s)}};lp.inject=[Gr,gd,gc,op],lp=fl([qd("hb")],lp);let cp=class{render(t,e,n){e.setAttribute(n.to,n.value)}};cp=fl([qd("he")],cp);let hp=class{render(t,e,n){!function(t,e){const n=e.length;let i=0;for(let s=0;s<n;++s)32===e.charCodeAt(s)?(s!==i&&t.add(e.slice(i,s)),i=s+1):s+1===n&&t.add(e.slice(i))}(e.classList,n.value)}};hp=fl([qd("hf")],hp);let up=class{render(t,e,n){e.style.cssText+=n.value}};up=fl([qd("hg")],up);let dp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Hd(this.ep,n.from,8),s=new Wc(i,e.style,n.to,$s.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?sp(s,i,t.container):s)}};dp.inject=[Gr,za,gc],dp=fl([qd("hd")],dp);let pp=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=Hd(this.ep,n.from,8),s=new Mc(i,e,n.attr,n.to,$s.toView,this.oL,t.container);t.addBinding(38962===i.$kind?sp(s,i,t.container):s)}};pp.inject=[Gr,za],pp=fl([qd("hc")],pp);let fp=class{constructor(t,e){this.ti=t,this.r=e}static get inject(){return[Dd,uu]}render(t,e,n){const i=t.container.get($u),s=this.r.renderers,r=t=>{let e=t,n=i;for(;null!=n&&e>0;)n=n.parent,--e;if(null==n)throw new Error("No scope context for spread binding.");return n},o=n=>{var i,a;const l=r(n),c=vp(l),h=this.ti.compileSpread(l.controller.definition,null!==(a=null===(i=l.instruction)||void 0===i?void 0:i.captures)&&void 0!==a?a:zn,l.controller.container,e);let u;for(u of h)switch(u.type){case"hs":o(n+1);break;case"hp":s[u.instructions.type].render(c,Lh.for(e),u.instructions);break;default:s[u.type].render(c,e,u)}t.addBinding(c)};o(0)}};fp=fl([qd("hs")],fp);class gp{constructor(t,e){this.ii=t,this.ei=e,this.interceptor=this,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}$bind(t,e){var n;if(this.isBound)return;this.isBound=!0;const i=this.$scope=null!==(n=this.ei.controller.scope.parentScope)&&void 0!==n?n:void 0;if(null==i)throw new Error("Invalid spreading. Context scope is null/undefined");this.ii.forEach((e=>e.$bind(t,i)))}$unbind(t){this.ii.forEach((e=>e.$unbind(t))),this.isBound=!1}addBinding(t){this.ii.push(t)}addChild(t){if(1!==t.vmKind)throw new Error("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}}const vp=t=>new gp([],t),mp="IController",yp="IInstruction",bp="IAuSlotsInfo";class wp{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw new Error("AUR7055");if(!Pl(t.name)||0===t.name.length)throw new Error("AUR0756");return t}}function xp(t,e,n,i,s,r,o,a){const l=n.container.createChild();return l.registerResolver(t.HTMLElement,l.registerResolver(t.Element,l.registerResolver(Gu,new Bn("ElementResolver",i)))),n=n instanceof vu?n:n.ctrl,l.registerResolver(Tu,new Bn(mp,n)),l.registerResolver(wd,new Bn(yp,s)),l.registerResolver(Yu,null==o?Sp:new Bn("IRenderLocation",o)),l.registerResolver(nu,null==r?Cp:new wp(r)),l.registerResolver(md,null==a?Ap:new Bn(bp,a)),{vm:l.invoke(e.Type),ctn:l}}class kp{constructor(t){this.l=t}get name(){return"IRenderLocation"}get $isResolver(){return!0}resolve(){return this.l}}const Sp=new kp(null),Cp=new wp(null),Ap=new Bn(bp,new yd(zn));var Ep;function Tp(t){return function(e){return Pp.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(Ep||(Ep={}));class $p{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.type=s}static create(t,e){let n,i;return Pl(t)?(n=t,i={name:n}):(n=t.name,i=t),new $p(e,Fe(Rp(e,"name"),n),Be(Rp(e,"aliases"),i.aliases,e.aliases),Op(n),Fe(Rp(e,"type"),i.type,e.type,null))}register(t){const{Type:e,key:n,aliases:i}=this;Nn.singleton(n,e).register(t),Nn.aliasTo(n,e).register(t),Ri(i,Pp,n,t)}}const Ip=kl("binding-command"),Op=t=>`${Ip}:${t}`,Rp=(t,e)=>vl(xl(e),t),Pp=Object.freeze({name:Ip,keyFrom:Op,define(t,e){const n=$p.create(t,e);return yl(Ip,n,n.Type),yl(Ip,n,n),Sl(e,Ip),n.Type},getAnnotation:Rp});let Lp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"one-time"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:Oe(n):(""===i&&1===t.def.type&&(i=Oe(n)),n=t.bindable.property),new Sd(this.ep.parse(i,8),n,$s.oneTime)}};Lp.inject=[yc,Gr],Lp=fl([Tp("one-time")],Lp);let Mp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"to-view"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:Oe(n):(""===i&&1===t.def.type&&(i=Oe(n)),n=t.bindable.property),new Sd(this.ep.parse(i,8),n,$s.toView)}};Mp.inject=[yc,Gr],Mp=fl([Tp("to-view")],Mp);let jp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"from-view"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:Oe(i):(""===s&&1===t.def.type&&(s=Oe(i)),i=t.bindable.property),new Sd(this.ep.parse(s,8),i,$s.fromView)}};jp.inject=[yc,Gr],jp=fl([Tp("from-view")],jp);let Up=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"two-way"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:Oe(i):(""===s&&1===t.def.type&&(s=Oe(i)),i=t.bindable.property),new Sd(this.ep.parse(s,8),i,$s.twoWay)}};Up.inject=[yc,Gr],Up=fl([Tp("two-way")],Up);let Np=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"bind"}build(t){var e;const n=t.attr,i=t.bindable;let s,r,o=n.target,a=n.rawValue;return null==i?(r=this.m.isTwoWay(t.node,o)?$s.twoWay:$s.toView,o=null!==(e=this.m.map(t.node,o))&&void 0!==e?e:Oe(o)):(""===a&&1===t.def.type&&(a=Oe(o)),s=t.def.defaultBindingMode,r=i.mode===$s.default||null==i.mode?null==s||s===$s.default?$s.toView:s:i.mode,o=i.property),new Sd(this.ep.parse(a,8),o,r)}};Np.inject=[yc,Gr],Np=fl([Tp("bind")],Np);let Bp=class{constructor(t){this.type=0,this.ep=t}get name(){return"call"}build(t){const e=null===t.bindable?Oe(t.attr.target):t.bindable.property;return new Ad(this.ep.parse(t.attr.rawValue,12),e)}};Bp.inject=[Gr],Bp=fl([Tp("call")],Bp);let Fp=class{constructor(t){this.type=0,this.ep=t}get name(){return"for"}build(t){const e=null===t.bindable?Oe(t.attr.target):t.bindable.property;return new Cd(this.ep.parse(t.attr.rawValue,2),e)}};Fp.inject=[Gr],Fp=fl([Tp("for")],Fp);let Vp=class{constructor(t){this.type=1,this.ep=t}get name(){return"trigger"}build(t){return new Md(this.ep.parse(t.attr.rawValue,4),t.attr.target,!0,Rs.none)}};Vp.inject=[Gr],Vp=fl([Tp("trigger")],Vp);let Dp=class{constructor(t){this.type=1,this.ep=t}get name(){return"delegate"}build(t){return new Md(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Rs.bubbling)}};Dp.inject=[Gr],Dp=fl([Tp("delegate")],Dp);let zp=class{constructor(t){this.type=1,this.ep=t}get name(){return"capture"}build(t){return new Md(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Rs.capturing)}};zp.inject=[Gr],zp=fl([Tp("capture")],zp);let qp=class{constructor(t){this.type=1,this.ep=t}get name(){return"attr"}build(t){return new Bd(t.attr.target,this.ep.parse(t.attr.rawValue,8),t.attr.target)}};qp.inject=[Gr],qp=fl([Tp("attr")],qp);let Hp=class{constructor(t){this.type=1,this.ep=t}get name(){return"style"}build(t){return new Bd("style",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Hp.inject=[Gr],Hp=fl([Tp("style")],Hp);let Zp=class{constructor(t){this.type=1,this.ep=t}get name(){return"class"}build(t){return new Bd("class",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Zp.inject=[Gr],Zp=fl([Tp("class")],Zp);let Wp=class{constructor(t){this.type=1,this.ep=t}get name(){return"ref"}build(t){return new Ed(this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Wp.inject=[Gr],Wp=fl([Tp("ref")],Wp);let Kp=class{constructor(){this.type=1}get name(){return"...$attrs"}build(t){return new Fd}};Kp=fl([Tp("...$attrs")],Kp);const _p=an.createInterface("ITemplateElementFactory",(t=>t.singleton(Gp))),Qp={};class Gp{constructor(t){this.p=t,this.si=t.document.createElement("template")}createTemplate(t){var e;if(Pl(t)){let e=Qp[t];if(void 0===e){const n=this.si;n.innerHTML=t;const i=n.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.si=this.p.document.createElement("template"),e=n):(n.content.removeChild(i),e=i),Qp[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.p.document.createElement("template");return e.content.appendChild(t),e}return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.cloneNode(!0)}}Gp.inject=[gc];class Xp{constructor(t,e,n,i,s,r){this.hasSlot=!1,this.Ci=El();const o=null!==i;this.c=e,this.root=null===s?this:s,this.def=t,this.ci=n,this.parent=i,this.ni=o?i.ni:e.get(_p),this.di=o?i.di:e.get(nc),this.ep=o?i.ep:e.get(Gr),this.m=o?i.m:e.get(yc),this.Ut=o?i.Ut:e.get(Jn),this.p=o?i.p:e.get(gc),this.localEls=o?i.localEls:new Set,this.rows=null!=r?r:[]}ki(t){var e,n;(null!==(e=(n=this.root).deps)&&void 0!==e?e:n.deps=[]).push(t),this.root.c.register(t)}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}hi(t){return this.c.find(Lh,t)}ui(t){return this.c.find(gh,t)}xi(t){return new Xp(this.def,this.c,this.ci,this,this.root,t)}ai(t){if(this.root!==this)return this.root.ai(t);const e=t.command;if(null===e)return null;let n=this.Ci[e];if(void 0===n){if(n=this.c.create(Pp,e),null===n)throw new Error(`AUR0713:${e}`);this.Ci[e]=n}return n}}function Yp(t){const e=t.length;let n=0,i=0;for(;e>i;){if(n=t.charCodeAt(i),92===n)++i;else{if(58===n)return!0;if(36===n&&123===t.charCodeAt(i+1))return!1}++i}return!1}function Jp(){nf.node=nf.attr=nf.bindable=nf.def=null}const tf={projections:null},ef={name:"unnamed"},nf={node:null,attr:null,bindable:null,def:null},sf=Object.assign(El(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),rf={checkbox:1,radio:1},of=new WeakMap;class af{constructor(t,e,n){this.attrs=t,this.bindables=e,this.primary=n}static from(t,e){let n=of.get(t);if(null==n){const i=t.bindables,s=El(),r=e?void 0===t.defaultBindingMode?$s.default:t.defaultBindingMode:$s.default;let o,a,l,c,h=!1;for(a in i){if(o=i[a],c=o.attribute,!0===o.primary){if(h)throw new Error(`AUR0714:${t.name}`);h=!0,l=o}else h||null!=l||(l=o);s[c]=Fl.create(a,t.Type,o)}null==o&&e&&(l=s.value=Fl.create("value",t.Type,{mode:r})),of.set(t,n=new af(s,i,l))}return n}}var lf;!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(lf||(lf={}));const cf=Object.freeze(["property","attribute","mode"]),hf="as-custom-element";function uf(t,e){const n=t.getAttribute(hf);if(null===n||""===n)throw new Error("AUR0715");if(e.has(n))throw new Error(`AUR0716:${n}`);return e.add(n),t.removeAttribute(hf),n}function df(t){switch(t.getAttribute("mode")){case"oneTime":return $s.oneTime;case"toView":return $s.toView;case"fromView":return $s.fromView;case"twoWay":return $s.twoWay;default:return $s.default}}const pf=an.createInterface("ITemplateCompilerHooks"),ff=new WeakMap,gf=kl("compiler-hooks");Object.freeze({name:gf,define(t){let e=ff.get(t);return void 0===e&&(ff.set(t,e=new vf(t)),yl(gf,e,t),Sl(t,gf)),t}});class vf{constructor(t){this.Type=t}get name(){return""}register(t){t.register(Nn.singleton(pf,this.Type))}}const mf=Lh.generateName,yf="default",bf="au-slot";class wf{constructor(t){this.mode=t,this.Ai=new Map}bind(t,e,n){this.Ai.set(n,n.mode),n.mode=this.mode}unbind(t,e,n){n.mode=this.Ai.get(n),this.Ai.delete(n)}}class xf extends wf{constructor(){super($s.oneTime)}}class kf extends wf{constructor(){super($s.toView)}}class Sf extends wf{constructor(){super($s.fromView)}}class Cf extends wf{constructor(){super($s.twoWay)}}Bi("oneTime")(xf),Bi("toView")(kf),Bi("fromView")(Sf),Bi("twoWay")(Cf);class Af extends Di{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(Zn).taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(t,e,n)}updateSource(t,e){this.queueTask((()=>this.binding.updateSource(t,e)))}queueTask(t){const e=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,t())),this.opts),null==e||e.cancel()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.binding.$unbind(t)}}Bi("debounce")(Af);class Ef{constructor(t){this.Yt=new Map,this.Ri=t}bind(t,e,n,...i){if(!("handleChange"in n))throw new Error("AUR0817");if(0===i.length)throw new Error("AUR0818");let s;for(s of(this.Yt.set(n,i),i))this.Ri.addSignalListener(s,n)}unbind(t,e,n){const i=this.Yt.get(n);let s;for(s of(this.Yt.delete(n),i))this.Ri.removeSignalListener(s,n)}}Ef.inject=[ji],Bi("signal")(Ef);class Tf extends Di{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.p=t.locator.get(Zn),this.Si=this.p.taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.Ei((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.p.performanceNow()),this.binding.handleChange(t,e,n)}updateSource(t,e){this.Ei((()=>this.binding.updateSource(t,e)))}Ei(t){const e=this.opts,n=this.p,i=this.lastCall+e.delay-n.performanceNow();if(i>0){const s=this.task;e.delay=i,this.task=this.Si.queueTask((()=>{this.lastCall=n.performanceNow(),this.task=null,e.delay=this.delay,t()}),e),null==s||s.cancel()}else this.lastCall=n.performanceNow(),t()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=this.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,super.$unbind(t)}}Bi("throttle")(Tf);const $f=new class{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,n,i){null==t?n.removeAttribute(i):n.setAttribute(i,t)}};class If{bind(t,e,n){n.targetObserver=$f}unbind(t,e,n){}}function Of(t){const e=t.composedPath()[0];if(this.target===e)return this.selfEventCallSource(t)}Bi("attr")(If);class Rf{bind(t,e,n){if(!n.callSource||!n.targetEvent)throw new Error("AUR0801");n.selfEventCallSource=n.callSource,n.callSource=Of}unbind(t,e,n){n.callSource=n.selfEventCallSource,n.selfEventCallSource=null}}Bi("self")(Rf);const Pf=El();class Lf{constructor(t){this.ns=t,this.type=6}static forNs(t){var e;return null!==(e=Pf[t])&&void 0!==e?e:Pf[t]=new Lf(t)}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,n,i){null==t?n.removeAttributeNS(this.ns,i):n.setAttributeNS(this.ns,i,t)}}function Mf(t,e){return t===e}class jf{constructor(t,e,n,i){this.handler=n,this.type=7,this.v=void 0,this.ov=void 0,this.Bi=void 0,this.Ii=void 0,this.f=0,this.o=t,this.oL=i}getValue(){return this.v}setValue(t,e){const n=this.v;t!==n&&(this.v=t,this.ov=n,this.f=e,this.Ti(),this.Di(),this.queue.add(this))}handleCollectionChange(t,e){this.Di()}handleChange(t,e,n){this.Di()}Di(){const t=this.v,e=this.o,n=Tl.call(e,"model")?e.model:e.value,i="radio"===e.type,s=void 0!==e.matcher?e.matcher:Mf;if(i)e.checked=!!s(t,n);else if(!0===t)e.checked=!0;else{let i=!1;if(t instanceof Array)i=-1!==t.findIndex((t=>!!s(t,n)));else if(t instanceof Set){for(const e of t)if(s(e,n)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(s(t,n)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.o,n=Tl.call(e,"model")?e.model:e.value,i=e.checked,s=void 0!==e.matcher?e.matcher:Mf;if("checkbox"===e.type){if(t instanceof Array){const e=t.findIndex((t=>!!s(t,n)));return void(i&&-1===e?t.push(n):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===s(e,n)){r=e;break}return void(i&&r===e?t.add(n):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===s(t,n)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=n}this.v=t,this.queue.add(this)}start(){this.handler.subscribe(this.o,this),this.Ti()}stop(){var t,e;this.handler.dispose(),null===(t=this.Bi)||void 0===t||t.unsubscribe(this),this.Bi=void 0,null===(e=this.Ii)||void 0===e||e.unsubscribe(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.start()}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.stop()}flush(){Uf=this.ov,this.ov=this.v,this.subs.notify(this.v,Uf,this.f)}Ti(){var t,e,n,i,s,r,o;const a=this.o;null===(s=null!==(t=this.Ii)&&void 0!==t?t:this.Ii=null!==(n=null===(e=a.$observers)||void 0===e?void 0:e.model)&&void 0!==n?n:null===(i=a.$observers)||void 0===i?void 0:i.value)||void 0===s||s.subscribe(this),null===(r=this.Bi)||void 0===r||r.unsubscribe(this),this.Bi=void 0,"checkbox"===a.type&&(null===(o=this.Bi=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))||void 0===o||o.subscribe(this))}}let Uf;js(jf),Ds(jf);const Nf={childList:!0,subtree:!0,characterData:!0};function Bf(t,e){return t===e}class Ff{constructor(t,e,n,i){this.type=7,this.v=void 0,this.ov=void 0,this.H=!1,this.Pi=void 0,this.$i=void 0,this.iO=!1,this.o=t,this.oL=i,this.handler=n}getValue(){return this.iO?this.v:this.o.multiple?function(t){const e=[];if(0===t.length)return e;const n=t.length;let i,s=0;for(;n>s;)i=t[s],i.selected&&(e[e.length]=Tl.call(i,"model")?i.model:i.value),++s;return e}(this.o.options):this.o.value}setValue(t,e){this.ov=this.v,this.v=t,this.H=t!==this.ov,this.Oi(t instanceof Array?t:null),0==(64&e)&&this.K()}K(){this.H&&(this.H=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var t;const e=this.v,n=this.o,i=Array.isArray(e),s=null!==(t=n.matcher)&&void 0!==t?t:Bf,r=n.options;let o=r.length;for(;o-- >0;){const t=r[o],n=Tl.call(t,"model")?t.model:t.value;t.selected=i?-1!==e.findIndex((t=>!!s(n,t))):!!s(n,e)}}syncValue(){const t=this.o,e=t.options,n=e.length,i=this.v;let s=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||Bf,a=[];for(;s<n;)r=e[s],r.selected&&a.push(Tl.call(r,"model")?r.model:r.value),++s;let l;for(s=0;s<i.length;)l=i[s],-1===a.findIndex((t=>!!o(l,t)))?i.splice(s,1):++s;for(s=0;s<a.length;)l=a[s],-1===i.findIndex((t=>!!o(l,t)))&&i.push(l),++s;return!1}let r,o=null;for(;s<n;){if(r=e[s],r.selected){o=Tl.call(r,"model")?r.model:r.value;break}++s}return this.ov=this.v,this.v=o,!0}Li(){(this.$i=new this.o.ownerDocument.defaultView.MutationObserver(this.qi.bind(this))).observe(this.o,Nf),this.Oi(this.v instanceof Array?this.v:null),this.iO=!0}Ui(){var t;this.$i.disconnect(),null===(t=this.Pi)||void 0===t||t.unsubscribe(this),this.$i=this.Pi=void 0,this.iO=!1}Oi(t){var e;if(null===(e=this.Pi)||void 0===e||e.unsubscribe(this),this.Pi=void 0,null!=t){if(!this.o.multiple)throw new Error("AUR0654");(this.Pi=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}qi(t){this.syncOptions(),this.syncValue()&&this.queue.add(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.Li())}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.handler.dispose(),this.Ui())}flush(){Vf=this.ov,this.ov=this.v,this.subs.notify(this.v,Vf,0)}}let Vf,Df;js(Ff),Ds(Ff);class zf{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.styles={},this.version=0,this.H=!1}getValue(){return this.obj.style.cssText}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}_i(t){const e=[],n=/url\([^)]+$/;let i,s,r,o,a=0,l="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),l+=t.substring(a,i),a=i+1,n.test(l)?l+=";":(s=l.indexOf(":"),r=l.substring(0,s).trim(),o=l.substring(s+1).trim(),e.push([r,o]),l="");return e}Fi(t){let e,n;const i=[];for(n in t)if(e=t[n],null!=e)if(Pl(e)){if(n.startsWith("--")){i.push([n,e]);continue}i.push([Pe(n),e])}else i.push(...this.Vi(e));return i}Mi(t){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...this.Vi(t[i]));return n}return zn}Vi(t){return Pl(t)?this._i(t):t instanceof Array?this.Mi(t):t instanceof Object?this.Fi(t):zn}K(){if(this.H){this.H=!1;const t=this.value,e=this.styles,n=this.Vi(t);let i,s,r,o,a=this.version;this.ov=t;let l=0;const c=n.length;for(;l<c;++l)s=n[l],r=s[0],o=s[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Tl.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let n="";null!=e&&Rl(e.indexOf)&&e.includes("!important")&&(n="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,n)}bind(t){this.value=this.ov=this.obj.style.cssText}}class qf{constructor(t,e,n){this.handler=n,this.type=7,this.v="",this.ov="",this.H=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.H=!0,this.handler.config.readonly||0!=(64&e)||this.K(e))}K(t){var e;this.H&&(this.H=!1,this.o[this.k]=null!==(e=this.v)&&void 0!==e?e:this.handler.config.default,0==(2&t)&&this.queue.add(this))}handleEvent(){this.ov=this.v,this.v=this.o[this.k],this.ov!==this.v&&(this.H=!1,this.queue.add(this))}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.v=this.ov=this.o[this.k])}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.handler.dispose()}flush(){Df=this.ov,this.ov=this.v,this.subs.notify(this.v,Df,0)}}js(qf),Ds(qf);const Hf="http://www.w3.org/1999/xlink",Zf="http://www.w3.org/XML/1998/namespace",Wf="http://www.w3.org/2000/xmlns/",Kf=Object.assign(El(),{"xlink:actuate":["actuate",Hf],"xlink:arcrole":["arcrole",Hf],"xlink:href":["href",Hf],"xlink:role":["role",Hf],"xlink:show":["show",Hf],"xlink:title":["title",Hf],"xlink:type":["type",Hf],"xml:lang":["lang",Zf],"xml:space":["space",Zf],xmlns:["xmlns",Wf],"xmlns:xlink":["xlink",Wf]}),_f=new Na;_f.type=6;class Qf{constructor(t){var e;this.type=null!==(e=t.type)&&void 0!==e?e:qf,this.events=t.events,this.readonly=t.readonly,this.default=t.default}}class Gf{constructor(t,e,n,i){this.locator=t,this.platform=e,this.dirtyChecker=n,this.svgAnalyzer=i,this.allowDirtyCheck=!0,this.ji=El(),this.Ni=El(),this.Wi=El(),this.Hi=El();const s=["change","input"],r={events:s,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:s,default:0},checked:{type:jf,events:s},files:{events:s,readonly:!0}},SELECT:{value:{type:Ff,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){Nn.aliasTo(qa,Gf).register(t),Nn.singleton(qa,Gf).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,n){var i,s;const r=this.ji;let o;if(Pl(t))o=null!==(i=r[t])&&void 0!==i?i:r[t]=El(),null==o[e]?o[e]=new Qf(n):Xf(t,e);else for(const n in t){o=null!==(s=r[n])&&void 0!==s?s:r[n]=El();const i=t[n];for(e in i)null==o[e]?o[e]=new Qf(i[e]):Xf(n,e)}}useConfigGlobal(t,e){const n=this.Ni;if("object"==typeof t)for(const e in t)null==n[e]?n[e]=new Qf(t[e]):Xf("*",e);else null==n[t]?n[t]=new Qf(e):Xf("*",t)}getAccessor(t,e,n){var i;if(e in this.Hi||e in(null!==(i=this.Wi[t.tagName])&&void 0!==i?i:qn))return this.getObserver(t,e,n);switch(e){case"src":case"href":case"role":return $f;default:{const n=Kf[e];return void 0!==n?Lf.forNs(n[1]):Il(t,e,this.svgAnalyzer)?$f:_f}}}overrideAccessor(t,e){var n,i,s,r;let o;if(Pl(t))o=null!==(n=(s=this.Wi)[t])&&void 0!==n?n:s[t]=El(),o[e]=!0;else for(const e in t)for(const n of t[e])o=null!==(i=(r=this.Wi)[e])&&void 0!==i?i:r[e]=El(),o[n]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Hi[e]=!0}getObserver(t,e,n){var i,s;switch(e){case"role":return $f;case"class":return new Mh(t);case"css":case"style":return new zf(t)}const r=null!==(s=null===(i=this.ji[t.tagName])||void 0===i?void 0:i[e])&&void 0!==s?s:this.Ni[e];if(null!=r)return new r.type(t,e,new fd(r),n,this.locator);const o=Kf[e];if(void 0!==o)return Lf.forNs(o[1]);if(Il(t,e,this.svgAnalyzer))return $f;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw new Error(`AUR0652:${String(e)}`)}return new Fa(t,e)}}function Xf(t,e){throw new Error(`AUR0653:${String(e)}@${t}`)}Gf.inject=[un,gc,Ra,vc];class Yf{constructor(t){this.oL=t}bind(t,e,n,...i){if(0===i.length)throw new Error("AUR0802");if(n.mode!==$s.twoWay&&n.mode!==$s.fromView)throw new Error("AUR0803");const s=this.oL.getObserver(n.target,n.targetProperty);if(!s.handler)throw new Error("AUR0804");n.targetObserver=s;const r=s.handler;s.originalHandler=r,s.handler=new fd(new Qf({default:r.config.default,events:i,readonly:r.config.readonly}))}unbind(t,e,n){n.targetObserver.handler.dispose(),n.targetObserver.handler=n.targetObserver.originalHandler,n.targetObserver.originalHandler=null}}Yf.inject=[za],Bi("updateTrigger")(Yf);class Jf{constructor(t,e){this.zi=t,this.p=e,this.Gi=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Xi():this.Gi=!0}attached(){this.Gi&&(this.Gi=!1,this.Xi()),this.zi.addEventListener("focus",this),this.zi.addEventListener("blur",this)}afterDetachChildren(){const t=this.zi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Ki||(this.value=!1)}Xi(){const t=this.zi,e=this.Ki,n=this.value;n&&!e?t.focus():!n&&e&&t.blur()}get Ki(){return this.zi===this.p.document.activeElement}}Jf.inject=[Gu,gc],fl([jl({mode:$s.twoWay})],Jf.prototype,"value",void 0),ch("focus")(Jf);let tg=class{constructor(t,e,n){this.el=t,this.p=e,this.Yi=!1,this.Zi=null,this.$val="",this.$prio="",this.update=()=>{this.Zi=null,Boolean(this.value)!==this.Ji&&(this.Ji===this.Qi?(this.Ji=!this.Qi,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Ji=this.Qi,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.Ji=this.Qi="hide"!==n.alias}binding(){this.Yi=!0,this.update()}detaching(){var t;this.Yi=!1,null===(t=this.Zi)||void 0===t||t.cancel(),this.Zi=null}valueChanged(){this.Yi&&null===this.Zi&&(this.Zi=this.p.domWriteQueue.queueTask(this.update))}};fl([jl],tg.prototype,"value",void 0),tg=fl([gl(0,Gu),gl(1,gc),gl(2,wd)],tg),function(...t){return function(e){const n=$i("aliases"),i=Ai(n,e);void 0===i?Ti(n,t,e):i.push(...t)}}("hide")(tg),ch("show")(tg);class eg{constructor(t,e,n){this.id=je("au$component"),this.strict=!1,this.p=n,this.te=n.document.createElement("div"),this.view=t.create(),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)td.set(t,e);else{const n=t.childNodes;for(let t=0,i=n.length;t<i;++t)td.set(n[t],e)}}(this.view.nodes,e)}attaching(t,e,n){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const i=this.te=this.ie();return this.view.setHost(i),this.ee(t,i,n)}detaching(t,e,n){return this.se(t,this.te,n)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.te,n=this.te=this.ie();if(e===n)return;this.view.setHost(n);const i=qe(this.se(null,n,t.flags),(()=>this.ee(null,n,t.flags)));i instanceof Promise&&i.catch((t=>{throw t}))}ee(t,e,n){const{activating:i,callbackContext:s,view:r}=this;return r.setHost(e),qe(null==i?void 0:i.call(s,e,r),(()=>this.ne(t,e,n)))}ne(t,e,n){const{$controller:i,view:s}=this;return null!==t?qe(s.activate(null!=t?t:s,i,n,i.scope),(()=>this.re(e))):(s.nodes.appendTo(e),this.re(e))}re(t){const{activated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}se(t,e,n){const{deactivating:i,callbackContext:s,view:r}=this;return qe(null==i?void 0:i.call(s,e,r),(()=>this.oe(t,e,n)))}oe(t,e,n){const{$controller:i,view:s}=this;return null!==t?qe(s.deactivate(t,i,n),(()=>this.le(e))):(s.nodes.remove(),this.le(e))}le(t){const{deactivated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}ie(){const t=this.p,e=t.document;let n=this.target,i=this.renderContext;if(""===n){if(this.strict)throw new Error("AUR0811");return e.body}if(Pl(n)){let s=e;Pl(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(s=i),n=s.querySelector(n)}if(n instanceof t.Node)return n;if(null==n){if(this.strict)throw new Error("AUR0812");return e.body}return n}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}eg.inject=[nu,Yu,gc],fl([jl({primary:!0})],eg.prototype,"target",void 0),fl([jl({callback:"targetChanged"})],eg.prototype,"renderContext",void 0),fl([jl()],eg.prototype,"strict",void 0),fl([jl()],eg.prototype,"deactivating",void 0),fl([jl()],eg.prototype,"activating",void 0),fl([jl()],eg.prototype,"deactivated",void 0),fl([jl()],eg.prototype,"activated",void 0),fl([jl()],eg.prototype,"callbackContext",void 0),hh("portal")(eg);class ng extends class{constructor(t,e,n){this.fs=n,this.id=je("au$component"),this.view=t.create().setLocation(e)}attaching(t,e,n){const{$controller:i}=this;return this.view.activate(t,i,n|this.fs,i.scope)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}{constructor(t,e){super(t,e,32)}}ng.inject=[nu,Yu],hh("observe-shallow")(ng);class ig{constructor(t,e,n){this.ifFactory=t,this.location=e,this.work=n,this.id=je("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.he=!1,this.ae=0}attaching(t,e,n){let i;const s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;return qe(this.pending,(()=>{var e;o()&&(this.pending=void 0,i=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=i&&(i.setLocation(this.location),this.pending=qe(i.activate(t,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e,n){return this.he=!0,qe(this.pending,(()=>{var e;this.he=!1,this.pending=void 0,null===(e=this.view)||void 0===e||e.deactivate(t,this.$controller,n)}))}valueChanged(t,e,n){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;this.work.start();const i=this.view,s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;let a;return qe(qe(this.pending,(()=>this.pending=qe(null==i?void 0:i.deactivate(i,s,n),(()=>{var e;if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=a))return a.setLocation(this.location),qe(a.activate(a,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var t,e;null===(t=this.ifView)||void 0===t||t.dispose(),null===(e=this.elseView)||void 0===e||e.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}ig.inject=[nu,Yu,Hu],fl([jl],ig.prototype,"value",void 0),fl([jl({set:t=>""===t||!!t&&"false"!==t})],ig.prototype,"cache",void 0),hh("if")(ig);class sg{constructor(t){this.factory=t,this.id=je("au$component")}link(t,e,n,i){const s=t.children,r=s[s.length-1];if(r instanceof ig)r.elseFactory=this.factory;else{if(!(r.viewModel instanceof ig))throw new Error("AUR0810");r.viewModel.elseFactory=this.factory}}}function rg(t){t.dispose()}sg.inject=[nu],hh({name:"else"})(sg);const og=[38962,36913];class ag{constructor(t,e,n){this.l=t,this.ce=e,this.f=n,this.id=je("au$component"),this.views=[],this.key=void 0,this.ue=void 0,this.fe=!1,this.de=!1,this.me=null,this.ve=void 0,this.ge=!1}binding(t,e,n){const i=this.ce.bindings,s=i.length;let r,o,a=0;for(;s>a;++a)if(r=i[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.sourceExpression,this.pe=r;let t=o.iterable;for(;null!=t&&og.includes(t.$kind);)t=t.expression,this.fe=!0;this.me=t;break}this.we(n);const l=o.declaration;(this.ge=90137===l.$kind||106521===l.$kind)||(this.local=l.evaluate(n,this.$controller.scope,r.locator,null))}attaching(t,e,n){return this.be(n),this.xe(t,n)}detaching(t,e,n){return this.we(n),this.ye(t,n)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.we(t),this.be(t);const n=qe(this.ye(null,t),(()=>this.xe(null,t)));n instanceof Promise&&n.catch(Ml)}handleCollectionChange(t,e){const{$controller:n}=this;if(n.isActive){if(this.fe){if(this.de)return;return this.de=!0,this.items=this.forOf.iterable.evaluate(e,n.scope,this.pe.locator,null),void(this.de=!1)}if(e|=n.flags,this.be(e),void 0===t){const t=qe(this.ye(null,e),(()=>this.xe(null,e)));t instanceof Promise&&t.catch(Ml)}else{const n=this.views.length,i=function(t){let e=0,n=0,i=0;const s=function(t){const e=t.slice();return e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t),r=s.length;for(;i<r;++i){for(;s.deletedItems[n]<=i-e;)++n,--e;-2===s[i]?++e:s[i]+=e}return s}(t);if(i.deletedItems.length>0){i.deletedItems.sort(Ue);const t=qe(this.ke(i,e),(()=>this.Ce(n,i,e)));t instanceof Promise&&t.catch(Ml)}else this.Ce(n,i,e)}}}we(t){var e;const n=this.$controller.scope;let i=this.Ae,s=this.fe;s&&(i=this.Ae=null!==(e=this.me.evaluate(t,n,this.pe.locator,null))&&void 0!==e?e:null,s=this.fe=!Object.is(this.items,i));const r=this.ue;if(4&t)void 0!==r&&r.unsubscribe(this);else if(this.$controller.isActive){const t=this.ue=function(t){let e;return t instanceof Array?e=vr(t):t instanceof Map?e=Br(t):t instanceof Set&&(e=Tr(t)),e}(s?i:this.items);r!==t&&r&&r.unsubscribe(this),t&&t.subscribe(this)}}be(t){const e=this.items;if(e instanceof Array)return void(this.ve=e);if(void 0===this.forOf)return;const n=[];this.forOf.iterate(t,e,((t,e,i)=>{n[e]=i})),this.ve=n}xe(t,e){let n,i,s,r;const{$controller:o,f:a,local:l,l:c,items:h}=this,u=o.scope,d=this.forOf,p=d.count(e,h),f=this.views=Array(p);if(d.iterate(e,h,((h,g,v)=>{s=f[g]=a.create().setLocation(c),s.nodes.unlink(),this.ge?d.declaration.assign(e,r=Li.fromParent(u,Pi.create()),this.pe.locator,v):r=Li.fromParent(u,Pi.create(l,v)),ug(r.overrideContext,g,p),i=s.activate(null!=t?t:s,o,e,r),i instanceof Promise&&(null!=n?n:n=[]).push(i)})),void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ye(t,e){let n,i,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),i=s.deactivate(null!=t?t:s,a,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ke(t,e){let n,i,s;const{$controller:r,views:o}=this,a=t.deletedItems,l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),i=s.deactivate(s,r,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);c=0;let h=0;for(;l>c;++c)h=a[c]-c,o.splice(h,1);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}Ce(t,e,n){var i;let s,r,o,a,l=0;const{$controller:c,f:h,local:u,ve:d,l:p,views:f}=this,g=e.length;for(;g>l;++l)-2===e[l]&&(o=h.create(),f.splice(l,0,o));if(f.length!==g)throw new Error(`AUR0814:${f.length}!=${g}`);const v=c.scope,m=e.length;!function(t,e){const n=t.slice(),i=e.length;let s=0,r=0;for(;s<i;)r=e[s],-2!==r&&(t[s]=n[r]),++s}(f,e);const y=function(t){const e=t.length;e>lg&&(lg=e,cg=new Int32Array(e),hg=new Int32Array(e));let n=0,i=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=cg[n],s=t[o],-2!==s&&s<i){hg[r]=o,cg[++n]=r;continue}for(a=0,l=n;a<l;)c=a+l>>1,s=t[cg[c]],-2!==s&&s<i?a=c+1:l=c;s=t[cg[a]],(i<s||-2===s)&&(a>0&&(hg[r]=cg[a-1]),cg[a]=r)}r=++n;const h=new Int32Array(r);for(i=cg[n-1];n-- >0;)h[n]=i,i=hg[i];for(;r-- >0;)cg[r]=0;return h}(e),b=y.length;let w,x=b-1;for(l=m-1;l>=0;--l)o=f[l],w=f[l+1],o.nodes.link(null!==(i=null==w?void 0:w.nodes)&&void 0!==i?i:p),-2===e[l]?(this.ge?this.forOf.declaration.assign(n,a=Li.fromParent(v,Pi.create()),this.pe.locator,d[l]):a=Li.fromParent(v,Pi.create(u,d[l])),ug(a.overrideContext,l,m),o.setLocation(p),r=o.activate(o,c,n,a),r instanceof Promise&&(null!=s?s:s=[]).push(r)):x<0||1===b||l!==y[x]?(ug(o.scope.overrideContext,l,m),o.nodes.insertBefore(o.location)):(t!==m&&ug(o.scope.overrideContext,l,m),--x);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(rg),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}ag.inject=[Yu,Tu,nu],fl([jl],ag.prototype,"items",void 0),hh("repeat")(ag);let lg=16,cg=new Int32Array(lg),hg=new Int32Array(lg);function ug(t,e,n){const i=0===e,s=e===n-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=s,t.$middle=!i&&!s,t.$even=r,t.$odd=!r,t.$length=n}class dg{constructor(t,e){this.id=je("au$component"),this.id=je("au$component"),this.view=t.create().setLocation(e)}valueChanged(t,e,n){const i=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(i.isActive&&null!=s)for(r=Li.fromParent(i.scope,void 0===t?{}:t),a=s.length;a>o;++o)s[o].$bind(2,r)}attaching(t,e,n){const{$controller:i,value:s}=this,r=Li.fromParent(i.scope,void 0===s?{}:s);return this.view.activate(t,i,n,r)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}dg.inject=[nu,Yu],fl([jl],dg.prototype,"value",void 0),hh("with")(dg);let pg=class{constructor(t,e){this.f=t,this.l=e,this.id=je("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return this.queue((()=>i.activate(t,s,n,s.scope))),this.queue((()=>this.swap(t,n,this.value))),this.promise}detaching(t,e,n){return this.queue((()=>this.view.deactivate(t,this.$controller,n))),this.promise}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}valueChanged(t,e,n){this.$controller.isActive&&this.queue((()=>this.swap(null,n,this.value)))}caseChanged(t,e){this.queue((()=>this.Re(t,e)))}Re(t,e){const n=t.isMatch(this.value,e),i=this.activeCases,s=i.length;if(!n)return s>0&&i[0].id===t.id?this.Se(null,e):void 0;if(s>0&&i[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,n=e.indexOf(t);for(let t=n,i=e.length;t<i&&o;t++){const n=e[t];r.push(n),o=n.fallThrough}}else r.push(t);return qe(this.Se(null,e,r),(()=>(this.activeCases=r,this.Ee(null,e))))}swap(t,e,n){const i=[];let s=!1;for(const t of this.cases)if((s||t.isMatch(n,e))&&(i.push(t),s=t.fallThrough),i.length>0&&!s)break;const r=this.defaultCase;return 0===i.length&&void 0!==r&&i.push(r),qe(this.activeCases.length>0?this.Se(t,e,i):void 0,(()=>{if(this.activeCases=i,0!==i.length)return this.Ee(t,e)}))}Ee(t,e){const n=this.$controller;if(!n.isActive)return;const i=this.activeCases,s=i.length;if(0===s)return;const r=n.scope;return 1===s?i[0].activate(t,e,r):He(...i.map((n=>n.activate(t,e,r))))}Se(t,e,n=[]){const i=this.activeCases,s=i.length;if(0!==s){if(1===s){const s=i[0];return n.includes(s)?void 0:(i.length=0,s.deactivate(t,e))}return qe(He(...i.reduce(((i,s)=>(n.includes(s)||i.push(s.deactivate(t,e)),i)),[])),(()=>{i.length=0}))}}queue(t){const e=this.promise;let n;n=this.promise=qe(qe(e,t),(()=>{this.promise===n&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};fl([jl],pg.prototype,"value",void 0),pg=fl([hh("switch"),gl(0,nu),gl(1,Yu)],pg);let fg=class{constructor(t,e,n,i){this.f=t,this.Be=e,this.l=n,this.id=je("au$component"),this.fallThrough=!1,this.view=void 0,this.Ie=i.config.level<=1,this.Ut=i.scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,n,i){const s=t.parent,r=null==s?void 0:s.viewModel;if(!(r instanceof pg))throw new Error("AUR0815");this.$switch=r,this.linkToSwitch(r)}detaching(t,e,n){return this.deactivate(t,n)}isMatch(t,e){this.Ut.debug("isMatch()");const n=this.value;return Array.isArray(n)?(void 0===this.ue&&(this.ue=this.Te(e,n)),n.includes(t)):n===t}valueChanged(t,e,n){var i;Array.isArray(t)?(null===(i=this.ue)||void 0===i||i.unsubscribe(this),this.ue=this.Te(n,t)):void 0!==this.ue&&this.ue.unsubscribe(this),this.$switch.caseChanged(this,n)}handleCollectionChange(t,e){this.$switch.caseChanged(this,e)}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(null!=t?t:i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(null!=t?t:n,this.$controller,e)}dispose(){var t,e;null===(t=this.ue)||void 0===t||t.unsubscribe(this),null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Te(t,e){const n=this.Be.getArrayObserver(e);return n.subscribe(this),n}accept(t){var e;return!0===this.$controller.accept(t)||(null===(e=this.view)||void 0===e?void 0:e.accept(t))}};fg.inject=[nu,za,Yu,Jn],fl([jl],fg.prototype,"value",void 0),fl([jl({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:$s.oneTime})],fg.prototype,"fallThrough",void 0),fg=fl([hh("case")],fg);let gg=class extends fg{linkToSwitch(t){if(void 0!==t.defaultCase)throw new Error("AUR0816");t.defaultCase=this}};gg=fl([hh("default-case")],gg);let vg=class{constructor(t,e,n,i){this.f=t,this.l=e,this.p=n,this.id=je("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=i.scopeTo("promise.resolve")}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return qe(i.activate(t,s,n,this.viewScope=Li.fromParent(s.scope,{})),(()=>this.swap(t,n)))}valueChanged(t,e,n){this.$controller.isActive&&this.swap(null,n)}swap(t,e){var n,i;const s=this.value;if(!(s instanceof Promise))return void this.logger.warn(`The value '${String(s)}' is not a promise. No change will be done.`);const r=this.p.domWriteQueue,o=this.fulfilled,a=this.rejected,l=this.pending,c=this.viewScope;let h;const u={reusable:!1},d=()=>{He(h=(this.preSettledTask=r.queueTask((()=>He(null==o?void 0:o.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==l?void 0:l.activate(t,e,c))),u)).result.catch((t=>{if(!(t instanceof el))throw t})),s.then((n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>He(null==l?void 0:l.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==o?void 0:o.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())}),(n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>He(null==l?void 0:l.deactivate(t,e),null==o?void 0:o.deactivate(t,e),null==a?void 0:a.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())})))};1===(null===(n=this.postSettledTask)||void 0===n?void 0:n.status)?this.postSettlePromise.then(d):(null===(i=this.postSettledTask)||void 0===i||i.cancel(),d())}detaching(t,e,n){var i,s;return null===(i=this.preSettledTask)||void 0===i||i.cancel(),null===(s=this.postSettledTask)||void 0===s||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};fl([jl],vg.prototype,"value",void 0),vg=fl([hh("promise"),gl(0,nu),gl(1,Yu),gl(2,gc),gl(3,Jn)],vg);let mg=class{constructor(t,e){this.f=t,this.l=e,this.id=je("au$component"),this.view=void 0}link(t,e,n,i){wg(t).pending=this}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};fl([jl({mode:$s.toView})],mg.prototype,"value",void 0),mg=fl([hh("pending"),gl(0,nu),gl(1,Yu)],mg);let yg=class{constructor(t,e){this.f=t,this.l=e,this.id=je("au$component"),this.view=void 0}link(t,e,n,i){wg(t).fulfilled=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};fl([jl({mode:$s.fromView})],yg.prototype,"value",void 0),yg=fl([hh("then"),gl(0,nu),gl(1,Yu)],yg);let bg=class{constructor(t,e){this.f=t,this.l=e,this.id=je("au$component"),this.view=void 0}link(t,e,n,i){wg(t).rejected=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};function wg(t){const e=t.parent,n=null==e?void 0:e.viewModel;if(n instanceof vg)return n;throw new Error("AUR0813")}fl([jl({mode:$s.fromView})],bg.prototype,"value",void 0),bg=fl([hh("catch"),gl(0,nu),gl(1,Yu)],bg);let xg=class{"promise.resolve"(t,e,n){return new tc(t,e,"promise","bind")}};xg=fl([sc({pattern:"promise.resolve",symbols:""})],xg);let kg=class{then(t,e,n){return new tc(t,e,"then","from-view")}};kg=fl([sc({pattern:"then",symbols:""})],kg);let Sg=class{catch(t,e,n){return new tc(t,e,"catch","from-view")}};Sg=fl([sc({pattern:"catch",symbols:""})],Sg);class Cg{constructor(t,e,n){this.node=t,this.instructions=e,this.De=n,this.Pe=void 0}get definition(){return void 0===this.Pe&&(this.Pe=kh.create({name:Lh.generateName(),template:this.node,needsCompile:Pl(this.node),instructions:this.instructions,dependencies:this.De})),this.Pe}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return t.root.get(uu).getViewFactory(this.definition,t.createChild().register(...this.De))}mergeInto(t,e,n){t.appendChild(this.node),e.push(...this.instructions),n.push(...this.De)}}function Ag(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const o=n[r];switch(typeof o){case"string":e.appendChild(t.document.createTextNode(o));break;case"object":o instanceof t.Node?e.appendChild(o):"mergeInto"in o&&o.mergeInto(e,i,s)}}}function Eg(t,e){const n=e.to;return void 0!==n&&"subject"!==n&&"composing"!==n&&(t[n]=e),t}class Tg{constructor(t,e,n,i){this.p=t,this.$e=e,this.Oe=n,this.r=i,this.id=je("au$component"),this.component=void 0,this.composing=!1,this.view=void 0,this.Le=void 0,this.qe=e.props.reduce(Eg,{})}attaching(t,e,n){const{component:i,view:s}=this;return void 0===s||this.Le!==i?(this.Le=i,this.composing=!0,this.compose(void 0,i,t,n)):this.compose(s,i,t,n)}detaching(t,e,n){return this.oe(this.view,t,n)}componentChanged(t,e,n){const{$controller:i}=this;if(!i.isActive)return;if(this.Le===t)return;this.Le=t,this.composing=!0,n|=i.flags;const s=qe(this.oe(this.view,null,n),(()=>this.compose(void 0,t,null,n)));s instanceof Promise&&s.catch((t=>{throw t}))}compose(t,e,n,i){return qe(void 0===t?qe(e,(t=>this.Ue(t,i))):t,(t=>this.ne(this.view=t,n,i)))}oe(t,e,n){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,n)}ne(t,e,n){const{$controller:i}=this;return qe(null==t?void 0:t.activate(null!=e?e:t,i,n,i.scope),(()=>{this.composing=!1}))}Ue(t,e){const n=this._e(t,e);if(n)return n.setLocation(this.$controller.location),n.lockScope(this.$controller.scope),n}_e(t,e){if(!t)return;const n=this.Oe.controller.container;if("object"==typeof t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(n);if("create"in t)return t.create();if("template"in t)return this.r.getViewFactory(kh.getOrCreate(t),n).create()}if(Pl(t)){const e=n.find(Lh,t);if(null==e)throw new Error(`AUR0809:${t}`);t=e.Type}return function(t,e,n,i){if(Pl(e))return function(t,e,n,i){const s=[],r=[],o=[],a=t.document.createElement(e);let l=!1;return n&&Object.keys(n).forEach((t=>{const e=n[t];xd(e)?(l=!0,s.push(e)):a.setAttribute(t,e)})),l&&(a.className="au",r.push(s)),i&&Ag(t,a,i,r,o),new Cg(a,r,o)}(t,e,n,i);if(Lh.isType(e))return function(t,e,n,i){const s=Lh.getDefinition(e),r=[],o=[r],a=[],l=[],c=s.bindables,h=t.document.createElement(s.name);return h.className="au",a.includes(e)||a.push(e),r.push(new $d(s,void 0,l,null,!1,void 0)),n&&Object.keys(n).forEach((t=>{const e=n[t];xd(e)?l.push(e):void 0===c[t]?l.push(new jd(e,t)):l.push(new Td(e,t))})),i&&Ag(t,h,i,o,a),new Cg(h,o,a)}(t,e,n,i);throw new Error("Invalid Tag or Type.")}(this.p,t,this.qe,this.$controller.host.childNodes).createView(n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Tg.inject=[gc,wd,$u,uu],fl([jl],Tg.prototype,"component",void 0),fl([jl({mode:$s.fromView})],Tg.prototype,"composing",void 0),bh({name:"au-render",template:null,containerless:!0,capture:!0})(Tg);class $g{constructor(t,e,n,i,s,r,o){this.c=t,this.parent=e,this.host=n,this.l=i,this.p=s,this.scopeBehavior="auto",this.Fe=void 0,this.r=t.get(uu),this.$e=r,this.Ve=o}static get inject(){return[hn,Tu,Gu,Yu,gc,wd,gn(Og)]}get pending(){return this.Me}get composition(){return this.Fe}attaching(t,e,n){return this.Me=qe(this.queue(new Rg(this.view,this.viewModel,this.model,void 0),t),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)}))}detaching(t){const e=this.Fe,n=this.Me;return this.Ve.invalidate(),this.Fe=this.Me=void 0,qe(n,(()=>null==e?void 0:e.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Fe?this.Me=qe(this.Me,(()=>qe(this.queue(new Rg(this.view,this.viewModel,this.model,t),void 0),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)})))):this.Fe.update(this.model)}queue(t,e){const n=this.Ve,i=this.Fe;return qe(n.create(t),(t=>n.isCurrent(t)?qe(this.compose(t),(s=>n.isCurrent(t)?qe(s.activate(e),(()=>n.isCurrent(t)?(this.Fe=s,qe(null==i?void 0:i.deactivate(e),(()=>t))):qe(s.controller.deactivate(s.controller,this.$controller,4),(()=>(s.controller.dispose(),t))))):(s.controller.dispose(),t))):t))}compose(t){let e,n,i;const{view:s,viewModel:r,model:o}=t.change,{c:a,host:l,$controller:c,l:h}=this,u=this.getDef(r),d=a.createChild(),p=null==h?l.parentNode:h.parentNode;if(null!==u){if(u.containerless)throw new Error("AUR0806");null==h?(n=l,i=()=>{}):(n=p.insertBefore(this.p.document.createElement(u.name),h),i=()=>{n.remove()}),e=this.getVm(d,r,n)}else n=null==h?l:h,e=this.getVm(d,r,n);const f=()=>{if(null!==u){const s=vu.$el(d,e,n,{projections:this.$e.projections},u);return new Mg(s,(t=>s.activate(null!=t?t:s,c,2,c.scope.parentScope)),(t=>qe(s.deactivate(null!=t?t:s,c,4),i)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}{const i=kh.create({name:Lh.generateName(),template:s}),r=this.r.getViewFactory(i,d),o=vu.$view(r,c),a="auto"===this.scopeBehavior?Li.fromParent(this.parent.scope,e):Li.create(e);return id(n)?o.setLocation(n):o.setHost(n),new Mg(o,(t=>o.activate(null!=t?t:o,c,2,a)),(t=>o.deactivate(null!=t?t:o,c,4)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}};return"activate"in e?qe(e.activate(o),(()=>f())):f()}getVm(t,e,n){if(null==e)return new Ig;if("object"==typeof e)return e;const i=this.p,s=id(n);t.registerResolver(i.Element,t.registerResolver(Gu,new Bn("ElementResolver",s?null:n))),t.registerResolver(Yu,new Bn("IRenderLocation",s?n:null));const r=t.invoke(e);return t.registerResolver(e,new Bn("au-compose.viewModel",r)),r}getDef(t){const e=Rl(t)?t:null==t?void 0:t.constructor;return Lh.isType(e)?Lh.getDefinition(e):null}}fl([jl],$g.prototype,"view",void 0),fl([jl],$g.prototype,"viewModel",void 0),fl([jl],$g.prototype,"model",void 0),fl([jl({set:t=>{if("scoped"===t||"auto"===t)return t;throw new Error("AUR0805")}})],$g.prototype,"scopeBehavior",void 0),bh("au-compose")($g);class Ig{}class Og{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return qe(t.load(),(t=>new Lg(++this.id,t)))}invalidate(){this.id++}}class Rg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}load(){return Ol(this.view)||Ol(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new Pg(t,e,this.model,this.src))):new Pg(this.view,this.viewModel,this.model,this.src)}}class Pg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}}class Lg{constructor(t,e){this.id=t,this.change=e}}class Mg{constructor(t,e,n,i,s){this.controller=t,this.start=e,this.stop=n,this.update=i,this.context=s,this.state=0}activate(t){if(0!==this.state)throw new Error(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw new Error("AUR0808");default:this.state=-1}}}class jg{constructor(t,e,n,i){var s,r;let o;this.je=null,this.Ne=null;const a=e.auSlot,l=null===(r=null===(s=n.instruction)||void 0===s?void 0:s.projections)||void 0===r?void 0:r[a.name];null==l?(o=i.getViewFactory(a.fallback,n.controller.container),this.We=!1):(o=i.getViewFactory(l,n.parent.controller.container),this.We=!0),this.Oe=n,this.view=o.create().setLocation(t)}static get inject(){return[Yu,wd,$u,uu]}binding(t,e,n){var i;let s;this.je=this.$controller.scope.parentScope,this.We&&(s=this.Oe.controller.scope.parentScope,(this.Ne=Li.fromParent(s,s.bindingContext)).overrideContext.$host=null!==(i=this.expose)&&void 0!==i?i:this.je.bindingContext)}attaching(t,e,n){return this.view.activate(t,this.$controller,n,this.We?this.Ne:this.je)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}exposeChanged(t){this.We&&null!=this.Ne&&(this.Ne.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}fl([jl],jg.prototype,"expose",void 0),bh({name:"au-slot",template:null,containerless:!0})(jg);const Ug=an.createInterface("ISanitizer",(t=>t.singleton(class{sanitize(){throw new Error('"sanitize" method not implemented')}})));let Ng=class{constructor(t){this.He=t}toView(t){return null==t?null:this.He.sanitize(t)}};Ng=fl([gl(0,Ug)],Ng),Zi("sanitize")(Ng);let Bg=class{constructor(t){this.ze=t}toView(t,e){return this.ze.getViewComponentForObject(t,e)}};Bg=fl([gl(0,cu)],Bg),Zi("view")(Bg);const Fg=Af,Vg=xf,Dg=kf,zg=Sf,qg=Ef,Hg=Tf,Zg=Cf,Wg=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return Nn.singleton(Dd,this).register(t)}compile(t,e,n){var i,s,r,o;const a=kh.getOrCreate(t);if(null===a.template||void 0===a.template)return a;if(!1===a.needsCompile)return a;null!=n||(n=tf);const l=new Xp(t,e,n,null,null,void 0),c=Pl(a.template)||!t.enhance?l.ni.createTemplate(a.template):a.template,h="TEMPLATE"===c.nodeName&&null!=c.content,u=h?c.content:c,d=e.get(function(t){function e(t,n,i){an.inject(e)(t,n,i)}return e.$isResolver=!0,e.resolve=function(e,n){return n.root===n?n.getAll(t,!1):n.has(t,!1)?n.getAll(t,!1).concat(n.root.getAll(t,!1)):n.root.getAll(t,!1)},e}(pf)),p=d.length;let f=0;if(p>0)for(;p>f;)null===(s=(i=d[f]).compiling)||void 0===s||s.call(i,c),++f;if(c.hasAttribute(hf))throw new Error("AUR0701");return this.ri(u,l),this.oi(u,l),kh.create({...t,name:t.name||mf(),dependencies:(null!==(r=t.dependencies)&&void 0!==r?r:zn).concat(null!==(o=l.deps)&&void 0!==o?o:zn),instructions:l.rows,surrogates:h?this.li(c,l):zn,template:c,hasSlots:l.hasSlot,needsCompile:!1})}compileSpread(t,e,n,i){var s;const r=new Xp(t,n,tf,null,null,void 0),o=[],a=r.hi(i.nodeName.toLowerCase()),l=null!==a,c=r.ep,h=e.length;let u,d,p,f,g,v,m,y,b,w,x=0,k=null,S=null;for(;h>x;++x)if(u=e[x],b=u.target,w=u.rawValue,S=r.ai(u),null!==S&&(1&S.type)>0)nf.node=i,nf.attr=u,nf.bindable=null,nf.def=null,o.push(S.build(nf));else if(k=r.ui(b),null===k)if(null===S){if(m=c.parse(w,1),l&&(f=af.from(a,!1),g=f.attrs[b],void 0!==g)){m=c.parse(w,1),o.push(new Vd(null==m?new Td(w,g.property):new kd(m,g.property)));continue}if(null!=m)o.push(new kd(m,null!==(s=r.m.map(i,b))&&void 0!==s?s:Oe(b)));else switch(b){case"class":o.push(new Ud(w));break;case"style":o.push(new Nd(w));break;default:o.push(new jd(w,b))}}else{if(l&&(f=af.from(a,!1),g=f.attrs[b],void 0!==g)){nf.node=i,nf.attr=u,nf.bindable=g,nf.def=a,o.push(new Vd(S.build(nf)));continue}nf.node=i,nf.attr=u,nf.bindable=null,nf.def=null,o.push(S.build(nf))}else{if(k.isTemplateController)throw new Error(`AUR0703:${b}`);f=af.from(k,!0),y=!1===k.noMultiBindings&&null===S&&Yp(w),y?p=this.fi(i,w,k,r):(v=f.primary,null===S?(m=c.parse(w,1),p=[null===m?new Td(w,v.property):new kd(m,v.property)]):(nf.node=i,nf.attr=u,nf.bindable=v,nf.def=k,p=[S.build(nf)])),(null!=d?d:d=[]).push(new Id(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(b)?b:void 0,p))}return Jp(),null!=d?d.concat(o):o}li(t,e){var n;const i=[],s=t.attributes,r=e.ep;let o,a,l,c,h,u,d,p,f,g,v,m,y=s.length,b=0,w=null,x=null;for(;y>b;++b){if(o=s[b],a=o.name,l=o.value,c=e.di.parse(a,l),v=c.target,m=c.rawValue,sf[v])throw new Error(`AUR0702:${a}`);if(x=e.ai(c),null!==x&&(1&x.type)>0)nf.node=t,nf.attr=c,nf.bindable=null,nf.def=null,i.push(x.build(nf));else if(w=e.ui(v),null===w)if(null===x)if(f=r.parse(m,1),null!=f)t.removeAttribute(a),--b,--y,i.push(new kd(f,null!==(n=e.m.map(t,v))&&void 0!==n?n:Oe(v)));else switch(a){case"class":i.push(new Ud(m));break;case"style":i.push(new Nd(m));break;default:i.push(new jd(m,a))}else nf.node=t,nf.attr=c,nf.bindable=null,nf.def=null,i.push(x.build(nf));else{if(w.isTemplateController)throw new Error(`AUR0703:${v}`);d=af.from(w,!0),g=!1===w.noMultiBindings&&null===x&&Yp(m),g?u=this.fi(t,m,w,e):(p=d.primary,null===x?(f=r.parse(m,1),u=[null===f?new Td(m,p.property):new kd(f,p.property)]):(nf.node=t,nf.attr=c,nf.bindable=p,nf.def=w,u=[x.build(nf)])),t.removeAttribute(a),--b,--y,(null!=h?h:h=[]).push(new Id(this.resolveResources?w:w.name,null!=w.aliases&&w.aliases.includes(v)?v:void 0,u))}}return Jp(),null!=h?h.concat(i):i}oi(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.mi(t,e):this.vi(t,e);case 3:return this.gi(t,e);case 11:{let n=t.firstChild;for(;null!==n;)n=this.oi(n,e);break}}return t.nextSibling}mi(t,e){const n=t.attributes,i=n.length,s=[],r=e.ep;let o,a,l,c,h,u,d,p,f=!1,g=0;for(;i>g;++g)if(o=n[g],l=o.name,c=o.value,"to-binding-context"!==l){if(a=e.di.parse(l,c),u=a.target,d=a.rawValue,h=e.ai(a),null!==h)switch(h.name){case"to-view":case"bind":s.push(new Pd(r.parse(d,8),Oe(u)));continue;default:throw new Error(`AUR0704:${a.command}`)}p=r.parse(d,1),s.push(new Pd(null===p?new ds(d):p,Oe(u)))}else f=!0;return e.rows.push([new Rd(s,f)]),this.pi(t).nextSibling}vi(t,e){var n,i,s,r,o,a,l,c,h,u;const d=t.nextSibling,p=(null!==(n=t.getAttribute("as-element"))&&void 0!==n?n:t.nodeName).toLowerCase(),f=e.hi(p),g=null!==f,v=g&&null!=f.shadowOptions,m=!!(null==f?void 0:f.capture),y=m?[]:zn,b=e.ep,w=this.debug?Hn:()=>{t.removeAttribute(S),--z,--D};let x,k,S,C,A,E,T,$,I,O,R,P,L,M,j,U,N,B,F,V=t.attributes,D=V.length,z=0,q=null,H=!1,Z=null,W=!0,K=!1;if("slot"===p){if(null==e.root.def.shadowOptions)throw new Error(`AUR0717:${e.root.def.name}`);e.root.hasSlot=!0}if(g&&(W=null===(i=f.processContent)||void 0===i?void 0:i.call(f.Type,t,e.p),V=t.attributes,D=V.length),e.root.def.enhance&&t.classList.contains("au"))throw new Error("AUR0705");for(;D>z;++z){switch(k=V[z],S=k.name,C=k.value,S){case"as-element":case"containerless":w(),K||(K="containerless"===S);continue}if(A=e.di.parse(S,C),Z=e.ai(A),N=A.target,B=A.rawValue,m){if(null!=Z&&1&Z.type){w(),y.push(A);continue}if("au-slot"!==N&&(j=af.from(f,!1),null==j.attrs[N]&&!(null===(s=e.ui(N))||void 0===s?void 0:s.isTemplateController))){w(),y.push(A);continue}}if(null!==Z&&1&Z.type)nf.node=t,nf.attr=A,nf.bindable=null,nf.def=null,(null!=E?E:E=[]).push(Z.build(nf)),w();else if(q=e.ui(N),null===q)if(null!==Z)w(),g&&(j=af.from(f,!1),$=j.attrs[N],void 0!==$)?(nf.node=t,nf.attr=A,nf.bindable=$,nf.def=f,(null!=T?T:T=[]).push(Z.build(nf))):(nf.node=t,nf.attr=A,nf.bindable=null,nf.def=null,(null!=E?E:E=[]).push(Z.build(nf)));else{if(g&&(j=af.from(f,!1),$=j.attrs[N],void 0!==$)){L=b.parse(B,1),(null!=T?T:T=[]).push(null==L?new Td(B,$.property):new kd(L,$.property)),w();continue}L=b.parse(B,1),null!=L&&(w(),(null!=E?E:E=[]).push(new kd(L,null!==(r=e.m.map(t,N))&&void 0!==r?r:Oe(N))))}else j=af.from(q,!0),H=!1===q.noMultiBindings&&null===Z&&Yp(B),H?O=this.fi(t,B,q,e):(U=j.primary,null===Z?(L=b.parse(B,1),O=[null===L?new Td(B,U.property):new kd(L,U.property)]):(nf.node=t,nf.attr=A,nf.bindable=U,nf.def=q,O=[Z.build(nf)])),w(),q.isTemplateController?(null!=R?R:R=[]).push(new Od(ef,this.resolveResources?q:q.name,void 0,O)):(null!=I?I:I=[]).push(new Id(this.resolveResources?q:q.name,null!=q.aliases&&q.aliases.includes(N)?N:void 0,O))}if(Jp(),this.wi(t)&&null!=E&&E.length>1&&this.bi(t,E),g&&(M=new $d(this.resolveResources?f:f.name,void 0,null!=T?T:zn,null,K,y),p===bf)){const n=t.getAttribute("name")||yf,i=e.h("template"),s=e.xi();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?t.removeChild(r):i.content.appendChild(r),r=t.firstChild;this.oi(i.content,s),M.auSlot={name:n,fallback:kh.create({name:mf(),template:i,instructions:s.rows,needsCompile:!1})},t=this.yi(t,e)}if(null==E&&null==M&&null==I||(x=zn.concat(null!=M?M:zn,null!=I?I:zn,null!=E?E:zn),this.pi(t)),null!=R){let n;D=R.length-1,z=D,P=R[z],this.yi(t,e),"TEMPLATE"===t.nodeName?n=t:(n=e.h("template"),n.content.appendChild(t));const i=n,s=e.xi(null==x?[]:[x]);let r,a,h,u,d,m,y,b,w=0,k=0,S=t.firstChild,C=!1;if(!1!==W)for(;null!==S;)if(a=1===S.nodeType?S.getAttribute(bf):null,null!==a&&S.removeAttribute(bf),g)r=S.nextSibling,v||(C=3===S.nodeType&&""===S.textContent.trim(),C||(null!==(o=(l=null!=u?u:u={})[c=a||yf])&&void 0!==o?o:l[c]=[]).push(S),t.removeChild(S)),S=r;else{if(null!==a)throw a=a||yf,new Error(`AUR0706:${p}[${a}]`);S=S.nextSibling}if(null!=u){for(a in h={},u){for(n=e.h("template"),d=u[a],w=0,k=d.length;k>w;++w)m=d[w],"TEMPLATE"===m.nodeName?m.attributes.length>0?n.content.appendChild(m):n.content.appendChild(m.content):n.content.appendChild(m);b=e.xi(),this.oi(n.content,b),h[a]=kh.create({name:mf(),template:n,instructions:b.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=h}if(g&&(K||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!K&&!1!==W,F)if("TEMPLATE"===t.nodeName)this.oi(t.content,s);else for(S=t.firstChild;null!==S;)S=this.oi(S,s);for(P.def=kh.create({name:mf(),template:i,instructions:s.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});z-- >0;)P=R[z],n=e.h("template"),y=e.h("au-m"),y.classList.add("au"),n.content.appendChild(y),P.def=kh.create({name:mf(),template:n,needsCompile:!1,instructions:[[R[z+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([P])}else{null!=x&&e.rows.push(x);let n,i,s,r,o,l,c,d=t.firstChild,m=null,y=!1,b=0,w=0;if(!1!==W)for(;null!==d;)if(i=1===d.nodeType?d.getAttribute(bf):null,null!==i&&d.removeAttribute(bf),g)n=d.nextSibling,v||(y=3===d.nodeType&&""===d.textContent.trim(),y||(null!==(a=(h=null!=s?s:s={})[u=i||yf])&&void 0!==a?a:h[u]=[]).push(d),t.removeChild(d)),d=n;else{if(null!==i)throw i=i||yf,new Error(`AUR0706:${p}[${i}]`);d=d.nextSibling}if(null!=s){for(i in m={},s){for(l=e.h("template"),r=s[i],b=0,w=r.length;w>b;++b)o=r[b],"TEMPLATE"===o.nodeName?o.attributes.length>0?l.content.appendChild(o):l.content.appendChild(o.content):l.content.appendChild(o);c=e.xi(),this.oi(l.content,c),m[i]=kh.create({name:mf(),template:l,instructions:c.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=m}if(g&&(K||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!K&&!1!==W,F&&t.childNodes.length>0)for(d=t.firstChild;null!==d;)d=this.oi(d,e)}return d}gi(t,e){let n="",i=t;for(;null!==i&&3===i.nodeType;)n+=i.textContent,i=i.nextSibling;const s=e.ep.parse(n,1);if(null===s)return i;const r=t.parentNode;for(r.insertBefore(this.pi(e.h("au-m")),t),e.rows.push([new Ld(s,!!e.def.isStrictBinding)]),t.textContent="",i=t.nextSibling;null!==i&&3===i.nodeType;)r.removeChild(i),i=t.nextSibling;return t.nextSibling}fi(t,e,n,i){const s=af.from(n,!0),r=e.length,o=[];let a,l,c,h,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){l=e.slice(p,g);break}if(void 0===l&&(l=e.slice(p)),h=i.di.parse(a,l),u=i.ai(h),d=s.attrs[h.target],null==d)throw new Error(`AUR0707:${n.name}.${h.target}`);for(null===u?(c=i.ep.parse(l,1),o.push(null===c?new Td(l,d.property):new kd(c,d.property))):(nf.node=t,nf.attr=h,nf.bindable=d,nf.def=n,o.push(u.build(nf)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,l=void 0}return Jp(),o}ri(t,e){var n,i;const s=t,r=Le(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===s.childElementCount)throw new Error("AUR0708");const a=new Set,l=[];for(const t of r){if(t.parentNode!==s)throw new Error("AUR0709");const n=uf(t,a),i=class{},r=t.content,o=Le(r.querySelectorAll("bindable")),c=Bl.for(i),h=new Set,u=new Set;for(const t of o){if(t.parentNode!==r)throw new Error("AUR0710");const e=t.getAttribute("property");if(null===e)throw new Error("AUR0711");const n=t.getAttribute("attribute");if(null!==n&&u.has(n)||h.has(e))throw new Error(`AUR0712:${e}+${n}`);null!==n&&u.add(n),h.add(e),c.add({property:e,attribute:null!=n?n:void 0,mode:df(t)}),t.getAttributeNames().filter((t=>!cf.includes(t))).length,r.removeChild(t)}l.push(i),e.ki(Lh.define({name:n,template:t},i)),s.removeChild(t)}let c=0;const h=l.length;for(;h>c;++c)Lh.getDefinition(l[c]).dependencies.push(...null!==(n=e.def.dependencies)&&void 0!==n?n:zn,...null!==(i=e.deps)&&void 0!==i?i:zn)}wi(t){return"INPUT"===t.nodeName&&1===rf[t.type]}bi(t,e){if("INPUT"===t.nodeName){const t=e;let n,i,s,r=0;for(let e=0;e<t.length&&r<3;e++)switch(s=t[e],s.to){case"model":case"value":case"matcher":n=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==n&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}pi(t){return t.classList.add("au"),t}yi(t,e){const n=t.parentNode,i=e.h("au-m");return this.pi(n.insertBefore(i,t)),n.removeChild(t),i}},Gf],Kg=[uc,hc,fc],_g=[Np,Lp,jp,Mp,Up,Bp,Fp,Wp,Vp,Dp,zp,Zp,Hp,qp,Kp],Qg=[Fg,Vg,Dg,zg,qg,Hg,Zg,Ng,Bg,ng,ig,sg,ag,dg,pg,fg,gg,vg,mg,yg,bg,xg,kg,Sg,If,Rf,Yf,Tg,$g,eg,Jf,tg,jg],Gg=[tp,ep,Xd,Yd,Jd,Wd,Kd,_d,Qd,Gd,lp,pp,cp,hp,up,dp,rp,fp],Xg=function t(e){return{optionsProvider:e,register(t){const n={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(n),t.register(Nn.instance(Ts,n.coercingOptions),...Wg,...Qg,...Kg,..._g,...Gg)},customize:n=>t(null!=n?n:e)}}(Hn),Yg=an.createInterface("IAurelia");var Jg;!function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(Jg||(Jg={}));const tv=an.createInterface("IDialogService"),ev=an.createInterface("IDialogController"),nv=an.createInterface("IDialogDomRenderer"),iv=an.createInterface("IDialogDom"),sv=an.createInterface("IDialogGlobalSettings");class rv{constructor(t,e){this.wasCancelled=t,this.dialog=e}static create(t,e){return new rv(t,e)}}class ov{constructor(t,e){this.status=t,this.value=e}static create(t,e){return new ov(t,e)}}var av;!function(t){t.Ok="ok",t.Error="error",t.Cancel="cancel",t.Abort="abort"}(av||(av={}));class lv{constructor(t,e){this.p=t,this.ctn=e,this.closed=new Promise(((t,e)=>{this.Pt=t,this.St=e}))}static get inject(){return[gc,hn]}activate(t){var e;const n=this.ctn.createChild(),{model:i,template:s,rejectOnCancel:r}=t,o=n.get(nv),a=null!==(e=t.host)&&void 0!==e?e:this.p.document.body,l=this.dom=o.render(a,t),c=n.has(Xu,!0)?n.get(Xu):null,h=l.contentHost;return this.settings=t,null!=c&&c.contains(a)||n.register(Nn.instance(Xu,a)),n.register(Nn.instance(Gu,h),Nn.instance(iv,l)),new Promise((e=>{var s,r;const o=Object.assign(this.cmp=this.getOrCreateVm(n,t,h),{$dialog:this});e(null===(r=null===(s=o.canActivate)||void 0===s?void 0:s.call(o,i))||void 0===r||r)})).then((e=>{var o;if(!0!==e){if(l.dispose(),r)throw hv(null,"Dialog activation rejected");return rv.create(!0,this)}const a=this.cmp;return qe(null===(o=a.activate)||void 0===o?void 0:o.call(a,i),(()=>{var e;const i=this.controller=vu.$el(n,a,h,null,kh.create(null!==(e=this.getDefinition(a))&&void 0!==e?e:{name:Lh.generateName(),template:s}));return qe(i.activate(i,null,2),(()=>{var e;return l.overlay.addEventListener(null!==(e=t.mouseEvent)&&void 0!==e?e:"click",this),rv.create(!1,this)}))}))}),(t=>{throw l.dispose(),t}))}deactivate(t,e){if(this.es)return this.es;let n=!0;const{controller:i,dom:s,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,l=ov.create(t,e),c=new Promise((c=>{var h,u;c(qe(null===(u=null===(h=r.canDeactivate)||void 0===h?void 0:h.call(r,l))||void 0===u||u,(c=>{var h;if(!0!==c){if(n=!1,this.es=void 0,a)throw hv(null,"Dialog cancellation rejected");return ov.create("abort")}return qe(null===(h=r.deactivate)||void 0===h?void 0:h.call(r,l),(()=>qe(i.deactivate(i,null,4),(()=>(s.dispose(),s.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===t?this.St(hv(e,"Dialog cancelled with a rejection on cancel")):this.Pt(l),l)))))})))})).catch((t=>{throw this.es=void 0,t}));return this.es=n?c:void 0,c}ok(t){return this.deactivate("ok",t)}cancel(t){return this.deactivate("cancel",t)}error(t){const e=function(t){const e=new Error;return e.wasCancelled=!1,e.value=t,e}(t);return new Promise((t=>{var n,i;return t(qe(null===(i=(n=this.cmp).deactivate)||void 0===i?void 0:i.call(n,ov.create("error",e)),(()=>qe(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.St(e)})))))}))}handleEvent(t){this.settings.overlayDismiss&&!this.dom.contentHost.contains(t.target)&&this.cancel()}getOrCreateVm(t,e,n){const i=e.component;if(null==i)return new cv;if("object"==typeof i)return i;const s=this.p;return t.registerResolver(s.HTMLElement,t.registerResolver(s.Element,t.registerResolver(Gu,new Bn("ElementResolver",n)))),t.invoke(i)}getDefinition(t){const e=Rl(t)?t:null==t?void 0:t.constructor;return Lh.isType(e)?Lh.getDefinition(e):null}}class cv{}function hv(t,e){const n=new Error(e);return n.wasCancelled=!0,n.value=t,n}class uv{static from(...t){return Object.assign(new uv,...t).ls().os()}load(){const t=this,e=this.component,n=this.template,i=He(null==e?void 0:qe(e(),(e=>{t.component=e})),Rl(n)?qe(n(),(e=>{t.template=e})):void 0);return i instanceof Promise?i.then((()=>t)):t}ls(){if(null==this.component&&null==this.template)throw new Error("AUR0903");return this}os(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function dv(t,e){return this.then((n=>n.dialog.closed.then(t,e)),e)}const pv="position:absolute;width:100%;height:100%;top:0;left:0;";class fv{constructor(t){this.p=t,this.wrapperCss=`${pv} display:flex;`,this.overlayCss=pv,this.hostCss="position:relative;margin:auto;"}static register(t){Nn.singleton(nv,this).register(t)}render(t){const e=this.p.document,n=(t,n)=>{const i=e.createElement(t);return i.style.cssText=n,i},i=t.appendChild(n("au-dialog-container",this.wrapperCss)),s=i.appendChild(n("au-dialog-overlay",this.overlayCss)),r=i.appendChild(n("div",this.hostCss));return new gv(i,s,r)}}fv.inject=[gc];class gv{constructor(t,e,n){this.wrapper=t,this.overlay=e,this.contentHost=n}dispose(){this.wrapper.remove()}}function vv(t,e){return{settingsProvider:t,register:n=>n.register(...e,Xc.beforeCreate((()=>t(n.get(sv))))),customize:(t,n)=>vv(t,null!=n?n:e)}}vv((()=>{throw new Error("AUR0904")}),[class{static register(t){t.register(Nn.singleton(sv,this))}}]);const mv=vv(Hn,[class{constructor(t,e,n){this.ft=t,this.p=e,this.ss=n,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const t=this.dlgs;return t.length>0?t[t.length-1]:null}static get inject(){return[hn,gc,sv]}static register(t){t.register(Nn.singleton(tv,this),Xc.beforeDeactivate(tv,(t=>qe(t.closeAll(),(t=>{if(t.length>0)throw new Error(`AUR0901:${t.length}`)})))))}open(t){return function(t){return t.whenClosed=dv,t}(new Promise((e=>{var n;const i=uv.from(this.ss,t),s=null!==(n=i.container)&&void 0!==n?n:this.ft.createChild();e(qe(i.load(),(t=>{const e=s.invoke(lv);return s.register(Nn.instance(ev,e)),s.register(Nn.callback(lv,(()=>{throw new Error("AUR0902")}))),qe(e.activate(t),(t=>{if(!t.wasCancelled){1===this.dlgs.push(e)&&this.p.window.addEventListener("keydown",this);const t=()=>this.remove(e);e.closed.then(t,t)}return t}))})))})))}closeAll(){return Promise.all(Array.from(this.dlgs).map((t=>t.settings.rejectOnCancel?t.cancel().then((()=>null)):t.cancel().then((e=>"cancel"===e.status?null:t))))).then((t=>t.filter((t=>!!t))))}remove(t){const e=this.dlgs,n=e.indexOf(t);n>-1&&this.dlgs.splice(n,1),0===e.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(t){const e=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(t);if(null==e)return;const n=this.top;if(null===n||0===n.settings.keyboard.length)return;const i=n.settings.keyboard;"Escape"===e&&i.includes(e)?n.cancel():"Enter"===e&&i.includes(e)&&n.ok()}},class{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(t){Nn.singleton(sv,this).register(t)}},fv]);an.createInterface((t=>t.singleton(yv)));class yv{constructor(t,e,n){this.ctn=t,this.p=e,this.r=n}define(t,e,n){if(!t.includes("-"))throw new Error('Invalid web-components custom element name. It must include a "-"');let i;if(null==e)throw new Error("Invalid custom element definition");if(i="function"==typeof e?Lh.isType(e)?Lh.getDefinition(e):kh.create(Lh.generateName(),e):kh.getOrCreate(e),i.containerless)throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");const s=(null==n?void 0:n.extends)?this.p.document.createElement(n.extends).constructor:HTMLElement,r=this.ctn,o=this.r,a=i.bindables,l=this.p;class c extends s{auInit(){if(this.auInited)return;this.auInited=!0;const t=r.createChild();t.registerResolver(l.HTMLElement,t.registerResolver(l.Element,t.registerResolver(Gu,new Bn("ElementProvider",this))));const e=o.compile(i,t,{projections:null}),n=t.invoke(e.Type),s=this.auCtrl=vu.$el(t,n,this,null,e);Qu(this,e.key,s)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null,0)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null,0)}adoptedCallback(){this.auInit()}attributeChangedCallback(t,e,n){this.auInit(),this.auCtrl.viewModel[t]=n}}c.observedAttributes=Object.keys(a);for(const t in a)Object.defineProperty(c.prototype,t,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[t]},set(e){this.auInited||this.auInit(),this.auCtrl.viewModel[t]=e}});return this.p.customElements.define(t,c,n),c}}yv.inject=[hn,gc,uu];const bv=pl.getOrCreate(globalThis);class wv extends class{constructor(t=an.createContainer()){if(this.container=t,this.ir=!1,this.Ge=!1,this.Xe=!1,this.Ke=void 0,this.next=void 0,this.Ye=void 0,this.Ze=void 0,t.has(Yg,!0))throw new Error("AUR0768");t.registerResolver(Yg,new Bn("IAurelia",this)),t.registerResolver(qu,this.Je=new Bn("IAppRoot"))}get isRunning(){return this.ir}get isStarting(){return this.Ge}get isStopping(){return this.Xe}get root(){if(null==this.Ke){if(null==this.next)throw new Error("AUR0767");return this.next}return this.Ke}register(...t){return this.container.register(...t),this}app(t){return this.next=new Wu(t,this.Qe(t.host),this.container,this.Je),this}enhance(t,e){var n;const i=null!==(n=t.container)&&void 0!==n?n:this.container.createChild(),s=t.host,r=this.Qe(s),o=t.component;let a;Rl(o)?(i.registerResolver(r.HTMLElement,i.registerResolver(r.Element,i.registerResolver(Gu,new Bn("ElementResolver",s)))),a=i.invoke(o)):a=o,i.registerResolver(Xu,new Bn("IEventTarget",s)),e=null!=e?e:null;const l=vu.$el(i,a,s,null,kh.create({name:Lh.generateName(),template:s,enhance:!0}));return qe(l.activate(l,e,2),(()=>l))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}Qe(t){let e;if(this.container.has(gc,!1))e=this.container.get(gc);else{if(null===t.ownerDocument.defaultView)throw new Error("AUR0769");e=new pl(t.ownerDocument.defaultView),this.container.register(Nn.instance(gc,e))}return e}start(t=this.next){if(null==t)throw new Error("AUR0770");return this.Ye instanceof Promise?this.Ye:this.Ye=qe(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.Je.prepare(this.Ke=t),this.Ge=!0,qe(t.activate(),(()=>{this.ir=!0,this.Ge=!1,this.Ye=void 0,this.ts(t,"au-started",t.host)})))))}stop(t=!1){if(this.Ze instanceof Promise)return this.Ze;if(!0===this.ir){const e=this.Ke;return this.ir=!1,this.Xe=!0,this.Ze=qe(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.Ke=void 0,this.Je.dispose(),this.Xe=!1,this.ts(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.Xe)throw new Error("AUR0771");this.container.dispose()}ts(t,e,n){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});n.dispatchEvent(i)}}{constructor(t=function(){return an.createContainer().register(Nn.instance(gc,bv),Xg)}()){super(t)}static start(t){return(new wv).start(t)}static app(t){return(new wv).app(t)}static enhance(t,e){return(new wv).enhance(t,e)}static register(...t){return(new wv).register(...t)}app(t){if(Lh.isType(t)){const e=Lh.getDefinition(t);let n=document.querySelector(e.name);return null===n&&(n=document.body),super.app({host:n,component:t})}return super.app(t)}}var xv=function(t,e){return xv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},xv(t,e)};function kv(t,e){function n(){this.constructor=t}xv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Sv(t){return"function"==typeof t}var Cv=!1,Av={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,Cv=t},get useDeprecatedSynchronousErrorHandling(){return Cv}};function Ev(t){setTimeout((function(){throw t}),0)}var Tv={closed:!0,next:function(t){},error:function(t){if(Av.useDeprecatedSynchronousErrorHandling)throw t;Ev(t)},complete:function(){}},$v=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function Iv(t){return null!==t&&"object"==typeof t}var Ov=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Rv=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,i=n._parentOrParents,s=n._ctorUnsubscribe,r=n._unsubscribe,o=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(var a=0;a<i.length;++a)i[a].remove(this);if(Sv(r)){s&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof Ov?Pv(t.errors):[t]}}if($v(o)){a=-1;for(var l=o.length;++a<l;){var c=o[a];if(Iv(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof Ov?e=e.concat(Pv(t.errors)):e.push(t)}}}if(e)throw new Ov(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=n._parentOrParents;if(null===s)n._parentOrParents=this;else if(s instanceof t){if(s===this)return n;n._parentOrParents=[s,this]}else{if(-1!==s.indexOf(this))return n;s.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Pv(t){return t.reduce((function(t,e){return t.concat(e instanceof Ov?e.errors:e)}),[])}var Lv=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Mv=function(t){function e(n,i,s){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=Tv;break;case 1:if(!n){r.destination=Tv;break}if("object"==typeof n){n instanceof e?(r.syncErrorThrowable=n.syncErrorThrowable,r.destination=n,n.add(r)):(r.syncErrorThrowable=!0,r.destination=new jv(r,n));break}default:r.syncErrorThrowable=!0,r.destination=new jv(r,n,i,s)}return r}return kv(e,t),e.prototype[Lv]=function(){return this},e.create=function(t,n,i){var s=new e(t,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Rv),jv=function(t){function e(e,n,i,s){var r,o=t.call(this)||this;o._parentSubscriber=e;var a=o;return Sv(n)?r=n:n&&(r=n.next,i=n.error,s=n.complete,n!==Tv&&(Sv((a=Object.create(n)).unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=r,o._error=i,o._complete=s,o}return kv(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Av.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=Av.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Ev(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Ev(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};Av.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Av.useDeprecatedSynchronousErrorHandling)throw t;Ev(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!Av.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return Av.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Ev(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Mv),Uv=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Nv(t){return t}function Bv(t){return 0===t.length?Nv:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Fv=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,s=function(t,e,n){if(t){if(t instanceof Mv)return t;if(t[Lv])return t[Lv]()}return t||e||n?new Mv(t,e,n):new Mv(Tv)}(t,e,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Av.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Av.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Av.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,i=e.destination,s=e.isStopped;if(n||s)return!1;t=i&&i instanceof Mv?i:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=Vv(e))((function(e,i){var s;s=n.subscribe((function(e){try{t(e)}catch(t){i(t),s&&s.unsubscribe()}}),i,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Uv]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Bv(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=Vv(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function Vv(t){if(t||(t=Av.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var Dv=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),zv=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return kv(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(Rv),qv=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return kv(e,t),e}(Mv),Hv=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return kv(e,t),e.prototype[Lv]=function(){return new qv(this)},e.prototype.lift=function(t){var e=new Zv(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new Dv;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new Dv;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Dv;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new Dv;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new Dv;return this.hasError?(t.error(this.thrownError),Rv.EMPTY):this.isStopped?(t.complete(),Rv.EMPTY):(this.observers.push(t),new zv(this,t))},e.prototype.asObservable=function(){var t=new Fv;return t.source=this,t},e.create=function(t,e){return new Zv(t,e)},e}(Fv),Zv=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return kv(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):Rv.EMPTY},e}(Hv),Wv=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return kv(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Dv;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(Hv);function Kv(t,e){if(!Qv(t))throw Error("Provided state is not of type StateHistory");return e>0?function(t,e){if(e<0||e>=t.future.length)return t;const{past:n,future:i,present:s}=t;return{past:[...n,s,...i.slice(0,e)],present:i[e],future:i.slice(e+1)}}(t,e-1):e<0?function(t,e){if(e<0||e>=t.past.length)return t;const{past:n,future:i,present:s}=t,r=n.slice(0,e),o=[...n.slice(e+1),s,...i];return{past:r,present:n[e],future:o}}(t,t.past.length+e):t}function _v(t,e){return{...t,past:[...t.past,t.present],present:e,future:[]}}function Qv(t){return void 0!==t.present&&void 0!==t.future&&void 0!==t.past&&Array.isArray(t.future)&&Array.isArray(t.past)}function Gv(t,e){return function(n,i){e(n,i,t)}}const Xv="aurelia-store-state";var Yv,Jv,tm;function em(t,e,n){const i=sm.container.get(rd).localStorage;if(void 0!==i){const e=void 0!==(null==n?void 0:n.key)?n.key:Xv;i.setItem(e,JSON.stringify(t))}}function nm(t,e){const n=sm.container.get(rd).localStorage;if(void 0===n)return t;const i=n.getItem(void 0===e?Xv:e);if(null===i||""===i)return t;try{return JSON.parse(i)}catch(t){}return t}function im(t,e,n){var i;return(null===(i=t.logDefinitions)||void 0===i?void 0:i.hasOwnProperty(e))&&t.logDefinitions[e]&&Object.values(Jv).includes(t.logDefinitions[e])?t.logDefinitions[e]:n}!function(t){t.Before="before",t.After="after"}(Yv||(Yv={})),function(t){t.trace="trace",t.debug="debug",t.info="info",t.warn="warn",t.error="error"}(Jv||(Jv={})),function(t){t.StartEnd="startEnd",t.All="all"}(tm||(tm={}));const sm={container:null};class rm extends Error{constructor(t){super(`Tried to dispatch an unregistered action ${void 0!==t&&("string"==typeof t?t:t.name)}`)}}class om extends Error{}class am extends Error{}class lm extends Error{}let cm=class{constructor(t,e,n,i){var s,r,o,a;this.initialState=t,this.logger=e,this.t=n,this.devToolsAvailable=!1,this.actions=new Map,this.middlewares=new Map,this.dispatchQueue=[],this.options=null!=i?i:{};const l=!0===(null===(r=null===(s=this.options)||void 0===s?void 0:s.history)||void 0===r?void 0:r.undoable);this._state=new Wv(t),this.state=this._state.asObservable(),!0!==(null===(a=null===(o=this.options)||void 0===o?void 0:o.devToolsOptions)||void 0===a?void 0:a.disable)&&this.setupDevTools(),l&&this.registerHistoryMethods()}registerMiddleware(t,e,n){this.middlewares.set(t,{placement:e,settings:n})}unregisterMiddleware(t){this.middlewares.has(t)&&this.middlewares.delete(t)}isMiddlewareRegistered(t){return this.middlewares.has(t)}registerAction(t,e){if(0===e.length)throw new am("The reducer is expected to have one or more parameters, where the first will be the present state");this.actions.set(e,{type:t})}unregisterAction(t){this.actions.has(t)&&this.actions.delete(t)}isActionRegistered(t){return"string"==typeof t?void 0!==Array.from(this.actions).find((e=>e[1].type===t)):this.actions.has(t)}resetToState(t){this._state.next(t)}async dispatch(t,...e){const n=this.lookupAction(t);return n?this.queueDispatch([{reducer:n,params:e}]):Promise.reject(new rm(t))}pipe(t,...e){const n=[],i={dispatch:async()=>this.queueDispatch(n),pipe:(e,...s)=>{const r=this.lookupAction(e);if(!r)throw new rm(t);return n.push({reducer:r,params:s}),i}};return i.pipe(t,...e)}lookupAction(t){if("string"==typeof t){const e=Array.from(this.actions).find((([e,n])=>n.type===t));if(e)return e[0]}else if(this.actions.has(t))return t}async queueDispatch(t){return new Promise(((e,n)=>{this.dispatchQueue.push({actions:t,resolve:e,reject:n}),1===this.dispatchQueue.length&&this.handleQueue()}))}async handleQueue(){if(this.dispatchQueue.length>0){const t=this.dispatchQueue[0];try{await this.internalDispatch(t.actions),t.resolve()}catch(e){t.reject(e)}this.dispatchQueue.shift(),this.handleQueue()}}async internalDispatch(t){var e;const n=t.find((t=>!this.actions.has(t.reducer)));if(n)throw new rm(n.reducer);sm.container.get(rd).performance.mark("dispatch-start");const i=t.map((t=>({type:this.actions.get(t.reducer).type,params:t.params,reducer:t.reducer}))),s={name:i.map((t=>t.type)).join("->"),params:i.reduce(((t,e)=>t.concat(e.params)),[]),pipedActions:i.map((t=>({name:t.type,params:t.params})))};this.options.logDispatchedActions&&this.logger[im(this.options,"dispatchedActions",Jv.info)](`Dispatching: ${s.name}`);const r=await this.executeMiddlewares(this._state.getValue(),Yv.Before,s);if(!1===r)return sm.container.get(rd).performance.clearMarks(),void sm.container.get(rd).performance.clearMeasures();let o=r;for(const t of i){if(o=await t.reducer(o,...t.params),!1===o)return sm.container.get(rd).performance.clearMarks(),void sm.container.get(rd).performance.clearMeasures();if(sm.container.get(rd).performance.mark(`dispatch-after-reducer-${t.type}`),!o&&"object"!=typeof o)throw new lm("The reducer has to return a new state")}let a=await this.executeMiddlewares(o,Yv.After,s);if(!1===a)return sm.container.get(rd).performance.clearMarks(),void sm.container.get(rd).performance.clearMeasures();if(Qv(a)&&(null===(e=this.options.history)||void 0===e?void 0:e.limit)&&(a=function(t,e){return Qv(t)&&(t.past.length>e&&(t.past=t.past.slice(t.past.length-e)),t.future.length>e&&(t.future=t.future.slice(0,e))),t}(a,this.options.history.limit)),this._state.next(a),sm.container.get(rd).performance.mark("dispatch-end"),this.options.measurePerformance===tm.StartEnd){sm.container.get(rd).performance.measure("startEndDispatchDuration","dispatch-start","dispatch-end");const t=sm.container.get(rd).performance.getEntriesByName("startEndDispatchDuration");this.logger[im(this.options,"performanceLog",Jv.info)](`Total duration ${t[0].duration} of dispatched action ${s.name}:`,t)}else if(this.options.measurePerformance===tm.All){const t=sm.container.get(rd).performance.getEntriesByType("mark"),e=t[t.length-1].startTime-t[0].startTime;this.logger[im(this.options,"performanceLog",Jv.info)](`Total duration ${e} of dispatched action ${s.name}:`,t)}sm.container.get(rd).performance.clearMarks(),sm.container.get(rd).performance.clearMeasures(),this.updateDevToolsState({type:s.name,params:s.params},a)}executeMiddlewares(t,e,n){return Array.from(this.middlewares).filter((t=>t[1].placement===e)).reduce((async(t,i,s)=>{try{const s=await i[0](await t,this._state.getValue(),i[1].settings,n);return!1!==s&&(s||await t)}catch(e){if(this.options.propagateError)throw e;return await t}finally{sm.container.get(rd).performance.mark(`dispatch-${e}-${i[0].name}`)}}),t)}setupDevTools(){this.t.__REDUX_DEVTOOLS_EXTENSION__&&(this.logger[im(this.options,"devToolsStatus",Jv.debug)]("DevTools are available"),this.devToolsAvailable=!0,this.devTools=this.t.__REDUX_DEVTOOLS_EXTENSION__.connect(this.options.devToolsOptions),this.devTools.init(this.initialState),this.devTools.subscribe((t=>{var e,n;if(this.logger[im(this.options,"devToolsStatus",Jv.debug)](`DevTools sent change ${t.type}`),"ACTION"!==t.type||void 0===t.payload){if("DISPATCH"===t.type&&t.payload)switch(t.payload.type){case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return void this._state.next(JSON.parse(t.state));case"COMMIT":return void this.devTools.init(this._state.getValue());case"RESET":return this.devTools.init(this.initialState),void this.resetToState(this.initialState);case"ROLLBACK":{const e=JSON.parse(t.state);return this.resetToState(e),void this.devTools.init(e)}}}else{const i=Array.from(this.actions).find((function([e]){var n;return e.name===(null===(n=t.payload)||void 0===n?void 0:n.name)})),s=null!==(n=this.lookupAction(null===(e=t.payload)||void 0===e?void 0:e.name))&&void 0!==n?n:null==i?void 0:i[0];if(!s)throw new om("Tried to remotely dispatch an unregistered action");if(!t.payload.args||t.payload.args.length<1)throw new om("No action arguments provided");this.dispatch(s,...t.payload.args.slice(1).map((t=>JSON.parse(t)))).catch((()=>{throw new om("Issue when trying to dispatch an action through devtools")}))}})))}updateDevToolsState(t,e){this.devToolsAvailable&&this.devTools&&this.devTools.send(t,e)}registerHistoryMethods(){this.registerAction("jump",Kv)}};cm=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}([Gv(1,Jn),Gv(2,rd)],cm);const hm=t=>t.state;function um(t){const e={selector:"function"==typeof t?t:hm,...t};function n(t,e){const n=e(t);return n instanceof Fv?n:t.state}function i(){const t="object"==typeof e.selector,n={[e.target||"state"]:e.selector||hm};return Object.entries({...t?e.selector:n}).map((([n,i])=>{var s,r;return{targets:e.target&&t?[e.target,n]:[n],selector:i,changeHandlers:{[null!==(s=e.onChanged)&&void 0!==s?s:""]:1,[`${null!==(r=e.target)&&void 0!==r?r:n}Changed`]:e.target?0:1,propertyChanged:0}}}))}return function(e){const s="object"==typeof t&&t.setup?e.prototype[t.setup]:e.prototype.binding,r="object"==typeof t&&t.teardown?e.prototype[t.teardown]:e.prototype.unbinding;e.prototype["object"==typeof t&&void 0!==t.setup?t.setup:"binding"]=function(){if("object"==typeof t&&"string"==typeof t.onChanged&&!(t.onChanged in this))throw new Error("Provided onChanged handler does not exist on target VM");const e=vu.getCached(this)?vu.getCached(this).container.get(cm):sm.container.get(cm);if(this._stateSubscriptions=i().map((t=>n(e,t.selector).subscribe((e=>{const n=t.targets.length-1,i=t.targets.reduce(((t={},e)=>t[e]),this);Object.entries(t.changeHandlers).forEach((([s,r])=>{s in this&&this[s](...[t.targets[n],e,i].slice(r,3))})),t.targets.reduce(((t,i,s)=>(t[i]=s===n?e:t[i]||{},t[i])),this)})))),s)return s.apply(this,arguments)},e.prototype["object"==typeof t&&t.teardown?t.teardown:"unbinding"]=function(){if(this._stateSubscriptions&&Array.isArray(this._stateSubscriptions)&&this._stateSubscriptions.forEach((t=>{t instanceof Rv&&!1===t.closed&&t.unsubscribe()})),r)return r.apply(this,arguments)}}}const dm={withInitialState(t){return Reflect.set(this,"state",t),this},withOptions(t){return Reflect.set(this,"options",t),this},register(t){var e;sm.container=t;const n=Reflect.get(this,"state"),i=Reflect.get(this,"options"),s=t.get(Jn),r=t.get(rd);if(!n)throw new Error("initialState must be provided via withInitialState builder method");let o=n;return(null===(e=null==i?void 0:i.history)||void 0===e?void 0:e.undoable)&&!Qv(n)&&(o={past:[],present:n,future:[]}),Nn.instance(cm,new cm(o,s,r,i)).register(t),t}};function pm(t){return"object"==typeof t&&null!==t||"function"==typeof t}let fm=new WeakMap;function gm(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function vm(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function mm(t,e,n){let i=fm.get(t);if(void 0===i){if(!n)return;i=new Map,fm.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function ym(t,e,n){const i=mm(e,n,!1);return void 0!==i&&i.has(t)}function bm(t,e,n){if(ym(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&bm(t,i,n)}function wm(t,e,n){const i=mm(e,n,!1);if(void 0!==i)return i.get(t)}function xm(t,e,n){if(ym(t,e,n))return wm(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?xm(t,i,n):void 0}function km(t,e){const n=[],i=mm(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function Sm(t,e){const n=km(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=Sm(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}const Cm={define:function(t,e,n,i){if(!pm(n))throw gm("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return function(t,e,n,i){mm(n,i,!0).set(t,e)}(t,e,n,vm(i))},has:function(t,e,n){if(!pm(e))throw gm("Metadata.has",[t,e,n],"target",e,"Object or Function");return bm(t,e,vm(n))},hasOwn:function(t,e,n){if(!pm(e))throw gm("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return ym(t,e,vm(n))},get:function(t,e,n){if(!pm(e))throw gm("Metadata.get",[t,e,n],"target",e,"Object or Function");return xm(t,e,vm(n))},getOwn:function(t,e,n){if(!pm(e))throw gm("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return wm(t,e,vm(n))},getKeys:function(t,e){if(!pm(t))throw gm("Metadata.getKeys",[t,e],"target",t,"Object or Function");return Sm(t,vm(e))},getOwnKeys:function(t,e){if(!pm(t))throw gm("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return km(t,vm(e))},delete:function(t,e,n){if(!pm(e))throw gm("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=mm(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,vm(n))}};class Am{constructor(t,e,n){this.path=t,this.caseSensitive=e,this.handler=n}}class Em{constructor(t,e){this.route=t,this.paramNames=e}}class Tm{constructor(t,e){this.endpoint=t,this.params=e}}class $m{constructor(t,e,n,i){var s;this.chars=t,this.states=e,this.skippedStates=n,this.result=i,this.head=e[e.length-1],this.endpoint=null===(s=this.head)||void 0===s?void 0:s.endpoint}advance(t){const{chars:e,states:n,skippedStates:i,result:s}=this;let r=null,o=0;const a=n[n.length-1];function l(c,h){if(c.isMatch(t)&&(1==++o?r=c:s.add(new $m(e.concat(t),n.concat(c),null===h?i:i.concat(h),s))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw new Error(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw new Error("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)l(e,c)}}if(a.isDynamic&&l(a,null),null!==a.nextStates)for(const t of a.nextStates)l(t,null);null!==r&&(n.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&s.remove(this)}finalize(){!function t(e,n){const i=n.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const n of i)if(n.isOptional&&null!==n.endpoint){if(e.push(n),null!==n.nextStates)for(const i of n.nextStates)t(e,i);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:n}=this,i={};for(const t of n.paramNames)i[t]=void 0;for(let n=0,s=t.length;n<s;++n){const s=t[n];if(s.isDynamic){const t=s.segment.name;void 0===i[t]?i[t]=e[n]:i[t]+=e[n]}}return i}compareTo(t){const e=this.states,n=t.states;for(let t=0,i=0,s=Math.max(e.length,n.length);t<s;++t){let s=e[t];if(void 0===s)return 1;let r=n[i];if(void 0===r)return-1;let o=s.segment,a=r.segment;if(null===o){if(null===a){++i;continue}if(void 0===(s=e[++t]))return 1;o=s.segment}else if(null===a){if(void 0===(r=n[++i]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,s=t.skippedStates,r=i.length,o=s.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=i[t],n=s[t];if(e.length<n.length)return 1;if(e.length>n.length)return-1}return 0}}function Im(t){return null!==t.head.endpoint}function Om(t,e){return t.compareTo(e)}class Rm{constructor(t){this.candidates=[],this.candidates=[new $m([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(Im);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(Om),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const n of e)n.advance(t)}}class Pm{constructor(t,e,n){switch(this.prevState=t,this.segment=e,this.value=n,this.nextStates=null,this.endpoint=null,null==e?void 0:e.kind){case 2:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let n,i=this.nextStates;return null===i?(n=void 0,i=this.nextStates=[]):n=null===t?i.find((t=>t.value===e)):i.find((e=>{var n;return null===(n=e.segment)||void 0===n?void 0:n.equals(t)})),void 0===n&&i.push(n=new Pm(this,t,e)),n}setEndpoint(t){if(null!==this.endpoint)throw new Error(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(null==e?void 0:e.kind){case 2:return!this.value.includes(t);case 1:return!0;case 3:case void 0:return this.value.includes(t)}}}function Lm(t){return t.length>0}var Mm;!function(t){t[t.star=1]="star",t[t.dynamic=2]="dynamic",t[t.static=3]="static"}(Mm||(Mm={}));class jm{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 3}appendTo(t){const{value:e,value:{length:n}}=this;if(this.caseSensitive)for(let i=0;i<n;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<n;++i){const n=e.charAt(i);t=t.append(this,n.toUpperCase()+n.toLowerCase())}return t}equals(t){return 3===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class Um{constructor(t,e){this.name=t,this.optional=e}get kind(){return 2}appendTo(t){return t.append(this,"/")}equals(t){return 2===t.kind&&t.optional===this.optional&&t.name===this.name}}class Nm{constructor(t){this.name=t}get kind(){return 1}appendTo(t){return t.append(this,"")}equals(t){return 1===t.kind&&t.name===this.name}}const Bm=Object.prototype.hasOwnProperty,Fm=Reflect.defineProperty,Vm=t=>"function"==typeof t,Dm=t=>"string"==typeof t;function zm(t,e,n){return Fm(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function qm(t,e,n,i=!1){!i&&Bm.call(t,e)||zm(t,e,n)}const Hm=()=>Object.create(null),Zm=Cm.getOwn,Wm=Cm.hasOwn,Km=Cm.define,_m=Xe.annotation.keyFor,Qm=Xe.resource.keyFor,Gm=Xe.resource.appendTo;function Xm(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Nn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class Ym{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Bm.call(t,e)&&(this[e]=t[e])}static create(t,e){return new Ym(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class Jm{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new Jm(null,t,null==e?ty.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new Jm(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new Jm(t,e,ty.create(e),!1)}}class ty{constructor(t){this.bindingContext=t}static create(t){return new ty(t)}}const ey=an.createInterface("ISignaler",(t=>t.singleton(ny)));class ny{constructor(){this.signals=Hm()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var iy;!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(iy||(iy={}));class sy{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;Dm(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===oy;return new sy(e,Fe(ly(e,"name"),n),Be(ly(e,"aliases"),i.aliases,e.aliases),cy.keyFrom(n),Je("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Nn.singleton(n,e).register(t);break;case 2:Nn.instance(n,new ry(t,e)).register(t)}Nn.aliasTo(n,e).register(t),Xm(i,cy,n,t)}}class ry{constructor(t,e){this.ctn=t,this.Type=e,this.deps=an.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class oy{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{Fm(oy.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const ay=Qm("binding-behavior"),ly=(t,e)=>Zm(_m(e),t),cy=Object.freeze({name:ay,keyFrom:t=>`${ay}:${t}`,isType:t=>Vm(t)&&Wm(ay,t),define(t,e){const n=sy.create(t,e);return Km(ay,n,n.Type),Km(ay,n,n),Gm(e,ay),n.Type},getDefinition(t){const e=Zm(ay,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){Km(_m(e),n,t)},getAnnotation:ly});class hy{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return Dm(t)?(n=t,i={name:n}):(n=t.name,i=t),new hy(e,Fe(dy(e,"name"),n),Be(dy(e,"aliases"),i.aliases,e.aliases),py.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Nn.singleton(n,e).register(t),Nn.aliasTo(n,e).register(t),Xm(i,py,n,t)}}const uy=Qm("value-converter"),dy=(t,e)=>Zm(_m(e),t),py=Object.freeze({name:uy,keyFrom:t=>`${uy}:${t}`,isType:t=>Vm(t)&&Wm(uy,t),define(t,e){const n=hy.create(t,e);return Km(uy,n,n.Type),Km(uy,n,n),Gm(e,uy),n.Type},getDefinition(t){const e=Zm(uy,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){Km(_m(e),n,t)},getAnnotation:dy});var fy;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(fy||(fy={}));class gy{constructor(){this.text=""}static unparse(t){const e=new gy;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",Dm(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class vy{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class my{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=cy.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof ry)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(Vm(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return gy.unparse(this)}}class yy{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=py.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(ey);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(ey);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return gy.unparse(this)}}class by{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return gy.unparse(this)}}class wy{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return gy.unparse(this)}}class xy{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return gy.unparse(this)}}xy.$this=new xy(0),xy.$parent=new xy(1);class ky{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=Ym.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=Ym.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return gy.unparse(this)}}class Sy{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return gy.unparse(this)}}class Cy{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return gy.unparse(this)}}class Ay{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=Ym.get(e,this.name,this.ancestor,t),o=qy(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return gy.unparse(this)}}class Ey{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=qy(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return gy.unparse(this)}}class Ty{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(Vm(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return gy.unparse(this)}}class $y{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!Vm(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(Te(s)||Te(r))return(s||0)+(r||0);if($e(s)||$e(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return gy.unparse(this)}}class Iy{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return gy.unparse(this)}}class Oy{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return gy.unparse(this)}}Oy.$undefined=new Oy(void 0),Oy.$null=new Oy(null),Oy.$true=new Oy(!0),Oy.$false=new Oy(!1),Oy.$empty=new Oy("");class Ry{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return gy.unparse(this)}}Ry.$empty=new Ry(zn);class Py{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return gy.unparse(this)}}Py.$empty=new Py(zn,zn);class Ly{constructor(t,e=zn){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return gy.unparse(this)}}Ly.$empty=new Ly([""]);class My{constructor(t,e,n,i=zn){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!Vm(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return gy.unparse(this)}}class jy{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return gy.unparse(this)}}class Uy{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return gy.unparse(this)}}class Ny{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return gy.unparse(this)}}const By=Object.prototype.toString;class Fy{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(By.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${By.call(e)}`)}}iterate(t,e,n){switch(By.call(e)){case"[object Array]":return Hy(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;Hy(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;Hy(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;Hy(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${By.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return gy.unparse(this)}}class Vy{constructor(t,e=zn){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return gy.unparse(this)}}class Dy{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,Jm.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return gy.unparse(this)}}class zy{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,Jm.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return gy.unparse(this)}}function qy(t,e,n){const i=null==e?null:e[n];if(Vm(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function Hy(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}var Zy,Wy,Ky,_y,Qy,Gy;function Xy(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function Yy(t){return null==t?Jy:Jy(t)}function Jy(t){const e=t.prototype;Fm(e,"subs",{get:eb}),qm(e,"subscribe",nb),qm(e,"unsubscribe",ib)}an.createInterface("ICoercionConfiguration"),function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(Zy||(Zy={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(Wy||(Wy={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(Ky||(Ky={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(_y||(_y={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(Qy||(Qy={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(Gy||(Gy={}));class tb{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function eb(){return zm(this,"subs",new tb)}function nb(t){return this.subs.add(t)}function ib(t){return this.subs.remove(t)}function sb(t){return null==t?rb:rb(t)}function rb(t){const e=t.prototype;Fm(e,"queue",{get:ab})}class ob{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(lb)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function ab(){return ob.instance}function lb(t,e,n){n.delete(t),t.flush()}ob.instance=new ob;class cb{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&Ee(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){fb=this.h,this.h=this.v,this.subs.notify(this.v,fb,this.f)}}class hb{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){fb=this.h,this.h=this.v,this.subs.notify(this.v,fb,this.f)}}function ub(t){const e=t.prototype;qm(e,"subscribe",db,!0),qm(e,"unsubscribe",pb,!0),sb(t),Yy(t)}function db(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function pb(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let fb;ub(cb),ub(hb);const gb=new WeakMap;function vb(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function mb(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function yb(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function bb(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,y,b,w,x,k,S,C=0,A=0;for(;;){if(i-n<=10)return void yb(t,e,n,i,s);C=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[C],h=e[C],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,y=n+1,b=i-1,t[C]=t[y],e[C]=e[y],t[y]=v,e[y]=m;t:for(A=y+1;A<b;A++)if(w=t[A],x=e[A],k=s(w,v),k<0)t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,y++;else if(k>0){do{if(b--,b==A)break t;S=t[b],k=s(S,v)}while(k>0);t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,k<0&&(w=t[A],x=e[A],t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,y++)}i-b<y-n?(bb(t,e,b,i,s),i=y):(bb(t,e,n,y,s),n=b)}}const wb=Array.prototype,xb=wb.push,kb=wb.unshift,Sb=wb.pop,Cb=wb.shift,Ab=wb.splice,Eb=wb.reverse,Tb=wb.sort,$b=["push","unshift","pop","shift","splice","reverse","sort"],Ib={push:function(...t){const e=gb.get(this);if(void 0===e)return xb.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=gb.get(this);if(void 0===e)return kb.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;kb.apply(e.indexMap,i);const r=kb.apply(this,t);return e.notify(),r},pop:function(){const t=gb.get(this);if(void 0===t)return Sb.call(this);const e=t.indexMap,n=Sb.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),Sb.call(e),t.notify(),n},shift:function(){const t=gb.get(this);if(void 0===t)return Cb.call(this);const e=t.indexMap,n=Cb.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),Cb.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=gb.get(this);if(void 0===i)return Ab.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;Ab.call(a,e,n,...i)}else Ab.apply(a,t);const h=Ab.apply(this,t);return i.notify(),h},reverse:function(){const t=gb.get(this);if(void 0===t)return Eb.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=gb.get(this);if(void 0===e)return Tb.call(this,t),this;const n=this.length;if(n<2)return this;bb(this,e.indexMap,0,n,mb);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&Vm(t)||(t=vb),bb(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of $b)Fm(Ib[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Ob=!1;class Rb{constructor(t){this.type=18,Ob||(Ob=!0,function(){for(const t of $b)!0!==wb[t].observing&&zm(wb,t,Ib[t])}()),this.indexObservers={},this.collection=t,this.indexMap=Xy(t.length),this.lenObs=void 0,gb.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=Xy(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new cb(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new Pb(this,t)}}class Pb{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Lb(t){let e=gb.get(t);return void 0===e&&(e=new Rb(t)),e}Yy(Rb),Yy(Pb);const Mb=new WeakMap,jb=Set.prototype,Ub=jb.add,Nb=jb.clear,Bb=jb.delete,Fb=["add","clear","delete"],Vb={add:function(t){const e=Mb.get(this);if(void 0===e)return Ub.call(this,t),this;const n=this.size;return Ub.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=Mb.get(this);if(void 0===t)return Nb.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Nb.call(this),e.length=0,t.notify()}},delete:function(t){const e=Mb.get(this);if(void 0===e)return Bb.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Bb.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},Db={writable:!0,enumerable:!1,configurable:!0};for(const t of Fb)Fm(Vb[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let zb=!1;class qb{constructor(t){this.type=34,zb||(zb=!0,function(){for(const t of Fb)!0!==jb[t].observing&&Fm(jb,t,{...Db,value:Vb[t]})}()),this.collection=t,this.indexMap=Xy(t.size),this.lenObs=void 0,Mb.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Xy(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new hb(this)}}function Hb(t){let e=Mb.get(t);return void 0===e&&(e=new qb(t)),e}Yy(qb);const Zb=new WeakMap,Wb=Map.prototype,Kb=Wb.set,_b=Wb.clear,Qb=Wb.delete,Gb=["set","clear","delete"],Xb={set:function(t,e){const n=Zb.get(this);if(void 0===n)return Kb.call(this,t,e),this;const i=this.get(t),s=this.size;if(Kb.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=Zb.get(this);if(void 0===t)return _b.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;_b.call(this),e.length=0,t.notify()}},delete:function(t){const e=Zb.get(this);if(void 0===e)return Qb.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Qb.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},Yb={writable:!0,enumerable:!1,configurable:!0};for(const t of Gb)Fm(Xb[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Jb=!1;class tw{constructor(t){this.type=66,Jb||(Jb=!0,function(){for(const t of Gb)!0!==Wb[t].observing&&Fm(Wb,t,{...Yb,value:Xb[t]})}()),this.collection=t,this.indexMap=Xy(t.size),this.lenObs=void 0,Zb.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Xy(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new hb(this)}}function ew(t){let e=Zb.get(t);return void 0===e&&(e=new tw(t)),e}function nw(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function iw(){return zm(this,"obs",new lw(this))}function sw(t){let e;if(t instanceof Array)e=Lb(t);else if(t instanceof Set)e=Hb(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=ew(t)}this.obs.add(e)}function rw(t){this.obs.add(t)}function ow(){throw new Error("AUR2011:handleChange")}function aw(){throw new Error("AUR2012:handleCollectionChange")}Yy(tw);class lw{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(hw,this),this.count=this.o.size}clearAll(){this.o.forEach(cw,this),this.o.clear(),this.count=0}}function cw(t,e){e.unsubscribe(this)}function hw(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function uw(t){const e=t.prototype;return qm(e,"observe",nw,!0),qm(e,"observeCollection",sw,!0),qm(e,"subscribeTo",rw,!0),Fm(e,"obs",{get:iw}),qm(e,"handleChange",ow),qm(e,"handleCollectionChange",aw),t}function dw(t){return null==t?uw:uw(t)}uw(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}}),an.createInterface("IExpressionParser",(t=>t.singleton(pw)));class pw{constructor(){this.u=Hm(),this.A=Hm(),this.U=Hm()}parse(t,e){let n;switch(e){case 16:return new vy(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return Oy.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return Ew.ip=t,Ew.length=t.length,Ew.index=0,Ew.O=t.charCodeAt(0),Tw(Ew,0,61,void 0===e?8:e)}}var fw,gw,vw,mw;function yw(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(fw||(fw={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(gw||(gw={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(vw||(vw={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(mw||(mw={}));const bw=Oy.$false,ww=Oy.$true,xw=Oy.$null,kw=Oy.$undefined,Sw=xy.$this,Cw=xy.$parent;var Aw;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(Aw||(Aw={}));const Ew=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function Tw(t,e,n,i){if(16===i)return new vy(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),Iw(t);const i=Tw(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(yw(Ow(t)));break;default:s+=String.fromCharCode(t.O)}Ow(t)}return n.length?(e.push(s),new Vy(e,n)):null}(t);if(Iw(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=Uw[63&t.$];Iw(t),s=new Iy(n,Tw(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(Iw(t),e++,!Mw(t,16393)){if(524288&t.$){const t=511&e;s=0===t?Sw:1===t?Cw:new xy(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new Ny(t.L):(s=new ky(t.L,511&e),e=1024),t.R=!0,Iw(t);break;case 3076:t.R=!1,Iw(t),s=Sw,e=512;break;case 671751:Iw(t),s=Tw(t,0,62,i),jw(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new Dy(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(Iw(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return jw(t,1835022),n;function o(){""!==i?(e.push(new zy(new Sy(Sw,i),new Cy(Sw,new Oy(r++)),void 0)),i=""):r++}}(t):function(t,e,n){Iw(t);const i=new Array;for(;1835022!==t.$;)if(Mw(t,1572876)){if(i.push(kw),1835022===t.$)break}else{if(i.push(Tw(t,e,62,-3&n)),!Mw(t,1572876))break;if(1835022===t.$)break}return jw(t,1835022),2&n?new jy(i):(t.R=!1,new Ry(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(Iw(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)Iw(t),jw(t,1572879),i.push(Tw(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;Iw(t),Mw(t,1572879)?i.push(Tw(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(Tw(t,0,450,-3&e)))}}1835018!==t.$&&jw(t,1572876)}return jw(t,1835018),2&e?new Uy(n,i):(t.R=!1,new Py(n,i))}(t,i),e=0;break;case 540714:s=new Ly([t.L]),t.R=!1,Iw(t),e=0;break;case 540715:s=$w(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new Oy(t.L),t.R=!1,Iw(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=Uw[63&t.$],t.R=!1,Iw(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);Iw(t);const n=e,i=Tw(t,0,61,0);return new Fy(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,Iw(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,Iw(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new ky(r,s.ancestor):new Sy(s,r);continue;case 671757:t.R=!0,Iw(t),e=4096,s=new Cy(s,Tw(t,0,62,i)),jw(t,1835022);break;case 671751:for(t.R=!1,Iw(t);1835019!==t.$&&(n.push(Tw(t,0,62,i)),Mw(t,1572876)););jw(t,1835019),s=1024&e?new Ay(r,n,s.ancestor):2048&e?new Ey(s,r,n):new Ty(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new My(o,o,s),Iw(t);break;case 540715:s=$w(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;Iw(t),s=new $y(Uw[63&r],s,Tw(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(Mw(t,1572880)){const n=Tw(t,e,62,i);jw(t,1572879),s=new wy(s,n,Tw(t,e,62,i)),t.R=!1}if(62<n)return s;if(Mw(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new by(s,Tw(t,e,62,i))}if(61<n)return s;for(;Mw(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;Iw(t);const r=new Array;for(;Mw(t,1572879);)r.push(Tw(t,e,62,i));s=new yy(s,n,r)}for(;Mw(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;Iw(t);const r=new Array;for(;Mw(t,1572879);)r.push(Tw(t,e,62,i));s=new my(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function $w(t,e,n,i,s){const r=[t.L];jw(t,540715);const o=[Tw(t,e,62,n)];for(;540714!==(t.$=Lw(t));)r.push(t.L),jw(t,540715),o.push(Tw(t,e,62,n));return r.push(t.L),t.R=!1,s?(Iw(t),new My(r,r,i,o)):(Iw(t),new Ly(r,o))}function Iw(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=Hw[t.O](t)))return;t.$=1572864}function Ow(t){return t.O=t.ip.charCodeAt(++t.index)}function Rw(t,e){let n=t.O;if(!1===e){do{n=Ow(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=Ow(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=Ow(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function Pw(t){let e=!0,n="";for(;96!==Ow(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(yw(Ow(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return Ow(t),t.L=n,e?540714:540715}function Lw(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,Pw(t)}function Mw(t,e){return t.$===e&&(Iw(t),!0)}function jw(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);Iw(t)}const Uw=[bw,ww,xw,kw,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Nw=Hm();Nw.true=2049,Nw.null=2050,Nw.false=2048,Nw.undefined=2051,Nw.$this=3076,Nw.$parent=3078,Nw.in=1640799,Nw.instanceof=1640800,Nw.typeof=34851,Nw.void=34852,Nw.of=1051180;const Bw=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Fw=[48,58];function Vw(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function Dw(t){return e=>(Ow(e),t)}const zw=t=>{throw new Error(`AUR0168:${t.ip}`)};zw.notMapped=!0,Vw(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const qw=new Uint8Array(65535);Vw(qw,null,Bw,1),Vw(qw,null,Fw,1);const Hw=new Array(65535);Hw.fill(zw,0,65535),Vw(Hw,null,[0,33,127,161],(t=>(Ow(t),null))),Vw(Hw,null,Bw,(function(t){for(;qw[Ow(t)];);const e=Nw[t.L=t.P];return void 0===e?1024:e})),Vw(Hw,null,Fw,(t=>Rw(t,!1))),Hw[34]=Hw[39]=t=>function(t){const e=t.O;Ow(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),Ow(t),n=yw(t.O),Ow(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);Ow(t)}const r=t.ip.slice(s,t.index);Ow(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),Hw[96]=t=>Pw(t),Hw[33]=t=>61!==Ow(t)?32809:61!==Ow(t)?1638680:(Ow(t),1638682),Hw[61]=t=>61!==Ow(t)?1048616:61!==Ow(t)?1638679:(Ow(t),1638681),Hw[38]=t=>38!==Ow(t)?1572883:(Ow(t),1638614),Hw[124]=t=>124!==Ow(t)?1572884:(Ow(t),1638549),Hw[46]=t=>Ow(t)<=57&&t.O>=48?Rw(t,!0):16393,Hw[60]=t=>61!==Ow(t)?1638747:(Ow(t),1638749),Hw[62]=t=>61!==Ow(t)?1638748:(Ow(t),1638750),Hw[37]=Dw(1638886),Hw[40]=Dw(671751),Hw[41]=Dw(1835019),Hw[42]=Dw(1638885),Hw[43]=Dw(623009),Hw[44]=Dw(1572876),Hw[45]=Dw(623010),Hw[47]=Dw(1638887),Hw[58]=Dw(1572879),Hw[63]=Dw(1572880),Hw[91]=Dw(671757),Hw[93]=Dw(1835022),Hw[123]=Dw(131080),Hw[125]=Dw(1835018);let Zw=null;const Ww=[];let Kw=!1;function _w(){return Zw}function Qw(t){if(null==t)throw new Error("AUR0206");if(null==Zw)return Zw=t,Ww[0]=Zw,void(Kw=!0);if(Zw===t)throw new Error("AUR0207");Ww.push(t),Zw=t,Kw=!0}function Gw(t){if(null==t)throw new Error("AUR0208");if(Zw!==t)throw new Error("AUR0209");Ww.pop(),Zw=Ww.length>0?Ww[Ww.length-1]:null,Kw=null!=Zw}Object.freeze({get current(){return Zw},get connecting(){return Kw},enter:Qw,exit:Gw,pause:function(){Kw=!1},resume:function(){Kw=!0}});const Xw=Reflect.get,Yw=Object.prototype.toString,Jw=new WeakMap;function tx(t){switch(Yw.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const ex="__raw__";function nx(t){return tx(t)?ix(t):t}function ix(t){var e;return null!==(e=Jw.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?lx:t instanceof Map||t instanceof Set?Rx:ax,n=new Proxy(t,e);return Jw.set(t,n),n}(t)}function sx(t){var e;return null!==(e=t.__raw__)&&void 0!==e?e:t}function rx(t){return tx(t)&&t.__raw__||t}function ox(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const ax={get(t,e,n){if(e===ex)return t;const i=_w();return!Kw||ox(e)||null==i?Xw(t,e,n):(i.observe(t,e),nx(Xw(t,e,n)))}},lx={get(t,e,n){if(e===ex)return t;const i=_w();if(!Kw||ox(e)||null==i)return Xw(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return cx;case"includes":return dx;case"indexOf":return px;case"lastIndexOf":return fx;case"every":return hx;case"filter":return ux;case"find":return vx;case"findIndex":return gx;case"flat":return mx;case"flatMap":return yx;case"join":return bx;case"push":return xx;case"pop":return wx;case"reduce":return Ix;case"reduceRight":return Ox;case"reverse":return Ax;case"shift":return kx;case"unshift":return Sx;case"slice":return $x;case"splice":return Cx;case"some":return Ex;case"sort":return Tx;case"keys":return Fx;case"values":case Symbol.iterator:return Vx;case"entries":return Dx}return i.observe(t,e),nx(Xw(t,e,n))},ownKeys(t){var e;return null===(e=_w())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function cx(t,e){var n;const i=sx(this),s=i.map(((n,i)=>rx(t.call(e,nx(n),i,this))));return null===(n=_w())||void 0===n||n.observeCollection(i),nx(s)}function hx(t,e){var n;const i=sx(this),s=i.every(((n,i)=>t.call(e,nx(n),i,this)));return null===(n=_w())||void 0===n||n.observeCollection(i),s}function ux(t,e){var n;const i=sx(this),s=i.filter(((n,i)=>rx(t.call(e,nx(n),i,this))));return null===(n=_w())||void 0===n||n.observeCollection(i),nx(s)}function dx(t){var e;const n=sx(this),i=n.includes(rx(t));return null===(e=_w())||void 0===e||e.observeCollection(n),i}function px(t){var e;const n=sx(this),i=n.indexOf(rx(t));return null===(e=_w())||void 0===e||e.observeCollection(n),i}function fx(t){var e;const n=sx(this),i=n.lastIndexOf(rx(t));return null===(e=_w())||void 0===e||e.observeCollection(n),i}function gx(t,e){var n;const i=sx(this),s=i.findIndex(((n,i)=>rx(t.call(e,nx(n),i,this))));return null===(n=_w())||void 0===n||n.observeCollection(i),s}function vx(t,e){var n;const i=sx(this),s=i.find(((e,n)=>t(nx(e),n,this)),e);return null===(n=_w())||void 0===n||n.observeCollection(i),nx(s)}function mx(){var t;const e=sx(this);return null===(t=_w())||void 0===t||t.observeCollection(e),nx(e.flat())}function yx(t,e){var n;const i=sx(this);return null===(n=_w())||void 0===n||n.observeCollection(i),ix(i.flatMap(((n,i)=>nx(t.call(e,nx(n),i,this)))))}function bx(t){var e;const n=sx(this);return null===(e=_w())||void 0===e||e.observeCollection(n),n.join(t)}function wx(){return nx(sx(this).pop())}function xx(...t){return sx(this).push(...t)}function kx(){return nx(sx(this).shift())}function Sx(...t){return sx(this).unshift(...t)}function Cx(...t){return nx(sx(this).splice(...t))}function Ax(...t){var e;const n=sx(this),i=n.reverse();return null===(e=_w())||void 0===e||e.observeCollection(n),nx(i)}function Ex(t,e){var n;const i=sx(this),s=i.some(((n,i)=>rx(t.call(e,nx(n),i,this))));return null===(n=_w())||void 0===n||n.observeCollection(i),s}function Tx(t){var e;const n=sx(this),i=n.sort(t);return null===(e=_w())||void 0===e||e.observeCollection(n),nx(i)}function $x(t,e){var n;const i=sx(this);return null===(n=_w())||void 0===n||n.observeCollection(i),ix(i.slice(t,e))}function Ix(t,e){var n;const i=sx(this),s=i.reduce(((e,n,i)=>t(e,nx(n),i,this)),e);return null===(n=_w())||void 0===n||n.observeCollection(i),nx(s)}function Ox(t,e){var n;const i=sx(this),s=i.reduceRight(((e,n,i)=>t(e,nx(n),i,this)),e);return null===(n=_w())||void 0===n||n.observeCollection(i),nx(s)}const Rx={get(t,e,n){if(e===ex)return t;const i=_w();if(!Kw||ox(e)||null==i)return Xw(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Nx;case"delete":return Bx;case"forEach":return Px;case"add":if(t instanceof Set)return Ux;break;case"get":if(t instanceof Map)return Mx;break;case"set":if(t instanceof Map)return jx;break;case"has":return Lx;case"keys":return Fx;case"values":return Vx;case"entries":return Dx;case Symbol.iterator:return t instanceof Map?Dx:Vx}return nx(Xw(t,e,n))}};function Px(t,e){var n;const i=sx(this);return null===(n=_w())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,nx(n),nx(i),this)}))}function Lx(t){var e;const n=sx(this);return null===(e=_w())||void 0===e||e.observeCollection(n),n.has(rx(t))}function Mx(t){var e;const n=sx(this);return null===(e=_w())||void 0===e||e.observeCollection(n),nx(n.get(rx(t)))}function jx(t,e){return nx(sx(this).set(rx(t),rx(e)))}function Ux(t){return nx(sx(this).add(rx(t)))}function Nx(){return nx(sx(this).clear())}function Bx(t){return nx(sx(this).delete(rx(t)))}function Fx(){var t;const e=sx(this);null===(t=_w())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:nx(e),done:i}},[Symbol.iterator](){return this}}}function Vx(){var t;const e=sx(this);null===(t=_w())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:nx(e),done:i}},[Symbol.iterator](){return this}}}function Dx(){var t;const e=sx(this);null===(t=_w())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[nx(e[0]),nx(e[1])],done:i}},[Symbol.iterator](){return this}}}Object.freeze({getProxy:ix,getRaw:sx,wrap:nx,unwrap:rx,rawKey:ex});class zx{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new zx(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,Fm(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!Vm(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){qx=this.ov,this.ov=this.v,this.subs.notify(this.v,qx,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return Qw(this),this.v=rx(this.get.call(this.up?nx(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,Gw(this)}}}let qx;dw(zx),Yy(zx),sb(zx);const Hx=an.createInterface("IDirtyChecker",(t=>t.singleton(Kx))),Zx={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},Wx={persistent:!0};class Kx{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(Zx.disabled)return;if(++this.j<Zx.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(Zx.throw)throw new Error(`AUR0222:${e}`);return new _x(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,Wx))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}Kx.inject=[Zn],sb(Kx);class _x{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}Yy(_x);class Qx{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}let Gx;class Xx{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){Gx=this.ov,this.ov=this.v,this.subs.notify(this.v,Gx,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Fm(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(Fm(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class Yx{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=Vm(n);const s=t[e];this.cb=Vm(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){Gx=this.ov,this.ov=this.v,this.subs.notify(this.v,Gx,this.f)}}Yy(Xx),Yy(Yx),sb(Xx),sb(Yx);const Jx=new class{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}},tk=an.createInterface("IObserverLocator",(t=>t.singleton(ik))),ek=an.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(Jn).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new nk)))));class nk{handles(){return!1}getObserver(){return Jx}getAccessor(){return Jx}}class ik{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):Jx}getArrayObserver(t){return Lb(t)}getMapObserver(t){return ew(t)}getSetObserver(t){return Hb(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new Qx(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return Lb(t).getLengthObserver();break;case"size":if(t instanceof Map)return ew(t).getLengthObserver();if(t instanceof Set)return Hb(t).getLengthObserver();break;default:if(t instanceof Array&&Ee(e))return Lb(t).getIndexObserver(Number(e))}let o=rk(t,e);if(void 0===o){let n=sk(t);for(;null!==n&&(o=rk(n,e),void 0===o);)n=sk(n)}if(void 0!==o&&!Bm.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?zx.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new Xx(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(Fm(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}ik.inject=[Hx,ek];const sk=Object.getPrototypeOf,rk=Object.getOwnPropertyDescriptor;an.createInterface("IObservation",(t=>t.singleton(ok)));class ok{constructor(t){this.oL=t}static get inject(){return[tk]}run(t){const e=new ak(this.oL,t);return e.run(),e}}class ak{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Qw(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,Gw(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}dw(ak);class lk{constructor(t,e,n,i={}){this.router=t,this.name=e,this.connectedCE=n,this.options=i,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}get activeContent(){var t;return null!==(t=this.getNextContent())&&void 0!==t?t:this.getContent()}get connectedScope(){var t;return null===(t=this.activeContent)||void 0===t?void 0:t.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){var t,e;return null!==(e=null===(t=this.connectedCE)||void 0===t?void 0:t.$controller)&&void 0!==e?e:null}get isViewport(){return this instanceof jk}get isViewportScope(){return this instanceof Ik}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){var n;return this.getContent().delete(),null===(n=this.getNextContent())||void 0===n||n.delete(),!0}canUnload(t){return!0}canLoad(t){return!0}unload(t){}load(t){}}class ck{constructor(t,e,n,i,s=Nk.create(""),r=Rk.create({instruction:"",fullStateInstruction:""})){var o,a;this.router=t,this.endpoint=e,this.instruction=s,this.navigation=r,this.completed=!1,this.connectedScope=new zk(t,i,n,this),null!==this.router.rootScope&&(null!==(a=null===(o=this.endpoint.connectedScope)||void 0===o?void 0:o.parent)&&void 0!==a?a:this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){var t;null===(t=this.connectedScope.parent)||void 0===t||t.removeChild(this.connectedScope)}}class hk{constructor(t=null,e="",n=[],i="",s={}){this.match=t,this.matching=e,this.instructions=n,this.remaining=i,this.params=s}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.length>0}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}function uk(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function dk(t,e){return function(n,i){e(n,i,t)}}class pk{static parse(t,e,n,i){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!pk.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const s=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===s.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);i=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),n=!0);const{instructions:o,remaining:a}=pk.parse(t,e,r,!1);s[s.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:n,remaining:r}=pk.parse(t,e,!0,i);s.push(...n),e=r}else if(e.startsWith(t.groupEnd)){n&&(e=e.slice(t.groupEnd.length));let i=0;const r=e.length;for(;i<r;i++){if(e.slice(i,i+t.sibling.length)===t.sibling)return{instructions:s,remaining:e};if(e.slice(i,i+t.groupEnd.length)!==t.groupEnd){if(s.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(i);break}}if(i>=r)return{instructions:s,remaining:e}}else if(e.startsWith(t.sibling)&&!pk.isAdd(t,e)){if(!n)return{instructions:s,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:n,remaining:i}=pk.parseOne(t,e);s.push(n),e=i}return{instructions:s,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const n=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let i,s,r,o,a,l=!0;const c=[t.add,t.clear];for(const s of c)if(e===s){i=e,e="",n.shift(),n.shift(),o=t.viewport;break}if(void 0===i)for(const s of c)if(e.startsWith(`${s}${t.viewport}`)){i=s,e=e.slice(`${s}${t.viewport}`.length),n.shift(),n.shift(),o=t.viewport;break}if(void 0===i&&(({token:o,pos:a}=pk.findNextToken(e,n)),i=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",n.shift(),o===t.parameters&&(({token:o,pos:a}=pk.findNextToken(e,[t.parametersEnd])),s=e.slice(0,a),e=e.slice(a+o.length),({token:o}=pk.findNextToken(e,n)),e=e.slice(o.length)),n.shift()),o===t.viewport&&(({token:o,pos:a}=pk.findNextToken(e,n)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),n.shift(),o===t.noScope&&(l=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(null!=i?i:""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);return{instruction:Nk.create(i,r,s,l),remaining:e}}static findNextToken(t,e){const n={};for(const i of e)t.indexOf(i)>-1&&(n[i]=t.indexOf(i));const i=Math.min(...Object.values(n));for(const t in n)if(n[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}}class fk{constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",n="top-down",i=" > ",s=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=n,this.componentTitleSeparator=i,this.useComponentNames=s,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new fk((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return mk.for(t).title}apply(t={}){var e,n,i,s,r,o;t="string"==typeof t?{appTitle:t}:t,this.appTitle=null!==(e=t.appTitle)&&void 0!==e?e:this.appTitle,this.appTitleSeparator=null!==(n=t.appTitleSeparator)&&void 0!==n?n:this.appTitleSeparator,this.componentTitleOrder=null!==(i=t.componentTitleOrder)&&void 0!==i?i:this.componentTitleOrder,this.componentTitleSeparator=null!==(s=t.componentTitleSeparator)&&void 0!==s?s:this.componentTitleSeparator,this.useComponentNames=null!==(r=t.useComponentNames)&&void 0!==r?r:this.useComponentNames,this.componentPrefix=null!==(o=t.componentPrefix)&&void 0!==o?o:this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class gk{constructor(t="@",e="+",n="/",i="(",s=")",r="!",o="(",a=")",l=",",c="=",h="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=n,this.groupStart=i,this.groupEnd=s,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=l,this.parameterKeySeparator=c,this.add=h,this.clear=u,this.action=d}static create(t={}){return new gk(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return mk.for(t).separators}apply(t={}){var e,n,i,s,r,o,a,l,c,h,u,d,p;this.viewport=null!==(e=t.viewport)&&void 0!==e?e:this.viewport,this.sibling=null!==(n=t.sibling)&&void 0!==n?n:this.sibling,this.scope=null!==(i=t.scope)&&void 0!==i?i:this.scope,this.groupStart=null!==(s=t.groupStart)&&void 0!==s?s:this.groupStart,this.groupEnd=null!==(r=t.groupEnd)&&void 0!==r?r:this.groupEnd,this.noScope=null!==(o=t.noScope)&&void 0!==o?o:this.noScope,this.parameters=null!==(a=t.parameters)&&void 0!==a?a:this.parameters,this.parametersEnd=null!==(l=t.parametersEnd)&&void 0!==l?l:this.parametersEnd,this.parameterSeparator=null!==(c=t.parameterSeparator)&&void 0!==c?c:this.parameterSeparator,this.parameterKeySeparator=null!==(h=t.parameterKeySeparator)&&void 0!==h?h:this.parameterKeySeparator,this.add=null!==(u=t.add)&&void 0!==u?u:this.add,this.clear=null!==(d=t.clear)&&void 0!==d?d:this.clear,this.action=null!==(p=t.action)&&void 0!==p?p:this.action}}class vk{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new vk(t.loadActive,t.viewportNavigating)}static for(t){return mk.for(t).indicators}apply(t={}){var e,n;this.loadActive=null!==(e=t.loadActive)&&void 0!==e?e:this.loadActive,this.viewportNavigating=null!==(n=t.viewportNavigating)&&void 0!==n?n:this.viewportNavigating}}class mk{constructor(t=gk.create(),e=vk.create(),n=!0,i=null,s=!0,r=0,o=!0,a=!0,l=!0,c=fk.create(),h=["guardedUnload","swapped","completed"],u="attach-next-detach-current"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=n,this.basePath=i,this.useHref=s,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=l,this.title=c,this.navigationSyncStates=h,this.swapOrder=u,this.registrationHooks=[]}static create(t={}){return new mk(gk.create(t.separators),vk.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,fk.create(t.title),t.navigationSyncStates,t.swapOrder)}static for(t){return t instanceof TS?t.options:(t=t instanceof tS?t.configuration:t.get(CS)).options}apply(t){var e,n,i,s,r,o,a,l,c;t=null!=t?t:{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=null!==(e=t.useUrlFragmentHash)&&void 0!==e?e:this.useUrlFragmentHash,this.basePath=null!==(n=t.basePath)&&void 0!==n?n:this.basePath,this.useHref=null!==(i=t.useHref)&&void 0!==i?i:this.useHref,this.statefulHistoryLength=null!==(s=t.statefulHistoryLength)&&void 0!==s?s:this.statefulHistoryLength,this.useDirectRouting=null!==(r=t.useDirectRouting)&&void 0!==r?r:this.useDirectRouting,this.useConfiguredRoutes=null!==(o=t.useConfiguredRoutes)&&void 0!==o?o:this.useConfiguredRoutes,this.additiveInstructionDefault=null!==(a=t.additiveInstructionDefault)&&void 0!==a?a:this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=null!==(l=t.navigationSyncStates)&&void 0!==l?l:this.navigationSyncStates,this.swapOrder=null!==(c=t.swapOrder)&&void 0!==c?c:this.swapOrder,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}var yk;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(yk||(yk={}));class bk{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new bk;return e.set(t),e}static parse(t,e,n=!1){if(null==e||0===e.length)return[];const i=gk.for(t),s=i.parameterSeparator,r=i.parameterKeySeparator;if("string"==typeof e){const t=[],i=e.split(s);for(const e of i){let i,s;[i,s]=e.split(r),void 0===s?(s=n?decodeURIComponent(i):i,i=void 0):n&&(i=decodeURIComponent(i),s=decodeURIComponent(s)),t.push({key:i,value:s})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,n=!1){if(!Array.isArray(e)||0===e.length)return"";const i=gk.for(t);return e.map((t=>{const e=void 0!==t.key&&n?encodeURIComponent(t.key):t.key,s=n?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==s?e+i.parameterKeySeparator+s:s})).join(i.parameterSeparator)}static contains(t,e){return Object.keys(e).every((n=>e[n]===t[n]))}parameters(t){return bk.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const n=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==n.length?1===n.length?n[0]:n:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=null!=e?e:[];const n=this.parameters(t),i={};for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const[s]=n.splice(e,1);i[t]=s.value}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const[s]=n.splice(e,1);i[t]=s.value}}for(const t of n.filter((t=>void 0!==t.key)))i[t.key]=t.value;let s=e.length;for(const t of n.filter((t=>void 0===t.key)))i[s++]=t.value;return i}toSortedParameters(t,e){e=e||[];const n=this.parameters(t),i=[];for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const t={...n.splice(e,1)[0]};t.key=void 0,i.push(t)}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const t={...n.splice(e,1)[0]};i.push(t)}else i.push({value:void 0})}const s=n.filter((t=>void 0!==t.key));return s.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),i.push(...s),i.push(...n.filter((t=>void 0===t.key))),i}same(t,e,n){const i=null!==n?n.parameters:[],s=this.toSpecifiedParameters(t,i),r=e.toSpecifiedParameters(t,i);return Object.keys(s).every((t=>s[t]===r[t]))&&Object.keys(r).every((t=>r[t]===s[t]))}}class wk{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new wk;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return Lh.isType(t.Type)}static isType(t){return Lh.isType(t)}static isInstance(t){return function(t){return Wt(t)&&Lh.isType(t.constructor)}(t)}static isAppelation(t){return wk.isName(t)||wk.isType(t)||wk.isInstance(t)}static getName(t){return wk.isName(t)?t:wk.isType(t)?Lh.getDefinition(t).name:wk.getName(t.constructor)}static getType(t){return wk.isName(t)?null:wk.isType(t)?t:t.constructor}static getInstance(t){return wk.isName(t)||wk.isType(t)?null:t}set(t){let e=null,n=null,i=null,s=null,r=null;t instanceof Promise?s=t:wk.isName(t)?e=wk.getName(t):wk.isType(t)?(e=this.getNewName(t),n=wk.getType(t)):wk.isInstance(t)?(e=this.getNewName(wk.getType(t)),n=wk.getType(t),i=wk.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=n,this.instance=i,this.promise=s,this.func=r}resolve(){if(null!==this.func&&this.set(this.func()),this.promise instanceof Promise)return this.promise.then((t=>{if(wk.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const n=e[0];this.set(t[n])}))}get none(){return!this.isName()&&!this.isType()&&!this.isInstance()}isName(){return!!this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t){if(null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(Lh.keyFrom(this.name),!0)){const e=t.getResolver(Lh.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const n=e.getFactory(t);if(n)return n.Type}}}return null}toInstance(t){if(null!==this.instance)return this.instance;if(null!=t){const e=this.isType()?t.get(this.type):t.get(Lh.keyFrom(this.name));return!this.isType()||e instanceof this.type||console.warn("Failed to instantiate",this.type,e),null!=e?e:null}return null}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?wk.getName(t):this.name}}function xk(t,e){const n=[];let i=t.findIndex(e);for(;i>=0;)n.push(t.splice(i,1)[0]),i=t.findIndex(e);return n}function kk(t,e=!1){return t.filter(((t,n,i)=>(e||null!=t)&&i.indexOf(t)===n))}class Sk{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class Ck{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return null==e?void 0:e[0];let s=!1;null===t&&(t=new Ak,s=!0);const r=new Ak(e.shift());return Ck.connect(t,r,null!==(i=null==t?void 0:t.runParallel)&&void 0!==i&&i||s),e.length>0&&Ck.add(r,!1,...e),s?(Ck.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):r}static runParallel(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return[];let s=!1;return null===t?(t=new Ak,s=!0):t=Ck.connect(t,new Ak,!0),Ck.add(t,!0,...e),s&&Ck.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?null!==(i=t.result)&&void 0!==i?i:[]:t}static step(t){if(t instanceof Promise)return Ck.runners.get(t)}static cancel(t){const e=Ck.step(t);void 0!==e&&e.cancel()}static add(t,e,...n){let i=new Ak(n.shift(),e);null!==t&&(i=Ck.connect(t,i,e));const s=i;for(;n.length>0;)i=Ck.connect(i,new Ak(n.shift(),e),!1);return s}static connect(t,e,n){if(n){const n=t.child;t.child=e,e.parent=t,e.next=n,null!==n&&(n.parent=null,n.previous=e)}else{const n=t.next;t.next=e,e.previous=t,e.next=n,null!==n&&(n.previous=e,n.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)Ck.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const n=t.value;Ck.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,Ck.settlePromise(t),t.isDone=!0,t.isDoing=!1;const n=t.nextToDo();null===n||t.isExited?(t.root.doneAll||t.isExited)&&Ck.settlePromise(t.root):Ck.process(n)})).catch((t=>{throw t}))})(t,n)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?Ck.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&Ck.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new Sk,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){var n,i,s,r;if(null!==(i=null===(n=t.finally)||void 0===n?void 0:n.isPending)&&void 0!==i&&i)switch(t.promise=null,e){case"resolve":null===(s=t.finally)||void 0===s||s.resolve(t.result);break;case"reject":null===(r=t.finally)||void 0===r||r.reject(t.result)}}}Ck.runners=new WeakMap,Ck.roots={};class Ak{constructor(t,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+Ak.id++}get isParallelParent(){var t,e;return null!==(e=null===(t=this.child)||void 0===t?void 0:t.runParallel)&&void 0!==e&&e}get result(){var t,e;if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:null===(e=null===(t=this.child)||void 0===t?void 0:t.tail)||void 0===e?void 0:e.result}let n=this.value;for(;n instanceof Ak;)n=n.result;return n}get asValue(){return this.result}get previousValue(){var t,e,n,i;return this.runParallel?null===(n=null===(e=null===(t=this.head.parent)||void 0===t?void 0:t.parent)||void 0===e?void 0:e.previous)||void 0===n?void 0:n.result:null===(i=this.previous)||void 0===i?void 0:i.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){var e,n;return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,null===(e=this.child)||void 0===e||e.cancel(!1),null===(n=this.next)||void 0===n||n.cancel(!1),!0)}exit(t=!0){var e,n;return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,null===(e=this.child)||void 0===e||e.exit(!1),null===(n=this.next)||void 0===n||n.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){var t;let e=this.next;for(;null!==e;){if(!e.isDoing&&!e.isDone)return e;e=e.next}const n=null!==(t=this.head.parent)&&void 0!==t?t:null;return null!==n&&n.done?n.nextOrUp():null}get path(){var t,e;return`${null!==(e=null===(t=this.head.parent)||void 0===t?void 0:t.path)&&void 0!==e?e:""}/${this.name}`}get tree(){let t="",e=this.head,n=e.parent,i="";for(;null!==n;)i=`${n.path}${i}`,n=n.head.parent;do{if(t+=`${i}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){var t,e,n,i;let s=`${this.path}\n`;return s+=null!==(e=null===(t=this.child)||void 0===t?void 0:t.report)&&void 0!==e?e:"",s+=null!==(i=null===(n=this.next)||void 0===n?void 0:n.report)&&void 0!==i?i:"",s}}Ak.id=0;class Ek{constructor(t,e,n,i,s,r,o,a){this.path=t,this.id=e,this.redirectTo=n,this.instructions=i,this.caseSensitive=s,this.title=r,this.reloadBehavior=o,this.data=a}static isConfigured(t){return Cm.hasOwn(Ek.resourceKey,t)||"parameters"in t||"title"in t}static configure(t,e){const n=Ek.create(t,e);return Cm.define(Ek.resourceKey,n,e),e}static getConfiguration(t){var e;const n=null!==(e=Cm.getOwn(Ek.resourceKey,t))&&void 0!==e?e:{};return Array.isArray(t.parameters)&&(n.parameters=t.parameters),"title"in t&&(n.title=t.title),n instanceof Ek?n:Ek.create(n,t)}static create(t,e=null){var n,i,s,r,o,a,l,c,h;null!==e&&(t=Ek.transferTypeToComponent(t,e)),Lh.isType(t)?t=Ek.getConfiguration(t):null===e&&(t={...t});const u=Ek.transferIndividualIntoInstructions(t);Ek.validateRouteConfiguration(u);let d=u.path;return Array.isArray(d)&&(d=d.join(",")),new Ek(null!==(n=u.path)&&void 0!==n?n:"",null!==(s=null!==(i=u.id)&&void 0!==i?i:d)&&void 0!==s?s:null,null!==(r=u.redirectTo)&&void 0!==r?r:null,null!==(o=u.instructions)&&void 0!==o?o:null,null!==(a=u.caseSensitive)&&void 0!==a&&a,null!==(l=u.title)&&void 0!==l?l:null,null!==(c=u.reloadBehavior)&&void 0!==c?c:null,null!==(h=u.data)&&void 0!==h?h:null)}static transferTypeToComponent(t,e){var n;if(Lh.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const i=null!==(n={...t})&&void 0!==n?n:{};if("component"in i||"instructions"in i)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in i||(i.component=e),"path"in i||"redirectTo"in i||(i.path=Lh.getDefinition(e).name),i}static transferIndividualIntoInstructions(t){var e,n,i,s;if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(null!==(e=t.component)&&void 0!==e?e:null)||null!==(null!==(n=t.viewport)&&void 0!==n?n:null)||null!==(null!==(i=t.parameters)&&void 0!==i?i:null)||null!==(null!==(s=t.children)&&void 0!==s?s:null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}Ek.resourceKey=Xe.resource.keyFor("route");const Tk={name:Xe.resource.keyFor("routes"),isConfigured:t=>Cm.hasOwn(Tk.name,t)||"routes"in t,configure(t,e){const n=t.map((t=>Ek.create(t)));return Cm.define(Tk.name,n,e),e},getConfiguration(t){const e=t,n=[],i=Cm.getOwn(Tk.name,t);return Array.isArray(i)&&n.push(...i),Array.isArray(e.routes)&&n.push(...e.routes),n.map((t=>t instanceof Ek?t:Ek.create(t)))}};class $k extends ck{}class Ik extends lk{constructor(t,e,n,i,s,r=null,o={catches:[],source:null}){super(t,e,n),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new $k(t,this,i,s)),this.catches.length>0&&(this.instruction=Nk.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){var t;return null!==(t=this.options.source)&&void 0!==t?t:null}get catches(){var t;let e=null!==(t=this.options.catches)&&void 0!==t?t:[];return"string"==typeof e&&(e=e.split(",")),e}get default(){if(this.catches.length>0)return this.catches[0]}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.instruction)||void 0===t?void 0:t.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`vs:${this.name}[${s}->${r}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new $k(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){Ck.run(null,(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){var n;const i=this.contents.findIndex((e=>e.navigation===t.navigation));let s=this.contents[i];if(this.remove){const t=new $k(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(i,1,t),s.delete(),s=t}s.completed=!0;let r=0;for(let t=0,e=i;t<e&&null!==(n=this.contents[0].navigation.completed)&&void 0!==n&&n;t++)r++;this.contents.splice(0,r),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation));if(this.contents.splice(n,1),this.add){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===Nk.clear(this.router)||t===Nk.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&xk(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){if(null!==this.rootComponentType){const t=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;return Tk.getConfiguration(t)}return null}}class Ok{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class Rk extends class{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}{constructor(t={instruction:"",fullStateInstruction:""}){var e,n,i,s,r,o;super(t),this.navigation=new Ok,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=null!==(e=t.fromBrowser)&&void 0!==e?e:this.fromBrowser,this.origin=null!==(n=t.origin)&&void 0!==n?n:this.origin,this.replacing=null!==(i=t.replacing)&&void 0!==i?i:this.replacing,this.refreshing=null!==(s=t.refreshing)&&void 0!==s?s:this.refreshing,this.untracked=null!==(r=t.untracked)&&void 0!==r?r:this.untracked,this.historyMovement=null!==(o=t.historyMovement)&&void 0!==o?o:this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){var t,e,n;return null!==(t=this.navigation.back)&&void 0!==t&&t||null!==(e=this.navigation.forward)&&void 0!==e&&e||null!==(n=this.navigation.refresh)&&void 0!==n&&n}static create(t={instruction:"",fullStateInstruction:""}){return new Rk(t)}}class Pk{constructor(){this.map=new Map}set(t,e){const n=this.map.get(t);n instanceof Sk&&n.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof Sk&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new Sk;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof Sk?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof Sk)}clone(){const t=new Pk;return t.map=new Map(this.map),t}}class Lk extends ck{constructor(t,e,n,i,s=Nk.create(""),r=Rk.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,n,i,s,r),this.router=t,this.instruction=s,this.navigation=r,this.contentStates=new Pk,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==(null==o?void 0:o.container)||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){var t,e;return this.instruction.route instanceof hk&&null!==(null===(t=this.instruction.route.match)||void 0===t?void 0:t.reloadBehavior)?null===(e=this.instruction.route.match)||void 0===e?void 0:e.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){var e,n;return this.instruction.sameComponent(this.router,t.instruction,!0)&&(null!==(e=this.navigation.query)&&void 0!==e?e:"")===(null!==(n=t.navigation.query)&&void 0!==n?n:"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return vu.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(n){if(""===(null!=e?e:""))throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`);this.instruction.parameters.set([this.instruction.component.name]),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(t){throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`)}}this.contentStates.set("created",void 0),this.contentStates.has("loaded")||!this.instruction.component.instance||this.fromCache&&this.fromHistory||(this.contentController(t).parent=t.controller)}}canLoad(){var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const i=this.instruction.component.instance;if(null==i)return!0;this.contentStates.set("checkedLoad",void 0);const s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"canLoad").map((t=>e=>{const n=t(i,o,this.instruction,this.navigation);return"boolean"==typeof n?(!1===n&&e.exit(),n):"string"==typeof n?(e.exit(),[Nk.create(n,this.endpoint)]):n}));if(0!==a.length){const t=Ck.run(null,...a);if(!0!==t)return!1!==t&&("string"==typeof t?[Nk.create(t,this.endpoint)]:t)}if(null==i.canLoad)return!0;const l=i.canLoad(o,this.instruction,this.navigation);return"boolean"==typeof l?l:"string"==typeof l?[Nk.create(l,this.endpoint)]:l}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=Rk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"canUnload").map((n=>i=>{const s=n(e,this.instruction,t);return"boolean"==typeof s?(!1===s&&i.exit(),s):s}));if(0!==n.length){const t=Ck.run(null,...n);if(!0!==t)return!1!==t&&t}if(!e.canUnload)return!0;const i=e.canUnload(this.instruction,t);if("boolean"!=typeof i&&!(i instanceof Promise))throw new Error(`Method 'canUnload' in component "${this.instruction.component.name}" needs to return true or false or a Promise resolving to true or false.`);return i}load(t){return Ck.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const i=this.instruction.component.instance,s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"load").map((t=>()=>t(i,o,this.instruction,this.navigation)));return 0!==a.length?(null!=i.load&&a.push((()=>i.load(o,this.instruction,this.navigation))),Ck.run(null,...a)):null!=i.load?i.load(o,this.instruction,this.navigation):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=Rk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"unload").map((n=>()=>n(e,this.instruction,t)));return 0!==n.length?(null!=e.unload&&n.push((()=>e.unload(this.instruction,t))),Ck.run(null,...n)):null!=e.unload?e.unload(this.instruction,t):void 0}activateComponent(t,e,n,i,s,r,o){return Ck.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(n)),(()=>{if(this.contentStates.has("activating")||this.contentStates.has("activated"))return;this.contentStates.set("activating",void 0);const t=this.contentController(s);return t.activate(null!=e?e:t,n,i,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,n,i,s,r=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return Ck.run(t,(()=>{if(r&&null!==s.element){const t=Array.from(s.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}this.contentStates.delete("activated"),this.contentStates.delete("activating");const t=this.contentController(s);return t.deactivate(null!=e?e:t,n,i)}))}disposeComponent(t,e,n=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance){if(!n)return this.contentStates.delete("created"),this.contentController(t).dispose();e.push(this)}}freeContent(t,e,n,i,s=!1){return Ck.run(t,(()=>this.unload(n)),(t=>this.deactivateComponent(t,null,e.controller,0,e,s)),(()=>this.disposeComponent(e,i,s)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t)}toComponentInstance(t){return this.instruction.component.none?null:this.instruction.component.toInstance(t)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}getLifecycleHooks(t,e){var n;return(null!==(n=t.$controller.lifecycleHooks[e])&&void 0!==n?n:[]).map((t=>t.instance[e].bind(t.instance)))}}class Mk{constructor(t=!0,e=[],n="",i="",s=!1,r=!1,o=!1,a=!1,l=!1){this.scope=t,this.usedBy=e,this.fallback=i,this.noLink=s,this.noTitle=r,this.stateful=o,this.forceDescription=a,this.noHistory=l,this.default=void 0,this.default=n}static create(t){const e=new Mk;return void 0!==t&&e.apply(t),e}apply(t){var e,n,i,s,r,o,a,l,c;this.scope=null!==(e=t.scope)&&void 0!==e?e:this.scope,this.usedBy=null!==(n="string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)&&void 0!==n?n:this.usedBy,this.default=null!==(i=t.default)&&void 0!==i?i:this.default,this.fallback=null!==(s=t.fallback)&&void 0!==s?s:this.fallback,this.noLink=null!==(r=t.noLink)&&void 0!==r?r:this.noLink,this.noTitle=null!==(o=t.noTitle)&&void 0!==o?o:this.noTitle,this.stateful=null!==(a=t.stateful)&&void 0!==a?a:this.stateful,this.forceDescription=null!==(l=t.forceDescription)&&void 0!==l?l:this.forceDescription,this.noHistory=null!==(c=t.noHistory)&&void 0!==c?c:this.noHistory}}class jk extends lk{constructor(t,e,n,i,s,r){super(t,e,n),this.contents=[],this.forceRemove=!1,this.options=new Mk,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new Lk(t,this,i,s)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){var t;if(1===this.contents.length)return this.contents[0];let e;for(let n=0,i=this.contents.length;n<i&&null!==(t=this.contents[n].completed)&&void 0!==t&&t;n++)e=this.contents[n];return e}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let n=0,i=this.contents.length;n<i&&!(this.contents[n].navigation.timestamp>t);n++)e=this.contents[n];return e}get parentViewport(){let t=this.connectedScope;for(;null!=(null==t?void 0:t.parent);)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.getContent())||void 0===t?void 0:t.instruction.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`v:${this.name}[${s}->${r}]`}setNextContent(t,e){var n;t.endpoint.set(this),this.clear=t.isClear(this.router);const i=this.contents[this.contents.length-1],s=new Lk(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,null!==(n=this.connectedCE)&&void 0!==n?n:null);if(this.contents.push(s),s.fromHistory=!(null===s.componentInstance||!e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>s.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(s),1,t),s.fromCache=!0):this.cache.push(s)}return null!==s.componentInstance&&i.componentInstance===s.componentInstance?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):!i.equalComponent(s)||e.navigation.refresh||"refresh"===i.reloadBehavior?this.transitionAction="swap":"disallow"===i.reloadBehavior?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):"reload"===i.reloadBehavior?(i.reload=!0,s.instruction.component.set(i.componentInstance),s.contentStates=i.contentStates.clone(),s.reload=i.reload,this.transitionAction="reload"):this.options.stateful&&i.equalParameters(s)||i.equalParameters(s)?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){var n,i,s,r,o;e=null!=e?e:{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),null!=this.connectionResolve&&this.connectionResolve());const a=(null!==(i=null===(n=this.scope.parent)||void 0===n?void 0:n.endpoint.getRoutes())&&void 0!==i?i:[]).filter((t=>""===t.path)).length>0;if(null===this.getContent().componentInstance&&null==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance)&&(this.options.default||a)){const t=Nk.parse(this.router,null!==(r=this.options.default)&&void 0!==r?r:"");if(0===t.length&&a){const e=null===(o=this.scope.parent)||void 0===o?void 0:o.findInstructions([Nk.create("")],!1,this.router.configuration.options.useConfiguredRoutes);(null==e?void 0:e.foundConfiguration)&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&Ck.run(t,(t=>{var e,n;if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),Ck.run(t,...e)}return!0}))}async transition(t){var e,n,i,s;const r=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let o=this.parentViewport;null!==o&&"reload"!==o.transitionAction&&"swap"!==o.transitionAction&&(o=null);const a=[e=>{if(this.isActiveNavigation(t))return this.canUnload(e)},e=>{this.isActiveNavigation(t)&&(e.previousValue?this.router.isRestrictedNavigation&&this.getNextContent().createComponent(this.connectedCE,this.options.fallback):t.cancel()),t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==o?t.waitForEndpointState(o,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(e)},e=>{if(this.isActiveNavigation(t)){const n=e.previousValue;if("boolean"!=typeof n)return Ck.run(e,(()=>this.router.load(n,{append:!0})),(e=>this.cancelContentChange(t,e)));if(!n)return e.cancel(),void t.cancel()}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],l=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==o?t.waitForEndpointState(o,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],c=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":c.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":c.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":c.push((e=>Ck.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":c.push((e=>Ck.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}c.push((()=>t.addEndpointState(this,"swapped"))),null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!0),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!0);const h=Ck.run(null,(e=>t.setEndpointStep(this,e.root)),...a,...l,...c,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{var e,n,i,s;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!1),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!1)}));h instanceof Promise&&h.catch((t=>{}))}canUnload(t){return Ck.run(t,(t=>this.getContent().connectedScope.canUnload(t)),(t=>{var e,n;return!!t.previousValue&&this.getContent().canUnload(null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null)}))}canLoad(t){return!!this.clear||Ck.run(t,(()=>this.waitForConnected()),(()=>(this.getNextContent().createComponent(this.connectedCE,this.options.fallback),this.getNextContent().canLoad())))}load(t){if(!this.clear)return this.getNextContent().load(t)}addContent(t,e){return this.activate(t,null,this.connectedController,0,e)}removeContent(t,e){var n;if(this.isEmpty)return;const i=this.router.statefulHistory||null!==(n=this.options.stateful)&&void 0!==n&&n;return Ck.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController,i?0:16)),(()=>i?this.dispose():void 0))}activate(t,e,n,i,s){if(null!==this.activeContent.componentInstance)return Ck.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,n,i,this.connectedCE,(()=>null==s?void 0:s.addEndpointState(this,"bound")),null==s?void 0:s.waitForSyncState("bound"))))}deactivate(t,e,n,i){var s;const r=this.getContent();if(null!=(null==r?void 0:r.componentInstance)&&!r.reload&&r.componentInstance!==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance))return r.deactivateComponent(t,e,n,i,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t){return Ck.run(t,(t=>this.getContent().connectedScope.unload(t)),(()=>{var t,e;return null!=this.getContent().componentInstance?this.getContent().unload(null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.navigation)&&void 0!==e?e:null):void 0}))}dispose(){var t;null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===(null===(t=this.getNextContent())||void 0===t?void 0:t.componentInstance)||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){var n,i,s,r,o;const a=this.contents.findIndex((e=>e.navigation===t.navigation));let l=this.contents[a];const c=this.contents[a-1];if(this.clear){const t=new Lk(this.router,this,this.owningScope,this.scope.hasScope,void 0,l.navigation);this.contents.splice(a,1,t),l.delete(),l=t}else l.reload=!1;c.delete(),l.completed=!0,this.transitionAction="",l.contentStates.delete("checkedUnload"),l.contentStates.delete("checkedLoad"),this.previousViewportState=null;const h=this.router.configuration.options.indicators.viewportNavigating;null===(i=null===(n=this.connectedCE)||void 0===n?void 0:n.setActivity)||void 0===i||i.call(n,h,!1),null===(r=null===(s=this.connectedCE)||void 0===s?void 0:s.setActivity)||void 0===r||r.call(s,t.navigation.navigation,!1);let u=0;for(let t=0,e=a;t<e&&null!==(o=this.contents[0].navigation.completed)&&void 0!==o&&o;t++)u++;this.contents.splice(0,u),xk(this.coordinators,(e=>e===t))}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation)),i=this.contents[n],s=this.contents[n-1];return Ck.run(e,(t=>{if(null!=i)return i.freeContent(t,this.connectedCE,i.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)}),(()=>{var e,n,r,o;this.previousViewportState&&Object.assign(this,this.previousViewportState),null==i||i.delete(),null!==i&&this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="",null==s||s.contentStates.delete("checkedUnload"),null==s||s.contentStates.delete("checkedLoad");const a=this.router.configuration.options.indicators.viewportNavigating;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,a,!1),null===(o=null===(r=this.connectedCE)||void 0===r?void 0:r.setActivity)||void 0===o||o.call(r,t.navigation.navigation,!1),t.removeEndpoint(this),xk(this.coordinators,(e=>e===t))}),(()=>null==e?void 0:e.exit()))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const n=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==n)return Ck.run(t,(t=>(this.forceRemove=!0,n.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,xk(this.historyCache,(t=>t===n))}))}getRoutes(){let t=this.getComponentType();if(null===t)return null;t=t.constructor===t.constructor.constructor?t:t.constructor;const e=Tk.getConfiguration(t);return Array.isArray(e)?e:null}getTitle(t){var e,n;if(this.options.noTitle)return"";const i=this.getComponentType();if(null===i)return"";let s="";const r=i.title;if(void 0!==r)if("string"==typeof r)s=r;else{const e=this.getComponentInstance();s=r.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=null!==(e=this.getContentInstruction().component.name)&&void 0!==e?e:"";const i=null!==(n=this.router.configuration.options.title.componentPrefix)&&void 0!==n?n:"";t.startsWith(i)&&(t=t.slice(i.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){var t;let e=null!==(t=this.getContentInstruction().component.type)&&void 0!==t?t:null;return null===e&&(e=Lh.for(this.connectedCE.element).container.componentType),null!=e?e:null}getComponentInstance(){var t;return null!==(t=this.getContentInstruction().component.instance)&&void 0!==t?t:null}getContentInstruction(){var t,e,n;return null!==(n=null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.instruction)&&void 0!==e?e:this.getContent().instruction)&&void 0!==n?n:null}clearState(){this.options=Mk.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new Lk(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class Uk{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof jk?"Viewport":this.instance instanceof Ik?"ViewportScope":null}static create(t){const e=new Uk;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof lk}static getName(t){return Uk.isName(t)?t:t?t.name:null}static getInstance(t){return Uk.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class Nk{constructor(t,e,n){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.component=wk.create(t),this.endpoint=Uk.create(e),this.parameters=bk.create(n)}static create(t,e,n,i=!0,s=null){const r=new Nk(t,e,n);return r.ownsScope=i,r.nextScopeInstructions=s,r}static createClear(t,e){return Nk.create(Nk.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const n=[];for(const i of e)if("string"==typeof i)n.push(...Nk.parse(t,i));else if(i instanceof Nk)n.push(i);else if(i instanceof Promise)n.push(Nk.create(i));else if(wk.isAppelation(i))n.push(Nk.create(i));else if(wk.isDefinition(i))n.push(Nk.create(i.Type));else if("component"in i){const e=i,s=Nk.create(e.component,e.viewport,e.parameters);void 0!==e.children&&null!==e.children&&(s.nextScopeInstructions=Nk.from(t,e.children)),n.push(s)}else if("object"==typeof i&&null!==i){const t=Lh.define(i);n.push(Nk.create(t))}else n.push(Nk.create(i));return n}static clear(t){return gk.for(t).clear}static add(t){return gk.for(t).add}static parse(t,e){const n=gk.for(t);let i="";const s=/^[./]+/.exec(e);Array.isArray(s)&&s.length>0&&(i=s[0],e=e.slice(i.length));const r=pk.parse(n,e,!0,!0).instructions;for(const t of r)t.scopeModifier=i;return r}static stringify(t,e,n=!1,i=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,n,i))).filter((t=>t.length>0)).join(gk.for(t).sibling)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>Nk.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const n of t)e.push(n),n.hasNextScopeInstructions&&e.push(...Nk.flat(n.nextScopeInstructions));return e}static clone(t,e=!1,n=!1){return t.map((t=>t.clone(e,n)))}static contains(t,e,n,i){return n.every((n=>n.isIn(t,e,i)))}get viewport(){return this.endpoint.instance instanceof jk||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof Ik||null===this.endpoint.endpointType?this.endpoint:null}get previous(){var t,e;return null===(e=null===(t=this.endpoint.instance)||void 0===t?void 0:t.getContent())||void 0===e?void 0:e.instruction}isAdd(t){return this.component.name===gk.for(t).add}isClear(t){return this.component.name===gk.for(t).clear}isAddAll(t){var e,n;return this.isAdd(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}isClearAll(t){var e,n;return this.isClear(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}get hasNextScopeInstructions(){var t,e;return(null!==(e=null===(t=this.nextScopeInstructions)||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0}typeParameters(t){var e,n;return this.parameters.toSpecifiedParameters(t,null!==(n=null===(e=this.component.type)||void 0===e?void 0:e.parameters)&&void 0!==n?n:[])}sameComponent(t,e,n=!1,i=!1){return!(n&&!this.sameParameters(t,e,i))&&this.component.same(e.component,i)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,n=!1){return!!this.component.same(e.component,n)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,n=!1){var i,s,r,o,a;const l=gk.for(t);let c=e,h=!1;if(n){const t=null!==(s=null===(i=this.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==(r=null==t?void 0:t.options.noLink)&&void 0!==r&&r)return"";this.needsEndpointDescribed||null!==(o=null==t?void 0:t.options.forceDescription)&&void 0!==o&&o&&null==(null===(a=this.viewportScope)||void 0===a?void 0:a.instance)||(c=!0),(null==t?void 0:t.options.fallback)===this.component.name&&(h=!0),(null==t?void 0:t.options.default)===this.component.name&&(h=!0)}const u=this.nextScopeInstructions;let d=this.scopeModifier;if(null!==this.route){if(!this.routeStart)return Array.isArray(u)?Nk.stringify(t,u,e,n):"";const i=this.route.matching;d+=i.endsWith(l.scope)?i.slice(0,-l.scope.length):i}else d+=this.stringifyShallow(t,c,h);if(Array.isArray(u)&&u.length>0){const i=Nk.stringify(t,u,e,n);i.length>0&&(d+=l.scope,d+=1===u.length?i:`${l.groupStart}${i}${l.groupEnd}`)}return d}clone(t=!1,e=!1,n=!1){var i,s,r,o,a,l;const c=Nk.create(null!==(r=null!==(s=null!==(i=this.component.func)&&void 0!==i?i:this.component.promise)&&void 0!==s?s:this.component.type)&&void 0!==r?r:this.component.name,this.endpoint.name,null!==this.parameters.typedParameters?this.parameters.typedParameters:void 0);return t&&(c.component.set(null!==(a=null!==(o=this.component.instance)&&void 0!==o?o:this.component.type)&&void 0!==a?a:this.component.name),c.endpoint.set(null!==(l=this.endpoint.instance)&&void 0!==l?l:this.endpoint.name)),c.component.name=this.component.name,c.needsEndpointDescribed=this.needsEndpointDescribed,c.route=this.route,c.routeStart=this.routeStart,c.default=this.default,e&&(c.scopeModifier=this.scopeModifier),c.scope=t?this.scope:null,this.hasNextScopeInstructions&&!n&&(c.nextScopeInstructions=Nk.clone(this.nextScopeInstructions,t,e)),c}isIn(t,e,n){const i=e.filter((e=>{var n,i;if(!e.sameComponent(t,this))return!1;const s=null!==(n=e.component.type)&&void 0!==n?n:this.component.type,r=null!==(i=this.component.type)&&void 0!==i?i:e.component.type,o=e.parameters.toSpecifiedParameters(t,null==s?void 0:s.parameters),a=this.parameters.toSpecifiedParameters(t,null==r?void 0:r.parameters);return!!bk.contains(o,a)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===i.length||n&&this.hasNextScopeInstructions&&!i.some((e=>{var i;return Nk.contains(t,null!==(i=e.nextScopeInstructions)&&void 0!==i?i:[],this.nextScopeInstructions,n)})))}getTitle(t){var e;if(null!==this.route){const n=null===(e=this.route.match)||void 0===e?void 0:e.title;if(null!=n)return this.routeStart?"string"==typeof n?n:n(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){var t,e,n;return{component:null!==(t=this.component.name)&&void 0!==t?t:void 0,viewport:null!==(e=this.endpoint.name)&&void 0!==e?e:void 0,parameters:null!==(n=this.parameters.parametersRecord)&&void 0!==n?n:void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,n=!1){var i;const s=gk.for(t);let r=n?"":null!==(i=this.component.name)&&void 0!==i?i:"";const o=this.component.type?this.component.type.parameters:null,a=bk.stringify(t,this.parameters.toSortedParameters(t,o));return a.length>0&&(r+=n?a:`${s.parameters}${a}${s.parametersEnd}`),null==this.endpoint.name||e||(r+=`${s.viewport}${this.endpoint.name}`),this.ownsScope||(r+=s.noScope),r||""}}class Bk{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new Bk(Bk.eventName,t)}}Bk.eventName="au:router:navigation-navigate";let Fk=class{constructor(t,e){this.ea=t,this.container=e,this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=Rk.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.lastNavigationIndex=-1}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){var e,n,i,s;t instanceof Rk||(t=Rk.create(t));const r=new Ok;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?r.refresh=!0:(r.first=!0,r.new=!0,this.lastNavigationIndex=0,this.navigations=[Rk.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||null!==(e=t.replacing)&&void 0!==e&&e||null!==(n=t.refreshing)&&void 0!==n&&n?null!==(i=t.refreshing)&&void 0!==i&&i||r.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):null!==(s=t.replacing)&&void 0!==s&&s?(r.replace=!0,r.new=!0,t.index=this.lastNavigationIndex):(r.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?r.forward=!0:t.historyMovement<0&&(r.back=!0)),t.navigation=r,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new Sk,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){var n,i,s,r,o,a,l;if(null!==(n=t.untracked)&&void 0!==n&&n)null!==(i=t.fromBrowser)&&void 0!==i&&i&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(null!==(s=t.replacing)&&void 0!==s&&s)0===(null!==(r=t.historyMovement)&&void 0!==r?r:0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const n=t.index;if(e&&(this.navigations=this.navigations.slice(0,n)),this.navigations[n]=t,(null!==(o=this.options.statefulHistoryLength)&&void 0!==o?o:0)>0){const t=this.navigations.length-(null!==(a=this.options.statefulHistoryLength)&&void 0!==a?a:0);for(const e of this.navigations.slice(n))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,n))}await this.saveState(t.index,!(null!==(l=t.fromBrowser)&&void 0!==l&&l))}}async cancel(t){var e,n,i;null!=this.options.store&&((null===(e=t.navigation)||void 0===e?void 0:e.new)?null!==(n=t.fromBrowser)&&void 0!==n&&n&&await this.options.store.popNavigatorState():0!==(null!==(i=t.historyMovement)&&void 0!==i?i:0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const n=this.navigations[e];return this.navigate(n)}getState(){var t,e;const n=null!=this.options.store?{...this.options.store.state}:{};return{navigations:null!==(t=null==n?void 0:n.navigations)&&void 0!==t?t:[],navigationIndex:null!==(e=null==n?void 0:n.navigationIndex)&&void 0!==e?e:-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>Rk.create(t))),this.lastNavigationIndex=e}async saveState(t,e){var n,i,s,r,o;for(let t=0;t<this.navigations.length;t++)this.navigations[t]=Rk.create(this.navigations[t].toStoredNavigation());if((null!==(n=this.options.statefulHistoryLength)&&void 0!==n?n:0)>0){const t=this.navigations.length-(null!==(i=this.options.statefulHistoryLength)&&void 0!==i?i:0);for(let e=0;e<t;e++){const n=this.navigations[e];"string"==typeof n.instruction&&"string"==typeof n.fullStateInstruction||await this.serializeNavigation(n,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const a={navigations:(null!==(s=this.navigations)&&void 0!==s?s:[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?null===(o=null===(r=this.options)||void 0===r?void 0:r.store)||void 0===o?void 0:o.pushNavigatorState(a):this.options.store.replaceNavigatorState(a)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(Bk.eventName,Bk.create(t))}toStoreableNavigation(t){const e=t instanceof Rk?t.toStoredNavigation():t;return e.instruction=Nk.stringify(this.container,e.instruction),e.fullStateInstruction=Nk.stringify(this.container,e.fullStateInstruction),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let n=[];for(const t of e)"string"!=typeof t.instruction&&n.push(...Nk.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&n.push(...Nk.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));n=kk(n);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=Nk.stringify(this.container,t.fullStateInstruction)),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=Nk.stringify(this.container,t.instruction)),i=i.filter(((t,e,n)=>null!=t.component.instance&&n.indexOf(t)===e));const s=[];for(const t of i)await this.freeInstructionComponents(t,n,s)}freeInstructionComponents(t,e,n){var i,s;const r=t.component.instance,o=null!==(s=null===(i=t.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==r&&null!==o&&!n.some((t=>t===r))){if(!e.some((t=>t===r)))return Ck.run(null,(t=>o.freeContent(t,r)),(()=>{n.push(r)}));if(t.hasNextScopeInstructions)for(const i of t.nextScopeInstructions)return this.freeInstructionComponents(i,e,n)}}};Fk=uk([dk(0,vi),dk(1,hn)],Fk);class Vk extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){xk(this,(e=>e===t))}}class Dk{static matchEndpoints(t,e,n,i=!1){const s=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!n.some((e=>t===e.endpoint.instance)))),o=new Vk(...e.slice());let a=null;for(Dk.matchKnownEndpoints(t.router,"ViewportScope",o,r,s,!1),i||Dk.matchKnownEndpoints(t.router,"Viewport",o,r,s,!1),Dk.matchViewportScopeSegment(t.router,t,o,r,s);null!==(a=o.next());)a.needsEndpointDescribed=!0;return Dk.matchViewportConfiguration(o,r,s),i||Dk.matchSpecifiedViewport(o,r,s,!1),Dk.matchLastViewport(o,r,s),i&&Dk.matchSpecifiedViewport(o,r,s,!1),{matchedInstructions:s,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,n,i,s,r=!1){let o;for(;null!==(o=n.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(Dk.matchEndpoint(o,o.endpoint.instance,r),s.push(o),xk(i,(t=>t===o.endpoint.instance)),n.removeCurrent())}static matchViewportScopeSegment(t,e,n,i,s){let r;for(;null!==(r=n.next());)for(let o of i)if(o instanceof Ik&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let n=i.find((t=>t instanceof Ik&&t.name===o.name));if(void 0===n||r.isAdd(t)){const t=o.addSourceItem();n=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=n}Dk.matchEndpoint(r,o,!1),s.push(r),xk(i,(t=>t===r.endpoint.instance)),n.removeCurrent();break}}static matchViewportConfiguration(t,e,n){let i;for(;null!==(i=t.next());)for(const s of e)if(s instanceof jk&&(null==s?void 0:s.wantComponent(i.component.name))){Dk.matchEndpoint(i,s,!0),n.push(i),xk(e,(t=>t===i.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,n,i){var s;let r;for(;null!==(r=t.next());){let o=r.endpoint.instance;if(null==o){const t=r.endpoint.name;if(0===(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0))continue;for(const n of e)if(n instanceof jk&&t===n.name){o=n;break}}(null==o?void 0:o.acceptComponent(r.component.name))&&(Dk.matchEndpoint(r,o,i),n.push(r),xk(e,(t=>t===r.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,n){let i;for(;null!==(i=t.next());){const s=[];for(const t of e)t instanceof jk&&t.acceptComponent(i.component.name)&&s.push(t);if(1===s.length){const r=s[0];Dk.matchEndpoint(i,r,!0),n.push(i),xk(e,(t=>t===i.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,n){t.endpoint.set(e),n&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof jk?e.scope:e.scope.scope)}))}}class zk{constructor(t,e,n,i){this.router=t,this.hasScope=e,this.owningScope=n,this.endpointContent=i,this.id=-1,this.parent=null,this.children=[],this.path=null,this.id=++zk.lastId,this.owningScope=null!=n?n:this}static for(t){var e;if(null==t)return null;if(t instanceof zk||t instanceof jk||t instanceof Ik)return t.scope;let n;if("res"in t)n=t;else if("container"in t)n=t.container;else if("$controller"in t)n=t.$controller.container;else{const e=Lh.for(t,{searchParents:!0});n=null==e?void 0:e.container}if(null==n)return null;const i=n.has(tS.closestEndpointKey,!0)?n.get(tS.closestEndpointKey):null;return null!==(e=null==i?void 0:i.scope)&&void 0!==e?e:null}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof jk}get isViewportScope(){return this.endpoint instanceof Ik}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const n=t.indexOf(e);t.splice(n,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const n=e.indexOf(t);e.splice(n,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,n,i=""){var s,r,o,a;const l=this.router,c=l.configuration.options,h=t.filter((t=>null==t.route));if(h.length>0){const e=this.findInstructions(h,c.useDirectRouting,c.useConfiguredRoutes);!h.some((t=>!t.component.none))||e.foundConfiguration||e.foundInstructions||l.unknownRoute(Nk.stringify(l,h)),t=[...t.filter((t=>null!=t.route)),...e.instructions],t.some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(i=(null!=i?i:"")+e.matching)}const u=t.filter((t=>t.component.isFunction()||t.component.isPromise()));u.length>0&&await Promise.all(u.map((t=>t.component.resolve()))),c.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let d=[];({clearEndpoints:d,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(l))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;const p=[];let f=[],{matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(t,f),m=100;do{m--||l.unresolvedInstructionsError(e,v);const c=[],h=g.map((t=>t.endpoint.instance));g.push(...d.filter((t=>!h.includes(t))).map((t=>Nk.createClear(l,t))));const u=await Gk.invokeBeforeNavigation(g,e);if(!1===u)return l.cancelNavigation(e,n),[];if(!0!==u&&u!==g){const t=Nk.flat(g);v=v.filter((e=>!t.includes(e))),g=u}for(const t of g){const o=t.endpoint.instance;if(null!==o){const a=o.setNextContent(t,e);"skip"!==a&&(c.push(o),n.addEndpoint(o));const h=[o];if("swap"===a&&h.push(...o.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),xk(d,(t=>h.includes(t))),xk(g,(e=>e!==t&&e.isClear(l)&&h.includes(e.endpoint.instance))),!t.isClear(l)&&(null===(r=null===(s=t.scope)||void 0===s?void 0:s.parent)||void 0===r?void 0:r.isViewportScope)&&(xk(d,(e=>e===t.scope.parent.endpoint)),xk(g,(e=>e!==t&&e.isClear(l)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==a&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=o.scope,e.endpoint.instance=null;"skip"!==a||t.hasNextScopeInstructions||p.push(...await o.scope.processInstructions([],e,n,i))}}const y=g.filter((t=>{var e;return"skip"===(null===(e=t.endpoint.instance)||void 0===e?void 0:e.transitionAction)})),b=y.filter((t=>t.hasNextScopeInstructions));if((0===y.length||0===b.length)&&(l.isRestrictedNavigation||n.finalEndpoint(),n.run(),n.hasAllEndpoints)){const t=n.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(n.cancelled)return l.cancelNavigation(e,n),[];for(const t of c)p.every((e=>e!==t))&&p.push(t);if(f.push(...g.splice(0)),v.length>0&&({matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(v,f)),!l.isRestrictedNavigation&&(g.length>0||v.length>0)&&n.running){const t=n.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===g.length&&0===v.length){const s=[];for(const r of t){if(!r.hasNextScopeInstructions)continue;const t=null!==(a=null===(o=r.endpoint.instance)||void 0===o?void 0:o.scope)&&void 0!==a?a:r.endpoint.scope;s.push(t.processInstructions(r.nextScopeInstructions,e,n,i))}p.push(...(await Promise.all(s)).flat())}if(e.useFullStateInstruction&&(n.appendedInstructions=n.appendedInstructions.filter((t=>!t.default))),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v)),0===g.length&&0===v.length){const t=f.map((t=>{var e,n;return null===(n=(null===(e=t.endpoint.instance)||void 0===e?void 0:e.connectedCE).pendingPromise)||void 0===n?void 0:n.promise})).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v))):g=d.map((t=>Nk.createClear(l,t)))}const w=g.filter((t=>t.component.isFunction()||t.component.isPromise()));w.length>0&&await Promise.all(w.map((t=>t.component.resolve())))}while(g.length>0||v.length>0);return p}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.router.configuration.options.useConfiguredRoutes&&this.router.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.router.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const n=Nk.create(Nk.clear(e));return n.scope=this,[n,...t]}return t}getClearAllEndpoints(t){const e=this.router;let n=[];return t.some((t=>{var n;return(null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e)}))&&(n=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>{var n;return!((null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e))}))),{clearEndpoints:n,instructions:t}}findInstructions(t,e,n){var i,s;const r=this.router;let o=new hk;if(n&&!Nk.containsSiblings(r,t)){let n=t.filter((t=>t.isClear(r)||t.isClearAll(r)));const a=t.filter((t=>!t.isClear(r)&&!t.isClearAll(r)));if(a.length>0)for(const l of a){const c=this.findMatchingRoute(Nk.stringify(r,a));if(null!==(i=null==c?void 0:c.foundConfiguration)&&void 0!==i&&i)o=c,o.instructions=[...n,...o.instructions],n=[];else{if(!e)throw new Error(`No route found for: ${Nk.stringify(r,t)}!`);o.instructions=[...n,...o.instructions,l],n=[],o.remaining=Nk.stringify(r,null!==(s=l.nextScopeInstructions)&&void 0!==s?s:[])}}else o.instructions=[...n]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${Nk.stringify(r,t)}!`);o.instructions.push(...t)}o.instructions=o.instructions.filter((t=>""!==t.component.name));for(const t of o.instructions)null===t.scope&&(t.scope=this);return o}matchEndpoints(t,e,n=!1){const i=[],s=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)===this})),r=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)!==this})),{matchedInstructions:o,remainingInstructions:a}=Dk.matchEndpoints(this,s,e,n);return i.push(...o),r.push(...a),{matchedInstructions:i,remainingInstructions:r}}addEndpoint(t,e,n,i={}){var s,r,o,a;let l=null!==(r=null===(s=this.getOwnedScopes().find((n=>n.type===t&&n.endpoint.name===e)))||void 0===s?void 0:s.endpoint)&&void 0!==r?r:null;return null!=n&&null!=(null==l?void 0:l.connectedCE)&&l.connectedCE!==n&&(l=null!==(a=null===(o=this.getOwnedScopes(!0).find((i=>i.type===t&&i.endpoint.name===e&&i.endpoint.connectedCE===n)))||void 0===o?void 0:o.endpoint)&&void 0!==a?a:null),null==l&&(l="Viewport"===t?new jk(this.router,e,n,this.scope,!!i.scope,i):new Ik(this.router,e,n,this.scope,!0,null,i),this.addChild(l.connectedScope)),null!=n&&l.setConnectedCE(n,i),l}removeEndpoint(t,e,n){return!(null===(null!=n?n:null)&&!e.removeEndpoint(t,n)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const n of e.slice())e.push(...n.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const n of e.slice())e.push(...n.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const n of e.slice())if(n.passThroughScope){const i=e.indexOf(n);e.splice(i,1,...n.getOwnedRoutingScopes(t))}return kk(e)}getRoutingInstructions(t){var e;const n=kk(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),i=[];for(const s of n){const n=s.instruction.clone(!0,!1,!1);""!==(null!==(e=n.component.name)&&void 0!==e?e:"")&&(n.nextScopeInstructions=s.connectedScope.getRoutingInstructions(t),i.push(n))}return i}canUnload(t){return Ck.run(t,(t=>Ck.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.canUnload(e):e=>t.canUnload(e))))),(t=>t.previousValue.every((t=>t))))}unload(t){return Ck.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.unload(e):e=>t.unload(e))))}matchScope(t,e=!1){const n=[];for(const i of t)i.scope===this?n.push(i):e&&i.hasNextScopeInstructions&&n.push(...this.matchScope(i.nextScopeInstructions,e));return n}findMatchingRoute(t){if(this.isViewportScope&&!this.passThroughScope)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());if(this.isViewport)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());for(const e of this.enabledChildren){const n=e.findMatchingRoute(t);if(null!==n)return n}return null}findMatchingRouteInRoutes(t,e){var n,i,s;if(!Array.isArray(e))return null;e=e.map((t=>this.ensureProperRoute(t)));const r=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const n of e)r.push({...t,path:n,handler:t}),""!==n&&r.push({...t,path:`${n}/*remainingPath`,handler:t})}const o=new hk;(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const a=e.find((e=>e.id===t));let l={params:{},endpoint:{}};if(null!=a)l.endpoint={route:{handler:a}};else{const e=new class{constructor(){this.rootState=new Pm(null,null,""),this.cache=new Map}add(t){if(t instanceof Array)for(const e of t)this.$add(e);else this.$add(t);this.cache.clear()}$add(t){const e=t.path,n=new Am(t.path,!0===t.caseSensitive,t.handler),i=""===e?[""]:e.split("/").filter(Lm),s=[];let r=this.rootState;for(const t of i)switch(r=r.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),n=e?t.slice(1,-1):t.slice(1);s.push(n),r=new Um(n,e).appendTo(r);break}case"*":{const e=t.slice(1);s.push(e),r=new Nm(e).appendTo(r);break}default:r=new jm(t,n.caseSensitive).appendTo(r)}const o=new Em(n,s);r.setEndpoint(o)}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new Rm(this.rootState);for(let n=0,i=t.length;n<i;++n){const i=t.charAt(n);if(e.advance(i),e.isEmpty)return null}const n=e.getSolution();if(null===n)return null;const{endpoint:i}=n,s=n.getParams();return new Tm(i,s)}};e.add(r),l=e.recognize(t)}if(null!=l){o.match=l.endpoint.route.handler,o.matching=t;const r={...l.params};if(null!=r.remainingPath&&(o.remaining=r.remainingPath,Reflect.deleteProperty(r,"remainingPath"),o.matching=o.matching.slice(0,o.matching.indexOf(o.remaining))),o.params=r,null!=(null===(n=o.match)||void 0===n?void 0:n.redirectTo)){let t=null===(i=o.match)||void 0===i?void 0:i.redirectTo;return(null!==(s=o.remaining)&&void 0!==s?s:"").length>0&&(t+=`/${o.remaining}`),this.findMatchingRouteInRoutes(t,e)}}if(o.foundConfiguration){o.instructions=Nk.clone(o.match.instructions,!1,!0);const t=o.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(o.params),e.route=o,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}o.instructions.length>0&&(o.instructions[0].routeStart=!0);const e=Nk.parse(this.router,o.remaining);if(e.length>0){let t=o.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return o}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=Nk.from(this.router,t.instructions)),t}}zk.lastId=0;class qk{constructor(t,e,n=0){this.taskQueue=t,this.item=e,this.cost=n,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class Hk{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{var e;null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=null!==(e=this.processing.cost)&&void 0!==e?e:0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const n=Array.isArray(t),i=n?t:[t],s=i.map(((t,n)=>Array.isArray(e)?e[n]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of i)r.push(t instanceof qk?t:this.createQueueTask(t,s.shift()));return this.pending.push(...r),this.dequeue(),n?r:r[0]}createQueueTask(t,e){return new qk(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,n){e(n),this.processing=null,this.dequeue()}}let Zk=class{constructor(t,e,n,i,s){this.platform=t,this.window=e,this.history=n,this.location=i,this.ea=s,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls=new Hk}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){var t,e;const{pathname:n,search:i,hash:s}=this.location,r=null!==(t=this.options.useUrlFragmentHash)&&void 0!==t&&t?s.slice(1):`${n}${i}`,o=null!==(e=this.options.useUrlFragmentHash)&&void 0!==e&&e?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new Wk(n,i.slice(1),o,r)}async go(t,e=!1){const n=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const i=n,s=e;this.forwardState({eventTask:i,suppressPopstate:s}),t.resolve()},e=>{const n=this.history,i=t;n.go(i),e.resolve()}],[0,1]),n.wait()}async pushNavigatorState(t){const{title:e,path:n}=t.navigations[t.navigationIndex],i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((s=>{const r=this.history,o=t,a=e||"",l=`${i}${n}`;try{r.pushState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,l),this.setTitle(a)}s.resolve()}),1).wait()}async replaceNavigatorState(t,e,n){const i=t.navigations[t.navigationIndex];null!=e||(e=i.title),null!=n||(n=i.path);const s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((i=>{const r=this.history,o=t,a=e||"",l=`${s}${n}`;try{r.replaceState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,l),this.setTitle(a)}i.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const n=t;await this.popState(n),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:n}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async i=>{n||this.notifySubscribers(t),null!==e&&await e.execute(),i.resolve()}),1)}notifySubscribers(t){this.ea.publish(Kk.eventName,Kk.create(this.viewerState,t,this.history.state))}async popState(t){var e,n;await this.go(-1,!0);const i=this.history.state,s=null===(e=null==i?void 0:i.navigations)||void 0===e?void 0:e[null!==(n=null==i?void 0:i.navigationIndex)&&void 0!==n?n:0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(i)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,n){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${n}`)}}};Zk=uk([dk(0,gc),dk(1,rd),dk(2,ad),dk(3,od),dk(4,vi)],Zk);class Wk{constructor(t,e,n,i){this.path=t,this.query=e,this.hash=n,this.instruction=i}}class Kk{constructor(t,e,n,i){this.eventName=t,this.viewerState=e,this.event=n,this.state=i}static create(t,e,n){return new Kk(Kk.eventName,t,e,n)}}Kk.eventName="au:router:navigation-state-change";class _k{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class Qk{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,n){const i=new Qk(t,e);return n.syncStates.forEach((t=>i.addSyncState(t))),i}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new Sk;this.syncStates.set(t,e)}addEndpoint(t){let e=this.entities.find((e=>e.endpoint===t));return void 0!==e||(e=new _k(t),this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this)),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&xk(this.entities,(t=>t===e))}setEndpointStep(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t)),n.step=e}addEndpointState(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t));const i=n.states.get(e);i instanceof Sk&&i.resolve(),n.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const n=this.syncStates.get(t);if(void 0!==n){if(null!==e){const i=this.entities.find((t=>t.endpoint===e));if(null===(null==i?void 0:i.syncPromise)&&n.isPending)return i.syncingState=t,i.syncPromise=new Sk,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),i.syncPromise.promise}return n.isPending?n.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let n=this.entities.find((e=>e.endpoint===t));if(null==n&&(n=this.addEndpoint(t)),n.hasReachedState(e))return;let i=n.states.get(e);return null==i&&(i=new Sk,n.states.set(e,i)),i.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0}cancel(){this.cancelled=!0,this.entities.forEach((t=>{var e,n;const i=t.endpoint.cancelContentChange(this,null!==(n=null===(e=t.step)||void 0===e?void 0:e.current)&&void 0!==n?n:null);i instanceof Promise&&i.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{var t;null===(t=this.navigation.process)||void 0===t||t.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,n){let i=[...this.appendedInstructions];t=[...t],e=[...e],n=[...n];const s=i.filter((t=>!t.default)),r=i.filter((t=>t.default));for(i=s.length>0?[...s]:[...r];i.length>0;){const s=i.shift();xk(this.appendedInstructions,(t=>t===s));const r=e.some((t=>t.sameEndpoint(s,!0))),o=t.find((t=>t.sameEndpoint(s,!0))),a=n.find((t=>t.sameEndpoint(s,!0)));s.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&xk(t,(t=>t===o)),void 0!==a&&xk(n,(t=>t===a)),null!==s.endpoint.instance?t.push(s):n.push(s))}return{matchedInstructions:t,earlierMatchedInstructions:e,remainingInstructions:n}}checkSyncState(t){var e;const n=this.syncStates.get(t);if(void 0!==n&&this.hasAllEndpoints&&n.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const n of this.entities)n.syncingState===t&&(null===(e=n.syncPromise)||void 0===e||e.resolve(),n.syncPromise=null,n.syncingState=null);n.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class Gk{constructor(t,e,n){var i,s;this.hook=t,this.id=n,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of null!==(i=e.include)&&void 0!==i?i:[])this.includeTargets.push(new Xk(t));for(const t of null!==(s=e.exclude)&&void 0!==s?s:[])this.excludeTargets.push(new Xk(t))}static add(t,e){const n=new Gk(t,null!=e?e:{},++this.lastIdentity);return this.hooks[n.type].push(n),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const n=this.hooks[e].findIndex((e=>e.id===t));n>=0&&this.hooks[e].splice(n,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,n){let i=n;for(const s of this.hooks[t])if(!s.wantsMatch||s.matches(n))if(i=await s.invoke(e,n),"boolean"==typeof i){if(!i)return!1}else n=i;return i}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}Gk.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},Gk.lastIdentity=0;class Xk{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(wk.isType(t))this.componentType=t,this.componentName=wk.getName(t);else{const e=t;null!=e.component&&(this.componentType=wk.isType(e.component)?wk.getType(e.component):null,this.componentName=wk.getName(e.component)),null!=e.viewport&&(this.viewport=Uk.isInstance(e.viewport)?e.viewport:null,this.viewportName=Uk.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(Nk.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class Yk{static async getTitle(t,e,n){let i=await Gk.invokeTransformTitle(t,e);if("string"!=typeof i){const t=Yk.stringifyTitles(i,e,n);i=n.appTitle,i=i.replace(/\${componentTitles}/g,t),i=i.replace(/\${appTitleSeparator}/g,""!==t?n.appTitleSeparator:"")}return i=await Gk.invokeTransformTitle(i,e),i}static stringifyTitles(t,e,n){const i=t.map((t=>Yk.stringifyTitle(t,e,n))).filter((t=>{var e;return(null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0)>0}));return i.join(" + ")}static stringifyTitle(t,e,n){const i=t.nextScopeInstructions;let s=Yk.resolveTitle(t,e,n);if(Array.isArray(i)&&i.length>0){let t=Yk.stringifyTitles(i,e,n);t.length>0&&(1!==i.length&&(t=`[ ${t} ]`),s=s.length>0?"top-down"===n.componentTitleOrder?s+n.componentTitleSeparator+t:t+n.componentTitleSeparator+s:t)}return s}static resolveTitle(t,e,n){let i=t.getTitle(e);return null!=n.transformTitle&&(i=n.transformTitle(i,t,e)),i}}const Jk=an.createInterface("IRouter",(t=>t.singleton(tS)));class tS{constructor(t,e,n,i,s,r){this.container=t,this.ea=e,this.navigator=n,this.viewer=i,this.store=s,this.configuration=r,this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.handleNavigatorNavigateEvent=t=>{this.processNavigation(t.navigation).catch((t=>{throw t}))},this.handleNavigatorStateChangeEvent=t=>{var e;if(null!=(null===(e=t.state)||void 0===e?void 0:e.navigationIndex)){const e=Rk.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{var e;this.loadedFirst=!0;const n=this.configuration.options,i=Qk.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(i),i.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(rS.eventName,rS.create(t));let s="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await Gk.invokeTransformFromUrl(t.instruction,i.navigation);const r=n.basePath;null!==r&&"string"==typeof s&&s.startsWith(r)&&!n.useUrlFragmentHash&&(s=s.slice(r.length)),"/"===s&&(s=""),"string"==typeof s&&(s=""===s?[new Nk("")]:Nk.parse(this,s)),null!==(e=t.scope)&&void 0!==e||(t.scope=this.rootScope.scope);const o=await t.scope.processInstructions(s,t,i);return Ck.run(null,(()=>(i.finalEndpoint(),i.waitForSyncState("completed"))),(()=>(i.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&o.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(var t;this.coordinators.length>0&&this.coordinators[0].completed;){const e=this.coordinators.shift();await this.navigator.finalize(e.navigation,!1),this.ea.publish(lS.eventName,lS.create(e.navigation)),this.ea.publish(oS.eventName,oS.create(e.navigation)),null===(t=e.navigation.process)||void 0===t||t.resolve(!0)}}))}}static get inject(){return[hn,vi,Fk,Zk,Zk,CS]}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw new Error("Router has already been started");this.isActive=!0;const t=this.container.get(qu);this.rootScope=new Ik(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const n=new URL(t.host.baseURI);e.basePath=n.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.navigatorStateChangeEventSubscription=this.ea.subscribe(Kk.eventName,this.handleNavigatorStateChangeEvent),this.navigatorNavigateEventSubscription=this.ea.subscribe(Bk.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(nS.eventName,nS.create())}stop(){if(!this.isActive)throw new Error("Router has not been started");this.ea.publish(iS.eventName,iS.create()),this.navigator.stop(),this.viewer.stop(),this.navigatorStateChangeEventSubscription.dispose(),this.navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,n=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,n}getEndpoint(t,e){var n;return null!==(n=this.allEndpoints(t).find((t=>t.name===e)))&&void 0!==n?n:null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,e,n,i,s){const r=n.container,o=(r.has(tS.closestEndpointKey,!0)?r.get(tS.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=o.addEndpoint(e,i,n,s),Nn.instance(tS.closestEndpointKey,t).register(r)),t}disconnectEndpoint(t,e,n){if(!e.connectedScope.parent.removeEndpoint(t,e,n))throw new Error("Failed to remove endpoint: "+e.name)}async load(t,e){var n,i,s;e=null!=e?e:{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let r=null;if(({instructions:t,scope:r}=this.applyLoadOptions(t,e)),null!==(n=e.append)&&void 0!==n&&n&&(!this.loadedFirst||this.isNavigating))return t=Nk.from(this,t),this.appendInstructions(t,r),Promise.resolve();const o=Rk.create({instruction:t,fullStateInstruction:"",scope:r,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:null!==(i=e.replacing)&&void 0!==i&&i||e.replace,repeating:e.append,fromBrowser:null!==(s=e.fromBrowser)&&void 0!==s&&s,origin:e.origin,completed:!1});return this.navigator.navigate(o)}applyLoadOptions(t,e,n=!0){var i,s,r;"origin"in(e=null!=e?e:{})&&!("context"in e)&&(e.context=e.origin);let o=null!==(s=zk.for(null!==(i=e.context)&&void 0!==i?i:null))&&void 0!==s?s:null;if("string"==typeof t){if(t.startsWith("/"))o=null;else{if(t.startsWith("."))for(t.startsWith("./")&&(t=t.slice(2));t.startsWith("../");)o=null!==(r=null==o?void 0:o.parent)&&void 0!==r?r:o,t=t.slice(3);null!=(null==o?void 0:o.path)&&(t=`${o.path}/${t}`,o=null)}if(!n){t=Nk.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}}else{t=Nk.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}return{instructions:t,scope:o}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw new Error(`Parameter instructions to checkActivate can not be a string ('${t}')!`);e=null!=e?e:{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>{var e;return null!==(e=t.scope)&&void 0!==e?e:t.scope=this.rootScope.scope}));const n=kk(t.map((t=>t.scope)));for(const e of n){const n=e.matchScope(t,!1),i=e.matchScope(this.activeComponents,!0);if(!Nk.contains(this,i,n,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(cS.eventName,cS.create(t)),this.ea.publish(oS.eventName,oS.create(t)),function(t){const e=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return e.remainingInstructions=t,console.log(e,e.remainingInstructions),e}(e)}cancelNavigation(t,e){e.cancel(),this.ea.publish(aS.eventName,aS.create(t)),this.ea.publish(oS.eventName,oS.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const n of t)null===n.scope&&(n.scope=e);let n=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){n=this.coordinators[t];break}if(null===n){if(this.loadedFirst)throw Error("Failed to append routing instructions to coordinator");this.appendedInstructions.push(...t)}null==n||n.enqueueAppendedInstructions(t)}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.configuration.options.useConfiguredRoutes&&this.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}async updateNavigation(t){var e,n,i,s,r,o,a;this.rootScope.scope.reparentRoutingInstructions();const l=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:c}=this.rootScope.scope.matchEndpoints(l,[],!0),h=100;for(;c.length>0;){if(0==h--)throw new Error("Failed to find viewport when updating viewer paths.");c=c.map((t=>{var e;const{matchedInstructions:n}=t.endpoint.instance.scope.matchEndpoints(null!==(e=t.nextScopeInstructions)&&void 0!==e?e:[],[],!0);return n})).flat()}t.timestamp>=(null!==(n=null===(e=this.activeNavigation)||void 0===e?void 0:e.timestamp)&&void 0!==n?n:0)&&(this.activeNavigation=t,this.activeComponents=l);let u=await Gk.invokeTransformToUrl(l,t);if("string"!=typeof u&&(u=Nk.stringify(this,u,!1,!0)),u=await Gk.invokeTransformToUrl(u,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[n,i]of Object.entries(t.parameters)){n=encodeURIComponent(n),Array.isArray(i)||(i=[i]);for(const t of i)e.append(n,encodeURIComponent(t))}t.query=e.toString()}let d=`${this.configuration.options.basePath}/`;(null===d||""!==u&&"/"===u[0]||this.configuration.options.useUrlFragmentHash)&&(d="");const p=(null!==(s=null===(i=t.query)||void 0===i?void 0:i.length)&&void 0!==s?s:0)>0?"?"+t.query:"",f=(null!==(o=null===(r=t.fragment)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>0?"#"+t.fragment:"";t.path=d+u+p+f;const g=[Nk.create(Nk.clear(this))];if(g.push(...Nk.clone(l,this.statefulHistory)),t.fullStateInstruction=g,null===(null!==(a=t.title)&&void 0!==a?a:null)){const e=await Yk.getTitle(l,t,this.configuration.options.title);null!==e&&(t.title=e)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[n,i]=t.split("#");t=n,e.fragment=i}return t}extractQuery(t,e){var n;if("string"==typeof t&&null==e.query){const[n,i]=t.split("?");t=n,e.query=i}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(null!==(n=e.parameters)&&void 0!==n||(e.parameters={}),new URLSearchParams(e.query).forEach(((t,n)=>{n=decodeURIComponent(n),t=decodeURIComponent(t),n in e.parameters?(Array.isArray(e.parameters[n])||(e.parameters[n]=[e.parameters[n]]),e.parameters[n].push(t)):e.parameters[n]=t}))),t}}tS.closestEndpointKey=Xe.annotation.keyFor("closest-endpoint");class eS{constructor(t){this.eventName=t}}class nS extends eS{static create(){return new nS(this.eventName)}}nS.eventName="au:router:router-start";class iS extends eS{static create(){return new iS(this.eventName)}}iS.eventName="au:router:router-stop";class sS{constructor(t,e){this.eventName=t,this.navigation=e}}class rS extends sS{static create(t){return new rS(this.eventName,t)}}rS.eventName="au:router:navigation-start";class oS extends sS{static create(t){return new oS(this.eventName,t)}}oS.eventName="au:router:navigation-end";class aS extends sS{static create(t){return new aS(this.eventName,t)}}aS.eventName="au:router:navigation-cancel";class lS extends sS{static create(t){return new lS(this.eventName,t)}}lS.eventName="au:router:navigation-complete";class cS extends sS{static create(t){return new cS(this.eventName,t)}}cS.eventName="au:router:navigation-error";const hS=an.createInterface("ILinkHandler",(t=>t.singleton(uS)));let uS=class{constructor(t,e){this.window=t,this.router=e}handleEvent(t){this.handleClick(t)}handleClick(t){var e,n;if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const i=t.currentTarget;if(i.hasAttribute("external"))return;const s=null!==(e=i.getAttribute("target"))&&void 0!==e?e:"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const r=gh.for(i,"load"),o=void 0!==r?r.viewModel.value:null,a=this.router.configuration.options.useHref&&i.hasAttribute("href")?i.getAttribute("href"):null;if(!(null!==o&&0!==o.length||null!==a&&0!==a.length))return;t.preventDefault();let l=null!==(n=null!=o?o:a)&&void 0!==n?n:"";"string"==typeof l&&l.startsWith("#")&&(l=l.slice(1),l.startsWith("/")||(l=`/${l}`)),this.router.load(l,{origin:i}).catch((t=>{throw t}))}};var dS;function pS(t,e,n,i,s=!1){var r;if(s)return""===e;if(n)return e;const o=null!==(r=i.getAttribute(t))&&void 0!==r?r:"";return o.length>0?o:e}function fS(t,e){if(!t.isActive)return new Promise((t=>{const n=e.subscribe(nS.eventName,(()=>{t(),n.dispose()}))}))}function gS(t,e,n,i){var s,r;let o=null===(r=null===(s=gh.for(n,"considered-active"))||void 0===s?void 0:s.viewModel)||void 0===r?void 0:r.value;void 0===o&&(o=i);const a=t.applyLoadOptions(o,{context:e}),l=Nk.from(t,a.instructions);for(const t of l)null===t.scope&&(t.scope=a.scope);return l}function vS(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return null!=e||(e=t),e}uS=uk([dk(0,rd),dk(1,Jk)],uS),function(t){t.default="default",t.disallow="disallow",t.reload="reload",t.refresh="refresh"}(dS||(dS={}));const mS=Lh.createInjectable();let yS=class{constructor(t,e,n,i,s,r){this.router=t,this.element=e,this.container=n,this.ea=i,this.parentViewport=s,this.instruction=r,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1}hydrated(t){this.controller=t,this.container=t.container;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new Sk)),Ck.run(null,(()=>fS(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e,n){return this.isBound=!0,Ck.run(null,(()=>fS(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{var t;null!=(null===(t=this.endpoint)||void 0===t?void 0:t.activeResolve)&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{var e;if(null!==this.endpoint&&null===this.endpoint.getNextContent())return null===(e=this.endpoint.activate(null,t,this.controller,n,void 0))||void 0===e?void 0:e.asValue}))}detaching(t,e,n){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e,n)}unbinding(t,e,n){if(null!==this.endpoint)return this.disconnect(null)}dispose(){var t;null===(t=this.endpoint)||void 0===t||t.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,n=pS("name",this.name,t,e),i={};i.scope=!pS("no-scope",this.noScope,!1,e,!0),i.usedBy=pS("used-by",this.usedBy,t,e),i.default=pS("default",this.default,t,e),i.fallback=pS("fallback",this.fallback,t,e),i.noLink=pS("no-link",this.noLink,t,e,!0),i.noTitle=pS("no-title",this.noTitle,t,e,!0),i.noHistory=pS("no-history",this.noHistory,t,e,!0),i.stateful=pS("stateful",this.stateful,t,e,!0),Object.keys(i).forEach((t=>{void 0===i[t]&&delete i[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,n,i);const s=this.parentViewport;null!=s&&(xk(s.pendingChildren,(t=>t===this)),0===s.pendingChildren.length&&null!==s.pendingPromise&&(s.pendingPromise.resolve(),s.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const n=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const i in t)this.element.classList.toggle(`${n}-${i}`,e&&t[i])}};uk([jl],yS.prototype,"name",void 0),uk([jl],yS.prototype,"usedBy",void 0),uk([jl],yS.prototype,"default",void 0),uk([jl],yS.prototype,"fallback",void 0),uk([jl],yS.prototype,"noScope",void 0),uk([jl],yS.prototype,"noLink",void 0),uk([jl],yS.prototype,"noTitle",void 0),uk([jl],yS.prototype,"noHistory",void 0),uk([jl],yS.prototype,"stateful",void 0),yS=uk([bh({name:"au-viewport",injectable:mS}),dk(0,Jk),dk(1,Gu),dk(2,hn),dk(3,vi),dk(4,mS),dk(5,wd)],yS);const bS=Lh.createInjectable();let wS=class{constructor(t,e,n,i,s){this.router=t,this.element=e,this.container=n,this.parent=i,this.parentController=s,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e,n){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e,n){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let n=this.getAttribute("catches",this.catches);void 0!==n&&(e.catches=n),n=this.getAttribute("collection",this.collection,!0),void 0!==n&&(e.collection=n),e.source=this.source||null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,n=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(n)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};uk([jl],wS.prototype,"name",void 0),uk([jl],wS.prototype,"catches",void 0),uk([jl],wS.prototype,"collection",void 0),uk([jl],wS.prototype,"source",void 0),wS=uk([bh({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:bS}),dk(0,Jk),dk(1,Gu),dk(2,hn),dk(3,bS),dk(4,Tu)],wS);let xS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.hasHref=null,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(oS.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#${t}`),this.element.setAttribute("href",t)}}updateActive(){const t=gh.for(this.element,"load").parent,e=gS(this.router,t,this.element,this.value);vS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}};uk([jl({mode:Zy.toView})],xS.prototype,"value",void 0),xS=uk([ch("load"),dk(0,Gu),dk(1,Jk),dk(2,hS),dk(3,vi)],xS);let kS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(oS.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){var t;this.element.removeEventListener("click",this.linkHandler),null===(t=this.routerNavigationSubscription)||void 0===t||t.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=gh.for(this.element,"href").parent,e=gS(this.router,t,this.element,this.value);vS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){var t;const e=this.$controller.parent.children;return null!==(t=null==e?void 0:e.some((t=>1===t.vmKind&&t.viewModel instanceof xS)))&&void 0!==t&&t}};uk([jl({mode:Zy.toView})],kS.prototype,"value",void 0),kS=uk([ch({name:"href",noMultiBindings:!0}),dk(0,Gu),dk(1,Jk),dk(2,hS),dk(3,vi)],kS);let SS=class{};uk([jl({mode:Zy.toView})],SS.prototype,"value",void 0),SS=uk([ch("considered-active")],SS);const CS=an.createInterface("IRouterConfiguration",(t=>t.singleton(TS))),AS=[Jk],ES=[yS,wS,xS,kS,SS];class TS{static register(t){const e=t.get(CS);return e.options=TS.options,e.options.setRouterConfiguration(e),TS.options=mk.create(),t.register(...AS,...ES,Xc.beforeActivate(Jk,TS.configurationCall),Xc.afterActivate(Jk,(t=>t.initialLoad())),Xc.afterDeactivate(Jk,(t=>t.stop())))}static customize(t){return void 0===t?(TS.options=mk.create(),TS.configurationCall=t=>{t.start()}):t instanceof Function?TS.configurationCall=t:(TS.options=mk.create(),TS.options.apply(t)),TS}static createContainer(){return this.register(an.createContainer())}static for(t){return t instanceof tS?t.configuration:t.get(CS)}apply(t,e=!1){e&&(this.options=mk.create()),this.options.apply(t)}addHook(t,e){return Gk.add(t,e)}removeHook(t){return Gk.remove(t)}removeAllHooks(){return Gk.removeAll()}}function $S(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function IS(t,e){return function(n,i){e(n,i,t)}}function OS(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}TS.options=mk.create(),TS.configurationCall=t=>{t.start()},Object.create,Object.create;var RS=n(3379),PS=n.n(RS),LS=n(7795),MS=n.n(LS),jS=n(569),US=n.n(jS),NS=n(3565),BS=n.n(NS),FS=n(9216),VS=n.n(FS),DS=n(4589),zS=n.n(DS),qS=n(1138),HS={};HS.styleTagTransform=zS(),HS.setAttributes=BS(),HS.insert=US().bind(null,"head"),HS.domAPI=MS(),HS.insertStyleElement=VS(),PS()(qS.Z,HS),qS.Z&&qS.Z.locals&&qS.Z.locals;var ZS=n(6767),WS={};WS.styleTagTransform=zS(),WS.setAttributes=BS(),WS.insert=US().bind(null,"head"),WS.domAPI=MS(),WS.insertStyleElement=VS(),PS()(ZS.Z,WS),ZS.Z&&ZS.Z.locals&&ZS.Z.locals;const KS="character-type-selector",_S='<div class="container">\r\n    <span>Magus</span> <radio-button group="character-type" state="${model == \'magus\' ? \'selected\' : \'unselected\'}" value="magus"></radio-button>\r\n    <span>Companion</span> <radio-button group="character-type" state="${model == \'companion\' ? \'selected\' : \'unselected\'}" value="companion"></radio-button>\r\n</div>',QS=_S,GS=[];let XS;function YS(t){XS||(XS=Lh.define({name:KS,template:_S,dependencies:GS})),t.register(XS)}const JS={character:{type:"magus",physicalStatus:{fatigue:0,lightWounds:0,mediumWounds:0,heavyWounds:0},description:{name:"",description:""},abilities:[],personalityTraits:[],characteristics:{communication:{value:0,specialisation:"",agingPoints:0},dexterity:{value:0,specialisation:"",agingPoints:0},intelligence:{value:0,specialisation:"",agingPoints:0},perception:{value:0,specialisation:"",agingPoints:0},presence:{value:0,specialisation:"",agingPoints:0},quickness:{value:0,specialisation:"",agingPoints:0},stamina:{value:0,specialisation:"",agingPoints:0},strength:{value:0,specialisation:"",agingPoints:0}},flaws:[],virtues:[],arts:{creo:{level:0,xp:0,puissant:!1},muto:{level:0,xp:0,puissant:!1},rego:{level:0,xp:0,puissant:!1},intellego:{level:0,xp:0,puissant:!1},perdo:{level:0,xp:0,puissant:!1},animal:{level:0,xp:0,puissant:!1},auram:{level:0,xp:0,puissant:!1},aquam:{level:0,xp:0,puissant:!1},ignem:{level:0,xp:0,puissant:!1},terram:{level:0,xp:0,puissant:!1},herbam:{level:0,xp:0,puissant:!1},mentem:{level:0,xp:0,puissant:!1},corpus:{level:0,xp:0,puissant:!1},imaginem:{level:0,xp:0,puissant:!1},vim:{level:0,xp:0,puissant:!1}},spells:[],spellWishlist:[],ageing:{age:25,apparentAge:25,birthYear:1195,currentYear:1220,decrepitudeLevel:0,decrepitudePoints:0,longevityModifier:0,ageingRollModifier:0,livingConditionModifier:0},confidence:{score:3},warping:{warpingPoints:0,warpingLevel:0,ongoingEffects:[]},activeMagic:[],xpEntries:[],notes:"",background:"",lab:{art1:{name:"",rating:0},art2:{name:"",rating:0},art3:{name:"",rating:0},art4:{name:"",rating:0},specialisation1:{name:"",rating:0},specialisation2:{name:"",rating:0},auraBonus:0,description:"",effectiveSafety:0,flaws:[],virtues:[],intelligenceBonus:0,labBaseQuality:0,livingConditionsModifier:0,magicTheory:0,occupiedSize:0,refinement:0,size:0,availableModifiers:[{name:"GQ"},{name:"Safety"},{name:"Health"},{name:"Aesthetics"},{name:"Upkeep"},{name:"Warping"}],researchProjects:[],inventiveGeniusVirtue:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1},spellcastingStats:{arts:"",aura:0,ceremonial:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1,positiveCycle:!1,focus:!1,largeGestures:!1,loudVoice:!1,similarFomulaicSpellBonus:0,spontaneousCastingTotal:0,staminaSpecialisation:!1,talismanBonus:0},sigil:"",belongings:{carried:"",inSanctum:"",vis:[]},talisman:{description:"",investedVis:0,spentVis:0,bonuses:[],effects:[]},magicItems:[],quests:[],npcs:[]}};function tC(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if("object"==typeof t){if("function"==typeof t[Symbol.iterator]){const e=[];if(t.length>0)for(const n of t)e.push(tC(n));return e}{const e=Object.keys(t),n={};if(e.length>0)for(const i of e)n[i]=tC(t[i]);return n}}return t}function eC(t){return _v(t,tC(JS))}async function nC(t,e){const n=await e.text();return _v(t,JSON.parse(n))}function iC(t,e){const n=tC(t.present);return n.character=e,_v(t,n)}function sC(t,e){console.log("Saving characteristics",e);const n=tC(t.present);return n.character.characteristics=e,UC(n),KC(n),_v(t,n)}function rC(t,e){console.log("Saving abilities",e);const n=tC(t.present);return n.character.abilities=PC(e),KC(n),UC(n),_v(t,n)}function oC(t,e){console.log("Saving personality traits",e);const n=tC(t.present);return n.character.personalityTraits=PC(e),_v(t,n)}function aC(t,e){console.log("Saving virtues",e);const n=tC(t.present);return n.character.virtues=PC(e),LC(n),UC(n),HC(n),_v(t,n)}function lC(t,e){console.log("Saving flaws",e);const n=tC(t.present);return n.character.flaws=PC(e),UC(n),HC(n),_v(t,n)}function cC(t,e){console.log("Saving description",e);const n=tC(t.present);return n.character.description=e,_v(t,n)}function hC(t,e){console.log("Saving physical status",e);const n=tC(t.present);return n.character.physicalStatus=e,UC(n),_v(t,n)}function uC(t,e){console.log("Saving arts",e);const n=tC(t.present);return n.character.arts=e,UC(n),KC(n),_v(t,n)}function dC(t,e){console.log("Saving spells",e);const n=tC(t.present);return n.character.spells=PC(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),RC(n),UC(n),_v(t,n)}function pC(t,e){console.log("Saving spell wishlist",e);const n=tC(t.present);return n.character.spellWishlist=PC(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),RC(n),_v(t,n)}function fC(t,e){console.log("Saving ageing",e);const n=tC(t.present);return n.character.ageing=e,LC(n),function(t){for(t.character.xpEntries||(t.character.xpEntries=[qC(t.character.ageing.currentYear,"Spring"),qC(t.character.ageing.currentYear,"Summer"),qC(t.character.ageing.currentYear,"Fall"),qC(t.character.ageing.currentYear,"Winter")]),t.character.xpEntries=t.character.xpEntries.filter((e=>e.year<t.character.ageing.currentYear+3)),0==t.character.xpEntries.length&&(t.character.xpEntries=[qC(t.character.ageing.currentYear,"Spring"),qC(t.character.ageing.currentYear,"Summer"),qC(t.character.ageing.currentYear,"Fall"),qC(t.character.ageing.currentYear,"Winter")]);t.character.xpEntries[t.character.xpEntries.length-1].year<t.character.ageing.currentYear+3;){let e=t.character.xpEntries[t.character.xpEntries.length-1].year+1;t.character.xpEntries.push(qC(e,"Spring")),t.character.xpEntries.push(qC(e,"Summer")),t.character.xpEntries.push(qC(e,"Fall")),t.character.xpEntries.push(qC(e,"Winter"))}t.character.xpEntries.forEach((e=>e.planningMode=e.year>=t.character.ageing.currentYear))}(n),_v(t,n)}function gC(t,e){console.log("Saving confidence",e);const n=tC(t.present);return n.character.confidence=e,_v(t,n)}function vC(t,e){console.log("Saving warping",e);const n=tC(t.present);return n.character.warping=e,n.character.warping.ongoingEffects=PC(e.ongoingEffects),function(t){t.character.warping.warpingLevel=jC(t.character.warping.warpingPoints,0)}(n),_v(t,n)}function mC(t,e){console.log("Saving active magic",e);const n=tC(t.present);return n.character.activeMagic=PC(e),function(t){t.character.activeMagic.forEach((t=>t.penetration=t.active?t.penetration:0))}(n),_v(t,n)}function yC(t,e){console.log("Saving xp entries",e);const n=tC(t.present);return n.character.xpEntries=e,_v(t,n)}function bC(t,e){console.log("Saving notes",e);const n=tC(t.present);return n.character.notes=e,_v(t,n)}function wC(t,e){console.log("Saving lab",e);const n=tC(t.present);return n.character.lab=e,n.character.lab.virtues=PC(n.character.lab.virtues),n.character.lab.flaws=PC(n.character.lab.flaws),n.character.lab.availableModifiers=n.character.lab.availableModifiers.filter((t=>""!=t.name)),n.character.lab.researchProjects=PC(n.character.lab.researchProjects),HC(n),_v(t,n)}function xC(t,e){console.log("Importing character");const n=tC(t.present);return n.character=JSON.parse(e),_v(t,n)}function kC(t,e){console.log("Saving spellcasting stats",e);const n=tC(t.present);return n.character.spellcastingStats=e,UC(n),_v(t,n)}function SC(t,e){console.log("Saving character type",e);const n=tC(t.present);return n.character.type=e,UC(n),_v(t,n)}function CC(t,e){console.log("Saving background",e);const n=tC(t.present);return n.character.background=e,_v(t,n)}function AC(t,e){console.log("Saving sigil",e);const n=tC(t.present);return n.character.sigil=e,_v(t,n)}function EC(t,e){console.log("Saving belongings",e);const n=tC(t.present);return n.character.belongings=e,n.character.belongings.vis=PC(e.vis),_v(t,n)}function TC(t,e){console.log("Saving talisman",e);const n=tC(t.present);return n.character.talisman=e,n.character.talisman.effects=PC(e.effects),n.character.talisman.bonuses=PC(e.bonuses),_v(t,n)}function $C(t,e){console.log("Saving magic items",e);const n=tC(t.present);return n.character.magicItems=PC(e),n.character.magicItems.forEach((t=>t.effects=PC(t.effects))),_v(t,n)}function IC(t,e){console.log("Saving quests",e);const n=tC(t.present);return n.character.quests=PC(e).sort(((t,e)=>t.priority-e.priority)),_v(t,n)}function OC(t,e){console.log("Saving npcs",e);const n=tC(t.present);return n.character.npcs=PC(e),_v(t,n)}function RC(t){let e=t.character.spellWishlist.filter((t=>!t.onWishlist)),n=t.character.spells.filter((t=>t.onWishlist));t.character.spellWishlist=t.character.spellWishlist.filter((t=>t.onWishlist)).concat(n),t.character.spells=t.character.spells.filter((t=>!t.onWishlist)).concat(e)}function PC(t){return t.filter((t=>""!=t.name)).sort(((t,e)=>t.name.localeCompare(e.name)))}function LC(t){MC(t),function(t){t.character.ageing.decrepitudeLevel=jC(t.character.ageing.decrepitudePoints,0)}(t),function(t){t.character.ageing.age=t.character.ageing.currentYear-t.character.ageing.birthYear}(t)}function MC(t){let e=t.character.virtues.findIndex((t=>t.name.indexOf("Strong Faerie Blood")>=0))>=0?3:t.character.virtues.findIndex((t=>t.name.indexOf("Faerie Blood")>=0))>=0?1:0;t.character.ageing.ageingRollModifier=t.character.ageing.livingConditionModifier+t.character.ageing.longevityModifier+t.character.lab.livingConditionsModifier+e-Math.ceil(t.character.ageing.age/10)}function jC(t,e){let n=5*(e+1);return n>t?e:jC(t-n,e+1)}function UC(t){var e;(null===(e=null==t?void 0:t.character)||void 0===e?void 0:e.arts)&&(t.character.spellcastingStats.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.spontaneousCastingTotal=function(t){let e=t.character.spellcastingStats;return NC(t)+FC(t,e.arts,"",e.focus)+e.talismanBonus+e.similarFomulaicSpellBonus+(e.ceremonial?BC(t,"Ceremonial"):0)}(t),t.character.spells.forEach((e=>e.castingTotal=function(t,e){return NC(t)+FC(t,e.arts,e.prerequisites,e.focus)+e.attunementBonus+e.masteryLevel+(e.ritual?BC(t,"Ritual"):0)}(t,e))))}function NC(t){let e=t.character.spellcastingStats,n=e.cyclicMagicVirtue?3:0,i=e.cyclicMagicFlaw?-3:0;return t.character.characteristics.stamina.value+function(t){let e=t.character.physicalStatus;return-e.lightWounds+-3*e.mediumWounds+-5*e.heavyWounds}(t)+function(t){let e=t.character.physicalStatus.fatigue;return e<=1?0:2===e?-1:3===e?-3:4===e?-5:0}(t)+e.aura+(e.positiveCycle?n:i)+(e.staminaSpecialisation?1:0)+(e.largeGestures?1:0)+(e.loudVoice?1:0)}function BC(t,e){var n,i;let s=t.character.abilities.find((t=>"Artes Liberales"==t.name)),r=t.character.abilities.find((t=>"Philosophiae"==t.name)),o=(null==s?void 0:s.specialisation)==e?1:0,a=(null==r?void 0:r.specialisation)==e?1:0,l=(null==s?void 0:s.puissant)?3:0,c=(null==r?void 0:r.puissant)?3:0;return(null!==(n=null==s?void 0:s.level)&&void 0!==n?n:0)+o+l+(null!==(i=null==r?void 0:r.level)&&void 0!==i?i:0)+a+c}function FC(t,e,n,i){let s=VC(t,e),r=DC(t,e);if(null===s||null==r)return 0;let o=VC(t,n),a=DC(t,n),l=Math.min(s,null!=o?o:1e3),c=Math.min(r,null!=a?a:1e3);return l+c+(i?Math.min(l,c):0)}function VC(t,e){let n=t.character.arts;return e.indexOf("Cr")>=0?zC(n.creo):e.indexOf("In")>=0?zC(n.intellego):e.indexOf("Mu")>=0?zC(n.muto):e.indexOf("Pe")>=0?zC(n.perdo):e.indexOf("Re")>=0?zC(n.rego):null}function DC(t,e){let n=t.character.arts;return e.indexOf("An")>=0?zC(n.animal):e.indexOf("Aq")>=0?zC(n.aquam):e.indexOf("Au")>=0?zC(n.auram):e.indexOf("Co")>=0?zC(n.corpus):e.indexOf("He")>=0?zC(n.herbam):e.indexOf("Ig")>=0?zC(n.ignem):e.indexOf("Im")>=0?zC(n.imaginem):e.indexOf("Me")>=0?zC(n.mentem):e.indexOf("Te")>=0?zC(n.terram):e.indexOf("Vi")>=0?zC(n.vim):null}function zC(t){return t.level+(t.puissant?3:0)}function qC(t,e){return{year:t,xp:"",correspondence:"",description:"",plans:"",areaLore:"",season:e,planningMode:!0}}function HC(t){ZC(t.character.lab.virtues,t.character.lab.availableModifiers),ZC(t.character.lab.flaws,t.character.lab.availableModifiers),function(t){var e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v;let m=t.character.lab,y=WC(m),b=m.virtues.concat(m.flaws).reduce(((t,e)=>t+e.cost),0);m.occupiedSize=m.size+b-m.refinement;let w=null!==(n=null===(e=y.find((t=>"Safety"==t.name)))||void 0===e?void 0:e.rating)&&void 0!==n?n:0,x=null!==(s=null===(i=y.find((t=>"Health"==t.name)))||void 0===i?void 0:i.rating)&&void 0!==s?s:0;m.livingConditionsModifier=x>=0?Math.floor(x/2):Math.ceil(x/2),m.effectiveSafety=w-Math.max(0,m.occupiedSize)+m.refinement,m.specialisation1.rating=null!==(o=null===(r=y.find((t=>t.name==m.specialisation1.name)))||void 0===r?void 0:r.rating)&&void 0!==o?o:0,m.specialisation2.rating=null!==(l=null===(a=y.find((t=>t.name==m.specialisation2.name)))||void 0===a?void 0:a.rating)&&void 0!==l?l:0,m.art1.rating=null!==(h=null===(c=y.find((t=>t.name==m.art1.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0,m.art2.rating=null!==(d=null===(u=y.find((t=>t.name==m.art2.name)))||void 0===u?void 0:u.rating)&&void 0!==d?d:0,m.art3.rating=null!==(f=null===(p=y.find((t=>t.name==m.art3.name)))||void 0===p?void 0:p.rating)&&void 0!==f?f:0,m.art4.rating=null!==(v=null===(g=y.find((t=>t.name==m.art4.name)))||void 0===g?void 0:g.rating)&&void 0!==v?v:0,t.character.lab.inventiveGeniusVirtue=t.character.virtues.findIndex((t=>"Inventive Genius"==t.name))>=0,t.character.lab.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.lab.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0}(t),KC(t),MC(t)}function ZC(t,e){t.forEach((t=>{let n=t.modifiers.filter((t=>0!=t.rating));t.modifiers=e.map((t=>({name:t.name,rating:0}))),n.forEach((e=>{let n=t.modifiers.findIndex((t=>t.name==e.name));n>=0&&(t.modifiers[n].rating=e.rating)})),t.category.length>1&&("outfitting".startsWith(t.category.toLocaleLowerCase())&&(t.category="Outfitting"),"stucture".startsWith(t.category.toLocaleLowerCase())&&(t.category="Structure"),"supernatural".startsWith(t.category.toLocaleLowerCase())&&(t.category="Supernatural"))}))}function WC(t){return t.availableModifiers.map((e=>({name:e.name,rating:t.virtues.concat(t.flaws).reduce(((t,n)=>t.concat(n.modifiers.filter((t=>t.name==e.name)))),[]).reduce(((t,e)=>t+e.rating),0)})))}function KC(t){let e=t.character.lab,n=e.inventiveGeniusVirtue?3:0,i=e.inventiveGeniusVirtue?6:0,s=e.cyclicMagicVirtue?3:0,r=e.cyclicMagicFlaw?-3:0;e.researchProjects.forEach((o=>{var a,l,c,h;let u=null!==(l=null===(a=t.character.abilities.find((t=>"Magic Theory"==t.name)))||void 0===a?void 0:a.level)&&void 0!==l?l:0,d=null!==(h=null===(c=WC(e).find((t=>"GQ"==t.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0;o.artModifier=FC(t,o.arts,o.prerequisites,o.focus),o.labTotal=e.auraBonus+e.labBaseQuality+d+o.artModifier+o.labAssistantBonus+u+Math.max(o.experiment?i:0,o.newWork?n:0)+(o.positiveCycle?s:r)+(o.magicTheorySpecialisation?1:0)+t.character.characteristics.intelligence.value+(o.intelligenceSpecialisation?1:0)+(o.nocturnal?2:0)+o.materialBonus+o.shapeBonus+o.similarResearchBonus+(o.talisman?5:0),o.surplusLabTotal=o.labTotal-o.level}))}let _C=class{constructor(t,e,n,i){this.store=t,this.pluckModel=e,this.saveAction=n,this.ea=i,this.model=void 0,this.modelState=void 0,this.active=!1,this.interacting=!1,this.stopInteraction=function(t,e=300){let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(this,i)}),e)}}((()=>{this.interacting=!1}),1e3)}stateChanged(t,e){t.present&&(this.modelState=this.pluckModel(t.present),this.hasChanges()&&(this.model=tC(this.modelState)))}bound(){this.active=!0,this.checkForChanges(),this.ea.subscribe("ui-interaction",(()=>{this.interacting=!0,this.stopInteraction()}))}unbound(){this.active=!1}checkForChanges(){this.active&&(this.hasChanges()&&this.saveChanges(),setTimeout((()=>{this.checkForChanges()}),2e3))}saveChanges(){this.interacting||this.store.dispatch(this.saveAction,tC(this.model))}hasChanges(){return JSON.stringify(this.modelState)!==JSON.stringify(this.model)}};_C=$S([um(),OS("design:paramtypes",[cm,Function,Function,Object])],_C);let QC=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.type}),SC,e)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"character-type"==t.group&&(this.model=t.value)}))}};QC=$S([bh(t),IS(1,vi),OS("design:paramtypes",[cm,Object])],QC);var GC=n(3845),XC={};XC.styleTagTransform=zS(),XC.setAttributes=BS(),XC.insert=US().bind(null,"head"),XC.domAPI=MS(),XC.insertStyleElement=VS(),PS()(GC.Z,XC),GC.Z&&GC.Z.locals&&GC.Z.locals;const YC="description-block",JC='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',tA=JC,eA=[];let nA;function iA(t){nA||(nA=Lh.define({name:YC,template:JC,dependencies:eA})),t.register(nA)}let sA=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),cC,e)}};sA=$S([bh(s),IS(1,vi),OS("design:paramtypes",[cm,Object])],sA);const rA="virtues-list",oA='<list title="VIRTUES" items.two-way="model"></list>',aA=oA,lA=[];let cA;function hA(t){cA||(cA=Lh.define({name:rA,template:oA,dependencies:lA})),t.register(cA)}let uA=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.virtues}),aC,e)}};uA=$S([bh(o),IS(1,vi),OS("design:paramtypes",[cm,Object])],uA);const dA="flaws-list",pA='<list title="FLAWS" items.two-way="model"></list>',fA=pA,gA=[];let vA;function mA(t){vA||(vA=Lh.define({name:dA,template:pA,dependencies:gA})),t.register(vA)}let yA=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.flaws}),lC,e)}};yA=$S([bh(l),IS(1,vi),OS("design:paramtypes",[cm,Object])],yA);var bA=n(5555),wA={};wA.styleTagTransform=zS(),wA.setAttributes=BS(),wA.insert=US().bind(null,"head"),wA.domAPI=MS(),wA.insertStyleElement=VS(),PS()(bA.Z,wA),bA.Z&&bA.Z.locals&&bA.Z.locals;const xA="personality-traits-list",kA='<title text="PERSONALITY"></title>\r\n<div class="container">\r\n    <div repeat.for="trait of model">\r\n        <text-field value.two-way="trait.name"></text-field>\r\n        <primary-stat mode="secondary" size="s" value.two-way="trait.rating" prefix-plus.bind="true"></primary-stat>\r\n    </div>\r\n    <input type="text" class="add-item-input" placeholder="Add trait" keyup.delegate="keyPressed($event)" value.two-way="newTraitText">\r\n</div>\r\n<footer></footer>',SA=kA,CA=[];let AA;function EA(t){AA||(AA=Lh.define({name:xA,template:kA,dependencies:CA})),t.register(AA)}let TA=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.personalityTraits}),oC,e),this.newTraitText="",this.keyPressed=t=>{"Enter"==t.key&&this.newTraitText&&(this.model.push({name:this.newTraitText,rating:0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newTraitText="")}}};TA=$S([bh(h),IS(1,vi),OS("design:paramtypes",[cm,Object])],TA);var $A=n(2410),IA={};IA.styleTagTransform=zS(),IA.setAttributes=BS(),IA.insert=US().bind(null,"head"),IA.domAPI=MS(),IA.insertStyleElement=VS(),PS()($A.Z,IA),$A.Z&&$A.Z.locals&&$A.Z.locals;const OA="warping-block",RA='<title text="WARPING"></title>\r\n<div class="container">\r\n    <div class="warping-level">\r\n        <primary-stat mode="secondary" value.two-way="model.warpingPoints" min="0" max="999" size="s" title="Warping Points"></primary-stat>\r\n        <primary-stat mode="secondary" readonly.bind="true" value.two-way="model.warpingLevel" min="0" size="m" title="Warping Level"></primary-stat>\r\n    </div>\r\n    <div class="warping-effect grid" repeat.for="effect of model.ongoingEffects">\r\n        <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n        <primary-stat mode="secondary" value.two-way="effect.warpingPointsPerYear" min="1" size="s" title="Warping Points Per Year"></primary-stat>\r\n        <span class="text">/year</span>\r\n    </div>\r\n    <input class="add-effect-input" type="text" placeholder="Add ongoing effect" keyup.delegate="keyPressed($event)" value.two-way="newEffectText">\r\n</div>\r\n<footer></footer>',PA=RA,LA=[];let MA;function jA(t){MA||(MA=Lh.define({name:OA,template:RA,dependencies:LA})),t.register(MA)}let UA=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.warping}),vC,e),this.newEffectText="",this.keyPressed=t=>{"Enter"==t.key&&this.newEffectText&&(this.model.ongoingEffects.push({name:this.newEffectText,warpingPointsPerYear:1}),this.model.ongoingEffects.sort(((t,e)=>t.name.localeCompare(e.name))),this.newEffectText="")}}};UA=$S([bh(d),IS(1,vi),OS("design:paramtypes",[cm,Object])],UA);const NA="description",BA='\r\n\r\n\r\n\r\n\r\n\r\n<description-block></description-block>\r\n<virtues-list></virtues-list>\r\n<flaws-list></flaws-list>\r\n<personality-traits-list></personality-traits-list>\r\n<warping-block></warping-block>\r\n\r\n<div style="clear: both;"></div>',FA=BA,VA=[r,a,c,u,p];let DA;function zA(t){DA||(DA=Lh.define({name:NA,template:BA,dependencies:VA})),t.register(DA)}let qA=class{};qA=$S([bh(f)],qA);var HA=n(927),ZA={};ZA.styleTagTransform=zS(),ZA.setAttributes=BS(),ZA.insert=US().bind(null,"head"),ZA.domAPI=MS(),ZA.insertStyleElement=VS(),PS()(HA.Z,ZA),HA.Z&&HA.Z.locals&&HA.Z.locals;const WA="abilities-block",KA='<title text="ABILITIES"></title>\r\n<div class="container">\r\n    <div class="ability ${item.level === 0 ? \'untrained\' : \'\'}" repeat.for="item of model">\r\n        <checkbox size="xs" mode="angled" value.two-way="item.puissant" title="Puissant ability"></checkbox>\r\n        <text-field class="name" value.two-way="item.name"></text-field>\r\n        <text-field class="specialisation" value.two-way="item.specialisation" placeholder="Specialisation"></text-field>\r\n        <primary-stat class="level" mode="secondary" value.two-way="item.level" min="0" size="s" title="Ability level"></primary-stat>\r\n        <primary-stat class="xp" mode="secondary" value.two-way="item.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n        <span class="puissant-label"><span class="numbers text" if.bind="item.puissant">+2</span></span>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add item" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',_A=KA,QA=[];let GA;function XA(t){GA||(GA=Lh.define({name:WA,template:KA,dependencies:QA})),t.register(GA)}let YA=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.abilities}),rC,e),this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.model.push({name:this.newItemText,specialisation:"",level:0,xp:0,puissant:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};YA=$S([bh(v),IS(1,vi),OS("design:paramtypes",[cm,Object])],YA);var JA=n(3292),tE={};tE.styleTagTransform=zS(),tE.setAttributes=BS(),tE.insert=US().bind(null,"head"),tE.domAPI=MS(),tE.insertStyleElement=VS(),PS()(JA.Z,tE),JA.Z&&JA.Z.locals&&JA.Z.locals;const eE="characteristics-block",nE='<title text="CHARACTERISTICS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.strength.specialisation"></text-field>\r\n        <span class="text left-col">STR</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.strength.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.strength.value"></primary-stat>\r\n\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.dexterity.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.dexterity.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">DEX</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.dexterity.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.stamina.specialisation"></text-field>\r\n        <span class="text left-col">STA</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.stamina.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.stamina.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.quickness.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.quickness.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">QUI</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.quickness.specialisation"></text-field>\r\n    </div>\r\n    <br/>\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.intelligence.specialisation"></text-field>\r\n        <span class="text left-col">INT</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.intelligence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.intelligence.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.presence.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.presence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">PRE</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.presence.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.perception.specialisation"></text-field>\r\n        <span class="text left-col">PER</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.perception.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.perception.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.communication.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.communication.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">COM</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.communication.specialisation"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',iE=nE,sE=[];let rE;function oE(t){rE||(rE=Lh.define({name:eE,template:nE,dependencies:sE})),t.register(rE)}let aE=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.characteristics}),sC,e)}};aE=$S([bh(y),IS(1,vi),OS("design:paramtypes",[cm,Object])],aE);var lE=n(1459),cE={};cE.styleTagTransform=zS(),cE.setAttributes=BS(),cE.insert=US().bind(null,"head"),cE.domAPI=MS(),cE.insertStyleElement=VS(),PS()(lE.Z,cE),lE.Z&&lE.Z.locals&&lE.Z.locals;const hE="fatigue-block",uE='<title text="FATIGUE"></title>\r\n<div class="container grid text">\r\n    <span>Fresh (-0)</span><span class="right"></span><radio-button group="fatigue" state="${model.fatigue == 0 ? \'selected\' : \'unselected\'}" value="0"></radio-button>\r\n    <span>Winded (-0)</span><span class="right">2m</span><radio-button group="fatigue" state="${model.fatigue == 1 ? \'selected\' : \'unselected\'}" value="1"></radio-button>\r\n    <span>Weary (-1)</span><span class="right">10m</span><radio-button group="fatigue" state="${model.fatigue == 2 ? \'selected\' : \'unselected\'}" value="2"></radio-button>\r\n    <span>Tired (-3)</span><span class="right">30m</span><radio-button group="fatigue" state="${model.fatigue == 3 ? \'selected\' : \'unselected\'}" value="3"></radio-button>\r\n    <span>Dazed (-5)</span><span class="right">1h</span><radio-button group="fatigue" state="${model.fatigue == 4 ? \'selected\' : \'unselected\'}" value="4"></radio-button>\r\n    <span>Unconscious</span><span class="right">2h</span><radio-button group="fatigue" state="${model.fatigue == 5 ? \'selected\' : \'unselected\'}" value="5"></radio-button>\r\n</div>\r\n<footer></footer>',dE=uE,pE=[];let fE;function gE(t){fE||(fE=Lh.define({name:hE,template:uE,dependencies:pE})),t.register(fE)}let vE=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),hC,e)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"fatigue"==t.group&&(this.model.fatigue=Number.parseInt(t.value))}))}};vE=$S([bh(w),IS(1,vi),OS("design:paramtypes",[cm,Object])],vE);var mE=n(6903),yE={};yE.styleTagTransform=zS(),yE.setAttributes=BS(),yE.insert=US().bind(null,"head"),yE.domAPI=MS(),yE.insertStyleElement=VS(),PS()(mE.Z,yE),mE.Z&&mE.Z.locals&&mE.Z.locals;const bE="damage-block",wE='<title text="WOUNDS"></title>\r\n<div class="container text">\r\n    <span class="wound-type">Light</span><primary-stat value.two-way="model.lightWounds" min="0" size="s"></primary-stat>\r\n    <span class="wound-type">Medium</span><primary-stat value.two-way="model.mediumWounds" min="0" size="s"></primary-stat>\r\n    <span class="wound-type">Heavy</span><primary-stat value.two-way="model.heavyWounds" min="0" size="s"></primary-stat>\r\n</div>\r\n<footer></footer>',xE=wE,kE=[];let SE;function CE(t){SE||(SE=Lh.define({name:bE,template:wE,dependencies:kE})),t.register(SE)}let AE=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),hC,e)}};AE=$S([bh(k),IS(1,vi),OS("design:paramtypes",[cm,Object])],AE);var EE=n(4397),TE={};TE.styleTagTransform=zS(),TE.setAttributes=BS(),TE.insert=US().bind(null,"head"),TE.domAPI=MS(),TE.insertStyleElement=VS(),PS()(EE.Z,TE),EE.Z&&EE.Z.locals&&EE.Z.locals;const $E="confidence-block",IE='<primary-stat size="l" min="0" value.two-way="model.score" mode="primary-angled" title="Confidence Points"></primary-stat>',OE=IE,RE=[];let PE;function LE(t){PE||(PE=Lh.define({name:$E,template:IE,dependencies:RE})),t.register(PE)}let ME=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.confidence}),gC,e)}};ME=$S([bh(C),IS(1,vi),OS("design:paramtypes",[cm,Object])],ME);var jE=n(7804),UE={};UE.styleTagTransform=zS(),UE.setAttributes=BS(),UE.insert=US().bind(null,"head"),UE.domAPI=MS(),UE.insertStyleElement=VS(),PS()(jE.Z,UE),jE.Z&&jE.Z.locals&&jE.Z.locals;const NE="active-magic-list",BE='<title text="ACTIVE MAGIC"></title>\r\n<div class="container">\r\n    <div class="active-magic grid" repeat.for="magic of model">\r\n        <checkbox size="s" mode="angled" value.two-way="magic.active" title="Active"></checkbox>\r\n        <text-field class="name" value.two-way="magic.name" placeholder="Name"></text-field>\r\n        <primary-stat mode="secondary" value.two-way="magic.penetration" min="0" size="s" title="Penetration" readonly.bind="!magic.active" color-mode="${magic.active ? \'color\' : \'monochrome\'}"></primary-stat>\r\n    </div>\r\n    <input class="add-magic-input" type="text" placeholder="Add active magic" keyup.delegate="keyPressed($event)" value.two-way="newMagicText">\r\n</div>\r\n<footer></footer>',FE=BE,VE=[];let DE;function zE(t){DE||(DE=Lh.define({name:NE,template:BE,dependencies:VE})),t.register(DE)}let qE=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.activeMagic}),mC,e),this.newMagicText="",this.keyPressed=t=>{this.model||(this.model=[]),"Enter"==t.key&&this.newMagicText&&(this.model.push({name:this.newMagicText,penetration:0,active:!0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newMagicText="")}}};qE=$S([bh(E),IS(1,vi),OS("design:paramtypes",[cm,Object])],qE);const HE="stats",ZE='\r\n\r\n\r\n\r\n\r\n\r\n\r\n<abilities-block></abilities-block>\r\n<characteristics-block></characteristics-block>\r\n<fatigue-block></fatigue-block>\r\n<damage-block></damage-block>\r\n<confidence-block></confidence-block>\r\n<active-magic-list></active-magic-list>\r\n\r\n<div style="clear: both;"></div>',WE=ZE,KE=[m,b,x,S,A,T];let _E;function QE(t){_E||(_E=Lh.define({name:HE,template:ZE,dependencies:KE})),t.register(_E)}let GE=class{};GE=$S([bh($)],GE);var XE=n(5185),YE={};YE.styleTagTransform=zS(),YE.setAttributes=BS(),YE.insert=US().bind(null,"head"),YE.domAPI=MS(),YE.insertStyleElement=VS(),PS()(XE.Z,YE),XE.Z&&XE.Z.locals&&XE.Z.locals;const JE="arts-block",tT='<title text="ARTS"></title>\r\n<div class="container grid">\r\n    <checkbox size="xs" mode="angled" value.two-way="model.creo.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.creo.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.creo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.creo.level === 0 ? \'untrained\' : \'\'}">Creo</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.animal.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.animal.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.animal.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span  class="name text ${model.animal.level === 0 ? \'untrained\' : \'\'}">Animal</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.ignem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.ignem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.ignem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.ignem.level === 0 ? \'untrained\' : \'\'}">Ignem</span>\r\n\r\n   \r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.intellego.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.intellego.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.intellego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.intellego.level === 0 ? \'untrained\' : \'\'}">Intellego</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.aquam.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.aquam.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.aquam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.aquam.level === 0 ? \'untrained\' : \'\'}">Aquam</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.imaginem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.imaginem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.imaginem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.imaginem.level === 0 ? \'untrained\' : \'\'}">Imaginem</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.muto.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.muto.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.muto.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.muto.level === 0 ? \'untrained\' : \'\'}">Muto</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.auram.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.auram.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.auram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.auram.level === 0 ? \'untrained\' : \'\'}">Auram</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.mentem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.mentem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.mentem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.mentem.level === 0 ? \'untrained\' : \'\'}">Mentem</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.perdo.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.perdo.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.perdo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.perdo.level === 0 ? \'untrained\' : \'\'}">Perdo</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.corpus.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.corpus.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.corpus.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.corpus.level === 0 ? \'untrained\' : \'\'}">Corpus</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.terram.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.terram.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.terram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.terram.level === 0 ? \'untrained\' : \'\'}">Terram</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.rego.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.rego.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.rego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.rego.level === 0 ? \'untrained\' : \'\'}">Rego</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.herbam.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.herbam.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.herbam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.herbam.level === 0 ? \'untrained\' : \'\'}">Herbam</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.vim.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.vim.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.vim.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.vim.level === 0 ? \'untrained\' : \'\'}">Vim</span>\r\n</div>\r\n<footer></footer>',eT=tT,nT=[];let iT;function sT(t){iT||(iT=Lh.define({name:JE,template:tT,dependencies:nT})),t.register(iT)}let rT=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.arts}),uC,e)}};rT=$S([bh(O),IS(1,vi),OS("design:paramtypes",[cm,Object])],rT);var oT=n(2244),aT={};aT.styleTagTransform=zS(),aT.setAttributes=BS(),aT.insert=US().bind(null,"head"),aT.domAPI=MS(),aT.insertStyleElement=VS(),PS()(oT.Z,aT),oT.Z&&oT.Z.locals&&oT.Z.locals;const lT="spellcasting-modifiers-block",cT='<title text="SPELLCASTING STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Aura</span>\r\n        <span class="text">Stamina Specialisation</span>\r\n        <span class="text" if.bind="showGoodCycle">Good Cycle</span>\r\n        <span class="text">Loud Voice</span>\r\n        <span class="text">Large Gestures</span>\r\n\r\n        <span class="text">Arts</span>\r\n        <span class="text">Ceremonial</span>\r\n        <span class="text">Talisman Bonus</span>\r\n        <span class="text">Similar Spell</span>\r\n        <span class="text">Focus</span>\r\n        <span class="text">Casting Total</span>\r\n\r\n        <span if.bind="!showGoodCycle"></span>\r\n\r\n        <primary-stat value.two-way="model.aura" mode="secondary" prefix-plus.bind="true"></primary-stat></primary-stat>\r\n        <checkbox value.two-way="model.staminaSpecialisation" mode="angled"></checkbox>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="model.positiveCycle" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.loudVoice" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.largeGestures" mode="angled"></checkbox>\r\n\r\n        <text-field class="arts" value.two-way="model.arts" placeholder="Arts"></text-field>\r\n        <checkbox value.two-way="model.ceremonial" mode="angled" color-mode="monochrome"></checkbox>\r\n        <primary-stat value.two-way="model.talismanBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.similarFomulaicSpellBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n        <checkbox value.two-way="model.focus" mode="angled" color-mode="monochrome"></checkbox>\r\n        <primary-stat value.two-way="model.spontaneousCastingTotal" mode="primary-angled" readonly.bind="true" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',hT=cT,uT=[];let dT;function pT(t){dT||(dT=Lh.define({name:lT,template:cT,dependencies:uT})),t.register(dT)}let fT=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellcastingStats}),kC,e)}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};fT=$S([bh(P),IS(1,vi),OS("design:paramtypes",[cm,Object])],fT);var gT=n(7624),vT={};vT.styleTagTransform=zS(),vT.setAttributes=BS(),vT.insert=US().bind(null,"head"),vT.domAPI=MS(),vT.insertStyleElement=VS(),PS()(gT.Z,vT),gT.Z&&gT.Z.locals&&gT.Z.locals;const mT="spell-list",yT='<title text="SPELLS"></title>\r\n<div class="container">\r\n    <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n        <span class="form-header"></span>\r\n        <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n        <checkbox size="xs" value.two-way="spell.focus" title="Focus"></checkbox>\r\n        <checkbox size="xs" value.two-way="spell.ritual" title="Ritual"></checkbox>\r\n        <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n        <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n        <span class="casting-total-label numbers text">+${spell.castingTotal}</span>\r\n        <primary-stat class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></primary-stat>\r\n        <primary-stat class="attunement-bonus" mode="secondary" value.two-way="spell.attunementBonus" min="0" size="xs" color-mode="monochrome" title="Attunement bonus"></primary-stat>\r\n        <text-field class="attunement" value.two-way="spell.attunement" placeholder="Attunement"></text-field>\r\n        <text-field class="masteries" value.two-way="spell.masteries" placeholder="Masteries"></text-field>\r\n        <primary-stat class="mastery-level" mode="secondary" value.two-way="spell.masteryLevel" min="0" size="s" color-mode="monochrome" title="Mastery level"></primary-stat>\r\n        <primary-stat class="xp" mode="secondary" value.two-way="spell.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n        <text-field class="range" value.two-way="spell.range" placeholder="Range"></text-field>\r\n        <text-field class="duration" value.two-way="spell.duration" placeholder="Duration"></text-field>\r\n        <text-field class="target" value.two-way="spell.target" placeholder="Target"></text-field>\r\n        <text-field class="notes" value.two-way="spell.notes" placeholder="Notes" title="${spell.notes}"></text-field>\r\n        <text-field class="sigil" value.two-way="spell.sigil" placeholder="Sigil" title="${spell.sigil}"></text-field>\r\n        <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n        <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n        <cross-button click.delegate="unlearnSpell(spell)" title="Unlearn spell" mode="angled"></cross-button>\r\n    </div>\r\n    <add-item-input placeholder="Add spell" on-item-added.bind="spellAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',bT=yT,wT=[];let xT;function kT(t){xT||(xT=Lh.define({name:mT,template:yT,dependencies:wT})),t.register(xT)}let ST=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spells}),dC,e),this.spellAdded=t=>{this.model.push({name:t,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,notes:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0,onWishlist:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.unlearnSpell=t=>{t.onWishlist=!0}}};ST=$S([bh(M),IS(1,vi),OS("design:paramtypes",[cm,Object])],ST);var CT=n(6073),AT={};AT.styleTagTransform=zS(),AT.setAttributes=BS(),AT.insert=US().bind(null,"head"),AT.domAPI=MS(),AT.insertStyleElement=VS(),PS()(CT.Z,AT),CT.Z&&CT.Z.locals&&CT.Z.locals;const ET="spell-wishlist",TT='<title text="SPELL WISHLIST"></title>\r\n<div class="container">\r\n    <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n        <span class="form-header"></span>\r\n        <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n        <checkbox size="xs" value.two-way="spell.focus" title="Focus"></checkbox>\r\n        <checkbox size="xs" value.two-way="spell.ritual" title="Ritual"></checkbox>\r\n        <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n        <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n        <primary-stat class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></primary-stat>\r\n        <primary-stat class="attunement-bonus" mode="secondary" value.two-way="spell.attunementBonus" min="0" size="xs" color-mode="monochrome" title="Attunement bonus"></primary-stat>\r\n        <text-field class="attunement" value.two-way="spell.attunement" placeholder="Attunement"></text-field>\r\n        <text-field class="masteries" value.two-way="spell.masteries" placeholder="Masteries"></text-field>\r\n        <text-field class="range" value.two-way="spell.range" placeholder="Range"></text-field>\r\n        <text-field class="duration" value.two-way="spell.duration" placeholder="Duration"></text-field>\r\n        <text-field class="target" value.two-way="spell.target" placeholder="Target"></text-field>\r\n        <text-field class="notes" value.two-way="spell.notes" placeholder="Notes" title="${spell.notes}"></text-field>\r\n        <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n        <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n        <cross-button click.delegate="learnSpell(spell)" title="Learn spell"></cross-button>\r\n    </div>\r\n    <add-item-input placeholder="Add spell" on-item-added.bind="spellAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',$T=TT,IT=[];let OT;function RT(t){OT||(OT=Lh.define({name:ET,template:TT,dependencies:IT})),t.register(OT)}let PT=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellWishlist}),pC,e),this.spellAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,notes:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0,onWishlist:!0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.learnSpell=t=>{t.onWishlist=!1}}};PT=$S([bh(U),IS(1,vi),OS("design:paramtypes",[cm,Object])],PT);var LT=n(7266),MT={};MT.styleTagTransform=zS(),MT.setAttributes=BS(),MT.insert=US().bind(null,"head"),MT.domAPI=MS(),MT.insertStyleElement=VS(),PS()(LT.Z,MT),LT.Z&&LT.Z.locals&&LT.Z.locals;const jT="sigil",UT='<div class="container" drop.delegate="onDrop($event)" active-drag.class="dragging" dragenter.delegate="dragging = true" dragleave.delegate="dragging = false">\r\n    <div class="sigil-image-placeholder" if.bind="!model"></div>\r\n    <img class="sigil-image" if.bind="model" src="${model}"/>\r\n</div>',NT=UT,BT=[];let FT;function VT(t){FT||(FT=Lh.define({name:jT,template:UT,dependencies:BT})),t.register(FT)}let DT=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.sigil}),AC,e),this.dragging=!1,this.onDrop=t=>{if(1!=t.dataTransfer.items.length)return;let e=t.dataTransfer.items[0];if("file"==e.kind&&e.type.startsWith("image")){var n=new FileReader;n.onload=()=>{this.model=n.result,this.dragging=!1},n.readAsDataURL(e.getAsFile())}}}};DT=$S([bh(B),IS(1,vi),OS("design:paramtypes",[cm,Object])],DT);const zT="magic",qT='\r\n\r\n\r\n\r\n\r\n\r\n<arts-block></arts-block>\r\n<spellcasting-modifiers-block></spellcasting-modifiers-block>\r\n<spell-list></spell-list>\r\n<spell-wishlist></spell-wishlist>\r\n<sigil></sigil>\r\n\r\n<div style="clear: both;"></div>',HT=qT,ZT=[R,L,j,N,F];let WT;function KT(t){WT||(WT=Lh.define({name:zT,template:qT,dependencies:ZT})),t.register(WT)}let _T=class{};_T=$S([bh(V)],_T);var QT=n(8412),GT={};GT.styleTagTransform=zS(),GT.setAttributes=BS(),GT.insert=US().bind(null,"head"),GT.domAPI=MS(),GT.insertStyleElement=VS(),PS()(QT.Z,GT),QT.Z&&QT.Z.locals&&QT.Z.locals;const XT="lab-stats",YT='<title text="LAB STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Size</span>\r\n        <span class="text">Refinement</span>\r\n        <span class="text">Occupied Size</span>\r\n        <span class="text">Effective Safety</span>\r\n        <span class="text">Living Conditions Modifier</span>\r\n        <span class="text">Specialisation 1</span>\r\n        <span class="text">Specialisation 2</span>\r\n        <span class="text">Art 1 (Any)</span>\r\n        <span class="text">Art 2 (Any)</span>\r\n        <span class="text">Art 3 (Form)</span>\r\n        <span class="text">Art 4 (Form)</span>\r\n\r\n        <primary-stat value.two-way="model.size" mode="primary-angled" min="-3"></primary-stat>\r\n        <primary-stat value.two-way="model.refinement" mode="primary-angled" min="0"></primary-stat>\r\n        <primary-stat value.two-way="model.occupiedSize" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.effectiveSafety" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.livingConditionsModifier" mode="secondary-angled" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.specialisation1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.specialisation2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art3.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art4.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art3.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art4.name" placeholder="Modifier"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',JT=YT,t$=[];let e$;function n$(t){e$||(e$=Lh.define({name:XT,template:YT,dependencies:t$})),t.register(e$)}let i$=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),wC,e)}};i$=$S([bh(z),IS(1,vi),OS("design:paramtypes",[cm,Object])],i$);var s$=n(4467),r$={};r$.styleTagTransform=zS(),r$.setAttributes=BS(),r$.insert=US().bind(null,"head"),r$.domAPI=MS(),r$.insertStyleElement=VS(),PS()(s$.Z,r$),s$.Z&&s$.Z.locals&&s$.Z.locals;const o$="research-projects",a$='<title text="RESEARCH PROJECTS"></title>\r\n<div class="container">\r\n    <primary-stat class="aura-bonus" mode="secondary" value.two-way="model.auraBonus" size="s" title="Aura Bonus" prefix-plus.bind="true"></primary-stat>\r\n\r\n    <div class="project grid" repeat.for="project of model.researchProjects">\r\n        <text-field class="name" value.two-way="project.name" placeholder="Name"></text-field>\r\n        <text-field class="arts" value.two-way="project.arts" placeholder="Arts"></text-field>\r\n        <text-field class="prerequisites" value.two-way="project.prerequisites" placeholder="Prereq"></text-field>\r\n        <primary-stat class="level" mode="secondary" value.two-way="project.level" min="1" size="m" title="Level"></primary-stat>\r\n\r\n        <checkbox value.two-way="project.focus" title="Focus"></checkbox>\r\n        <primary-stat class="specialisation-bonus" mode="secondary" value.two-way="project.specialisationBonus" min="0" size="s" title="Lab Specialisation Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <checkbox value.two-way="project.intelligenceSpecialisation" title="Intelligence Specialisation"></checkbox>\r\n        <checkbox value.two-way="project.magicTheorySpecialisation" title="Magic Theory Specialisation"></checkbox>\r\n        <checkbox value.two-way="project.talisman" title="Talisman"></checkbox>\r\n        <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="project.newWork" title="New Invention"></checkbox>\r\n        <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="project.experiment" title="Experiment"></checkbox>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="project.positiveCycle" title="Good Cycle"></checkbox>\r\n        <checkbox value.two-way="project.nocturnal" title="Nocturnal - An owl, the magas daily cycle is the opposite of most folk  she\r\n        works at night and sleeps during the day. This has the advantage that the night\r\n        is quieter and presents fewer distractions  gain +2 to the Lab Total for\r\n        the season. Due to lack of sunlight and daylight living, however, she suffers a 1\r\n        penalty to her Living Conditions modifier for any year in which she has taken at\r\n        least one Nocturnal season. She also has trouble functioning during the daytime;\r\n        when dawn breaks, she loses a Long-Term Fatigue level and gains one extra botch\r\n        die on all activities for the day. She will likely not appreciate being woken up in\r\n        daylight hours. This routine is commonly taken by characters with the Nocturnal\r\n        Personality Flaw."></checkbox>\r\n        <primary-stat class="similar-research-bonus" mode="secondary" value.two-way="project.similarResearchBonus" min="0" size="s" title="Similar Research Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <text-field class="material" value.two-way="project.material" placeholder="Material"></text-field>\r\n        <primary-stat class="material-bonus" mode="secondary" value.two-way="project.materialBonus" min="0" size="s" title="Material Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <text-field class="shape" value.two-way="project.shape" placeholder="Shape"></text-field>\r\n        <primary-stat class="shape-bonus" mode="secondary" value.two-way="project.shapeBonus" min="0" size="s" title="Shape Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat class="lab-assistant-bonus" mode="secondary" value.two-way="project.labAssistantBonus" min="0" size="s" title="Lab Assistant Bonus" prefix-plus.bind="true"></primary-stat>\r\n        \r\n        <primary-stat class="total" mode="primary" readonly.bind="true" value.two-way="project.labTotal" min="0" size="m" title="Lab Total"></primary-stat>\r\n        <primary-stat class="surplus" mode="secondary" readonly.bind="true" value.two-way="project.surplusLabTotal" min="0" size="s" title="Surplus Lab Total"></primary-stat>\r\n        <primary-stat class="accumulated-total" mode="secondary" value.two-way="project.accumulatedLabTotal" min="0" size="s" title="Accumulated Lab Total"></primary-stat>\r\n        \r\n        <text-field class="description" value.two-way="project.description" placeholder="Description" title="${project.description}"></text-field>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add project" keyup.delegate="keyPressed($event)" value.two-way="newProjectText">\r\n</div>\r\n<footer></footer>',l$=a$,c$=[];let h$;function u$(t){h$||(h$=Lh.define({name:o$,template:a$,dependencies:c$})),t.register(h$)}let d$=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),wC,e),this.newProjectText="",this.keyPressed=t=>{"Enter"==t.key&&this.newProjectText&&(this.model.researchProjects.push({name:this.newProjectText,description:"",accumulatedLabTotal:0,surplusLabTotal:0,artModifier:0,arts:"",prerequisites:"",focus:!1,labTotal:0,labAssistantBonus:0,magicTheorySpecialisation:!1,intelligenceSpecialisation:!0,material:"",materialBonus:0,shape:"",shapeBonus:0,similarResearchBonus:0,specialisationBonus:0,talisman:!1,level:1,experiment:!1,newWork:!0,nocturnal:!1,positiveCycle:!1}),this.newProjectText="")}}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};d$=$S([bh(H),IS(1,vi),OS("design:paramtypes",[cm,Object])],d$);var p$=n(6964),f$={};f$.styleTagTransform=zS(),f$.setAttributes=BS(),f$.insert=US().bind(null,"head"),f$.domAPI=MS(),f$.insertStyleElement=VS(),PS()(p$.Z,f$),p$.Z&&p$.Z.locals&&p$.Z.locals;const g$="lab-modifications-list",v$='<title text="LAB MODIFICATIONS"></title>\r\n<div class="container">\r\n    <input class="add-item-input add-modifier-input" type="text" keyup.delegate="keyPressed($event, \'modifier\')" value.two-way="newModifierText" title="Add Modifier Column">\r\n    <div class="modifier-titles">\r\n        <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n    </div>\r\n\r\n    <label class="text title">VIRTUES</label>\r\n    <div class="virtue grid" repeat.for="virtue of model.virtues">\r\n        <text-field class="name" value.two-way="virtue.name" placeholder="Name"></text-field>\r\n        <text-field class="category" value.two-way="virtue.category" placeholder="Category"></text-field>\r\n        <text-field class="description" value.two-way="virtue.description" placeholder="Description"></text-field>\r\n        <primary-stat class="cost" mode="secondary" value.two-way="virtue.cost" min="0" size="s" title="Cost"></primary-stat>\r\n        <primary-stat class="modifier" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of virtue.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></primary-stat>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add virtue" keyup.delegate="keyPressed($event, \'virtue\')" value.two-way="newVirtueText">\r\n\r\n    <label class="text title">FLAWS</label>\r\n    <div class="flaw grid" repeat.for="flaw of model.flaws">\r\n        <text-field class="name" value.two-way="flaw.name" placeholder="Name"></text-field>\r\n        <text-field class="category" value.two-way="flaw.category" placeholder="Category"></text-field>\r\n        <text-field class="description" value.two-way="flaw.description" placeholder="Description"></text-field>\r\n        <primary-stat class="cost" mode="secondary" value.two-way="flaw.cost" max="0" size="s" title="Cost"></primary-stat>\r\n        <primary-stat class="modifier" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of flaw.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></primary-stat>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add flaw" keyup.delegate="keyPressed($event, \'flaw\')" value.two-way="newFlawText">\r\n\r\n    <div class="modifier-totals">\r\n        <span class="numbers modifier-total" repeat.for="total of totals" class="modifier-title text">${total}</span>\r\n    </div>\r\n</div>\r\n<footer></footer>',m$=v$,y$=[];let b$;function w$(t){b$||(b$=Lh.define({name:g$,template:v$,dependencies:y$})),t.register(b$)}let x$=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),wC,e),this.newVirtueText="",this.newFlawText="",this.newModifierText="",this.keyPressed=(t,e)=>{"Enter"==t.key&&("virtue"==e&&this.newVirtueText&&(this.model.virtues.push({name:this.newVirtueText,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Virtue"}),this.model.virtues.sort(((t,e)=>t.name.localeCompare(e.name))),this.newVirtueText=""),"flaw"==e&&this.newFlawText&&(this.model.flaws.push({name:this.newFlawText,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Flaw"}),this.model.flaws.sort(((t,e)=>t.name.localeCompare(e.name))),this.newFlawText=""),"modifier"==e&&this.newModifierText&&(this.model.availableModifiers.push({name:this.newModifierText}),this.newModifierText=""))}}get totals(){return this.model?WC(this.model).map((t=>t.rating)):[]}};x$=$S([bh(W),IS(1,vi),OS("design:paramtypes",[cm,Object])],x$);var k$=n(2820),S$={};S$.styleTagTransform=zS(),S$.setAttributes=BS(),S$.insert=US().bind(null,"head"),S$.domAPI=MS(),S$.insertStyleElement=VS(),PS()(k$.Z,S$),k$.Z&&k$.Z.locals&&k$.Z.locals;const C$="lab-description-block",A$='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',E$=A$,T$=[];let $$;function I$(t){$$||($$=Lh.define({name:C$,template:A$,dependencies:T$})),t.register($$)}let O$=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),wC,e)}};O$=$S([bh(_),IS(1,vi),OS("design:paramtypes",[cm,Object])],O$);const R$="lab",P$='\r\n\r\n\r\n\r\n\r\n<lab-stats></lab-stats>\r\n<research-projects></research-projects>\r\n<lab-modifications-list></lab-modifications-list>\r\n<lab-description-block></lab-description-block>\r\n\r\n<div style="clear: both;"></div>',L$=P$,M$=[q,Z,K,Q];let j$;function U$(t){j$||(j$=Lh.define({name:R$,template:P$,dependencies:M$})),t.register(j$)}let N$=class{};N$=$S([bh(G)],N$);var B$=n(8985),F$={};F$.styleTagTransform=zS(),F$.setAttributes=BS(),F$.insert=US().bind(null,"head"),F$.domAPI=MS(),F$.insertStyleElement=VS(),PS()(B$.Z,F$),B$.Z&&B$.Z.locals&&B$.Z.locals;const V$="carried-belongings-block",D$='<text-box title="CARRIED" text.two-way="model.carried"></text-box>',z$=D$,q$=[];let H$;function Z$(t){H$||(H$=Lh.define({name:V$,template:D$,dependencies:q$})),t.register(H$)}let W$=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),EC,e)}};W$=$S([bh(Y),IS(1,vi),OS("design:paramtypes",[cm,Object])],W$);var K$=n(5204),_$={};_$.styleTagTransform=zS(),_$.setAttributes=BS(),_$.insert=US().bind(null,"head"),_$.domAPI=MS(),_$.insertStyleElement=VS(),PS()(K$.Z,_$),K$.Z&&K$.Z.locals&&K$.Z.locals;const Q$="sanctum-belongings-block",G$='<text-box title="SANCTUM" text.two-way="model.inSanctum"></text-box>',X$=G$,Y$=[];let J$;function tI(t){J$||(J$=Lh.define({name:Q$,template:G$,dependencies:Y$})),t.register(J$)}let eI=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),EC,e)}};eI=$S([bh(tt),IS(1,vi),OS("design:paramtypes",[cm,Object])],eI);var nI=n(1860),iI={};iI.styleTagTransform=zS(),iI.setAttributes=BS(),iI.insert=US().bind(null,"head"),iI.domAPI=MS(),iI.insertStyleElement=VS(),PS()(nI.Z,iI),nI.Z&&nI.Z.locals&&nI.Z.locals;const sI="vis-block",rI='<title text="VIS"></title>\r\n<div class="container">\r\n    <div class="vis grid" repeat.for="vis of model.vis">\r\n        <text-field class="name" value.two-way="vis.name"></text-field>\r\n        <primary-stat class="lab-vis" mode="secondary" value.two-way="vis.amountInLab" min="0" size="s" title="In lab"></primary-stat>\r\n        <primary-stat class="personal-vis" mode="secondary" value.two-way="vis.amountOnPerson" min="0" size="s" title="On person"></primary-stat>\r\n        <text-field class="income" value.two-way="vis.income" placeholder="Income" title="${vis.income}"></text-field>\r\n        <text-field class="notes" value.two-way="vis.notes" placeholder="Notes" title="${vis.notes}"></text-field>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add vis type" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',oI=rI,aI=[];let lI;function cI(t){lI||(lI=Lh.define({name:sI,template:rI,dependencies:aI})),t.register(lI)}let hI=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),EC,e),this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.model||(this.model={carried:"",inSanctum:"",vis:[]}),this.model.vis||(this.model.vis=[]),this.model.vis.push({name:this.newItemText,amountInLab:0,amountOnPerson:0,income:"",notes:""}),this.model.vis.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};hI=$S([bh(nt),IS(1,vi),OS("design:paramtypes",[cm,Object])],hI);const uI="belongings",dI='\r\n\r\n\r\n\r\n<carried-belongings-block></carried-belongings-block>\r\n<sanctum-belongings-block></sanctum-belongings-block>\r\n<vis-block></vis-block>\r\n\r\n<div style="clear: both;"></div>',pI=dI,fI=[J,et,it];let gI;function vI(t){gI||(gI=Lh.define({name:uI,template:dI,dependencies:fI})),t.register(gI)}let mI=class{};mI=$S([bh(st)],mI);var yI=n(3349),bI={};bI.styleTagTransform=zS(),bI.setAttributes=BS(),bI.insert=US().bind(null,"head"),bI.domAPI=MS(),bI.insertStyleElement=VS(),PS()(yI.Z,bI),yI.Z&&yI.Z.locals&&yI.Z.locals;const wI="notes-block",xI='<text-box title="NOTES" text.two-way="model"></text-box>',kI=xI,SI=[];let CI;function AI(t){CI||(CI=Lh.define({name:wI,template:xI,dependencies:SI})),t.register(CI)}let EI=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.notes}),bC,e)}};EI=$S([bh(ot),IS(1,vi),OS("design:paramtypes",[cm,Object])],EI);var TI=n(3260),$I={};$I.styleTagTransform=zS(),$I.setAttributes=BS(),$I.insert=US().bind(null,"head"),$I.domAPI=MS(),$I.insertStyleElement=VS(),PS()(TI.Z,$I),TI.Z&&TI.Z.locals&&TI.Z.locals;const II="background-block",OI='<text-box title="BACKGROUND" text.two-way="model"></text-box>',RI=OI,PI=[];let LI;function MI(t){LI||(LI=Lh.define({name:II,template:OI,dependencies:PI})),t.register(LI)}let jI=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.background}),CC,e)}};jI=$S([bh(lt),IS(1,vi),OS("design:paramtypes",[cm,Object])],jI);var UI=n(7600),NI={};NI.styleTagTransform=zS(),NI.setAttributes=BS(),NI.insert=US().bind(null,"head"),NI.domAPI=MS(),NI.insertStyleElement=VS(),PS()(UI.Z,NI),UI.Z&&UI.Z.locals&&UI.Z.locals;const BI="quest-list",FI='<title text="QUESTS"></title>\r\n<div class="container">\r\n    <div class="quest grid" repeat.for="quest of model">\r\n        <checkbox mode="angled" size="xs" value.two-way="quest.focused" title="Focused"></checkbox>\r\n        <primary-stat class="priority" mode="secondary" value.two-way="quest.priority" min="1" size="xs" title="Priority"></primary-stat>\r\n        <text-field class="name" value.two-way="quest.name" placeholder="Name" title="${quest.name}"></text-field>\r\n    </div>\r\n    <add-item-input placeholder="Add quest" on-item-added.bind="questAdded">\r\n</div>\r\n<footer></footer>',VI=FI,DI=[];let zI;function qI(t){zI||(zI=Lh.define({name:BI,template:FI,dependencies:DI})),t.register(zI)}let HI=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.quests}),IC,e),this.questAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,focused:!1,priority:0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))).sort(((t,e)=>t.priority-e.priority))}}};HI=$S([bh(ht),IS(1,vi),OS("design:paramtypes",[cm,Object])],HI);var ZI=n(280),WI={};WI.styleTagTransform=zS(),WI.setAttributes=BS(),WI.insert=US().bind(null,"head"),WI.domAPI=MS(),WI.insertStyleElement=VS(),PS()(ZI.Z,WI),ZI.Z&&ZI.Z.locals&&ZI.Z.locals;const KI="npc-list",_I='<title text="Persons of Interest"></title>\r\n<div class="container">\r\n    <div class="npc grid" repeat.for="npc of model">\r\n        <text-field class="name" value.two-way="npc.name" placeholder="Name" title="${npc.name}"></text-field>\r\n        <text-field class="description" value.two-way="npc.description" placeholder="Description" title="${npc.description}"></text-field>\r\n        <stat-info-button source.bind="npc" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <add-item-input placeholder="Add person" on-item-added.bind="npcAdded">\r\n</div>\r\n<footer></footer>',QI=_I,GI=[];let XI;function YI(t){XI||(XI=Lh.define({name:KI,template:_I,dependencies:GI})),t.register(XI)}let JI=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.npcs}),OC,e),this.npcAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};JI=$S([bh(dt),IS(1,vi),OS("design:paramtypes",[cm,Object])],JI);const tO="notes",eO='\r\n\r\n\r\n\r\n\r\n<notes-block></notes-block>\r\n<background-block></background-block>\r\n<quest-list></quest-list>\r\n<npc-list></npc-list>\r\n\r\n<div style="clear: both;"></div>',nO=eO,iO=[at,ct,ut,pt];let sO;function rO(t){sO||(sO=Lh.define({name:tO,template:eO,dependencies:iO})),t.register(sO)}let oO=class{};oO=$S([bh(ft)],oO);var aO=n(8840),lO={};lO.styleTagTransform=zS(),lO.setAttributes=BS(),lO.insert=US().bind(null,"head"),lO.domAPI=MS(),lO.insertStyleElement=VS(),PS()(aO.Z,lO),aO.Z&&aO.Z.locals&&aO.Z.locals;const cO="xp-list",hO='<title text="XP ENTRIES"></title>\r\n<div class="container">\r\n    <div class="xp-entry grid" repeat.for="entry of planningEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n        <text-field class="plans" value.two-way="entry.plans" placeholder="Plans"></text-field>\r\n    </div>\r\n\r\n    <div class="separator"></div>\r\n    <cross-button click.delegate="deletePreviousEntries()" title="Delete previous entries" mode="angled"></cross-button>\r\n\r\n    <div class="past-xp-entry grid" repeat.for="entry of pastEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>',uO=hO,dO=[];let pO;function fO(t){pO||(pO=Lh.define({name:cO,template:hO,dependencies:dO})),t.register(pO)}let gO=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.xpEntries}),yC,e),this.deletePreviousEntries=()=>{let t=this.state.present.character.ageing.currentYear;this.model=this.model.filter((e=>e.year>=t))}}get planningEntries(){return this.model?this.model.filter((t=>t.planningMode)):[]}get pastEntries(){return this.model?this.model.filter((t=>!t.planningMode)):[]}};gO=$S([bh(vt),IS(1,vi),OS("design:paramtypes",[cm,Object])],gO);var vO=n(2012),mO={};mO.styleTagTransform=zS(),mO.setAttributes=BS(),mO.insert=US().bind(null,"head"),mO.domAPI=MS(),mO.insertStyleElement=VS(),PS()(vO.Z,mO),vO.Z&&vO.Z.locals&&vO.Z.locals;const yO="age-block",bO='<div class="container grid">\r\n    <primary-stat class="small-text" mode="secondary-angled" size="m" value.two-way="model.birthYear" min="0" max="2000" title="Birth Year"></primary-stat>\r\n    <div>\r\n        <primary-stat mode="secondary" size="s" value.two-way="model.age" readonly.bind="true" min="0" title="Age"></primary-stat>\r\n        <primary-stat mode="secondary" size="s" value.two-way="model.apparentAge" min="0" title="Apparent Age"></primary-stat>\r\n    </div>\r\n    <primary-stat class="small-text" mode="secondary-angled" size="m" value.two-way="model.currentYear" min="0" max="2000" title="Current Year"></primary-stat>\r\n\r\n    <primary-stat mode="secondary" size="s" value.two-way="model.livingConditionModifier" prefix-plus.bind="true" title="Living condition modifier"></primary-stat>\r\n    <primary-stat mode="primary" value.two-way="model.ageingRollModifier" prefix-plus.bind="true" title="Ageing roll bonus" readonly.bind="true"></primary-stat>\r\n    <primary-stat mode="secondary" size="s" value.two-way="model.longevityModifier" min="0" prefix-plus.bind="true" title="Longevity ritual modifier"></primary-stat>\r\n\r\n    <checkbox class="left" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 1" title="Decrepitude level 1"></checkbox>\r\n    <primary-stat mode="primary" value.two-way="model.decrepitudePoints" min="0" title="Decrepitude points"></primary-stat>\r\n    <checkbox class="right" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 5" title="Decrepitude level 5"></checkbox>\r\n\r\n    <checkbox class="right top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 2" title="Decrepitude level 2"></checkbox>\r\n    <checkbox class="bottom" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 3" title="Decrepitude level 3"></checkbox>\r\n    <checkbox class="left top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 4" title="Decrepitude level 4"></checkbox>\r\n</div>',wO=bO,xO=[];let kO;function SO(t){kO||(kO=Lh.define({name:yO,template:bO,dependencies:xO})),t.register(kO)}let CO=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.ageing}),fC,e)}};CO=$S([bh(yt),IS(1,vi),OS("design:paramtypes",[cm,Object])],CO);const AO="progression",EO='\r\n\r\n\r\n<age-block></age-block>\r\n<xp-list></xp-list>\r\n\r\n<div style="clear: both;"></div>',TO=EO,$O=[mt,bt];let IO;function OO(t){IO||(IO=Lh.define({name:AO,template:EO,dependencies:$O})),t.register(IO)}let RO=class{};RO=$S([bh(wt)],RO);var PO=n(6019),LO={};LO.styleTagTransform=zS(),LO.setAttributes=BS(),LO.insert=US().bind(null,"head"),LO.domAPI=MS(),LO.insertStyleElement=VS(),PS()(PO.Z,LO),PO.Z&&PO.Z.locals&&PO.Z.locals;const MO="talisman-block",jO='<title text="TALISMAN"></title>\r\n<div class="container">\r\n    <primary-stat class="invested-vis" mode="primary" value.two-way="model.investedVis" min="0" size="m" title="Invested vis"></primary-stat>\r\n    <primary-stat class="spent-vis" mode="secondary" value.two-way="model.spentVis" min="0" max.bind="model.investedVis" size="s" title="Spent vis"></primary-stat>\r\n    <text-field class="description" value.two-way="model.description" placeholder="Description" title="${model.description}"></text-field>\r\n\r\n    <div class="bonuses">\r\n        <span class="title text">Bonuses</span>\r\n        <div class="bonus grid" repeat.for="bonus of model.bonuses">\r\n            <checkbox mode="angled" size="xs" value.two-way="bonus.instilled" title="Instilled"></checkbox>\r\n            <text-field class="name" value.two-way="bonus.name" placeholder="Name" title="${bonus.name}"></text-field>\r\n            <primary-stat class="bonus-modifier" mode="secondary" value.two-way="bonus.bonus" min="1" size="s" title="Bonus" prefix-plus.bind="true"></primary-stat>\r\n            <text-field class="source" value.two-way="bonus.source" placeholder="Source"></text-field>\r\n            <text-field class="notes" value.two-way="bonus.notes" placeholder="Notes" title="${bonus.notes}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="bonusAdded" placeholder="Add bonus"></add-item-input>\r\n    </div>\r\n\r\n    <div class="effects">\r\n        <span class="title text">Effects</span>\r\n        <div class="effect grid" repeat.for="effect of model.effects">\r\n            <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n            <primary-stat class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></primary-stat>\r\n            <primary-stat class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></primary-stat>\r\n            <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n            <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n            <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n            <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n            <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="effectAdded" placeholder="Add effect"></add-item-input>\r\n    </div>\r\n</div>\r\n<footer></footer>',UO=jO,NO=[];let BO;function FO(t){BO||(BO=Lh.define({name:MO,template:jO,dependencies:NO})),t.register(BO)}let VO=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.talisman}),TC,e),this.bonusAdded=t=>{this.model.bonuses.push({name:t,bonus:1,instilled:!1,source:"",notes:""}),this.model.bonuses.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=t=>{this.model.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),this.model.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};VO=$S([bh(kt),IS(1,vi),OS("design:paramtypes",[cm,Object])],VO);var DO=n(4769),zO={};zO.styleTagTransform=zS(),zO.setAttributes=BS(),zO.insert=US().bind(null,"head"),zO.domAPI=MS(),zO.insertStyleElement=VS(),PS()(DO.Z,zO),DO.Z&&DO.Z.locals&&DO.Z.locals;const qO="magic-items-block",HO='<title text="MAGIC ITEMS"></title>\r\n<div class="container">\r\n    <div class="magic-item grid" repeat.for="magicItem of model">\r\n        <text-field class="name" value.two-way="magicItem.name" placeholder="Name"></text-field>\r\n        <primary-stat class="invested-vis" mode="primary" value.two-way="magicItem.investedVis" min="0" size="m" title="Invested vis"></primary-stat>\r\n        <primary-stat class="spent-vis" mode="secondary" value.two-way="magicItem.spentVis" min="0" max.bind="magicItem.investedVis" size="s" title="Spent vis"></primary-stat>\r\n        <text-field class="description" value.two-way="magicItem.description" placeholder="Description" title="${magicItem.description}"></text-field>\r\n        <span></span>\r\n\r\n        <div class="effects">\r\n            <span class="title text">Effects</span>\r\n            <div class="effect grid" repeat.for="effect of magicItem.effects">\r\n                <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n                <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n                <primary-stat class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></primary-stat>\r\n                <primary-stat class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></primary-stat>\r\n                <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n                <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n                <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n                <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n                <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n            </div>\r\n            <add-item-input on-item-added.bind="effectAdded" parent.bind="magicItem" placeholder="Add effect"></add-item-input>\r\n        </div>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add items"></add-item-input>\r\n</div>\r\n<footer></footer>',ZO=HO,WO=[];let KO;function _O(t){KO||(KO=Lh.define({name:qO,template:HO,dependencies:WO})),t.register(KO)}let QO=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.magicItems}),$C,e),this.itemAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",investedVis:0,spentVis:0,effects:[]}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=(t,e)=>{e.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),e.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};QO=$S([bh(Ct),IS(1,vi),OS("design:paramtypes",[cm,Object])],QO);const GO="enchantments",XO='\r\n\r\n\r\n<talisman-block></talisman-block>\r\n<magic-items-block></magic-items-block>\r\n\r\n<div style="clear: both;"></div>',YO=XO,JO=[St,At];let tR;function eR(t){tR||(tR=Lh.define({name:GO,template:XO,dependencies:JO})),t.register(tR)}let nR=class{};nR=$S([bh(Et)],nR);const iR="my-app",sR='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<page-header></page-header>\r\n\r\n<div class="page-view">\r\n    <au-viewport name="main" default="description"></au-viewport>\r\n</div>\r\n\r\n<rune-edge></rune-edge>\r\n\r\n<button click.delegate="undo()" disabled.bind="state.past.length == 0">Undo</button>\r\n<button click.delegate="redo()" disabled.bind="state.future.length == 0">Redo</button>\r\n<button click.delegate="save()">Save As</button>\r\n<button click.delegate="load()">Load</button>\r\n<button click.delegate="newCharacter()">Create New Character</button>\r\n<character-type-selector></character-type-selector>\r\n\r\n<input type=\'file\' accept=\'.json\' files.bind="selectedFiles" ref="fileInput" style="display: none;"><br>',rR=sR,oR=[e,g,I,D,X,rt,gt,xt,Tt];let aR;function lR(t){aR||(aR=Lh.define({name:iR,template:sR,dependencies:oR})),t.register(aR)}let cR=class{constructor(t){this.store=t,this.middlewareRegistered=!1,this.isStandalone=window.matchMedia("(display-mode: standalone)").matches,this.undo=()=>{this.store.dispatch(Kv,-1)},this.redo=()=>{this.store.dispatch(Kv,1)},this.save=async()=>{if(this.isStandalone){const t={suggestedName:"character sheet.ars",types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};this.fileHandle=await window.showSaveFilePicker(t),await this.saveFile(this.state),this.middlewareRegistered||(this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),Yv.After),this.isInitialized=!0)}else!function(t,e){const n=document.createElement("a"),i=e.split(".").pop();n.href=URL.createObjectURL(new Blob([t],{type:`text/${"txt"===i?"plain":i}`})),n.download=e,n.click(),n.remove()}(JSON.stringify(this.state.present,null,4),"character sheet.ars")},this.load=async()=>{if(this.isStandalone){const t={types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};let[e]=await window.showOpenFilePicker(t);this.fileHandle=e,this.isInitialized=!1,this.middlewareRegistered||this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),Yv.After),this.store.dispatch(nC,await this.fileHandle.getFile())}else this.fileInput.click(),this.fileInput.onchange=this.fileInputChanged},this.newCharacter=async()=>{this.isStandalone&&(this.fileHandle=null),await this.store.dispatch(eC),this.isStandalone&&await this.save()},this.fileInputChanged=()=>{this.theFile.text().then((t=>this.store.dispatch(xC,t)))},this.isInitialized=!1,this.fileStorageMiddlewareFactory=()=>(this.middlewareRegistered=!0,(t,e,n)=>{this.isInitialized?(console.log("Saving file to disk"),this.saveFile(t)):this.isInitialized=!0}),this.saveFile=async t=>{if(this.fileHandle){var e=await this.fileHandle.createWritable();await e.write(JSON.stringify(t.present,null,4)),await e.close()}else console.log("Could not save - file handle not set")},this.store.registerAction("createNewCharacter",eC),this.store.registerAction("loadCharacter",iC),this.store.registerAction("loadCharacterFromFile",nC),this.store.registerAction("importCharacter",xC),this.store.registerAction("updateCharacteristics",sC),this.store.registerAction("updateAbilities",rC),this.store.registerAction("updateVirtues",aC),this.store.registerAction("updateFlaws",lC),this.store.registerAction("updateDescription",cC),this.store.registerAction("updatePhysicalStatus",hC),this.store.registerAction("updateArts",uC),this.store.registerAction("updateSpells",dC),this.store.registerAction("updateSpellWishlist",pC),this.store.registerAction("updatePersonalityTraits",oC),this.store.registerAction("updateAgeing",fC),this.store.registerAction("updateConfidence",gC),this.store.registerAction("updateWarping",vC),this.store.registerAction("updateActiveMagic",mC),this.store.registerAction("updateXpEntries",yC),this.store.registerAction("updateNotes",bC),this.store.registerAction("updateLab",wC),this.store.registerAction("updateSpellcastingStats",kC),this.store.registerAction("updateCharacterType",SC),this.store.registerAction("updateBackground",CC),this.store.registerAction("updateSigil",AC),this.store.registerAction("updateBelongings",EC),this.store.registerAction("updateTalisman",TC),this.store.registerAction("updateMagicItems",$C),this.store.registerAction("updateQuests",IC),this.store.registerAction("updateNpcs",OC),this.isStandalone?this.registerFileLaunchHandler():(this.store.registerAction("rehydrateFromLocalStorage",nm),t.registerMiddleware(em,Yv.After,{key:"character-sheets"}),t.dispatch(nm,"character-sheets"))}registerFileLaunchHandler(){let t=window.launchQueue;t&&t.setConsumer((async t=>{const[e]=t.files;if(e){this.fileHandle=e;const t=await e.getFile();t&&(this.store.dispatch(nC,t),this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),Yv.After))}}))}get theFile(){return this.selectedFiles&&this.selectedFiles.length>0?this.selectedFiles[0]:null}};cR=$S([bh($t),um(),OS("design:paramtypes",[cm])],cR);var hR=n(288),uR={};uR.styleTagTransform=zS(),uR.setAttributes=BS(),uR.insert=US().bind(null,"head"),uR.domAPI=MS(),uR.insertStyleElement=VS(),PS()(hR.Z,uR),hR.Z&&hR.Z.locals&&hR.Z.locals;const dR="checkbox",pR="<div class=\"container ${value ? 'checked' : 'unchecked'} ${readonly ? 'readonly' : ''} ${colorMode} ${size} ${mode}\" pointerup.delegate=\"toggle()\">\r\n</div>",fR=pR,gR=[];let vR;function mR(t){vR||(vR=Lh.define({name:dR,template:pR,dependencies:gR})),t.register(vR)}class yR{constructor(){this.colorMode="color"}}$S([jl,OS("design:type",String)],yR.prototype,"colorMode",void 0);let bR=class extends yR{constructor(){super(...arguments),this.value=!1,this.size="m",this.mode="regular",this.readonly=!1,this.toggle=()=>{this.readonly||(this.value=!this.value)}}};$S([jl,OS("design:type",Boolean)],bR.prototype,"value",void 0),$S([jl,OS("design:type",String)],bR.prototype,"size",void 0),$S([jl,OS("design:type",String)],bR.prototype,"mode",void 0),$S([jl,OS("design:type",Boolean)],bR.prototype,"readonly",void 0),bR=$S([bh(It)],bR);var wR=n(2001),xR={};xR.styleTagTransform=zS(),xR.setAttributes=BS(),xR.insert=US().bind(null,"head"),xR.domAPI=MS(),xR.insertStyleElement=VS(),PS()(wR.Z,xR),wR.Z&&wR.Z.locals&&wR.Z.locals;const kR="list",SR='<title text.bind="title"></title>\r\n<div class="container">\r\n    <div repeat.for="item of items">\r\n        <text-field class="list-entry" value.two-way="item.name" title="${item.name}"></text-field>\r\n    </div>\r\n    <input type="text" class="add-item-input" placeholder="Add item" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',CR=SR,AR=[];let ER;function TR(t){ER||(ER=Lh.define({name:kR,template:SR,dependencies:AR})),t.register(ER)}let $R=class{constructor(){this.items=[],this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.items.push({name:this.newItemText}),this.items.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};$S([jl,OS("design:type",String)],$R.prototype,"title",void 0),$S([jl,OS("design:type",Array)],$R.prototype,"items",void 0),$R=$S([bh(Ot)],$R);var IR=n(8908),OR={};OR.styleTagTransform=zS(),OR.setAttributes=BS(),OR.insert=US().bind(null,"head"),OR.domAPI=MS(),OR.insertStyleElement=VS(),PS()(IR.Z,OR),IR.Z&&IR.Z.locals&&IR.Z.locals;const RR="primary-stat",PR='<div class="container ${active === true ? \'active\' : \'\'} ${readonly ? \'readonly\' : \'\'} ${mode} ${colorMode} ${size}"\r\n     pointerdown.delegate="press()"\r\n     ref="containerElement">\r\n    <span class="content numbers">${getValuePrefix()+value}</div>\r\n</div>\r\n<div class="overlay" if.bind="active"  pointerup.delegate="release()" pointermove.delegate="move($event)"></div>',LR=PR,MR=[];let jR;function UR(t){jR||(jR=Lh.define({name:RR,template:PR,dependencies:MR})),t.register(jR)}let NR=class extends yR{constructor(t){super(),this.ea=t,this.max=99,this.min=-99,this.mode="primary-angled",this.size="m",this.prefixPlus=!1,this.readonly=!1,this.active=!1,this.delta=0,this.press=()=>{this.readonly||(this.active=!0,this.originalValue=this.value,this.delta=0,window.addEventListener("pointerout",this.checkPointerOutsideWindow))},this.checkPointerOutsideWindow=t=>{(t.clientY<=0||t.clientX<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(window.removeEventListener("pointerout",this.checkPointerOutsideWindow),this.release())},this.release=()=>{this.readonly||(this.active=!1)},this.move=t=>{if(!this.active||this.readonly)return;this.delta+=t.movementY;let e=Math.round(this.originalValue-this.delta/10);this.value=Math.max(this.min,Math.min(this.max,e)),this.ea.publish("ui-interaction")},this.getValuePrefix=()=>this.prefixPlus&&this.value>0?"+":""}};$S([jl,OS("design:type",Number)],NR.prototype,"value",void 0),$S([jl,OS("design:type",Number)],NR.prototype,"max",void 0),$S([jl,OS("design:type",Number)],NR.prototype,"min",void 0),$S([jl,OS("design:type",String)],NR.prototype,"mode",void 0),$S([jl,OS("design:type",String)],NR.prototype,"size",void 0),$S([jl,OS("design:type",Boolean)],NR.prototype,"prefixPlus",void 0),$S([jl,OS("design:type",Boolean)],NR.prototype,"readonly",void 0),NR=$S([bh(Rt),IS(0,vi),OS("design:paramtypes",[Object])],NR);var BR=n(9909),FR={};FR.styleTagTransform=zS(),FR.setAttributes=BS(),FR.insert=US().bind(null,"head"),FR.domAPI=MS(),FR.insertStyleElement=VS(),PS()(BR.Z,FR),BR.Z&&BR.Z.locals&&BR.Z.locals;const VR="radio-button",DR='<div class="container ${state} ${colorMode}"\r\n     pointerup.delegate="select()"\r\n     ref="element">\r\n</div>',zR=DR,qR=[];let HR;function ZR(t){HR||(HR=Lh.define({name:VR,template:DR,dependencies:qR})),t.register(HR)}let WR=class extends yR{constructor(t){super(),this.ea=t,this.state="unselected",this.select=()=>{this.group?this.ea.publish("radio-button-selected",{group:this.group,source:this.element,value:this.value}):this.state="selected"}}bound(){this.ea.subscribe("radio-button-selected",(t=>{this.group==t.group&&(this.state=t.source===this.element?"selected":"unselected")}))}};$S([jl,OS("design:type",String)],WR.prototype,"state",void 0),$S([jl,OS("design:type",String)],WR.prototype,"group",void 0),$S([jl,OS("design:type",String)],WR.prototype,"value",void 0),WR=$S([bh(Pt),IS(0,vi),OS("design:paramtypes",[Object])],WR);var KR=n(835),_R={};_R.styleTagTransform=zS(),_R.setAttributes=BS(),_R.insert=US().bind(null,"head"),_R.domAPI=MS(),_R.insertStyleElement=VS(),PS()(KR.Z,_R),KR.Z&&KR.Z.locals&&KR.Z.locals;const QR="text-box",GR='<title text.bind="title" if.bind="showBorders"></title>\r\n<div class="container">\r\n    <textarea value.bind="text" cols="32" rows="8" keydown.delegate="onChange()" autocomplete="chrome-off"></textarea>\r\n</div>\r\n<footer if.bind="showBorders"></footer>',XR=GR,YR=[];let JR;function tP(t){JR||(JR=Lh.define({name:QR,template:GR,dependencies:YR})),t.register(JR)}let eP=class{constructor(t){this.ea=t,this.showBorders=!0,this.onChange=()=>{this.ea.publish("ui-interaction")}}};$S([jl,OS("design:type",String)],eP.prototype,"title",void 0),$S([jl,OS("design:type",String)],eP.prototype,"text",void 0),$S([jl,OS("design:type",Boolean)],eP.prototype,"showBorders",void 0),eP=$S([bh(Lt),IS(0,vi),OS("design:paramtypes",[Object])],eP);var nP=n(6140),iP={};iP.styleTagTransform=zS(),iP.setAttributes=BS(),iP.insert=US().bind(null,"head"),iP.domAPI=MS(),iP.insertStyleElement=VS(),PS()(nP.Z,iP),nP.Z&&nP.Z.locals&&nP.Z.locals;const sP="footer",rP='<div class="grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',oP=rP,aP=[];let lP;function cP(t){lP||(lP=Lh.define({name:sP,template:rP,dependencies:aP})),t.register(lP)}let hP=class{};hP=$S([bh(Mt)],hP);var uP=n(1939),dP={};dP.styleTagTransform=zS(),dP.setAttributes=BS(),dP.insert=US().bind(null,"head"),dP.domAPI=MS(),dP.insertStyleElement=VS(),PS()(uP.Z,dP),uP.Z&&uP.Z.locals&&uP.Z.locals;const pP="title",fP='<div class="title grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n    <span class="text">${text}</span>\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',gP=fP,vP=[];let mP;function yP(t){mP||(mP=Lh.define({name:pP,template:fP,dependencies:vP})),t.register(mP)}let bP=class{};$S([jl,OS("design:type",String)],bP.prototype,"text",void 0),bP=$S([bh(jt)],bP);var wP=n(1525),xP={};xP.styleTagTransform=zS(),xP.setAttributes=BS(),xP.insert=US().bind(null,"head"),xP.domAPI=MS(),xP.insertStyleElement=VS(),PS()(wP.Z,xP),wP.Z&&wP.Z.locals&&wP.Z.locals;const kP="rune-edge",SP='<div class="container">\r\n</div>',CP=SP,AP=[];let EP;function TP(t){EP||(EP=Lh.define({name:kP,template:SP,dependencies:AP})),t.register(EP)}let $P=class{};$P=$S([bh(Ut)],$P);var IP=n(6392),OP={};OP.styleTagTransform=zS(),OP.setAttributes=BS(),OP.insert=US().bind(null,"head"),OP.domAPI=MS(),OP.insertStyleElement=VS(),PS()(IP.Z,OP),IP.Z&&IP.Z.locals&&IP.Z.locals;const RP="name-block",PP='<text-field placeholder="Name" value.two-way="model.name"></text-field>',LP=PP,MP=[];let jP;function UP(t){jP||(jP=Lh.define({name:RP,template:PP,dependencies:MP})),t.register(jP)}let NP=class extends _C{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),cC,e)}};NP=$S([bh(Nt),wh,IS(1,vi),OS("design:paramtypes",[cm,Object])],NP);const BP="page-header",FP='\r\n\r\n<div class="grid">\r\n    <div class="left-page-links">\r\n        <a class="page-link active" href="/description">Description</a>\r\n        <a class="page-link" href="/stats">Stats</a>\r\n        <a class="page-link" href="/magic" if.bind="state.present.character.type == \'magus\'">Magic</a>\r\n        <a class="page-link" href="/progression">Progression</a>\r\n    </div>\r\n    <div></div>\r\n    <div class="right-page-links">\r\n        <a class="page-link" href="/lab" if.bind="state.present.character.type == \'magus\'">Lab</a>\r\n        <a class="page-link" href="/belongings">Belongings</a>\r\n        <a class="page-link" href="/enchantments" if.bind="state.present.character.type == \'magus\'">Enchantments</a>\r\n        <a class="page-link" href="/notes">Notes</a>\r\n    </div>\r\n\r\n    <rune-edge></rune-edge>\r\n    <div class="name-box">\r\n        <name-block></name-block>\r\n    </div>\r\n    <rune-edge></rune-edge>\r\n</div>',VP=FP,DP=[Bt];let zP;function qP(t){zP||(zP=Lh.define({name:BP,template:FP,dependencies:DP})),t.register(zP)}let HP=class{};HP=$S([bh(Ft),um()],HP);var ZP=n(4280),WP={};WP.styleTagTransform=zS(),WP.setAttributes=BS(),WP.insert=US().bind(null,"head"),WP.domAPI=MS(),WP.insertStyleElement=VS(),PS()(ZP.Z,WP),ZP.Z&&ZP.Z.locals&&ZP.Z.locals;const KP="text-field",_P='<input type="text" class.bind="class" value.bind="value" placeholder.bind="placeholder" title.bind="title" keydown.delegate="onChange()">\r\n',QP=_P,GP=[];let XP;function YP(t){XP||(XP=Lh.define({name:KP,template:_P,dependencies:GP})),t.register(XP)}let JP=class{constructor(t){this.ea=t,this.placeholder="",this.title="",this.class="",this.onChange=()=>{this.ea.publish("ui-interaction")}}};$S([jl,OS("design:type",String)],JP.prototype,"value",void 0),$S([jl,OS("design:type",String)],JP.prototype,"placeholder",void 0),$S([jl,OS("design:type",String)],JP.prototype,"title",void 0),$S([jl,OS("design:type",String)],JP.prototype,"class",void 0),JP=$S([bh(Vt),wh,IS(0,vi),OS("design:paramtypes",[Object])],JP);var tL=n(2661),eL={};eL.styleTagTransform=zS(),eL.setAttributes=BS(),eL.insert=US().bind(null,"head"),eL.domAPI=MS(),eL.insertStyleElement=VS(),PS()(tL.Z,eL),tL.Z&&tL.Z.locals&&tL.Z.locals;const nL="add-item-input",iL='<input class="add-item-input-field" type="text" placeholder.bind="placeholder" keyup.delegate="keyPressed($event)" value.two-way="newItemString">',sL=iL,rL=[];let oL;function aL(t){oL||(oL=Lh.define({name:nL,template:iL,dependencies:rL})),t.register(oL)}let lL=class{constructor(){this.newItemString="",this.keyPressed=t=>{this.onItemAdded&&"Enter"==t.key&&this.newItemString&&(this.parent?this.onItemAdded(this.newItemString,this.parent):this.onItemAdded(this.newItemString),this.newItemString="")}}};$S([jl,OS("design:type",String)],lL.prototype,"placeholder",void 0),$S([jl,OS("design:type",Function)],lL.prototype,"onItemAdded",void 0),$S([jl,OS("design:type",Object)],lL.prototype,"parent",void 0),lL=$S([bh(Dt),wh],lL);var cL=n(3055),hL={};hL.styleTagTransform=zS(),hL.setAttributes=BS(),hL.insert=US().bind(null,"head"),hL.domAPI=MS(),hL.insertStyleElement=VS(),PS()(cL.Z,hL),cL.Z&&cL.Z.locals&&cL.Z.locals;const uL="dialog-box",dL='<div class="dialog-container ${size}">\r\n    <div class="inner-container">\r\n        <title text.bind="title"></title>\r\n        <au-slot></au-slot>\r\n        <footer></footer>\r\n    </div>\r\n</div>\r\n',pL=dL,fL=[];let gL;function vL(t){gL||(gL=Lh.define({name:uL,template:dL,dependencies:fL})),t.register(gL)}let mL=class{constructor(t){this.host=t,this.size="m"}attaching(){return document.body.classList.add("disable-scrolling"),this.host.animate([{transform:"scale(0.8)",opacity:"0"},{transform:"scale(1)",opacity:"1"}],{duration:200}).finished}detaching(){return document.body.classList.remove("disable-scrolling"),this.host.animate([{transform:"scale(1)",opacity:"1"},{transform:"scale(0.8)",opacity:"0"}],{duration:200}).finished}};$S([jl,OS("design:type",String)],mL.prototype,"title",void 0),$S([jl,OS("design:type",String)],mL.prototype,"size",void 0),mL=$S([bh(zt),pn(Element),OS("design:paramtypes",[Element])],mL);var yL=n(2495),bL={};bL.styleTagTransform=zS(),bL.setAttributes=BS(),bL.insert=US().bind(null,"head"),bL.domAPI=MS(),bL.insertStyleElement=VS(),PS()(yL.Z,bL),yL.Z&&yL.Z.locals&&yL.Z.locals;const wL="text-dialog",xL='<dialog-box title="${model.title}" size="s">\r\n    <text-box class="text-dialog-input" text.two-way="model.value" show-borders.bind="false"></text-box>\r\n</dialog-box>',kL=xL,SL=[];let CL;function AL(t){CL||(CL=Lh.define({name:wL,template:xL,dependencies:SL})),t.register(CL)}var EL;let TL=EL=class{activate(t){this.model=t}static open(t,e){let n=KL.get(tv),i=tC(t);n.open({component:()=>EL,overlayDismiss:!0,model:i}).whenClosed((n=>{t.value=i.value,e()}))}};TL=EL=$S([bh(qt),wh],TL);var $L=n(1247),IL={};IL.styleTagTransform=zS(),IL.setAttributes=BS(),IL.insert=US().bind(null,"head"),IL.domAPI=MS(),IL.insertStyleElement=VS(),PS()($L.Z,IL),$L.Z&&$L.Z.locals&&$L.Z.locals;const OL="stat-info-button",RL='<div class="button ${isActive ? \'active\' : \'\'}" click.delegate="activate()" title="Additional information">\r\n</div>',PL=RL,LL=[];let ML;function jL(t){ML||(ML=Lh.define({name:OL,template:RL,dependencies:LL})),t.register(ML)}let UL=class{constructor(){this.activate=()=>{let t=this.source[this.property],e={value:null!=t?t:"",title:"INFORMATION"};TL.open(e,(()=>{this.source[this.property]=e.value}))}}get isActive(){let t=this.source[this.property];return null!=t&&t.length>0}};$S([jl,OS("design:type",Object)],UL.prototype,"source",void 0),$S([jl,OS("design:type",String)],UL.prototype,"property",void 0),UL=$S([bh(Ht)],UL);var NL=n(1187),BL={};BL.styleTagTransform=zS(),BL.setAttributes=BS(),BL.insert=US().bind(null,"head"),BL.domAPI=MS(),BL.insertStyleElement=VS(),PS()(NL.Z,BL),NL.Z&&NL.Z.locals&&NL.Z.locals;const FL="cross-button",VL='<div class="button-container ${mode}">\r\n\r\n</div>',DL=VL,zL=[];let qL;function HL(t){qL||(qL=Lh.define({name:FL,template:VL,dependencies:zL})),t.register(qL)}let ZL=class{constructor(){this.mode="standard"}};$S([jl,OS("design:type",String)],ZL.prototype,"mode",void 0),ZL=$S([bh(Zt)],ZL);let WL=wv.register(dm.withInitialState(JS).withOptions({history:{undoable:!0,limit:20}})).register(TS.customize({})).register(mv).register(bR,$R,NR,WR,eP,JP,lL,mL,TL,UL,ZL).register(hP,bP,$P,HP).app(cR);const KL=WL.container;WL.start(),window.addEventListener("dragover",(function(t){t.preventDefault()}),!1),window.addEventListener("drop",(function(t){t.preventDefault()}),!1),!(window.location.href.indexOf("localhost")>=0)&&"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sheet-maker/service-worker.js").then((t=>{console.log("SW registered: ",t)})).catch((t=>{console.log("SW registration failed: ",t)}))}))})()})();