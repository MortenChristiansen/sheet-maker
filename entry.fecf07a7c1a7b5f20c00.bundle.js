/*! For license information please see entry.fecf07a7c1a7b5f20c00.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={2661:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".add-item-input-field {\r\n    margin-top: 15px;\r\n    width: 250px;\r\n    border-bottom-style: dashed !important;\r\n    display: block;\r\n}",""]);const a=o},288:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8390),n.b),h=new URL(n(3208),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"checkbox {\r\n    display: inline-block;\r\n}\r\n\r\ncheckbox > .container:not(.readonly) {\r\n    cursor: pointer;\r\n}\r\n\r\ncheckbox .container {\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\ncheckbox .container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncheckbox .container.s {\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n\r\ncheckbox .container.xs {\r\n    width: 13px;\r\n    height: 13px;\r\n}\r\n\r\ncheckbox .container.checked {\r\n    background-image: url("+d+");\r\n}\r\n\r\ncheckbox .container.unchecked {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},1187:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7786),n.b),h=o()(s()),u=l()(c);h.push([t.id,"cross-button {\r\n    display: inline-block;\r\n}\r\n\r\ncross-button .button-container {\r\n    width: 30px;\r\n    height: 30px;\r\n    background-size: contain;\r\n    background-image: url("+u+");\r\n}\r\n\r\ncross-button .button-container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncross-button .button-container:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}\r\n\r\ncross-button .button-container.angled:hover {\r\n    cursor: pointer;\r\n    transform: rotate(45deg) scale(1.1);\r\n}",""]);const d=h},3055:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(5404),n.b),h=new URL(n(3320),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"dialog-box {\r\n    display: block;\r\n}\r\n\r\ndialog-box .dialog-container {\r\n    padding: 20px;\r\n    filter: drop-shadow(8px 8px 10px rgba(0, 0, 0, 0.571));\r\n}\r\n\r\ndialog-box  .inner-container {\r\n    margin: 10px 20px;\r\n}\r\n\r\ndialog-box .dialog-container.m {\r\n    width: 1083px;\r\n    height: 763px;\r\n    background-image: url("+d+");\r\n}\r\n\r\ndialog-box .dialog-container.s {\r\n    width: 614px;\r\n    height: 418px;\r\n    background-image: url("+p+");\r\n}\r\n\r\n/* Fixes rendering error for the built in dialog UI, which does not work with scrolling */\r\nau-dialog-overlay {\r\n    position: fixed !important;\r\n}\r\nau-dialog-container {\r\n    position: fixed !important;\r\n    z-index: 3;\r\n}\r\n",""]);const f=u},2001:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nlist > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\n\r\nlist .list-entry {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},9909:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(164),n.b),h=new URL(n(2),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"radio-button {\r\n    display: inline-block;\r\n    cursor: pointer;\r\n}\r\n\r\nradio-button .container {\r\n    background-size: contain;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nradio-button .container.selected {\r\n    background-image: url("+d+");\r\n}\r\n\r\nradio-button .container.unselected {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},4235:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".spell-details {\r\n    display: grid;\r\n    grid-template-columns: 200px auto;\r\n    grid-auto-rows: 1fr;\r\n    margin-bottom: 80px;\r\n}\r\n\r\n.spell-details > * {\r\n    align-self: center;\r\n    justify-content: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\n.spell-details stat-box .container {\r\n    margin-left: unset;\r\n    margin-right: unset;\r\n}\r\n",""]);const a=o},1365:(t,e,n)=>{n.d(e,{Z:()=>b});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8801),n.b),h=new URL(n(9462),n.b),u=new URL(n(3473),n.b),d=new URL(n(2867),n.b),p=o()(s()),f=l()(c),g=l()(h),v=l()(u),m=l()(d);p.push([t.id,"stat-box {\r\n    display: inline-block;\r\n}\r\n\r\nstat-box .container.fade {\r\n    opacity: 0.4;\r\n}\r\n\r\nstat-box .container {\r\n    width: 60px;\r\n    height: 60px;\r\n    background-size: contain;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nstat-box .header {\r\n    display: inline-block;\r\n    text-align: center;\r\n    width: 60px;\r\n    font-size: 13px;\r\n    color: #446;\r\n    line-height: 120%;\r\n}\r\n\r\nstat-box > .container:not(.readonly) {\r\n    cursor: -webkit-grab;\r\n    cursor: grab;\r\n}\r\n\r\nstat-box .container.l {\r\n    width: 90px;\r\n    height: 90px;\r\n    font-size: 30px;\r\n}\r\n\r\nstat-box .header.l {\r\n    width: 90px;\r\n    font-size: 15px;\r\n}\r\n\r\nstat-box .container.s {\r\n    width: 45px;\r\n    height: 45px;\r\n    font-size: 13px;\r\n}\r\n\r\nstat-box .header.s {\r\n    width: 45px;\r\n    font-size: 10px;\r\n}\r\n\r\nstat-box .container.xs {\r\n    width: 36px;\r\n    height: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nstat-box .header.xs {\r\n    width: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nstat-box .container.primary {\r\n    background-image: url("+f+");\r\n}\r\n\r\nstat-box .container.primary-angled {\r\n    background-image: url("+g+");\r\n}\r\n\r\nstat-box .container.secondary {\r\n    background-image: url("+v+");\r\n    width: 44px;\r\n    height: 44px;\r\n}\r\nstat-box .container.secondary.s {\r\n    width: 33px;\r\n    height: 33px;\r\n}\r\nstat-box .container.secondary.xs {\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nstat-box .header.secondary {\r\n    width: 44px;\r\n}\r\nstat-box .header.secondary.s {\r\n    width: 33px;\r\n}\r\nstat-box .header.secondary.xs {\r\n    width: 24px;\r\n}\r\n\r\nstat-box .container.secondary-angled {\r\n    background-image: url("+m+");\r\n}\r\n\r\nstat-box .container.active {\r\n    cursor: -webkit-grabbing;\r\n    cursor: grabbing;\r\n}\r\n\r\nstat-box .container .content {\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\nstat-box .overlay {\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 1;\r\n}",""]);const b=p},1247:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7552),n.b),h=o()(s()),u=l()(c);h.push([t.id,"stat-info-button {\r\n    display: inline-block;\r\n    width: 25px;\r\n    height: 25px;\r\n}\r\n\r\nstat-info-button:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}\r\n\r\nstat-info-button .button {\r\n    opacity: 0.5;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-image: url("+u+");\r\n    background-size: contain;\r\n}\r\n\r\nstat-info-button .button.active {\r\n    opacity: 1;\r\n}",""]);const d=h},8831:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(5815),n.b),h=o()(s()),u=l()(c);h.push([t.id,"symbol {\r\n    display: inline-block;\r\n}\r\n\r\n.symbol-container {\r\n    width: 30px;\r\n    height: 30px;\r\n    background-size: contain;\r\n\r\n    transform: scale(1);\r\n    transition-duration: 0.1s;\r\n    transition-property: transform;\r\n}\r\n\r\n.symbol-container.three-dots {\r\n    background-image: url("+u+");\r\n}\r\n\r\n.symbol-container:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}",""]);const d=h},835:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box {\r\n    display: block;\r\n    width: 300px;\r\n}\r\n\r\ntext-box > .container {\r\n    margin: 0 10px 0 10px;\r\n}\r\n\r\ntext-box textarea {\r\n    font-family: 'Estonia', cursive;\r\n    font-size: 30px;\r\n    background-color: transparent;\r\n    font-weight: bold;\r\n    padding: 5px;\r\n\r\n    width: 100%;\r\n    border: none;\r\n    overflow: auto;\r\n    outline: none;\r\n    box-shadow: none;\r\n\r\n    resize: none;\r\n}",""]);const a=o},2495:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box.text-dialog-input textarea {\r\n    height: 230px;\r\n    width: 405px;\r\n    padding: 7px;\r\n}\r\n\r\ntext-box.text-dialog-input .container {\r\n    margin: 0;\r\n}\r\n\r\n.dialog-container.m text-box.text-dialog-input textarea {\r\n    height: 653px;\r\n    width: 1028px;\r\n}",""]);const a=o},4280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-field .input {\r\n    text-overflow: ellipsis;\r\n    display: inline-block;\r\n}",""]);const a=o},6140:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"footer {\r\n    display: block;\r\n}\r\n\r\nfooter .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1) scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block; \r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n}",""]);const f=u},6392:(t,e,n)=>{n.d(e,{Z:()=>$});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(5903),n.b),h=new URL(n(3011),n.b),u=new URL(n(9420),n.b),d=new URL(n(429),n.b),p=new URL(n(9614),n.b),f=new URL(n(1636),n.b),g=new URL(n(2690),n.b),v=new URL(n(3126),n.b),m=new URL(n(977),n.b),b=o()(s()),w=l()(c),y=l()(h),x=l()(u),k=l()(d),S=l()(p),C=l()(f),A=l()(g),E=l()(v),T=l()(m);b.push([t.id,"page-header {\r\n    display: block;\r\n    position: relative;\r\n    z-index: 1;\r\n}\r\n\r\npage-header .page-links {\r\n    height: 161px;\r\n    left: 50px;\r\n    bottom: -110px;\r\n    position: absolute;\r\n    width: 100%;\r\n}\r\n\r\npage-header .page-link {\r\n    width: 206px;\r\n    height: 100px;\r\n    display: inline-block;\r\n    margin-right: -15px;\r\n\r\n    transform: translateY(0);\r\n    transition-duration: 0.3s;\r\n    transition-property: transform;\r\n}\r\n\r\npage-header .page-link.active {\r\n    transform: translateY(-20px);\r\n    cursor: default;\r\n}\r\n\r\npage-header .page-link:not(.active):hover {\r\n    transform: translateY(-20px);\r\n}\r\n\r\npage-header .magic {\r\n    background-image: url("+w+");\r\n}\r\npage-header .stats {\r\n    background-image: url("+y+");\r\n}\r\npage-header .lab {\r\n    background-image: url("+x+");\r\n}\r\npage-header .notes {\r\n    background-image: url("+k+");\r\n}\r\npage-header .enchantments {\r\n    background-image: url("+S+");\r\n}\r\npage-header .description {\r\n    background-image: url("+C+");\r\n}\r\npage-header .belongings {\r\n    background-image: url("+A+");\r\n}\r\npage-header .progression {\r\n    background-image: url("+E+");\r\n}\r\npage-header .settings {\r\n    background-image: url("+T+");\r\n}\r\n",""]);const $=b},1525:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7283),n.b),h=o()(s()),u=l()(c);h.push([t.id,"rune-edge {\r\n    display: block;\r\n    width: 100%;\r\n    height: 20px;\r\n    background-size: contain;\r\n    background-repeat: repeat-x;\r\n    background-image: url("+u+");\r\n    margin: 45px 0;\r\n}",""]);const d=h},1939:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"title {\r\n    display: block;\r\n    height: auto;\r\n}\r\n\r\ntitle .text {\r\n    font-size: 18px;\r\n    color: darkred;\r\n    padding: 0 4px;\r\n    display: inline-block;\r\n}\r\n\r\ntitle .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1);\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto auto auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n    \r\n}",""]);const f=u},1138:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(9811),n.b),h=new URL(n(7210),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"html {\n  height: 100%;\n}\n\n.message {\n  background-color: red;\n}\n\nbody {\n  font-family: 'Eagle Lake', cursive;\n  font-size: 20px;\n  color: darkred;\n  filter: drop-shadow(8px 8px 10px rgba(0, 0, 0, 0.571));\n  margin: 0;\n  height: 100%;\n\n  /* https://heropatterns.com/ */\n  background-color: #300606;\n  background-image: url("+d+");\n}\n\nmy-app {\n  display: grid;\n  grid-template-columns: 1fr 2200px 1fr;\n  grid-template-rows: 1fr 1100px 1fr;\n  width: 100%;\n  height: 100%;\n}\n\npage-header {\n  grid-column: 2;\n  grid-column-end: 2;\n  grid-row: 1;\n  grid-row-end: 1;\n}\n\n.main-paper {\n  background-image:  url("+p+");\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 100%;\n  width: 100%;\n  height: 100%;\n  grid-column: 2;\n  grid-column-end: 2;\n  grid-row: 2;\n  grid-row-end: 2;\n  position: relative;\n  z-index: 2;\n  pointer-events: none;\n}\n\n.page-view {\n  pointer-events: all;\n  margin: 40px;\n}\n\n\n.buttons {\n  grid-column: 2;\n  grid-column-end: 2;\n  grid-row: 3;\n  grid-row-end: 3;\n\n  margin-left: 30px;\n}\n\n.numbers {\n  font-family: 'MedievalSharp', cursive;\n}\n\n/*\nfont-family: 'Amatic SC', cursive;\nfont-family: 'Eagle Lake', cursive;\nfont-family: 'Estonia', cursive;\nfont-family: 'Fleur De Leah', cursive;\nfont-family: 'IM Fell DW Pica SC', serif;\nfont-family: 'IM Fell English SC', serif;\nfont-family: 'MedievalSharp', cursive;\n*/\n\n.monochrome {\n  filter: grayscale(100%);\n}\n\n.text {\n    font-size: 16px;\n    color: #446;\n}\n\ninput[type=\"text\"] {\n  border: none;\n  border-bottom: 2px solid #cbc1ad;\n  background: none;\n  padding: 0px 6px;\n  font-family: 'Estonia', cursive;\n  font-size: 30px;\n  font-weight: bold;\n  text-indent: 5px;\n}\n\ninput[type=\"text\"]:focus {\n  outline: none;\n}\n\ninput[type=\"text\"].specialisation {\n  text-align: center;\n  width: 150px;\n  color: #568;\n}\n\n::-moz-placeholder {\n  color: #aaa;\n  opacity: 1; /* Firefox */\n}\n\n::placeholder {\n  color: #aaa;\n  opacity: 1; /* Firefox */\n}\n\n@-webkit-keyframes fadeIn {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@keyframes fadeIn {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@-webkit-keyframes fadeOut {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@keyframes fadeOut {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n.disable-scrolling {\n  overflow: hidden;\n}\n\n/* Buttons */\n\nbutton {\n  background-color: #446;\n  color: #bbb;\n  padding: 8px 16px;\n  border-radius: 5px;\n  font-family: 'Eagle Lake', cursive;\n  border: none;\n}\n\nbutton:hover {\n  background-color: rgb(87, 87, 140);\n}\n\nbutton:disabled {\n  background-color: rgb(39, 39, 53);\n}\n\n/* Scrollbars */\n\n/* width */\n::-webkit-scrollbar {\n  width: 10px;\n}\n\n/* Track */\n::-webkit-scrollbar-track {\n  box-shadow: inset 0 0 5px grey;\n  border-radius: 10px;\n}\n\n/* Handle */\n::-webkit-scrollbar-thumb {\n  background: darkred;\n  border-radius: 10px;\n}\n",""]);const f=u},927:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"abilities-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 1534px;\r\n    float: left;\r\n}\r\n\r\nabilities-block > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nabilities-block .ability {\r\n    display: inline-block;\r\n}\r\n\r\nabilities-block .puissant-label {\r\n    display: inline-block;\r\n    width: 40px;\r\n}\r\n\r\nabilities-block .ability > * {\r\n    display: inline-block;\r\n}\r\n\r\nabilities-block .ability .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .name {\r\n    opacity: 0.4;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability .specialisation {\r\n    width: 150px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .specialisation {\r\n    opacity: 0;\r\n}\r\n\r\nabilities-block .add-item-input-field {\r\n    width: 200px;\r\n}",""]);const a=o},7804:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"active-magic-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nactive-magic-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nactive-magic-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nactive-magic-list > .container > .grid > * {\r\n    align-self: end;\r\n    margin: 1px 2px;\r\n}\r\nactive-magic-list > .container > .grid > checkbox {\r\n    margin-bottom: 10px;\r\n}\r\nactive-magic-list > .container > .grid > stat-info-button {\r\n    margin-bottom: 6px;\r\n    margin-left: 6px;\r\n}",""]);const a=o},2012:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"age-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nage-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-template-rows: auto auto auto 60px;\r\n}\r\n\r\nage-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 4px;\r\n}\r\n\r\nage-block > .grid > .left {\r\n    justify-self: left;\r\n}\r\n\r\nage-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nage-block > .grid > .bottom {\r\n    align-self: end;\r\n}\r\n\r\nage-block > .grid > .top {\r\n    align-self: baseline;\r\n}\r\n\r\nage-block .small-text {\r\n    font-size: 14px;\r\n}",""]);const a=o},5185:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"arts-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\narts-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto 40px auto auto auto  10px auto auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\narts-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\narts-block .untrained {\r\n    opacity: 0.4;\r\n}",""]);const a=o},3260:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"background-block {\r\n    display: block;\r\n    width: 630px;\r\n    float: left;\r\n    margin: 0 20px 20px 0;\r\n}\r\n\r\nbackground-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nbackground-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},8985:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"carried-belongings-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 630px;\r\n    float: left;\r\n}\r\n\r\ncarried-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\ncarried-belongings-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},6767:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"character-type-selector {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    height: -webkit-fit-content;\r\n    height: -moz-fit-content;\r\n    height: fit-content;\r\n    color: #446;\r\n    margin: 20px;\r\n}\r\n\r\ncharacter-type-selector .container > * {\r\n    vertical-align: middle;\r\n}",""]);const a=o},3292:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"characteristics-block {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    color: #446;\r\n    margin: 0 20px 20px 0;\r\n    float: left;\r\n}\r\n\r\ncharacteristics-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ncharacteristics-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr;\r\n}\r\n\r\ncharacteristics-block .grid > * {\r\n    align-self: center;\r\n}\r\n\r\ncharacteristics-block .grid .text.left-col {\r\n    justify-self: right;\r\n}\r\n\r\ncharacteristics-block .grid .text{\r\n    justify-self: left;\r\n    margin-left: 3px;\r\n    margin-right: 3px;\r\n}\r\n\r\n\r\ncharacteristics-block .grid stat-box {\r\n    margin: 1px;\r\n}\r\n\r\ncharacteristics-block footer {\r\n    margin-top: 5px;\r\n}\r\n\r\ncharacteristics-block .specialisation {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},4397:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"confidence-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},6903:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"damage-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 280px;\r\n    float: left;\r\n}\r\n\r\ndamage-block > .container {\r\n    padding: 10px 30px;\r\n    text-align: center;\r\n}\r\n\r\ndamage-block .wound-type:nth-child(1) {\r\n    display: inline-block;\r\n    margin-left: 0;\r\n}\r\n",""]);const a=o},3845:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"description-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},912:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"familiar-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nfamiliar-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nfamiliar-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto ;\r\n    grid-template-rows: 1fr;\r\n}\r\n\r\nfamiliar-block > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nfamiliar-block > .grid > .arts {\r\n    width: 50px;\r\n    text-align: center;\r\n}\r\n\r\nfamiliar-block > .container > .description {\r\n    width: 700px;\r\n}\r\n\r\nfamiliar-block .block {\r\n    text-align: center;\r\n}\r\n\r\nfamiliar-block .effect .usages, familiar-block .effect .range, familiar-block .effect .duration, familiar-block .effect .target, familiar-block .effect .arts {\r\n    width: 150px;\r\n}\r\n\r\nfamiliar-block .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},1459:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"fatigue-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 280px;\r\n    float: left;\r\n}\r\n\r\nfatigue-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nfatigue-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\nfatigue-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nfatigue-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nfatigue-block radio-button {\r\n    margin-left: 5px;\r\n}",""]);const a=o},2820:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-description-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\nlab-description-block text-box {\r\n    width: 100%;\r\n}\r\n\r\nlab-description-block text-box textarea {\r\n    height: 198px;\r\n}",""]);const a=o},6964:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,'lab-modifications-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    min-width: 845px;\r\n    float: left;\r\n}\r\n\r\nlab-modifications-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-modifications-list > .container > .items > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nlab-modifications-list > .container > .items > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-modifications-list .add-item-input-field {\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .container > .title {\r\n    display: block;\r\n    margin-top: 30px;\r\n}\r\n\r\nlab-modifications-list .grid > .name {\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .grid > .category {\r\n    width: 100px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .grid > .description {\r\n    width: 400px;\r\n}\r\n\r\nlab-modifications-list .items {\r\n    overflow-y: auto;\r\n    height: 124px;\r\n}\r\n\r\nlab-modifications-list .add-item-input-field.add-modifier-input {\r\n    position: absolute;\r\n    right: 45px;\r\n    top: -25px;\r\n    width: 60px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .modifier {\r\n    margin: 0 4px;\r\n}\r\n\r\nlab-modifications-list .modifier-titles {\r\n    position: absolute;\r\n    right: 13px;\r\n    top: 5px;\r\n}\r\n\r\nlab-modifications-list .modifier-title {\r\n    font-size: 9px;\r\n    display: inline-block;\r\n    width: 35px;\r\n    text-align: center;\r\n    font-family: "Eagle Lake", cursive;\r\n    border-bottom: none;\r\n    padding: 0;\r\n    font-weight: unset;\r\n    text-overflow: ellipsis;\r\n    text-indent: 0;\r\n}\r\n\r\n\r\nlab-modifications-list .modifier-totals {\r\n    position: absolute;\r\n    right: -0;\r\n    bottom: 10px;\r\n}\r\n\r\nlab-modifications-list .modifier-total {\r\n    font-size: 16px;\r\n    display: inline-block;\r\n    width: 29px;\r\n    margin: 6px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .block {\r\n    margin-top: 5px;\r\n    position: relative;\r\n}\r\n\r\nlab-modifications-list .last-block .modifier-titles  {\r\n    top: -65px;\r\n}',""]);const a=o},8412:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-stats {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nlab-stats > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-stats > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 110px 110px 110px 110px 110px 110px 110px 110px 110px 110px 110px 110px;\r\n    grid-auto-rows: auto auto auto;\r\n}\r\n\r\nlab-stats > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n}\r\n\r\nlab-stats > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nlab-stats .modifier-selector {\r\n    text-align: center;\r\n    width: 90px;\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},4769:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"magic-items-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 2061px;\r\n    float: left;\r\n}\r\n\r\nmagic-items-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nmagic-items-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content auto;\r\n    grid-template-columns: min-content min-content min-content min-content auto;\r\n    grid-auto-rows: auto auto;\r\n}\r\n\r\nmagic-items-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nmagic-items-block .magic-item > .effects {\r\n    grid-column-start: 1;\r\n    grid-column-end: 6;\r\n}\r\n\r\nmagic-items-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\nmagic-items-block .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nmagic-items-block .effect .usages, magic-items-block .effect .range, magic-items-block .effect .duration, magic-items-block .effect .target, magic-items-block .effect .arts {\r\n    width: 150px;\r\n}\r\n\r\nmagic-items-block .magic-item {\r\n    border-left: 3px solid darkred;\r\n    margin-bottom: 20px;\r\n    padding: 0 10px;\r\n}",""]);const a=o},3349:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"notes-block {\r\n    display: block;\r\n    width: 630px;\r\n    float: left;\r\n    margin: 0 20px 20px 0;\r\n}\r\n\r\nnotes-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nnotes-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"npc-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nnpc-list > .container {\r\n    padding: 10px;\r\n    position: relative;\r\n}\r\n\r\nnpc-list .npcs {\r\n    overflow-y: auto;\r\n    height: 369px;\r\n}\r\n\r\nnpc-list > .container > .npcs > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nnpc-list > .container > .npcs > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nnpc-list .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nnpc-list .description {\r\n    width: 500px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nnpc-list .add-item-input-field {\r\n    width: 200px;\r\n}",""]);const a=o},5555:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"personality-traits-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\npersonality-traits-list > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\npersonality-traits-list stat-box {\r\n    margin-left: 10px;;\r\n}",""]);const a=o},5889:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"physical-penalty-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},7600:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"quest-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nquest-list > .container {\r\n    padding: 10px;\r\n    position: relative;\r\n}\r\n\r\nquest-list .quests {\r\n    overflow-y: auto;\r\n    height: 369px;\r\n}\r\n\r\nquest-list > .container > .quests > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nquest-list > .container > .quests > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nquest-list .name {\r\n    width: 650px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nquest-list .priority {\r\n    margin-left: 10px !important;\r\n}\r\n\r\nquest-list .add-item-input-field {\r\n    width: 600px;\r\n}",""]);const a=o},4467:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"research-projects {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 1480px;\r\n    float: left;\r\n}\r\n\r\nresearch-projects > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nresearch-projects .projects {\r\n    height: 143px;\r\n    overflow-y: auto;\r\n}\r\n\r\nresearch-projects .block {\r\n    text-align: center;\r\n}\r\n\r\nresearch-projects > .container > .projects > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nresearch-projects > .container > .projects > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nresearch-projects stat-info-button {\r\n    margin-left: 20px !important;\r\n}\r\nresearch-projects .arts, research-projects .prerequisites {\r\n    width: 50px;\r\n    text-align: center;\r\n}\r\nresearch-projects .level {\r\n    margin-right: 30px !important;\r\n}\r\n\r\nresearch-projects .material, research-projects .shape {\r\n    width: 150px;\r\n    text-align: center;\r\n}\r\n\r\nresearch-projects .total {\r\n    margin-left: 30px !important;\r\n}",""]);const a=o},5204:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"sanctum-belongings-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 630px;\r\n    float: left;\r\n}\r\n\r\nsanctum-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nsanctum-belongings-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},7266:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(9462),n.b),h=new URL(n(3082),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"sigil {\r\n    display: block;\r\n    height: auto;\r\n    float: left;\r\n    text-align: center;\r\n}\r\n\r\nsigil > .container {\r\n    width: 130px;\r\n    height: 130px;\r\n    background-size: contain;\r\n    background-image: url("+d+");\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nsigil > .container .sigil-image-placeholder {\r\n    width: 70px;\r\n    height: 35px;\r\n    background-size: contain;\r\n    background-image: url("+p+");\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container .sigil-image {\r\n    width: 70px;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container.active-drag {\r\n    opacity: 0.6;\r\n}",""]);const f=u},7624:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-list > .container {\r\n    padding: 10px;\r\n    padding-right: 0;\r\n}\r\n\r\nspell-list .spells {\r\n    height: 582px;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    padding-left: 25px;\r\n}\r\n\r\nspell-list > .container > .spells > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-list > .container > .spells > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-list .add-item-input-field {\r\n    width: 300px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].range,\r\nspell-list  > .container > .spells > .grid input[type=text].duration,\r\nspell-list  > .container > .spells > .grid input[type=text].target {\r\n    width: 50px;\r\n}\r\n\r\nspell-list .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-list .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-list .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-list .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-list .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-list .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-list .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-list .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-list .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-list .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-list .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-list .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #aaa;\r\n}\r\n\r\nspell-list .co-form ~ .co-form .form-header::before,\r\nspell-list .an-form ~ .an-form .form-header::before,\r\nspell-list .au-form ~ .au-form .form-header::before,\r\nspell-list .aq-form ~ .aq-form .form-header::before,\r\nspell-list .he-form ~ .he-form .form-header::before,\r\nspell-list .vi-form ~ .vi-form .form-header::before,\r\nspell-list .te-form ~ .te-form .form-header::before,\r\nspell-list .ig-form ~ .ig-form .form-header::before,\r\nspell-list .me-form ~ .me-form .form-header::before,\r\nspell-list .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}\r\n",""]);const a=o},6073:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-wishlist {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-wishlist .spells {\r\n    height: 582px;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    padding-left: 25px;\r\n}\r\n\r\nspell-wishlist > .container {\r\n    padding: 10px;\r\n    padding-right: 0;\r\n}\r\n\r\nspell-wishlist > .container > .spells > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-wishlist > .container > .spells > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-wishlist .add-item-input-field {\r\n    width: 300px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-wishlist .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-wishlist .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-wishlist .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-wishlist .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-wishlist .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-wishlist .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-wishlist .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-wishlist .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-wishlist .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-wishlist .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-wishlist .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-wishlist .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #aaa;\r\n}\r\n\r\nspell-wishlist .co-form ~ .co-form .form-header::before,\r\nspell-wishlist .an-form ~ .an-form .form-header::before,\r\nspell-wishlist .au-form ~ .au-form .form-header::before,\r\nspell-wishlist .aq-form ~ .aq-form .form-header::before,\r\nspell-wishlist .he-form ~ .he-form .form-header::before,\r\nspell-wishlist .vi-form ~ .vi-form .form-header::before,\r\nspell-wishlist .te-form ~ .te-form .form-header::before,\r\nspell-wishlist .ig-form ~ .ig-form .form-header::before,\r\nspell-wishlist .me-form ~ .me-form .form-header::before,\r\nspell-wishlist .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}",""]);const a=o},2244:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spellcasting-modifiers-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 1000px;\r\n    float: left;\r\n}\r\n\r\nspellcasting-modifiers-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid .arts {\r\n    width: 60px;\r\n    text-align: center;\r\n}",""]);const a=o},6019:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"talisman-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 2062px;\r\n    float: left;\r\n}\r\n\r\ntalisman-block .effects .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .container > .description {\r\n    width: 800px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .effects.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid > *, talisman-block > .container .effects.grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\ntalisman-block .bonuses, talisman-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\ntalisman-block .bonuses .name {\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .effect .notes {\r\n    width: 400px;\r\n}\r\n\r\ntalisman-block .effect .usages, talisman-block .effect .range, talisman-block .effect .duration, talisman-block .effect .target, talisman-block .effect .arts {\r\n    width: 150px;\r\n}",""]);const a=o},1860:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"vis-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nvis-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nvis-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nvis-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nvis-block .add-item-input-field {\r\n    width: 100px;\r\n}\r\n\r\nvis-block .name {\r\n    width: 100px;\r\n}\r\n\r\nvis-block .income, vis-block .notes {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},2410:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"warping-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n    width: 420px;\r\n}\r\n\r\nwarping-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nwarping-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nwarping-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nwarping-block .warping-level {\r\n    text-align: center;\r\n}",""]);const a=o},8840:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"xp-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nxp-list > .container {\r\n    padding: 10px 30px;\r\n    height: 934px;\r\n    overflow-y: auto;\r\n}\r\n\r\nxp-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 70px 100px auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nxp-list > .container > .grid.past-xp-entry {\r\n    grid-template-columns: 70px 100px auto auto auto auto;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n}\r\n\r\nxp-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nxp-list .description, xp-list .plans {\r\n    width: 400px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nxp-list .xp {\r\n    width: 440px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nxp-list .correspondence, xp-list .area-lore  {\r\n    width: 150px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nxp-list .separator {\r\n    height: 40px;\r\n}\r\n\r\nxp-list .center-button-box {\r\n    text-align: center;\r\n}",""]);const a=o},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,s,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},1667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:t=>{t.exports=function(t){return t[1]}},3379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],h=r[c]||0,u="".concat(c," ").concat(h);r[c]=h+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=s(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var r=i(t=t||[],s=s||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=n(r[o]);e[a].references--}for(var l=i(t,s),c=0;c<r.length;c++){var h=n(r[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=l}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},9811:t=>{t.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 56 28%27 width=%2756%27 height=%2728%27%3E%3Cpath fill=%27%23000000%27 fill-opacity=%270.59%27 d=%27M56 26v2h-7.75c2.3-1.27 4.94-2 7.75-2zm-26 2a2 2 0 1 0-4 0h-4.09A25.98 25.98 0 0 0 0 16v-2c.67 0 1.34.02 2 .07V14a2 2 0 0 0-2-2v-2a4 4 0 0 1 3.98 3.6 28.09 28.09 0 0 1 2.8-3.86A8 8 0 0 0 0 6V4a9.99 9.99 0 0 1 8.17 4.23c.94-.95 1.96-1.83 3.03-2.63A13.98 13.98 0 0 0 0 0h7.75c2 1.1 3.73 2.63 5.1 4.45 1.12-.72 2.3-1.37 3.53-1.93A20.1 20.1 0 0 0 14.28 0h2.7c.45.56.88 1.14 1.29 1.74 1.3-.48 2.63-.87 4-1.15-.11-.2-.23-.4-.36-.59H26v.07a28.4 28.4 0 0 1 4 0V0h4.09l-.37.59c1.38.28 2.72.67 4.01 1.15.4-.6.84-1.18 1.3-1.74h2.69a20.1 20.1 0 0 0-2.1 2.52c1.23.56 2.41 1.2 3.54 1.93A16.08 16.08 0 0 1 48.25 0H56c-4.58 0-8.65 2.2-11.2 5.6 1.07.8 2.09 1.68 3.03 2.63A9.99 9.99 0 0 1 56 4v2a8 8 0 0 0-6.77 3.74c1.03 1.2 1.97 2.5 2.79 3.86A4 4 0 0 1 56 10v2a2 2 0 0 0-2 2.07 28.4 28.4 0 0 1 2-.07v2c-9.2 0-17.3 4.78-21.91 12H30zM7.75 28H0v-2c2.81 0 5.46.73 7.75 2zM56 20v2c-5.6 0-10.65 2.3-14.28 6h-2.7c4.04-4.89 10.15-8 16.98-8zm-39.03 8h-2.69C10.65 24.3 5.6 22 0 22v-2c6.83 0 12.94 3.11 16.97 8zm15.01-.4a28.09 28.09 0 0 1 2.8-3.86 8 8 0 0 0-13.55 0c1.03 1.2 1.97 2.5 2.79 3.86a4 4 0 0 1 7.96 0zm14.29-11.86c1.3-.48 2.63-.87 4-1.15a25.99 25.99 0 0 0-44.55 0c1.38.28 2.72.67 4.01 1.15a21.98 21.98 0 0 1 36.54 0zm-5.43 2.71c1.13-.72 2.3-1.37 3.54-1.93a19.98 19.98 0 0 0-32.76 0c1.23.56 2.41 1.2 3.54 1.93a15.98 15.98 0 0 1 25.68 0zm-4.67 3.78c.94-.95 1.96-1.83 3.03-2.63a13.98 13.98 0 0 0-22.4 0c1.07.8 2.09 1.68 3.03 2.63a9.99 9.99 0 0 1 16.34 0z%27%3E%3C/path%3E%3C/svg%3E"},8390:(t,e,n)=>{t.exports=n.p+"3747d62d05f8f09fb741.png"},3208:(t,e,n)=>{t.exports=n.p+"b037ca7f505f5c048bae.png"},164:(t,e,n)=>{t.exports=n.p+"5c3d1b2ce7bb3793be6e.png"},2:(t,e,n)=>{t.exports=n.p+"2b9f9a8912419b0f4b69.png"},2867:(t,e,n)=>{t.exports=n.p+"fe3a2cf273f4367e50c9.png"},3473:(t,e,n)=>{t.exports=n.p+"60e08010af0453fec957.png"},9462:(t,e,n)=>{t.exports=n.p+"c945e6443b532c587958.png"},8801:(t,e,n)=>{t.exports=n.p+"8a70e34efeda3124235b.png"},2690:(t,e,n)=>{t.exports=n.p+"655dfafec0c29f96b457.png"},1636:(t,e,n)=>{t.exports=n.p+"23490230891f2ec2ff67.png"},9614:(t,e,n)=>{t.exports=n.p+"c803e3dc1beea0f5f1bd.png"},9420:(t,e,n)=>{t.exports=n.p+"9a4458cec57a5f2e20be.png"},5903:(t,e,n)=>{t.exports=n.p+"bfee95e80e68772d2294.png"},429:(t,e,n)=>{t.exports=n.p+"b005e768cef6d6b3f86a.png"},3126:(t,e,n)=>{t.exports=n.p+"b10651e4e1c12543ab81.png"},977:(t,e,n)=>{t.exports=n.p+"700215e7aecd99dc76fa.png"},3011:(t,e,n)=>{t.exports=n.p+"3c63a168bc70cd2daa99.png"},7786:(t,e,n)=>{t.exports=n.p+"ec23475cb092652acfea.png"},3082:(t,e,n)=>{t.exports=n.p+"dd674023209c7164b31e.png"},3320:(t,e,n)=>{t.exports=n.p+"60e9cbcdcaf1332fd7e6.png"},5404:(t,e,n)=>{t.exports=n.p+"15fc2188c91a64ee7eec.png"},7283:(t,e,n)=>{t.exports=n.p+"33cbb501e4e522021025.png"},7552:(t,e,n)=>{t.exports=n.p+"6b7b936e3906da3a44fa.png"},1668:(t,e,n)=>{t.exports=n.p+"92bd8516e50642f8233a.png"},3356:(t,e,n)=>{t.exports=n.p+"5bd76dab3a9d835f39f2.png"},7210:(t,e,n)=>{t.exports=n.p+"08d49720c6fb4a0489a6.png"},5815:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAOFElEQVR4nO2debTVVRXHvzjrc0o7UGopDolK4ZSKijwVKZcRzrrQzJEQy0ZNM2tbmkMuo2ywdGkKqGlphjhh+RQTTEyRLE1T0TD0UDk+BBRbW/Zb3QXv3fs702+6+7PWW++P9zvn7N99+55hTweKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoijh9NPPcEUIZksAIwAMkZ9NAKwLYD0AbwN4DcB8AI8DmA1gGoBZBLu0bO9SFKpYAsGsAeAYAOMA7ODRxcsArgPwM4J9MomQFUIVa5lSHQrgYgCbRuryNgDfINjZkfqrHG2tWASzJoDLZKaKzbsAJgL4GsHaYt80f9pWsQiG90tTAeyReKgFAMYT7I2JxykVbalYBLM6gLsA7JXjsL8A8AWCXZzjmIWxUju8ZC9cmrNSMWMBTCeYjXIetxDabsYimAMB3FygCM8B2I9gny5QhuS0lWLJZv1vEU9/vvC+a0SdT43tthSeUgKlYt4P4G6C2a4EsiShbWYsghkgVvIBJRCnh3kAhhPsP8ohTjzaYsYimFUB3FAypWI2BjCFYNYpgSxRaZel8JICToFZ2QbAJIKp1epRe8UimBMBfL4EojTj02yhL6947tR6j0UwowHcVJEv0CIA2xPsEyWQJZjaKhbBjBBn8KqRu54sVvT/iD9wAwBbAxgmM8/6AX3PYBcTwb4bUd5CWKXqL9CEsxIo1a0APtPLP346gCsk9OY4AN8FsKFH/0MBHALg15HkLYxazlgEYyQ+KjY7EeyfM4w/QJRjT4/x2SK/DcG+nUD+3Kjr5n14gj7/mEWp8J5i2ZcAfALA/R7jcPTqKI92paKuipXCoj3Z5WGC7QZwmOzFXDklgfy5UlfF2iJyf28C+K1rI4KdL/stV/YlmI0jv0Ou1FWx1o3c3ziC/Zdn2ytEMV05IJ74+aOK1ZorCHaSb2OCfYMdzh5NRwbIXDh1VayFkfrh2KkvRegn06Z/OXwyhUpDXRVrUaR+TiJYn2Vsef7p0WYgwawdYexCqKtixciKuZNgfZaw3vCxpPcrYTRGZuqqWHMj9HFRhD568HXzrBdRhlypq2I9E6GP6RH66GGgZ7u1IsqQK3VVrIcj9BFzttjRs90rEWXIlVoqFsE+5WnxbmRYHFlMfwC7eTb32fSXgjoH+t0V2D6WW+UoACt7tHuOYHXGKiG/CxSJ3SqHh3Qg6WanezaPdSIthDorFsdOvRHYB8dY7RTQ/nsAPuDZ9qaAcQuntopFsK9zkkJgN+tI/t/u7uObgwKs9hyTdadn21JQ92SKSz2Nk42wDeoeghmbtQHBsAP5VwFjXlj16oC1T1glmOsBHBGpOw6dOZVgX+hjLP48vyLGVd8v7Rz2ExLsO2GiFks7KNYg+WfFiu9/C8A1AH4J4KGeEGKC2VqKuHUG9M3KtDvB/imSrIXRFin2BHM+gDMSdL1IityuBuCDEfo7m2DPjdBP4bRLJjRHcaaoj7C6FBmJoVS/AXBehH5KQTsVBdmFEyJKmvLGS9/eEidfC3wswpWkC93zOtHRXcLITFaqkRJpWhvaRrGwTLlmdKKDIw22L4E4EOv6KIJ9tQSyRKUda5COLYm7hE+QB9RRqdDGVZPXEpfP3gUMz6HOpxDs1QWMnRttWTVZNslsHb8l56H58DCk7kqFdttjNdKF7rc70XGDzNp7JZ69XxG/Idd5D40TqwR6l87/Sx79HMDmkbtmK/1PAZxLsP+N3HepUcUSpATRaeLrC6lxxbwuGdDfD8igrjSqWMshuXwnADjWwyzxCIArAVwtYTttiypWEwiG3TWfBPAxAB8F0F+SLNaUWelFcXCzkfO+upR5VBRFURRFURRFURRFURRFUQJIbnknmI9I9AD/3gQAp0stlZ/XGh59Xf72qtQQZQfuv6XW1d+rflNDu5FEsQhmFfG3nczxRxG6ZEV7CMA0Thol2L9E6FNJSHTFIpih4ogdlFDuRyV9fhLBLk44juJJVMUimJMA/CTBrVt9weWyzyDYkDoJSgKiKRbBnCxBbUUwlcNcCHZBOykJwXAG9k6y3dhUSib1k60Dp5MtkAvNeZ/6RJ7Rq1EUi2AOBHBzjL4CmCdZL7MLliMpBNMB4GAAXBRuP8nGzgpng88E8IDE3z+W6tLNYMUimM1YQKklVTR8yhxNsF0lkCUqBLORxM2fFCHCtYcXJKGEq+jcG/PkHaRYBMNZPreXLLuYlauTYB8pgSzBEAwr0ZlcPgnAGgmHWiC3/V9CsME3e3grFsHwBv3HkgBaNubLxd0vlVC2zBDM0fLPNjkOy/f+HNhXDbCseCkWwXxI9lQh9TlTc7vsuSp3cbcse1cVuBLMk1n/ad8OnBNWCWZXALNKrlTM/lIKu1IQzGjZsxa5veBLOLtkAvHCacYimH0ATKnQVRzPsyspxp4hNQSzslRZ9i3fnQL2cAz1qYSTecaSstS3Vux+lw8DOLoEcjSFYNaTz7ZMSsUMlvxIZzIplqz5UyXtKQVvSrIoO6u/w07niGOcmEjmmJwvaWZl5AiC+aKrXC2XQqkEPFX2LClg88AIgn2oYUxW+EMATACwUYQxNyPYGFfNRYdgtpU9VZnraLA/dmeCnZO1QZYZ69CESsV8rlGpsKwazFKCvVESRe+JMMaICH2k4vwKFGdh19FEMTFloqliyWx1TkKBJxLs9X2Pbzke61MA/ho4jvPNEnkgJbxHlVG2XmB/5DezPtxqxtoTwDaxJRTYRjK+1UNSy+qEwLG2Dmyfiq9WrMzB6eLCa0krxTrEceCZMsNsB+B4ALdJVOjysAFu/6zHWILlfu91lKWRrQLaJoFghshnVCXYpXRhFnlblaYe6vDSrEQHNQTe8fJ1FcFsIAp6sMx+MwB8nWCfd/xAuUjacMc2PXR4tkvJhIR7K45iuBbAhnLajFn363CC+XarAiitFCvrXcYvs72ot2hOiQG6XH5CmBnQtlSKRTAjA69G6YslorDUUzNewsSP41pdEa8jPrXVNqbVUvi+jAP9IIeKdSHX2JYtEePMyP3xHTzX8YpAsKc3XkTAoTAEe7mcsB+MNN4YUdg+aaVYCzMOlMelja9leCZF26jI3irWbLVQynoPItgxBNvntS6y9eCtRJ+ncAd45tu12eOtlsJXMwbwPRNB2FaExCLZHOTLyrGOzz8osxEbUefKJervyP9loctKwT5TCcXZIIKTezeJQu2VVoo1X3IBW8EvmXop7B/QthSV9sQu6HJ3Is9Ih/URG+VVipLvQSSYcXK4CvmyNj1pt1oKs/rsYtx+1YotAto+noN8WRji+FlNDg246w2CfTZCjftNm/2xlWJlDfTKw7I9OKBtWWLgXc0lExPJwfw+sH3TqNZYipXSl9jDLp7t2Ah7X3xxvHAJjnxTbH6peDaw3w2b/THWUjg6JNowI8M8291cokA/F9cSp2YtSShLqHG2qSsqlmKt/N7SnQiC4WVwgGfvP0ollwdN9yXLETMmrTdSlkBoFd3w3lE2a3bx8QSzXxyxVsA3dv0PBDsrkUw+uHgA5ieWJTSqomlWdZZ4LBef3mSC2dLh+ZaIhfezHk3Z1uMc+ZiYtR26fyuVKASzM4B9A7tpmlqXRbFcXCl8UphGMDGn2eM8zRkTSljuyOXSyxiRsysgdwaF+m3RaqnOolgPOA7I8TozCCb0G8EfAhtev+XRlJMuzwodPwEu2S7DxaAaDckEmhzp6uKmW4wsinWZRC+4sL7MXBPkNlNn5EO4KqPlv5F5Er5TxpSv5xye5QqIX441cEMm0MGRupzW7I8tFUvuLPbZq/STdnMI5ihJkMiE7NOmeAQaLpAAQtdYr7xwPeldLO6XIAhmmMzisTKB7ifYpoeLzFMtwbAj9MgAYXi/c784UufKzNITdbCaZN9uK5vK4R5Z2nMlpb4s7psVIJixcuGmK3zV73kE+5TjeIMlTt3FP5mFI1sVu3NRrHUBPAwg6qkvEhy2fGjZC68RzMDASJBZEvYyqbeCJ5JFM1i+mJxdtUeYxL3CM9/HOZOq2UOuKfbbSySnS7GvlCwRw+zFValFSjCPRNg8LxY/4pPinN9Mwo8HZohYCYGVaQ/JQWiK86mDYMbIyaJoeBkdRbBl8QNmgmDGS53WKsJXEWcqA+BRbcZe65JflpARVVMq4RoHb0aZmOliwvFyRHahe3onOtjvtUNBL34HwV5U0NhBdKF7cSc6lpS4VkNvcEzYSLEQZMJ5xmqAj8F3J3yZvlgktTirDC+FVSnC22PCedGlkbdiyWZ5dMTMjywsXZYhYp/McczoSDjMMbIJLzO8j93Hx4QTFJPThe4lnei4VvxaqZfFV9hqTLBTEo+TC13ofqkTHWx7O6ikIrKdcV+XCjONBGfisnJ1ofuWTnSwT3HnBIVY3xXbDZfZfjRy34XShe7HOtGxitQFKxOzRamcDLKNxHZyriTfwPGSOxeyh+ONIlt3f0iwodVmSg3BXMBlB0oiI5uSxjYmvfqQrNIJwfSXkw/Xf9hRjHh9pXAtlpPH85I/dwfXxapC7dBYEAzbhy4osPoMx9ifSrBXxugs15eQWKC1GwLeOJjtDZ/iqXVEQo2ulNqpqeBIlTniu31MEmY46mIe5xzGGrNKtZnaAgkzOk1MKrGuNoGsBuMI9vY8PkdVrJIiCsZRCWMkQ8nXP7tUEkrOznNlUMWqALKF2FUqLA6RDJtBGe6F5KXuxOVrvOaBKlZFkQjbzSWGbUuJcthKfrPJ5zyJ+tC7tBVFURRFURRFURRFURRFURRFURRFURRFURRFURRFURRFqSQA/geGDEyPNc77PgAAAABJRU5ErkJggg=="}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/sheet-maker/",n.b=document.baseURI||self.location.href,n.nc=void 0;var i={};(()=>{n.d(i,{n:()=>WM});var t={};n.r(t),n.d(t,{default:()=>iC,dependencies:()=>sC,name:()=>eC,register:()=>oC,template:()=>nC});var e={};n.r(e),n.d(e,{DescriptionBlock:()=>rA});var s={};n.r(s),n.d(s,{default:()=>lA,dependencies:()=>cA,name:()=>oA,register:()=>uA,template:()=>aA});var r={};n.r(r),n.d(r,{VirtuesList:()=>dA});var o={};n.r(o),n.d(o,{default:()=>gA,dependencies:()=>vA,name:()=>pA,register:()=>bA,template:()=>fA});var a={};n.r(a),n.d(a,{FlawsList:()=>wA});var l={};n.r(l),n.d(l,{default:()=>CA,dependencies:()=>AA,name:()=>kA,register:()=>TA,template:()=>SA});var c={};n.r(c),n.d(c,{PersonalityTraitsList:()=>$A});var h={};n.r(h),n.d(h,{default:()=>LA,dependencies:()=>MA,name:()=>OA,register:()=>jA,template:()=>PA});var u={};n.r(u),n.d(u,{WarpingBlock:()=>BA});var d={};n.r(d),n.d(d,{default:()=>VA,dependencies:()=>DA,name:()=>NA,register:()=>qA,template:()=>FA});var p={};n.r(p),n.d(p,{Description:()=>ZA});var f={};n.r(f),n.d(f,{default:()=>_A,dependencies:()=>GA,name:()=>WA,register:()=>YA,template:()=>QA});var g={};n.r(g),n.d(g,{AbilitiesBlock:()=>JA});var v={};n.r(v),n.d(v,{default:()=>sE,dependencies:()=>rE,name:()=>nE,register:()=>aE,template:()=>iE});var m={};n.r(m),n.d(m,{CharacteristicsBlock:()=>lE});var b={};n.r(b),n.d(b,{default:()=>pE,dependencies:()=>fE,name:()=>uE,register:()=>vE,template:()=>dE});var w={};n.r(w),n.d(w,{FatigueBlock:()=>mE});var y={};n.r(y),n.d(y,{default:()=>kE,dependencies:()=>SE,name:()=>yE,register:()=>AE,template:()=>xE});var x={};n.r(x),n.d(x,{DamageBlock:()=>EE});var k={};n.r(k),n.d(k,{default:()=>OE,dependencies:()=>PE,name:()=>IE,register:()=>ME,template:()=>RE});var S={};n.r(S),n.d(S,{ConfidenceBlock:()=>UE});var C={};n.r(C),n.d(C,{default:()=>VE,dependencies:()=>DE,name:()=>NE,register:()=>qE,template:()=>FE});var A={};n.r(A),n.d(A,{ActiveMagicList:()=>ZE});var E={};n.r(E),n.d(E,{default:()=>_E,dependencies:()=>GE,name:()=>WE,register:()=>YE,template:()=>QE});var T={};n.r(T),n.d(T,{PhysicalPenaltyBlock:()=>JE});var $={};n.r($),n.d($,{default:()=>nT,dependencies:()=>iT,name:()=>tT,register:()=>rT,template:()=>eT});var I={};n.r(I),n.d(I,{Stats:()=>oT});var R={};n.r(R),n.d(R,{default:()=>uT,dependencies:()=>dT,name:()=>cT,register:()=>fT,template:()=>hT});var O={};n.r(O),n.d(O,{ArtsBlock:()=>gT});var P={};n.r(P),n.d(P,{default:()=>yT,dependencies:()=>xT,name:()=>bT,register:()=>ST,template:()=>wT});var L={};n.r(L),n.d(L,{SpellcastingModifiersBlock:()=>CT});var M={};n.r(M),n.d(M,{default:()=>IT,dependencies:()=>RT,name:()=>TT,register:()=>PT,template:()=>$T});var U={};n.r(U),n.d(U,{default:()=>BT,dependencies:()=>NT,name:()=>UT,register:()=>VT,template:()=>jT});var j={};n.r(j),n.d(j,{SpellList:()=>qT});var B={};n.r(B),n.d(B,{default:()=>QT,dependencies:()=>_T,name:()=>KT,register:()=>XT,template:()=>WT});var N={};n.r(N),n.d(N,{SpellWishlist:()=>YT});var F={};n.r(F),n.d(F,{default:()=>i$,dependencies:()=>s$,name:()=>e$,register:()=>o$,template:()=>n$});var V={};n.r(V),n.d(V,{Sigil:()=>a$});var D={};n.r(D),n.d(D,{default:()=>h$,dependencies:()=>u$,name:()=>l$,register:()=>p$,template:()=>c$});var z={};n.r(z),n.d(z,{Magic:()=>f$});var q={};n.r(q),n.d(q,{default:()=>w$,dependencies:()=>y$,name:()=>m$,register:()=>k$,template:()=>b$});var Z={};n.r(Z),n.d(Z,{LabStats:()=>S$});var H={};n.r(H),n.d(H,{default:()=>$$,dependencies:()=>I$,name:()=>E$,register:()=>O$,template:()=>T$});var K={};n.r(K),n.d(K,{ResearchProjects:()=>P$});var W={};n.r(W),n.d(W,{default:()=>B$,dependencies:()=>N$,name:()=>U$,register:()=>V$,template:()=>j$});var Q={};n.r(Q),n.d(Q,{LabModificationsList:()=>D$});var _={};n.r(_),n.d(_,{default:()=>K$,dependencies:()=>W$,name:()=>Z$,register:()=>_$,template:()=>H$});var G={};n.r(G),n.d(G,{LabDescriptionBlock:()=>G$});var X={};n.r(X),n.d(X,{default:()=>J$,dependencies:()=>tI,name:()=>X$,register:()=>nI,template:()=>Y$});var Y={};n.r(Y),n.d(Y,{Lab:()=>iI});var J={};n.r(J),n.d(J,{default:()=>lI,dependencies:()=>cI,name:()=>oI,register:()=>uI,template:()=>aI});var tt={};n.r(tt),n.d(tt,{CarriedBelongingsBlock:()=>dI});var et={};n.r(et),n.d(et,{default:()=>mI,dependencies:()=>bI,name:()=>gI,register:()=>yI,template:()=>vI});var nt={};n.r(nt),n.d(nt,{SanctumBelongingsBlock:()=>xI});var it={};n.r(it),n.d(it,{default:()=>EI,dependencies:()=>TI,name:()=>CI,register:()=>II,template:()=>AI});var st={};n.r(st),n.d(st,{VisBlock:()=>RI});var rt={};n.r(rt),n.d(rt,{default:()=>LI,dependencies:()=>MI,name:()=>OI,register:()=>jI,template:()=>PI});var ot={};n.r(ot),n.d(ot,{Belongings:()=>BI});var at={};n.r(at),n.d(at,{default:()=>zI,dependencies:()=>qI,name:()=>VI,register:()=>HI,template:()=>DI});var lt={};n.r(lt),n.d(lt,{NotesBlock:()=>KI});var ct={};n.r(ct),n.d(ct,{default:()=>XI,dependencies:()=>YI,name:()=>_I,register:()=>tR,template:()=>GI});var ht={};n.r(ht),n.d(ht,{BackgroundBlock:()=>eR});var ut={};n.r(ut),n.d(ut,{default:()=>oR,dependencies:()=>aR,name:()=>sR,register:()=>cR,template:()=>rR});var dt={};n.r(dt),n.d(dt,{QuestList:()=>hR});var pt={};n.r(pt),n.d(pt,{default:()=>gR,dependencies:()=>vR,name:()=>pR,register:()=>bR,template:()=>fR});var ft={};n.r(ft),n.d(ft,{NpcList:()=>wR});var gt={};n.r(gt),n.d(gt,{default:()=>kR,dependencies:()=>SR,name:()=>yR,register:()=>AR,template:()=>xR});var vt={};n.r(vt),n.d(vt,{Notes:()=>ER});var mt={};n.r(mt),n.d(mt,{default:()=>OR,dependencies:()=>PR,name:()=>IR,register:()=>MR,template:()=>RR});var bt={};n.r(bt),n.d(bt,{XpList:()=>UR});var wt={};n.r(wt),n.d(wt,{default:()=>VR,dependencies:()=>DR,name:()=>NR,register:()=>qR,template:()=>FR});var yt={};n.r(yt),n.d(yt,{AgeBlock:()=>ZR});var xt={};n.r(xt),n.d(xt,{default:()=>WR,dependencies:()=>QR,name:()=>HR,register:()=>GR,template:()=>KR});var kt={};n.r(kt),n.d(kt,{Progression:()=>XR});var St={};n.r(St),n.d(St,{default:()=>nO,dependencies:()=>iO,name:()=>tO,register:()=>rO,template:()=>eO});var Ct={};n.r(Ct),n.d(Ct,{TalismanBlock:()=>oO});var At={};n.r(At),n.d(At,{default:()=>uO,dependencies:()=>dO,name:()=>cO,register:()=>fO,template:()=>hO});var Et={};n.r(Et),n.d(Et,{MagicItemsBlock:()=>gO});var Tt={};n.r(Tt),n.d(Tt,{default:()=>yO,dependencies:()=>xO,name:()=>bO,register:()=>SO,template:()=>wO});var $t={};n.r($t),n.d($t,{FamiliarBlock:()=>CO});var It={};n.r(It),n.d(It,{default:()=>TO,dependencies:()=>$O,name:()=>AO,register:()=>RO,template:()=>EO});var Rt={};n.r(Rt),n.d(Rt,{Enchantments:()=>OO});var Ot={};n.r(Ot),n.d(Ot,{default:()=>jO,dependencies:()=>BO,name:()=>MO,register:()=>FO,template:()=>UO});var Pt={};n.r(Pt),n.d(Pt,{CharacterTypeSelector:()=>VO});var Lt={};n.r(Lt),n.d(Lt,{default:()=>qO,dependencies:()=>ZO,name:()=>DO,register:()=>KO,template:()=>zO});var Mt={};n.r(Mt),n.d(Mt,{Settings:()=>WO});var Ut={};n.r(Ut),n.d(Ut,{default:()=>GO,dependencies:()=>XO,name:()=>QO,register:()=>JO,template:()=>_O});var jt={};n.r(jt),n.d(jt,{default:()=>rP,dependencies:()=>oP,name:()=>iP,register:()=>lP,template:()=>sP});var Bt={};n.r(Bt),n.d(Bt,{default:()=>gP,dependencies:()=>vP,name:()=>pP,register:()=>bP,template:()=>fP});var Nt={};n.r(Nt),n.d(Nt,{default:()=>CP,dependencies:()=>AP,name:()=>kP,register:()=>TP,template:()=>SP});var Ft={};n.r(Ft),n.d(Ft,{default:()=>LP,dependencies:()=>MP,name:()=>OP,register:()=>jP,template:()=>PP});var Vt={};n.r(Vt),n.d(Vt,{default:()=>zP,dependencies:()=>qP,name:()=>VP,register:()=>HP,template:()=>DP});var Dt={};n.r(Dt),n.d(Dt,{default:()=>XP,dependencies:()=>YP,name:()=>_P,register:()=>tL,template:()=>GP});var zt={};n.r(zt),n.d(zt,{default:()=>oL,dependencies:()=>aL,name:()=>sL,register:()=>cL,template:()=>rL});var qt={};n.r(qt),n.d(qt,{default:()=>gL,dependencies:()=>vL,name:()=>pL,register:()=>bL,template:()=>fL});var Zt={};n.r(Zt),n.d(Zt,{default:()=>CL,dependencies:()=>AL,name:()=>kL,register:()=>TL,template:()=>SL});var Ht={};n.r(Ht),n.d(Ht,{NameBlock:()=>$L});var Kt={};n.r(Kt),n.d(Kt,{default:()=>OL,dependencies:()=>PL,name:()=>IL,register:()=>ML,template:()=>RL});var Wt={};n.r(Wt),n.d(Wt,{default:()=>VL,dependencies:()=>DL,name:()=>NL,register:()=>qL,template:()=>FL});var Qt={};n.r(Qt),n.d(Qt,{default:()=>_L,dependencies:()=>GL,name:()=>WL,register:()=>YL,template:()=>QL});var _t={};n.r(_t),n.d(_t,{default:()=>sM,dependencies:()=>rM,name:()=>nM,register:()=>aM,template:()=>iM});var Gt={};n.r(Gt),n.d(Gt,{default:()=>pM,dependencies:()=>fM,name:()=>uM,register:()=>vM,template:()=>dM});var Xt={};n.r(Xt),n.d(Xt,{default:()=>SM,dependencies:()=>CM,name:()=>xM,register:()=>EM,template:()=>kM});var Yt={};n.r(Yt),n.d(Yt,{default:()=>PM,dependencies:()=>LM,name:()=>RM,register:()=>UM,template:()=>OM});var Jt={};function te(t){return"object"==typeof t&&null!==t||"function"==typeof t}function ee(t){return null==t}n.r(Jt),n.d(Jt,{default:()=>DM,dependencies:()=>zM,name:()=>FM,register:()=>ZM,template:()=>VM});let ne=new WeakMap;function ie(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function se(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function re(t,e,n){let i=ne.get(t);if(void 0===i){if(!n)return;i=new Map,ne.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function oe(t,e,n){const i=re(e,n,!1);return void 0!==i&&i.has(t)}function ae(t,e,n){if(oe(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&ae(t,i,n)}function le(t,e,n){const i=re(e,n,!1);if(void 0!==i)return i.get(t)}function ce(t,e,n){if(oe(t,e,n))return le(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?ce(t,i,n):void 0}function he(t,e,n,i){re(n,i,!0).set(t,e)}function ue(t,e){const n=[],i=re(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function de(t,e){const n=ue(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=de(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}function pe(t,e){return function(n,i){if(!te(n))throw ie("@metadata",[t,e,n,i],"target",n,"Object or Function");he(t,e,n,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(i))}}function fe(t,e,n,i){if(void 0!==n){if(!Array.isArray(t))throw ie("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if(!te(e))throw ie("Metadata.decorate",[t,e,n,i],"target",e,"Object or Function");if(!te(i)&&!ee(i))throw ie("Metadata.decorate",[t,e,n,i],"attributes",i,"Object, Function, null, or undefined");return null===i&&(i=void 0),function(t,e,n,i){for(let s=t.length-1;s>=0;--s){const r=(0,t[s])(e,n,i);if(!ee(r)){if(!te(r))throw ie("DecorateProperty",[t,e,n,i],"decorated",r,"Object, Function, null, or undefined");i=r}}return i}(t,e,n=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(n),i)}if(!Array.isArray(t))throw ie("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if("function"!=typeof e)throw ie("Metadata.decorate",[t,e,n,i],"target",e,"Function");return function(t,e){for(let n=t.length-1;n>=0;--n){const i=(0,t[n])(e);if(!ee(i)){if("function"!=typeof i)throw ie("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function ge(t,e,n,i){if(!te(n))throw ie("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return he(t,e,n,se(i))}function ve(t,e,n){if(!te(e))throw ie("Metadata.has",[t,e,n],"target",e,"Object or Function");return ae(t,e,se(n))}function me(t,e,n){if(!te(e))throw ie("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return oe(t,e,se(n))}function be(t,e,n){if(!te(e))throw ie("Metadata.get",[t,e,n],"target",e,"Object or Function");return ce(t,e,se(n))}function we(t,e,n){if(!te(e))throw ie("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return le(t,e,se(n))}function ye(t,e){if(!te(t))throw ie("Metadata.getKeys",[t,e],"target",t,"Object or Function");return de(t,se(e))}function xe(t,e){if(!te(t))throw ie("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return ue(t,se(e))}function ke(t,e,n){if(!te(e))throw ie("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=re(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,se(n))}const Se={define:ge,has:ve,hasOwn:me,get:be,getOwn:we,getKeys:ye,getOwnKeys:xe,delete:ke};function Ce(t,e,n,i,s){if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:s,value:n}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}const Ae="[[$au]]";function Ee(t,e,n){Ce(t,Ae,ne,e,n),Ce(t,"metadata",pe,e,n),Ce(t,"decorate",fe,e,n),Ce(t,"defineMetadata",ge,e,n),Ce(t,"hasMetadata",ve,e,n),Ce(t,"hasOwnMetadata",me,e,n),Ce(t,"getMetadata",be,e,n),Ce(t,"getOwnMetadata",we,e,n),Ce(t,"getMetadataKeys",ye,e,n),Ce(t,"getOwnMetadataKeys",xe,e,n),Ce(t,"deleteMetadata",ke,e,n)}const Te=Se.getOwn,$e=Se.hasOwn,Ie=Se.define,Re=t=>"function"==typeof t,Oe=t=>"string"==typeof t,Pe=()=>Object.create(null),Le={};function Me(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=Le[t];if(void 0!==e)return e;const n=t.length;if(0===n)return Le[t]=!1;let i=0,s=0;for(;s<n;++s)if(i=t.charCodeAt(s),0===s&&48===i&&n>1||i<48||i>57)return Le[t]=!1;return Le[t]=!0}default:return!1}}function Ue(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function je(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const Be=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(Pe(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function n(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const i=t.length;if(0===i)return t;let s,r=!1,o="",a="",l=0,c=t.charAt(0),h=n(c),u=0;for(;u<i;++u)s=l,a=c,l=h,c=t.charAt(u+1),h=n(c),0===l?o.length>0&&(r=!0):(!r&&o.length>0&&2===l&&(r=3===s||3===h),o+=e(a,r),r=!1);return o}}(),Ne=function(){const t=Pe();function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=Be(n,e)),i}}(),Fe=function(){const t=Pe();return function(e){let n=t[e];return void 0===n&&(n=Ne(e),n.length>0&&(n=n[0].toUpperCase()+n.slice(1)),t[e]=n),n}}(),Ve=function(){const t=Pe();function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=Be(n,e)),i}}();function De(t){const{length:e}=t,n=Array(e);let i=0;for(;i<e;++i)n[i]=t[i];return n}const ze={};function qe(t){return void 0===ze[t]&&(ze[t]=0),++ze[t]}function Ze(t,e){return t-e}function He(t,e,n){return{configurable:!0,enumerable:n.enumerable,get(){const t=n.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:n.enumerable}),t}}}function Ke(...t){const e=[];let n=0;const i=t.length;let s,r=0,o=0;for(;o<i;++o)if(s=t[o],void 0!==s){r=s.length;let t=0;for(;t<r;++t)e[n++]=s[t]}return e}function We(...t){const e=t.length;let n,i=0;for(;e>i;++i)if(n=t[i],void 0!==n)return n;throw new Error("No default value found")}const Qe=function(){const t=Function.prototype,e=Object.getPrototypeOf,n=new WeakMap;let i,s=t,r=0;return function(o){if(i=n.get(o),void 0===i)for(n.set(o,i=[s=o]),r=0;(s=e(s))!==t;)i[++r]=s;return i}}();function _e(...t){return Object.assign(Pe(),...t)}const Ge=function(){const t=new WeakMap;let e=!1,n="",i=0;return function(s){return e=t.get(s),void 0===e&&(n=s.toString(),i=n.length,e=i>=29&&i<=100&&125===n.charCodeAt(i-1)&&n.charCodeAt(i-2)<=32&&93===n.charCodeAt(i-3)&&101===n.charCodeAt(i-4)&&100===n.charCodeAt(i-5)&&111===n.charCodeAt(i-6)&&99===n.charCodeAt(i-7)&&32===n.charCodeAt(i-8)&&101===n.charCodeAt(i-9)&&118===n.charCodeAt(i-10)&&105===n.charCodeAt(i-11)&&116===n.charCodeAt(i-12)&&97===n.charCodeAt(i-13)&&110===n.charCodeAt(i-14)&&88===n.charCodeAt(i-15),t.set(s,e)),e}}();function Xe(t,e){return t instanceof Promise?t.then(e):e(t)}function Ye(...t){let e,n,i,s=0,r=t.length;for(;s<r;++s)e=t[s],(e=t[s])instanceof Promise&&(void 0===n?n=e:void 0===i?i=[n,e]:i.push(e));return void 0===i?n:Promise.all(i)}const Je="au:annotation",tn=(t,e)=>void 0===e?`${Je}:${t}`:`${Je}:${t}:${e}`,en=(t,e)=>{const n=Te(Je,t);void 0===n?Ie(Je,[e],t):n.push(e)},nn=Object.freeze({name:"au:annotation",appendTo:en,set(t,e,n){Ie(tn(e),n,t)},get:(t,e)=>Te(tn(e),t),getKeys(t){let e=Te(Je,t);return void 0===e&&Ie(Je,e=[],t),e},isKey:t=>t.startsWith(Je),keyFor:tn}),sn="au:resource",rn=Object.freeze({name:sn,appendTo(t,e){const n=Te(sn,t);void 0===n?Ie(sn,[e],t):n.push(e)},has:t=>$e(sn,t),getAll(t){const e=Te(sn,t);return void 0===e?Gn:e.map((e=>Te(e,t)))},getKeys(t){let e=Te(sn,t);return void 0===e&&Ie(sn,e=[],t),e},isKey:t=>t.startsWith(sn),keyFor:(t,e)=>void 0===e?`${sn}:${t}`:`${sn}:${t}:${e}`}),on={annotation:nn,resource:rn},an=Object.prototype.hasOwnProperty;function ln(t,e,n,i){let s=Te(tn(t),n);return void 0===s?(s=e[t],void 0===s?(s=n[t],void 0!==s&&an.call(n,t)?s:i()):s):s}function cn(t,e,n){let i=Te(tn(t),e);return void 0===i?(i=e[t],void 0!==i&&an.call(e,t)?i:n()):i}function hn(t,e,n){const i=e[t];return void 0===i?n():i}!function(t,e=!0,n=!1,i=!0,s=!0){if(function(t){return Ae in t}(t)){if(t[Ae]===ne)return;if(t[Ae]instanceof WeakMap)return void(ne=t[Ae]);throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const r=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`)}n&&Ee(t,i,s)}else Ee(t,i,s)}(Reflect,!1,!1);class un{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,Zn(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:n,key:i}=this;return this.container=this.key=void 0,n.registerResolver(i,new On(i,t,e))}}function dn(t){const e=t.slice(),n=Object.keys(t),i=n.length;let s;for(let r=0;r<i;++r)s=n[r],Me(s)||(e[s]=t[s]);return e}const pn={none(t){throw Error(`AUR0002:${t.toString()}`)},singleton:t=>new On(t,1,t),transient:t=>new On(t,2,t)};class fn{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){var e,n;return void 0===t||t===fn.DEFAULT?fn.DEFAULT:new fn(null!==(e=t.inheritParentResources)&&void 0!==e&&e,null!==(n=t.defaultResolver)&&void 0!==n?n:pn.singleton)}}fn.DEFAULT=fn.from({});const gn={createContainer:t=>new Dn(null,fn.from(t)),getDesignParamtypes:t=>Te("design:paramtypes",t),getAnnotationParamtypes(t){const e=tn("di:paramtypes");return Te(e,t)},getOrCreateAnnotationParamTypes:mn,getDependencies:vn,createInterface(t,e){const n=Re(t)?t:e,i=Oe(t)?t:void 0,s=function(t,e,n){if(null==t||void 0!==new.target)throw new Error(`AUR0001:${s.friendlyName}`);mn(t)[n]=s};return s.$isInterface=!0,s.friendlyName=null==i?"(anonymous)":i,null!=n&&(s.register=function(t,e){return n(new un(t,null!=e?e:s))}),s.toString=function(){return`InterfaceSymbol<${s.friendlyName}>`},s},inject:(...t)=>function(e,n,i){if("number"==typeof i){const n=mn(e),s=t[0];void 0!==s&&(n[i]=s)}else if(n){const i=mn(e.constructor),s=t[0];void 0!==s&&(i[n]=s)}else if(i){const e=mn(i.value);let n;for(let i=0;i<t.length;++i)n=t[i],void 0!==n&&(e[i]=n)}else{const n=mn(e);let i;for(let e=0;e<t.length;++e)i=t[e],void 0!==i&&(n[e]=i)}},transient:t=>(t.register=function(e){return Hn.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=Cn)=>(t.register=function(e){return Hn.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)};function vn(t){const e=tn("di:dependencies");let n=Te(e,t);if(void 0===n){const i=t.inject;if(void 0===i){const e=gn.getDesignParamtypes(t),i=gn.getAnnotationParamtypes(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);n=Re(e)&&e!==Function.prototype?dn(vn(e)):[]}else n=dn(i);else if(void 0===i)n=dn(e);else{n=dn(e);let t,s=i.length,r=0;for(;r<s;++r)t=i[r],void 0!==t&&(n[r]=t);const o=Object.keys(i);let a;for(r=0,s=o.length,r=0;r<s;++r)a=o[r],Me(a)||(n[a]=i[a])}}else n=dn(i);Ie(e,n,t),en(t,e)}return n}function mn(t){const e=tn("di:paramtypes");let n=Te(e,t);return void 0===n&&(Ie(e,n=[],t),en(t,e)),n}const bn=gn.createInterface("IContainer"),wn=bn;function yn(t){return function(e){const n=function(t,e,i){gn.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return t(e,n,i)},n}}const xn=gn.inject;function kn(t){return gn.transient(t)}function Sn(t){return null==t?kn:kn(t)}const Cn={scoped:!1},An=function(t,e){e=!!e;const n=function(t,e,i){gn.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return((t,e,n,i)=>n.getAll(t,i))(t,0,i,e)},n},En=(yn(((t,e,n)=>()=>n.get(t))),yn(((t,e,n)=>n.has(t,!0)?n.get(t):void 0)));function Tn(t,e,n){gn.inject(Tn)(t,e,n)}function $n(t,e,n){return e.getFactory(t).construct(n)}var In,Rn;Tn.$isResolver=!0,Tn.resolve=()=>{},yn(((t,e,n)=>(...i)=>e.getFactory(t).construct(n,i))),yn(((t,e,n)=>{const i=$n(t,e,n),s=new Kn(String(t),i);return n.registerResolver(t,s,!0),i})),yn(((t,e,n)=>$n(t,e,n))),(Rn=In||(In={}))[Rn.instance=0]="instance",Rn[Rn.singleton=1]="singleton",Rn[Rn.transient=2]="transient",Rn[Rn.callback=3]="callback",Rn[Rn.array=4]="array",Rn[Rn.alias=5]="alias";class On{constructor(t,e,n){this.key=t,this.strategy=e,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`AUR0003:${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const n=t.getFactory(this.state);if(null===n)throw new Error(`AUR0004:${String(this.key)}`);return n.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`AUR0005:${this.strategy}`)}}getFactory(t){var e,n,i;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(i=null===(n=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===n?void 0:n.call(e,t))&&void 0!==i?i:null;default:return null}}}function Pn(t){return this.get(t)}function Ln(t,e){return e(t)}class Mn{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let n;return n=void 0===e?new this.Type(...this.dependencies.map(Pn,t)):new this.Type(...this.dependencies.map(Pn,t),...e),null==this.transformers?n:this.transformers.reduce(Ln,n)}registerTransformer(t){var e;(null!==(e=this.transformers)&&void 0!==e?e:this.transformers=[]).push(t)}}const Un={$isResolver:!0,resolve:(t,e)=>e};function jn(t){return Re(t.register)}function Bn(t){return function(t){return jn(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}function Nn(t){return void 0!==t.prototype}const Fn=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]);let Vn=0;class Dn{constructor(t,e){this.parent=t,this.config=e,this.id=++Vn,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=Pe()):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign(Pe(),t.res,this.root.res):this.res=Pe()),this.u.set(bn,Un)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw new Error(`AUR0006:${t.map(String)}`);let e,n,i,s,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],te(e))if(jn(e))e.register(this);else if(on.resource.has(e)){const t=on.resource.getAll(e);if(1===t.length)t[0].register(this);else for(s=0,r=t.length;r>s;)t[s].register(this),++s}else if(Nn(e))Hn.singleton(e,e).register(this);else for(n=Object.keys(e),s=0,r=n.length;s<r;++s)i=e[n[s]],te(i)&&(jn(i)?i.register(this):this.register(i));return--this.t,this}registerResolver(t,e,n=!1){Wn(t);const i=this.u,s=i.get(t);if(null==s){if(i.set(t,e),function(t){return Oe(t)&&t.indexOf(":")>0}(t)){if(void 0!==this.res[t])throw new Error(`AUR0007:${t}`);this.res[t]=e}}else s instanceof On&&4===s.strategy?s.state.push(e):i.set(t,new On(t,4,[s,e]));return n&&this.i.set(t,e),e}registerTransformer(t,e){const n=this.getResolver(t);if(null==n)return!1;if(n.getFactory){const t=n.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(Wn(t),void 0!==t.resolve)return t;let n,i=this;for(;null!=i;){if(n=i.u.get(t),null!=n)return n;if(null==i.parent){const n=Bn(t)?this:i;return e?this.R(t,n):null}i=i.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(Wn(t),t.$isResolver)return t.resolve(this,this);let e,n=this;for(;null!=n;){if(e=n.u.get(t),null!=e)return e.resolve(n,this);if(null==n.parent){const i=Bn(t)?this:n;return e=this.R(t,i),e.resolve(n,this)}n=n.parent}throw new Error(`AUR0008:${String(t)}`)}getAll(t,e=!1){Wn(t);const n=this;let i,s=n;if(e){let e=Gn;for(;null!=s;)i=s.u.get(t),null!=i&&(e=e.concat(Qn(i,s,n))),s=s.parent;return e}for(;null!=s;){if(i=s.u.get(t),null!=i)return Qn(i,s,n);if(s=s.parent,null==s)return Gn}return Gn}invoke(t,e){if(Ge(t))throw _n(t);return void 0===e?new t(...vn(t).map(Pn,this)):new t(...vn(t).map(Pn,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(Ge(t))throw _n(t);this.h.set(t,e=new Mn(t,vn(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===fn.DEFAULT?new Dn(this,this.config):new Dn(this,fn.from({...this.config,inheritParentResources:!1})):new Dn(this,fn.from(null!=t?t:this.config))}disposeResolvers(){const t=this.u,e=this.i;let n,i;for([i,n]of e.entries())n.dispose(),t.delete(i);e.clear()}find(t,e){const n=t.keyFrom(e);let i=this.res[n];if(void 0===i&&(i=this.root.res[n],void 0===i))return null;if(null===i)return null;if(Re(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const n=Te(t.name,e.Type);return void 0===n?null:n}return null}create(t,e){var n,i;const s=t.keyFrom(e);let r=this.res[s];return void 0===r?(r=this.root.res[s],void 0===r?null:null!==(n=r.resolve(this.root,this))&&void 0!==n?n:null):null!==(i=r.resolve(this,this))&&void 0!==i?i:null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}R(t,e){if(!Re(t))throw new Error(`AUR0009:${t}`);if(Fn.has(t.name))throw new Error(`AUR0010:${t.name}`);if(jn(t)){const n=t.register(e,t);if(!(n instanceof Object)||null==n.resolve){const n=e.u.get(t);if(null!=n)return n;throw new Error("AUR0011")}return n}if(on.resource.has(t)){const n=on.resource.getAll(t);if(1===n.length)n[0].register(e);else{const t=n.length;for(let i=0;i<t;++i)n[i].register(e)}const i=e.u.get(t);if(null!=i)return i;throw new Error("AUR0011")}if(t.$isInterface)throw new Error(`AUR0012:${t.friendlyName}`);{const n=this.config.defaultResolver(t,e);return e.u.set(t,n),n}}}class zn{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const qn=new WeakMap;function Zn(t){return function(e,n,i){let s=qn.get(e);if(void 0===s&&qn.set(e,s=new WeakMap),s.has(i))return s.get(i);const r=t(e,n,i);return s.set(i,r),r}}const Hn={instance:(t,e)=>new On(t,0,e),singleton:(t,e)=>new On(t,1,e),transient:(t,e)=>new On(t,2,e),callback:(t,e)=>new On(t,3,e),cachedCallback:(t,e)=>new On(t,3,Zn(e)),aliasTo:(t,e)=>new On(e,5,t),defer:(t,...e)=>new zn(t,e)};class Kn{constructor(t,e){this.C=null,this.$=t,void 0!==e&&(this.C=e)}get friendlyName(){return this.$}prepare(t){this.C=t}get $isResolver(){return!0}resolve(){if(null==this.C)throw new Error(`AUR0013:${this.$}`);return this.C}dispose(){this.C=null}}function Wn(t){if(null==t)throw new Error("AUR0014")}function Qn(t,e,n){if(t instanceof On&&4===t.strategy){const i=t.state;let s=i.length;const r=new Array(s);for(;s--;)r[s]=i[s].resolve(e,n);return r}return[t.resolve(e,n)]}function _n(t){return new Error(`AUR0015:${t.name}`)}const Gn=Object.freeze([]),Xn=Object.freeze({});function Yn(){}const Jn=gn.createInterface("IPlatform");function ti(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function ei(t,e){return function(n,i){e(n,i,t)}}var ni,ii;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(ni||(ni={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(ii||(ii={}));const si=gn.createInterface("ILogConfig",(t=>t.instance(new ui(0,3)))),ri=gn.createInterface("ISink"),oi=gn.createInterface("ILogEventFactory",(t=>t.singleton(gi))),ai=gn.createInterface("ILogger",(t=>t.singleton(mi))),li=gn.createInterface("ILogScope"),ci=Object.freeze({key:tn("logger-sink-handles"),define(t,e){return Ie(this.key,e.handles,t.prototype),t},getHandles(t){return Se.get(this.key,t)}}),hi=_e({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class ui{constructor(t,e){this.colorOptions=t,this.level=e}}const di=function(){const t=[_e({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),_e({TRC:hi.grey("TRC"),DBG:hi.grey("DBG"),INF:hi.white("INF"),WRN:hi.yellow("WRN"),ERR:hi.red("ERR"),FTL:hi.red("FTL"),QQQ:hi.grey("???")})];return function(e,n){return e<=0?t[n].TRC:e<=1?t[n].DBG:e<=2?t[n].INF:e<=3?t[n].WRN:e<=4?t[n].ERR:e<=5?t[n].FTL:t[n].QQQ}}();function pi(t,e){return 0===e?new Date(t).toISOString():hi.grey(new Date(t).toISOString())}class fi{constructor(t,e,n,i,s,r){this.severity=t,this.message=e,this.optionalParams=n,this.scope=i,this.colorOptions=s,this.timestamp=r}toString(){const{severity:t,message:e,scope:n,colorOptions:i,timestamp:s}=this;return 0===n.length?`${pi(s,i)} [${di(t,i)}] ${e}`:`${pi(s,i)} [${di(t,i)} ${function(t,e){return 0===e?t.join("."):t.map(hi.cyan).join(".")}(n,i)}] ${e}`}}let gi=class{constructor(t){this.config=t}createLogEvent(t,e,n,i){return new fi(e,n,i,t.scope,this.config.colorOptions,Date.now())}};gi=ti([ei(0,si)],gi);let vi=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const n=t.optionalParams;if(void 0===n||0===n.length){const n=t.toString();switch(t.severity){case 0:case 1:return e.debug(n);case 2:return e.info(n);case 3:return e.warn(n);case 4:case 5:return e.error(n)}}else{let i=t.toString(),s=0;for(;i.includes("%s");)i=i.replace("%s",String(n[s++]));switch(t.severity){case 0:case 1:return e.debug(i,...n.slice(s));case 2:return e.info(i,...n.slice(s));case 3:return e.warn(i,...n.slice(s));case 4:case 5:return e.error(i,...n.slice(s))}}}}static register(e){Hn.singleton(ri,t).register(e)}};vi=ti([ei(0,Jn)],vi);let mi=class t{constructor(t,e,n,i=[],s=null){var r,o,a,l,c,h;let u,d,p,f,g,v;if(this.config=t,this.factory=e,this.scope=i,this.scopedLoggers=Pe(),null===s){this.root=this,this.parent=this,u=this.traceSinks=[],d=this.debugSinks=[],p=this.infoSinks=[],f=this.warnSinks=[],g=this.errorSinks=[],v=this.fatalSinks=[];for(const t of n){const e=ci.getHandles(t);(null===(r=null==e?void 0:e.includes(0))||void 0===r||r)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&d.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&p.push(t),(null===(l=null==e?void 0:e.includes(3))||void 0===l||l)&&f.push(t),(null===(c=null==e?void 0:e.includes(4))||void 0===c||c)&&g.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&v.push(t)}}else this.root=s.root,this.parent=s,u=this.traceSinks=s.traceSinks,d=this.debugSinks=s.debugSinks,p=this.infoSinks=s.infoSinks,f=this.warnSinks=s.warnSinks,g=this.errorSinks=s.errorSinks,v=this.fatalSinks=s.fatalSinks}trace(t,...e){this.config.level<=0&&this.emit(this.traceSinks,0,t,e)}debug(t,...e){this.config.level<=1&&this.emit(this.debugSinks,1,t,e)}info(t,...e){this.config.level<=2&&this.emit(this.infoSinks,2,t,e)}warn(t,...e){this.config.level<=3&&this.emit(this.warnSinks,3,t,e)}error(t,...e){this.config.level<=4&&this.emit(this.errorSinks,4,t,e)}fatal(t,...e){this.config.level<=5&&this.emit(this.fatalSinks,5,t,e)}scopeTo(e){const n=this.scopedLoggers;let i=n[e];return void 0===i&&(i=n[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),i}emit(t,e,n,i){const s=Re(n)?n():n,r=this.factory.createLogEvent(this,e,s,i);for(let e=0,n=t.length;e<n;++e)t[e].handleEvent(r)}};function bi(t){return t}ti([He],mi.prototype,"trace",null),ti([He],mi.prototype,"debug",null),ti([He],mi.prototype,"info",null),ti([He],mi.prototype,"warn",null),ti([He],mi.prototype,"error",null),ti([He],mi.prototype,"fatal",null),mi=ti([ei(0,si),ei(1,oi),ei(2,An(ri)),ei(3,En(li)),ei(4,Tn)],mi),_e({create:({level:t=3,colorOptions:e=0,sinks:n=[]}={})=>_e({register(i){i.register(Hn.instance(si,new ui(e,t)));for(const t of n)Re(t)?i.register(Hn.singleton(ri,t)):i.register(t);return i}})}),gn.createInterface((t=>t.singleton(yi)));class wi{constructor(t){this.$transform=t,this.A=new Map,this.j=new Map}transform(t){if(t instanceof Promise)return this.I(t);if("object"==typeof t&&null!==t)return this.O(t);throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`)}I(t){if(this.A.has(t))return this.A.get(t);const e=t.then((t=>this.O(t)));return this.A.set(t,e),e.then((e=>{this.A.set(t,e)})),e}O(t){if(this.j.has(t))return this.j.get(t);const e=this.$transform(this.M(t));return this.j.set(t,e),e instanceof Promise&&e.then((e=>{this.j.set(t,e)})),e}M(t){let e,n,i,s;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;n=Re(e.register),i=!1,s=Gn;break;case"function":n=Re(e.register),i=void 0!==e.prototype,s=on.resource.getAll(e);break;default:continue}r.push(new ki(o,e,n,i,s))}return new xi(t,r)}}class yi{constructor(){this.transformers=new Map}load(t,e=bi){const n=this.transformers;let i=n.get(e);return void 0===i&&n.set(e,i=new wi(e)),i.transform(t)}dispose(){this.transformers.clear()}}class xi{constructor(t,e){this.raw=t,this.items=e}}class ki{constructor(t,e,n,i,s){this.key=t,this.value=e,this.isRegistry=n,this.isConstructable=i,this.definitions=s}}class Si{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}const Ci=gn.createInterface("IEventAggregator",(t=>t.singleton(Ai)));class Ai{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw new Error(`Invalid channel name or instance: ${t}.`);if(Oe(t)){let n=this.eventLookup[t];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)n[i](e,t)}}else{const e=this.messageHandlers.slice();let n=e.length;for(;n-- >0;)e[n].handle(t)}}subscribe(t,e){if(!t)throw new Error(`Invalid channel name or type: ${t}.`);let n,i;return Oe(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),n=e,i=this.eventLookup[t]):(n=new Si(t,e),i=this.messageHandlers),i.push(n),{dispose(){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const n=this.subscribe(t,(function(t,i){n.dispose(),e(t,i)}));return n}}const Ei=Object.prototype.hasOwnProperty,Ti=Reflect.defineProperty,$i=t=>"function"==typeof t,Ii=t=>"string"==typeof t;function Ri(t,e,n){return Ti(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function Oi(t,e,n,i=!1){!i&&Ei.call(t,e)||Ri(t,e,n)}const Pi=()=>Object.create(null),Li=Se.getOwn,Mi=Se.hasOwn,Ui=Se.define,ji=on.annotation.keyFor,Bi=on.resource.keyFor,Ni=on.resource.appendTo;function Fi(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Hn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class Vi{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Ei.call(t,e)&&(this[e]=t[e])}static create(t,e){return new Vi(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class Di{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new Di(null,t,null==e?zi.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new Di(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new Di(t,e,zi.create(e),!1)}}class zi{constructor(t){this.bindingContext=t}static create(t){return new zi(t)}}const qi=gn.createInterface("ISignaler",(t=>t.singleton(Zi)));class Zi{constructor(){this.signals=Pi()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var Hi;function Ki(t){return function(e){return Yi.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(Hi||(Hi={}));class Wi{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;Ii(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===_i;return new Wi(e,We(Xi(e,"name"),n),Ke(Xi(e,"aliases"),i.aliases,e.aliases),Yi.keyFrom(n),ln("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Hn.singleton(n,e).register(t);break;case 2:Hn.instance(n,new Qi(t,e)).register(t)}Hn.aliasTo(n,e).register(t),Fi(i,Yi,n,t)}}class Qi{constructor(t,e){this.ctn=t,this.Type=e,this.deps=gn.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class _i{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{Ti(_i.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const Gi=Bi("binding-behavior"),Xi=(t,e)=>Li(ji(e),t),Yi=Object.freeze({name:Gi,keyFrom:t=>`${Gi}:${t}`,isType:t=>$i(t)&&Mi(Gi,t),define(t,e){const n=Wi.create(t,e);return Ui(Gi,n,n.Type),Ui(Gi,n,n),Ni(e,Gi),n.Type},getDefinition(t){const e=Li(Gi,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){Ui(ji(e),n,t)},getAnnotation:Xi});function Ji(t){return function(e){return is.define(t,e)}}class ts{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return Ii(t)?(n=t,i={name:n}):(n=t.name,i=t),new ts(e,We(ns(e,"name"),n),Ke(ns(e,"aliases"),i.aliases,e.aliases),is.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Hn.singleton(n,e).register(t),Hn.aliasTo(n,e).register(t),Fi(i,is,n,t)}}const es=Bi("value-converter"),ns=(t,e)=>Li(ji(e),t),is=Object.freeze({name:es,keyFrom:t=>`${es}:${t}`,isType:t=>$i(t)&&Mi(es,t),define(t,e){const n=ts.create(t,e);return Ui(es,n,n.Type),Ui(es,n,n),Ni(e,es),n.Type},getDefinition(t){const e=Li(es,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){Ui(ji(e),n,t)},getAnnotation:ns});var ss;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(ss||(ss={}));class rs{constructor(){this.text=""}static unparse(t){const e=new rs;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",Ii(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class os{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class as{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=Yi.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof Qi)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&($i(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return rs.unparse(this)}}class ls{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=is.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(qi);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(qi);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return rs.unparse(this)}}class cs{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return rs.unparse(this)}}class hs{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return rs.unparse(this)}}class us{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return rs.unparse(this)}}us.$this=new us(0),us.$parent=new us(1);class ds{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=Vi.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=Vi.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return rs.unparse(this)}}class ps{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return rs.unparse(this)}}class fs{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return rs.unparse(this)}}class gs{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=Vi.get(e,this.name,this.ancestor,t),o=Ls(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return rs.unparse(this)}}class vs{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=Ls(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return rs.unparse(this)}}class ms{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if($i(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return rs.unparse(this)}}class bs{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!$i(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(Ue(s)||Ue(r))return(s||0)+(r||0);if(je(s)||je(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return rs.unparse(this)}}class ws{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return rs.unparse(this)}}class ys{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return rs.unparse(this)}}ys.$undefined=new ys(void 0),ys.$null=new ys(null),ys.$true=new ys(!0),ys.$false=new ys(!1),ys.$empty=new ys("");class xs{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return rs.unparse(this)}}xs.$empty=new xs(Gn);class ks{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return rs.unparse(this)}}ks.$empty=new ks(Gn,Gn);class Ss{constructor(t,e=Gn){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return rs.unparse(this)}}Ss.$empty=new Ss([""]);class Cs{constructor(t,e,n,i=Gn){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!$i(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return rs.unparse(this)}}class As{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return rs.unparse(this)}}class Es{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return rs.unparse(this)}}class Ts{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return rs.unparse(this)}}const $s=Object.prototype.toString;class Is{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch($s.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${$s.call(e)}`)}}iterate(t,e,n){switch($s.call(e)){case"[object Array]":return Ms(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;Ms(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;Ms(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;Ms(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${$s.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return rs.unparse(this)}}class Rs{constructor(t,e=Gn){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return rs.unparse(this)}}class Os{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,Di.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return rs.unparse(this)}}class Ps{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,Di.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return rs.unparse(this)}}function Ls(t,e,n){const i=null==e?null:e[n];if($i(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function Ms(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}const Us=gn.createInterface("ICoercionConfiguration");var js,Bs,Ns,Fs,Vs,Ds;function zs(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function qs(t){return null==t?Zs:Zs(t)}function Zs(t){const e=t.prototype;Ti(e,"subs",{get:Ks}),Oi(e,"subscribe",Ws),Oi(e,"unsubscribe",Qs)}!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(js||(js={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(Bs||(Bs={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(Ns||(Ns={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(Fs||(Fs={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(Vs||(Vs={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(Ds||(Ds={}));class Hs{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function Ks(){return Ri(this,"subs",new Hs)}function Ws(t){return this.subs.add(t)}function Qs(t){return this.subs.remove(t)}function _s(t){return null==t?Gs:Gs(t)}function Gs(t){const e=t.prototype;Ti(e,"queue",{get:Ys})}class Xs{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(Js)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function Ys(){return Xs.instance}function Js(t,e,n){n.delete(t),t.flush()}Xs.instance=new Xs;class tr{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&Me(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){rr=this.h,this.h=this.v,this.subs.notify(this.v,rr,this.f)}}class er{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){rr=this.h,this.h=this.v,this.subs.notify(this.v,rr,this.f)}}function nr(t){const e=t.prototype;Oi(e,"subscribe",ir,!0),Oi(e,"unsubscribe",sr,!0),_s(t),qs(t)}function ir(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function sr(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let rr;nr(tr),nr(er);const or=new WeakMap;function ar(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function lr(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function cr(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function hr(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,b,w,y,x,k,S,C=0,A=0;for(;;){if(i-n<=10)return void cr(t,e,n,i,s);C=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[C],h=e[C],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,b=n+1,w=i-1,t[C]=t[b],e[C]=e[b],t[b]=v,e[b]=m;t:for(A=b+1;A<w;A++)if(y=t[A],x=e[A],k=s(y,v),k<0)t[A]=t[b],e[A]=e[b],t[b]=y,e[b]=x,b++;else if(k>0){do{if(w--,w==A)break t;S=t[w],k=s(S,v)}while(k>0);t[A]=t[w],e[A]=e[w],t[w]=y,e[w]=x,k<0&&(y=t[A],x=e[A],t[A]=t[b],e[A]=e[b],t[b]=y,e[b]=x,b++)}i-w<b-n?(hr(t,e,w,i,s),i=b):(hr(t,e,n,b,s),n=w)}}const ur=Array.prototype,dr=ur.push,pr=ur.unshift,fr=ur.pop,gr=ur.shift,vr=ur.splice,mr=ur.reverse,br=ur.sort,wr=["push","unshift","pop","shift","splice","reverse","sort"],yr={push:function(...t){const e=or.get(this);if(void 0===e)return dr.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=or.get(this);if(void 0===e)return pr.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;pr.apply(e.indexMap,i);const r=pr.apply(this,t);return e.notify(),r},pop:function(){const t=or.get(this);if(void 0===t)return fr.call(this);const e=t.indexMap,n=fr.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),fr.call(e),t.notify(),n},shift:function(){const t=or.get(this);if(void 0===t)return gr.call(this);const e=t.indexMap,n=gr.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),gr.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=or.get(this);if(void 0===i)return vr.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;vr.call(a,e,n,...i)}else vr.apply(a,t);const h=vr.apply(this,t);return i.notify(),h},reverse:function(){const t=or.get(this);if(void 0===t)return mr.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=or.get(this);if(void 0===e)return br.call(this,t),this;const n=this.length;if(n<2)return this;hr(this,e.indexMap,0,n,lr);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&$i(t)||(t=ar),hr(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of wr)Ti(yr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let xr=!1;class kr{constructor(t){this.type=18,xr||(xr=!0,function(){for(const t of wr)!0!==ur[t].observing&&Ri(ur,t,yr[t])}()),this.indexObservers={},this.collection=t,this.indexMap=zs(t.length),this.lenObs=void 0,or.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=zs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new tr(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new Sr(this,t)}}class Sr{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Cr(t){let e=or.get(t);return void 0===e&&(e=new kr(t)),e}qs(kr),qs(Sr);const Ar=new WeakMap,Er=Set.prototype,Tr=Er.add,$r=Er.clear,Ir=Er.delete,Rr=["add","clear","delete"],Or={add:function(t){const e=Ar.get(this);if(void 0===e)return Tr.call(this,t),this;const n=this.size;return Tr.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=Ar.get(this);if(void 0===t)return $r.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;$r.call(this),e.length=0,t.notify()}},delete:function(t){const e=Ar.get(this);if(void 0===e)return Ir.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Ir.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},Pr={writable:!0,enumerable:!1,configurable:!0};for(const t of Rr)Ti(Or[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Lr=!1;class Mr{constructor(t){this.type=34,Lr||(Lr=!0,function(){for(const t of Rr)!0!==Er[t].observing&&Ti(Er,t,{...Pr,value:Or[t]})}()),this.collection=t,this.indexMap=zs(t.size),this.lenObs=void 0,Ar.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=zs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new er(this)}}function Ur(t){let e=Ar.get(t);return void 0===e&&(e=new Mr(t)),e}qs(Mr);const jr=new WeakMap,Br=Map.prototype,Nr=Br.set,Fr=Br.clear,Vr=Br.delete,Dr=["set","clear","delete"],zr={set:function(t,e){const n=jr.get(this);if(void 0===n)return Nr.call(this,t,e),this;const i=this.get(t),s=this.size;if(Nr.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=jr.get(this);if(void 0===t)return Fr.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Fr.call(this),e.length=0,t.notify()}},delete:function(t){const e=jr.get(this);if(void 0===e)return Vr.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Vr.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},qr={writable:!0,enumerable:!1,configurable:!0};for(const t of Dr)Ti(zr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Zr=!1;class Hr{constructor(t){this.type=66,Zr||(Zr=!0,function(){for(const t of Dr)!0!==Br[t].observing&&Ti(Br,t,{...qr,value:zr[t]})}()),this.collection=t,this.indexMap=zs(t.size),this.lenObs=void 0,jr.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=zs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new er(this)}}function Kr(t){let e=jr.get(t);return void 0===e&&(e=new Hr(t)),e}function Wr(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function Qr(){return Ri(this,"obs",new Jr(this))}function _r(t){let e;if(t instanceof Array)e=Cr(t);else if(t instanceof Set)e=Ur(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=Kr(t)}this.obs.add(e)}function Gr(t){this.obs.add(t)}function Xr(){throw new Error("AUR2011:handleChange")}function Yr(){throw new Error("AUR2012:handleCollectionChange")}qs(Hr);class Jr{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(eo,this),this.count=this.o.size}clearAll(){this.o.forEach(to,this),this.o.clear(),this.count=0}}function to(t,e){e.unsubscribe(this)}function eo(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function no(t){const e=t.prototype;return Oi(e,"observe",Wr,!0),Oi(e,"observeCollection",_r,!0),Oi(e,"subscribeTo",Gr,!0),Ti(e,"obs",{get:Qr}),Oi(e,"handleChange",Xr),Oi(e,"handleCollectionChange",Yr),t}function io(t){return null==t?no:no(t)}no(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}});const so=gn.createInterface("IExpressionParser",(t=>t.singleton(ro)));class ro{constructor(){this.u=Pi(),this.A=Pi(),this.U=Pi()}parse(t,e){let n;switch(e){case 16:return new os(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return ys.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return wo.ip=t,wo.length=t.length,wo.index=0,wo.O=t.charCodeAt(0),yo(wo,0,61,void 0===e?8:e)}}var oo,ao,lo,co;function ho(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(oo||(oo={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(ao||(ao={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(lo||(lo={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(co||(co={}));const uo=ys.$false,po=ys.$true,fo=ys.$null,go=ys.$undefined,vo=us.$this,mo=us.$parent;var bo;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(bo||(bo={}));const wo=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function yo(t,e,n,i){if(16===i)return new os(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),ko(t);const i=yo(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(ho(So(t)));break;default:s+=String.fromCharCode(t.O)}So(t)}return n.length?(e.push(s),new Rs(e,n)):null}(t);if(ko(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=Io[63&t.$];ko(t),s=new ws(n,yo(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(ko(t),e++,!To(t,16393)){if(524288&t.$){const t=511&e;s=0===t?vo:1===t?mo:new us(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new Ts(t.L):(s=new ds(t.L,511&e),e=1024),t.R=!0,ko(t);break;case 3076:t.R=!1,ko(t),s=vo,e=512;break;case 671751:ko(t),s=yo(t,0,62,i),$o(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new Os(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(ko(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return $o(t,1835022),n;function o(){""!==i?(e.push(new Ps(new ps(vo,i),new fs(vo,new ys(r++)),void 0)),i=""):r++}}(t):function(t,e,n){ko(t);const i=new Array;for(;1835022!==t.$;)if(To(t,1572876)){if(i.push(go),1835022===t.$)break}else{if(i.push(yo(t,e,62,-3&n)),!To(t,1572876))break;if(1835022===t.$)break}return $o(t,1835022),2&n?new As(i):(t.R=!1,new xs(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(ko(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)ko(t),$o(t,1572879),i.push(yo(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;ko(t),To(t,1572879)?i.push(yo(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(yo(t,0,450,-3&e)))}}1835018!==t.$&&$o(t,1572876)}return $o(t,1835018),2&e?new Es(n,i):(t.R=!1,new ks(n,i))}(t,i),e=0;break;case 540714:s=new Ss([t.L]),t.R=!1,ko(t),e=0;break;case 540715:s=xo(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new ys(t.L),t.R=!1,ko(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=Io[63&t.$],t.R=!1,ko(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);ko(t);const n=e,i=yo(t,0,61,0);return new Is(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,ko(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,ko(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new ds(r,s.ancestor):new ps(s,r);continue;case 671757:t.R=!0,ko(t),e=4096,s=new fs(s,yo(t,0,62,i)),$o(t,1835022);break;case 671751:for(t.R=!1,ko(t);1835019!==t.$&&(n.push(yo(t,0,62,i)),To(t,1572876)););$o(t,1835019),s=1024&e?new gs(r,n,s.ancestor):2048&e?new vs(s,r,n):new ms(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new Cs(o,o,s),ko(t);break;case 540715:s=xo(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;ko(t),s=new bs(Io[63&r],s,yo(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(To(t,1572880)){const n=yo(t,e,62,i);$o(t,1572879),s=new hs(s,n,yo(t,e,62,i)),t.R=!1}if(62<n)return s;if(To(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new cs(s,yo(t,e,62,i))}if(61<n)return s;for(;To(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;ko(t);const r=new Array;for(;To(t,1572879);)r.push(yo(t,e,62,i));s=new ls(s,n,r)}for(;To(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;ko(t);const r=new Array;for(;To(t,1572879);)r.push(yo(t,e,62,i));s=new as(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function xo(t,e,n,i,s){const r=[t.L];$o(t,540715);const o=[yo(t,e,62,n)];for(;540714!==(t.$=Eo(t));)r.push(t.L),$o(t,540715),o.push(yo(t,e,62,n));return r.push(t.L),t.R=!1,s?(ko(t),new Cs(r,r,i,o)):(ko(t),new Ss(r,o))}function ko(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=Bo[t.O](t)))return;t.$=1572864}function So(t){return t.O=t.ip.charCodeAt(++t.index)}function Co(t,e){let n=t.O;if(!1===e){do{n=So(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=So(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=So(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function Ao(t){let e=!0,n="";for(;96!==So(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(ho(So(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return So(t),t.L=n,e?540714:540715}function Eo(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,Ao(t)}function To(t,e){return t.$===e&&(ko(t),!0)}function $o(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);ko(t)}const Io=[uo,po,fo,go,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Ro=Pi();Ro.true=2049,Ro.null=2050,Ro.false=2048,Ro.undefined=2051,Ro.$this=3076,Ro.$parent=3078,Ro.in=1640799,Ro.instanceof=1640800,Ro.typeof=34851,Ro.void=34852,Ro.of=1051180;const Oo=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Po=[48,58];function Lo(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function Mo(t){return e=>(So(e),t)}const Uo=t=>{throw new Error(`AUR0168:${t.ip}`)};Uo.notMapped=!0,Lo(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const jo=new Uint8Array(65535);Lo(jo,null,Oo,1),Lo(jo,null,Po,1);const Bo=new Array(65535);Bo.fill(Uo,0,65535),Lo(Bo,null,[0,33,127,161],(t=>(So(t),null))),Lo(Bo,null,Oo,(function(t){for(;jo[So(t)];);const e=Ro[t.L=t.P];return void 0===e?1024:e})),Lo(Bo,null,Po,(t=>Co(t,!1))),Bo[34]=Bo[39]=t=>function(t){const e=t.O;So(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),So(t),n=ho(t.O),So(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);So(t)}const r=t.ip.slice(s,t.index);So(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),Bo[96]=t=>Ao(t),Bo[33]=t=>61!==So(t)?32809:61!==So(t)?1638680:(So(t),1638682),Bo[61]=t=>61!==So(t)?1048616:61!==So(t)?1638679:(So(t),1638681),Bo[38]=t=>38!==So(t)?1572883:(So(t),1638614),Bo[124]=t=>124!==So(t)?1572884:(So(t),1638549),Bo[46]=t=>So(t)<=57&&t.O>=48?Co(t,!0):16393,Bo[60]=t=>61!==So(t)?1638747:(So(t),1638749),Bo[62]=t=>61!==So(t)?1638748:(So(t),1638750),Bo[37]=Mo(1638886),Bo[40]=Mo(671751),Bo[41]=Mo(1835019),Bo[42]=Mo(1638885),Bo[43]=Mo(623009),Bo[44]=Mo(1572876),Bo[45]=Mo(623010),Bo[47]=Mo(1638887),Bo[58]=Mo(1572879),Bo[63]=Mo(1572880),Bo[91]=Mo(671757),Bo[93]=Mo(1835022),Bo[123]=Mo(131080),Bo[125]=Mo(1835018);let No=null;const Fo=[];let Vo=!1;function Do(){return No}function zo(t){if(null==t)throw new Error("AUR0206");if(null==No)return No=t,Fo[0]=No,void(Vo=!0);if(No===t)throw new Error("AUR0207");Fo.push(t),No=t,Vo=!0}function qo(t){if(null==t)throw new Error("AUR0208");if(No!==t)throw new Error("AUR0209");Fo.pop(),No=Fo.length>0?Fo[Fo.length-1]:null,Vo=null!=No}const Zo=Object.freeze({get current(){return No},get connecting(){return Vo},enter:zo,exit:qo,pause:function(){Vo=!1},resume:function(){Vo=!0}}),Ho=Reflect.get,Ko=Object.prototype.toString,Wo=new WeakMap;function Qo(t){switch(Ko.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const _o="__raw__";function Go(t){return Qo(t)?Xo(t):t}function Xo(t){var e;return null!==(e=Wo.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?na:t instanceof Map||t instanceof Set?Aa:ea,n=new Proxy(t,e);return Wo.set(t,n),n}(t)}function Yo(t){var e;return null!==(e=t[_o])&&void 0!==e?e:t}function Jo(t){return Qo(t)&&t[_o]||t}function ta(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const ea={get(t,e,n){if(e===_o)return t;const i=Do();return!Vo||ta(e)||null==i?Ho(t,e,n):(i.observe(t,e),Go(Ho(t,e,n)))}},na={get(t,e,n){if(e===_o)return t;const i=Do();if(!Vo||ta(e)||null==i)return Ho(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return ia;case"includes":return oa;case"indexOf":return aa;case"lastIndexOf":return la;case"every":return sa;case"filter":return ra;case"find":return ha;case"findIndex":return ca;case"flat":return ua;case"flatMap":return da;case"join":return pa;case"push":return ga;case"pop":return fa;case"reduce":return Sa;case"reduceRight":return Ca;case"reverse":return wa;case"shift":return va;case"unshift":return ma;case"slice":return ka;case"splice":return ba;case"some":return ya;case"sort":return xa;case"keys":return La;case"values":case Symbol.iterator:return Ma;case"entries":return Ua}return i.observe(t,e),Go(Ho(t,e,n))},ownKeys(t){var e;return null===(e=Do())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function ia(t,e){var n;const i=Yo(this),s=i.map(((n,i)=>Jo(t.call(e,Go(n),i,this))));return null===(n=Do())||void 0===n||n.observeCollection(i),Go(s)}function sa(t,e){var n;const i=Yo(this),s=i.every(((n,i)=>t.call(e,Go(n),i,this)));return null===(n=Do())||void 0===n||n.observeCollection(i),s}function ra(t,e){var n;const i=Yo(this),s=i.filter(((n,i)=>Jo(t.call(e,Go(n),i,this))));return null===(n=Do())||void 0===n||n.observeCollection(i),Go(s)}function oa(t){var e;const n=Yo(this),i=n.includes(Jo(t));return null===(e=Do())||void 0===e||e.observeCollection(n),i}function aa(t){var e;const n=Yo(this),i=n.indexOf(Jo(t));return null===(e=Do())||void 0===e||e.observeCollection(n),i}function la(t){var e;const n=Yo(this),i=n.lastIndexOf(Jo(t));return null===(e=Do())||void 0===e||e.observeCollection(n),i}function ca(t,e){var n;const i=Yo(this),s=i.findIndex(((n,i)=>Jo(t.call(e,Go(n),i,this))));return null===(n=Do())||void 0===n||n.observeCollection(i),s}function ha(t,e){var n;const i=Yo(this),s=i.find(((e,n)=>t(Go(e),n,this)),e);return null===(n=Do())||void 0===n||n.observeCollection(i),Go(s)}function ua(){var t;const e=Yo(this);return null===(t=Do())||void 0===t||t.observeCollection(e),Go(e.flat())}function da(t,e){var n;const i=Yo(this);return null===(n=Do())||void 0===n||n.observeCollection(i),Xo(i.flatMap(((n,i)=>Go(t.call(e,Go(n),i,this)))))}function pa(t){var e;const n=Yo(this);return null===(e=Do())||void 0===e||e.observeCollection(n),n.join(t)}function fa(){return Go(Yo(this).pop())}function ga(...t){return Yo(this).push(...t)}function va(){return Go(Yo(this).shift())}function ma(...t){return Yo(this).unshift(...t)}function ba(...t){return Go(Yo(this).splice(...t))}function wa(...t){var e;const n=Yo(this),i=n.reverse();return null===(e=Do())||void 0===e||e.observeCollection(n),Go(i)}function ya(t,e){var n;const i=Yo(this),s=i.some(((n,i)=>Jo(t.call(e,Go(n),i,this))));return null===(n=Do())||void 0===n||n.observeCollection(i),s}function xa(t){var e;const n=Yo(this),i=n.sort(t);return null===(e=Do())||void 0===e||e.observeCollection(n),Go(i)}function ka(t,e){var n;const i=Yo(this);return null===(n=Do())||void 0===n||n.observeCollection(i),Xo(i.slice(t,e))}function Sa(t,e){var n;const i=Yo(this),s=i.reduce(((e,n,i)=>t(e,Go(n),i,this)),e);return null===(n=Do())||void 0===n||n.observeCollection(i),Go(s)}function Ca(t,e){var n;const i=Yo(this),s=i.reduceRight(((e,n,i)=>t(e,Go(n),i,this)),e);return null===(n=Do())||void 0===n||n.observeCollection(i),Go(s)}const Aa={get(t,e,n){if(e===_o)return t;const i=Do();if(!Vo||ta(e)||null==i)return Ho(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Oa;case"delete":return Pa;case"forEach":return Ea;case"add":if(t instanceof Set)return Ra;break;case"get":if(t instanceof Map)return $a;break;case"set":if(t instanceof Map)return Ia;break;case"has":return Ta;case"keys":return La;case"values":return Ma;case"entries":return Ua;case Symbol.iterator:return t instanceof Map?Ua:Ma}return Go(Ho(t,e,n))}};function Ea(t,e){var n;const i=Yo(this);return null===(n=Do())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,Go(n),Go(i),this)}))}function Ta(t){var e;const n=Yo(this);return null===(e=Do())||void 0===e||e.observeCollection(n),n.has(Jo(t))}function $a(t){var e;const n=Yo(this);return null===(e=Do())||void 0===e||e.observeCollection(n),Go(n.get(Jo(t)))}function Ia(t,e){return Go(Yo(this).set(Jo(t),Jo(e)))}function Ra(t){return Go(Yo(this).add(Jo(t)))}function Oa(){return Go(Yo(this).clear())}function Pa(t){return Go(Yo(this).delete(Jo(t)))}function La(){var t;const e=Yo(this);null===(t=Do())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Go(e),done:i}},[Symbol.iterator](){return this}}}function Ma(){var t;const e=Yo(this);null===(t=Do())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Go(e),done:i}},[Symbol.iterator](){return this}}}function Ua(){var t;const e=Yo(this);null===(t=Do())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[Go(e[0]),Go(e[1])],done:i}},[Symbol.iterator](){return this}}}const ja=Object.freeze({getProxy:Xo,getRaw:Yo,wrap:Go,unwrap:Jo,rawKey:_o});class Ba{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new Ba(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,Ti(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!$i(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){Na=this.ov,this.ov=this.v,this.subs.notify(this.v,Na,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return zo(this),this.v=Jo(this.get.call(this.up?Go(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,qo(this)}}}let Na;io(Ba),qs(Ba),_s(Ba);const Fa=gn.createInterface("IDirtyChecker",(t=>t.singleton(za))),Va={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},Da={persistent:!0};class za{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(Va.disabled)return;if(++this.j<Va.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(Va.throw)throw new Error(`AUR0222:${e}`);return new qa(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,Da))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}za.inject=[Jn],_s(za);class qa{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}qs(qa);class Za{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Ha{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}}let Ka;class Wa{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){Ka=this.ov,this.ov=this.v,this.subs.notify(this.v,Ka,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Ti(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(Ti(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class Qa{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=$i(n);const s=t[e];this.cb=$i(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){Ka=this.ov,this.ov=this.v,this.subs.notify(this.v,Ka,this.f)}}qs(Wa),qs(Qa),_s(Wa),_s(Qa);const _a=new Ha,Ga=gn.createInterface("IObserverLocator",(t=>t.singleton(Ja))),Xa=gn.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(ai).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new Ya)))));class Ya{handles(){return!1}getObserver(){return _a}getAccessor(){return _a}}class Ja{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):_a}getArrayObserver(t){return Cr(t)}getMapObserver(t){return Kr(t)}getSetObserver(t){return Ur(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new Za(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return Cr(t).getLengthObserver();break;case"size":if(t instanceof Map)return Kr(t).getLengthObserver();if(t instanceof Set)return Ur(t).getLengthObserver();break;default:if(t instanceof Array&&Me(e))return Cr(t).getIndexObserver(Number(e))}let o=el(t,e);if(void 0===o){let n=tl(t);for(;null!==n&&(o=el(n,e),void 0===o);)n=tl(n)}if(void 0!==o&&!Ei.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?Ba.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new Wa(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(Ti(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}Ja.inject=[Fa,Xa];const tl=Object.getPrototypeOf,el=Object.getOwnPropertyDescriptor;gn.createInterface("IObservation",(t=>t.singleton(nl)));class nl{constructor(t){this.oL=t}static get inject(){return[Ga]}run(t){const e=new il(this.oL,t);return e.run(),e}}class il{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{zo(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,qo(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}io(il);const sl=new Map;function rl(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}class ol{constructor(t,e={}){var n,i,s,r,o,a,l,c,h,u,d,p,f;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,this.decodeURI="decodeURI"in e?e.decodeURI:t.decodeURI,this.decodeURIComponent="decodeURIComponent"in e?e.decodeURIComponent:t.decodeURIComponent,this.encodeURI="encodeURI"in e?e.encodeURI:t.encodeURI,this.encodeURIComponent="encodeURIComponent"in e?e.encodeURIComponent:t.encodeURIComponent,this.Date="Date"in e?e.Date:t.Date,this.Reflect="Reflect"in e?e.Reflect:t.Reflect,this.clearInterval="clearInterval"in e?e.clearInterval:null!==(i=null===(n=t.clearInterval)||void 0===n?void 0:n.bind(t))&&void 0!==i?i:rl("clearInterval"),this.clearTimeout="clearTimeout"in e?e.clearTimeout:null!==(r=null===(s=t.clearTimeout)||void 0===s?void 0:s.bind(t))&&void 0!==r?r:rl("clearTimeout"),this.queueMicrotask="queueMicrotask"in e?e.queueMicrotask:null!==(a=null===(o=t.queueMicrotask)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:rl("queueMicrotask"),this.setInterval="setInterval"in e?e.setInterval:null!==(c=null===(l=t.setInterval)||void 0===l?void 0:l.bind(t))&&void 0!==c?c:rl("setInterval"),this.setTimeout="setTimeout"in e?e.setTimeout:null!==(u=null===(h=t.setTimeout)||void 0===h?void 0:h.bind(t))&&void 0!==u?u:rl("setTimeout"),this.console="console"in e?e.console:t.console,this.performanceNow="performanceNow"in e?e.performanceNow:null!==(f=null===(p=null===(d=t.performance)||void 0===d?void 0:d.now)||void 0===p?void 0:p.bind(t.performance))&&void 0!==f?f:rl("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new ll(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let n=sl.get(t);return void 0===n&&sl.set(t,n=new ol(t,e)),n}static set(t,e){sl.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}function al(t){return t.persistent}class ll{constructor(t,e,n){this.platform=t,this.$request=e,this.$cancel=n,this.t=void 0,this.i=0,this.processing=[],this.pending=[],this.delayed=[],this.flushRequested=!1,this.h=void 0,this.taskPool=[],this.u=0,this.T=0,this.$=0,this.I=()=>{this.flushRequested||(this.flushRequested=!0,this.T=this.platform.performanceNow(),this.$request())},this.M=new fl(t.console)}get isEmpty(){return 0===this.i&&0===this.processing.length&&0===this.pending.length&&0===this.delayed.length}get P(){return 0===this.i&&this.processing.every(al)&&this.pending.every(al)&&this.delayed.every(al)}flush(t=this.platform.performanceNow()){if(this.flushRequested=!1,this.$=t,void 0===this.t){if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}let e;for(;this.processing.length>0;)if((e=this.processing.shift()).run(),1===e.status){if(!0===e.suspend)return this.t=e,void this.I();++this.i}if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}if((this.processing.length>0||this.delayed.length>0||this.i>0)&&this.I(),void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}}else this.I()}cancel(){this.flushRequested&&(this.$cancel(),this.flushRequested=!1)}async yield(){this.isEmpty||(void 0===this.h&&(this.h=wl()),await this.h)}queueTask(t,e){const{delay:n,preempt:i,persistent:s,reusable:r,suspend:o}={...gl,...e};if(i){if(n>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(s)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}0===this.processing.length&&this.I();const a=this.platform.performanceNow();let l;if(r){const e=this.taskPool,c=this.u-1;c>=0?(l=e[c],e[c]=void 0,this.u=c,l.reuse(a,n,i,s,o,t)):l=new pl(this.M,this,a,a+n,i,s,o,r,t)}else l=new pl(this.M,this,a,a+n,i,s,o,r,t);return i?this.processing[this.processing.length]=l:0===n?this.pending[this.pending.length]=l:this.delayed[this.delayed.length]=l,l}remove(t){let e=this.processing.indexOf(t);if(e>-1)this.processing.splice(e,1);else if(e=this.pending.indexOf(t),e>-1)this.pending.splice(e,1);else{if(e=this.delayed.indexOf(t),!(e>-1))throw new Error(`Task #${t.id} could not be found`);this.delayed.splice(e,1)}}returnToPool(t){this.taskPool[this.u++]=t}resetPersistentTask(t){t.reset(this.platform.performanceNow()),t.createdTime===t.queueTime?this.pending[this.pending.length]=t:this.delayed[this.delayed.length]=t}completeAsyncTask(t){var e;if(!0===t.suspend){if(this.t!==t)throw new Error(`Async task completion mismatch: suspenderTask=${null===(e=this.t)||void 0===e?void 0:e.id}, task=${t.id}`);this.t=void 0}else--this.i;if(void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class cl extends Error{constructor(t){super("Task was canceled."),this.task=t}}let hl=0;var ul,dl;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(ul||(ul={}));class pl{constructor(t,e,n,i,s,r,o,a,l){this.taskQueue=e,this.createdTime=n,this.queueTime=i,this.preempt=s,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=l,this.id=++hl,this.R=void 0,this.A=void 0,this.q=void 0,this.C=0,this.M=t}get result(){const t=this.q;if(void 0===t)switch(this.C){case 0:{const t=this.q=wl();return this.R=t.resolve,this.A=t.reject,t}case 1:throw new Error("Trying to await task from within task will cause a deadlock.");case 2:return this.q=Promise.resolve();case 3:return this.q=Promise.reject(new cl(this))}return t}get status(){return this.C}run(t=this.taskQueue.platform.performanceNow()){if(0!==this.C)throw new Error(`Cannot run task in ${this.C} state`);const{persistent:e,reusable:n,taskQueue:i,callback:s,R:r,A:o,createdTime:a}=this;let l;this.C=1;try{l=s(t-a),l instanceof Promise?l.then((t=>{this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),i.completeAsyncTask(this),void 0!==r&&r(t),!this.persistent&&n&&i.returnToPool(this)})).catch((t=>{if(this.persistent||this.dispose(),i.completeAsyncTask(this),void 0===o)throw t;o(t)})):(this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),void 0!==r&&r(l),!this.persistent&&n&&i.returnToPool(this))}catch(t){if(this.persistent||this.dispose(),void 0===o)throw t;o(t)}}cancel(){if(0===this.C){const t=this.taskQueue,e=this.reusable,n=this.A;return t.remove(this),t.isEmpty&&t.cancel(),this.C=3,this.dispose(),e&&t.returnToPool(this),void 0!==n&&n(new cl(this)),!0}return!(1!==this.C||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.C=0,this.R=void 0,this.A=void 0,this.q=void 0}reuse(t,e,n,i,s,r){this.createdTime=t,this.queueTime=t+e,this.preempt=n,this.persistent=i,this.suspend=s,this.callback=r,this.C=0}dispose(){this.callback=void 0,this.R=void 0,this.A=void 0,this.q=void 0}}class fl{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,n){if(e instanceof ll){const i=`processing=${e.processing.length} pending=${e.pending.length} delayed=${e.delayed.length} flushReq=${e.flushRequested} susTask=${!!e.t}`;this.console.log(`${t}[Q.${n}] ${i}`)}else{const i=e.id,s=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,l=e.persistent,c=e.suspend,h=function(t){switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}}(e.C),u=`id=${i} created=${s} queue=${r} preempt=${o} persistent=${l} reusable=${a} status=${h} suspend=${c}`;this.console.log(`${t}[T.${n}] ${u}`)}}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(dl||(dl={}));const gl={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let vl,ml;function bl(t,e){vl=t,ml=e}function wl(){const t=new Promise(bl);return t.resolve=vl,t.reject=ml,t}const yl=new Map;class xl extends ol{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver,window,document,location,history,navigator,customElements".split(",").forEach((n=>{this[n]=n in e?e[n]:t[n]})),"fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((n=>{var i,s;this[n]=n in e?e[n]:null!==(s=null===(i=t[n])||void 0===i?void 0:i.bind(t))&&void 0!==s?s:function(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}(n)})),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new ll(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new ll(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let n=yl.get(t);return void 0===n&&yl.set(t,n=new xl(t,e)),n}static set(t,e){yl.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}function kl(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function Sl(t,e){return function(n,i){e(n,i,t)}}const Cl=Se.getOwn,Al=Se.hasOwn,El=Se.define,{annotation:Tl,resource:$l}=on,Il=Tl.keyFor,Rl=$l.keyFor,Ol=$l.appendTo,Pl=Tl.appendTo,Ll=Tl.getKeys,Ml=()=>Object.create(null),Ul=Object.prototype.hasOwnProperty,jl=Ml(),Bl=(t,e,n)=>{if(!0===jl[e])return!0;if(!Vl(e))return!1;const i=e.slice(0,5);return jl[e]="aria-"===i||"data-"===i||n.isStandardSvgAttribute(t,e)},Nl=t=>t instanceof Promise,Fl=t=>"function"==typeof t,Vl=t=>"string"==typeof t,Dl=Object.defineProperty,zl=t=>{throw t};function ql(t,e){let n;function i(t,e){arguments.length>1&&(n.property=e),El(Hl,Wl.create(e,t,n),t.constructor,e),Pl(t.constructor,Kl.keyFrom(e))}return arguments.length>1?(n={},void i(t,e)):Vl(t)?(n={},i):(n=void 0===t?{}:t,i)}function Zl(t){return t.startsWith(Hl)}const Hl=Il("bindable"),Kl=Object.freeze({name:Hl,keyFrom:t=>`${Hl}:${t}`,from(t,...e){const n={},i=Array.isArray;function s(e){n[e]=Wl.create(e,t)}function r(e,i){n[e]=i instanceof Wl?i:Wl.create(e,t,i)}return e.forEach((function(t){i(t)?t.forEach(s):t instanceof Wl?n[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>r(e,t[e])))})),n},for(t){let e;const n={add(i){let s,r;return Vl(i)?(s=i,r={property:s}):(s=i.property,r=i),e=Wl.create(s,t,r),Al(Hl,t,s)||Pl(t,Kl.keyFrom(s)),El(Hl,e,t,s),n},mode:t=>(e.mode=t,n),callback:t=>(e.callback=t,n),attribute:t=>(e.attribute=t,n),primary:()=>(e.primary=!0,n),set:t=>(e.set=t,n)};return n},getAll(t){const e=Hl.length+1,n=[],i=Qe(t);let s,r,o,a,l=i.length,c=0;for(;--l>=0;)for(o=i[l],s=Ll(o).filter(Zl),r=s.length,a=0;a<r;++a)n[c++]=Cl(Hl,o,s[a].slice(e));return n}});class Wl{constructor(t,e,n,i,s,r){this.attribute=t,this.callback=e,this.mode=n,this.primary=i,this.property=s,this.set=r}static create(t,e,n={}){return new Wl(We(n.attribute,Ve(t)),We(n.callback,`${t}Changed`),We(n.mode,js.toView),We(n.primary,!1),We(n.property,t),We(n.set,function(t,e,n={}){var i,s,r;const o=null!==(s=null!==(i=n.type)&&void 0!==i?i:Reflect.getMetadata("design:type",e,t))&&void 0!==s?s:null;if(null==o)return Yn;let a;switch(o){case Number:case Boolean:case String:case BigInt:a=o;break;default:{const t=o.coerce;a="function"==typeof t?t.bind(o):null!==(r=Ql.for(o))&&void 0!==r?r:Yn;break}}return a===Yn?a:function(t,e){return function(n,i){var s;return(null==i?void 0:i.enableCoercion)?(null!=e?e:null===(s=null==i?void 0:i.coerceNullish)||void 0===s||!s)&&null==n?n:t(n,i):n}}(a,n.nullable)}(t,e,n)))}}const Ql={key:Il("coercer"),define(t,e){El(Ql.key,t[e].bind(t),t)},for:t=>Cl(Ql.key,t)};class _l{constructor(t,e,n,i,s,r){this.set=i,this.$controller=s,this.t=r,this.v=void 0,this.ov=void 0,this.f=0;const o=t[n],a=t.propertyChanged,l=this.i=Fl(o),c=this.u=Fl(a),h=this.hs=i!==Yn;let u;this.o=t,this.k=e,this.cb=l?o:Yn,this.C=c?a:Yn,void 0!==this.cb||c||h?(this.iO=!0,u=t[e],this.v=h&&void 0!==u?i(u,this.t):u,this.A()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t,e){this.hs&&(t=this.set(t,this.t));const n=this.v;if(this.iO){if(Object.is(t,n))return;this.v=t,this.ov=n,this.f=e,(null==this.$controller||this.$controller.isBound)&&(this.i&&this.cb.call(this.o,t,n,e),this.u&&this.C.call(this.o,this.k,t,n,e)),this.queue.add(this)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.t):this.o[this.k],this.A()),this.subs.add(t)}flush(){Gl=this.ov,this.ov=this.v,this.subs.notify(this.v,Gl,this.f)}A(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t,0)}})}}let Gl;qs(_l),_s(_l);class Xl{constructor(t,e,n,i){if(this.chars=t,this.repeat=e,this.isSymbol=n,this.isInverted=i,i)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.B;break;default:this.has=this.I}else switch(t.length){case 0:this.has=this.T;break;case 1:this.has=this.P;break;default:this.has=this.$}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}$(t){return this.chars.includes(t)}P(t){return this.chars===t}T(t){return!1}I(t){return!this.chars.includes(t)}B(t){return this.chars!==t}R(t){return!0}}class Yl{constructor(){this.parts=Gn,this.O="",this.L={},this.q={}}get pattern(){const t=this.O;return""===t?null:t}set pattern(t){null==t?(this.O="",this.parts=Gn):(this.O=t,this.parts=this.q[t])}append(t,e){const n=this.L;void 0===n[t]?n[t]=e:n[t]+=e}next(t){const e=this.L;let n;void 0!==e[t]&&(n=this.q,void 0===n[t]?n[t]=[e[t]]:n[t].push(e[t]),e[t]=void 0)}}class Jl{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,n=e.length;let i=null,s=0;for(;s<n;++s)if(i=e[s],t.equals(i.charSpec))return i;return null}append(t,e){const n=this.patterns;n.includes(e)||n.push(e);let i=this.findChild(t);return null==i&&(i=new Jl(t,e),this.nextStates.push(i),t.repeat&&i.nextStates.push(i)),i}findMatches(t,e){const n=[],i=this.nextStates,s=i.length;let r=0,o=null,a=0,l=0;for(;a<s;++a)if(o=i[a],o.charSpec.has(t))if(n.push(o),r=o.patterns.length,l=0,o.charSpec.isSymbol)for(;l<r;++l)e.next(o.patterns[l]);else for(;l<r;++l)e.append(o.patterns[l],t);return n}}class tc{constructor(t){this.text=t;const e=this.len=t.length,n=this.specs=[];let i=0;for(;e>i;++i)n.push(new Xl(t[i],!1,!1,!1))}eachChar(t){const e=this.len,n=this.specs;let i=0;for(;e>i;++i)t(n[i])}}class ec{constructor(t){this.text="PART",this.spec=new Xl(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class nc{constructor(t){this.text=t,this.spec=new Xl(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class ic{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const sc=gn.createInterface("ISyntaxInterpreter",(t=>t.singleton(rc)));class rc{constructor(){this.rootState=new Jl(null),this.initialStates=[this.rootState]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let n,i,s,r,o,a,l,c,h=0;for(;e>h;){for(n=this.rootState,i=t[h],s=i.pattern,r=new ic,o=this.parse(i,r),a=o.length,l=t=>{n=n.append(t,s)},c=0;a>c;++c)o[c].eachChar(l);n.types=r,n.isEndpoint=!0,++h}}interpret(t){const e=new Yl,n=t.length;let i,s=this.initialStates,r=0;for(;r<n&&(s=this.getNextStates(s,t.charAt(r),e),0!==s.length);++r);return s=s.filter(oc),s.length>0&&(s.sort(ac),i=s[0],i.charSpec.isSymbol||e.next(i.pattern),e.pattern=i.pattern),e}getNextStates(t,e,n){const i=[];let s=null;const r=t.length;let o=0;for(;o<r;++o)s=t[o],i.push(...s.findMatches(e,n));return i}parse(t,e){const n=[],i=t.pattern,s=i.length,r=t.symbols;let o=0,a=0,l="";for(;o<s;)l=i.charAt(o),0!==r.length&&r.includes(l)?o!==a?(n.push(new tc(i.slice(a,o))),++e.statics,a=o):(n.push(new nc(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===l&&"PART"===i.slice(o,o+4)?(a=o+=4,n.push(new ec(r)),++e.dynamics):++o;return a!==o&&(n.push(new tc(i.slice(a,o))),++e.statics),n}}function oc(t){return t.isEndpoint}function ac(t,e){const n=t.types,i=e.types;return n.statics!==i.statics?i.statics-n.statics:n.dynamics!==i.dynamics?i.dynamics-n.dynamics:n.symbols!==i.symbols?i.symbols-n.symbols:0}class lc{constructor(t,e,n,i){this.rawName=t,this.rawValue=e,this.target=n,this.command=i}}const cc=gn.createInterface("IAttributePattern"),hc=gn.createInterface("IAttributeParser",(t=>t.singleton(uc)));class uc{constructor(t,e){this.U={},this._=t;const n=this.F={},i=e.reduce(((t,e)=>{const i=vc(e.constructor);return i.forEach((t=>n[t.pattern]=e)),t.concat(i)}),Gn);t.add(i)}parse(t,e){let n=this.U[t];null==n&&(n=this.U[t]=this._.interpret(t));const i=n.pattern;return null==i?new lc(t,e,t,null):this.F[i][i](t,e,n.parts)}}function dc(...t){return function(e){return mc.define(t,e)}}uc.inject=[sc,An(cc)];class pc{constructor(t){this.Type=t,this.name=void 0}register(t){Hn.singleton(cc,this.Type).register(t)}}const fc=Rl("attribute-pattern"),gc="attribute-pattern-definitions",vc=t=>on.annotation.get(t,gc),mc=Object.freeze({name:fc,definitionAnnotationKey:gc,define(t,e){const n=new pc(e);return El(fc,n,e),Ol(e,fc),on.annotation.set(e,gc,t),Pl(e,gc),e},getPatternDefinitions:vc});let bc=class{"PART.PART"(t,e,n){return new lc(t,e,n[0],n[1])}"PART.PART.PART"(t,e,n){return new lc(t,e,n[0],n[2])}};bc=kl([dc({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],bc);let wc=class{ref(t,e,n){return new lc(t,e,"element","ref")}"PART.ref"(t,e,n){return new lc(t,e,n[0],"ref")}};wc=kl([dc({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],wc);let yc=class{":PART"(t,e,n){return new lc(t,e,n[0],"bind")}};yc=kl([dc({pattern:":PART",symbols:":"})],yc);let xc=class{"@PART"(t,e,n){return new lc(t,e,n[0],"trigger")}};xc=kl([dc({pattern:"@PART",symbols:"@"})],xc);let kc=class{"...$attrs"(t,e,n){return new lc(t,e,"","...$attrs")}};kc=kl([dc({pattern:"...$attrs",symbols:""})],kc);const Sc=Jn,Cc=gn.createInterface("ISVGAnalyzer",(t=>t.singleton(Ac)));class Ac{isStandardSvgAttribute(t,e){return!1}}const Ec=gn.createInterface("IAttrMapper",(t=>t.singleton(Tc)));class Tc{constructor(t){this.svg=t,this.fns=[],this.N=Ml(),this.W=Ml(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[Cc]}useMapping(t){var e,n;let i,s,r,o;for(r in t)for(o in i=t[r],s=null!==(e=(n=this.N)[r])&&void 0!==e?e:n[r]=Ml(),i){if(void 0!==s[o])throw $c(o,r);s[o]=i[o]}}useGlobalMapping(t){const e=this.W;for(const n in t){if(void 0!==e[n])throw $c(n,"*");e[n]=t[n]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((n=>n(t,e)))}map(t,e){var n,i,s;return null!==(s=null!==(i=null===(n=this.N[t.nodeName])||void 0===n?void 0:n[e])&&void 0!==i?i:this.W[e])&&void 0!==s?s:Bl(t,e,this.svg)?e:null}}function $c(t,e){return new Error(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}class Ic{constructor(t,e,n,i,s){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=s,this.interceptor=this,this.isBound=!1,this.targetObserver=i.getAccessor(e,n)}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(e,"$event"),n}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.targetObserver.setValue((t=>this.interceptor.callSource(t)),t,this.target,this.targetProperty),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t,this.target,this.targetProperty),this.isBound=!1)}observe(t,e){}handleChange(t,e,n){}}class Rc{constructor(t,e,n){this.type=7,this.v=null,this.ov=null,this.H=!1,this.f=0,this.o=t,this.G=e,this.X=n}getValue(){return this.v}setValue(t,e){this.v=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H)switch(this.H=!1,this.ov=this.v,this.X){case"class":this.o.classList.toggle(this.G,!!this.v);break;case"style":{let t="",e=this.v;Vl(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.G,e,t);break}default:null==this.v?this.o.removeAttribute(this.X):this.o.setAttribute(this.X,String(this.v))}}handleMutation(t){let e=!1;for(let n=0,i=t.length;i>n;++n){const i=t[n];if("attributes"===i.type&&i.attributeName===this.G){e=!0;break}}if(e){let t;switch(this.X){case"class":t=this.o.classList.contains(this.G);break;case"style":t=this.o.style.getPropertyValue(this.G);break;default:throw new Error(`AUR0651:${this.X}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.H=!1,this.f=0,this.queue.add(this))}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.G),Oc(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&Pc(this.o,this)}flush(){Uc=this.ov,this.ov=this.v,this.subs.notify(this.v,Uc,this.f)}}qs(Rc),_s(Rc);const Oc=(t,e,n)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(Lc)).observe(e,{attributes:!0}),e.$eMObs.add(n)},Pc=(t,e)=>{const n=t.$eMObs;return!(!n||!n.delete(e)||(0===n.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},Lc=t=>{t[0].target.$eMObs.forEach(Mc,t)};function Mc(t){t.handleMutation(this)}let Uc;class jc{constructor(t){this.b=t}handleChange(t,e,n){const i=this.b;t!==i.sourceExpression.evaluate(n,i.$scope,i.locator,null)&&i.updateSource(t,n)}}const{oneTime:Bc,toView:Nc,fromView:Fc}=js,Vc=Nc|Bc,Dc={reusable:!1,preempt:!0};class zc{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.targetAttribute=n,this.targetProperty=i,this.mode=s,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=e,this.p=o.get(Sc),this.oL=r}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;n|=this.persistentFlags;const i=this.mode,s=this.interceptor,r=this.sourceExpression,o=this.$scope,a=this.locator,l=this.targetObserver,c=0==(2&n)&&(4&l.type)>0;let h,u=!1;(10082!==r.$kind||this.obs.count>1)&&(u=0==(i&Bc),u&&this.obs.version++,t=r.evaluate(n,o,a,s),u&&this.obs.clear()),t!==this.value&&(this.value=t,c?(h=this.task,this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,s.updateTarget(t,n)}),Dc),null==h||h.cancel()):s.updateTarget(t,n))}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);let s=this.targetObserver;s||(s=this.targetObserver=new Rc(this.target,this.targetProperty,this.targetAttribute)),i=this.sourceExpression;const r=this.mode,o=this.interceptor;let a=!1;r&Vc&&(a=(r&Nc)>0,o.updateTarget(this.value=i.evaluate(t,e,this.locator,a?o:null),t)),r&Fc&&s.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new jc(o)),this.isBound=!0}$unbind(t){var e;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.obs.clearAll(),this.isBound=!1)}}io(zc);const{toView:qc}=js,Zc={reusable:!1,preempt:!0};class Hc{constructor(t,e,n,i,s,r,o){this.interpolation=e,this.target=n,this.targetProperty=i,this.mode=s,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.oL=t,this.targetObserver=t.getAccessor(n,i);const a=e.expressions,l=this.partBindings=Array(a.length),c=a.length;let h=0;for(;c>h;++h)l[h]=new Kc(a[h],n,i,r,t,this)}updateTarget(t,e){const n=this.partBindings,i=this.interpolation.parts,s=n.length;let r="",o=0;if(1===s)r=i[0]+n[0].value+i[1];else for(r=i[0];s>o;++o)r+=n[o].value+i[o+1];const a=this.targetObserver;let l;0==(2&e)&&(4&a.type)>0?(l=this.task,this.task=this.taskQueue.queueTask((()=>{this.task=null,a.setValue(r,e,this.target,this.targetProperty)}),Zc),null==l||l.cancel(),l=null):a.setValue(r,e,this.target,this.targetProperty)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].$bind(t,e);this.updateTarget(void 0,t)}$unbind(t){var e;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].interceptor.$unbind(t);null===(e=this.task)||void 0===e||e.cancel(),this.task=null}}class Kc{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=i,this.owner=r,this.interceptor=this,this.mode=js.toView,this.value="",this.task=null,this.isBound=!1,this.oL=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.sourceExpression,s=this.obs;let r=!1;10082===i.$kind&&1===s.count||(r=(this.mode&qc)>0,r&&s.version++,t=i.evaluate(n,this.$scope,this.locator,r?this.interceptor:null),r&&s.clear()),t!=this.value&&(this.value=t,t instanceof Array&&this.observeCollection(t),this.owner.updateTarget(t,n))}handleCollectionChange(t,e){this.owner.updateTarget(void 0,e)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&qc)>0?this.interceptor:null),this.value instanceof Array&&this.observeCollection(this.value)}$unbind(t){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll())}}io(Kc);class Wc{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.locator=n,this.p=s,this.strict=r,this.interceptor=this,this.mode=js.toView,this.value="",this.task=null,this.isBound=!1,this.oL=i}updateTarget(t,e){var n,i;const s=this.target,r=this.p.Node,o=this.value;this.value=t,o instanceof r&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o)),t instanceof r?(s.textContent="",null===(i=s.parentNode)||void 0===i||i.insertBefore(t,s)):s.textContent=String(t)}handleChange(t,e,n){var i;if(!this.isBound)return;const s=this.sourceExpression,r=this.obs;let o=!1;if(10082===s.$kind&&1===r.count||(o=(this.mode&qc)>0,o&&r.version++,n|=this.strict?1:0,t=s.evaluate(n,this.$scope,this.locator,o?this.interceptor:null),o&&r.clear()),t===this.value)return null===(i=this.task)||void 0===i||i.cancel(),void(this.task=null);0==(2&n)?this.queueUpdate(t,n):this.updateTarget(t,n)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),t|=this.strict?1:0;const n=this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&qc)>0?this.interceptor:null);n instanceof Array&&this.observeCollection(n),this.updateTarget(n,t)}$unbind(t){var e;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),null===(e=this.task)||void 0===e||e.cancel(),this.task=null)}queueUpdate(t,e){const n=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(t,e)}),Zc),null==n||n.cancel()}}io(Wc);class Qc{constructor(t,e,n,i,s=!1){this.sourceExpression=t,this.targetProperty=e,this.locator=i,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.target=null,this.oL=n,this.Y=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.target,s=this.targetProperty,r=i[s];this.obs.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),this.obs.clear(),t!==r&&(i[s]=t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.target=this.Y?e.bindingContext:e.overrideContext;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|t,e,this.locator,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),this.isBound=!1}}io(Qc);const{oneTime:_c,toView:Gc,fromView:Xc}=js,Yc=Gc|_c,Jc={reusable:!1,preempt:!0};class th{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.mode=i,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null,this.oL=s}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;const i=0==(2&(n|=this.persistentFlags))&&(4&this.targetObserver.type)>0,s=this.obs;let r=!1;(10082!==this.sourceExpression.$kind||s.count>1)&&(r=this.mode>_c,r&&s.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),r&&s.clear()),i?(eh=this.task,this.task=this.taskQueue.queueTask((()=>{this.interceptor.updateTarget(t,n),this.task=null}),Jc),null==eh||eh.cancel(),eh=null):this.interceptor.updateTarget(t,n)}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}t|=1,this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);const s=this.oL,r=this.mode;let o=this.targetObserver;o||(o=r&Xc?s.getObserver(this.target,this.targetProperty):s.getAccessor(this.target,this.targetProperty),this.targetObserver=o),i=this.sourceExpression;const a=this.interceptor,l=(r&Gc)>0;r&Yc&&a.updateTarget(i.evaluate(t,e,this.locator,l?a:null),t),r&Xc&&(o.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new jc(a)),l||a.updateSource(o.getValue(this.target,this.targetProperty),t)),this.isBound=!0}$unbind(t){this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,eh=this.task,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=eh&&(eh.cancel(),eh=this.task=null),this.obs.clearAll(),this.isBound=!1)}}io(th);let eh=null;class nh{constructor(t,e,n){this.sourceExpression=t,this.target=e,this.locator=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(t,this.$scope,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,null)===this.target&&e.assign(t,this.$scope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const ih=gn.createInterface("IAppTask");class sh{constructor(t,e,n){this.c=void 0,this.slot=t,this.k=e,this.cb=n}register(t){return this.c=t.register(Hn.instance(ih,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const rh=Object.freeze({beforeCreate:oh("beforeCreate"),hydrating:oh("hydrating"),hydrated:oh("hydrated"),beforeActivate:oh("beforeActivate"),afterActivate:oh("afterActivate"),beforeDeactivate:oh("beforeDeactivate"),afterDeactivate:oh("afterDeactivate")});function oh(t){return function(e,n){return Fl(n)?new sh(t,e,n):new sh(t,null,e)}}function ah(t){return t.startsWith(lh)}const lh=Il("children-observer"),ch=Object.freeze({name:lh,keyFrom:t=>`${lh}:${t}`,from(...t){const e={},n=Array.isArray;function i(t){e[t]=uh.create(t)}function s(t,n){e[t]=uh.create(t,n)}return t.forEach((function(t){n(t)?t.forEach(i):t instanceof uh?e[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>s(e,t)))})),e},getAll(t){const e=lh.length+1,n=[],i=Qe(t);let s,r,o,a=i.length,l=0;for(;--a>=0;){o=i[a],s=Ll(o).filter(ah),r=s.length;for(let t=0;t<r;++t)n[l++]=Cl(lh,o,s[t].slice(e))}return n}}),hh={childList:!0};class uh{constructor(t,e,n,i,s,r){this.callback=t,this.property=e,this.options=n,this.query=i,this.filter=s,this.map=r}static create(t,e={}){var n;return new uh(We(e.callback,`${t}Changed`),We(e.property,t),null!==(n=e.options)&&void 0!==n?n:hh,e.query,e.filter,e.map)}}class dh{constructor(t,e,n,i,s=ph,r=fh,o=gh,a){this.controller=t,this.obj=e,this.propertyKey=n,this.query=s,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[i],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){var t;this.observing||(this.observing=!0,this.children=this.get(),(null!==(t=this.observer)&&void 0!==t?t:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.Z()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=Gn)}Z(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(t,e,n,i){var s;const r=e(t),o=r.length,a=[];let l,c,h,u=0;for(;u<o;++u)l=r[u],c=Dh.for(l,vh),h=null!==(s=null==c?void 0:c.viewModel)&&void 0!==s?s:null,n(l,c,h)&&a.push(i(l,c,h));return a}(this.controller,this.query,this.filter,this.map)}}function ph(t){return t.host.childNodes}function fh(t,e,n){return!!n}function gh(t,e,n){return n}qs()(dh);const vh={optional:!0};function mh(t){return function(e){return Sh.define(t,e)}}function bh(t){return function(e){return Sh.define(Vl(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class wh{constructor(t,e,n,i,s,r,o,a,l,c){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.defaultBindingMode=s,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=l,this.dependencies=c}get type(){return 2}static create(t,e){let n,i;return Vl(t)?(n=t,i={name:n}):(n=t.name,i=t),new wh(e,We(kh(e,"name"),n),Ke(kh(e,"aliases"),i.aliases,e.aliases),Sh.keyFrom(n),We(kh(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,js.toView),We(kh(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Kl.from(e,...Kl.getAll(e),kh(e,"bindables"),e.bindables,i.bindables),We(kh(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),Ke(Eh.getAnnotation(e),e.watches),Ke(kh(e,"dependencies"),i.dependencies,e.dependencies))}register(t){const{Type:e,key:n,aliases:i}=this;Hn.transient(n,e).register(t),Hn.aliasTo(n,e).register(t),Fi(i,Sh,n,t)}}const yh=Rl("custom-attribute"),xh=t=>`${yh}:${t}`,kh=(t,e)=>Cl(Il(e),t),Sh=Object.freeze({name:yh,keyFrom:xh,isType:t=>Fl(t)&&Al(yh,t),for(t,e){var n;return null!==(n=nd(t,xh(e)))&&void 0!==n?n:void 0},define(t,e){const n=wh.create(t,e);return El(yh,n,n.Type),El(yh,n,n),Ol(e,yh),n.Type},getDefinition(t){const e=Cl(yh,t);if(void 0===e)throw new Error(`AUR0759:${t.name}`);return e},annotate(t,e,n){El(Il(e),n,t)},getAnnotation:kh}),Ch=Gn,Ah=Il("watch"),Eh=Object.freeze({name:Ah,add(t,e){let n=Cl(Ah,t);null==n&&El(Ah,n=[],t),n.push(e)},getAnnotation(t){var e;return null!==(e=Cl(Ah,t))&&void 0!==e?e:Ch}});function Th(t){return function(e){return Dh.define(t,e)}}function $h(t){if(void 0===t)return function(t){Fh(t,"containerless",!0)};Fh(t,"containerless",!0)}const Ih=new WeakMap;class Rh{constructor(t,e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v,m,b,w,y){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.cache=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=g,this.shadowOptions=v,this.hasSlots=m,this.enhance=b,this.watches=w,this.processContent=y}get type(){return 1}static create(t,e=null){if(null===e){const n=t;if(Vl(n))throw new Error(`AUR0761:${t}`);const i=hn("name",n,Nh);return e=Fl(n.Type)?n.Type:Dh.generateType(Fe(i)),new Rh(e,i,Ke(n.aliases),hn("key",n,(()=>Dh.keyFrom(i))),hn("cache",n,Ph),hn("capture",n,Mh),hn("template",n,Lh),Ke(n.instructions),Ke(n.dependencies),hn("injectable",n,Lh),hn("needsCompile",n,Uh),Ke(n.surrogates),Kl.from(e,n.bindables),ch.from(n.childrenObservers),hn("containerless",n,Mh),hn("isStrictBinding",n,Mh),hn("shadowOptions",n,Lh),hn("hasSlots",n,Mh),hn("enhance",n,Mh),hn("watches",n,jh),cn("processContent",e,Lh))}if(Vl(t))return new Rh(e,t,Ke(Vh(e,"aliases"),e.aliases),Dh.keyFrom(t),cn("cache",e,Ph),cn("capture",e,Mh),cn("template",e,Lh),Ke(Vh(e,"instructions"),e.instructions),Ke(Vh(e,"dependencies"),e.dependencies),cn("injectable",e,Lh),cn("needsCompile",e,Uh),Ke(Vh(e,"surrogates"),e.surrogates),Kl.from(e,...Kl.getAll(e),Vh(e,"bindables"),e.bindables),ch.from(...ch.getAll(e),Vh(e,"childrenObservers"),e.childrenObservers),cn("containerless",e,Mh),cn("isStrictBinding",e,Mh),cn("shadowOptions",e,Lh),cn("hasSlots",e,Mh),cn("enhance",e,Mh),Ke(Eh.getAnnotation(e),e.watches),cn("processContent",e,Lh));const n=hn("name",t,Nh);return new Rh(e,n,Ke(Vh(e,"aliases"),t.aliases,e.aliases),Dh.keyFrom(n),ln("cache",t,e,Ph),ln("capture",t,e,Mh),ln("template",t,e,Lh),Ke(Vh(e,"instructions"),t.instructions,e.instructions),Ke(Vh(e,"dependencies"),t.dependencies,e.dependencies),ln("injectable",t,e,Lh),ln("needsCompile",t,e,Uh),Ke(Vh(e,"surrogates"),t.surrogates,e.surrogates),Kl.from(e,...Kl.getAll(e),Vh(e,"bindables"),e.bindables,t.bindables),ch.from(...ch.getAll(e),Vh(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),ln("containerless",t,e,Mh),ln("isStrictBinding",t,e,Mh),ln("shadowOptions",t,e,Lh),ln("hasSlots",t,e,Mh),ln("enhance",t,e,Mh),Ke(t.watches,Eh.getAnnotation(e),e.watches),ln("processContent",t,e,Lh))}static getOrCreate(t){if(t instanceof Rh)return t;if(Ih.has(t))return Ih.get(t);const e=Rh.create(t);return Ih.set(t,e),El(Bh,e,e.Type),e}register(t){const{Type:e,key:n,aliases:i}=this;t.has(n,!1)||(Hn.transient(n,e).register(t),Hn.aliasTo(n,e).register(t),Fi(i,Dh,n,t))}}const Oh={name:void 0,searchParents:!1,optional:!1},Ph=()=>0,Lh=()=>null,Mh=()=>!1,Uh=()=>!0,jh=()=>Gn,Bh=Rl("custom-element"),Nh=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),Fh=(t,e,n)=>{El(Il(e),n,t)},Vh=(t,e)=>Cl(Il(e),t),Dh=Object.freeze({name:Bh,keyFrom:t=>`${Bh}:${t}`,isType:t=>Fl(t)&&Al(Bh,t),for(t,e=Oh){if(void 0===e.name&&!0!==e.searchParents){const n=nd(t,Bh);if(null===n){if(!0===e.optional)return null;throw new Error("AUR0762")}return n}if(void 0!==e.name){if(!0!==e.searchParents){const n=nd(t,Bh);if(null===n)throw new Error("AUR0763");return n.is(e.name)?n:void 0}let n=t,i=!1;for(;null!==n;){const t=nd(n,Bh);if(null!==t&&(i=!0,t.is(e.name)))return t;n=cd(n)}if(i)return;throw new Error("AUR0764")}let n=t;for(;null!==n;){const t=nd(n,Bh);if(null!==t)return t;n=cd(n)}throw new Error("AUR0765")},define(t,e){const n=Rh.create(t,e);return El(Bh,n,n.Type),El(Bh,n,n),Ol(n.Type,Bh),n.Type},getDefinition(t){const e=Cl(Bh,t);if(void 0===e)throw new Error(`AUR0760:${t.name}`);return e},annotate:Fh,getAnnotation:Vh,generateName:Nh,createInjectable(){const t=function(e,n,i){return gn.getOrCreateAnnotationParamTypes(e)[i]=t,e};return t.register=function(e){return{resolve:(e,n)=>n.has(t,!0)?n.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(n,i=e){const s=class{};return t.value=n,Reflect.defineProperty(s,"name",t),i!==e&&Object.assign(s.prototype,i),s}}()});Il("processContent");class zh{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.J={},this.tt=0,this.H=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H){this.H=!1;const t=this.value,e=this.J,n=qh(t);let i=this.tt;if(this.ov=t,n.length>0&&this.it(n),this.tt+=1,0===i)return;i-=1;for(const t in e)Ul.call(e,t)&&e[t]===i&&this.obj.classList.remove(t)}}it(t){const e=this.obj,n=t.length;let i,s=0;for(;s<n;s++)i=t[s],0!==i.length&&(this.J[i]=this.tt,e.classList.add(i))}}function qh(t){if(Vl(t))return Zh(t);if("object"!=typeof t)return Gn;if(t instanceof Array){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...qh(t[i]));return n}return Gn}const e=[];let n;for(n in t)Boolean(t[n])&&(n.includes(" ")?e.push(...Zh(n)):e.push(n));return e}function Zh(t){const e=t.match(/\S+/g);return null===e?Gn:e}gn.createInterface("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>_h.supported(t.get(Sc))?t.get(Hh):t.get(Kh)))));class Hh{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new _h(this.p,t,this.cache,e)}}Hh.inject=[Sc];class Kh{constructor(t){this.p=t}createStyles(t,e){return new Gh(this.p,t,e)}}Kh.inject=[Sc];const Wh=gn.createInterface("IShadowDOMStyles"),Qh=gn.createInterface("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:Yn})));class _h{constructor(t,e,n,i=null){this.sharedStyles=i,this.styleSheets=e.map((e=>{let i;return e instanceof t.CSSStyleSheet?i=e:(i=n.get(e),void 0===i&&(i=new t.CSSStyleSheet,i.replaceSync(e),n.set(e,i))),i}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class Gh{constructor(t,e,n=null){this.p=t,this.localStyles=e,this.sharedStyles=n}applyTo(t){const e=this.localStyles,n=this.p;for(let i=e.length-1;i>-1;--i){const s=n.document.createElement("style");s.innerHTML=e[i],t.prepend(s)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:Xh,exit:Yh}=Zo,{wrap:Jh,unwrap:tu}=ja;class eu{constructor(t,e,n,i,s){this.obj=t,this.get=n,this.cb=i,this.useProxy=s,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.value,n=this.compute();Object.is(n,e)||this.cb.call(t,n,e,t)}compute(){this.running=!0,this.obs.version++;try{return Xh(this),this.value=tu(this.get.call(void 0,this.useProxy?Jh(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,Yh(this)}}}class nu{constructor(t,e,n,i,s){this.scope=t,this.locator=e,this.oL=n,this.expression=i,this.callback=s,this.interceptor=this,this.isBound=!1,this.obj=t.bindingContext}handleChange(t){const e=this.expression,n=this.obj,i=this.value;10082===e.$kind&&1===this.obs.count||(this.obs.version++,t=e.evaluate(0,this.scope,this.locator,this),this.obs.clear()),Object.is(t,i)||(this.value=t,this.callback.call(n,t,i,n))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,this.locator,this),this.obs.clear())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.value=void 0)}}io(eu),io(nu);const iu=gn.createInterface("ILifecycleHooks");class su{constructor(t,e){this.definition=t,this.instance=e}}class ru{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const n=new Set;let i=e.prototype;for(;i!==Object.prototype;){for(const t of Object.getOwnPropertyNames(i))"constructor"!==t&&n.add(t);i=Object.getPrototypeOf(i)}return new ru(e,n)}register(t){Hn.singleton(iu,this.Type).register(t)}}const ou=new WeakMap,au=Il("lifecycle-hooks"),lu=Object.freeze({name:au,define(t,e){const n=ru.create(t,e);return El(au,n,e),Ol(e,au),n.Type},resolve(t){let e=ou.get(t);if(void 0===e){ou.set(t,e=new cu);const n=t.root,i=n.id===t.id?t.getAll(iu):t.has(iu,!1)?n.getAll(iu).concat(t.getAll(iu)):n.getAll(iu);let s,r,o,a,l;for(s of i)for(a of(r=Cl(au,s.constructor),o=new su(r,s),r.propertyNames))l=e[a],void 0===l?e[a]=[o]:l.push(o)}return e}});class cu{}const hu=gn.createInterface("IViewFactory");class uu{constructor(t,e){this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=uu.maxCacheSize:Vl(t)&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t){const e=this.cache;let n;return null!=e&&e.length>0?(n=e.pop(),n):(n=Cu.$view(this,t),n)}}uu.maxCacheSize=65535;const du=new WeakSet;function pu(t){return!du.has(t)}function fu(t){return du.add(t),Rh.create(t)}const gu=Rl("views"),vu=Object.freeze({name:gu,has:t=>Fl(t)&&(Al(gu,t)||"$views"in t),get(t){if(Fl(t)&&"$views"in t){const e=t.$views.filter(pu).map(fu);for(const n of e)vu.add(t,n)}let e=Cl(gu,t);return void 0===e&&El(gu,e=[],t),e},add(t,e){const n=Rh.create(e);let i=Cl(gu,t);return void 0===i?El(gu,i=[n],t):i.push(n),i}}),mu=gn.createInterface("IViewLocator",(t=>t.singleton(bu)));class bu{constructor(){this.et=new WeakMap,this.st=new Map}getViewComponentForObject(t,e){if(t){const n=vu.has(t.constructor)?vu.get(t.constructor):[],i=Fl(e)?e(t,n):this.nt(n,e);return this.rt(t,n,i)}return null}rt(t,e,n){let i,s=this.et.get(t);if(void 0===s?(s={},this.et.set(t,s)):i=s[n],void 0===i){const r=this.ot(t,e,n);i=Dh.define(Dh.getDefinition(r),class extends r{constructor(){super(t)}}),s[n]=i}return i}ot(t,e,n){let i,s=this.st.get(t.constructor);if(void 0===s?(s={},this.st.set(t.constructor,s)):i=s[n],void 0===i){i=Dh.define(this.lt(e,n),class{constructor(t){this.viewModel=t}define(t,e,n){const i=this.viewModel;if(t.scope=Di.fromParent(t.scope,i),void 0!==i.define)return i.define(t,e,n)}});const r=i.prototype;"hydrating"in t&&(r.hydrating=function(t){this.viewModel.hydrating(t)}),"hydrated"in t&&(r.hydrated=function(t){this.viewModel.hydrated(t)}),"created"in t&&(r.created=function(t){this.viewModel.created(t)}),"binding"in t&&(r.binding=function(t,e,n){return this.viewModel.binding(t,e,n)}),"bound"in t&&(r.bound=function(t,e,n){return this.viewModel.bound(t,e,n)}),"attaching"in t&&(r.attaching=function(t,e,n){return this.viewModel.attaching(t,e,n)}),"attached"in t&&(r.attached=function(t,e){return this.viewModel.attached(t,e)}),"detaching"in t&&(r.detaching=function(t,e,n){return this.viewModel.detaching(t,e,n)}),"unbinding"in t&&(r.unbinding=function(t,e,n){return this.viewModel.unbinding(t,e,n)}),"dispose"in t&&(r.dispose=function(){this.viewModel.dispose()}),s[n]=i}return i}nt(t,e){return e||(1===t.length?t[0].name:"default-view")}lt(t,e){const n=t.find((t=>t.name===e));if(void 0===n)throw new Error(`Could not find view: ${e}`);return n}}const wu=gn.createInterface("IRendering",(t=>t.singleton(yu)));class yu{constructor(t){this.ht=new WeakMap,this.ct=new WeakMap,this.ut=(this.ft=t.root).get(Sc),this.dt=new dd(this.ut,this.ut.document.createDocumentFragment())}get renderers(){return null==this.rs?this.rs=this.ft.getAll(Gd,!1).reduce(((t,e)=>(t[e.target]=e,t)),Ml()):this.rs}compile(t,e,n){if(!1!==t.needsCompile){const i=this.ht,s=e.get(_d);let r=i.get(t);return null==r?i.set(t,r=s.compile(t,e,n)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new uu(e,Rh.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new dd(this.ut,t.template);let e;const n=this.ct;if(n.has(t))e=n.get(t);else{const i=this.ut,s=i.document,r=t.template;let o;null===r?e=null:r instanceof i.Node?"TEMPLATE"===r.nodeName?e=s.adoptNode(r.content):(e=s.adoptNode(s.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=s.createElement("template"),Vl(r)&&(o.innerHTML=r),s.adoptNode(e=o.content)),n.set(t,e)}return null==e?this.dt:new dd(this.ut,e.cloneNode(!0))}render(t,e,n,i){const s=n.instructions,r=this.renderers,o=e.length;if(e.length!==s.length)throw new Error(`AUR0757:${o}<>${s.length}`);let a,l,c,h=0,u=0,d=0;if(o>0)for(;o>h;){for(a=s[h],c=e[h],u=0,d=a.length;d>u;)l=a[u],r[l.type].render(t,c,l),++u;++h}if(null!=i&&(a=n.surrogates,(d=a.length)>0))for(u=0;d>u;)l=a[u],r[l.type].render(t,i,l),++u}}var xu;yu.inject=[bn],function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(xu||(xu={}));const ku={optional:!0},Su=new WeakMap;class Cu{constructor(t,e,n,i,s,r,o){switch(this.container=t,this.vmKind=e,this.definition=n,this.viewFactory=i,this.viewModel=s,this.host=r,this.id=qe("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.vt=!1,this.gt=Gn,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.wt=0,this.bt=0,this.xt=0,this.location=o,this.r=t.root.get(wu),e){case 1:case 0:this.hooks=new Ru(s);break;case 2:this.hooks=Ru.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var t;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(t=this.parent.definition)||void 0===t?void 0:t.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(t){return Su.get(t)}static getCachedOrThrow(t){const e=Cu.getCached(t);if(void 0===e)throw new Error(`AUR0500:${t}`);return e}static $el(t,e,n,i,s,r=null){if(Su.has(e))return Su.get(e);s=null!=s?s:Dh.getDefinition(e.constructor);const o=new Cu(t,0,s,null,e,n,r),a=t.get(En(ju));return s.dependencies.length>0&&t.register(...s.dependencies),t.registerResolver(ju,new Kn("IHydrationContext",new Bu(o,i,a))),Su.set(e,o),null!=i&&!1===i.hydrate||o.hE(i,a),o}static $attr(t,e,n,i){if(Su.has(e))return Su.get(e);i=null!=i?i:Sh.getDefinition(e.constructor);const s=new Cu(t,1,i,null,e,n,null);return i.dependencies.length>0&&t.register(...i.dependencies),Su.set(e,s),s.yt(),s}static $view(t,e){const n=new Cu(t.container,2,null,t,null,null,null);return n.parent=null!=e?e:null,n.kt(),n}hE(t,e){const n=this.container,i=(this.flags,this.viewModel);let s=this.definition;if(this.scope=Di.create(i,null,!0),s.watches.length>0&&Iu(this,n,s,i),Eu(this,s,0,i),this.gt=function(t,e,n){const i=e.childrenObservers,s=Object.getOwnPropertyNames(i),r=s.length;if(r>0){const e=Au(n),o=[];let a,l,c=0;for(;c<r;++c)a=s[c],null==e[a]&&(l=i[a],o[o.length]=e[a]=new dh(t,n,a,l.callback,l.query,l.filter,l.map,l.options));return o}return Gn}(this,s,i),this.hooks.hasDefine){const t=i.define(this,e,s);void 0!==t&&t!==s&&(s=Rh.getOrCreate(t))}this.lifecycleHooks=lu.resolve(n),s.register(n),null!==s.injectable&&n.registerResolver(s.injectable,new Kn("definition.injectable",i)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){void 0!==this.lifecycleHooks.hydrating&&this.lifecycleHooks.hydrating.forEach(Vu,this),this.hooks.hasHydrating&&this.viewModel.hydrating(this);const e=this.Ct=this.r.compile(this.definition,this.container,t),{shadowOptions:n,isStrictBinding:i,hasSlots:s}=e,r=this.location;if(this.isStrictBinding=i,null!==(this.hostController=Dh.for(this.host,ku))&&(this.host=this.container.root.get(Sc).document.createElement(this.definition.name)),id(this.host,Dh.name,this),id(this.host,this.definition.key,this),null!==n||s){if(null!=r)throw new Error("AUR0501");id(this.shadowRoot=this.host.attachShadow(null!=n?n:Ou),Dh.name,this),id(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=r?(id(r,Dh.name,this),id(r,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.lifecycleHooks.hydrated&&this.lifecycleHooks.hydrated.forEach(Du,this),this.hooks.hasHydrated&&this.viewModel.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Ct,this.host),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(Fu,this),this.hooks.hasCreated&&this.viewModel.created(this)}yt(){const t=this.definition,e=this.viewModel;t.watches.length>0&&Iu(this,this.container,t,e),Eu(this,t,this.flags,e),e.$controller=this,this.lifecycleHooks=lu.resolve(this.container),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(Fu,this),this.hooks.hasCreated&&this.viewModel.created(this)}kt(){this.Ct=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Ct.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Ct)).findTargets(),this.Ct,void 0)}activate(t,e,n,i){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`AUR0502:${this.name}`);default:throw new Error(`AUR0503:${this.name} ${Mu(this.state)}`)}switch(this.parent=e,n|=2,this.vmKind){case 0:this.scope.parentScope=null!=i?i:null;break;case 1:this.scope=null!=i?i:null;break;case 2:if(null==i)throw new Error("AUR0504");this.hasLockedScope||(this.scope=i)}let s;return this.isStrictBinding&&(n|=1),this.$initiator=t,this.$flags=n,this.At(),2!==this.vmKind&&null!=this.lifecycleHooks.binding&&(s=Ye(...this.lifecycleHooks.binding.map(zu,this))),this.hooks.hasBinding&&(s=Ye(s,this.viewModel.binding(this.$initiator,this.parent,this.$flags))),s instanceof Promise?(this.Rt(),s.then((()=>{this.bind()})).catch((t=>{this.St(t)})),this.$promise):(this.bind(),this.$promise)}bind(){let t,e=0,n=this.gt.length;if(n>0)for(;n>e;)this.gt[e].start(),++e;if(null!==this.bindings)for(e=0,n=this.bindings.length;n>e;)this.bindings[e].$bind(this.$flags,this.scope),++e;if(2!==this.vmKind&&null!=this.lifecycleHooks.bound&&(t=Ye(...this.lifecycleHooks.bound.map(qu,this))),this.hooks.hasBound&&(t=Ye(t,this.viewModel.bound(this.$initiator,this.parent,this.$flags))),t instanceof Promise)return this.Rt(),void t.then((()=>{this.isBound=!0,this.Et()})).catch((t=>{this.St(t)}));this.isBound=!0,this.Et()}Bt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Et(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Bt(this.host);break;case 3:this.hostController.Bt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(Wh,!1)?t.get(Wh):t.get(Qh)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.lifecycleHooks.attaching&&(t=Ye(...this.lifecycleHooks.attaching.map(Zu,this))),this.hooks.hasAttaching&&(t=Ye(t,this.viewModel.attaching(this.$initiator,this.parent,this.$flags))),t instanceof Promise&&(this.Rt(),this.At(),t.then((()=>{this.It()})).catch((t=>{this.St(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.It()}deactivate(t,e,n){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`AUR0505:${this.name} ${Mu(this.state)}`)}this.$initiator=t,this.$flags=n,t===this&&this.Tt();let i,s=0;if(this.gt.length)for(;s<this.gt.length;++s)this.gt[s].stop();if(null!==this.children)for(s=0;s<this.children.length;++s)this.children[s].deactivate(t,this,n);if(2!==this.vmKind&&null!=this.lifecycleHooks.detaching&&(i=Ye(...this.lifecycleHooks.detaching.map(Ku,this))),this.hooks.hasDetaching&&(i=Ye(i,this.viewModel.detaching(this.$initiator,this.parent,this.$flags))),i instanceof Promise&&(this.Rt(),t.Tt(),i.then((()=>{t.Dt()})).catch((e=>{t.St(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Dt(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=4|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].$unbind(t);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}16==(16&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.Pt()}Rt(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Rt())}Pt(){void 0!==this.$promise&&(Qu=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,Qu(),Qu=void 0)}St(t){void 0!==this.$promise&&(_u=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,_u(t),_u=void 0),this.$initiator!==this&&this.parent.St(t)}At(){++this.wt,this.$initiator!==this&&this.parent.At()}It(){if(0==--this.wt){if(2!==this.vmKind&&null!=this.lifecycleHooks.attached&&(Gu=Ye(...this.lifecycleHooks.attached.map(Hu,this))),this.hooks.hasAttached&&(Gu=Ye(Gu,this.viewModel.attached(this.$initiator,this.$flags))),Gu instanceof Promise)return this.Rt(),Gu.then((()=>{this.state=2,this.Pt(),this.$initiator!==this&&this.parent.It()})).catch((t=>{this.St(t)})),void(Gu=void 0);Gu=void 0,this.state=2,this.Pt()}this.$initiator!==this&&this.parent.It()}Tt(){++this.bt}Dt(){if(0==--this.bt){this.$t(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),2!==e.vmKind&&null!=e.lifecycleHooks.unbinding&&(t=Ye(...e.lifecycleHooks.unbinding.map(Wu,this))),e.hooks.hasUnbinding&&(e.debug&&e.logger.trace("unbinding()"),t=Ye(t,e.viewModel.unbinding(e.$initiator,e.parent,e.$flags))),t instanceof Promise&&(this.Rt(),this.$t(),t.then((()=>{this.Ot()})).catch((t=>{this.St(t)}))),t=void 0,e=e.next;this.Ot()}}$t(){++this.xt}Ot(){if(0==--this.xt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return Sh.getDefinition(this.viewModel.constructor).name===t;case 0:return Dh.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(id(t,Dh.name,this),id(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(id(t,Dh.name,this),id(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(id(t,Dh.name,this),id(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(Nu),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(Su.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}}function Au(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function Eu(t,e,n,i){const s=e.bindables,r=Object.getOwnPropertyNames(s),o=r.length;if(o>0){let e,n,a=0;const l=Au(i),c=t.container,h=c.has(Us,!0)?c.get(Us):null;for(;a<o;++a)e=r[a],void 0===l[e]&&(n=s[e],l[e]=new _l(i,e,n.callback,n.set,t,h))}}const Tu=new Map,$u=t=>{let e=Tu.get(t);return null==e&&(e=new ds(t,0),Tu.set(t,e)),e};function Iu(t,e,n,i){const s=e.get(Ga),r=e.get(so),o=n.watches,a=0===t.vmKind?t.scope:Di.create(i,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if(({expression:c,callback:h}=o[d]),h=Fl(h)?h:Reflect.get(i,h),!Fl(h))throw new Error(`AUR0506:${String(h)}`);Fl(c)?t.addBinding(new eu(i,s,c,h,!0)):(u=Vl(c)?r.parse(c,8):$u(c),t.addBinding(new nu(a,e,s,u,h)))}}class Ru{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}Ru.none=new Ru({});const Ou={mode:"open"};var Pu,Lu;function Mu(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(Pu||(Pu={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(Lu||(Lu={}));const Uu=gn.createInterface("IController"),ju=gn.createInterface("IHydrationContext");class Bu{constructor(t,e,n){this.instruction=e,this.parent=n,this.controller=t}}function Nu(t){t.dispose()}function Fu(t){t.instance.created(this.viewModel,this)}function Vu(t){t.instance.hydrating(this.viewModel,this)}function Du(t){t.instance.hydrated(this.viewModel,this)}function zu(t){return t.instance.binding(this.viewModel,this.$initiator,this.parent,this.$flags)}function qu(t){return t.instance.bound(this.viewModel,this.$initiator,this.parent,this.$flags)}function Zu(t){return t.instance.attaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Hu(t){return t.instance.attached(this.viewModel,this.$initiator,this.$flags)}function Ku(t){return t.instance.detaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Wu(t){return t.instance.unbinding(this.viewModel,this.$initiator,this.parent,this.$flags)}let Qu,_u,Gu;const Xu=gn.createInterface("IAppRoot"),Yu=gn.createInterface("IWorkTracker",(t=>t.singleton(Ju)));class Ju{constructor(t){this.Lt=0,this.qt=null,this.Pt=null,this.Ut=t.scopeTo("WorkTracker")}start(){this.Ut.trace(`start(stack:${this.Lt})`),++this.Lt}finish(){if(this.Ut.trace(`finish(stack:${this.Lt})`),0==--this.Lt){const t=this.Pt;null!==t&&(this.Pt=this.qt=null,t())}}wait(){if(this.Ut.trace(`wait(stack:${this.Lt})`),null===this.qt){if(0===this.Lt)return Promise.resolve();this.qt=new Promise((t=>{this.Pt=t}))}return this.qt}}Ju.inject=[ai];class td{constructor(t,e,n,i){this.config=t,this.platform=e,this.container=n,this.controller=void 0,this._t=void 0,this.host=t.host,this.work=n.get(Yu),i.prepare(this),n.registerResolver(e.HTMLElement,n.registerResolver(e.Element,n.registerResolver(sd,new Kn("ElementResolver",t.host)))),this._t=Xe(this.Ft("beforeCreate"),(()=>{const e=t.component,i=n.createChild();let s;s=Dh.isType(e)?this.container.get(e):t.component;const r={hydrate:!1,projections:null},o=this.controller=Cu.$el(i,s,this.host,r);return o.hE(r,null),Xe(this.Ft("hydrating"),(()=>(o.hS(null),Xe(this.Ft("hydrated"),(()=>{o.hC(),this._t=void 0})))))}))}activate(){return Xe(this._t,(()=>Xe(this.Ft("beforeActivate"),(()=>Xe(this.controller.activate(this.controller,null,2,void 0),(()=>this.Ft("afterActivate")))))))}deactivate(){return Xe(this.Ft("beforeDeactivate"),(()=>Xe(this.controller.deactivate(this.controller,null,0),(()=>this.Ft("afterDeactivate")))))}Ft(t){return Ye(...this.container.getAll(ih).reduce(((e,n)=>(n.slot===t&&e.push(n.run()),e)),[]))}dispose(){var t;null===(t=this.controller)||void 0===t||t.dispose()}}class ed{}function nd(t,e){var n,i;return null!==(i=null===(n=t.$au)||void 0===n?void 0:n[e])&&void 0!==i?i:null}function id(t,e,n){var i,s;(null!==(i=(s=t).$au)&&void 0!==i?i:s.$au=new ed)[e]=n}const sd=gn.createInterface("INode"),rd=gn.createInterface("IEventTarget",(t=>t.cachedCallback((t=>t.has(Xu,!0)?t.get(Xu).host:t.get(Sc).document)))),od=gn.createInterface("IRenderLocation");var ad;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(ad||(ad={}));const ld=new WeakMap;function cd(t){if(ld.has(t))return ld.get(t);let e=0,n=t.nextSibling;for(;null!==n;){if(8===n.nodeType)switch(n.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return n}n=n.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Dh.for(t);if(void 0===e)return null;if(2===e.mountTarget)return cd(e.host)}return t.parentNode}function hd(t){if(ud(t))return t;const e=t.ownerDocument.createComment("au-end"),n=t.ownerDocument.createComment("au-start");return null!==t.parentNode&&(t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(n,e)),e.$start=n,e}function ud(t){return"au-end"===t.textContent}class dd{constructor(t,e){this.platform=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const n=e.querySelectorAll(".au");let i,s=0,r=n.length,o=this.targets=Array(r);for(;r>s;)i=n[s],"AU-M"===i.nodeName?o[s]=hd(i):o[s]=i,++s;const a=e.childNodes,l=this.childNodes=Array(r=a.length);for(s=0;r>s;)l[s]=a[s],++s;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e,n=this.firstChild;const i=this.lastChild;for(;null!=n&&(e=n.nextSibling,t.appendChild(n),n!==i);)n=e}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let n,i=this.firstChild;for(;null!==i&&(n=i.nextSibling,t.appendChild(i),i!==e);)i=n}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,ud(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}const pd=gn.createInterface("IWindow",(t=>t.callback((t=>t.get(Sc).window)))),fd=gn.createInterface("ILocation",(t=>t.callback((t=>t.get(pd).location)))),gd=gn.createInterface("IHistory",(t=>t.callback((t=>t.get(pd).history)))),vd={[Fs.capturing]:{capture:!0},[Fs.bubbling]:{capture:!1}};class md{constructor(t,e,n){this.prevent=t,this.strategy=e,this.expAsHandler=n}}class bd{constructor(t,e,n,i,s,r,o){this.platform=t,this.targetEvent=e,this.sourceExpression=n,this.target=i,this.eventDelegator=s,this.locator=r,this.Vt=o,this.interceptor=this,this.isBound=!1,this.handler=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;let n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);if(delete e.$event,this.Vt.expAsHandler){if(!Fl(n))throw new Error(`Handler of "${this.targetEvent}" event is not a function.`);n=n(t)}return!0!==n&&this.Vt.prevent&&t.preventDefault(),n}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.Vt.strategy===Fs.none?this.target.addEventListener(this.targetEvent,this):this.handler=this.eventDelegator.addEventListener(this.locator.get(rd),this.target,this.targetEvent,this,vd[this.Vt.strategy]),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.Vt.strategy===Fs.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const wd={capture:!1};class yd{constructor(t,e,n=wd){this.Mt=t,this.jt=e,this.Vt=n,this.Nt=0,this.Wt=new Map,this.Ht=new Map}zt(){1==++this.Nt&&this.Mt.addEventListener(this.jt,this,this.Vt)}Gt(){0==--this.Nt&&this.Mt.removeEventListener(this.jt,this,this.Vt)}dispose(){this.Nt>0&&(this.Nt=0,this.Mt.removeEventListener(this.jt,this,this.Vt)),this.Wt.clear(),this.Ht.clear()}Xt(t){const e=!0===this.Vt.capture?this.Wt:this.Ht;let n=e.get(t);return void 0===n&&e.set(t,n=Ml()),n}handleEvent(t){const e=!0===this.Vt.capture?this.Wt:this.Ht,n=t.composedPath();!0===this.Vt.capture&&n.reverse();for(const i of n){const n=e.get(i);if(void 0===n)continue;const s=n[this.jt];if(void 0!==s&&(Fl(s)?s(t):s.handleEvent(t),!0===t.cancelBubble))return}}}class xd{constructor(t,e,n,i){this.Kt=t,this.Yt=e,this.jt=n,t.zt(),e[n]=i}dispose(){this.Kt.Gt(),this.Yt[this.jt]=void 0}}class kd{constructor(t){this.config=t,this.target=null,this.handler=null}subscribe(t,e){let n;for(n of(this.target=t,this.handler=e,this.config.events))t.addEventListener(n,e)}dispose(){const{target:t,handler:e}=this;let n;if(null!==t&&null!==e)for(n of this.config.events)t.removeEventListener(n,e);this.target=this.handler=null}}const Sd=gn.createInterface("IEventDelegator",(t=>t.singleton(Cd)));class Cd{constructor(){this.Zt=Ml()}addEventListener(t,e,n,i,s){var r,o;const a=null!==(r=(o=this.Zt)[n])&&void 0!==r?r:o[n]=new Map;let l=a.get(t);return void 0===l&&a.set(t,l=new yd(t,n,s)),new xd(l,l.Xt(e),n,i)}dispose(){for(const t in this.Zt){const e=this.Zt[t];for(const t of e.values())t.dispose();e.clear()}}}gn.createInterface("IProjections");const Ad=gn.createInterface("IAuSlotsInfo");class Ed{constructor(t){this.projectedSlots=t}}var Td;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}(Td||(Td={}));const $d=gn.createInterface("Instruction");function Id(t){const e=t.type;return Vl(e)&&2===e.length}class Rd{constructor(t,e){this.from=t,this.to=e}get type(){return"rf"}}class Od{constructor(t,e,n){this.from=t,this.to=e,this.mode=n}get type(){return"rg"}}class Pd{constructor(t,e){this.from=t,this.to=e}get type(){return"rk"}}class Ld{constructor(t,e){this.from=t,this.to=e}get type(){return"rh"}}class Md{constructor(t,e){this.from=t,this.to=e}get type(){return"rj"}}class Ud{constructor(t,e){this.value=t,this.to=e}get type(){return"re"}}class jd{constructor(t,e,n,i,s,r){this.res=t,this.alias=e,this.props=n,this.projections=i,this.containerless=s,this.captures=r,this.auSlot=null}get type(){return"ra"}}class Bd{constructor(t,e,n){this.res=t,this.alias=e,this.props=n}get type(){return"rb"}}class Nd{constructor(t,e,n,i){this.def=t,this.res=e,this.alias=n,this.props=i}get type(){return"rc"}}class Fd{constructor(t,e){this.instructions=t,this.toBindingContext=e}get type(){return"rd"}}class Vd{constructor(t,e){this.from=t,this.to=e}get type(){return"ri"}}class Dd{constructor(t,e){this.from=t,this.strict=e}get type(){return"ha"}}class zd{constructor(t,e,n,i){this.from=t,this.to=e,this.preventDefault=n,this.strategy=i}get type(){return"hb"}}class qd{constructor(t,e){this.value=t,this.to=e}get type(){return"he"}}class Zd{constructor(t){this.value=t,this.type="hf"}}class Hd{constructor(t){this.value=t,this.type="hg"}}class Kd{constructor(t,e,n){this.attr=t,this.from=e,this.to=n}get type(){return"hc"}}class Wd{get type(){return"hs"}}class Qd{constructor(t){this.instructions=t}get type(){return"hp"}}const _d=gn.createInterface("ITemplateCompiler"),Gd=gn.createInterface("IRenderer");function Xd(t){return function(e){return e.register=function(t){Hn.singleton(Gd,this).register(t)},Dl(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function Yd(t,e,n){return Vl(e)?t.parse(e,n):e}function Jd(t){return null!=t.viewModel?t.viewModel:t}let tp=class{render(t,e,n){const i=Jd(e);void 0!==i.$observers&&void 0!==i.$observers[n.to]?i.$observers[n.to].setValue(n.value,2):i[n.to]=n.value}};tp=kl([Xd("re")],tp);let ep=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[wu,Sc]}render(t,e,n){let i,s,r,o;const a=n.res,l=n.projections,c=t.container;if("string"==typeof a){if(i=c.find(Dh,a),null==i)throw new Error(`AUR0752:${a}@${t.name}`)}else i=a;const h=n.containerless||i.containerless?hd(e):null,u=function(t,e,n,i,s,r){const o=e.container.createChild();return o.registerResolver(t.HTMLElement,o.registerResolver(t.Element,o.registerResolver(sd,new Kn("ElementResolver",n)))),o.registerResolver(Uu,new Kn(Ap,e)),o.registerResolver($d,new Kn(Ep,i)),o.registerResolver(od,null==s?Op:new Rp(s)),o.registerResolver(hu,Pp),o.registerResolver(Ad,null==r?Lp:new Kn(Tp,r)),o}(this.p,t,e,n,h,null==l?void 0:new Ed(Object.keys(l)));s=i.Type,r=u.invoke(s),u.registerResolver(s,new Kn(i.key,r)),o=Cu.$el(u,r,e,n,i,h),id(e,i.key,o);const d=this.r.renderers,p=n.props,f=p.length;let g,v=0;for(;f>v;)g=p[v],d[g.type].render(t,o,g),++v;t.addChild(o)}};ep=kl([Xd("ra")],ep);let np=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[wu,Sc]}render(t,e,n){let i,s=t.container;if("string"==typeof n.res){if(i=s.find(Sh,n.res),null==i)throw new Error(`AUR0753:${n.res}@${t.name}`)}else i=n.res;const r=Ip(this.p,i,t,e,n,void 0,void 0),o=Cu.$attr(r.ctn,r.vm,e,i);id(e,i.key,o);const a=this.r.renderers,l=n.props,c=l.length;let h,u=0;for(;c>u;)h=l[u],a[h.type].render(t,o,h),++u;t.addChild(o)}};np=kl([Xd("rb")],np);let ip=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[wu,Sc]}render(t,e,n){var i,s;let r,o=t.container;if("string"==typeof n.res){if(r=o.find(Sh,n.res),null==r)throw new Error(`AUR0754:${n.res}@${t.name}`)}else r=n.res;const a=this.r.getViewFactory(n.def,o),l=hd(e),c=Ip(this.p,r,t,e,n,a,l),h=Cu.$attr(c.ctn,c.vm,e,r);id(l,r.key,h),null===(s=(i=c.vm).link)||void 0===s||s.call(i,t,h,e,n);const u=this.r.renderers,d=n.props,p=d.length;let f,g=0;for(;p>g;)f=d[g],u[f.type].render(t,h,f),++g;t.addChild(h)}};ip=kl([Xd("rc")],ip);let sp=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){e.remove();const i=n.instructions,s=n.toBindingContext,r=t.container,o=i.length;let a,l,c,h=0;for(;o>h;)a=i[h],l=Yd(this.ep,a.from,8),c=new Qc(l,a.to,this.oL,r,s),t.addBinding(38962===l.$kind?dp(c,l,r):c),++h}};sp.inject=[so,Ga],sp=kl([Xd("rd")],sp);let rp=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=Yd(this.ep,n.from,12),s=new Ic(i,Jd(e),n.to,this.oL,t.container);t.addBinding(38962===i.$kind?dp(s,i,t.container):s)}};rp.inject=[so,Ga],rp=kl([Xd("rh")],rp);let op=class{constructor(t){this.ep=t}render(t,e,n){const i=Yd(this.ep,n.from,8),s=new nh(i,function(t,e){if("element"===e)return t;switch(e){case"controller":return Dh.for(t);case"view":throw new Error("AUR0750");case"view-model":return Dh.for(t).viewModel;default:{const n=Sh.for(t,e);if(void 0!==n)return n.viewModel;const i=Dh.for(t,{name:e});if(void 0===i)throw new Error(`AUR0751:${e}`);return i.viewModel}}}(e,n.to),t.container);t.addBinding(38962===i.$kind?dp(s,i,t.container):s)}};op.inject=[so],op=kl([Xd("rj")],op);let ap=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=Yd(this.ep,n.from,1),r=new Hc(this.oL,s,Jd(e),n.to,js.toView,i,this.p.domWriteQueue),o=r.partBindings,a=o.length;let l,c=0;for(;a>c;++c)l=o[c],38962===l.sourceExpression.$kind&&(o[c]=dp(l,l.sourceExpression,i));t.addBinding(r)}};ap.inject=[so,Ga,Sc],ap=kl([Xd("rf")],ap);let lp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Yd(this.ep,n.from,8),s=new th(i,Jd(e),n.to,n.mode,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?dp(s,i,t.container):s)}};lp.inject=[so,Ga,Sc],lp=kl([Xd("rg")],lp);let cp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Yd(this.ep,n.from,2),s=new th(i,Jd(e),n.to,js.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.iterable.$kind?dp(s,i.iterable,t.container):s)}};cp.inject=[so,Ga,Sc],cp=kl([Xd("rk")],cp);let hp=0;const up=[];function dp(t,e,n){for(;e instanceof as;)up[hp++]=e,e=e.expression;for(;hp>0;){const e=up[--hp],i=n.get(e.behaviorKey);i instanceof Qi&&(t=i.construct(t,e))}return up.length=0,t}let pp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=e.nextSibling,r=e.parentNode,o=this.p.document,a=Yd(this.ep,n.from,1),l=a.parts,c=a.expressions,h=c.length;let u,d,p=0,f=l[0];for(""!==f&&r.insertBefore(o.createTextNode(f),s);h>p;++p)d=c[p],u=new Wc(d,r.insertBefore(o.createTextNode(""),s),i,this.oL,this.p,n.strict),t.addBinding(38962===d.$kind?dp(u,d,i):u),f=l[p+1],""!==f&&r.insertBefore(o.createTextNode(f),s);"AU-M"===e.nodeName&&e.remove()}};pp.inject=[so,Ga,Sc],pp=kl([Xd("ha")],pp);const fp=gn.createInterface("IListenerBehaviorOptions",(t=>t.singleton(gp)));class gp{constructor(){this.expAsHandler=!1}}let vp=class{constructor(t,e,n,i){this.ep=t,this.Jt=e,this.p=n,this.Qt=i}render(t,e,n){const i=Yd(this.ep,n.from,4),s=new bd(this.p,n.to,i,e,this.Jt,t.container,new md(n.preventDefault,n.strategy,this.Qt.expAsHandler));t.addBinding(38962===i.$kind?dp(s,i,t.container):s)}};vp.inject=[so,Sd,Sc,fp],vp=kl([Xd("hb")],vp);let mp=class{render(t,e,n){e.setAttribute(n.to,n.value)}};mp=kl([Xd("he")],mp);let bp=class{render(t,e,n){!function(t,e){const n=e.length;let i=0;for(let s=0;s<n;++s)32===e.charCodeAt(s)?(s!==i&&t.add(e.slice(i,s)),i=s+1):s+1===n&&t.add(e.slice(i))}(e.classList,n.value)}};bp=kl([Xd("hf")],bp);let wp=class{render(t,e,n){e.style.cssText+=n.value}};wp=kl([Xd("hg")],wp);let yp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Yd(this.ep,n.from,8),s=new th(i,e.style,n.to,js.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?dp(s,i,t.container):s)}};yp.inject=[so,Ga,Sc],yp=kl([Xd("hd")],yp);let xp=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=Yd(this.ep,n.from,8),s=new zc(i,e,n.attr,n.to,js.toView,this.oL,t.container);t.addBinding(38962===i.$kind?dp(s,i,t.container):s)}};xp.inject=[so,Ga],xp=kl([Xd("hc")],xp);let kp=class{constructor(t,e){this.ti=t,this.r=e}static get inject(){return[_d,wu]}render(t,e,n){const i=t.container.get(ju),s=this.r.renderers,r=t=>{let e=t,n=i;for(;null!=n&&e>0;)n=n.parent,--e;if(null==n)throw new Error("No scope context for spread binding.");return n},o=n=>{var i,a;const l=r(n),c=Cp(l),h=this.ti.compileSpread(l.controller.definition,null!==(a=null===(i=l.instruction)||void 0===i?void 0:i.captures)&&void 0!==a?a:Gn,l.controller.container,e);let u;for(u of h)switch(u.type){case"hs":o(n+1);break;case"hp":s[u.instructions.type].render(c,Dh.for(e),u.instructions);break;default:s[u.type].render(c,e,u)}t.addBinding(c)};o(0)}};kp=kl([Xd("hs")],kp);class Sp{constructor(t,e){this.ii=t,this.ei=e,this.interceptor=this,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}$bind(t,e){var n;if(this.isBound)return;this.isBound=!0;const i=this.$scope=null!==(n=this.ei.controller.scope.parentScope)&&void 0!==n?n:void 0;if(null==i)throw new Error("Invalid spreading. Context scope is null/undefined");this.ii.forEach((e=>e.$bind(t,i)))}$unbind(t){this.ii.forEach((e=>e.$unbind(t))),this.isBound=!1}addBinding(t){this.ii.push(t)}addChild(t){if(1!==t.vmKind)throw new Error("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}}const Cp=t=>new Sp([],t),Ap="IController",Ep="IInstruction",Tp="IAuSlotsInfo";class $p{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw new Error("AUR7055");if(!Vl(t.name)||0===t.name.length)throw new Error("AUR0756");return t}}function Ip(t,e,n,i,s,r,o,a){const l=n.container.createChild();return l.registerResolver(t.HTMLElement,l.registerResolver(t.Element,l.registerResolver(sd,new Kn("ElementResolver",i)))),n=n instanceof Cu?n:n.ctrl,l.registerResolver(Uu,new Kn(Ap,n)),l.registerResolver($d,new Kn(Ep,s)),l.registerResolver(od,null==o?Op:new Kn("IRenderLocation",o)),l.registerResolver(hu,null==r?Pp:new $p(r)),l.registerResolver(Ad,null==a?Lp:new Kn(Tp,a)),{vm:l.invoke(e.Type),ctn:l}}class Rp{constructor(t){this.l=t}get name(){return"IRenderLocation"}get $isResolver(){return!0}resolve(){return this.l}}const Op=new Rp(null),Pp=new $p(null),Lp=new Kn(Tp,new Ed(Gn));var Mp;function Up(t){return function(e){return Vp.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(Mp||(Mp={}));class jp{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.type=s}static create(t,e){let n,i;return Vl(t)?(n=t,i={name:n}):(n=t.name,i=t),new jp(e,We(Fp(e,"name"),n),Ke(Fp(e,"aliases"),i.aliases,e.aliases),Np(n),We(Fp(e,"type"),i.type,e.type,null))}register(t){const{Type:e,key:n,aliases:i}=this;Hn.singleton(n,e).register(t),Hn.aliasTo(n,e).register(t),Fi(i,Vp,n,t)}}const Bp=Rl("binding-command"),Np=t=>`${Bp}:${t}`,Fp=(t,e)=>Cl(Il(e),t),Vp=Object.freeze({name:Bp,keyFrom:Np,define(t,e){const n=jp.create(t,e);return El(Bp,n,n.Type),El(Bp,n,n),Ol(e,Bp),n.Type},getAnnotation:Fp});let Dp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"one-time"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:Ne(n):(""===i&&1===t.def.type&&(i=Ne(n)),n=t.bindable.property),new Od(this.ep.parse(i,8),n,js.oneTime)}};Dp.inject=[Ec,so],Dp=kl([Up("one-time")],Dp);let zp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"to-view"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:Ne(n):(""===i&&1===t.def.type&&(i=Ne(n)),n=t.bindable.property),new Od(this.ep.parse(i,8),n,js.toView)}};zp.inject=[Ec,so],zp=kl([Up("to-view")],zp);let qp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"from-view"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:Ne(i):(""===s&&1===t.def.type&&(s=Ne(i)),i=t.bindable.property),new Od(this.ep.parse(s,8),i,js.fromView)}};qp.inject=[Ec,so],qp=kl([Up("from-view")],qp);let Zp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"two-way"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:Ne(i):(""===s&&1===t.def.type&&(s=Ne(i)),i=t.bindable.property),new Od(this.ep.parse(s,8),i,js.twoWay)}};Zp.inject=[Ec,so],Zp=kl([Up("two-way")],Zp);let Hp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"bind"}build(t){var e;const n=t.attr,i=t.bindable;let s,r,o=n.target,a=n.rawValue;return null==i?(r=this.m.isTwoWay(t.node,o)?js.twoWay:js.toView,o=null!==(e=this.m.map(t.node,o))&&void 0!==e?e:Ne(o)):(""===a&&1===t.def.type&&(a=Ne(o)),s=t.def.defaultBindingMode,r=i.mode===js.default||null==i.mode?null==s||s===js.default?js.toView:s:i.mode,o=i.property),new Od(this.ep.parse(a,8),o,r)}};Hp.inject=[Ec,so],Hp=kl([Up("bind")],Hp);let Kp=class{constructor(t){this.type=0,this.ep=t}get name(){return"call"}build(t){const e=null===t.bindable?Ne(t.attr.target):t.bindable.property;return new Ld(this.ep.parse(t.attr.rawValue,12),e)}};Kp.inject=[so],Kp=kl([Up("call")],Kp);let Wp=class{constructor(t){this.type=0,this.ep=t}get name(){return"for"}build(t){const e=null===t.bindable?Ne(t.attr.target):t.bindable.property;return new Pd(this.ep.parse(t.attr.rawValue,2),e)}};Wp.inject=[so],Wp=kl([Up("for")],Wp);let Qp=class{constructor(t){this.type=1,this.ep=t}get name(){return"trigger"}build(t){return new zd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!0,Fs.none)}};Qp.inject=[so],Qp=kl([Up("trigger")],Qp);let _p=class{constructor(t){this.type=1,this.ep=t}get name(){return"delegate"}build(t){return new zd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Fs.bubbling)}};_p.inject=[so],_p=kl([Up("delegate")],_p);let Gp=class{constructor(t){this.type=1,this.ep=t}get name(){return"capture"}build(t){return new zd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Fs.capturing)}};Gp.inject=[so],Gp=kl([Up("capture")],Gp);let Xp=class{constructor(t){this.type=1,this.ep=t}get name(){return"attr"}build(t){return new Kd(t.attr.target,this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Xp.inject=[so],Xp=kl([Up("attr")],Xp);let Yp=class{constructor(t){this.type=1,this.ep=t}get name(){return"style"}build(t){return new Kd("style",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Yp.inject=[so],Yp=kl([Up("style")],Yp);let Jp=class{constructor(t){this.type=1,this.ep=t}get name(){return"class"}build(t){return new Kd("class",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Jp.inject=[so],Jp=kl([Up("class")],Jp);let tf=class{constructor(t){this.type=1,this.ep=t}get name(){return"ref"}build(t){return new Md(this.ep.parse(t.attr.rawValue,8),t.attr.target)}};tf.inject=[so],tf=kl([Up("ref")],tf);let ef=class{constructor(){this.type=1}get name(){return"...$attrs"}build(t){return new Wd}};ef=kl([Up("...$attrs")],ef);const nf=gn.createInterface("ITemplateElementFactory",(t=>t.singleton(rf))),sf={};class rf{constructor(t){this.p=t,this.si=t.document.createElement("template")}createTemplate(t){var e;if(Vl(t)){let e=sf[t];if(void 0===e){const n=this.si;n.innerHTML=t;const i=n.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.si=this.p.document.createElement("template"),e=n):(n.content.removeChild(i),e=i),sf[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.p.document.createElement("template");return e.content.appendChild(t),e}return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.cloneNode(!0)}}rf.inject=[Sc];class of{constructor(t,e,n,i,s,r){this.hasSlot=!1,this.Ci=Ml();const o=null!==i;this.c=e,this.root=null===s?this:s,this.def=t,this.ci=n,this.parent=i,this.ni=o?i.ni:e.get(nf),this.di=o?i.di:e.get(hc),this.ep=o?i.ep:e.get(so),this.m=o?i.m:e.get(Ec),this.Ut=o?i.Ut:e.get(ai),this.p=o?i.p:e.get(Sc),this.localEls=o?i.localEls:new Set,this.rows=null!=r?r:[]}ki(t){var e,n;(null!==(e=(n=this.root).deps)&&void 0!==e?e:n.deps=[]).push(t),this.root.c.register(t)}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}hi(t){return this.c.find(Dh,t)}ui(t){return this.c.find(Sh,t)}xi(t){return new of(this.def,this.c,this.ci,this,this.root,t)}ai(t){if(this.root!==this)return this.root.ai(t);const e=t.command;if(null===e)return null;let n=this.Ci[e];if(void 0===n){if(n=this.c.create(Vp,e),null===n)throw new Error(`AUR0713:${e}`);this.Ci[e]=n}return n}}function af(t){const e=t.length;let n=0,i=0;for(;e>i;){if(n=t.charCodeAt(i),92===n)++i;else{if(58===n)return!0;if(36===n&&123===t.charCodeAt(i+1))return!1}++i}return!1}function lf(){uf.node=uf.attr=uf.bindable=uf.def=null}const cf={projections:null},hf={name:"unnamed"},uf={node:null,attr:null,bindable:null,def:null},df=Object.assign(Ml(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),pf={checkbox:1,radio:1},ff=new WeakMap;class gf{constructor(t,e,n){this.attrs=t,this.bindables=e,this.primary=n}static from(t,e){let n=ff.get(t);if(null==n){const i=t.bindables,s=Ml(),r=e?void 0===t.defaultBindingMode?js.default:t.defaultBindingMode:js.default;let o,a,l,c,h=!1;for(a in i){if(o=i[a],c=o.attribute,!0===o.primary){if(h)throw new Error(`AUR0714:${t.name}`);h=!0,l=o}else h||null!=l||(l=o);s[c]=Wl.create(a,t.Type,o)}null==o&&e&&(l=s.value=Wl.create("value",t.Type,{mode:r})),ff.set(t,n=new gf(s,i,l))}return n}}var vf;!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(vf||(vf={}));const mf=Object.freeze(["property","attribute","mode"]),bf="as-custom-element";function wf(t,e){const n=t.getAttribute(bf);if(null===n||""===n)throw new Error("AUR0715");if(e.has(n))throw new Error(`AUR0716:${n}`);return e.add(n),t.removeAttribute(bf),n}function yf(t){switch(t.getAttribute("mode")){case"oneTime":return js.oneTime;case"toView":return js.toView;case"fromView":return js.fromView;case"twoWay":return js.twoWay;default:return js.default}}const xf=gn.createInterface("ITemplateCompilerHooks"),kf=new WeakMap,Sf=Rl("compiler-hooks");Object.freeze({name:Sf,define(t){let e=kf.get(t);return void 0===e&&(kf.set(t,e=new Cf(t)),El(Sf,e,t),Ol(t,Sf)),t}});class Cf{constructor(t){this.Type=t}get name(){return""}register(t){t.register(Hn.singleton(xf,this.Type))}}const Af=Dh.generateName,Ef="default",Tf="au-slot";class $f{constructor(t){this.mode=t,this.Ai=new Map}bind(t,e,n){this.Ai.set(n,n.mode),n.mode=this.mode}unbind(t,e,n){n.mode=this.Ai.get(n),this.Ai.delete(n)}}class If extends $f{constructor(){super(js.oneTime)}}class Rf extends $f{constructor(){super(js.toView)}}class Of extends $f{constructor(){super(js.fromView)}}class Pf extends $f{constructor(){super(js.twoWay)}}Ki("oneTime")(If),Ki("toView")(Rf),Ki("fromView")(Of),Ki("twoWay")(Pf);class Lf extends _i{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(Jn).taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(t,e,n)}updateSource(t,e){this.queueTask((()=>this.binding.updateSource(t,e)))}queueTask(t){const e=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,t())),this.opts),null==e||e.cancel()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.binding.$unbind(t)}}Ki("debounce")(Lf);class Mf{constructor(t){this.Yt=new Map,this.Ri=t}bind(t,e,n,...i){if(!("handleChange"in n))throw new Error("AUR0817");if(0===i.length)throw new Error("AUR0818");let s;for(s of(this.Yt.set(n,i),i))this.Ri.addSignalListener(s,n)}unbind(t,e,n){const i=this.Yt.get(n);let s;for(s of(this.Yt.delete(n),i))this.Ri.removeSignalListener(s,n)}}Mf.inject=[qi],Ki("signal")(Mf);class Uf extends _i{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.p=t.locator.get(Jn),this.Si=this.p.taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.Ei((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.p.performanceNow()),this.binding.handleChange(t,e,n)}updateSource(t,e){this.Ei((()=>this.binding.updateSource(t,e)))}Ei(t){const e=this.opts,n=this.p,i=this.lastCall+e.delay-n.performanceNow();if(i>0){const s=this.task;e.delay=i,this.task=this.Si.queueTask((()=>{this.lastCall=n.performanceNow(),this.task=null,e.delay=this.delay,t()}),e),null==s||s.cancel()}else this.lastCall=n.performanceNow(),t()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=this.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,super.$unbind(t)}}Ki("throttle")(Uf);const jf=new class{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,n,i){null==t?n.removeAttribute(i):n.setAttribute(i,t)}};class Bf{bind(t,e,n){n.targetObserver=jf}unbind(t,e,n){}}function Nf(t){const e=t.composedPath()[0];if(this.target===e)return this.selfEventCallSource(t)}Ki("attr")(Bf);class Ff{bind(t,e,n){if(!n.callSource||!n.targetEvent)throw new Error("AUR0801");n.selfEventCallSource=n.callSource,n.callSource=Nf}unbind(t,e,n){n.callSource=n.selfEventCallSource,n.selfEventCallSource=null}}Ki("self")(Ff);const Vf=Ml();class Df{constructor(t){this.ns=t,this.type=6}static forNs(t){var e;return null!==(e=Vf[t])&&void 0!==e?e:Vf[t]=new Df(t)}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,n,i){null==t?n.removeAttributeNS(this.ns,i):n.setAttributeNS(this.ns,i,t)}}function zf(t,e){return t===e}class qf{constructor(t,e,n,i){this.handler=n,this.type=7,this.v=void 0,this.ov=void 0,this.Bi=void 0,this.Ii=void 0,this.f=0,this.o=t,this.oL=i}getValue(){return this.v}setValue(t,e){const n=this.v;t!==n&&(this.v=t,this.ov=n,this.f=e,this.Ti(),this.Di(),this.queue.add(this))}handleCollectionChange(t,e){this.Di()}handleChange(t,e,n){this.Di()}Di(){const t=this.v,e=this.o,n=Ul.call(e,"model")?e.model:e.value,i="radio"===e.type,s=void 0!==e.matcher?e.matcher:zf;if(i)e.checked=!!s(t,n);else if(!0===t)e.checked=!0;else{let i=!1;if(t instanceof Array)i=-1!==t.findIndex((t=>!!s(t,n)));else if(t instanceof Set){for(const e of t)if(s(e,n)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(s(t,n)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.o,n=Ul.call(e,"model")?e.model:e.value,i=e.checked,s=void 0!==e.matcher?e.matcher:zf;if("checkbox"===e.type){if(t instanceof Array){const e=t.findIndex((t=>!!s(t,n)));return void(i&&-1===e?t.push(n):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===s(e,n)){r=e;break}return void(i&&r===e?t.add(n):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===s(t,n)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=n}this.v=t,this.queue.add(this)}start(){this.handler.subscribe(this.o,this),this.Ti()}stop(){var t,e;this.handler.dispose(),null===(t=this.Bi)||void 0===t||t.unsubscribe(this),this.Bi=void 0,null===(e=this.Ii)||void 0===e||e.unsubscribe(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.start()}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.stop()}flush(){Zf=this.ov,this.ov=this.v,this.subs.notify(this.v,Zf,this.f)}Ti(){var t,e,n,i,s,r,o;const a=this.o;null===(s=null!==(t=this.Ii)&&void 0!==t?t:this.Ii=null!==(n=null===(e=a.$observers)||void 0===e?void 0:e.model)&&void 0!==n?n:null===(i=a.$observers)||void 0===i?void 0:i.value)||void 0===s||s.subscribe(this),null===(r=this.Bi)||void 0===r||r.unsubscribe(this),this.Bi=void 0,"checkbox"===a.type&&(null===(o=this.Bi=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))||void 0===o||o.subscribe(this))}}let Zf;qs(qf),_s(qf);const Hf={childList:!0,subtree:!0,characterData:!0};function Kf(t,e){return t===e}class Wf{constructor(t,e,n,i){this.type=7,this.v=void 0,this.ov=void 0,this.H=!1,this.Pi=void 0,this.$i=void 0,this.iO=!1,this.o=t,this.oL=i,this.handler=n}getValue(){return this.iO?this.v:this.o.multiple?function(t){const e=[];if(0===t.length)return e;const n=t.length;let i,s=0;for(;n>s;)i=t[s],i.selected&&(e[e.length]=Ul.call(i,"model")?i.model:i.value),++s;return e}(this.o.options):this.o.value}setValue(t,e){this.ov=this.v,this.v=t,this.H=t!==this.ov,this.Oi(t instanceof Array?t:null),0==(64&e)&&this.K()}K(){this.H&&(this.H=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var t;const e=this.v,n=this.o,i=Array.isArray(e),s=null!==(t=n.matcher)&&void 0!==t?t:Kf,r=n.options;let o=r.length;for(;o-- >0;){const t=r[o],n=Ul.call(t,"model")?t.model:t.value;t.selected=i?-1!==e.findIndex((t=>!!s(n,t))):!!s(n,e)}}syncValue(){const t=this.o,e=t.options,n=e.length,i=this.v;let s=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||Kf,a=[];for(;s<n;)r=e[s],r.selected&&a.push(Ul.call(r,"model")?r.model:r.value),++s;let l;for(s=0;s<i.length;)l=i[s],-1===a.findIndex((t=>!!o(l,t)))?i.splice(s,1):++s;for(s=0;s<a.length;)l=a[s],-1===i.findIndex((t=>!!o(l,t)))&&i.push(l),++s;return!1}let r,o=null;for(;s<n;){if(r=e[s],r.selected){o=Ul.call(r,"model")?r.model:r.value;break}++s}return this.ov=this.v,this.v=o,!0}Li(){(this.$i=new this.o.ownerDocument.defaultView.MutationObserver(this.qi.bind(this))).observe(this.o,Hf),this.Oi(this.v instanceof Array?this.v:null),this.iO=!0}Ui(){var t;this.$i.disconnect(),null===(t=this.Pi)||void 0===t||t.unsubscribe(this),this.$i=this.Pi=void 0,this.iO=!1}Oi(t){var e;if(null===(e=this.Pi)||void 0===e||e.unsubscribe(this),this.Pi=void 0,null!=t){if(!this.o.multiple)throw new Error("AUR0654");(this.Pi=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}qi(t){this.syncOptions(),this.syncValue()&&this.queue.add(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.Li())}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.handler.dispose(),this.Ui())}flush(){Qf=this.ov,this.ov=this.v,this.subs.notify(this.v,Qf,0)}}let Qf,_f;qs(Wf),_s(Wf);class Gf{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.styles={},this.version=0,this.H=!1}getValue(){return this.obj.style.cssText}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}_i(t){const e=[],n=/url\([^)]+$/;let i,s,r,o,a=0,l="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),l+=t.substring(a,i),a=i+1,n.test(l)?l+=";":(s=l.indexOf(":"),r=l.substring(0,s).trim(),o=l.substring(s+1).trim(),e.push([r,o]),l="");return e}Fi(t){let e,n;const i=[];for(n in t)if(e=t[n],null!=e)if(Vl(e)){if(n.startsWith("--")){i.push([n,e]);continue}i.push([Ve(n),e])}else i.push(...this.Vi(e));return i}Mi(t){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...this.Vi(t[i]));return n}return Gn}Vi(t){return Vl(t)?this._i(t):t instanceof Array?this.Mi(t):t instanceof Object?this.Fi(t):Gn}K(){if(this.H){this.H=!1;const t=this.value,e=this.styles,n=this.Vi(t);let i,s,r,o,a=this.version;this.ov=t;let l=0;const c=n.length;for(;l<c;++l)s=n[l],r=s[0],o=s[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Ul.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let n="";null!=e&&Fl(e.indexOf)&&e.includes("!important")&&(n="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,n)}bind(t){this.value=this.ov=this.obj.style.cssText}}class Xf{constructor(t,e,n){this.handler=n,this.type=7,this.v="",this.ov="",this.H=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.H=!0,this.handler.config.readonly||0!=(64&e)||this.K(e))}K(t){var e;this.H&&(this.H=!1,this.o[this.k]=null!==(e=this.v)&&void 0!==e?e:this.handler.config.default,0==(2&t)&&this.queue.add(this))}handleEvent(){this.ov=this.v,this.v=this.o[this.k],this.ov!==this.v&&(this.H=!1,this.queue.add(this))}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.v=this.ov=this.o[this.k])}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.handler.dispose()}flush(){_f=this.ov,this.ov=this.v,this.subs.notify(this.v,_f,0)}}qs(Xf),_s(Xf);const Yf="http://www.w3.org/1999/xlink",Jf="http://www.w3.org/XML/1998/namespace",tg="http://www.w3.org/2000/xmlns/",eg=Object.assign(Ml(),{"xlink:actuate":["actuate",Yf],"xlink:arcrole":["arcrole",Yf],"xlink:href":["href",Yf],"xlink:role":["role",Yf],"xlink:show":["show",Yf],"xlink:title":["title",Yf],"xlink:type":["type",Yf],"xml:lang":["lang",Jf],"xml:space":["space",Jf],xmlns:["xmlns",tg],"xmlns:xlink":["xlink",tg]}),ng=new Ha;ng.type=6;class ig{constructor(t){var e;this.type=null!==(e=t.type)&&void 0!==e?e:Xf,this.events=t.events,this.readonly=t.readonly,this.default=t.default}}class sg{constructor(t,e,n,i){this.locator=t,this.platform=e,this.dirtyChecker=n,this.svgAnalyzer=i,this.allowDirtyCheck=!0,this.ji=Ml(),this.Ni=Ml(),this.Wi=Ml(),this.Hi=Ml();const s=["change","input"],r={events:s,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:s,default:0},checked:{type:qf,events:s},files:{events:s,readonly:!0}},SELECT:{value:{type:Wf,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){Hn.aliasTo(Xa,sg).register(t),Hn.singleton(Xa,sg).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,n){var i,s;const r=this.ji;let o;if(Vl(t))o=null!==(i=r[t])&&void 0!==i?i:r[t]=Ml(),null==o[e]?o[e]=new ig(n):rg(t,e);else for(const n in t){o=null!==(s=r[n])&&void 0!==s?s:r[n]=Ml();const i=t[n];for(e in i)null==o[e]?o[e]=new ig(i[e]):rg(n,e)}}useConfigGlobal(t,e){const n=this.Ni;if("object"==typeof t)for(const e in t)null==n[e]?n[e]=new ig(t[e]):rg("*",e);else null==n[t]?n[t]=new ig(e):rg("*",t)}getAccessor(t,e,n){var i;if(e in this.Hi||e in(null!==(i=this.Wi[t.tagName])&&void 0!==i?i:Xn))return this.getObserver(t,e,n);switch(e){case"src":case"href":case"role":return jf;default:{const n=eg[e];return void 0!==n?Df.forNs(n[1]):Bl(t,e,this.svgAnalyzer)?jf:ng}}}overrideAccessor(t,e){var n,i,s,r;let o;if(Vl(t))o=null!==(n=(s=this.Wi)[t])&&void 0!==n?n:s[t]=Ml(),o[e]=!0;else for(const e in t)for(const n of t[e])o=null!==(i=(r=this.Wi)[e])&&void 0!==i?i:r[e]=Ml(),o[n]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Hi[e]=!0}getObserver(t,e,n){var i,s;switch(e){case"role":return jf;case"class":return new zh(t);case"css":case"style":return new Gf(t)}const r=null!==(s=null===(i=this.ji[t.tagName])||void 0===i?void 0:i[e])&&void 0!==s?s:this.Ni[e];if(null!=r)return new r.type(t,e,new kd(r),n,this.locator);const o=eg[e];if(void 0!==o)return Df.forNs(o[1]);if(Bl(t,e,this.svgAnalyzer))return jf;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw new Error(`AUR0652:${String(e)}`)}return new Wa(t,e)}}function rg(t,e){throw new Error(`AUR0653:${String(e)}@${t}`)}sg.inject=[wn,Sc,Fa,Cc];class og{constructor(t){this.oL=t}bind(t,e,n,...i){if(0===i.length)throw new Error("AUR0802");if(n.mode!==js.twoWay&&n.mode!==js.fromView)throw new Error("AUR0803");const s=this.oL.getObserver(n.target,n.targetProperty);if(!s.handler)throw new Error("AUR0804");n.targetObserver=s;const r=s.handler;s.originalHandler=r,s.handler=new kd(new ig({default:r.config.default,events:i,readonly:r.config.readonly}))}unbind(t,e,n){n.targetObserver.handler.dispose(),n.targetObserver.handler=n.targetObserver.originalHandler,n.targetObserver.originalHandler=null}}og.inject=[Ga],Ki("updateTrigger")(og);class ag{constructor(t,e){this.zi=t,this.p=e,this.Gi=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Xi():this.Gi=!0}attached(){this.Gi&&(this.Gi=!1,this.Xi()),this.zi.addEventListener("focus",this),this.zi.addEventListener("blur",this)}afterDetachChildren(){const t=this.zi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Ki||(this.value=!1)}Xi(){const t=this.zi,e=this.Ki,n=this.value;n&&!e?t.focus():!n&&e&&t.blur()}get Ki(){return this.zi===this.p.document.activeElement}}ag.inject=[sd,Sc],kl([ql({mode:js.twoWay})],ag.prototype,"value",void 0),mh("focus")(ag);let lg=class{constructor(t,e,n){this.el=t,this.p=e,this.Yi=!1,this.Zi=null,this.$val="",this.$prio="",this.update=()=>{this.Zi=null,Boolean(this.value)!==this.Ji&&(this.Ji===this.Qi?(this.Ji=!this.Qi,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Ji=this.Qi,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.Ji=this.Qi="hide"!==n.alias}binding(){this.Yi=!0,this.update()}detaching(){var t;this.Yi=!1,null===(t=this.Zi)||void 0===t||t.cancel(),this.Zi=null}valueChanged(){this.Yi&&null===this.Zi&&(this.Zi=this.p.domWriteQueue.queueTask(this.update))}};kl([ql],lg.prototype,"value",void 0),lg=kl([Sl(0,sd),Sl(1,Sc),Sl(2,$d)],lg),function(...t){return function(e){const n=ji("aliases"),i=Li(n,e);void 0===i?Ui(n,t,e):i.push(...t)}}("hide")(lg),mh("show")(lg);class cg{constructor(t,e,n){this.id=qe("au$component"),this.strict=!1,this.p=n,this.te=n.document.createElement("div"),this.view=t.create(),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)ld.set(t,e);else{const n=t.childNodes;for(let t=0,i=n.length;t<i;++t)ld.set(n[t],e)}}(this.view.nodes,e)}attaching(t,e,n){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const i=this.te=this.ie();return this.view.setHost(i),this.ee(t,i,n)}detaching(t,e,n){return this.se(t,this.te,n)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.te,n=this.te=this.ie();if(e===n)return;this.view.setHost(n);const i=Xe(this.se(null,n,t.flags),(()=>this.ee(null,n,t.flags)));i instanceof Promise&&i.catch((t=>{throw t}))}ee(t,e,n){const{activating:i,callbackContext:s,view:r}=this;return r.setHost(e),Xe(null==i?void 0:i.call(s,e,r),(()=>this.ne(t,e,n)))}ne(t,e,n){const{$controller:i,view:s}=this;return null!==t?Xe(s.activate(null!=t?t:s,i,n,i.scope),(()=>this.re(e))):(s.nodes.appendTo(e),this.re(e))}re(t){const{activated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}se(t,e,n){const{deactivating:i,callbackContext:s,view:r}=this;return Xe(null==i?void 0:i.call(s,e,r),(()=>this.oe(t,e,n)))}oe(t,e,n){const{$controller:i,view:s}=this;return null!==t?Xe(s.deactivate(t,i,n),(()=>this.le(e))):(s.nodes.remove(),this.le(e))}le(t){const{deactivated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}ie(){const t=this.p,e=t.document;let n=this.target,i=this.renderContext;if(""===n){if(this.strict)throw new Error("AUR0811");return e.body}if(Vl(n)){let s=e;Vl(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(s=i),n=s.querySelector(n)}if(n instanceof t.Node)return n;if(null==n){if(this.strict)throw new Error("AUR0812");return e.body}return n}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}cg.inject=[hu,od,Sc],kl([ql({primary:!0})],cg.prototype,"target",void 0),kl([ql({callback:"targetChanged"})],cg.prototype,"renderContext",void 0),kl([ql()],cg.prototype,"strict",void 0),kl([ql()],cg.prototype,"deactivating",void 0),kl([ql()],cg.prototype,"activating",void 0),kl([ql()],cg.prototype,"deactivated",void 0),kl([ql()],cg.prototype,"activated",void 0),kl([ql()],cg.prototype,"callbackContext",void 0),bh("portal")(cg);class hg extends class{constructor(t,e,n){this.fs=n,this.id=qe("au$component"),this.view=t.create().setLocation(e)}attaching(t,e,n){const{$controller:i}=this;return this.view.activate(t,i,n|this.fs,i.scope)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}{constructor(t,e){super(t,e,32)}}hg.inject=[hu,od],bh("observe-shallow")(hg);class ug{constructor(t,e,n){this.ifFactory=t,this.location=e,this.work=n,this.id=qe("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.he=!1,this.ae=0}attaching(t,e,n){let i;const s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;return Xe(this.pending,(()=>{var e;o()&&(this.pending=void 0,i=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=i&&(i.setLocation(this.location),this.pending=Xe(i.activate(t,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e,n){return this.he=!0,Xe(this.pending,(()=>{var e;this.he=!1,this.pending=void 0,null===(e=this.view)||void 0===e||e.deactivate(t,this.$controller,n)}))}valueChanged(t,e,n){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;this.work.start();const i=this.view,s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;let a;return Xe(Xe(this.pending,(()=>this.pending=Xe(null==i?void 0:i.deactivate(i,s,n),(()=>{var e;if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=a))return a.setLocation(this.location),Xe(a.activate(a,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var t,e;null===(t=this.ifView)||void 0===t||t.dispose(),null===(e=this.elseView)||void 0===e||e.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}ug.inject=[hu,od,Yu],kl([ql],ug.prototype,"value",void 0),kl([ql({set:t=>""===t||!!t&&"false"!==t})],ug.prototype,"cache",void 0),bh("if")(ug);class dg{constructor(t){this.factory=t,this.id=qe("au$component")}link(t,e,n,i){const s=t.children,r=s[s.length-1];if(r instanceof ug)r.elseFactory=this.factory;else{if(!(r.viewModel instanceof ug))throw new Error("AUR0810");r.viewModel.elseFactory=this.factory}}}function pg(t){t.dispose()}dg.inject=[hu],bh({name:"else"})(dg);const fg=[38962,36913];class gg{constructor(t,e,n){this.l=t,this.ce=e,this.f=n,this.id=qe("au$component"),this.views=[],this.key=void 0,this.ue=void 0,this.fe=!1,this.de=!1,this.me=null,this.ve=void 0,this.ge=!1}binding(t,e,n){const i=this.ce.bindings,s=i.length;let r,o,a=0;for(;s>a;++a)if(r=i[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.sourceExpression,this.pe=r;let t=o.iterable;for(;null!=t&&fg.includes(t.$kind);)t=t.expression,this.fe=!0;this.me=t;break}this.we(n);const l=o.declaration;(this.ge=90137===l.$kind||106521===l.$kind)||(this.local=l.evaluate(n,this.$controller.scope,r.locator,null))}attaching(t,e,n){return this.be(n),this.xe(t,n)}detaching(t,e,n){return this.we(n),this.ye(t,n)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.we(t),this.be(t);const n=Xe(this.ye(null,t),(()=>this.xe(null,t)));n instanceof Promise&&n.catch(zl)}handleCollectionChange(t,e){const{$controller:n}=this;if(n.isActive){if(this.fe){if(this.de)return;return this.de=!0,this.items=this.forOf.iterable.evaluate(e,n.scope,this.pe.locator,null),void(this.de=!1)}if(e|=n.flags,this.be(e),void 0===t){const t=Xe(this.ye(null,e),(()=>this.xe(null,e)));t instanceof Promise&&t.catch(zl)}else{const n=this.views.length,i=function(t){let e=0,n=0,i=0;const s=function(t){const e=t.slice();return e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t),r=s.length;for(;i<r;++i){for(;s.deletedItems[n]<=i-e;)++n,--e;-2===s[i]?++e:s[i]+=e}return s}(t);if(i.deletedItems.length>0){i.deletedItems.sort(Ze);const t=Xe(this.ke(i,e),(()=>this.Ce(n,i,e)));t instanceof Promise&&t.catch(zl)}else this.Ce(n,i,e)}}}we(t){var e;const n=this.$controller.scope;let i=this.Ae,s=this.fe;s&&(i=this.Ae=null!==(e=this.me.evaluate(t,n,this.pe.locator,null))&&void 0!==e?e:null,s=this.fe=!Object.is(this.items,i));const r=this.ue;if(4&t)void 0!==r&&r.unsubscribe(this);else if(this.$controller.isActive){const t=this.ue=function(t){let e;return t instanceof Array?e=Cr(t):t instanceof Map?e=Kr(t):t instanceof Set&&(e=Ur(t)),e}(s?i:this.items);r!==t&&r&&r.unsubscribe(this),t&&t.subscribe(this)}}be(t){const e=this.items;if(e instanceof Array)return void(this.ve=e);if(void 0===this.forOf)return;const n=[];this.forOf.iterate(t,e,((t,e,i)=>{n[e]=i})),this.ve=n}xe(t,e){let n,i,s,r;const{$controller:o,f:a,local:l,l:c,items:h}=this,u=o.scope,d=this.forOf,p=d.count(e,h),f=this.views=Array(p);if(d.iterate(e,h,((h,g,v)=>{s=f[g]=a.create().setLocation(c),s.nodes.unlink(),this.ge?d.declaration.assign(e,r=Di.fromParent(u,Vi.create()),this.pe.locator,v):r=Di.fromParent(u,Vi.create(l,v)),wg(r.overrideContext,g,p),i=s.activate(null!=t?t:s,o,e,r),i instanceof Promise&&(null!=n?n:n=[]).push(i)})),void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ye(t,e){let n,i,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),i=s.deactivate(null!=t?t:s,a,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ke(t,e){let n,i,s;const{$controller:r,views:o}=this,a=t.deletedItems,l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),i=s.deactivate(s,r,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);c=0;let h=0;for(;l>c;++c)h=a[c]-c,o.splice(h,1);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}Ce(t,e,n){var i;let s,r,o,a,l=0;const{$controller:c,f:h,local:u,ve:d,l:p,views:f}=this,g=e.length;for(;g>l;++l)-2===e[l]&&(o=h.create(),f.splice(l,0,o));if(f.length!==g)throw new Error(`AUR0814:${f.length}!=${g}`);const v=c.scope,m=e.length;!function(t,e){const n=t.slice(),i=e.length;let s=0,r=0;for(;s<i;)r=e[s],-2!==r&&(t[s]=n[r]),++s}(f,e);const b=function(t){const e=t.length;e>vg&&(vg=e,mg=new Int32Array(e),bg=new Int32Array(e));let n=0,i=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=mg[n],s=t[o],-2!==s&&s<i){bg[r]=o,mg[++n]=r;continue}for(a=0,l=n;a<l;)c=a+l>>1,s=t[mg[c]],-2!==s&&s<i?a=c+1:l=c;s=t[mg[a]],(i<s||-2===s)&&(a>0&&(bg[r]=mg[a-1]),mg[a]=r)}r=++n;const h=new Int32Array(r);for(i=mg[n-1];n-- >0;)h[n]=i,i=bg[i];for(;r-- >0;)mg[r]=0;return h}(e),w=b.length;let y,x=w-1;for(l=m-1;l>=0;--l)o=f[l],y=f[l+1],o.nodes.link(null!==(i=null==y?void 0:y.nodes)&&void 0!==i?i:p),-2===e[l]?(this.ge?this.forOf.declaration.assign(n,a=Di.fromParent(v,Vi.create()),this.pe.locator,d[l]):a=Di.fromParent(v,Vi.create(u,d[l])),wg(a.overrideContext,l,m),o.setLocation(p),r=o.activate(o,c,n,a),r instanceof Promise&&(null!=s?s:s=[]).push(r)):x<0||1===w||l!==b[x]?(wg(o.scope.overrideContext,l,m),o.nodes.insertBefore(o.location)):(t!==m&&wg(o.scope.overrideContext,l,m),--x);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(pg),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}gg.inject=[od,Uu,hu],kl([ql],gg.prototype,"items",void 0),bh("repeat")(gg);let vg=16,mg=new Int32Array(vg),bg=new Int32Array(vg);function wg(t,e,n){const i=0===e,s=e===n-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=s,t.$middle=!i&&!s,t.$even=r,t.$odd=!r,t.$length=n}class yg{constructor(t,e){this.id=qe("au$component"),this.id=qe("au$component"),this.view=t.create().setLocation(e)}valueChanged(t,e,n){const i=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(i.isActive&&null!=s)for(r=Di.fromParent(i.scope,void 0===t?{}:t),a=s.length;a>o;++o)s[o].$bind(2,r)}attaching(t,e,n){const{$controller:i,value:s}=this,r=Di.fromParent(i.scope,void 0===s?{}:s);return this.view.activate(t,i,n,r)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}yg.inject=[hu,od],kl([ql],yg.prototype,"value",void 0),bh("with")(yg);let xg=class{constructor(t,e){this.f=t,this.l=e,this.id=qe("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return this.queue((()=>i.activate(t,s,n,s.scope))),this.queue((()=>this.swap(t,n,this.value))),this.promise}detaching(t,e,n){return this.queue((()=>this.view.deactivate(t,this.$controller,n))),this.promise}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}valueChanged(t,e,n){this.$controller.isActive&&this.queue((()=>this.swap(null,n,this.value)))}caseChanged(t,e){this.queue((()=>this.Re(t,e)))}Re(t,e){const n=t.isMatch(this.value,e),i=this.activeCases,s=i.length;if(!n)return s>0&&i[0].id===t.id?this.Se(null,e):void 0;if(s>0&&i[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,n=e.indexOf(t);for(let t=n,i=e.length;t<i&&o;t++){const n=e[t];r.push(n),o=n.fallThrough}}else r.push(t);return Xe(this.Se(null,e,r),(()=>(this.activeCases=r,this.Ee(null,e))))}swap(t,e,n){const i=[];let s=!1;for(const t of this.cases)if((s||t.isMatch(n,e))&&(i.push(t),s=t.fallThrough),i.length>0&&!s)break;const r=this.defaultCase;return 0===i.length&&void 0!==r&&i.push(r),Xe(this.activeCases.length>0?this.Se(t,e,i):void 0,(()=>{if(this.activeCases=i,0!==i.length)return this.Ee(t,e)}))}Ee(t,e){const n=this.$controller;if(!n.isActive)return;const i=this.activeCases,s=i.length;if(0===s)return;const r=n.scope;return 1===s?i[0].activate(t,e,r):Ye(...i.map((n=>n.activate(t,e,r))))}Se(t,e,n=[]){const i=this.activeCases,s=i.length;if(0!==s){if(1===s){const s=i[0];return n.includes(s)?void 0:(i.length=0,s.deactivate(t,e))}return Xe(Ye(...i.reduce(((i,s)=>(n.includes(s)||i.push(s.deactivate(t,e)),i)),[])),(()=>{i.length=0}))}}queue(t){const e=this.promise;let n;n=this.promise=Xe(Xe(e,t),(()=>{this.promise===n&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};kl([ql],xg.prototype,"value",void 0),xg=kl([bh("switch"),Sl(0,hu),Sl(1,od)],xg);let kg=class{constructor(t,e,n,i){this.f=t,this.Be=e,this.l=n,this.id=qe("au$component"),this.fallThrough=!1,this.view=void 0,this.Ie=i.config.level<=1,this.Ut=i.scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,n,i){const s=t.parent,r=null==s?void 0:s.viewModel;if(!(r instanceof xg))throw new Error("AUR0815");this.$switch=r,this.linkToSwitch(r)}detaching(t,e,n){return this.deactivate(t,n)}isMatch(t,e){this.Ut.debug("isMatch()");const n=this.value;return Array.isArray(n)?(void 0===this.ue&&(this.ue=this.Te(e,n)),n.includes(t)):n===t}valueChanged(t,e,n){var i;Array.isArray(t)?(null===(i=this.ue)||void 0===i||i.unsubscribe(this),this.ue=this.Te(n,t)):void 0!==this.ue&&this.ue.unsubscribe(this),this.$switch.caseChanged(this,n)}handleCollectionChange(t,e){this.$switch.caseChanged(this,e)}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(null!=t?t:i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(null!=t?t:n,this.$controller,e)}dispose(){var t,e;null===(t=this.ue)||void 0===t||t.unsubscribe(this),null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Te(t,e){const n=this.Be.getArrayObserver(e);return n.subscribe(this),n}accept(t){var e;return!0===this.$controller.accept(t)||(null===(e=this.view)||void 0===e?void 0:e.accept(t))}};kg.inject=[hu,Ga,od,ai],kl([ql],kg.prototype,"value",void 0),kl([ql({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:js.oneTime})],kg.prototype,"fallThrough",void 0),kg=kl([bh("case")],kg);let Sg=class extends kg{linkToSwitch(t){if(void 0!==t.defaultCase)throw new Error("AUR0816");t.defaultCase=this}};Sg=kl([bh("default-case")],Sg);let Cg=class{constructor(t,e,n,i){this.f=t,this.l=e,this.p=n,this.id=qe("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=i.scopeTo("promise.resolve")}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return Xe(i.activate(t,s,n,this.viewScope=Di.fromParent(s.scope,{})),(()=>this.swap(t,n)))}valueChanged(t,e,n){this.$controller.isActive&&this.swap(null,n)}swap(t,e){var n,i;const s=this.value;if(!(s instanceof Promise))return void this.logger.warn(`The value '${String(s)}' is not a promise. No change will be done.`);const r=this.p.domWriteQueue,o=this.fulfilled,a=this.rejected,l=this.pending,c=this.viewScope;let h;const u={reusable:!1},d=()=>{Ye(h=(this.preSettledTask=r.queueTask((()=>Ye(null==o?void 0:o.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==l?void 0:l.activate(t,e,c))),u)).result.catch((t=>{if(!(t instanceof cl))throw t})),s.then((n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>Ye(null==l?void 0:l.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==o?void 0:o.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())}),(n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>Ye(null==l?void 0:l.deactivate(t,e),null==o?void 0:o.deactivate(t,e),null==a?void 0:a.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())})))};1===(null===(n=this.postSettledTask)||void 0===n?void 0:n.status)?this.postSettlePromise.then(d):(null===(i=this.postSettledTask)||void 0===i||i.cancel(),d())}detaching(t,e,n){var i,s;return null===(i=this.preSettledTask)||void 0===i||i.cancel(),null===(s=this.postSettledTask)||void 0===s||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};kl([ql],Cg.prototype,"value",void 0),Cg=kl([bh("promise"),Sl(0,hu),Sl(1,od),Sl(2,Sc),Sl(3,ai)],Cg);let Ag=class{constructor(t,e){this.f=t,this.l=e,this.id=qe("au$component"),this.view=void 0}link(t,e,n,i){$g(t).pending=this}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};kl([ql({mode:js.toView})],Ag.prototype,"value",void 0),Ag=kl([bh("pending"),Sl(0,hu),Sl(1,od)],Ag);let Eg=class{constructor(t,e){this.f=t,this.l=e,this.id=qe("au$component"),this.view=void 0}link(t,e,n,i){$g(t).fulfilled=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};kl([ql({mode:js.fromView})],Eg.prototype,"value",void 0),Eg=kl([bh("then"),Sl(0,hu),Sl(1,od)],Eg);let Tg=class{constructor(t,e){this.f=t,this.l=e,this.id=qe("au$component"),this.view=void 0}link(t,e,n,i){$g(t).rejected=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};function $g(t){const e=t.parent,n=null==e?void 0:e.viewModel;if(n instanceof Cg)return n;throw new Error("AUR0813")}kl([ql({mode:js.fromView})],Tg.prototype,"value",void 0),Tg=kl([bh("catch"),Sl(0,hu),Sl(1,od)],Tg);let Ig=class{"promise.resolve"(t,e,n){return new lc(t,e,"promise","bind")}};Ig=kl([dc({pattern:"promise.resolve",symbols:""})],Ig);let Rg=class{then(t,e,n){return new lc(t,e,"then","from-view")}};Rg=kl([dc({pattern:"then",symbols:""})],Rg);let Og=class{catch(t,e,n){return new lc(t,e,"catch","from-view")}};Og=kl([dc({pattern:"catch",symbols:""})],Og);class Pg{constructor(t,e,n){this.node=t,this.instructions=e,this.De=n,this.Pe=void 0}get definition(){return void 0===this.Pe&&(this.Pe=Rh.create({name:Dh.generateName(),template:this.node,needsCompile:Vl(this.node),instructions:this.instructions,dependencies:this.De})),this.Pe}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return t.root.get(wu).getViewFactory(this.definition,t.createChild().register(...this.De))}mergeInto(t,e,n){t.appendChild(this.node),e.push(...this.instructions),n.push(...this.De)}}function Lg(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const o=n[r];switch(typeof o){case"string":e.appendChild(t.document.createTextNode(o));break;case"object":o instanceof t.Node?e.appendChild(o):"mergeInto"in o&&o.mergeInto(e,i,s)}}}function Mg(t,e){const n=e.to;return void 0!==n&&"subject"!==n&&"composing"!==n&&(t[n]=e),t}class Ug{constructor(t,e,n,i){this.p=t,this.$e=e,this.Oe=n,this.r=i,this.id=qe("au$component"),this.component=void 0,this.composing=!1,this.view=void 0,this.Le=void 0,this.qe=e.props.reduce(Mg,{})}attaching(t,e,n){const{component:i,view:s}=this;return void 0===s||this.Le!==i?(this.Le=i,this.composing=!0,this.compose(void 0,i,t,n)):this.compose(s,i,t,n)}detaching(t,e,n){return this.oe(this.view,t,n)}componentChanged(t,e,n){const{$controller:i}=this;if(!i.isActive)return;if(this.Le===t)return;this.Le=t,this.composing=!0,n|=i.flags;const s=Xe(this.oe(this.view,null,n),(()=>this.compose(void 0,t,null,n)));s instanceof Promise&&s.catch((t=>{throw t}))}compose(t,e,n,i){return Xe(void 0===t?Xe(e,(t=>this.Ue(t,i))):t,(t=>this.ne(this.view=t,n,i)))}oe(t,e,n){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,n)}ne(t,e,n){const{$controller:i}=this;return Xe(null==t?void 0:t.activate(null!=e?e:t,i,n,i.scope),(()=>{this.composing=!1}))}Ue(t,e){const n=this._e(t,e);if(n)return n.setLocation(this.$controller.location),n.lockScope(this.$controller.scope),n}_e(t,e){if(!t)return;const n=this.Oe.controller.container;if("object"==typeof t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(n);if("create"in t)return t.create();if("template"in t)return this.r.getViewFactory(Rh.getOrCreate(t),n).create()}if(Vl(t)){const e=n.find(Dh,t);if(null==e)throw new Error(`AUR0809:${t}`);t=e.Type}return function(t,e,n,i){if(Vl(e))return function(t,e,n,i){const s=[],r=[],o=[],a=t.document.createElement(e);let l=!1;return n&&Object.keys(n).forEach((t=>{const e=n[t];Id(e)?(l=!0,s.push(e)):a.setAttribute(t,e)})),l&&(a.className="au",r.push(s)),i&&Lg(t,a,i,r,o),new Pg(a,r,o)}(t,e,n,i);if(Dh.isType(e))return function(t,e,n,i){const s=Dh.getDefinition(e),r=[],o=[r],a=[],l=[],c=s.bindables,h=t.document.createElement(s.name);return h.className="au",a.includes(e)||a.push(e),r.push(new jd(s,void 0,l,null,!1,void 0)),n&&Object.keys(n).forEach((t=>{const e=n[t];Id(e)?l.push(e):void 0===c[t]?l.push(new qd(e,t)):l.push(new Ud(e,t))})),i&&Lg(t,h,i,o,a),new Pg(h,o,a)}(t,e,n,i);throw new Error("Invalid Tag or Type.")}(this.p,t,this.qe,this.$controller.host.childNodes).createView(n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Ug.inject=[Sc,$d,ju,wu],kl([ql],Ug.prototype,"component",void 0),kl([ql({mode:js.fromView})],Ug.prototype,"composing",void 0),Th({name:"au-render",template:null,containerless:!0,capture:!0})(Ug);class jg{constructor(t,e,n,i,s,r,o){this.c=t,this.parent=e,this.host=n,this.l=i,this.p=s,this.scopeBehavior="auto",this.Fe=void 0,this.r=t.get(wu),this.$e=r,this.Ve=o}static get inject(){return[bn,Uu,sd,od,Sc,$d,Sn(Ng)]}get pending(){return this.Me}get composition(){return this.Fe}attaching(t,e,n){return this.Me=Xe(this.queue(new Fg(this.view,this.viewModel,this.model,void 0),t),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)}))}detaching(t){const e=this.Fe,n=this.Me;return this.Ve.invalidate(),this.Fe=this.Me=void 0,Xe(n,(()=>null==e?void 0:e.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Fe?this.Me=Xe(this.Me,(()=>Xe(this.queue(new Fg(this.view,this.viewModel,this.model,t),void 0),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)})))):this.Fe.update(this.model)}queue(t,e){const n=this.Ve,i=this.Fe;return Xe(n.create(t),(t=>n.isCurrent(t)?Xe(this.compose(t),(s=>n.isCurrent(t)?Xe(s.activate(e),(()=>n.isCurrent(t)?(this.Fe=s,Xe(null==i?void 0:i.deactivate(e),(()=>t))):Xe(s.controller.deactivate(s.controller,this.$controller,4),(()=>(s.controller.dispose(),t))))):(s.controller.dispose(),t))):t))}compose(t){let e,n,i;const{view:s,viewModel:r,model:o}=t.change,{c:a,host:l,$controller:c,l:h}=this,u=this.getDef(r),d=a.createChild(),p=null==h?l.parentNode:h.parentNode;if(null!==u){if(u.containerless)throw new Error("AUR0806");null==h?(n=l,i=()=>{}):(n=p.insertBefore(this.p.document.createElement(u.name),h),i=()=>{n.remove()}),e=this.getVm(d,r,n)}else n=null==h?l:h,e=this.getVm(d,r,n);const f=()=>{if(null!==u){const s=Cu.$el(d,e,n,{projections:this.$e.projections},u);return new zg(s,(t=>s.activate(null!=t?t:s,c,2,c.scope.parentScope)),(t=>Xe(s.deactivate(null!=t?t:s,c,4),i)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}{const i=Rh.create({name:Dh.generateName(),template:s}),r=this.r.getViewFactory(i,d),o=Cu.$view(r,c),a="auto"===this.scopeBehavior?Di.fromParent(this.parent.scope,e):Di.create(e);return ud(n)?o.setLocation(n):o.setHost(n),new zg(o,(t=>o.activate(null!=t?t:o,c,2,a)),(t=>o.deactivate(null!=t?t:o,c,4)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}};return"activate"in e?Xe(e.activate(o),(()=>f())):f()}getVm(t,e,n){if(null==e)return new Bg;if("object"==typeof e)return e;const i=this.p,s=ud(n);t.registerResolver(i.Element,t.registerResolver(sd,new Kn("ElementResolver",s?null:n))),t.registerResolver(od,new Kn("IRenderLocation",s?n:null));const r=t.invoke(e);return t.registerResolver(e,new Kn("au-compose.viewModel",r)),r}getDef(t){const e=Fl(t)?t:null==t?void 0:t.constructor;return Dh.isType(e)?Dh.getDefinition(e):null}}kl([ql],jg.prototype,"view",void 0),kl([ql],jg.prototype,"viewModel",void 0),kl([ql],jg.prototype,"model",void 0),kl([ql({set:t=>{if("scoped"===t||"auto"===t)return t;throw new Error("AUR0805")}})],jg.prototype,"scopeBehavior",void 0),Th("au-compose")(jg);class Bg{}class Ng{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return Xe(t.load(),(t=>new Dg(++this.id,t)))}invalidate(){this.id++}}class Fg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}load(){return Nl(this.view)||Nl(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new Vg(t,e,this.model,this.src))):new Vg(this.view,this.viewModel,this.model,this.src)}}class Vg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}}class Dg{constructor(t,e){this.id=t,this.change=e}}class zg{constructor(t,e,n,i,s){this.controller=t,this.start=e,this.stop=n,this.update=i,this.context=s,this.state=0}activate(t){if(0!==this.state)throw new Error(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw new Error("AUR0808");default:this.state=-1}}}class qg{constructor(t,e,n,i){var s,r;let o;this.je=null,this.Ne=null;const a=e.auSlot,l=null===(r=null===(s=n.instruction)||void 0===s?void 0:s.projections)||void 0===r?void 0:r[a.name];null==l?(o=i.getViewFactory(a.fallback,n.controller.container),this.We=!1):(o=i.getViewFactory(l,n.parent.controller.container),this.We=!0),this.Oe=n,this.view=o.create().setLocation(t)}static get inject(){return[od,$d,ju,wu]}binding(t,e,n){var i;let s;this.je=this.$controller.scope.parentScope,this.We&&(s=this.Oe.controller.scope.parentScope,(this.Ne=Di.fromParent(s,s.bindingContext)).overrideContext.$host=null!==(i=this.expose)&&void 0!==i?i:this.je.bindingContext)}attaching(t,e,n){return this.view.activate(t,this.$controller,n,this.We?this.Ne:this.je)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}exposeChanged(t){this.We&&null!=this.Ne&&(this.Ne.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}kl([ql],qg.prototype,"expose",void 0),Th({name:"au-slot",template:null,containerless:!0})(qg);const Zg=gn.createInterface("ISanitizer",(t=>t.singleton(class{sanitize(){throw new Error('"sanitize" method not implemented')}})));let Hg=class{constructor(t){this.He=t}toView(t){return null==t?null:this.He.sanitize(t)}};Hg=kl([Sl(0,Zg)],Hg),Ji("sanitize")(Hg);let Kg=class{constructor(t){this.ze=t}toView(t,e){return this.ze.getViewComponentForObject(t,e)}};Kg=kl([Sl(0,mu)],Kg),Ji("view")(Kg);const Wg=Lf,Qg=If,_g=Rf,Gg=Of,Xg=Mf,Yg=Uf,Jg=Pf,tv=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return Hn.singleton(_d,this).register(t)}compile(t,e,n){var i,s,r,o;const a=Rh.getOrCreate(t);if(null===a.template||void 0===a.template)return a;if(!1===a.needsCompile)return a;null!=n||(n=cf);const l=new of(t,e,n,null,null,void 0),c=Vl(a.template)||!t.enhance?l.ni.createTemplate(a.template):a.template,h="TEMPLATE"===c.nodeName&&null!=c.content,u=h?c.content:c,d=e.get(function(t){function e(t,n,i){gn.inject(e)(t,n,i)}return e.$isResolver=!0,e.resolve=function(e,n){return n.root===n?n.getAll(t,!1):n.has(t,!1)?n.getAll(t,!1).concat(n.root.getAll(t,!1)):n.root.getAll(t,!1)},e}(xf)),p=d.length;let f=0;if(p>0)for(;p>f;)null===(s=(i=d[f]).compiling)||void 0===s||s.call(i,c),++f;if(c.hasAttribute(bf))throw new Error("AUR0701");return this.ri(u,l),this.oi(u,l),Rh.create({...t,name:t.name||Af(),dependencies:(null!==(r=t.dependencies)&&void 0!==r?r:Gn).concat(null!==(o=l.deps)&&void 0!==o?o:Gn),instructions:l.rows,surrogates:h?this.li(c,l):Gn,template:c,hasSlots:l.hasSlot,needsCompile:!1})}compileSpread(t,e,n,i){var s;const r=new of(t,n,cf,null,null,void 0),o=[],a=r.hi(i.nodeName.toLowerCase()),l=null!==a,c=r.ep,h=e.length;let u,d,p,f,g,v,m,b,w,y,x=0,k=null,S=null;for(;h>x;++x)if(u=e[x],w=u.target,y=u.rawValue,S=r.ai(u),null!==S&&(1&S.type)>0)uf.node=i,uf.attr=u,uf.bindable=null,uf.def=null,o.push(S.build(uf));else if(k=r.ui(w),null===k)if(null===S){if(m=c.parse(y,1),l&&(f=gf.from(a,!1),g=f.attrs[w],void 0!==g)){m=c.parse(y,1),o.push(new Qd(null==m?new Ud(y,g.property):new Rd(m,g.property)));continue}if(null!=m)o.push(new Rd(m,null!==(s=r.m.map(i,w))&&void 0!==s?s:Ne(w)));else switch(w){case"class":o.push(new Zd(y));break;case"style":o.push(new Hd(y));break;default:o.push(new qd(y,w))}}else{if(l&&(f=gf.from(a,!1),g=f.attrs[w],void 0!==g)){uf.node=i,uf.attr=u,uf.bindable=g,uf.def=a,o.push(new Qd(S.build(uf)));continue}uf.node=i,uf.attr=u,uf.bindable=null,uf.def=null,o.push(S.build(uf))}else{if(k.isTemplateController)throw new Error(`AUR0703:${w}`);f=gf.from(k,!0),b=!1===k.noMultiBindings&&null===S&&af(y),b?p=this.fi(i,y,k,r):(v=f.primary,null===S?(m=c.parse(y,1),p=[null===m?new Ud(y,v.property):new Rd(m,v.property)]):(uf.node=i,uf.attr=u,uf.bindable=v,uf.def=k,p=[S.build(uf)])),(null!=d?d:d=[]).push(new Bd(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(w)?w:void 0,p))}return lf(),null!=d?d.concat(o):o}li(t,e){var n;const i=[],s=t.attributes,r=e.ep;let o,a,l,c,h,u,d,p,f,g,v,m,b=s.length,w=0,y=null,x=null;for(;b>w;++w){if(o=s[w],a=o.name,l=o.value,c=e.di.parse(a,l),v=c.target,m=c.rawValue,df[v])throw new Error(`AUR0702:${a}`);if(x=e.ai(c),null!==x&&(1&x.type)>0)uf.node=t,uf.attr=c,uf.bindable=null,uf.def=null,i.push(x.build(uf));else if(y=e.ui(v),null===y)if(null===x)if(f=r.parse(m,1),null!=f)t.removeAttribute(a),--w,--b,i.push(new Rd(f,null!==(n=e.m.map(t,v))&&void 0!==n?n:Ne(v)));else switch(a){case"class":i.push(new Zd(m));break;case"style":i.push(new Hd(m));break;default:i.push(new qd(m,a))}else uf.node=t,uf.attr=c,uf.bindable=null,uf.def=null,i.push(x.build(uf));else{if(y.isTemplateController)throw new Error(`AUR0703:${v}`);d=gf.from(y,!0),g=!1===y.noMultiBindings&&null===x&&af(m),g?u=this.fi(t,m,y,e):(p=d.primary,null===x?(f=r.parse(m,1),u=[null===f?new Ud(m,p.property):new Rd(f,p.property)]):(uf.node=t,uf.attr=c,uf.bindable=p,uf.def=y,u=[x.build(uf)])),t.removeAttribute(a),--w,--b,(null!=h?h:h=[]).push(new Bd(this.resolveResources?y:y.name,null!=y.aliases&&y.aliases.includes(v)?v:void 0,u))}}return lf(),null!=h?h.concat(i):i}oi(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.mi(t,e):this.vi(t,e);case 3:return this.gi(t,e);case 11:{let n=t.firstChild;for(;null!==n;)n=this.oi(n,e);break}}return t.nextSibling}mi(t,e){const n=t.attributes,i=n.length,s=[],r=e.ep;let o,a,l,c,h,u,d,p,f=!1,g=0;for(;i>g;++g)if(o=n[g],l=o.name,c=o.value,"to-binding-context"!==l){if(a=e.di.parse(l,c),u=a.target,d=a.rawValue,h=e.ai(a),null!==h)switch(h.name){case"to-view":case"bind":s.push(new Vd(r.parse(d,8),Ne(u)));continue;default:throw new Error(`AUR0704:${a.command}`)}p=r.parse(d,1),s.push(new Vd(null===p?new ys(d):p,Ne(u)))}else f=!0;return e.rows.push([new Fd(s,f)]),this.pi(t).nextSibling}vi(t,e){var n,i,s,r,o,a,l,c,h,u;const d=t.nextSibling,p=(null!==(n=t.getAttribute("as-element"))&&void 0!==n?n:t.nodeName).toLowerCase(),f=e.hi(p),g=null!==f,v=g&&null!=f.shadowOptions,m=!!(null==f?void 0:f.capture),b=m?[]:Gn,w=e.ep,y=this.debug?Yn:()=>{t.removeAttribute(S),--z,--D};let x,k,S,C,A,E,T,$,I,R,O,P,L,M,U,j,B,N,F,V=t.attributes,D=V.length,z=0,q=null,Z=!1,H=null,K=!0,W=!1;if("slot"===p){if(null==e.root.def.shadowOptions)throw new Error(`AUR0717:${e.root.def.name}`);e.root.hasSlot=!0}if(g&&(K=null===(i=f.processContent)||void 0===i?void 0:i.call(f.Type,t,e.p),V=t.attributes,D=V.length),e.root.def.enhance&&t.classList.contains("au"))throw new Error("AUR0705");for(;D>z;++z){switch(k=V[z],S=k.name,C=k.value,S){case"as-element":case"containerless":y(),W||(W="containerless"===S);continue}if(A=e.di.parse(S,C),H=e.ai(A),B=A.target,N=A.rawValue,m){if(null!=H&&1&H.type){y(),b.push(A);continue}if("au-slot"!==B&&(U=gf.from(f,!1),null==U.attrs[B]&&!(null===(s=e.ui(B))||void 0===s?void 0:s.isTemplateController))){y(),b.push(A);continue}}if(null!==H&&1&H.type)uf.node=t,uf.attr=A,uf.bindable=null,uf.def=null,(null!=E?E:E=[]).push(H.build(uf)),y();else if(q=e.ui(B),null===q)if(null!==H)y(),g&&(U=gf.from(f,!1),$=U.attrs[B],void 0!==$)?(uf.node=t,uf.attr=A,uf.bindable=$,uf.def=f,(null!=T?T:T=[]).push(H.build(uf))):(uf.node=t,uf.attr=A,uf.bindable=null,uf.def=null,(null!=E?E:E=[]).push(H.build(uf)));else{if(g&&(U=gf.from(f,!1),$=U.attrs[B],void 0!==$)){L=w.parse(N,1),(null!=T?T:T=[]).push(null==L?new Ud(N,$.property):new Rd(L,$.property)),y();continue}L=w.parse(N,1),null!=L&&(y(),(null!=E?E:E=[]).push(new Rd(L,null!==(r=e.m.map(t,B))&&void 0!==r?r:Ne(B))))}else U=gf.from(q,!0),Z=!1===q.noMultiBindings&&null===H&&af(N),Z?R=this.fi(t,N,q,e):(j=U.primary,null===H?(L=w.parse(N,1),R=[null===L?new Ud(N,j.property):new Rd(L,j.property)]):(uf.node=t,uf.attr=A,uf.bindable=j,uf.def=q,R=[H.build(uf)])),y(),q.isTemplateController?(null!=O?O:O=[]).push(new Nd(hf,this.resolveResources?q:q.name,void 0,R)):(null!=I?I:I=[]).push(new Bd(this.resolveResources?q:q.name,null!=q.aliases&&q.aliases.includes(B)?B:void 0,R))}if(lf(),this.wi(t)&&null!=E&&E.length>1&&this.bi(t,E),g&&(M=new jd(this.resolveResources?f:f.name,void 0,null!=T?T:Gn,null,W,b),p===Tf)){const n=t.getAttribute("name")||Ef,i=e.h("template"),s=e.xi();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?t.removeChild(r):i.content.appendChild(r),r=t.firstChild;this.oi(i.content,s),M.auSlot={name:n,fallback:Rh.create({name:Af(),template:i,instructions:s.rows,needsCompile:!1})},t=this.yi(t,e)}if(null==E&&null==M&&null==I||(x=Gn.concat(null!=M?M:Gn,null!=I?I:Gn,null!=E?E:Gn),this.pi(t)),null!=O){let n;D=O.length-1,z=D,P=O[z],this.yi(t,e),"TEMPLATE"===t.nodeName?n=t:(n=e.h("template"),n.content.appendChild(t));const i=n,s=e.xi(null==x?[]:[x]);let r,a,h,u,d,m,b,w,y=0,k=0,S=t.firstChild,C=!1;if(!1!==K)for(;null!==S;)if(a=1===S.nodeType?S.getAttribute(Tf):null,null!==a&&S.removeAttribute(Tf),g)r=S.nextSibling,v||(C=3===S.nodeType&&""===S.textContent.trim(),C||(null!==(o=(l=null!=u?u:u={})[c=a||Ef])&&void 0!==o?o:l[c]=[]).push(S),t.removeChild(S)),S=r;else{if(null!==a)throw a=a||Ef,new Error(`AUR0706:${p}[${a}]`);S=S.nextSibling}if(null!=u){for(a in h={},u){for(n=e.h("template"),d=u[a],y=0,k=d.length;k>y;++y)m=d[y],"TEMPLATE"===m.nodeName?m.attributes.length>0?n.content.appendChild(m):n.content.appendChild(m.content):n.content.appendChild(m);w=e.xi(),this.oi(n.content,w),h[a]=Rh.create({name:Af(),template:n,instructions:w.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=h}if(g&&(W||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!W&&!1!==K,F)if("TEMPLATE"===t.nodeName)this.oi(t.content,s);else for(S=t.firstChild;null!==S;)S=this.oi(S,s);for(P.def=Rh.create({name:Af(),template:i,instructions:s.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});z-- >0;)P=O[z],n=e.h("template"),b=e.h("au-m"),b.classList.add("au"),n.content.appendChild(b),P.def=Rh.create({name:Af(),template:n,needsCompile:!1,instructions:[[O[z+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([P])}else{null!=x&&e.rows.push(x);let n,i,s,r,o,l,c,d=t.firstChild,m=null,b=!1,w=0,y=0;if(!1!==K)for(;null!==d;)if(i=1===d.nodeType?d.getAttribute(Tf):null,null!==i&&d.removeAttribute(Tf),g)n=d.nextSibling,v||(b=3===d.nodeType&&""===d.textContent.trim(),b||(null!==(a=(h=null!=s?s:s={})[u=i||Ef])&&void 0!==a?a:h[u]=[]).push(d),t.removeChild(d)),d=n;else{if(null!==i)throw i=i||Ef,new Error(`AUR0706:${p}[${i}]`);d=d.nextSibling}if(null!=s){for(i in m={},s){for(l=e.h("template"),r=s[i],w=0,y=r.length;y>w;++w)o=r[w],"TEMPLATE"===o.nodeName?o.attributes.length>0?l.content.appendChild(o):l.content.appendChild(o.content):l.content.appendChild(o);c=e.xi(),this.oi(l.content,c),m[i]=Rh.create({name:Af(),template:l,instructions:c.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=m}if(g&&(W||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!W&&!1!==K,F&&t.childNodes.length>0)for(d=t.firstChild;null!==d;)d=this.oi(d,e)}return d}gi(t,e){let n="",i=t;for(;null!==i&&3===i.nodeType;)n+=i.textContent,i=i.nextSibling;const s=e.ep.parse(n,1);if(null===s)return i;const r=t.parentNode;for(r.insertBefore(this.pi(e.h("au-m")),t),e.rows.push([new Dd(s,!!e.def.isStrictBinding)]),t.textContent="",i=t.nextSibling;null!==i&&3===i.nodeType;)r.removeChild(i),i=t.nextSibling;return t.nextSibling}fi(t,e,n,i){const s=gf.from(n,!0),r=e.length,o=[];let a,l,c,h,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){l=e.slice(p,g);break}if(void 0===l&&(l=e.slice(p)),h=i.di.parse(a,l),u=i.ai(h),d=s.attrs[h.target],null==d)throw new Error(`AUR0707:${n.name}.${h.target}`);for(null===u?(c=i.ep.parse(l,1),o.push(null===c?new Ud(l,d.property):new Rd(c,d.property))):(uf.node=t,uf.attr=h,uf.bindable=d,uf.def=n,o.push(u.build(uf)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,l=void 0}return lf(),o}ri(t,e){var n,i;const s=t,r=De(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===s.childElementCount)throw new Error("AUR0708");const a=new Set,l=[];for(const t of r){if(t.parentNode!==s)throw new Error("AUR0709");const n=wf(t,a),i=class{},r=t.content,o=De(r.querySelectorAll("bindable")),c=Kl.for(i),h=new Set,u=new Set;for(const t of o){if(t.parentNode!==r)throw new Error("AUR0710");const e=t.getAttribute("property");if(null===e)throw new Error("AUR0711");const n=t.getAttribute("attribute");if(null!==n&&u.has(n)||h.has(e))throw new Error(`AUR0712:${e}+${n}`);null!==n&&u.add(n),h.add(e),c.add({property:e,attribute:null!=n?n:void 0,mode:yf(t)}),t.getAttributeNames().filter((t=>!mf.includes(t))).length,r.removeChild(t)}l.push(i),e.ki(Dh.define({name:n,template:t},i)),s.removeChild(t)}let c=0;const h=l.length;for(;h>c;++c)Dh.getDefinition(l[c]).dependencies.push(...null!==(n=e.def.dependencies)&&void 0!==n?n:Gn,...null!==(i=e.deps)&&void 0!==i?i:Gn)}wi(t){return"INPUT"===t.nodeName&&1===pf[t.type]}bi(t,e){if("INPUT"===t.nodeName){const t=e;let n,i,s,r=0;for(let e=0;e<t.length&&r<3;e++)switch(s=t[e],s.to){case"model":case"value":case"matcher":n=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==n&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}pi(t){return t.classList.add("au"),t}yi(t,e){const n=t.parentNode,i=e.h("au-m");return this.pi(n.insertBefore(i,t)),n.removeChild(t),i}},sg],ev=[wc,bc,kc],nv=[Hp,Dp,qp,zp,Zp,Kp,Wp,tf,Qp,_p,Gp,Jp,Yp,Xp,ef],iv=[Wg,Qg,_g,Gg,Xg,Yg,Jg,Hg,Kg,hg,ug,dg,gg,yg,xg,kg,Sg,Cg,Ag,Eg,Tg,Ig,Rg,Og,Bf,Ff,og,Ug,jg,cg,ag,lg,qg],sv=[lp,cp,rp,op,ap,tp,ep,np,ip,sp,vp,xp,mp,bp,wp,yp,pp,kp],rv=function t(e){return{optionsProvider:e,register(t){const n={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(n),t.register(Hn.instance(Us,n.coercingOptions),...tv,...iv,...ev,...nv,...sv)},customize:n=>t(null!=n?n:e)}}(Yn),ov=gn.createInterface("IAurelia");var av;!function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(av||(av={}));const lv=gn.createInterface("IDialogService"),cv=gn.createInterface("IDialogController"),hv=gn.createInterface("IDialogDomRenderer"),uv=gn.createInterface("IDialogDom"),dv=gn.createInterface("IDialogGlobalSettings");class pv{constructor(t,e){this.wasCancelled=t,this.dialog=e}static create(t,e){return new pv(t,e)}}class fv{constructor(t,e){this.status=t,this.value=e}static create(t,e){return new fv(t,e)}}var gv;!function(t){t.Ok="ok",t.Error="error",t.Cancel="cancel",t.Abort="abort"}(gv||(gv={}));class vv{constructor(t,e){this.p=t,this.ctn=e,this.closed=new Promise(((t,e)=>{this.Pt=t,this.St=e}))}static get inject(){return[Sc,bn]}activate(t){var e;const n=this.ctn.createChild(),{model:i,template:s,rejectOnCancel:r}=t,o=n.get(hv),a=null!==(e=t.host)&&void 0!==e?e:this.p.document.body,l=this.dom=o.render(a,t),c=n.has(rd,!0)?n.get(rd):null,h=l.contentHost;return this.settings=t,null!=c&&c.contains(a)||n.register(Hn.instance(rd,a)),n.register(Hn.instance(sd,h),Hn.instance(uv,l)),new Promise((e=>{var s,r;const o=Object.assign(this.cmp=this.getOrCreateVm(n,t,h),{$dialog:this});e(null===(r=null===(s=o.canActivate)||void 0===s?void 0:s.call(o,i))||void 0===r||r)})).then((e=>{var o;if(!0!==e){if(l.dispose(),r)throw bv(null,"Dialog activation rejected");return pv.create(!0,this)}const a=this.cmp;return Xe(null===(o=a.activate)||void 0===o?void 0:o.call(a,i),(()=>{var e;const i=this.controller=Cu.$el(n,a,h,null,Rh.create(null!==(e=this.getDefinition(a))&&void 0!==e?e:{name:Dh.generateName(),template:s}));return Xe(i.activate(i,null,2),(()=>{var e;return l.overlay.addEventListener(null!==(e=t.mouseEvent)&&void 0!==e?e:"click",this),pv.create(!1,this)}))}))}),(t=>{throw l.dispose(),t}))}deactivate(t,e){if(this.es)return this.es;let n=!0;const{controller:i,dom:s,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,l=fv.create(t,e),c=new Promise((c=>{var h,u;c(Xe(null===(u=null===(h=r.canDeactivate)||void 0===h?void 0:h.call(r,l))||void 0===u||u,(c=>{var h;if(!0!==c){if(n=!1,this.es=void 0,a)throw bv(null,"Dialog cancellation rejected");return fv.create("abort")}return Xe(null===(h=r.deactivate)||void 0===h?void 0:h.call(r,l),(()=>Xe(i.deactivate(i,null,4),(()=>(s.dispose(),s.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===t?this.St(bv(e,"Dialog cancelled with a rejection on cancel")):this.Pt(l),l)))))})))})).catch((t=>{throw this.es=void 0,t}));return this.es=n?c:void 0,c}ok(t){return this.deactivate("ok",t)}cancel(t){return this.deactivate("cancel",t)}error(t){const e=function(t){const e=new Error;return e.wasCancelled=!1,e.value=t,e}(t);return new Promise((t=>{var n,i;return t(Xe(null===(i=(n=this.cmp).deactivate)||void 0===i?void 0:i.call(n,fv.create("error",e)),(()=>Xe(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.St(e)})))))}))}handleEvent(t){this.settings.overlayDismiss&&!this.dom.contentHost.contains(t.target)&&this.cancel()}getOrCreateVm(t,e,n){const i=e.component;if(null==i)return new mv;if("object"==typeof i)return i;const s=this.p;return t.registerResolver(s.HTMLElement,t.registerResolver(s.Element,t.registerResolver(sd,new Kn("ElementResolver",n)))),t.invoke(i)}getDefinition(t){const e=Fl(t)?t:null==t?void 0:t.constructor;return Dh.isType(e)?Dh.getDefinition(e):null}}class mv{}function bv(t,e){const n=new Error(e);return n.wasCancelled=!0,n.value=t,n}class wv{static from(...t){return Object.assign(new wv,...t).ls().os()}load(){const t=this,e=this.component,n=this.template,i=Ye(null==e?void 0:Xe(e(),(e=>{t.component=e})),Fl(n)?Xe(n(),(e=>{t.template=e})):void 0);return i instanceof Promise?i.then((()=>t)):t}ls(){if(null==this.component&&null==this.template)throw new Error("AUR0903");return this}os(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function yv(t,e){return this.then((n=>n.dialog.closed.then(t,e)),e)}const xv="position:absolute;width:100%;height:100%;top:0;left:0;";class kv{constructor(t){this.p=t,this.wrapperCss=`${xv} display:flex;`,this.overlayCss=xv,this.hostCss="position:relative;margin:auto;"}static register(t){Hn.singleton(hv,this).register(t)}render(t){const e=this.p.document,n=(t,n)=>{const i=e.createElement(t);return i.style.cssText=n,i},i=t.appendChild(n("au-dialog-container",this.wrapperCss)),s=i.appendChild(n("au-dialog-overlay",this.overlayCss)),r=i.appendChild(n("div",this.hostCss));return new Sv(i,s,r)}}kv.inject=[Sc];class Sv{constructor(t,e,n){this.wrapper=t,this.overlay=e,this.contentHost=n}dispose(){this.wrapper.remove()}}function Cv(t,e){return{settingsProvider:t,register:n=>n.register(...e,rh.beforeCreate((()=>t(n.get(dv))))),customize:(t,n)=>Cv(t,null!=n?n:e)}}Cv((()=>{throw new Error("AUR0904")}),[class{static register(t){t.register(Hn.singleton(dv,this))}}]);const Av=Cv(Yn,[class{constructor(t,e,n){this.ft=t,this.p=e,this.ss=n,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const t=this.dlgs;return t.length>0?t[t.length-1]:null}static get inject(){return[bn,Sc,dv]}static register(t){t.register(Hn.singleton(lv,this),rh.beforeDeactivate(lv,(t=>Xe(t.closeAll(),(t=>{if(t.length>0)throw new Error(`AUR0901:${t.length}`)})))))}open(t){return function(t){return t.whenClosed=yv,t}(new Promise((e=>{var n;const i=wv.from(this.ss,t),s=null!==(n=i.container)&&void 0!==n?n:this.ft.createChild();e(Xe(i.load(),(t=>{const e=s.invoke(vv);return s.register(Hn.instance(cv,e)),s.register(Hn.callback(vv,(()=>{throw new Error("AUR0902")}))),Xe(e.activate(t),(t=>{if(!t.wasCancelled){1===this.dlgs.push(e)&&this.p.window.addEventListener("keydown",this);const t=()=>this.remove(e);e.closed.then(t,t)}return t}))})))})))}closeAll(){return Promise.all(Array.from(this.dlgs).map((t=>t.settings.rejectOnCancel?t.cancel().then((()=>null)):t.cancel().then((e=>"cancel"===e.status?null:t))))).then((t=>t.filter((t=>!!t))))}remove(t){const e=this.dlgs,n=e.indexOf(t);n>-1&&this.dlgs.splice(n,1),0===e.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(t){const e=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(t);if(null==e)return;const n=this.top;if(null===n||0===n.settings.keyboard.length)return;const i=n.settings.keyboard;"Escape"===e&&i.includes(e)?n.cancel():"Enter"===e&&i.includes(e)&&n.ok()}},class{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(t){Hn.singleton(dv,this).register(t)}},kv]);gn.createInterface((t=>t.singleton(Ev)));class Ev{constructor(t,e,n){this.ctn=t,this.p=e,this.r=n}define(t,e,n){if(!t.includes("-"))throw new Error('Invalid web-components custom element name. It must include a "-"');let i;if(null==e)throw new Error("Invalid custom element definition");if(i="function"==typeof e?Dh.isType(e)?Dh.getDefinition(e):Rh.create(Dh.generateName(),e):Rh.getOrCreate(e),i.containerless)throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");const s=(null==n?void 0:n.extends)?this.p.document.createElement(n.extends).constructor:HTMLElement,r=this.ctn,o=this.r,a=i.bindables,l=this.p;class c extends s{auInit(){if(this.auInited)return;this.auInited=!0;const t=r.createChild();t.registerResolver(l.HTMLElement,t.registerResolver(l.Element,t.registerResolver(sd,new Kn("ElementProvider",this))));const e=o.compile(i,t,{projections:null}),n=t.invoke(e.Type),s=this.auCtrl=Cu.$el(t,n,this,null,e);id(this,e.key,s)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null,0)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null,0)}adoptedCallback(){this.auInit()}attributeChangedCallback(t,e,n){this.auInit(),this.auCtrl.viewModel[t]=n}}c.observedAttributes=Object.keys(a);for(const t in a)Object.defineProperty(c.prototype,t,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[t]},set(e){this.auInited||this.auInit(),this.auCtrl.viewModel[t]=e}});return this.p.customElements.define(t,c,n),c}}Ev.inject=[bn,Sc,wu];const Tv=xl.getOrCreate(globalThis);class $v extends class{constructor(t=gn.createContainer()){if(this.container=t,this.ir=!1,this.Ge=!1,this.Xe=!1,this.Ke=void 0,this.next=void 0,this.Ye=void 0,this.Ze=void 0,t.has(ov,!0))throw new Error("AUR0768");t.registerResolver(ov,new Kn("IAurelia",this)),t.registerResolver(Xu,this.Je=new Kn("IAppRoot"))}get isRunning(){return this.ir}get isStarting(){return this.Ge}get isStopping(){return this.Xe}get root(){if(null==this.Ke){if(null==this.next)throw new Error("AUR0767");return this.next}return this.Ke}register(...t){return this.container.register(...t),this}app(t){return this.next=new td(t,this.Qe(t.host),this.container,this.Je),this}enhance(t,e){var n;const i=null!==(n=t.container)&&void 0!==n?n:this.container.createChild(),s=t.host,r=this.Qe(s),o=t.component;let a;Fl(o)?(i.registerResolver(r.HTMLElement,i.registerResolver(r.Element,i.registerResolver(sd,new Kn("ElementResolver",s)))),a=i.invoke(o)):a=o,i.registerResolver(rd,new Kn("IEventTarget",s)),e=null!=e?e:null;const l=Cu.$el(i,a,s,null,Rh.create({name:Dh.generateName(),template:s,enhance:!0}));return Xe(l.activate(l,e,2),(()=>l))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}Qe(t){let e;if(this.container.has(Sc,!1))e=this.container.get(Sc);else{if(null===t.ownerDocument.defaultView)throw new Error("AUR0769");e=new xl(t.ownerDocument.defaultView),this.container.register(Hn.instance(Sc,e))}return e}start(t=this.next){if(null==t)throw new Error("AUR0770");return this.Ye instanceof Promise?this.Ye:this.Ye=Xe(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.Je.prepare(this.Ke=t),this.Ge=!0,Xe(t.activate(),(()=>{this.ir=!0,this.Ge=!1,this.Ye=void 0,this.ts(t,"au-started",t.host)})))))}stop(t=!1){if(this.Ze instanceof Promise)return this.Ze;if(!0===this.ir){const e=this.Ke;return this.ir=!1,this.Xe=!0,this.Ze=Xe(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.Ke=void 0,this.Je.dispose(),this.Xe=!1,this.ts(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.Xe)throw new Error("AUR0771");this.container.dispose()}ts(t,e,n){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});n.dispatchEvent(i)}}{constructor(t=function(){return gn.createContainer().register(Hn.instance(Sc,Tv),rv)}()){super(t)}static start(t){return(new $v).start(t)}static app(t){return(new $v).app(t)}static enhance(t,e){return(new $v).enhance(t,e)}static register(...t){return(new $v).register(...t)}app(t){if(Dh.isType(t)){const e=Dh.getDefinition(t);let n=document.querySelector(e.name);return null===n&&(n=document.body),super.app({host:n,component:t})}return super.app(t)}}var Iv=function(t,e){return Iv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Iv(t,e)};function Rv(t,e){function n(){this.constructor=t}Iv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Ov(t){return"function"==typeof t}var Pv=!1,Lv={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,Pv=t},get useDeprecatedSynchronousErrorHandling(){return Pv}};function Mv(t){setTimeout((function(){throw t}),0)}var Uv={closed:!0,next:function(t){},error:function(t){if(Lv.useDeprecatedSynchronousErrorHandling)throw t;Mv(t)},complete:function(){}},jv=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function Bv(t){return null!==t&&"object"==typeof t}var Nv=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Fv=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,i=n._parentOrParents,s=n._ctorUnsubscribe,r=n._unsubscribe,o=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(var a=0;a<i.length;++a)i[a].remove(this);if(Ov(r)){s&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof Nv?Vv(t.errors):[t]}}if(jv(o)){a=-1;for(var l=o.length;++a<l;){var c=o[a];if(Bv(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof Nv?e=e.concat(Vv(t.errors)):e.push(t)}}}if(e)throw new Nv(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=n._parentOrParents;if(null===s)n._parentOrParents=this;else if(s instanceof t){if(s===this)return n;n._parentOrParents=[s,this]}else{if(-1!==s.indexOf(this))return n;s.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Vv(t){return t.reduce((function(t,e){return t.concat(e instanceof Nv?e.errors:e)}),[])}var Dv=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),zv=function(t){function e(n,i,s){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=Uv;break;case 1:if(!n){r.destination=Uv;break}if("object"==typeof n){n instanceof e?(r.syncErrorThrowable=n.syncErrorThrowable,r.destination=n,n.add(r)):(r.syncErrorThrowable=!0,r.destination=new qv(r,n));break}default:r.syncErrorThrowable=!0,r.destination=new qv(r,n,i,s)}return r}return Rv(e,t),e.prototype[Dv]=function(){return this},e.create=function(t,n,i){var s=new e(t,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Fv),qv=function(t){function e(e,n,i,s){var r,o=t.call(this)||this;o._parentSubscriber=e;var a=o;return Ov(n)?r=n:n&&(r=n.next,i=n.error,s=n.complete,n!==Uv&&(Ov((a=Object.create(n)).unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=r,o._error=i,o._complete=s,o}return Rv(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Lv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=Lv.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Mv(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Mv(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};Lv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Lv.useDeprecatedSynchronousErrorHandling)throw t;Mv(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!Lv.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return Lv.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Mv(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(zv),Zv=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Hv(t){return t}function Kv(t){return 0===t.length?Hv:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Wv=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,s=function(t,e,n){if(t){if(t instanceof zv)return t;if(t[Dv])return t[Dv]()}return t||e||n?new zv(t,e,n):new zv(Uv)}(t,e,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Lv.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Lv.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Lv.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,i=e.destination,s=e.isStopped;if(n||s)return!1;t=i&&i instanceof zv?i:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=Qv(e))((function(e,i){var s;s=n.subscribe((function(e){try{t(e)}catch(t){i(t),s&&s.unsubscribe()}}),i,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Zv]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Kv(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=Qv(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function Qv(t){if(t||(t=Lv.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var _v=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Gv=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return Rv(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(Fv),Xv=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return Rv(e,t),e}(zv),Yv=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Rv(e,t),e.prototype[Dv]=function(){return new Xv(this)},e.prototype.lift=function(t){var e=new Jv(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new _v;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new _v;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new _v;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new _v;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new _v;return this.hasError?(t.error(this.thrownError),Fv.EMPTY):this.isStopped?(t.complete(),Fv.EMPTY):(this.observers.push(t),new Gv(this,t))},e.prototype.asObservable=function(){var t=new Wv;return t.source=this,t},e.create=function(t,e){return new Jv(t,e)},e}(Wv),Jv=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return Rv(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):Fv.EMPTY},e}(Yv),tm=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return Rv(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _v;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(Yv);function em(t,e){if(!im(t))throw Error("Provided state is not of type StateHistory");return e>0?function(t,e){if(e<0||e>=t.future.length)return t;const{past:n,future:i,present:s}=t;return{past:[...n,s,...i.slice(0,e)],present:i[e],future:i.slice(e+1)}}(t,e-1):e<0?function(t,e){if(e<0||e>=t.past.length)return t;const{past:n,future:i,present:s}=t,r=n.slice(0,e),o=[...n.slice(e+1),s,...i];return{past:r,present:n[e],future:o}}(t,t.past.length+e):t}function nm(t,e){return{...t,past:[...t.past,t.present],present:e,future:[]}}function im(t){return void 0!==t.present&&void 0!==t.future&&void 0!==t.past&&Array.isArray(t.future)&&Array.isArray(t.past)}function sm(t,e){return function(n,i){e(n,i,t)}}const rm="aurelia-store-state";var om,am,lm;function cm(t,e,n){const i=dm.container.get(pd).localStorage;if(void 0!==i){const e=void 0!==(null==n?void 0:n.key)?n.key:rm;i.setItem(e,JSON.stringify(t))}}function hm(t,e){const n=dm.container.get(pd).localStorage;if(void 0===n)return t;const i=n.getItem(void 0===e?rm:e);if(null===i||""===i)return t;try{return JSON.parse(i)}catch(t){}return t}function um(t,e,n){var i;return(null===(i=t.logDefinitions)||void 0===i?void 0:i.hasOwnProperty(e))&&t.logDefinitions[e]&&Object.values(am).includes(t.logDefinitions[e])?t.logDefinitions[e]:n}!function(t){t.Before="before",t.After="after"}(om||(om={})),function(t){t.trace="trace",t.debug="debug",t.info="info",t.warn="warn",t.error="error"}(am||(am={})),function(t){t.StartEnd="startEnd",t.All="all"}(lm||(lm={}));const dm={container:null};class pm extends Error{constructor(t){super(`Tried to dispatch an unregistered action ${void 0!==t&&("string"==typeof t?t:t.name)}`)}}class fm extends Error{}class gm extends Error{}class vm extends Error{}let mm=class{constructor(t,e,n,i){var s,r,o,a;this.initialState=t,this.logger=e,this.t=n,this.devToolsAvailable=!1,this.actions=new Map,this.middlewares=new Map,this.dispatchQueue=[],this.options=null!=i?i:{};const l=!0===(null===(r=null===(s=this.options)||void 0===s?void 0:s.history)||void 0===r?void 0:r.undoable);this._state=new tm(t),this.state=this._state.asObservable(),!0!==(null===(a=null===(o=this.options)||void 0===o?void 0:o.devToolsOptions)||void 0===a?void 0:a.disable)&&this.setupDevTools(),l&&this.registerHistoryMethods()}registerMiddleware(t,e,n){this.middlewares.set(t,{placement:e,settings:n})}unregisterMiddleware(t){this.middlewares.has(t)&&this.middlewares.delete(t)}isMiddlewareRegistered(t){return this.middlewares.has(t)}registerAction(t,e){if(0===e.length)throw new gm("The reducer is expected to have one or more parameters, where the first will be the present state");this.actions.set(e,{type:t})}unregisterAction(t){this.actions.has(t)&&this.actions.delete(t)}isActionRegistered(t){return"string"==typeof t?void 0!==Array.from(this.actions).find((e=>e[1].type===t)):this.actions.has(t)}resetToState(t){this._state.next(t)}async dispatch(t,...e){const n=this.lookupAction(t);return n?this.queueDispatch([{reducer:n,params:e}]):Promise.reject(new pm(t))}pipe(t,...e){const n=[],i={dispatch:async()=>this.queueDispatch(n),pipe:(e,...s)=>{const r=this.lookupAction(e);if(!r)throw new pm(t);return n.push({reducer:r,params:s}),i}};return i.pipe(t,...e)}lookupAction(t){if("string"==typeof t){const e=Array.from(this.actions).find((([e,n])=>n.type===t));if(e)return e[0]}else if(this.actions.has(t))return t}async queueDispatch(t){return new Promise(((e,n)=>{this.dispatchQueue.push({actions:t,resolve:e,reject:n}),1===this.dispatchQueue.length&&this.handleQueue()}))}async handleQueue(){if(this.dispatchQueue.length>0){const t=this.dispatchQueue[0];try{await this.internalDispatch(t.actions),t.resolve()}catch(e){t.reject(e)}this.dispatchQueue.shift(),this.handleQueue()}}async internalDispatch(t){var e;const n=t.find((t=>!this.actions.has(t.reducer)));if(n)throw new pm(n.reducer);dm.container.get(pd).performance.mark("dispatch-start");const i=t.map((t=>({type:this.actions.get(t.reducer).type,params:t.params,reducer:t.reducer}))),s={name:i.map((t=>t.type)).join("->"),params:i.reduce(((t,e)=>t.concat(e.params)),[]),pipedActions:i.map((t=>({name:t.type,params:t.params})))};this.options.logDispatchedActions&&this.logger[um(this.options,"dispatchedActions",am.info)](`Dispatching: ${s.name}`);const r=await this.executeMiddlewares(this._state.getValue(),om.Before,s);if(!1===r)return dm.container.get(pd).performance.clearMarks(),void dm.container.get(pd).performance.clearMeasures();let o=r;for(const t of i){if(o=await t.reducer(o,...t.params),!1===o)return dm.container.get(pd).performance.clearMarks(),void dm.container.get(pd).performance.clearMeasures();if(dm.container.get(pd).performance.mark(`dispatch-after-reducer-${t.type}`),!o&&"object"!=typeof o)throw new vm("The reducer has to return a new state")}let a=await this.executeMiddlewares(o,om.After,s);if(!1===a)return dm.container.get(pd).performance.clearMarks(),void dm.container.get(pd).performance.clearMeasures();if(im(a)&&(null===(e=this.options.history)||void 0===e?void 0:e.limit)&&(a=function(t,e){return im(t)&&(t.past.length>e&&(t.past=t.past.slice(t.past.length-e)),t.future.length>e&&(t.future=t.future.slice(0,e))),t}(a,this.options.history.limit)),this._state.next(a),dm.container.get(pd).performance.mark("dispatch-end"),this.options.measurePerformance===lm.StartEnd){dm.container.get(pd).performance.measure("startEndDispatchDuration","dispatch-start","dispatch-end");const t=dm.container.get(pd).performance.getEntriesByName("startEndDispatchDuration");this.logger[um(this.options,"performanceLog",am.info)](`Total duration ${t[0].duration} of dispatched action ${s.name}:`,t)}else if(this.options.measurePerformance===lm.All){const t=dm.container.get(pd).performance.getEntriesByType("mark"),e=t[t.length-1].startTime-t[0].startTime;this.logger[um(this.options,"performanceLog",am.info)](`Total duration ${e} of dispatched action ${s.name}:`,t)}dm.container.get(pd).performance.clearMarks(),dm.container.get(pd).performance.clearMeasures(),this.updateDevToolsState({type:s.name,params:s.params},a)}executeMiddlewares(t,e,n){return Array.from(this.middlewares).filter((t=>t[1].placement===e)).reduce((async(t,i,s)=>{try{const s=await i[0](await t,this._state.getValue(),i[1].settings,n);return!1!==s&&(s||await t)}catch(e){if(this.options.propagateError)throw e;return await t}finally{dm.container.get(pd).performance.mark(`dispatch-${e}-${i[0].name}`)}}),t)}setupDevTools(){this.t.__REDUX_DEVTOOLS_EXTENSION__&&(this.logger[um(this.options,"devToolsStatus",am.debug)]("DevTools are available"),this.devToolsAvailable=!0,this.devTools=this.t.__REDUX_DEVTOOLS_EXTENSION__.connect(this.options.devToolsOptions),this.devTools.init(this.initialState),this.devTools.subscribe((t=>{var e,n;if(this.logger[um(this.options,"devToolsStatus",am.debug)](`DevTools sent change ${t.type}`),"ACTION"!==t.type||void 0===t.payload){if("DISPATCH"===t.type&&t.payload)switch(t.payload.type){case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return void this._state.next(JSON.parse(t.state));case"COMMIT":return void this.devTools.init(this._state.getValue());case"RESET":return this.devTools.init(this.initialState),void this.resetToState(this.initialState);case"ROLLBACK":{const e=JSON.parse(t.state);return this.resetToState(e),void this.devTools.init(e)}}}else{const i=Array.from(this.actions).find((function([e]){var n;return e.name===(null===(n=t.payload)||void 0===n?void 0:n.name)})),s=null!==(n=this.lookupAction(null===(e=t.payload)||void 0===e?void 0:e.name))&&void 0!==n?n:null==i?void 0:i[0];if(!s)throw new fm("Tried to remotely dispatch an unregistered action");if(!t.payload.args||t.payload.args.length<1)throw new fm("No action arguments provided");this.dispatch(s,...t.payload.args.slice(1).map((t=>JSON.parse(t)))).catch((()=>{throw new fm("Issue when trying to dispatch an action through devtools")}))}})))}updateDevToolsState(t,e){this.devToolsAvailable&&this.devTools&&this.devTools.send(t,e)}registerHistoryMethods(){this.registerAction("jump",em)}};mm=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}([sm(1,ai),sm(2,pd)],mm);const bm=t=>t.state;function wm(t){const e={selector:"function"==typeof t?t:bm,...t};function n(t,e){const n=e(t);return n instanceof Wv?n:t.state}function i(){const t="object"==typeof e.selector,n={[e.target||"state"]:e.selector||bm};return Object.entries({...t?e.selector:n}).map((([n,i])=>{var s,r;return{targets:e.target&&t?[e.target,n]:[n],selector:i,changeHandlers:{[null!==(s=e.onChanged)&&void 0!==s?s:""]:1,[`${null!==(r=e.target)&&void 0!==r?r:n}Changed`]:e.target?0:1,propertyChanged:0}}}))}return function(e){const s="object"==typeof t&&t.setup?e.prototype[t.setup]:e.prototype.binding,r="object"==typeof t&&t.teardown?e.prototype[t.teardown]:e.prototype.unbinding;e.prototype["object"==typeof t&&void 0!==t.setup?t.setup:"binding"]=function(){if("object"==typeof t&&"string"==typeof t.onChanged&&!(t.onChanged in this))throw new Error("Provided onChanged handler does not exist on target VM");const e=Cu.getCached(this)?Cu.getCached(this).container.get(mm):dm.container.get(mm);if(this._stateSubscriptions=i().map((t=>n(e,t.selector).subscribe((e=>{const n=t.targets.length-1,i=t.targets.reduce(((t={},e)=>t[e]),this);Object.entries(t.changeHandlers).forEach((([s,r])=>{s in this&&this[s](...[t.targets[n],e,i].slice(r,3))})),t.targets.reduce(((t,i,s)=>(t[i]=s===n?e:t[i]||{},t[i])),this)})))),s)return s.apply(this,arguments)},e.prototype["object"==typeof t&&t.teardown?t.teardown:"unbinding"]=function(){if(this._stateSubscriptions&&Array.isArray(this._stateSubscriptions)&&this._stateSubscriptions.forEach((t=>{t instanceof Fv&&!1===t.closed&&t.unsubscribe()})),r)return r.apply(this,arguments)}}}const ym={withInitialState(t){return Reflect.set(this,"state",t),this},withOptions(t){return Reflect.set(this,"options",t),this},register(t){var e;dm.container=t;const n=Reflect.get(this,"state"),i=Reflect.get(this,"options"),s=t.get(ai),r=t.get(pd);if(!n)throw new Error("initialState must be provided via withInitialState builder method");let o=n;return(null===(e=null==i?void 0:i.history)||void 0===e?void 0:e.undoable)&&!im(n)&&(o={past:[],present:n,future:[]}),Hn.instance(mm,new mm(o,s,r,i)).register(t),t}};function xm(t){return"object"==typeof t&&null!==t||"function"==typeof t}let km=new WeakMap;function Sm(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function Cm(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function Am(t,e,n){let i=km.get(t);if(void 0===i){if(!n)return;i=new Map,km.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function Em(t,e,n){const i=Am(e,n,!1);return void 0!==i&&i.has(t)}function Tm(t,e,n){if(Em(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&Tm(t,i,n)}function $m(t,e,n){const i=Am(e,n,!1);if(void 0!==i)return i.get(t)}function Im(t,e,n){if(Em(t,e,n))return $m(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?Im(t,i,n):void 0}function Rm(t,e){const n=[],i=Am(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function Om(t,e){const n=Rm(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=Om(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}const Pm={define:function(t,e,n,i){if(!xm(n))throw Sm("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return function(t,e,n,i){Am(n,i,!0).set(t,e)}(t,e,n,Cm(i))},has:function(t,e,n){if(!xm(e))throw Sm("Metadata.has",[t,e,n],"target",e,"Object or Function");return Tm(t,e,Cm(n))},hasOwn:function(t,e,n){if(!xm(e))throw Sm("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return Em(t,e,Cm(n))},get:function(t,e,n){if(!xm(e))throw Sm("Metadata.get",[t,e,n],"target",e,"Object or Function");return Im(t,e,Cm(n))},getOwn:function(t,e,n){if(!xm(e))throw Sm("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return $m(t,e,Cm(n))},getKeys:function(t,e){if(!xm(t))throw Sm("Metadata.getKeys",[t,e],"target",t,"Object or Function");return Om(t,Cm(e))},getOwnKeys:function(t,e){if(!xm(t))throw Sm("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return Rm(t,Cm(e))},delete:function(t,e,n){if(!xm(e))throw Sm("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=Am(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,Cm(n))}};class Lm{constructor(t,e,n){this.path=t,this.caseSensitive=e,this.handler=n}}class Mm{constructor(t,e){this.route=t,this.paramNames=e}}class Um{constructor(t,e){this.endpoint=t,this.params=e}}class jm{constructor(t,e,n,i){var s;this.chars=t,this.states=e,this.skippedStates=n,this.result=i,this.head=e[e.length-1],this.endpoint=null===(s=this.head)||void 0===s?void 0:s.endpoint}advance(t){const{chars:e,states:n,skippedStates:i,result:s}=this;let r=null,o=0;const a=n[n.length-1];function l(c,h){if(c.isMatch(t)&&(1==++o?r=c:s.add(new jm(e.concat(t),n.concat(c),null===h?i:i.concat(h),s))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw new Error(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw new Error("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)l(e,c)}}if(a.isDynamic&&l(a,null),null!==a.nextStates)for(const t of a.nextStates)l(t,null);null!==r&&(n.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&s.remove(this)}finalize(){!function t(e,n){const i=n.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const n of i)if(n.isOptional&&null!==n.endpoint){if(e.push(n),null!==n.nextStates)for(const i of n.nextStates)t(e,i);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:n}=this,i={};for(const t of n.paramNames)i[t]=void 0;for(let n=0,s=t.length;n<s;++n){const s=t[n];if(s.isDynamic){const t=s.segment.name;void 0===i[t]?i[t]=e[n]:i[t]+=e[n]}}return i}compareTo(t){const e=this.states,n=t.states;for(let t=0,i=0,s=Math.max(e.length,n.length);t<s;++t){let s=e[t];if(void 0===s)return 1;let r=n[i];if(void 0===r)return-1;let o=s.segment,a=r.segment;if(null===o){if(null===a){++i;continue}if(void 0===(s=e[++t]))return 1;o=s.segment}else if(null===a){if(void 0===(r=n[++i]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,s=t.skippedStates,r=i.length,o=s.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=i[t],n=s[t];if(e.length<n.length)return 1;if(e.length>n.length)return-1}return 0}}function Bm(t){return null!==t.head.endpoint}function Nm(t,e){return t.compareTo(e)}class Fm{constructor(t){this.candidates=[],this.candidates=[new jm([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(Bm);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(Nm),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const n of e)n.advance(t)}}class Vm{constructor(t,e,n){switch(this.prevState=t,this.segment=e,this.value=n,this.nextStates=null,this.endpoint=null,null==e?void 0:e.kind){case 2:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let n,i=this.nextStates;return null===i?(n=void 0,i=this.nextStates=[]):n=null===t?i.find((t=>t.value===e)):i.find((e=>{var n;return null===(n=e.segment)||void 0===n?void 0:n.equals(t)})),void 0===n&&i.push(n=new Vm(this,t,e)),n}setEndpoint(t){if(null!==this.endpoint)throw new Error(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(null==e?void 0:e.kind){case 2:return!this.value.includes(t);case 1:return!0;case 3:case void 0:return this.value.includes(t)}}}function Dm(t){return t.length>0}var zm;!function(t){t[t.star=1]="star",t[t.dynamic=2]="dynamic",t[t.static=3]="static"}(zm||(zm={}));class qm{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 3}appendTo(t){const{value:e,value:{length:n}}=this;if(this.caseSensitive)for(let i=0;i<n;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<n;++i){const n=e.charAt(i);t=t.append(this,n.toUpperCase()+n.toLowerCase())}return t}equals(t){return 3===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class Zm{constructor(t,e){this.name=t,this.optional=e}get kind(){return 2}appendTo(t){return t.append(this,"/")}equals(t){return 2===t.kind&&t.optional===this.optional&&t.name===this.name}}class Hm{constructor(t){this.name=t}get kind(){return 1}appendTo(t){return t.append(this,"")}equals(t){return 1===t.kind&&t.name===this.name}}const Km=Object.prototype.hasOwnProperty,Wm=Reflect.defineProperty,Qm=t=>"function"==typeof t,_m=t=>"string"==typeof t;function Gm(t,e,n){return Wm(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function Xm(t,e,n,i=!1){!i&&Km.call(t,e)||Gm(t,e,n)}const Ym=()=>Object.create(null),Jm=Pm.getOwn,tb=Pm.hasOwn,eb=Pm.define,nb=on.annotation.keyFor,ib=on.resource.keyFor,sb=on.resource.appendTo;function rb(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Hn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class ob{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Km.call(t,e)&&(this[e]=t[e])}static create(t,e){return new ob(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class ab{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new ab(null,t,null==e?lb.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new ab(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new ab(t,e,lb.create(e),!1)}}class lb{constructor(t){this.bindingContext=t}static create(t){return new lb(t)}}const cb=gn.createInterface("ISignaler",(t=>t.singleton(hb)));class hb{constructor(){this.signals=Ym()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var ub;!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(ub||(ub={}));class db{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;_m(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===fb;return new db(e,We(vb(e,"name"),n),Ke(vb(e,"aliases"),i.aliases,e.aliases),mb.keyFrom(n),ln("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Hn.singleton(n,e).register(t);break;case 2:Hn.instance(n,new pb(t,e)).register(t)}Hn.aliasTo(n,e).register(t),rb(i,mb,n,t)}}class pb{constructor(t,e){this.ctn=t,this.Type=e,this.deps=gn.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class fb{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{Wm(fb.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const gb=ib("binding-behavior"),vb=(t,e)=>Jm(nb(e),t),mb=Object.freeze({name:gb,keyFrom:t=>`${gb}:${t}`,isType:t=>Qm(t)&&tb(gb,t),define(t,e){const n=db.create(t,e);return eb(gb,n,n.Type),eb(gb,n,n),sb(e,gb),n.Type},getDefinition(t){const e=Jm(gb,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){eb(nb(e),n,t)},getAnnotation:vb});class bb{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return _m(t)?(n=t,i={name:n}):(n=t.name,i=t),new bb(e,We(yb(e,"name"),n),Ke(yb(e,"aliases"),i.aliases,e.aliases),xb.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Hn.singleton(n,e).register(t),Hn.aliasTo(n,e).register(t),rb(i,xb,n,t)}}const wb=ib("value-converter"),yb=(t,e)=>Jm(nb(e),t),xb=Object.freeze({name:wb,keyFrom:t=>`${wb}:${t}`,isType:t=>Qm(t)&&tb(wb,t),define(t,e){const n=bb.create(t,e);return eb(wb,n,n.Type),eb(wb,n,n),sb(e,wb),n.Type},getDefinition(t){const e=Jm(wb,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){eb(nb(e),n,t)},getAnnotation:yb});var kb;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(kb||(kb={}));class Sb{constructor(){this.text=""}static unparse(t){const e=new Sb;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",_m(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class Cb{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class Ab{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=mb.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof pb)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(Qm(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return Sb.unparse(this)}}class Eb{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=xb.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(cb);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(cb);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return Sb.unparse(this)}}class Tb{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return Sb.unparse(this)}}class $b{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return Sb.unparse(this)}}class Ib{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return Sb.unparse(this)}}Ib.$this=new Ib(0),Ib.$parent=new Ib(1);class Rb{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=ob.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=ob.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return Sb.unparse(this)}}class Ob{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return Sb.unparse(this)}}class Pb{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return Sb.unparse(this)}}class Lb{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=ob.get(e,this.name,this.ancestor,t),o=Xb(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return Sb.unparse(this)}}class Mb{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=Xb(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return Sb.unparse(this)}}class Ub{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(Qm(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return Sb.unparse(this)}}class jb{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!Qm(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(Ue(s)||Ue(r))return(s||0)+(r||0);if(je(s)||je(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return Sb.unparse(this)}}class Bb{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return Sb.unparse(this)}}class Nb{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return Sb.unparse(this)}}Nb.$undefined=new Nb(void 0),Nb.$null=new Nb(null),Nb.$true=new Nb(!0),Nb.$false=new Nb(!1),Nb.$empty=new Nb("");class Fb{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return Sb.unparse(this)}}Fb.$empty=new Fb(Gn);class Vb{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return Sb.unparse(this)}}Vb.$empty=new Vb(Gn,Gn);class Db{constructor(t,e=Gn){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return Sb.unparse(this)}}Db.$empty=new Db([""]);class zb{constructor(t,e,n,i=Gn){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!Qm(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return Sb.unparse(this)}}class qb{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return Sb.unparse(this)}}class Zb{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return Sb.unparse(this)}}class Hb{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return Sb.unparse(this)}}const Kb=Object.prototype.toString;class Wb{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(Kb.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${Kb.call(e)}`)}}iterate(t,e,n){switch(Kb.call(e)){case"[object Array]":return Yb(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;Yb(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;Yb(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;Yb(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${Kb.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return Sb.unparse(this)}}class Qb{constructor(t,e=Gn){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return Sb.unparse(this)}}class _b{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,ab.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return Sb.unparse(this)}}class Gb{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,ab.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return Sb.unparse(this)}}function Xb(t,e,n){const i=null==e?null:e[n];if(Qm(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function Yb(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}var Jb,tw,ew,nw,iw,sw;function rw(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function ow(t){return null==t?aw:aw(t)}function aw(t){const e=t.prototype;Wm(e,"subs",{get:cw}),Xm(e,"subscribe",hw),Xm(e,"unsubscribe",uw)}gn.createInterface("ICoercionConfiguration"),function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(Jb||(Jb={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(tw||(tw={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(ew||(ew={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(nw||(nw={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(iw||(iw={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(sw||(sw={}));class lw{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function cw(){return Gm(this,"subs",new lw)}function hw(t){return this.subs.add(t)}function uw(t){return this.subs.remove(t)}function dw(t){return null==t?pw:pw(t)}function pw(t){const e=t.prototype;Wm(e,"queue",{get:gw})}class fw{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(vw)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function gw(){return fw.instance}function vw(t,e,n){n.delete(t),t.flush()}fw.instance=new fw;class mw{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&Me(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){kw=this.h,this.h=this.v,this.subs.notify(this.v,kw,this.f)}}class bw{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){kw=this.h,this.h=this.v,this.subs.notify(this.v,kw,this.f)}}function ww(t){const e=t.prototype;Xm(e,"subscribe",yw,!0),Xm(e,"unsubscribe",xw,!0),dw(t),ow(t)}function yw(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function xw(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let kw;ww(mw),ww(bw);const Sw=new WeakMap;function Cw(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Aw(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function Ew(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function Tw(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,b,w,y,x,k,S,C=0,A=0;for(;;){if(i-n<=10)return void Ew(t,e,n,i,s);C=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[C],h=e[C],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,b=n+1,w=i-1,t[C]=t[b],e[C]=e[b],t[b]=v,e[b]=m;t:for(A=b+1;A<w;A++)if(y=t[A],x=e[A],k=s(y,v),k<0)t[A]=t[b],e[A]=e[b],t[b]=y,e[b]=x,b++;else if(k>0){do{if(w--,w==A)break t;S=t[w],k=s(S,v)}while(k>0);t[A]=t[w],e[A]=e[w],t[w]=y,e[w]=x,k<0&&(y=t[A],x=e[A],t[A]=t[b],e[A]=e[b],t[b]=y,e[b]=x,b++)}i-w<b-n?(Tw(t,e,w,i,s),i=b):(Tw(t,e,n,b,s),n=w)}}const $w=Array.prototype,Iw=$w.push,Rw=$w.unshift,Ow=$w.pop,Pw=$w.shift,Lw=$w.splice,Mw=$w.reverse,Uw=$w.sort,jw=["push","unshift","pop","shift","splice","reverse","sort"],Bw={push:function(...t){const e=Sw.get(this);if(void 0===e)return Iw.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=Sw.get(this);if(void 0===e)return Rw.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;Rw.apply(e.indexMap,i);const r=Rw.apply(this,t);return e.notify(),r},pop:function(){const t=Sw.get(this);if(void 0===t)return Ow.call(this);const e=t.indexMap,n=Ow.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),Ow.call(e),t.notify(),n},shift:function(){const t=Sw.get(this);if(void 0===t)return Pw.call(this);const e=t.indexMap,n=Pw.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),Pw.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=Sw.get(this);if(void 0===i)return Lw.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;Lw.call(a,e,n,...i)}else Lw.apply(a,t);const h=Lw.apply(this,t);return i.notify(),h},reverse:function(){const t=Sw.get(this);if(void 0===t)return Mw.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=Sw.get(this);if(void 0===e)return Uw.call(this,t),this;const n=this.length;if(n<2)return this;Tw(this,e.indexMap,0,n,Aw);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&Qm(t)||(t=Cw),Tw(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of jw)Wm(Bw[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Nw=!1;class Fw{constructor(t){this.type=18,Nw||(Nw=!0,function(){for(const t of jw)!0!==$w[t].observing&&Gm($w,t,Bw[t])}()),this.indexObservers={},this.collection=t,this.indexMap=rw(t.length),this.lenObs=void 0,Sw.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=rw(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new mw(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new Vw(this,t)}}class Vw{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Dw(t){let e=Sw.get(t);return void 0===e&&(e=new Fw(t)),e}ow(Fw),ow(Vw);const zw=new WeakMap,qw=Set.prototype,Zw=qw.add,Hw=qw.clear,Kw=qw.delete,Ww=["add","clear","delete"],Qw={add:function(t){const e=zw.get(this);if(void 0===e)return Zw.call(this,t),this;const n=this.size;return Zw.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=zw.get(this);if(void 0===t)return Hw.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Hw.call(this),e.length=0,t.notify()}},delete:function(t){const e=zw.get(this);if(void 0===e)return Kw.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Kw.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},_w={writable:!0,enumerable:!1,configurable:!0};for(const t of Ww)Wm(Qw[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Gw=!1;class Xw{constructor(t){this.type=34,Gw||(Gw=!0,function(){for(const t of Ww)!0!==qw[t].observing&&Wm(qw,t,{..._w,value:Qw[t]})}()),this.collection=t,this.indexMap=rw(t.size),this.lenObs=void 0,zw.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=rw(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new bw(this)}}function Yw(t){let e=zw.get(t);return void 0===e&&(e=new Xw(t)),e}ow(Xw);const Jw=new WeakMap,ty=Map.prototype,ey=ty.set,ny=ty.clear,iy=ty.delete,sy=["set","clear","delete"],ry={set:function(t,e){const n=Jw.get(this);if(void 0===n)return ey.call(this,t,e),this;const i=this.get(t),s=this.size;if(ey.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=Jw.get(this);if(void 0===t)return ny.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;ny.call(this),e.length=0,t.notify()}},delete:function(t){const e=Jw.get(this);if(void 0===e)return iy.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=iy.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},oy={writable:!0,enumerable:!1,configurable:!0};for(const t of sy)Wm(ry[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ay=!1;class ly{constructor(t){this.type=66,ay||(ay=!0,function(){for(const t of sy)!0!==ty[t].observing&&Wm(ty,t,{...oy,value:ry[t]})}()),this.collection=t,this.indexMap=rw(t.size),this.lenObs=void 0,Jw.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=rw(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new bw(this)}}function cy(t){let e=Jw.get(t);return void 0===e&&(e=new ly(t)),e}function hy(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function uy(){return Gm(this,"obs",new vy(this))}function dy(t){let e;if(t instanceof Array)e=Dw(t);else if(t instanceof Set)e=Yw(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=cy(t)}this.obs.add(e)}function py(t){this.obs.add(t)}function fy(){throw new Error("AUR2011:handleChange")}function gy(){throw new Error("AUR2012:handleCollectionChange")}ow(ly);class vy{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(by,this),this.count=this.o.size}clearAll(){this.o.forEach(my,this),this.o.clear(),this.count=0}}function my(t,e){e.unsubscribe(this)}function by(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function wy(t){const e=t.prototype;return Xm(e,"observe",hy,!0),Xm(e,"observeCollection",dy,!0),Xm(e,"subscribeTo",py,!0),Wm(e,"obs",{get:uy}),Xm(e,"handleChange",fy),Xm(e,"handleCollectionChange",gy),t}function yy(t){return null==t?wy:wy(t)}wy(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}}),gn.createInterface("IExpressionParser",(t=>t.singleton(xy)));class xy{constructor(){this.u=Ym(),this.A=Ym(),this.U=Ym()}parse(t,e){let n;switch(e){case 16:return new Cb(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return Nb.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return My.ip=t,My.length=t.length,My.index=0,My.O=t.charCodeAt(0),Uy(My,0,61,void 0===e?8:e)}}var ky,Sy,Cy,Ay;function Ey(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(ky||(ky={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(Sy||(Sy={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(Cy||(Cy={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(Ay||(Ay={}));const Ty=Nb.$false,$y=Nb.$true,Iy=Nb.$null,Ry=Nb.$undefined,Oy=Ib.$this,Py=Ib.$parent;var Ly;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(Ly||(Ly={}));const My=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function Uy(t,e,n,i){if(16===i)return new Cb(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),By(t);const i=Uy(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(Ey(Ny(t)));break;default:s+=String.fromCharCode(t.O)}Ny(t)}return n.length?(e.push(s),new Qb(e,n)):null}(t);if(By(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=Zy[63&t.$];By(t),s=new Bb(n,Uy(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(By(t),e++,!zy(t,16393)){if(524288&t.$){const t=511&e;s=0===t?Oy:1===t?Py:new Ib(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new Hb(t.L):(s=new Rb(t.L,511&e),e=1024),t.R=!0,By(t);break;case 3076:t.R=!1,By(t),s=Oy,e=512;break;case 671751:By(t),s=Uy(t,0,62,i),qy(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new _b(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(By(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return qy(t,1835022),n;function o(){""!==i?(e.push(new Gb(new Ob(Oy,i),new Pb(Oy,new Nb(r++)),void 0)),i=""):r++}}(t):function(t,e,n){By(t);const i=new Array;for(;1835022!==t.$;)if(zy(t,1572876)){if(i.push(Ry),1835022===t.$)break}else{if(i.push(Uy(t,e,62,-3&n)),!zy(t,1572876))break;if(1835022===t.$)break}return qy(t,1835022),2&n?new qb(i):(t.R=!1,new Fb(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(By(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)By(t),qy(t,1572879),i.push(Uy(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;By(t),zy(t,1572879)?i.push(Uy(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(Uy(t,0,450,-3&e)))}}1835018!==t.$&&qy(t,1572876)}return qy(t,1835018),2&e?new Zb(n,i):(t.R=!1,new Vb(n,i))}(t,i),e=0;break;case 540714:s=new Db([t.L]),t.R=!1,By(t),e=0;break;case 540715:s=jy(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new Nb(t.L),t.R=!1,By(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=Zy[63&t.$],t.R=!1,By(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);By(t);const n=e,i=Uy(t,0,61,0);return new Wb(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,By(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,By(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new Rb(r,s.ancestor):new Ob(s,r);continue;case 671757:t.R=!0,By(t),e=4096,s=new Pb(s,Uy(t,0,62,i)),qy(t,1835022);break;case 671751:for(t.R=!1,By(t);1835019!==t.$&&(n.push(Uy(t,0,62,i)),zy(t,1572876)););qy(t,1835019),s=1024&e?new Lb(r,n,s.ancestor):2048&e?new Mb(s,r,n):new Ub(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new zb(o,o,s),By(t);break;case 540715:s=jy(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;By(t),s=new jb(Zy[63&r],s,Uy(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(zy(t,1572880)){const n=Uy(t,e,62,i);qy(t,1572879),s=new $b(s,n,Uy(t,e,62,i)),t.R=!1}if(62<n)return s;if(zy(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new Tb(s,Uy(t,e,62,i))}if(61<n)return s;for(;zy(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;By(t);const r=new Array;for(;zy(t,1572879);)r.push(Uy(t,e,62,i));s=new Eb(s,n,r)}for(;zy(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;By(t);const r=new Array;for(;zy(t,1572879);)r.push(Uy(t,e,62,i));s=new Ab(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function jy(t,e,n,i,s){const r=[t.L];qy(t,540715);const o=[Uy(t,e,62,n)];for(;540714!==(t.$=Dy(t));)r.push(t.L),qy(t,540715),o.push(Uy(t,e,62,n));return r.push(t.L),t.R=!1,s?(By(t),new zb(r,r,i,o)):(By(t),new Db(r,o))}function By(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=Yy[t.O](t)))return;t.$=1572864}function Ny(t){return t.O=t.ip.charCodeAt(++t.index)}function Fy(t,e){let n=t.O;if(!1===e){do{n=Ny(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=Ny(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=Ny(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function Vy(t){let e=!0,n="";for(;96!==Ny(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(Ey(Ny(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return Ny(t),t.L=n,e?540714:540715}function Dy(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,Vy(t)}function zy(t,e){return t.$===e&&(By(t),!0)}function qy(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);By(t)}const Zy=[Ty,$y,Iy,Ry,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Hy=Ym();Hy.true=2049,Hy.null=2050,Hy.false=2048,Hy.undefined=2051,Hy.$this=3076,Hy.$parent=3078,Hy.in=1640799,Hy.instanceof=1640800,Hy.typeof=34851,Hy.void=34852,Hy.of=1051180;const Ky=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Wy=[48,58];function Qy(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function _y(t){return e=>(Ny(e),t)}const Gy=t=>{throw new Error(`AUR0168:${t.ip}`)};Gy.notMapped=!0,Qy(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const Xy=new Uint8Array(65535);Qy(Xy,null,Ky,1),Qy(Xy,null,Wy,1);const Yy=new Array(65535);Yy.fill(Gy,0,65535),Qy(Yy,null,[0,33,127,161],(t=>(Ny(t),null))),Qy(Yy,null,Ky,(function(t){for(;Xy[Ny(t)];);const e=Hy[t.L=t.P];return void 0===e?1024:e})),Qy(Yy,null,Wy,(t=>Fy(t,!1))),Yy[34]=Yy[39]=t=>function(t){const e=t.O;Ny(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),Ny(t),n=Ey(t.O),Ny(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);Ny(t)}const r=t.ip.slice(s,t.index);Ny(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),Yy[96]=t=>Vy(t),Yy[33]=t=>61!==Ny(t)?32809:61!==Ny(t)?1638680:(Ny(t),1638682),Yy[61]=t=>61!==Ny(t)?1048616:61!==Ny(t)?1638679:(Ny(t),1638681),Yy[38]=t=>38!==Ny(t)?1572883:(Ny(t),1638614),Yy[124]=t=>124!==Ny(t)?1572884:(Ny(t),1638549),Yy[46]=t=>Ny(t)<=57&&t.O>=48?Fy(t,!0):16393,Yy[60]=t=>61!==Ny(t)?1638747:(Ny(t),1638749),Yy[62]=t=>61!==Ny(t)?1638748:(Ny(t),1638750),Yy[37]=_y(1638886),Yy[40]=_y(671751),Yy[41]=_y(1835019),Yy[42]=_y(1638885),Yy[43]=_y(623009),Yy[44]=_y(1572876),Yy[45]=_y(623010),Yy[47]=_y(1638887),Yy[58]=_y(1572879),Yy[63]=_y(1572880),Yy[91]=_y(671757),Yy[93]=_y(1835022),Yy[123]=_y(131080),Yy[125]=_y(1835018);let Jy=null;const tx=[];let ex=!1;function nx(){return Jy}function ix(t){if(null==t)throw new Error("AUR0206");if(null==Jy)return Jy=t,tx[0]=Jy,void(ex=!0);if(Jy===t)throw new Error("AUR0207");tx.push(t),Jy=t,ex=!0}function sx(t){if(null==t)throw new Error("AUR0208");if(Jy!==t)throw new Error("AUR0209");tx.pop(),Jy=tx.length>0?tx[tx.length-1]:null,ex=null!=Jy}Object.freeze({get current(){return Jy},get connecting(){return ex},enter:ix,exit:sx,pause:function(){ex=!1},resume:function(){ex=!0}});const rx=Reflect.get,ox=Object.prototype.toString,ax=new WeakMap;function lx(t){switch(ox.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const cx="__raw__";function hx(t){return lx(t)?ux(t):t}function ux(t){var e;return null!==(e=ax.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?vx:t instanceof Map||t instanceof Set?Fx:gx,n=new Proxy(t,e);return ax.set(t,n),n}(t)}function dx(t){var e;return null!==(e=t.__raw__)&&void 0!==e?e:t}function px(t){return lx(t)&&t.__raw__||t}function fx(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const gx={get(t,e,n){if(e===cx)return t;const i=nx();return!ex||fx(e)||null==i?rx(t,e,n):(i.observe(t,e),hx(rx(t,e,n)))}},vx={get(t,e,n){if(e===cx)return t;const i=nx();if(!ex||fx(e)||null==i)return rx(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return mx;case"includes":return yx;case"indexOf":return xx;case"lastIndexOf":return kx;case"every":return bx;case"filter":return wx;case"find":return Cx;case"findIndex":return Sx;case"flat":return Ax;case"flatMap":return Ex;case"join":return Tx;case"push":return Ix;case"pop":return $x;case"reduce":return Bx;case"reduceRight":return Nx;case"reverse":return Lx;case"shift":return Rx;case"unshift":return Ox;case"slice":return jx;case"splice":return Px;case"some":return Mx;case"sort":return Ux;case"keys":return Wx;case"values":case Symbol.iterator:return Qx;case"entries":return _x}return i.observe(t,e),hx(rx(t,e,n))},ownKeys(t){var e;return null===(e=nx())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function mx(t,e){var n;const i=dx(this),s=i.map(((n,i)=>px(t.call(e,hx(n),i,this))));return null===(n=nx())||void 0===n||n.observeCollection(i),hx(s)}function bx(t,e){var n;const i=dx(this),s=i.every(((n,i)=>t.call(e,hx(n),i,this)));return null===(n=nx())||void 0===n||n.observeCollection(i),s}function wx(t,e){var n;const i=dx(this),s=i.filter(((n,i)=>px(t.call(e,hx(n),i,this))));return null===(n=nx())||void 0===n||n.observeCollection(i),hx(s)}function yx(t){var e;const n=dx(this),i=n.includes(px(t));return null===(e=nx())||void 0===e||e.observeCollection(n),i}function xx(t){var e;const n=dx(this),i=n.indexOf(px(t));return null===(e=nx())||void 0===e||e.observeCollection(n),i}function kx(t){var e;const n=dx(this),i=n.lastIndexOf(px(t));return null===(e=nx())||void 0===e||e.observeCollection(n),i}function Sx(t,e){var n;const i=dx(this),s=i.findIndex(((n,i)=>px(t.call(e,hx(n),i,this))));return null===(n=nx())||void 0===n||n.observeCollection(i),s}function Cx(t,e){var n;const i=dx(this),s=i.find(((e,n)=>t(hx(e),n,this)),e);return null===(n=nx())||void 0===n||n.observeCollection(i),hx(s)}function Ax(){var t;const e=dx(this);return null===(t=nx())||void 0===t||t.observeCollection(e),hx(e.flat())}function Ex(t,e){var n;const i=dx(this);return null===(n=nx())||void 0===n||n.observeCollection(i),ux(i.flatMap(((n,i)=>hx(t.call(e,hx(n),i,this)))))}function Tx(t){var e;const n=dx(this);return null===(e=nx())||void 0===e||e.observeCollection(n),n.join(t)}function $x(){return hx(dx(this).pop())}function Ix(...t){return dx(this).push(...t)}function Rx(){return hx(dx(this).shift())}function Ox(...t){return dx(this).unshift(...t)}function Px(...t){return hx(dx(this).splice(...t))}function Lx(...t){var e;const n=dx(this),i=n.reverse();return null===(e=nx())||void 0===e||e.observeCollection(n),hx(i)}function Mx(t,e){var n;const i=dx(this),s=i.some(((n,i)=>px(t.call(e,hx(n),i,this))));return null===(n=nx())||void 0===n||n.observeCollection(i),s}function Ux(t){var e;const n=dx(this),i=n.sort(t);return null===(e=nx())||void 0===e||e.observeCollection(n),hx(i)}function jx(t,e){var n;const i=dx(this);return null===(n=nx())||void 0===n||n.observeCollection(i),ux(i.slice(t,e))}function Bx(t,e){var n;const i=dx(this),s=i.reduce(((e,n,i)=>t(e,hx(n),i,this)),e);return null===(n=nx())||void 0===n||n.observeCollection(i),hx(s)}function Nx(t,e){var n;const i=dx(this),s=i.reduceRight(((e,n,i)=>t(e,hx(n),i,this)),e);return null===(n=nx())||void 0===n||n.observeCollection(i),hx(s)}const Fx={get(t,e,n){if(e===cx)return t;const i=nx();if(!ex||fx(e)||null==i)return rx(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Hx;case"delete":return Kx;case"forEach":return Vx;case"add":if(t instanceof Set)return Zx;break;case"get":if(t instanceof Map)return zx;break;case"set":if(t instanceof Map)return qx;break;case"has":return Dx;case"keys":return Wx;case"values":return Qx;case"entries":return _x;case Symbol.iterator:return t instanceof Map?_x:Qx}return hx(rx(t,e,n))}};function Vx(t,e){var n;const i=dx(this);return null===(n=nx())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,hx(n),hx(i),this)}))}function Dx(t){var e;const n=dx(this);return null===(e=nx())||void 0===e||e.observeCollection(n),n.has(px(t))}function zx(t){var e;const n=dx(this);return null===(e=nx())||void 0===e||e.observeCollection(n),hx(n.get(px(t)))}function qx(t,e){return hx(dx(this).set(px(t),px(e)))}function Zx(t){return hx(dx(this).add(px(t)))}function Hx(){return hx(dx(this).clear())}function Kx(t){return hx(dx(this).delete(px(t)))}function Wx(){var t;const e=dx(this);null===(t=nx())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:hx(e),done:i}},[Symbol.iterator](){return this}}}function Qx(){var t;const e=dx(this);null===(t=nx())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:hx(e),done:i}},[Symbol.iterator](){return this}}}function _x(){var t;const e=dx(this);null===(t=nx())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[hx(e[0]),hx(e[1])],done:i}},[Symbol.iterator](){return this}}}Object.freeze({getProxy:ux,getRaw:dx,wrap:hx,unwrap:px,rawKey:cx});class Gx{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new Gx(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,Wm(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!Qm(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){Xx=this.ov,this.ov=this.v,this.subs.notify(this.v,Xx,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return ix(this),this.v=px(this.get.call(this.up?hx(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,sx(this)}}}let Xx;yy(Gx),ow(Gx),dw(Gx);const Yx=gn.createInterface("IDirtyChecker",(t=>t.singleton(ek))),Jx={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},tk={persistent:!0};class ek{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(Jx.disabled)return;if(++this.j<Jx.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(Jx.throw)throw new Error(`AUR0222:${e}`);return new nk(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,tk))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}ek.inject=[Jn],dw(ek);class nk{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}ow(nk);class ik{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}let sk;class rk{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){sk=this.ov,this.ov=this.v,this.subs.notify(this.v,sk,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Wm(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(Wm(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class ok{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=Qm(n);const s=t[e];this.cb=Qm(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){sk=this.ov,this.ov=this.v,this.subs.notify(this.v,sk,this.f)}}ow(rk),ow(ok),dw(rk),dw(ok);const ak=new class{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}},lk=gn.createInterface("IObserverLocator",(t=>t.singleton(uk))),ck=gn.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(ai).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new hk)))));class hk{handles(){return!1}getObserver(){return ak}getAccessor(){return ak}}class uk{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):ak}getArrayObserver(t){return Dw(t)}getMapObserver(t){return cy(t)}getSetObserver(t){return Yw(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new ik(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return Dw(t).getLengthObserver();break;case"size":if(t instanceof Map)return cy(t).getLengthObserver();if(t instanceof Set)return Yw(t).getLengthObserver();break;default:if(t instanceof Array&&Me(e))return Dw(t).getIndexObserver(Number(e))}let o=pk(t,e);if(void 0===o){let n=dk(t);for(;null!==n&&(o=pk(n,e),void 0===o);)n=dk(n)}if(void 0!==o&&!Km.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?Gx.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new rk(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(Wm(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}uk.inject=[Yx,ck];const dk=Object.getPrototypeOf,pk=Object.getOwnPropertyDescriptor;gn.createInterface("IObservation",(t=>t.singleton(fk)));class fk{constructor(t){this.oL=t}static get inject(){return[lk]}run(t){const e=new gk(this.oL,t);return e.run(),e}}class gk{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{ix(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,sx(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}yy(gk);class vk{constructor(t,e,n,i={}){this.router=t,this.name=e,this.connectedCE=n,this.options=i,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}get activeContent(){var t;return null!==(t=this.getNextContent())&&void 0!==t?t:this.getContent()}get connectedScope(){var t;return null===(t=this.activeContent)||void 0===t?void 0:t.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){var t,e;return null!==(e=null===(t=this.connectedCE)||void 0===t?void 0:t.$controller)&&void 0!==e?e:null}get isViewport(){return this instanceof qk}get isViewportScope(){return this instanceof Bk}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){var n;return this.getContent().delete(),null===(n=this.getNextContent())||void 0===n||n.delete(),!0}canUnload(t){return!0}canLoad(t){return!0}unload(t){}load(t){}}class mk{constructor(t,e,n,i,s=Hk.create(""),r=Fk.create({instruction:"",fullStateInstruction:""})){var o,a;this.router=t,this.endpoint=e,this.instruction=s,this.navigation=r,this.completed=!1,this.connectedScope=new Gk(t,i,n,this),null!==this.router.rootScope&&(null!==(a=null===(o=this.endpoint.connectedScope)||void 0===o?void 0:o.parent)&&void 0!==a?a:this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){var t;null===(t=this.connectedScope.parent)||void 0===t||t.removeChild(this.connectedScope)}}class bk{constructor(t=null,e="",n=[],i="",s={}){this.match=t,this.matching=e,this.instructions=n,this.remaining=i,this.params=s}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.length>0}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}function wk(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function yk(t,e){return function(n,i){e(n,i,t)}}class xk{static parse(t,e,n,i){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!xk.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const s=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===s.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);i=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),n=!0);const{instructions:o,remaining:a}=xk.parse(t,e,r,!1);s[s.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:n,remaining:r}=xk.parse(t,e,!0,i);s.push(...n),e=r}else if(e.startsWith(t.groupEnd)){n&&(e=e.slice(t.groupEnd.length));let i=0;const r=e.length;for(;i<r;i++){if(e.slice(i,i+t.sibling.length)===t.sibling)return{instructions:s,remaining:e};if(e.slice(i,i+t.groupEnd.length)!==t.groupEnd){if(s.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(i);break}}if(i>=r)return{instructions:s,remaining:e}}else if(e.startsWith(t.sibling)&&!xk.isAdd(t,e)){if(!n)return{instructions:s,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:n,remaining:i}=xk.parseOne(t,e);s.push(n),e=i}return{instructions:s,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const n=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let i,s,r,o,a,l=!0;const c=[t.add,t.clear];for(const s of c)if(e===s){i=e,e="",n.shift(),n.shift(),o=t.viewport;break}if(void 0===i)for(const s of c)if(e.startsWith(`${s}${t.viewport}`)){i=s,e=e.slice(`${s}${t.viewport}`.length),n.shift(),n.shift(),o=t.viewport;break}if(void 0===i&&(({token:o,pos:a}=xk.findNextToken(e,n)),i=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",n.shift(),o===t.parameters&&(({token:o,pos:a}=xk.findNextToken(e,[t.parametersEnd])),s=e.slice(0,a),e=e.slice(a+o.length),({token:o}=xk.findNextToken(e,n)),e=e.slice(o.length)),n.shift()),o===t.viewport&&(({token:o,pos:a}=xk.findNextToken(e,n)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),n.shift(),o===t.noScope&&(l=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(null!=i?i:""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);return{instruction:Hk.create(i,r,s,l),remaining:e}}static findNextToken(t,e){const n={};for(const i of e)t.indexOf(i)>-1&&(n[i]=t.indexOf(i));const i=Math.min(...Object.values(n));for(const t in n)if(n[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}}class kk{constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",n="top-down",i=" > ",s=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=n,this.componentTitleSeparator=i,this.useComponentNames=s,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new kk((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return Ak.for(t).title}apply(t={}){var e,n,i,s,r,o;t="string"==typeof t?{appTitle:t}:t,this.appTitle=null!==(e=t.appTitle)&&void 0!==e?e:this.appTitle,this.appTitleSeparator=null!==(n=t.appTitleSeparator)&&void 0!==n?n:this.appTitleSeparator,this.componentTitleOrder=null!==(i=t.componentTitleOrder)&&void 0!==i?i:this.componentTitleOrder,this.componentTitleSeparator=null!==(s=t.componentTitleSeparator)&&void 0!==s?s:this.componentTitleSeparator,this.useComponentNames=null!==(r=t.useComponentNames)&&void 0!==r?r:this.useComponentNames,this.componentPrefix=null!==(o=t.componentPrefix)&&void 0!==o?o:this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class Sk{constructor(t="@",e="+",n="/",i="(",s=")",r="!",o="(",a=")",l=",",c="=",h="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=n,this.groupStart=i,this.groupEnd=s,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=l,this.parameterKeySeparator=c,this.add=h,this.clear=u,this.action=d}static create(t={}){return new Sk(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return Ak.for(t).separators}apply(t={}){var e,n,i,s,r,o,a,l,c,h,u,d,p;this.viewport=null!==(e=t.viewport)&&void 0!==e?e:this.viewport,this.sibling=null!==(n=t.sibling)&&void 0!==n?n:this.sibling,this.scope=null!==(i=t.scope)&&void 0!==i?i:this.scope,this.groupStart=null!==(s=t.groupStart)&&void 0!==s?s:this.groupStart,this.groupEnd=null!==(r=t.groupEnd)&&void 0!==r?r:this.groupEnd,this.noScope=null!==(o=t.noScope)&&void 0!==o?o:this.noScope,this.parameters=null!==(a=t.parameters)&&void 0!==a?a:this.parameters,this.parametersEnd=null!==(l=t.parametersEnd)&&void 0!==l?l:this.parametersEnd,this.parameterSeparator=null!==(c=t.parameterSeparator)&&void 0!==c?c:this.parameterSeparator,this.parameterKeySeparator=null!==(h=t.parameterKeySeparator)&&void 0!==h?h:this.parameterKeySeparator,this.add=null!==(u=t.add)&&void 0!==u?u:this.add,this.clear=null!==(d=t.clear)&&void 0!==d?d:this.clear,this.action=null!==(p=t.action)&&void 0!==p?p:this.action}}class Ck{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new Ck(t.loadActive,t.viewportNavigating)}static for(t){return Ak.for(t).indicators}apply(t={}){var e,n;this.loadActive=null!==(e=t.loadActive)&&void 0!==e?e:this.loadActive,this.viewportNavigating=null!==(n=t.viewportNavigating)&&void 0!==n?n:this.viewportNavigating}}class Ak{constructor(t=Sk.create(),e=Ck.create(),n=!0,i=null,s=!0,r=0,o=!0,a=!0,l=!0,c=kk.create(),h=["guardedUnload","swapped","completed"],u="attach-next-detach-current"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=n,this.basePath=i,this.useHref=s,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=l,this.title=c,this.navigationSyncStates=h,this.swapOrder=u,this.registrationHooks=[]}static create(t={}){return new Ak(Sk.create(t.separators),Ck.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,kk.create(t.title),t.navigationSyncStates,t.swapOrder)}static for(t){return t instanceof US?t.options:(t=t instanceof lS?t.configuration:t.get(PS)).options}apply(t){var e,n,i,s,r,o,a,l,c;t=null!=t?t:{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=null!==(e=t.useUrlFragmentHash)&&void 0!==e?e:this.useUrlFragmentHash,this.basePath=null!==(n=t.basePath)&&void 0!==n?n:this.basePath,this.useHref=null!==(i=t.useHref)&&void 0!==i?i:this.useHref,this.statefulHistoryLength=null!==(s=t.statefulHistoryLength)&&void 0!==s?s:this.statefulHistoryLength,this.useDirectRouting=null!==(r=t.useDirectRouting)&&void 0!==r?r:this.useDirectRouting,this.useConfiguredRoutes=null!==(o=t.useConfiguredRoutes)&&void 0!==o?o:this.useConfiguredRoutes,this.additiveInstructionDefault=null!==(a=t.additiveInstructionDefault)&&void 0!==a?a:this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=null!==(l=t.navigationSyncStates)&&void 0!==l?l:this.navigationSyncStates,this.swapOrder=null!==(c=t.swapOrder)&&void 0!==c?c:this.swapOrder,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}var Ek;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(Ek||(Ek={}));class Tk{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new Tk;return e.set(t),e}static parse(t,e,n=!1){if(null==e||0===e.length)return[];const i=Sk.for(t),s=i.parameterSeparator,r=i.parameterKeySeparator;if("string"==typeof e){const t=[],i=e.split(s);for(const e of i){let i,s;[i,s]=e.split(r),void 0===s?(s=n?decodeURIComponent(i):i,i=void 0):n&&(i=decodeURIComponent(i),s=decodeURIComponent(s)),t.push({key:i,value:s})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,n=!1){if(!Array.isArray(e)||0===e.length)return"";const i=Sk.for(t);return e.map((t=>{const e=void 0!==t.key&&n?encodeURIComponent(t.key):t.key,s=n?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==s?e+i.parameterKeySeparator+s:s})).join(i.parameterSeparator)}static contains(t,e){return Object.keys(e).every((n=>e[n]===t[n]))}parameters(t){return Tk.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const n=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==n.length?1===n.length?n[0]:n:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=null!=e?e:[];const n=this.parameters(t),i={};for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const[s]=n.splice(e,1);i[t]=s.value}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const[s]=n.splice(e,1);i[t]=s.value}}for(const t of n.filter((t=>void 0!==t.key)))i[t.key]=t.value;let s=e.length;for(const t of n.filter((t=>void 0===t.key)))i[s++]=t.value;return i}toSortedParameters(t,e){e=e||[];const n=this.parameters(t),i=[];for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const t={...n.splice(e,1)[0]};t.key=void 0,i.push(t)}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const t={...n.splice(e,1)[0]};i.push(t)}else i.push({value:void 0})}const s=n.filter((t=>void 0!==t.key));return s.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),i.push(...s),i.push(...n.filter((t=>void 0===t.key))),i}same(t,e,n){const i=null!==n?n.parameters:[],s=this.toSpecifiedParameters(t,i),r=e.toSpecifiedParameters(t,i);return Object.keys(s).every((t=>s[t]===r[t]))&&Object.keys(r).every((t=>r[t]===s[t]))}}class $k{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new $k;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return Dh.isType(t.Type)}static isType(t){return Dh.isType(t)}static isInstance(t){return function(t){return te(t)&&Dh.isType(t.constructor)}(t)}static isAppelation(t){return $k.isName(t)||$k.isType(t)||$k.isInstance(t)}static getName(t){return $k.isName(t)?t:$k.isType(t)?Dh.getDefinition(t).name:$k.getName(t.constructor)}static getType(t){return $k.isName(t)?null:$k.isType(t)?t:t.constructor}static getInstance(t){return $k.isName(t)||$k.isType(t)?null:t}set(t){let e=null,n=null,i=null,s=null,r=null;t instanceof Promise?s=t:$k.isName(t)?e=$k.getName(t):$k.isType(t)?(e=this.getNewName(t),n=$k.getType(t)):$k.isInstance(t)?(e=this.getNewName($k.getType(t)),n=$k.getType(t),i=$k.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=n,this.instance=i,this.promise=s,this.func=r}resolve(){if(null!==this.func&&this.set(this.func()),this.promise instanceof Promise)return this.promise.then((t=>{if($k.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const n=e[0];this.set(t[n])}))}get none(){return!this.isName()&&!this.isType()&&!this.isInstance()}isName(){return!!this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t){if(null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(Dh.keyFrom(this.name),!0)){const e=t.getResolver(Dh.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const n=e.getFactory(t);if(n)return n.Type}}}return null}toInstance(t){if(null!==this.instance)return this.instance;if(null!=t){const e=this.isType()?t.get(this.type):t.get(Dh.keyFrom(this.name));return!this.isType()||e instanceof this.type||console.warn("Failed to instantiate",this.type,e),null!=e?e:null}return null}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?$k.getName(t):this.name}}function Ik(t,e){const n=[];let i=t.findIndex(e);for(;i>=0;)n.push(t.splice(i,1)[0]),i=t.findIndex(e);return n}function Rk(t,e=!1){return t.filter(((t,n,i)=>(e||null!=t)&&i.indexOf(t)===n))}class Ok{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class Pk{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return null==e?void 0:e[0];let s=!1;null===t&&(t=new Lk,s=!0);const r=new Lk(e.shift());return Pk.connect(t,r,null!==(i=null==t?void 0:t.runParallel)&&void 0!==i&&i||s),e.length>0&&Pk.add(r,!1,...e),s?(Pk.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):r}static runParallel(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return[];let s=!1;return null===t?(t=new Lk,s=!0):t=Pk.connect(t,new Lk,!0),Pk.add(t,!0,...e),s&&Pk.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?null!==(i=t.result)&&void 0!==i?i:[]:t}static step(t){if(t instanceof Promise)return Pk.runners.get(t)}static cancel(t){const e=Pk.step(t);void 0!==e&&e.cancel()}static add(t,e,...n){let i=new Lk(n.shift(),e);null!==t&&(i=Pk.connect(t,i,e));const s=i;for(;n.length>0;)i=Pk.connect(i,new Lk(n.shift(),e),!1);return s}static connect(t,e,n){if(n){const n=t.child;t.child=e,e.parent=t,e.next=n,null!==n&&(n.parent=null,n.previous=e)}else{const n=t.next;t.next=e,e.previous=t,e.next=n,null!==n&&(n.previous=e,n.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)Pk.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const n=t.value;Pk.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,Pk.settlePromise(t),t.isDone=!0,t.isDoing=!1;const n=t.nextToDo();null===n||t.isExited?(t.root.doneAll||t.isExited)&&Pk.settlePromise(t.root):Pk.process(n)})).catch((t=>{throw t}))})(t,n)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?Pk.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&Pk.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new Ok,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){var n,i,s,r;if(null!==(i=null===(n=t.finally)||void 0===n?void 0:n.isPending)&&void 0!==i&&i)switch(t.promise=null,e){case"resolve":null===(s=t.finally)||void 0===s||s.resolve(t.result);break;case"reject":null===(r=t.finally)||void 0===r||r.reject(t.result)}}}Pk.runners=new WeakMap,Pk.roots={};class Lk{constructor(t,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+Lk.id++}get isParallelParent(){var t,e;return null!==(e=null===(t=this.child)||void 0===t?void 0:t.runParallel)&&void 0!==e&&e}get result(){var t,e;if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:null===(e=null===(t=this.child)||void 0===t?void 0:t.tail)||void 0===e?void 0:e.result}let n=this.value;for(;n instanceof Lk;)n=n.result;return n}get asValue(){return this.result}get previousValue(){var t,e,n,i;return this.runParallel?null===(n=null===(e=null===(t=this.head.parent)||void 0===t?void 0:t.parent)||void 0===e?void 0:e.previous)||void 0===n?void 0:n.result:null===(i=this.previous)||void 0===i?void 0:i.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){var e,n;return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,null===(e=this.child)||void 0===e||e.cancel(!1),null===(n=this.next)||void 0===n||n.cancel(!1),!0)}exit(t=!0){var e,n;return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,null===(e=this.child)||void 0===e||e.exit(!1),null===(n=this.next)||void 0===n||n.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){var t;let e=this.next;for(;null!==e;){if(!e.isDoing&&!e.isDone)return e;e=e.next}const n=null!==(t=this.head.parent)&&void 0!==t?t:null;return null!==n&&n.done?n.nextOrUp():null}get path(){var t,e;return`${null!==(e=null===(t=this.head.parent)||void 0===t?void 0:t.path)&&void 0!==e?e:""}/${this.name}`}get tree(){let t="",e=this.head,n=e.parent,i="";for(;null!==n;)i=`${n.path}${i}`,n=n.head.parent;do{if(t+=`${i}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){var t,e,n,i;let s=`${this.path}\n`;return s+=null!==(e=null===(t=this.child)||void 0===t?void 0:t.report)&&void 0!==e?e:"",s+=null!==(i=null===(n=this.next)||void 0===n?void 0:n.report)&&void 0!==i?i:"",s}}Lk.id=0;class Mk{constructor(t,e,n,i,s,r,o,a){this.path=t,this.id=e,this.redirectTo=n,this.instructions=i,this.caseSensitive=s,this.title=r,this.reloadBehavior=o,this.data=a}static isConfigured(t){return Pm.hasOwn(Mk.resourceKey,t)||"parameters"in t||"title"in t}static configure(t,e){const n=Mk.create(t,e);return Pm.define(Mk.resourceKey,n,e),e}static getConfiguration(t){var e;const n=null!==(e=Pm.getOwn(Mk.resourceKey,t))&&void 0!==e?e:{};return Array.isArray(t.parameters)&&(n.parameters=t.parameters),"title"in t&&(n.title=t.title),n instanceof Mk?n:Mk.create(n,t)}static create(t,e=null){var n,i,s,r,o,a,l,c,h;null!==e&&(t=Mk.transferTypeToComponent(t,e)),Dh.isType(t)?t=Mk.getConfiguration(t):null===e&&(t={...t});const u=Mk.transferIndividualIntoInstructions(t);Mk.validateRouteConfiguration(u);let d=u.path;return Array.isArray(d)&&(d=d.join(",")),new Mk(null!==(n=u.path)&&void 0!==n?n:"",null!==(s=null!==(i=u.id)&&void 0!==i?i:d)&&void 0!==s?s:null,null!==(r=u.redirectTo)&&void 0!==r?r:null,null!==(o=u.instructions)&&void 0!==o?o:null,null!==(a=u.caseSensitive)&&void 0!==a&&a,null!==(l=u.title)&&void 0!==l?l:null,null!==(c=u.reloadBehavior)&&void 0!==c?c:null,null!==(h=u.data)&&void 0!==h?h:null)}static transferTypeToComponent(t,e){var n;if(Dh.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const i=null!==(n={...t})&&void 0!==n?n:{};if("component"in i||"instructions"in i)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in i||(i.component=e),"path"in i||"redirectTo"in i||(i.path=Dh.getDefinition(e).name),i}static transferIndividualIntoInstructions(t){var e,n,i,s;if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(null!==(e=t.component)&&void 0!==e?e:null)||null!==(null!==(n=t.viewport)&&void 0!==n?n:null)||null!==(null!==(i=t.parameters)&&void 0!==i?i:null)||null!==(null!==(s=t.children)&&void 0!==s?s:null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}Mk.resourceKey=on.resource.keyFor("route");const Uk={name:on.resource.keyFor("routes"),isConfigured:t=>Pm.hasOwn(Uk.name,t)||"routes"in t,configure(t,e){const n=t.map((t=>Mk.create(t)));return Pm.define(Uk.name,n,e),e},getConfiguration(t){const e=t,n=[],i=Pm.getOwn(Uk.name,t);return Array.isArray(i)&&n.push(...i),Array.isArray(e.routes)&&n.push(...e.routes),n.map((t=>t instanceof Mk?t:Mk.create(t)))}};class jk extends mk{}class Bk extends vk{constructor(t,e,n,i,s,r=null,o={catches:[],source:null}){super(t,e,n),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new jk(t,this,i,s)),this.catches.length>0&&(this.instruction=Hk.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){var t;return null!==(t=this.options.source)&&void 0!==t?t:null}get catches(){var t;let e=null!==(t=this.options.catches)&&void 0!==t?t:[];return"string"==typeof e&&(e=e.split(",")),e}get default(){if(this.catches.length>0)return this.catches[0]}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.instruction)||void 0===t?void 0:t.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`vs:${this.name}[${s}->${r}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new jk(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){Pk.run(null,(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){var n;const i=this.contents.findIndex((e=>e.navigation===t.navigation));let s=this.contents[i];if(this.remove){const t=new jk(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(i,1,t),s.delete(),s=t}s.completed=!0;let r=0;for(let t=0,e=i;t<e&&null!==(n=this.contents[0].navigation.completed)&&void 0!==n&&n;t++)r++;this.contents.splice(0,r),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation));if(this.contents.splice(n,1),this.add){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===Hk.clear(this.router)||t===Hk.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&Ik(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){if(null!==this.rootComponentType){const t=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;return Uk.getConfiguration(t)}return null}}class Nk{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class Fk extends class{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}{constructor(t={instruction:"",fullStateInstruction:""}){var e,n,i,s,r,o;super(t),this.navigation=new Nk,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=null!==(e=t.fromBrowser)&&void 0!==e?e:this.fromBrowser,this.origin=null!==(n=t.origin)&&void 0!==n?n:this.origin,this.replacing=null!==(i=t.replacing)&&void 0!==i?i:this.replacing,this.refreshing=null!==(s=t.refreshing)&&void 0!==s?s:this.refreshing,this.untracked=null!==(r=t.untracked)&&void 0!==r?r:this.untracked,this.historyMovement=null!==(o=t.historyMovement)&&void 0!==o?o:this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){var t,e,n;return null!==(t=this.navigation.back)&&void 0!==t&&t||null!==(e=this.navigation.forward)&&void 0!==e&&e||null!==(n=this.navigation.refresh)&&void 0!==n&&n}static create(t={instruction:"",fullStateInstruction:""}){return new Fk(t)}}class Vk{constructor(){this.map=new Map}set(t,e){const n=this.map.get(t);n instanceof Ok&&n.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof Ok&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new Ok;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof Ok?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof Ok)}clone(){const t=new Vk;return t.map=new Map(this.map),t}}class Dk extends mk{constructor(t,e,n,i,s=Hk.create(""),r=Fk.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,n,i,s,r),this.router=t,this.instruction=s,this.navigation=r,this.contentStates=new Vk,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==(null==o?void 0:o.container)||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){var t,e;return this.instruction.route instanceof bk&&null!==(null===(t=this.instruction.route.match)||void 0===t?void 0:t.reloadBehavior)?null===(e=this.instruction.route.match)||void 0===e?void 0:e.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){var e,n;return this.instruction.sameComponent(this.router,t.instruction,!0)&&(null!==(e=this.navigation.query)&&void 0!==e?e:"")===(null!==(n=t.navigation.query)&&void 0!==n?n:"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return Cu.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(n){if(""===(null!=e?e:""))throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`);this.instruction.parameters.set([this.instruction.component.name]),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(t){throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`)}}this.contentStates.set("created",void 0),this.contentStates.has("loaded")||!this.instruction.component.instance||this.fromCache&&this.fromHistory||(this.contentController(t).parent=t.controller)}}canLoad(){var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const i=this.instruction.component.instance;if(null==i)return!0;this.contentStates.set("checkedLoad",void 0);const s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"canLoad").map((t=>e=>{const n=t(i,o,this.instruction,this.navigation);return"boolean"==typeof n?(!1===n&&e.exit(),n):"string"==typeof n?(e.exit(),[Hk.create(n,this.endpoint)]):n}));if(0!==a.length){const t=Pk.run(null,...a);if(!0!==t)return!1!==t&&("string"==typeof t?[Hk.create(t,this.endpoint)]:t)}if(null==i.canLoad)return!0;const l=i.canLoad(o,this.instruction,this.navigation);return"boolean"==typeof l?l:"string"==typeof l?[Hk.create(l,this.endpoint)]:l}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=Fk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"canUnload").map((n=>i=>{const s=n(e,this.instruction,t);return"boolean"==typeof s?(!1===s&&i.exit(),s):s}));if(0!==n.length){const t=Pk.run(null,...n);if(!0!==t)return!1!==t&&t}if(!e.canUnload)return!0;const i=e.canUnload(this.instruction,t);if("boolean"!=typeof i&&!(i instanceof Promise))throw new Error(`Method 'canUnload' in component "${this.instruction.component.name}" needs to return true or false or a Promise resolving to true or false.`);return i}load(t){return Pk.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const i=this.instruction.component.instance,s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"load").map((t=>()=>t(i,o,this.instruction,this.navigation)));return 0!==a.length?(null!=i.load&&a.push((()=>i.load(o,this.instruction,this.navigation))),Pk.run(null,...a)):null!=i.load?i.load(o,this.instruction,this.navigation):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=Fk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"unload").map((n=>()=>n(e,this.instruction,t)));return 0!==n.length?(null!=e.unload&&n.push((()=>e.unload(this.instruction,t))),Pk.run(null,...n)):null!=e.unload?e.unload(this.instruction,t):void 0}activateComponent(t,e,n,i,s,r,o){return Pk.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(n)),(()=>{if(this.contentStates.has("activating")||this.contentStates.has("activated"))return;this.contentStates.set("activating",void 0);const t=this.contentController(s);return t.activate(null!=e?e:t,n,i,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,n,i,s,r=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return Pk.run(t,(()=>{if(r&&null!==s.element){const t=Array.from(s.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}this.contentStates.delete("activated"),this.contentStates.delete("activating");const t=this.contentController(s);return t.deactivate(null!=e?e:t,n,i)}))}disposeComponent(t,e,n=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance){if(!n)return this.contentStates.delete("created"),this.contentController(t).dispose();e.push(this)}}freeContent(t,e,n,i,s=!1){return Pk.run(t,(()=>this.unload(n)),(t=>this.deactivateComponent(t,null,e.controller,0,e,s)),(()=>this.disposeComponent(e,i,s)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t)}toComponentInstance(t){return this.instruction.component.none?null:this.instruction.component.toInstance(t)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}getLifecycleHooks(t,e){var n;return(null!==(n=t.$controller.lifecycleHooks[e])&&void 0!==n?n:[]).map((t=>t.instance[e].bind(t.instance)))}}class zk{constructor(t=!0,e=[],n="",i="",s=!1,r=!1,o=!1,a=!1,l=!1){this.scope=t,this.usedBy=e,this.fallback=i,this.noLink=s,this.noTitle=r,this.stateful=o,this.forceDescription=a,this.noHistory=l,this.default=void 0,this.default=n}static create(t){const e=new zk;return void 0!==t&&e.apply(t),e}apply(t){var e,n,i,s,r,o,a,l,c;this.scope=null!==(e=t.scope)&&void 0!==e?e:this.scope,this.usedBy=null!==(n="string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)&&void 0!==n?n:this.usedBy,this.default=null!==(i=t.default)&&void 0!==i?i:this.default,this.fallback=null!==(s=t.fallback)&&void 0!==s?s:this.fallback,this.noLink=null!==(r=t.noLink)&&void 0!==r?r:this.noLink,this.noTitle=null!==(o=t.noTitle)&&void 0!==o?o:this.noTitle,this.stateful=null!==(a=t.stateful)&&void 0!==a?a:this.stateful,this.forceDescription=null!==(l=t.forceDescription)&&void 0!==l?l:this.forceDescription,this.noHistory=null!==(c=t.noHistory)&&void 0!==c?c:this.noHistory}}class qk extends vk{constructor(t,e,n,i,s,r){super(t,e,n),this.contents=[],this.forceRemove=!1,this.options=new zk,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new Dk(t,this,i,s)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){var t;if(1===this.contents.length)return this.contents[0];let e;for(let n=0,i=this.contents.length;n<i&&null!==(t=this.contents[n].completed)&&void 0!==t&&t;n++)e=this.contents[n];return e}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let n=0,i=this.contents.length;n<i&&!(this.contents[n].navigation.timestamp>t);n++)e=this.contents[n];return e}get parentViewport(){let t=this.connectedScope;for(;null!=(null==t?void 0:t.parent);)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.getContent())||void 0===t?void 0:t.instruction.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`v:${this.name}[${s}->${r}]`}setNextContent(t,e){var n;t.endpoint.set(this),this.clear=t.isClear(this.router);const i=this.contents[this.contents.length-1],s=new Dk(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,null!==(n=this.connectedCE)&&void 0!==n?n:null);if(this.contents.push(s),s.fromHistory=!(null===s.componentInstance||!e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>s.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(s),1,t),s.fromCache=!0):this.cache.push(s)}return null!==s.componentInstance&&i.componentInstance===s.componentInstance?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):!i.equalComponent(s)||e.navigation.refresh||"refresh"===i.reloadBehavior?this.transitionAction="swap":"disallow"===i.reloadBehavior?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):"reload"===i.reloadBehavior?(i.reload=!0,s.instruction.component.set(i.componentInstance),s.contentStates=i.contentStates.clone(),s.reload=i.reload,this.transitionAction="reload"):this.options.stateful&&i.equalParameters(s)||i.equalParameters(s)?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){var n,i,s,r,o;e=null!=e?e:{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),null!=this.connectionResolve&&this.connectionResolve());const a=(null!==(i=null===(n=this.scope.parent)||void 0===n?void 0:n.endpoint.getRoutes())&&void 0!==i?i:[]).filter((t=>""===t.path)).length>0;if(null===this.getContent().componentInstance&&null==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance)&&(this.options.default||a)){const t=Hk.parse(this.router,null!==(r=this.options.default)&&void 0!==r?r:"");if(0===t.length&&a){const e=null===(o=this.scope.parent)||void 0===o?void 0:o.findInstructions([Hk.create("")],!1,this.router.configuration.options.useConfiguredRoutes);(null==e?void 0:e.foundConfiguration)&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&Pk.run(t,(t=>{var e,n;if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),Pk.run(t,...e)}return!0}))}async transition(t){var e,n,i,s;const r=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let o=this.parentViewport;null!==o&&"reload"!==o.transitionAction&&"swap"!==o.transitionAction&&(o=null);const a=[e=>{if(this.isActiveNavigation(t))return this.canUnload(e)},e=>{this.isActiveNavigation(t)&&(e.previousValue?this.router.isRestrictedNavigation&&this.getNextContent().createComponent(this.connectedCE,this.options.fallback):t.cancel()),t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==o?t.waitForEndpointState(o,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(e)},e=>{if(this.isActiveNavigation(t)){const n=e.previousValue;if("boolean"!=typeof n)return Pk.run(e,(()=>this.router.load(n,{append:!0})),(e=>this.cancelContentChange(t,e)));if(!n)return e.cancel(),void t.cancel()}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],l=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==o?t.waitForEndpointState(o,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],c=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":c.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":c.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":c.push((e=>Pk.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":c.push((e=>Pk.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}c.push((()=>t.addEndpointState(this,"swapped"))),null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!0),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!0);const h=Pk.run(null,(e=>t.setEndpointStep(this,e.root)),...a,...l,...c,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{var e,n,i,s;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!1),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!1)}));h instanceof Promise&&h.catch((t=>{}))}canUnload(t){return Pk.run(t,(t=>this.getContent().connectedScope.canUnload(t)),(t=>{var e,n;return!!t.previousValue&&this.getContent().canUnload(null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null)}))}canLoad(t){return!!this.clear||Pk.run(t,(()=>this.waitForConnected()),(()=>(this.getNextContent().createComponent(this.connectedCE,this.options.fallback),this.getNextContent().canLoad())))}load(t){if(!this.clear)return this.getNextContent().load(t)}addContent(t,e){return this.activate(t,null,this.connectedController,0,e)}removeContent(t,e){var n;if(this.isEmpty)return;const i=this.router.statefulHistory||null!==(n=this.options.stateful)&&void 0!==n&&n;return Pk.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController,i?0:16)),(()=>i?this.dispose():void 0))}activate(t,e,n,i,s){if(null!==this.activeContent.componentInstance)return Pk.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,n,i,this.connectedCE,(()=>null==s?void 0:s.addEndpointState(this,"bound")),null==s?void 0:s.waitForSyncState("bound"))))}deactivate(t,e,n,i){var s;const r=this.getContent();if(null!=(null==r?void 0:r.componentInstance)&&!r.reload&&r.componentInstance!==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance))return r.deactivateComponent(t,e,n,i,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t){return Pk.run(t,(t=>this.getContent().connectedScope.unload(t)),(()=>{var t,e;return null!=this.getContent().componentInstance?this.getContent().unload(null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.navigation)&&void 0!==e?e:null):void 0}))}dispose(){var t;null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===(null===(t=this.getNextContent())||void 0===t?void 0:t.componentInstance)||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){var n,i,s,r,o;const a=this.contents.findIndex((e=>e.navigation===t.navigation));let l=this.contents[a];const c=this.contents[a-1];if(this.clear){const t=new Dk(this.router,this,this.owningScope,this.scope.hasScope,void 0,l.navigation);this.contents.splice(a,1,t),l.delete(),l=t}else l.reload=!1;c.delete(),l.completed=!0,this.transitionAction="",l.contentStates.delete("checkedUnload"),l.contentStates.delete("checkedLoad"),this.previousViewportState=null;const h=this.router.configuration.options.indicators.viewportNavigating;null===(i=null===(n=this.connectedCE)||void 0===n?void 0:n.setActivity)||void 0===i||i.call(n,h,!1),null===(r=null===(s=this.connectedCE)||void 0===s?void 0:s.setActivity)||void 0===r||r.call(s,t.navigation.navigation,!1);let u=0;for(let t=0,e=a;t<e&&null!==(o=this.contents[0].navigation.completed)&&void 0!==o&&o;t++)u++;this.contents.splice(0,u),Ik(this.coordinators,(e=>e===t))}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation)),i=this.contents[n],s=this.contents[n-1];return Pk.run(e,(t=>{if(null!=i)return i.freeContent(t,this.connectedCE,i.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)}),(()=>{var e,n,r,o;this.previousViewportState&&Object.assign(this,this.previousViewportState),null==i||i.delete(),null!==i&&this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="",null==s||s.contentStates.delete("checkedUnload"),null==s||s.contentStates.delete("checkedLoad");const a=this.router.configuration.options.indicators.viewportNavigating;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,a,!1),null===(o=null===(r=this.connectedCE)||void 0===r?void 0:r.setActivity)||void 0===o||o.call(r,t.navigation.navigation,!1),t.removeEndpoint(this),Ik(this.coordinators,(e=>e===t))}),(()=>null==e?void 0:e.exit()))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const n=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==n)return Pk.run(t,(t=>(this.forceRemove=!0,n.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,Ik(this.historyCache,(t=>t===n))}))}getRoutes(){let t=this.getComponentType();if(null===t)return null;t=t.constructor===t.constructor.constructor?t:t.constructor;const e=Uk.getConfiguration(t);return Array.isArray(e)?e:null}getTitle(t){var e,n;if(this.options.noTitle)return"";const i=this.getComponentType();if(null===i)return"";let s="";const r=i.title;if(void 0!==r)if("string"==typeof r)s=r;else{const e=this.getComponentInstance();s=r.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=null!==(e=this.getContentInstruction().component.name)&&void 0!==e?e:"";const i=null!==(n=this.router.configuration.options.title.componentPrefix)&&void 0!==n?n:"";t.startsWith(i)&&(t=t.slice(i.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){var t;let e=null!==(t=this.getContentInstruction().component.type)&&void 0!==t?t:null;return null===e&&(e=Dh.for(this.connectedCE.element).container.componentType),null!=e?e:null}getComponentInstance(){var t;return null!==(t=this.getContentInstruction().component.instance)&&void 0!==t?t:null}getContentInstruction(){var t,e,n;return null!==(n=null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.instruction)&&void 0!==e?e:this.getContent().instruction)&&void 0!==n?n:null}clearState(){this.options=zk.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new Dk(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class Zk{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof qk?"Viewport":this.instance instanceof Bk?"ViewportScope":null}static create(t){const e=new Zk;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof vk}static getName(t){return Zk.isName(t)?t:t?t.name:null}static getInstance(t){return Zk.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class Hk{constructor(t,e,n){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.component=$k.create(t),this.endpoint=Zk.create(e),this.parameters=Tk.create(n)}static create(t,e,n,i=!0,s=null){const r=new Hk(t,e,n);return r.ownsScope=i,r.nextScopeInstructions=s,r}static createClear(t,e){return Hk.create(Hk.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const n=[];for(const i of e)if("string"==typeof i)n.push(...Hk.parse(t,i));else if(i instanceof Hk)n.push(i);else if(i instanceof Promise)n.push(Hk.create(i));else if($k.isAppelation(i))n.push(Hk.create(i));else if($k.isDefinition(i))n.push(Hk.create(i.Type));else if("component"in i){const e=i,s=Hk.create(e.component,e.viewport,e.parameters);void 0!==e.children&&null!==e.children&&(s.nextScopeInstructions=Hk.from(t,e.children)),n.push(s)}else if("object"==typeof i&&null!==i){const t=Dh.define(i);n.push(Hk.create(t))}else n.push(Hk.create(i));return n}static clear(t){return Sk.for(t).clear}static add(t){return Sk.for(t).add}static parse(t,e){const n=Sk.for(t);let i="";const s=/^[./]+/.exec(e);Array.isArray(s)&&s.length>0&&(i=s[0],e=e.slice(i.length));const r=xk.parse(n,e,!0,!0).instructions;for(const t of r)t.scopeModifier=i;return r}static stringify(t,e,n=!1,i=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,n,i))).filter((t=>t.length>0)).join(Sk.for(t).sibling)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>Hk.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const n of t)e.push(n),n.hasNextScopeInstructions&&e.push(...Hk.flat(n.nextScopeInstructions));return e}static clone(t,e=!1,n=!1){return t.map((t=>t.clone(e,n)))}static contains(t,e,n,i){return n.every((n=>n.isIn(t,e,i)))}get viewport(){return this.endpoint.instance instanceof qk||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof Bk||null===this.endpoint.endpointType?this.endpoint:null}get previous(){var t,e;return null===(e=null===(t=this.endpoint.instance)||void 0===t?void 0:t.getContent())||void 0===e?void 0:e.instruction}isAdd(t){return this.component.name===Sk.for(t).add}isClear(t){return this.component.name===Sk.for(t).clear}isAddAll(t){var e,n;return this.isAdd(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}isClearAll(t){var e,n;return this.isClear(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}get hasNextScopeInstructions(){var t,e;return(null!==(e=null===(t=this.nextScopeInstructions)||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0}typeParameters(t){var e,n;return this.parameters.toSpecifiedParameters(t,null!==(n=null===(e=this.component.type)||void 0===e?void 0:e.parameters)&&void 0!==n?n:[])}sameComponent(t,e,n=!1,i=!1){return!(n&&!this.sameParameters(t,e,i))&&this.component.same(e.component,i)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,n=!1){return!!this.component.same(e.component,n)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,n=!1){var i,s,r,o,a;const l=Sk.for(t);let c=e,h=!1;if(n){const t=null!==(s=null===(i=this.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==(r=null==t?void 0:t.options.noLink)&&void 0!==r&&r)return"";this.needsEndpointDescribed||null!==(o=null==t?void 0:t.options.forceDescription)&&void 0!==o&&o&&null==(null===(a=this.viewportScope)||void 0===a?void 0:a.instance)||(c=!0),(null==t?void 0:t.options.fallback)===this.component.name&&(h=!0),(null==t?void 0:t.options.default)===this.component.name&&(h=!0)}const u=this.nextScopeInstructions;let d=this.scopeModifier;if(null!==this.route){if(!this.routeStart)return Array.isArray(u)?Hk.stringify(t,u,e,n):"";const i=this.route.matching;d+=i.endsWith(l.scope)?i.slice(0,-l.scope.length):i}else d+=this.stringifyShallow(t,c,h);if(Array.isArray(u)&&u.length>0){const i=Hk.stringify(t,u,e,n);i.length>0&&(d+=l.scope,d+=1===u.length?i:`${l.groupStart}${i}${l.groupEnd}`)}return d}clone(t=!1,e=!1,n=!1){var i,s,r,o,a,l;const c=Hk.create(null!==(r=null!==(s=null!==(i=this.component.func)&&void 0!==i?i:this.component.promise)&&void 0!==s?s:this.component.type)&&void 0!==r?r:this.component.name,this.endpoint.name,null!==this.parameters.typedParameters?this.parameters.typedParameters:void 0);return t&&(c.component.set(null!==(a=null!==(o=this.component.instance)&&void 0!==o?o:this.component.type)&&void 0!==a?a:this.component.name),c.endpoint.set(null!==(l=this.endpoint.instance)&&void 0!==l?l:this.endpoint.name)),c.component.name=this.component.name,c.needsEndpointDescribed=this.needsEndpointDescribed,c.route=this.route,c.routeStart=this.routeStart,c.default=this.default,e&&(c.scopeModifier=this.scopeModifier),c.scope=t?this.scope:null,this.hasNextScopeInstructions&&!n&&(c.nextScopeInstructions=Hk.clone(this.nextScopeInstructions,t,e)),c}isIn(t,e,n){const i=e.filter((e=>{var n,i;if(!e.sameComponent(t,this))return!1;const s=null!==(n=e.component.type)&&void 0!==n?n:this.component.type,r=null!==(i=this.component.type)&&void 0!==i?i:e.component.type,o=e.parameters.toSpecifiedParameters(t,null==s?void 0:s.parameters),a=this.parameters.toSpecifiedParameters(t,null==r?void 0:r.parameters);return!!Tk.contains(o,a)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===i.length||n&&this.hasNextScopeInstructions&&!i.some((e=>{var i;return Hk.contains(t,null!==(i=e.nextScopeInstructions)&&void 0!==i?i:[],this.nextScopeInstructions,n)})))}getTitle(t){var e;if(null!==this.route){const n=null===(e=this.route.match)||void 0===e?void 0:e.title;if(null!=n)return this.routeStart?"string"==typeof n?n:n(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){var t,e,n;return{component:null!==(t=this.component.name)&&void 0!==t?t:void 0,viewport:null!==(e=this.endpoint.name)&&void 0!==e?e:void 0,parameters:null!==(n=this.parameters.parametersRecord)&&void 0!==n?n:void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,n=!1){var i;const s=Sk.for(t);let r=n?"":null!==(i=this.component.name)&&void 0!==i?i:"";const o=this.component.type?this.component.type.parameters:null,a=Tk.stringify(t,this.parameters.toSortedParameters(t,o));return a.length>0&&(r+=n?a:`${s.parameters}${a}${s.parametersEnd}`),null==this.endpoint.name||e||(r+=`${s.viewport}${this.endpoint.name}`),this.ownsScope||(r+=s.noScope),r||""}}class Kk{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new Kk(Kk.eventName,t)}}Kk.eventName="au:router:navigation-navigate";let Wk=class{constructor(t,e){this.ea=t,this.container=e,this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=Fk.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.lastNavigationIndex=-1}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){var e,n,i,s;t instanceof Fk||(t=Fk.create(t));const r=new Nk;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?r.refresh=!0:(r.first=!0,r.new=!0,this.lastNavigationIndex=0,this.navigations=[Fk.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||null!==(e=t.replacing)&&void 0!==e&&e||null!==(n=t.refreshing)&&void 0!==n&&n?null!==(i=t.refreshing)&&void 0!==i&&i||r.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):null!==(s=t.replacing)&&void 0!==s&&s?(r.replace=!0,r.new=!0,t.index=this.lastNavigationIndex):(r.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?r.forward=!0:t.historyMovement<0&&(r.back=!0)),t.navigation=r,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new Ok,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){var n,i,s,r,o,a,l;if(null!==(n=t.untracked)&&void 0!==n&&n)null!==(i=t.fromBrowser)&&void 0!==i&&i&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(null!==(s=t.replacing)&&void 0!==s&&s)0===(null!==(r=t.historyMovement)&&void 0!==r?r:0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const n=t.index;if(e&&(this.navigations=this.navigations.slice(0,n)),this.navigations[n]=t,(null!==(o=this.options.statefulHistoryLength)&&void 0!==o?o:0)>0){const t=this.navigations.length-(null!==(a=this.options.statefulHistoryLength)&&void 0!==a?a:0);for(const e of this.navigations.slice(n))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,n))}await this.saveState(t.index,!(null!==(l=t.fromBrowser)&&void 0!==l&&l))}}async cancel(t){var e,n,i;null!=this.options.store&&((null===(e=t.navigation)||void 0===e?void 0:e.new)?null!==(n=t.fromBrowser)&&void 0!==n&&n&&await this.options.store.popNavigatorState():0!==(null!==(i=t.historyMovement)&&void 0!==i?i:0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const n=this.navigations[e];return this.navigate(n)}getState(){var t,e;const n=null!=this.options.store?{...this.options.store.state}:{};return{navigations:null!==(t=null==n?void 0:n.navigations)&&void 0!==t?t:[],navigationIndex:null!==(e=null==n?void 0:n.navigationIndex)&&void 0!==e?e:-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>Fk.create(t))),this.lastNavigationIndex=e}async saveState(t,e){var n,i,s,r,o;for(let t=0;t<this.navigations.length;t++)this.navigations[t]=Fk.create(this.navigations[t].toStoredNavigation());if((null!==(n=this.options.statefulHistoryLength)&&void 0!==n?n:0)>0){const t=this.navigations.length-(null!==(i=this.options.statefulHistoryLength)&&void 0!==i?i:0);for(let e=0;e<t;e++){const n=this.navigations[e];"string"==typeof n.instruction&&"string"==typeof n.fullStateInstruction||await this.serializeNavigation(n,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const a={navigations:(null!==(s=this.navigations)&&void 0!==s?s:[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?null===(o=null===(r=this.options)||void 0===r?void 0:r.store)||void 0===o?void 0:o.pushNavigatorState(a):this.options.store.replaceNavigatorState(a)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(Kk.eventName,Kk.create(t))}toStoreableNavigation(t){const e=t instanceof Fk?t.toStoredNavigation():t;return e.instruction=Hk.stringify(this.container,e.instruction),e.fullStateInstruction=Hk.stringify(this.container,e.fullStateInstruction),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let n=[];for(const t of e)"string"!=typeof t.instruction&&n.push(...Hk.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&n.push(...Hk.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));n=Rk(n);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=Hk.stringify(this.container,t.fullStateInstruction)),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=Hk.stringify(this.container,t.instruction)),i=i.filter(((t,e,n)=>null!=t.component.instance&&n.indexOf(t)===e));const s=[];for(const t of i)await this.freeInstructionComponents(t,n,s)}freeInstructionComponents(t,e,n){var i,s;const r=t.component.instance,o=null!==(s=null===(i=t.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==r&&null!==o&&!n.some((t=>t===r))){if(!e.some((t=>t===r)))return Pk.run(null,(t=>o.freeContent(t,r)),(()=>{n.push(r)}));if(t.hasNextScopeInstructions)for(const i of t.nextScopeInstructions)return this.freeInstructionComponents(i,e,n)}}};Wk=wk([yk(0,Ci),yk(1,bn)],Wk);class Qk extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){Ik(this,(e=>e===t))}}class _k{static matchEndpoints(t,e,n,i=!1){const s=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!n.some((e=>t===e.endpoint.instance)))),o=new Qk(...e.slice());let a=null;for(_k.matchKnownEndpoints(t.router,"ViewportScope",o,r,s,!1),i||_k.matchKnownEndpoints(t.router,"Viewport",o,r,s,!1),_k.matchViewportScopeSegment(t.router,t,o,r,s);null!==(a=o.next());)a.needsEndpointDescribed=!0;return _k.matchViewportConfiguration(o,r,s),i||_k.matchSpecifiedViewport(o,r,s,!1),_k.matchLastViewport(o,r,s),i&&_k.matchSpecifiedViewport(o,r,s,!1),{matchedInstructions:s,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,n,i,s,r=!1){let o;for(;null!==(o=n.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(_k.matchEndpoint(o,o.endpoint.instance,r),s.push(o),Ik(i,(t=>t===o.endpoint.instance)),n.removeCurrent())}static matchViewportScopeSegment(t,e,n,i,s){let r;for(;null!==(r=n.next());)for(let o of i)if(o instanceof Bk&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let n=i.find((t=>t instanceof Bk&&t.name===o.name));if(void 0===n||r.isAdd(t)){const t=o.addSourceItem();n=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=n}_k.matchEndpoint(r,o,!1),s.push(r),Ik(i,(t=>t===r.endpoint.instance)),n.removeCurrent();break}}static matchViewportConfiguration(t,e,n){let i;for(;null!==(i=t.next());)for(const s of e)if(s instanceof qk&&(null==s?void 0:s.wantComponent(i.component.name))){_k.matchEndpoint(i,s,!0),n.push(i),Ik(e,(t=>t===i.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,n,i){var s;let r;for(;null!==(r=t.next());){let o=r.endpoint.instance;if(null==o){const t=r.endpoint.name;if(0===(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0))continue;for(const n of e)if(n instanceof qk&&t===n.name){o=n;break}}(null==o?void 0:o.acceptComponent(r.component.name))&&(_k.matchEndpoint(r,o,i),n.push(r),Ik(e,(t=>t===r.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,n){let i;for(;null!==(i=t.next());){const s=[];for(const t of e)t instanceof qk&&t.acceptComponent(i.component.name)&&s.push(t);if(1===s.length){const r=s[0];_k.matchEndpoint(i,r,!0),n.push(i),Ik(e,(t=>t===i.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,n){t.endpoint.set(e),n&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof qk?e.scope:e.scope.scope)}))}}class Gk{constructor(t,e,n,i){this.router=t,this.hasScope=e,this.owningScope=n,this.endpointContent=i,this.id=-1,this.parent=null,this.children=[],this.path=null,this.id=++Gk.lastId,this.owningScope=null!=n?n:this}static for(t){var e;if(null==t)return null;if(t instanceof Gk||t instanceof qk||t instanceof Bk)return t.scope;let n;if("res"in t)n=t;else if("container"in t)n=t.container;else if("$controller"in t)n=t.$controller.container;else{const e=Dh.for(t,{searchParents:!0});n=null==e?void 0:e.container}if(null==n)return null;const i=n.has(lS.closestEndpointKey,!0)?n.get(lS.closestEndpointKey):null;return null!==(e=null==i?void 0:i.scope)&&void 0!==e?e:null}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof qk}get isViewportScope(){return this.endpoint instanceof Bk}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const n=t.indexOf(e);t.splice(n,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const n=e.indexOf(t);e.splice(n,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,n,i=""){var s,r,o,a;const l=this.router,c=l.configuration.options,h=t.filter((t=>null==t.route));if(h.length>0){const e=this.findInstructions(h,c.useDirectRouting,c.useConfiguredRoutes);!h.some((t=>!t.component.none))||e.foundConfiguration||e.foundInstructions||l.unknownRoute(Hk.stringify(l,h)),t=[...t.filter((t=>null!=t.route)),...e.instructions],t.some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(i=(null!=i?i:"")+e.matching)}const u=t.filter((t=>t.component.isFunction()||t.component.isPromise()));u.length>0&&await Promise.all(u.map((t=>t.component.resolve()))),c.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let d=[];({clearEndpoints:d,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(l))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;const p=[];let f=[],{matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(t,f),m=100;do{m--||l.unresolvedInstructionsError(e,v);const c=[],h=g.map((t=>t.endpoint.instance));g.push(...d.filter((t=>!h.includes(t))).map((t=>Hk.createClear(l,t))));const u=await sS.invokeBeforeNavigation(g,e);if(!1===u)return l.cancelNavigation(e,n),[];if(!0!==u&&u!==g){const t=Hk.flat(g);v=v.filter((e=>!t.includes(e))),g=u}for(const t of g){const o=t.endpoint.instance;if(null!==o){const a=o.setNextContent(t,e);"skip"!==a&&(c.push(o),n.addEndpoint(o));const h=[o];if("swap"===a&&h.push(...o.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),Ik(d,(t=>h.includes(t))),Ik(g,(e=>e!==t&&e.isClear(l)&&h.includes(e.endpoint.instance))),!t.isClear(l)&&(null===(r=null===(s=t.scope)||void 0===s?void 0:s.parent)||void 0===r?void 0:r.isViewportScope)&&(Ik(d,(e=>e===t.scope.parent.endpoint)),Ik(g,(e=>e!==t&&e.isClear(l)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==a&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=o.scope,e.endpoint.instance=null;"skip"!==a||t.hasNextScopeInstructions||p.push(...await o.scope.processInstructions([],e,n,i))}}const b=g.filter((t=>{var e;return"skip"===(null===(e=t.endpoint.instance)||void 0===e?void 0:e.transitionAction)})),w=b.filter((t=>t.hasNextScopeInstructions));if((0===b.length||0===w.length)&&(l.isRestrictedNavigation||n.finalEndpoint(),n.run(),n.hasAllEndpoints)){const t=n.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(n.cancelled)return l.cancelNavigation(e,n),[];for(const t of c)p.every((e=>e!==t))&&p.push(t);if(f.push(...g.splice(0)),v.length>0&&({matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(v,f)),!l.isRestrictedNavigation&&(g.length>0||v.length>0)&&n.running){const t=n.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===g.length&&0===v.length){const s=[];for(const r of t){if(!r.hasNextScopeInstructions)continue;const t=null!==(a=null===(o=r.endpoint.instance)||void 0===o?void 0:o.scope)&&void 0!==a?a:r.endpoint.scope;s.push(t.processInstructions(r.nextScopeInstructions,e,n,i))}p.push(...(await Promise.all(s)).flat())}if(e.useFullStateInstruction&&(n.appendedInstructions=n.appendedInstructions.filter((t=>!t.default))),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v)),0===g.length&&0===v.length){const t=f.map((t=>{var e,n;return null===(n=(null===(e=t.endpoint.instance)||void 0===e?void 0:e.connectedCE).pendingPromise)||void 0===n?void 0:n.promise})).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v))):g=d.map((t=>Hk.createClear(l,t)))}const y=g.filter((t=>t.component.isFunction()||t.component.isPromise()));y.length>0&&await Promise.all(y.map((t=>t.component.resolve())))}while(g.length>0||v.length>0);return p}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.router.configuration.options.useConfiguredRoutes&&this.router.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.router.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const n=Hk.create(Hk.clear(e));return n.scope=this,[n,...t]}return t}getClearAllEndpoints(t){const e=this.router;let n=[];return t.some((t=>{var n;return(null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e)}))&&(n=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>{var n;return!((null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e))}))),{clearEndpoints:n,instructions:t}}findInstructions(t,e,n){var i,s;const r=this.router;let o=new bk;if(n&&!Hk.containsSiblings(r,t)){let n=t.filter((t=>t.isClear(r)||t.isClearAll(r)));const a=t.filter((t=>!t.isClear(r)&&!t.isClearAll(r)));if(a.length>0)for(const l of a){const c=this.findMatchingRoute(Hk.stringify(r,a));if(null!==(i=null==c?void 0:c.foundConfiguration)&&void 0!==i&&i)o=c,o.instructions=[...n,...o.instructions],n=[];else{if(!e)throw new Error(`No route found for: ${Hk.stringify(r,t)}!`);o.instructions=[...n,...o.instructions,l],n=[],o.remaining=Hk.stringify(r,null!==(s=l.nextScopeInstructions)&&void 0!==s?s:[])}}else o.instructions=[...n]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${Hk.stringify(r,t)}!`);o.instructions.push(...t)}o.instructions=o.instructions.filter((t=>""!==t.component.name));for(const t of o.instructions)null===t.scope&&(t.scope=this);return o}matchEndpoints(t,e,n=!1){const i=[],s=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)===this})),r=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)!==this})),{matchedInstructions:o,remainingInstructions:a}=_k.matchEndpoints(this,s,e,n);return i.push(...o),r.push(...a),{matchedInstructions:i,remainingInstructions:r}}addEndpoint(t,e,n,i={}){var s,r,o,a;let l=null!==(r=null===(s=this.getOwnedScopes().find((n=>n.type===t&&n.endpoint.name===e)))||void 0===s?void 0:s.endpoint)&&void 0!==r?r:null;return null!=n&&null!=(null==l?void 0:l.connectedCE)&&l.connectedCE!==n&&(l=null!==(a=null===(o=this.getOwnedScopes(!0).find((i=>i.type===t&&i.endpoint.name===e&&i.endpoint.connectedCE===n)))||void 0===o?void 0:o.endpoint)&&void 0!==a?a:null),null==l&&(l="Viewport"===t?new qk(this.router,e,n,this.scope,!!i.scope,i):new Bk(this.router,e,n,this.scope,!0,null,i),this.addChild(l.connectedScope)),null!=n&&l.setConnectedCE(n,i),l}removeEndpoint(t,e,n){return!(null===(null!=n?n:null)&&!e.removeEndpoint(t,n)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const n of e.slice())e.push(...n.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const n of e.slice())e.push(...n.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const n of e.slice())if(n.passThroughScope){const i=e.indexOf(n);e.splice(i,1,...n.getOwnedRoutingScopes(t))}return Rk(e)}getRoutingInstructions(t){var e;const n=Rk(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),i=[];for(const s of n){const n=s.instruction.clone(!0,!1,!1);""!==(null!==(e=n.component.name)&&void 0!==e?e:"")&&(n.nextScopeInstructions=s.connectedScope.getRoutingInstructions(t),i.push(n))}return i}canUnload(t){return Pk.run(t,(t=>Pk.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.canUnload(e):e=>t.canUnload(e))))),(t=>t.previousValue.every((t=>t))))}unload(t){return Pk.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.unload(e):e=>t.unload(e))))}matchScope(t,e=!1){const n=[];for(const i of t)i.scope===this?n.push(i):e&&i.hasNextScopeInstructions&&n.push(...this.matchScope(i.nextScopeInstructions,e));return n}findMatchingRoute(t){if(this.isViewportScope&&!this.passThroughScope)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());if(this.isViewport)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());for(const e of this.enabledChildren){const n=e.findMatchingRoute(t);if(null!==n)return n}return null}findMatchingRouteInRoutes(t,e){var n,i,s;if(!Array.isArray(e))return null;e=e.map((t=>this.ensureProperRoute(t)));const r=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const n of e)r.push({...t,path:n,handler:t}),""!==n&&r.push({...t,path:`${n}/*remainingPath`,handler:t})}const o=new bk;(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const a=e.find((e=>e.id===t));let l={params:{},endpoint:{}};if(null!=a)l.endpoint={route:{handler:a}};else{const e=new class{constructor(){this.rootState=new Vm(null,null,""),this.cache=new Map}add(t){if(t instanceof Array)for(const e of t)this.$add(e);else this.$add(t);this.cache.clear()}$add(t){const e=t.path,n=new Lm(t.path,!0===t.caseSensitive,t.handler),i=""===e?[""]:e.split("/").filter(Dm),s=[];let r=this.rootState;for(const t of i)switch(r=r.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),n=e?t.slice(1,-1):t.slice(1);s.push(n),r=new Zm(n,e).appendTo(r);break}case"*":{const e=t.slice(1);s.push(e),r=new Hm(e).appendTo(r);break}default:r=new qm(t,n.caseSensitive).appendTo(r)}const o=new Mm(n,s);r.setEndpoint(o)}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new Fm(this.rootState);for(let n=0,i=t.length;n<i;++n){const i=t.charAt(n);if(e.advance(i),e.isEmpty)return null}const n=e.getSolution();if(null===n)return null;const{endpoint:i}=n,s=n.getParams();return new Um(i,s)}};e.add(r),l=e.recognize(t)}if(null!=l){o.match=l.endpoint.route.handler,o.matching=t;const r={...l.params};if(null!=r.remainingPath&&(o.remaining=r.remainingPath,Reflect.deleteProperty(r,"remainingPath"),o.matching=o.matching.slice(0,o.matching.indexOf(o.remaining))),o.params=r,null!=(null===(n=o.match)||void 0===n?void 0:n.redirectTo)){let t=null===(i=o.match)||void 0===i?void 0:i.redirectTo;return(null!==(s=o.remaining)&&void 0!==s?s:"").length>0&&(t+=`/${o.remaining}`),this.findMatchingRouteInRoutes(t,e)}}if(o.foundConfiguration){o.instructions=Hk.clone(o.match.instructions,!1,!0);const t=o.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(o.params),e.route=o,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}o.instructions.length>0&&(o.instructions[0].routeStart=!0);const e=Hk.parse(this.router,o.remaining);if(e.length>0){let t=o.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return o}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=Hk.from(this.router,t.instructions)),t}}Gk.lastId=0;class Xk{constructor(t,e,n=0){this.taskQueue=t,this.item=e,this.cost=n,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class Yk{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{var e;null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=null!==(e=this.processing.cost)&&void 0!==e?e:0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const n=Array.isArray(t),i=n?t:[t],s=i.map(((t,n)=>Array.isArray(e)?e[n]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of i)r.push(t instanceof Xk?t:this.createQueueTask(t,s.shift()));return this.pending.push(...r),this.dequeue(),n?r:r[0]}createQueueTask(t,e){return new Xk(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,n){e(n),this.processing=null,this.dequeue()}}let Jk=class{constructor(t,e,n,i,s){this.platform=t,this.window=e,this.history=n,this.location=i,this.ea=s,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls=new Yk}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){var t,e;const{pathname:n,search:i,hash:s}=this.location,r=null!==(t=this.options.useUrlFragmentHash)&&void 0!==t&&t?s.slice(1):`${n}${i}`,o=null!==(e=this.options.useUrlFragmentHash)&&void 0!==e&&e?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new tS(n,i.slice(1),o,r)}async go(t,e=!1){const n=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const i=n,s=e;this.forwardState({eventTask:i,suppressPopstate:s}),t.resolve()},e=>{const n=this.history,i=t;n.go(i),e.resolve()}],[0,1]),n.wait()}async pushNavigatorState(t){const{title:e,path:n}=t.navigations[t.navigationIndex],i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((s=>{const r=this.history,o=t,a=e||"",l=`${i}${n}`;try{r.pushState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,l),this.setTitle(a)}s.resolve()}),1).wait()}async replaceNavigatorState(t,e,n){const i=t.navigations[t.navigationIndex];null!=e||(e=i.title),null!=n||(n=i.path);const s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((i=>{const r=this.history,o=t,a=e||"",l=`${s}${n}`;try{r.replaceState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,l),this.setTitle(a)}i.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const n=t;await this.popState(n),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:n}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async i=>{n||this.notifySubscribers(t),null!==e&&await e.execute(),i.resolve()}),1)}notifySubscribers(t){this.ea.publish(eS.eventName,eS.create(this.viewerState,t,this.history.state))}async popState(t){var e,n;await this.go(-1,!0);const i=this.history.state,s=null===(e=null==i?void 0:i.navigations)||void 0===e?void 0:e[null!==(n=null==i?void 0:i.navigationIndex)&&void 0!==n?n:0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(i)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,n){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${n}`)}}};Jk=wk([yk(0,Sc),yk(1,pd),yk(2,gd),yk(3,fd),yk(4,Ci)],Jk);class tS{constructor(t,e,n,i){this.path=t,this.query=e,this.hash=n,this.instruction=i}}class eS{constructor(t,e,n,i){this.eventName=t,this.viewerState=e,this.event=n,this.state=i}static create(t,e,n){return new eS(eS.eventName,t,e,n)}}eS.eventName="au:router:navigation-state-change";class nS{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class iS{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,n){const i=new iS(t,e);return n.syncStates.forEach((t=>i.addSyncState(t))),i}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new Ok;this.syncStates.set(t,e)}addEndpoint(t){let e=this.entities.find((e=>e.endpoint===t));return void 0!==e||(e=new nS(t),this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this)),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&Ik(this.entities,(t=>t===e))}setEndpointStep(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t)),n.step=e}addEndpointState(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t));const i=n.states.get(e);i instanceof Ok&&i.resolve(),n.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const n=this.syncStates.get(t);if(void 0!==n){if(null!==e){const i=this.entities.find((t=>t.endpoint===e));if(null===(null==i?void 0:i.syncPromise)&&n.isPending)return i.syncingState=t,i.syncPromise=new Ok,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),i.syncPromise.promise}return n.isPending?n.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let n=this.entities.find((e=>e.endpoint===t));if(null==n&&(n=this.addEndpoint(t)),n.hasReachedState(e))return;let i=n.states.get(e);return null==i&&(i=new Ok,n.states.set(e,i)),i.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0}cancel(){this.cancelled=!0,this.entities.forEach((t=>{var e,n;const i=t.endpoint.cancelContentChange(this,null!==(n=null===(e=t.step)||void 0===e?void 0:e.current)&&void 0!==n?n:null);i instanceof Promise&&i.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{var t;null===(t=this.navigation.process)||void 0===t||t.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,n){let i=[...this.appendedInstructions];t=[...t],e=[...e],n=[...n];const s=i.filter((t=>!t.default)),r=i.filter((t=>t.default));for(i=s.length>0?[...s]:[...r];i.length>0;){const s=i.shift();Ik(this.appendedInstructions,(t=>t===s));const r=e.some((t=>t.sameEndpoint(s,!0))),o=t.find((t=>t.sameEndpoint(s,!0))),a=n.find((t=>t.sameEndpoint(s,!0)));s.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&Ik(t,(t=>t===o)),void 0!==a&&Ik(n,(t=>t===a)),null!==s.endpoint.instance?t.push(s):n.push(s))}return{matchedInstructions:t,earlierMatchedInstructions:e,remainingInstructions:n}}checkSyncState(t){var e;const n=this.syncStates.get(t);if(void 0!==n&&this.hasAllEndpoints&&n.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const n of this.entities)n.syncingState===t&&(null===(e=n.syncPromise)||void 0===e||e.resolve(),n.syncPromise=null,n.syncingState=null);n.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class sS{constructor(t,e,n){var i,s;this.hook=t,this.id=n,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of null!==(i=e.include)&&void 0!==i?i:[])this.includeTargets.push(new rS(t));for(const t of null!==(s=e.exclude)&&void 0!==s?s:[])this.excludeTargets.push(new rS(t))}static add(t,e){const n=new sS(t,null!=e?e:{},++this.lastIdentity);return this.hooks[n.type].push(n),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const n=this.hooks[e].findIndex((e=>e.id===t));n>=0&&this.hooks[e].splice(n,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,n){let i=n;for(const s of this.hooks[t])if(!s.wantsMatch||s.matches(n))if(i=await s.invoke(e,n),"boolean"==typeof i){if(!i)return!1}else n=i;return i}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}sS.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},sS.lastIdentity=0;class rS{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if($k.isType(t))this.componentType=t,this.componentName=$k.getName(t);else{const e=t;null!=e.component&&(this.componentType=$k.isType(e.component)?$k.getType(e.component):null,this.componentName=$k.getName(e.component)),null!=e.viewport&&(this.viewport=Zk.isInstance(e.viewport)?e.viewport:null,this.viewportName=Zk.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(Hk.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class oS{static async getTitle(t,e,n){let i=await sS.invokeTransformTitle(t,e);if("string"!=typeof i){const t=oS.stringifyTitles(i,e,n);i=n.appTitle,i=i.replace(/\${componentTitles}/g,t),i=i.replace(/\${appTitleSeparator}/g,""!==t?n.appTitleSeparator:"")}return i=await sS.invokeTransformTitle(i,e),i}static stringifyTitles(t,e,n){const i=t.map((t=>oS.stringifyTitle(t,e,n))).filter((t=>{var e;return(null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0)>0}));return i.join(" + ")}static stringifyTitle(t,e,n){const i=t.nextScopeInstructions;let s=oS.resolveTitle(t,e,n);if(Array.isArray(i)&&i.length>0){let t=oS.stringifyTitles(i,e,n);t.length>0&&(1!==i.length&&(t=`[ ${t} ]`),s=s.length>0?"top-down"===n.componentTitleOrder?s+n.componentTitleSeparator+t:t+n.componentTitleSeparator+s:t)}return s}static resolveTitle(t,e,n){let i=t.getTitle(e);return null!=n.transformTitle&&(i=n.transformTitle(i,t,e)),i}}const aS=gn.createInterface("IRouter",(t=>t.singleton(lS)));class lS{constructor(t,e,n,i,s,r){this.container=t,this.ea=e,this.navigator=n,this.viewer=i,this.store=s,this.configuration=r,this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.handleNavigatorNavigateEvent=t=>{this.processNavigation(t.navigation).catch((t=>{throw t}))},this.handleNavigatorStateChangeEvent=t=>{var e;if(null!=(null===(e=t.state)||void 0===e?void 0:e.navigationIndex)){const e=Fk.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{var e;this.loadedFirst=!0;const n=this.configuration.options,i=iS.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(i),i.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(pS.eventName,pS.create(t));let s="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await sS.invokeTransformFromUrl(t.instruction,i.navigation);const r=n.basePath;null!==r&&"string"==typeof s&&s.startsWith(r)&&!n.useUrlFragmentHash&&(s=s.slice(r.length)),"/"===s&&(s=""),"string"==typeof s&&(s=""===s?[new Hk("")]:Hk.parse(this,s)),null!==(e=t.scope)&&void 0!==e||(t.scope=this.rootScope.scope);const o=await t.scope.processInstructions(s,t,i);return Pk.run(null,(()=>(i.finalEndpoint(),i.waitForSyncState("completed"))),(()=>(i.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&o.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(var t;this.coordinators.length>0&&this.coordinators[0].completed;){const e=this.coordinators.shift();await this.navigator.finalize(e.navigation,!1),this.ea.publish(vS.eventName,vS.create(e.navigation)),this.ea.publish(fS.eventName,fS.create(e.navigation)),null===(t=e.navigation.process)||void 0===t||t.resolve(!0)}}))}}static get inject(){return[bn,Ci,Wk,Jk,Jk,PS]}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw new Error("Router has already been started");this.isActive=!0;const t=this.container.get(Xu);this.rootScope=new Bk(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const n=new URL(t.host.baseURI);e.basePath=n.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.navigatorStateChangeEventSubscription=this.ea.subscribe(eS.eventName,this.handleNavigatorStateChangeEvent),this.navigatorNavigateEventSubscription=this.ea.subscribe(Kk.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(hS.eventName,hS.create())}stop(){if(!this.isActive)throw new Error("Router has not been started");this.ea.publish(uS.eventName,uS.create()),this.navigator.stop(),this.viewer.stop(),this.navigatorStateChangeEventSubscription.dispose(),this.navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,n=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,n}getEndpoint(t,e){var n;return null!==(n=this.allEndpoints(t).find((t=>t.name===e)))&&void 0!==n?n:null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,e,n,i,s){const r=n.container,o=(r.has(lS.closestEndpointKey,!0)?r.get(lS.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=o.addEndpoint(e,i,n,s),Hn.instance(lS.closestEndpointKey,t).register(r)),t}disconnectEndpoint(t,e,n){if(!e.connectedScope.parent.removeEndpoint(t,e,n))throw new Error("Failed to remove endpoint: "+e.name)}async load(t,e){var n,i,s;e=null!=e?e:{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let r=null;if(({instructions:t,scope:r}=this.applyLoadOptions(t,e)),null!==(n=e.append)&&void 0!==n&&n&&(!this.loadedFirst||this.isNavigating))return t=Hk.from(this,t),this.appendInstructions(t,r),Promise.resolve();const o=Fk.create({instruction:t,fullStateInstruction:"",scope:r,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:null!==(i=e.replacing)&&void 0!==i&&i||e.replace,repeating:e.append,fromBrowser:null!==(s=e.fromBrowser)&&void 0!==s&&s,origin:e.origin,completed:!1});return this.navigator.navigate(o)}applyLoadOptions(t,e,n=!0){var i,s,r;"origin"in(e=null!=e?e:{})&&!("context"in e)&&(e.context=e.origin);let o=null!==(s=Gk.for(null!==(i=e.context)&&void 0!==i?i:null))&&void 0!==s?s:null;if("string"==typeof t){if(t.startsWith("/"))o=null;else{if(t.startsWith("."))for(t.startsWith("./")&&(t=t.slice(2));t.startsWith("../");)o=null!==(r=null==o?void 0:o.parent)&&void 0!==r?r:o,t=t.slice(3);null!=(null==o?void 0:o.path)&&(t=`${o.path}/${t}`,o=null)}if(!n){t=Hk.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}}else{t=Hk.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}return{instructions:t,scope:o}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw new Error(`Parameter instructions to checkActivate can not be a string ('${t}')!`);e=null!=e?e:{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>{var e;return null!==(e=t.scope)&&void 0!==e?e:t.scope=this.rootScope.scope}));const n=Rk(t.map((t=>t.scope)));for(const e of n){const n=e.matchScope(t,!1),i=e.matchScope(this.activeComponents,!0);if(!Hk.contains(this,i,n,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(mS.eventName,mS.create(t)),this.ea.publish(fS.eventName,fS.create(t)),function(t){const e=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return e.remainingInstructions=t,console.log(e,e.remainingInstructions),e}(e)}cancelNavigation(t,e){e.cancel(),this.ea.publish(gS.eventName,gS.create(t)),this.ea.publish(fS.eventName,fS.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const n of t)null===n.scope&&(n.scope=e);let n=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){n=this.coordinators[t];break}if(null===n){if(this.loadedFirst)throw Error("Failed to append routing instructions to coordinator");this.appendedInstructions.push(...t)}null==n||n.enqueueAppendedInstructions(t)}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.configuration.options.useConfiguredRoutes&&this.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}async updateNavigation(t){var e,n,i,s,r,o,a;this.rootScope.scope.reparentRoutingInstructions();const l=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:c}=this.rootScope.scope.matchEndpoints(l,[],!0),h=100;for(;c.length>0;){if(0==h--)throw new Error("Failed to find viewport when updating viewer paths.");c=c.map((t=>{var e;const{matchedInstructions:n}=t.endpoint.instance.scope.matchEndpoints(null!==(e=t.nextScopeInstructions)&&void 0!==e?e:[],[],!0);return n})).flat()}t.timestamp>=(null!==(n=null===(e=this.activeNavigation)||void 0===e?void 0:e.timestamp)&&void 0!==n?n:0)&&(this.activeNavigation=t,this.activeComponents=l);let u=await sS.invokeTransformToUrl(l,t);if("string"!=typeof u&&(u=Hk.stringify(this,u,!1,!0)),u=await sS.invokeTransformToUrl(u,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[n,i]of Object.entries(t.parameters)){n=encodeURIComponent(n),Array.isArray(i)||(i=[i]);for(const t of i)e.append(n,encodeURIComponent(t))}t.query=e.toString()}let d=`${this.configuration.options.basePath}/`;(null===d||""!==u&&"/"===u[0]||this.configuration.options.useUrlFragmentHash)&&(d="");const p=(null!==(s=null===(i=t.query)||void 0===i?void 0:i.length)&&void 0!==s?s:0)>0?"?"+t.query:"",f=(null!==(o=null===(r=t.fragment)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>0?"#"+t.fragment:"";t.path=d+u+p+f;const g=[Hk.create(Hk.clear(this))];if(g.push(...Hk.clone(l,this.statefulHistory)),t.fullStateInstruction=g,null===(null!==(a=t.title)&&void 0!==a?a:null)){const e=await oS.getTitle(l,t,this.configuration.options.title);null!==e&&(t.title=e)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[n,i]=t.split("#");t=n,e.fragment=i}return t}extractQuery(t,e){var n;if("string"==typeof t&&null==e.query){const[n,i]=t.split("?");t=n,e.query=i}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(null!==(n=e.parameters)&&void 0!==n||(e.parameters={}),new URLSearchParams(e.query).forEach(((t,n)=>{n=decodeURIComponent(n),t=decodeURIComponent(t),n in e.parameters?(Array.isArray(e.parameters[n])||(e.parameters[n]=[e.parameters[n]]),e.parameters[n].push(t)):e.parameters[n]=t}))),t}}lS.closestEndpointKey=on.annotation.keyFor("closest-endpoint");class cS{constructor(t){this.eventName=t}}class hS extends cS{static create(){return new hS(this.eventName)}}hS.eventName="au:router:router-start";class uS extends cS{static create(){return new uS(this.eventName)}}uS.eventName="au:router:router-stop";class dS{constructor(t,e){this.eventName=t,this.navigation=e}}class pS extends dS{static create(t){return new pS(this.eventName,t)}}pS.eventName="au:router:navigation-start";class fS extends dS{static create(t){return new fS(this.eventName,t)}}fS.eventName="au:router:navigation-end";class gS extends dS{static create(t){return new gS(this.eventName,t)}}gS.eventName="au:router:navigation-cancel";class vS extends dS{static create(t){return new vS(this.eventName,t)}}vS.eventName="au:router:navigation-complete";class mS extends dS{static create(t){return new mS(this.eventName,t)}}mS.eventName="au:router:navigation-error";const bS=gn.createInterface("ILinkHandler",(t=>t.singleton(wS)));let wS=class{constructor(t,e){this.window=t,this.router=e}handleEvent(t){this.handleClick(t)}handleClick(t){var e,n;if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const i=t.currentTarget;if(i.hasAttribute("external"))return;const s=null!==(e=i.getAttribute("target"))&&void 0!==e?e:"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const r=Sh.for(i,"load"),o=void 0!==r?r.viewModel.value:null,a=this.router.configuration.options.useHref&&i.hasAttribute("href")?i.getAttribute("href"):null;if(!(null!==o&&0!==o.length||null!==a&&0!==a.length))return;t.preventDefault();let l=null!==(n=null!=o?o:a)&&void 0!==n?n:"";"string"==typeof l&&l.startsWith("#")&&(l=l.slice(1),l.startsWith("/")||(l=`/${l}`)),this.router.load(l,{origin:i}).catch((t=>{throw t}))}};var yS;function xS(t,e,n,i,s=!1){var r;if(s)return""===e;if(n)return e;const o=null!==(r=i.getAttribute(t))&&void 0!==r?r:"";return o.length>0?o:e}function kS(t,e){if(!t.isActive)return new Promise((t=>{const n=e.subscribe(hS.eventName,(()=>{t(),n.dispose()}))}))}function SS(t,e,n,i){var s,r;let o=null===(r=null===(s=Sh.for(n,"considered-active"))||void 0===s?void 0:s.viewModel)||void 0===r?void 0:r.value;void 0===o&&(o=i);const a=t.applyLoadOptions(o,{context:e}),l=Hk.from(t,a.instructions);for(const t of l)null===t.scope&&(t.scope=a.scope);return l}function CS(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return null!=e||(e=t),e}wS=wk([yk(0,pd),yk(1,aS)],wS),function(t){t.default="default",t.disallow="disallow",t.reload="reload",t.refresh="refresh"}(yS||(yS={}));const AS=Dh.createInjectable();let ES=class{constructor(t,e,n,i,s,r){this.router=t,this.element=e,this.container=n,this.ea=i,this.parentViewport=s,this.instruction=r,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1}hydrated(t){this.controller=t,this.container=t.container;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new Ok)),Pk.run(null,(()=>kS(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e,n){return this.isBound=!0,Pk.run(null,(()=>kS(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{var t;null!=(null===(t=this.endpoint)||void 0===t?void 0:t.activeResolve)&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{var e;if(null!==this.endpoint&&null===this.endpoint.getNextContent())return null===(e=this.endpoint.activate(null,t,this.controller,n,void 0))||void 0===e?void 0:e.asValue}))}detaching(t,e,n){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e,n)}unbinding(t,e,n){if(null!==this.endpoint)return this.disconnect(null)}dispose(){var t;null===(t=this.endpoint)||void 0===t||t.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,n=xS("name",this.name,t,e),i={};i.scope=!xS("no-scope",this.noScope,!1,e,!0),i.usedBy=xS("used-by",this.usedBy,t,e),i.default=xS("default",this.default,t,e),i.fallback=xS("fallback",this.fallback,t,e),i.noLink=xS("no-link",this.noLink,t,e,!0),i.noTitle=xS("no-title",this.noTitle,t,e,!0),i.noHistory=xS("no-history",this.noHistory,t,e,!0),i.stateful=xS("stateful",this.stateful,t,e,!0),Object.keys(i).forEach((t=>{void 0===i[t]&&delete i[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,n,i);const s=this.parentViewport;null!=s&&(Ik(s.pendingChildren,(t=>t===this)),0===s.pendingChildren.length&&null!==s.pendingPromise&&(s.pendingPromise.resolve(),s.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const n=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const i in t)this.element.classList.toggle(`${n}-${i}`,e&&t[i])}};wk([ql],ES.prototype,"name",void 0),wk([ql],ES.prototype,"usedBy",void 0),wk([ql],ES.prototype,"default",void 0),wk([ql],ES.prototype,"fallback",void 0),wk([ql],ES.prototype,"noScope",void 0),wk([ql],ES.prototype,"noLink",void 0),wk([ql],ES.prototype,"noTitle",void 0),wk([ql],ES.prototype,"noHistory",void 0),wk([ql],ES.prototype,"stateful",void 0),ES=wk([Th({name:"au-viewport",injectable:AS}),yk(0,aS),yk(1,sd),yk(2,bn),yk(3,Ci),yk(4,AS),yk(5,$d)],ES);const TS=Dh.createInjectable();let $S=class{constructor(t,e,n,i,s){this.router=t,this.element=e,this.container=n,this.parent=i,this.parentController=s,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e,n){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e,n){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let n=this.getAttribute("catches",this.catches);void 0!==n&&(e.catches=n),n=this.getAttribute("collection",this.collection,!0),void 0!==n&&(e.collection=n),e.source=this.source||null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,n=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(n)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};wk([ql],$S.prototype,"name",void 0),wk([ql],$S.prototype,"catches",void 0),wk([ql],$S.prototype,"collection",void 0),wk([ql],$S.prototype,"source",void 0),$S=wk([Th({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:TS}),yk(0,aS),yk(1,sd),yk(2,bn),yk(3,TS),yk(4,Uu)],$S);let IS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.hasHref=null,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(fS.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#${t}`),this.element.setAttribute("href",t)}}updateActive(){const t=Sh.for(this.element,"load").parent,e=SS(this.router,t,this.element,this.value);CS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}};wk([ql({mode:Jb.toView})],IS.prototype,"value",void 0),IS=wk([mh("load"),yk(0,sd),yk(1,aS),yk(2,bS),yk(3,Ci)],IS);let RS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(fS.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){var t;this.element.removeEventListener("click",this.linkHandler),null===(t=this.routerNavigationSubscription)||void 0===t||t.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=Sh.for(this.element,"href").parent,e=SS(this.router,t,this.element,this.value);CS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){var t;const e=this.$controller.parent.children;return null!==(t=null==e?void 0:e.some((t=>1===t.vmKind&&t.viewModel instanceof IS)))&&void 0!==t&&t}};wk([ql({mode:Jb.toView})],RS.prototype,"value",void 0),RS=wk([mh({name:"href",noMultiBindings:!0}),yk(0,sd),yk(1,aS),yk(2,bS),yk(3,Ci)],RS);let OS=class{};wk([ql({mode:Jb.toView})],OS.prototype,"value",void 0),OS=wk([mh("considered-active")],OS);const PS=gn.createInterface("IRouterConfiguration",(t=>t.singleton(US))),LS=[aS],MS=[ES,$S,IS,RS,OS];class US{static register(t){const e=t.get(PS);return e.options=US.options,e.options.setRouterConfiguration(e),US.options=Ak.create(),t.register(...LS,...MS,rh.beforeActivate(aS,US.configurationCall),rh.afterActivate(aS,(t=>t.initialLoad())),rh.afterDeactivate(aS,(t=>t.stop())))}static customize(t){return void 0===t?(US.options=Ak.create(),US.configurationCall=t=>{t.start()}):t instanceof Function?US.configurationCall=t:(US.options=Ak.create(),US.options.apply(t)),US}static createContainer(){return this.register(gn.createContainer())}static for(t){return t instanceof lS?t.configuration:t.get(PS)}apply(t,e=!1){e&&(this.options=Ak.create()),this.options.apply(t)}addHook(t,e){return sS.add(t,e)}removeHook(t){return sS.remove(t)}removeAllHooks(){return sS.removeAll()}}function jS(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function BS(t,e){return function(n,i){e(n,i,t)}}function NS(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}US.options=Ak.create(),US.configurationCall=t=>{t.start()},Object.create,Object.create;var FS=n(3379),VS=n.n(FS),DS=n(7795),zS=n.n(DS),qS=n(569),ZS=n.n(qS),HS=n(3565),KS=n.n(HS),WS=n(9216),QS=n.n(WS),_S=n(4589),GS=n.n(_S),XS=n(1138),YS={};YS.styleTagTransform=GS(),YS.setAttributes=KS(),YS.insert=ZS().bind(null,"head"),YS.domAPI=zS(),YS.insertStyleElement=QS(),VS()(XS.Z,YS),XS.Z&&XS.Z.locals&&XS.Z.locals;var JS=n(3845),tC={};tC.styleTagTransform=GS(),tC.setAttributes=KS(),tC.insert=ZS().bind(null,"head"),tC.domAPI=zS(),tC.insertStyleElement=QS(),VS()(JS.Z,tC),JS.Z&&JS.Z.locals&&JS.Z.locals;const eC="description-block",nC='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',iC=nC,sC=[];let rC;function oC(t){rC||(rC=Dh.define({name:eC,template:nC,dependencies:sC})),t.register(rC)}const aC={character:{type:"magus",physicalStatus:{fatigue:0,lightWounds:0,mediumWounds:0,heavyWounds:0,totalPenalty:0},description:{name:"",description:""},abilities:[],personalityTraits:[],characteristics:{communication:{value:0,specialisation:"",agingPoints:0},dexterity:{value:0,specialisation:"",agingPoints:0},intelligence:{value:0,specialisation:"",agingPoints:0},perception:{value:0,specialisation:"",agingPoints:0},presence:{value:0,specialisation:"",agingPoints:0},quickness:{value:0,specialisation:"",agingPoints:0},stamina:{value:0,specialisation:"",agingPoints:0},strength:{value:0,specialisation:"",agingPoints:0}},flaws:[],virtues:[],arts:{creo:{level:0,xp:0,puissant:!1},muto:{level:0,xp:0,puissant:!1},rego:{level:0,xp:0,puissant:!1},intellego:{level:0,xp:0,puissant:!1},perdo:{level:0,xp:0,puissant:!1},animal:{level:0,xp:0,puissant:!1},auram:{level:0,xp:0,puissant:!1},aquam:{level:0,xp:0,puissant:!1},ignem:{level:0,xp:0,puissant:!1},terram:{level:0,xp:0,puissant:!1},herbam:{level:0,xp:0,puissant:!1},mentem:{level:0,xp:0,puissant:!1},corpus:{level:0,xp:0,puissant:!1},imaginem:{level:0,xp:0,puissant:!1},vim:{level:0,xp:0,puissant:!1}},spells:[],spellWishlist:[],ageing:{age:25,apparentAge:25,birthYear:1195,currentYear:1220,decrepitudeLevel:0,decrepitudePoints:0,longevityModifier:0,ageingRollModifier:0,livingConditionModifier:0},confidence:{score:3},warping:{warpingPoints:0,warpingLevel:0,ongoingEffects:[]},activeMagic:[],xpEntries:[],notes:"",background:"",lab:{art1:{name:"",rating:0},art2:{name:"",rating:0},art3:{name:"",rating:0},art4:{name:"",rating:0},specialisation1:{name:"",rating:0},specialisation2:{name:"",rating:0},auraBonus:0,description:"",effectiveSafety:0,flaws:[],virtues:[],intelligenceBonus:0,labBaseQuality:0,livingConditionsModifier:0,magicTheory:0,occupiedSize:0,refinement:0,size:0,availableModifiers:[{name:"GQ"},{name:"Safety"},{name:"Health"},{name:"Aesthetics"},{name:"Upkeep"},{name:"Warping"}],researchProjects:[],inventiveGeniusVirtue:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1},spellcastingStats:{arts:"",aura:0,ceremonial:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1,positiveCycle:!1,focus:!1,largeGestures:!1,loudVoice:!1,similarFomulaicSpellBonus:0,spontaneousCastingTotal:0,staminaSpecialisation:!1,talismanBonus:0},sigil:"",belongings:{carried:"",inSanctum:"",vis:[]},talisman:{description:"",investedVis:0,spentVis:0,bonuses:[],effects:[]},magicItems:[],quests:[],npcs:[],familiar:{name:"",arts:"",bronzeBondLevel:0,silverBondLevel:0,goldBondLevel:0,description:"",isSpirit:!1,additionalInfo:"",effects:[]}}};function lC(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if("object"==typeof t){if("function"==typeof t[Symbol.iterator]){const e=[];if(t.length>0)for(const n of t)e.push(lC(n));return e}{const e=Object.keys(t),n={};if(e.length>0)for(const i of e)n[i]=lC(t[i]);return n}}return t}const cC={name:""};function hC(t){return nm(t,lC(aC))}async function uC(t,e){const n=await e.text();return nm(t,JSON.parse(n))}function dC(t,e){const n=lC(t.present);return n.character=e,nm(t,n)}function pC(t,e){console.log("Saving characteristics",e);const n=lC(t.present);return n.character.characteristics=e,KC(n),iA(n),nm(t,n)}function fC(t,e){console.log("Saving abilities",e);const n=lC(t.present);return n.character.abilities=zC(e),iA(n),KC(n),nm(t,n)}function gC(t,e){console.log("Saving personality traits",e);const n=lC(t.present);return n.character.personalityTraits=zC(e),nm(t,n)}function vC(t,e){console.log("Saving virtues",e);const n=lC(t.present);return n.character.virtues=zC(e),function(t){t.character.abilities.forEach((e=>{e.puissant=t.character.virtues.findIndex((t=>t.name==`Puissant ${e.name}`))>=0})),t.character.arts.animal.puissant=t.character.virtues.findIndex((t=>"Puissant Animal"==t.name))>=0,t.character.arts.aquam.puissant=t.character.virtues.findIndex((t=>"Puissant Aquam"==t.name))>=0,t.character.arts.auram.puissant=t.character.virtues.findIndex((t=>"Puissant Auram"==t.name))>=0,t.character.arts.corpus.puissant=t.character.virtues.findIndex((t=>"Puissant Corpus"==t.name))>=0,t.character.arts.creo.puissant=t.character.virtues.findIndex((t=>"Puissant Creo"==t.name))>=0,t.character.arts.herbam.puissant=t.character.virtues.findIndex((t=>"Puissant Herbam"==t.name))>=0,t.character.arts.ignem.puissant=t.character.virtues.findIndex((t=>"Puissant Ignem"==t.name))>=0,t.character.arts.imaginem.puissant=t.character.virtues.findIndex((t=>"Puissant Imaginem"==t.name))>=0,t.character.arts.intellego.puissant=t.character.virtues.findIndex((t=>"Puissant Intellego"==t.name))>=0,t.character.arts.mentem.puissant=t.character.virtues.findIndex((t=>"Puissant Mentem"==t.name))>=0,t.character.arts.muto.puissant=t.character.virtues.findIndex((t=>"Puissant Muto"==t.name))>=0,t.character.arts.perdo.puissant=t.character.virtues.findIndex((t=>"Puissant Perdo"==t.name))>=0,t.character.arts.rego.puissant=t.character.virtues.findIndex((t=>"Puissant Rego"==t.name))>=0,t.character.arts.terram.puissant=t.character.virtues.findIndex((t=>"Puissant Terram"==t.name))>=0,t.character.arts.vim.puissant=t.character.virtues.findIndex((t=>"Puissant Vim"==t.name))>=0}(n),qC(n),KC(n),tA(n),nm(t,n)}function mC(t,e){console.log("Saving flaws",e);const n=lC(t.present);return n.character.flaws=zC(e),KC(n),tA(n),nm(t,n)}function bC(t,e){console.log("Saving description",e);const n=lC(t.present);return n.character.description=e,nm(t,n)}function wC(t,e){console.log("Saving physical status",e);const n=lC(t.present);return n.character.physicalStatus=e,function(t){t.character.physicalStatus.totalPenalty=function(t){let e=t.character.physicalStatus;return-e.lightWounds+-3*e.mediumWounds+-5*e.heavyWounds}(t)+function(t){let e=t.character.physicalStatus.fatigue;return e<=1?0:2===e?-1:3===e?-3:4===e?-5:0}(t)}(n),KC(n),nm(t,n)}function yC(t,e){console.log("Saving arts",e);const n=lC(t.present);return n.character.arts=e,KC(n),iA(n),nm(t,n)}function xC(t,e){console.log("Saving spells",e);const n=lC(t.present);return n.character.spells=zC(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),DC(n),KC(n),nm(t,n)}function kC(t,e){console.log("Saving spell wishlist",e);const n=lC(t.present);return n.character.spellWishlist=zC(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),DC(n),nm(t,n)}function SC(t,e){console.log("Saving ageing",e);const n=lC(t.present);return n.character.ageing=e,qC(n),function(t){for(t.character.xpEntries||(t.character.xpEntries=[JC(t.character.ageing.currentYear,"Spring"),JC(t.character.ageing.currentYear,"Summer"),JC(t.character.ageing.currentYear,"Fall"),JC(t.character.ageing.currentYear,"Winter")]),t.character.xpEntries=t.character.xpEntries.filter((e=>e.year<t.character.ageing.currentYear+3)),0==t.character.xpEntries.length&&(t.character.xpEntries=[JC(t.character.ageing.currentYear,"Spring"),JC(t.character.ageing.currentYear,"Summer"),JC(t.character.ageing.currentYear,"Fall"),JC(t.character.ageing.currentYear,"Winter")]);t.character.xpEntries[t.character.xpEntries.length-1].year<t.character.ageing.currentYear+3;){let e=t.character.xpEntries[t.character.xpEntries.length-1].year+1;t.character.xpEntries.push(JC(e,"Spring")),t.character.xpEntries.push(JC(e,"Summer")),t.character.xpEntries.push(JC(e,"Fall")),t.character.xpEntries.push(JC(e,"Winter"))}t.character.xpEntries.forEach((e=>e.planningMode=e.year>=t.character.ageing.currentYear))}(n),nm(t,n)}function CC(t,e){console.log("Saving confidence",e);const n=lC(t.present);return n.character.confidence=e,nm(t,n)}function AC(t,e){console.log("Saving warping",e);const n=lC(t.present);return n.character.warping=e,n.character.warping.ongoingEffects=zC(e.ongoingEffects),function(t){t.character.warping.warpingLevel=HC(t.character.warping.warpingPoints,0)}(n),nm(t,n)}function EC(t,e){console.log("Saving active magic",e);const n=lC(t.present);return n.character.activeMagic=zC(e),function(t){t.character.activeMagic.forEach((t=>t.penetration=t.active?t.penetration:0))}(n),nm(t,n)}function TC(t,e){console.log("Saving xp entries",e);const n=lC(t.present);return n.character.xpEntries=e,nm(t,n)}function $C(t,e){console.log("Saving notes",e);const n=lC(t.present);return n.character.notes=e,nm(t,n)}function IC(t,e){console.log("Saving lab",e);const n=lC(t.present);return n.character.lab=e,n.character.lab.virtues=zC(n.character.lab.virtues),n.character.lab.flaws=zC(n.character.lab.flaws),n.character.lab.availableModifiers=n.character.lab.availableModifiers.filter((t=>""!=t.name)),n.character.lab.researchProjects=zC(n.character.lab.researchProjects),tA(n),nm(t,n)}function RC(t,e){console.log("Importing character");const n=lC(t.present);return n.character=JSON.parse(e),nm(t,n)}function OC(t,e){console.log("Saving spellcasting stats",e);const n=lC(t.present);return n.character.spellcastingStats=e,KC(n),nm(t,n)}function PC(t,e){console.log("Saving character type",e);const n=lC(t.present);return n.character.type=e,KC(n),nm(t,n)}function LC(t,e){console.log("Saving background",e);const n=lC(t.present);return n.character.background=e,nm(t,n)}function MC(t,e){console.log("Saving sigil",e);const n=lC(t.present);return n.character.sigil=e,nm(t,n)}function UC(t,e){console.log("Saving belongings",e);const n=lC(t.present);return n.character.belongings=e,n.character.belongings.vis=zC(e.vis),nm(t,n)}function jC(t,e){console.log("Saving talisman",e);const n=lC(t.present);return n.character.talisman=e,n.character.talisman.effects=zC(e.effects),n.character.talisman.bonuses=zC(e.bonuses),nm(t,n)}function BC(t,e){console.log("Saving magic items",e);const n=lC(t.present);return n.character.magicItems=zC(e),n.character.magicItems.forEach((t=>t.effects=zC(t.effects))),nm(t,n)}function NC(t,e){console.log("Saving quests",e);const n=lC(t.present);return n.character.quests=zC(e).sort(((t,e)=>t.priority-e.priority)),nm(t,n)}function FC(t,e){console.log("Saving npcs",e);const n=lC(t.present);return n.character.npcs=zC(e),nm(t,n)}function VC(t,e){console.log("Saving familiar",e);const n=lC(t.present);return n.character.familiar=e,n.character.familiar.effects=zC(e.effects),ZC(n),KC(n),nm(t,n)}function DC(t){let e=t.character.spellWishlist.filter((t=>!t.onWishlist)),n=t.character.spells.filter((t=>t.onWishlist));t.character.spellWishlist=t.character.spellWishlist.filter((t=>t.onWishlist)).concat(n),t.character.spells=t.character.spells.filter((t=>!t.onWishlist)).concat(e)}function zC(t){return t.filter((t=>""!=t.name)).sort(((t,e)=>t.name.localeCompare(e.name)))}function qC(t){ZC(t),function(t){t.character.ageing.decrepitudeLevel=HC(t.character.ageing.decrepitudePoints,0)}(t),function(t){t.character.ageing.age=t.character.ageing.currentYear-t.character.ageing.birthYear}(t)}function ZC(t){let e=t.character.virtues.findIndex((t=>t.name.indexOf("Strong Faerie Blood")>=0))>=0?3:t.character.virtues.findIndex((t=>t.name.indexOf("Faerie Blood")>=0))>=0?1:0;t.character.ageing.ageingRollModifier=t.character.familiar.bronzeBondLevel+t.character.ageing.livingConditionModifier+t.character.ageing.longevityModifier+t.character.lab.livingConditionsModifier+e-Math.ceil(t.character.ageing.age/10)}function HC(t,e){let n=5*(e+1);return n>t?e:HC(t-n,e+1)}function KC(t){var e;(null===(e=null==t?void 0:t.character)||void 0===e?void 0:e.arts)&&(t.character.spellcastingStats.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.spontaneousCastingTotal=function(t){let e=t.character.spellcastingStats;return WC(t)+_C(t,e.arts,"",e.focus)+e.talismanBonus+e.similarFomulaicSpellBonus+(e.ceremonial?QC(t,"Ceremonial"):0)}(t),t.character.spells.forEach((e=>e.castingTotal=function(t,e){return WC(t)+_C(t,e.arts,e.prerequisites,e.focus)+e.attunementBonus+e.masteryLevel+(e.ritual?QC(t,"Ritual"):0)}(t,e))))}function WC(t){let e=t.character.spellcastingStats,n=e.cyclicMagicVirtue?3:0,i=e.cyclicMagicFlaw?-3:0,s=t.character.familiar.isSpirit?t.character.familiar.bronzeBondLevel:0;return t.character.characteristics.stamina.value+t.character.physicalStatus.totalPenalty+s+e.aura+(e.positiveCycle?n:i)+(e.staminaSpecialisation?1:0)+(e.largeGestures?1:0)+(e.loudVoice?1:0)}function QC(t,e){var n,i;let s=t.character.abilities.find((t=>"Artes Liberales"==t.name)),r=t.character.abilities.find((t=>"Philosophiae"==t.name)),o=(null==s?void 0:s.specialisation)==e?1:0,a=(null==r?void 0:r.specialisation)==e?1:0,l=(null==s?void 0:s.puissant)?3:0,c=(null==r?void 0:r.puissant)?3:0;return(null!==(n=null==s?void 0:s.level)&&void 0!==n?n:0)+o+l+(null!==(i=null==r?void 0:r.level)&&void 0!==i?i:0)+a+c}function _C(t,e,n,i){let s=GC(t,e),r=XC(t,e);if(null===s||null==r)return 0;let o=GC(t,n),a=XC(t,n),l=Math.min(s,null!=o?o:1e3),c=Math.min(r,null!=a?a:1e3);return l+c+(i?Math.min(l,c):0)}function GC(t,e){let n=t.character.arts;return e.indexOf("Cr")>=0?YC(n.creo):e.indexOf("In")>=0?YC(n.intellego):e.indexOf("Mu")>=0?YC(n.muto):e.indexOf("Pe")>=0?YC(n.perdo):e.indexOf("Re")>=0?YC(n.rego):null}function XC(t,e){let n=t.character.arts;return e.indexOf("An")>=0?YC(n.animal):e.indexOf("Aq")>=0?YC(n.aquam):e.indexOf("Au")>=0?YC(n.auram):e.indexOf("Co")>=0?YC(n.corpus):e.indexOf("He")>=0?YC(n.herbam):e.indexOf("Ig")>=0?YC(n.ignem):e.indexOf("Im")>=0?YC(n.imaginem):e.indexOf("Me")>=0?YC(n.mentem):e.indexOf("Te")>=0?YC(n.terram):e.indexOf("Vi")>=0?YC(n.vim):null}function YC(t){return t.level+(t.puissant?3:0)}function JC(t,e){return{year:t,xp:"",correspondence:"",description:"",plans:"",areaLore:"",season:e,planningMode:!0}}function tA(t){eA(t.character.lab.virtues,t.character.lab.availableModifiers),eA(t.character.lab.flaws,t.character.lab.availableModifiers),function(t){var e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v;let m=t.character.lab,b=nA(m),w=m.virtues.concat(m.flaws).reduce(((t,e)=>t+e.cost),0);m.occupiedSize=m.size+w-m.refinement;let y=null!==(n=null===(e=b.find((t=>"Safety"==t.name)))||void 0===e?void 0:e.rating)&&void 0!==n?n:0,x=null!==(s=null===(i=b.find((t=>"Health"==t.name)))||void 0===i?void 0:i.rating)&&void 0!==s?s:0;m.livingConditionsModifier=x>=0?Math.floor(x/2):Math.ceil(x/2),m.effectiveSafety=y-Math.max(0,m.occupiedSize)+m.refinement,m.specialisation1.rating=null!==(o=null===(r=b.find((t=>t.name==m.specialisation1.name)))||void 0===r?void 0:r.rating)&&void 0!==o?o:0,m.specialisation2.rating=null!==(l=null===(a=b.find((t=>t.name==m.specialisation2.name)))||void 0===a?void 0:a.rating)&&void 0!==l?l:0,m.art1.rating=null!==(h=null===(c=b.find((t=>t.name==m.art1.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0,m.art2.rating=null!==(d=null===(u=b.find((t=>t.name==m.art2.name)))||void 0===u?void 0:u.rating)&&void 0!==d?d:0,m.art3.rating=null!==(f=null===(p=b.find((t=>t.name==m.art3.name)))||void 0===p?void 0:p.rating)&&void 0!==f?f:0,m.art4.rating=null!==(v=null===(g=b.find((t=>t.name==m.art4.name)))||void 0===g?void 0:g.rating)&&void 0!==v?v:0,t.character.lab.inventiveGeniusVirtue=t.character.virtues.findIndex((t=>"Inventive Genius"==t.name))>=0,t.character.lab.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.lab.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0}(t),iA(t),ZC(t)}function eA(t,e){t.forEach((t=>{let n=t.modifiers.filter((t=>0!=t.rating));t.modifiers=e.map((t=>({name:t.name,rating:0}))),n.forEach((e=>{let n=t.modifiers.findIndex((t=>t.name==e.name));n>=0&&(t.modifiers[n].rating=e.rating)})),t.category.length>1&&("outfitting".startsWith(t.category.toLocaleLowerCase())&&(t.category="Outfitting"),"stucture".startsWith(t.category.toLocaleLowerCase())&&(t.category="Structure"),"supernatural".startsWith(t.category.toLocaleLowerCase())&&(t.category="Supernatural"))}))}function nA(t){return t.availableModifiers.map((e=>({name:e.name,rating:t.virtues.concat(t.flaws).reduce(((t,n)=>t.concat(n.modifiers.filter((t=>t.name==e.name)))),[]).reduce(((t,e)=>t+e.rating),0)})))}function iA(t){let e=t.character.lab,n=e.inventiveGeniusVirtue?3:0,i=e.inventiveGeniusVirtue?6:0,s=e.cyclicMagicVirtue?3:0,r=e.cyclicMagicFlaw?-3:0;e.researchProjects.forEach((o=>{var a,l,c,h;let u=null!==(l=null===(a=t.character.abilities.find((t=>"Magic Theory"==t.name)))||void 0===a?void 0:a.level)&&void 0!==l?l:0,d=null!==(h=null===(c=nA(e).find((t=>"GQ"==t.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0;o.artModifier=_C(t,o.arts,o.prerequisites,o.focus),o.labTotal=e.auraBonus+e.labBaseQuality+d+o.artModifier+o.labAssistantBonus+u+Math.max(o.experiment?i:0,o.newWork?n:0)+(o.positiveCycle?s:r)+(o.magicTheorySpecialisation?1:0)+t.character.characteristics.intelligence.value+(o.intelligenceSpecialisation?1:0)+(o.nocturnal?2:0)+o.materialBonus+o.shapeBonus+o.similarResearchBonus+(o.talisman?5:0),o.surplusLabTotal=o.labTotal-o.level}))}let sA=class{constructor(t,e,n,i){this.store=t,this.pluckModel=e,this.saveAction=n,this.ea=i,this.model=void 0,this.modelState=void 0,this.active=!1,this.interacting=!1,this.stopInteraction=function(t,e=300){let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(this,i)}),e)}}((()=>{this.interacting=!1}),1e3)}stateChanged(t,e){if(t.present){let e=this.pluckModel(aC);this.modelState=this.pluckModel(t.present),void 0===this.modelState&&(this.modelState=e),this.hasChanges()&&(this.model=lC(this.modelState))}}bound(){this.active=!0,this.checkForChanges(),this.ea.subscribe("ui-interaction",(()=>{this.interacting=!0,this.stopInteraction()}))}unbound(){this.active=!1}checkForChanges(){this.active&&(this.hasChanges()&&this.saveChanges(),setTimeout((()=>{this.checkForChanges()}),2e3))}saveChanges(){this.interacting||this.store.dispatch(this.saveAction,lC(this.model))}hasChanges(){return JSON.stringify(this.modelState)!==JSON.stringify(this.model)}};sA=jS([wm(),NS("design:paramtypes",[mm,Function,Function,Object])],sA);let rA=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),bC,e)}};rA=jS([Th(t),BS(1,Ci),NS("design:paramtypes",[mm,Object])],rA);const oA="virtues-list",aA='<list title="VIRTUES" items.two-way="model" has-additional-info.bind="true"></list>',lA=aA,cA=[];let hA;function uA(t){hA||(hA=Dh.define({name:oA,template:aA,dependencies:cA})),t.register(hA)}let dA=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.virtues}),vC,e)}};dA=jS([Th(s),BS(1,Ci),NS("design:paramtypes",[mm,Object])],dA);const pA="flaws-list",fA='<list title="FLAWS" items.two-way="model" has-additional-info.bind="true"></list>',gA=fA,vA=[];let mA;function bA(t){mA||(mA=Dh.define({name:pA,template:fA,dependencies:vA})),t.register(mA)}let wA=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.flaws}),mC,e)}};wA=jS([Th(o),BS(1,Ci),NS("design:paramtypes",[mm,Object])],wA);var yA=n(5555),xA={};xA.styleTagTransform=GS(),xA.setAttributes=KS(),xA.insert=ZS().bind(null,"head"),xA.domAPI=zS(),xA.insertStyleElement=QS(),VS()(yA.Z,xA),yA.Z&&yA.Z.locals&&yA.Z.locals;const kA="personality-traits-list",SA='<title text="PERSONALITY"></title>\r\n<div class="container">\r\n    <div repeat.for="trait of model">\r\n        <text-field value.two-way="trait.name"></text-field>\r\n        <stat-box mode="secondary" size="s" value.two-way="trait.rating" prefix-plus.bind="true"></stat-box>\r\n    </div>\r\n    <add-item-input placeholder="Add trait" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',CA=SA,AA=[];let EA;function TA(t){EA||(EA=Dh.define({name:kA,template:SA,dependencies:AA})),t.register(EA)}let $A=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.personalityTraits}),gC,e),this.itemAdded=t=>{this.model.push({name:t,rating:0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};$A=jS([Th(l),BS(1,Ci),NS("design:paramtypes",[mm,Object])],$A);var IA=n(2410),RA={};RA.styleTagTransform=GS(),RA.setAttributes=KS(),RA.insert=ZS().bind(null,"head"),RA.domAPI=zS(),RA.insertStyleElement=QS(),VS()(IA.Z,RA),IA.Z&&IA.Z.locals&&IA.Z.locals;const OA="warping-block",PA='<title text="WARPING"></title>\r\n<div class="container">\r\n    <div class="warping-level">\r\n        <stat-box header="WPs" mode="secondary" value.two-way="model.warpingPoints" min="0" max="999" size="s" title="Warping Points"></stat-box>\r\n        <stat-box header="Level" mode="secondary" readonly.bind="true" value.two-way="model.warpingLevel" min="0" size="m" title="Warping Level"></stat-box>\r\n    </div>\r\n    <div class="warping-effect grid" repeat.for="effect of model.ongoingEffects">\r\n        <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n        <stat-box mode="secondary" value.two-way="effect.warpingPointsPerYear" min="1" size="s" title="Warping Points Per Year"></stat-box>\r\n        <span class="text">/year</span>\r\n    </div>\r\n    <add-item-input placeholder="Add ongoing effect" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',LA=PA,MA=[];let UA;function jA(t){UA||(UA=Dh.define({name:OA,template:PA,dependencies:MA})),t.register(UA)}let BA=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.warping}),AC,e),this.itemAdded=t=>{this.model.ongoingEffects.push({name:t,warpingPointsPerYear:1}),this.model.ongoingEffects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};BA=jS([Th(h),BS(1,Ci),NS("design:paramtypes",[mm,Object])],BA);const NA="description",FA='\r\n\r\n\r\n\r\n\r\n\r\n<description-block></description-block>\r\n<virtues-list></virtues-list>\r\n<flaws-list></flaws-list>\r\n<personality-traits-list></personality-traits-list>\r\n<warping-block></warping-block>\r\n\r\n<div style="clear: both;"></div>',VA=FA,DA=[e,r,a,c,u];let zA;function qA(t){zA||(zA=Dh.define({name:NA,template:FA,dependencies:DA})),t.register(zA)}let ZA=class{};ZA=jS([Th(d)],ZA);var HA=n(927),KA={};KA.styleTagTransform=GS(),KA.setAttributes=KS(),KA.insert=ZS().bind(null,"head"),KA.domAPI=zS(),KA.insertStyleElement=QS(),VS()(HA.Z,KA),HA.Z&&HA.Z.locals&&HA.Z.locals;const WA="abilities-block",QA='<title text="ABILITIES"></title>\r\n<div class="container">\r\n    <div class="ability ${item.level === 0 ? \'untrained\' : \'\'}" repeat.for="item of model">\r\n        <text-field class="name" value.two-way="item.name"></text-field>\r\n        <text-field class="specialisation" value.two-way="item.specialisation" placeholder="Specialisation"></text-field>\r\n        <stat-box class="level" mode="secondary" value.two-way="item.level" min="0" size="s" title="Ability level"></stat-box>\r\n        <stat-box class="xp" mode="secondary" value.two-way="item.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n        <span class="puissant-label"><span class="numbers text" if.bind="item.puissant">+2</span></span>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add ability"></add-item-input>\r\n</div>\r\n<footer></footer>',_A=QA,GA=[];let XA;function YA(t){XA||(XA=Dh.define({name:WA,template:QA,dependencies:GA})),t.register(XA)}let JA=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.abilities}),fC,e),this.itemAdded=t=>{this.model.push({name:t,specialisation:"",level:0,xp:0,puissant:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};JA=jS([Th(f),BS(1,Ci),NS("design:paramtypes",[mm,Object])],JA);var tE=n(3292),eE={};eE.styleTagTransform=GS(),eE.setAttributes=KS(),eE.insert=ZS().bind(null,"head"),eE.domAPI=zS(),eE.insertStyleElement=QS(),VS()(tE.Z,eE),tE.Z&&tE.Z.locals&&tE.Z.locals;const nE="characteristics-block",iE='<title text="CHARACTERISTICS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.strength.specialisation"></text-field>\r\n        <span class="text left-col">STR</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.strength.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.strength.value"></stat-box>\r\n\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.dexterity.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.dexterity.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">DEX</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.dexterity.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.stamina.specialisation"></text-field>\r\n        <span class="text left-col">STA</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.stamina.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.stamina.value"></stat-box>\r\n        \r\n        <stat-box prefix-plus.bind="true" value.two-way="model.quickness.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.quickness.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">QUI</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.quickness.specialisation"></text-field>\r\n    </div>\r\n    <br/>\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.intelligence.specialisation"></text-field>\r\n        <span class="text left-col">INT</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.intelligence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.intelligence.value"></stat-box>\r\n        \r\n        <stat-box prefix-plus.bind="true" value.two-way="model.presence.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.presence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">PRE</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.presence.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.perception.specialisation"></text-field>\r\n        <span class="text left-col">PER</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.perception.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.perception.value"></stat-box>\r\n        \r\n        <stat-box prefix-plus.bind="true" value.two-way="model.communication.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.communication.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">COM</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.communication.specialisation"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',sE=iE,rE=[];let oE;function aE(t){oE||(oE=Dh.define({name:nE,template:iE,dependencies:rE})),t.register(oE)}let lE=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.characteristics}),pC,e)}};lE=jS([Th(v),BS(1,Ci),NS("design:paramtypes",[mm,Object])],lE);var cE=n(1459),hE={};hE.styleTagTransform=GS(),hE.setAttributes=KS(),hE.insert=ZS().bind(null,"head"),hE.domAPI=zS(),hE.insertStyleElement=QS(),VS()(cE.Z,hE),cE.Z&&cE.Z.locals&&cE.Z.locals;const uE="fatigue-block",dE='<title text="FATIGUE"></title>\r\n<div class="container grid text">\r\n    <span>Fresh (-0)</span><span class="right"></span><radio-button group="fatigue" state="${model.fatigue == 0 ? \'selected\' : \'unselected\'}" value="0"></radio-button>\r\n    <span>Winded (-0)</span><span class="right">2m</span><radio-button group="fatigue" state="${model.fatigue == 1 ? \'selected\' : \'unselected\'}" value="1"></radio-button>\r\n    <span>Weary (-1)</span><span class="right">10m</span><radio-button group="fatigue" state="${model.fatigue == 2 ? \'selected\' : \'unselected\'}" value="2"></radio-button>\r\n    <span>Tired (-3)</span><span class="right">30m</span><radio-button group="fatigue" state="${model.fatigue == 3 ? \'selected\' : \'unselected\'}" value="3"></radio-button>\r\n    <span>Dazed (-5)</span><span class="right">1h</span><radio-button group="fatigue" state="${model.fatigue == 4 ? \'selected\' : \'unselected\'}" value="4"></radio-button>\r\n    <span>Unconscious</span><span class="right">2h</span><radio-button group="fatigue" state="${model.fatigue == 5 ? \'selected\' : \'unselected\'}" value="5"></radio-button>\r\n</div>\r\n<footer></footer>',pE=dE,fE=[];let gE;function vE(t){gE||(gE=Dh.define({name:uE,template:dE,dependencies:fE})),t.register(gE)}let mE=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),wC,e)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"fatigue"==t.group&&(this.model.fatigue=Number.parseInt(t.value))}))}};mE=jS([Th(b),BS(1,Ci),NS("design:paramtypes",[mm,Object])],mE);var bE=n(6903),wE={};wE.styleTagTransform=GS(),wE.setAttributes=KS(),wE.insert=ZS().bind(null,"head"),wE.domAPI=zS(),wE.insertStyleElement=QS(),VS()(bE.Z,wE),bE.Z&&bE.Z.locals&&bE.Z.locals;const yE="damage-block",xE='<title text="WOUNDS"></title>\r\n<div class="container text">\r\n    <stat-box header="Light" value.two-way="model.lightWounds" min="0" size="s"></stat-box>\r\n    <stat-box header="Medium" value.two-way="model.mediumWounds" min="0" size="s"></stat-box>\r\n    <stat-box header="Heavy" value.two-way="model.heavyWounds" min="0" size="s"></stat-box>\r\n</div>\r\n<footer></footer>',kE=xE,SE=[];let CE;function AE(t){CE||(CE=Dh.define({name:yE,template:xE,dependencies:SE})),t.register(CE)}let EE=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),wC,e)}};EE=jS([Th(y),BS(1,Ci),NS("design:paramtypes",[mm,Object])],EE);var TE=n(4397),$E={};$E.styleTagTransform=GS(),$E.setAttributes=KS(),$E.insert=ZS().bind(null,"head"),$E.domAPI=zS(),$E.insertStyleElement=QS(),VS()(TE.Z,$E),TE.Z&&TE.Z.locals&&TE.Z.locals;const IE="confidence-block",RE='<stat-box\r\n    header="Confidence Points"\r\n    size="l"\r\n    min="0"\r\n    value.two-way="model.score"\r\n    mode="primary-angled">\r\n</stat-box>',OE=RE,PE=[];let LE;function ME(t){LE||(LE=Dh.define({name:IE,template:RE,dependencies:PE})),t.register(LE)}let UE=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.confidence}),CC,e)}};UE=jS([Th(k),BS(1,Ci),NS("design:paramtypes",[mm,Object])],UE);var jE=n(7804),BE={};BE.styleTagTransform=GS(),BE.setAttributes=KS(),BE.insert=ZS().bind(null,"head"),BE.domAPI=zS(),BE.insertStyleElement=QS(),VS()(jE.Z,BE),jE.Z&&jE.Z.locals&&jE.Z.locals;const NE="active-magic-list",FE='<title text="ACTIVE MAGIC"></title>\r\n<div class="container">\r\n    <div class="active-magic grid" repeat.for="magic of model">\r\n        <checkbox size="s" mode="angled" value.two-way="magic.active" title="Active"></checkbox>\r\n        <text-field class="name" value.two-way="magic.name" placeholder="Name"></text-field>\r\n        <stat-box header="Pen." show-header.bind="$first" mode="secondary" value.two-way="magic.penetration" min="0" size="s" title="Penetration" readonly.bind="!magic.active" color-mode="${magic.active ? \'color\' : \'monochrome\'}"></stat-box>\r\n        <stat-info-button source.bind="magic" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <add-item-input class="add-magic-input" placeholder="Add active magic" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',VE=FE,DE=[];let zE;function qE(t){zE||(zE=Dh.define({name:NE,template:FE,dependencies:DE})),t.register(zE)}let ZE=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.activeMagic}),EC,e),this.itemAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,penetration:0,active:!0,additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};ZE=jS([Th(C),BS(1,Ci),NS("design:paramtypes",[mm,Object])],ZE);var HE=n(5889),KE={};KE.styleTagTransform=GS(),KE.setAttributes=KS(),KE.insert=ZS().bind(null,"head"),KE.domAPI=zS(),KE.insertStyleElement=QS(),VS()(HE.Z,KE),HE.Z&&HE.Z.locals&&HE.Z.locals;const WE="physical-penalty-block",QE='<stat-box\r\n    header="Physical Penalty"\r\n    size="l"\r\n    value="${model.totalPenalty}"\r\n    readonly.bind="true"\r\n    mode="primary-angled">\r\n</stat-box>',_E=QE,GE=[];let XE;function YE(t){XE||(XE=Dh.define({name:WE,template:QE,dependencies:GE})),t.register(XE)}let JE=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),wC,e)}};JE=jS([Th(E),BS(1,Ci),NS("design:paramtypes",[mm,Object])],JE);const tT="stats",eT='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<characteristics-block></characteristics-block>\r\n<fatigue-block></fatigue-block>\r\n<damage-block></damage-block>\r\n<confidence-block></confidence-block>\r\n<physical-penalty-block></physical-penalty-block>\r\n<active-magic-list></active-magic-list>\r\n<abilities-block></abilities-block>\r\n\r\n<div style="clear: both;"></div>',nT=eT,iT=[g,m,w,x,S,A,T];let sT;function rT(t){sT||(sT=Dh.define({name:tT,template:eT,dependencies:iT})),t.register(sT)}let oT=class{};oT=jS([Th($)],oT);var aT=n(5185),lT={};lT.styleTagTransform=GS(),lT.setAttributes=KS(),lT.insert=ZS().bind(null,"head"),lT.domAPI=zS(),lT.insertStyleElement=QS(),VS()(aT.Z,lT),aT.Z&&aT.Z.locals&&aT.Z.locals;const cT="arts-block",hT='<title text="ARTS"></title>\r\n<div class="container grid">\r\n    <stat-box class="level" mode="${model.creo.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.creo.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.creo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.creo.level === 0 ? \'untrained\' : \'\'}">Creo</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.animal.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.animal.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.animal.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span  class="name text ${model.animal.level === 0 ? \'untrained\' : \'\'}">Animal</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.ignem.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.ignem.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.ignem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.ignem.level === 0 ? \'untrained\' : \'\'}">Ignem</span>\r\n\r\n   \r\n\r\n    <stat-box class="level" mode="${model.intellego.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.intellego.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.intellego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.intellego.level === 0 ? \'untrained\' : \'\'}">Intellego</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.aquam.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.aquam.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.aquam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.aquam.level === 0 ? \'untrained\' : \'\'}">Aquam</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.imaginem.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.imaginem.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.imaginem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.imaginem.level === 0 ? \'untrained\' : \'\'}">Imaginem</span>\r\n\r\n\r\n\r\n    <stat-box class="level" mode="${model.muto.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.muto.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.muto.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.muto.level === 0 ? \'untrained\' : \'\'}">Muto</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.auram.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.auram.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.auram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.auram.level === 0 ? \'untrained\' : \'\'}">Auram</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.mentem.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.mentem.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.mentem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.mentem.level === 0 ? \'untrained\' : \'\'}">Mentem</span>\r\n\r\n\r\n\r\n    <stat-box class="level" mode="${model.perdo.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.perdo.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.perdo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.perdo.level === 0 ? \'untrained\' : \'\'}">Perdo</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.corpus.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.corpus.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.corpus.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.corpus.level === 0 ? \'untrained\' : \'\'}">Corpus</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.terram.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.terram.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.terram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.terram.level === 0 ? \'untrained\' : \'\'}">Terram</span>\r\n\r\n\r\n\r\n    <stat-box class="level" mode="${model.rego.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.rego.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.rego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.rego.level === 0 ? \'untrained\' : \'\'}">Rego</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.herbam.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.herbam.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.herbam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.herbam.level === 0 ? \'untrained\' : \'\'}">Herbam</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.vim.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.vim.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.vim.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.vim.level === 0 ? \'untrained\' : \'\'}">Vim</span>\r\n</div>\r\n<footer></footer>',uT=hT,dT=[];let pT;function fT(t){pT||(pT=Dh.define({name:cT,template:hT,dependencies:dT})),t.register(pT)}let gT=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.arts}),yC,e)}};gT=jS([Th(R),BS(1,Ci),NS("design:paramtypes",[mm,Object])],gT);var vT=n(2244),mT={};mT.styleTagTransform=GS(),mT.setAttributes=KS(),mT.insert=ZS().bind(null,"head"),mT.domAPI=zS(),mT.insertStyleElement=QS(),VS()(vT.Z,mT),vT.Z&&vT.Z.locals&&vT.Z.locals;const bT="spellcasting-modifiers-block",wT='<title text="SPELLCASTING STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Aura Bonus</span>\r\n        <span class="text">Stamina Specialisation</span>\r\n        <span class="text" if.bind="showGoodCycle">Good Cycle</span>\r\n        <span class="text">Loud Voice</span>\r\n        <span class="text">Large Gestures</span>\r\n\r\n        <span class="text">Arts</span>\r\n        <span class="text">Ceremonial</span>\r\n        <span class="text">Talisman Bonus</span>\r\n        <span class="text">Similar Spell</span>\r\n        <span class="text">Focus</span>\r\n        <span class="text">Casting Total</span>\r\n\r\n        <span if.bind="!showGoodCycle"></span>\r\n\r\n        <stat-box value.two-way="model.aura" mode="secondary" prefix-plus.bind="true"></stat-box></stat-box>\r\n        <checkbox value.two-way="model.staminaSpecialisation" mode="angled"></checkbox>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="model.positiveCycle" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.loudVoice" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.largeGestures" mode="angled"></checkbox>\r\n\r\n        <text-field class="arts" value.two-way="model.arts" placeholder="Arts"></text-field>\r\n        <checkbox value.two-way="model.ceremonial" mode="angled" color-mode="monochrome"></checkbox>\r\n        <stat-box value.two-way="model.talismanBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></stat-box>\r\n        <stat-box value.two-way="model.similarFomulaicSpellBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></stat-box>\r\n        <checkbox value.two-way="model.focus" mode="angled" color-mode="monochrome"></checkbox>\r\n        <stat-box value.two-way="model.spontaneousCastingTotal" mode="primary-angled" readonly.bind="true" prefix-plus.bind="true" color-mode="monochrome"></stat-box>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',yT=wT,xT=[];let kT;function ST(t){kT||(kT=Dh.define({name:bT,template:wT,dependencies:xT})),t.register(kT)}let CT=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellcastingStats}),OC,e)}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};CT=jS([Th(P),BS(1,Ci),NS("design:paramtypes",[mm,Object])],CT);var AT=n(7624),ET={};ET.styleTagTransform=GS(),ET.setAttributes=KS(),ET.insert=ZS().bind(null,"head"),ET.domAPI=zS(),ET.insertStyleElement=QS(),VS()(AT.Z,ET),AT.Z&&AT.Z.locals&&AT.Z.locals;const TT="spell-list",$T='<title text="SPELLS"></title>\r\n<div class="container">\r\n    <div class="spells">\r\n        <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n            <span class="form-header"></span>\r\n            <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n            <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n            <span class="casting-total-label numbers text">+${spell.castingTotal}</span>\r\n            <stat-box class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></stat-box>\r\n            <stat-box class="mastery-level" mode="secondary" value.two-way="spell.masteryLevel" min="0" size="s" color-mode="monochrome" title="Mastery level"></stat-box>\r\n            <text-field class="range" value.two-way="spell.range" placeholder="Range"></text-field>\r\n            <text-field class="duration" value.two-way="spell.duration" placeholder="Duration"></text-field>\r\n            <text-field class="target" value.two-way="spell.target" placeholder="Target"></text-field>\r\n            <text-field class="sigil" value.two-way="spell.sigil" placeholder="Sigil" title="${spell.sigil}"></text-field>\r\n            <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n            <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n            <stat-info-button source.bind="spell" property="additionalInfo"></stat-info-button>\r\n            <symbol click.delegate="editDetails(spell)" title="Edit details" mode="angled"></symbol>\r\n            <cross-button click.delegate="unlearnSpell(spell)" title="Unlearn spell" mode="angled"></cross-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add spell" on-item-added.bind="spellAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',IT=$T,RT=[];let OT;function PT(t){OT||(OT=Dh.define({name:TT,template:$T,dependencies:RT})),t.register(OT)}var LT=n(4235),MT={};MT.styleTagTransform=GS(),MT.setAttributes=KS(),MT.insert=ZS().bind(null,"head"),MT.domAPI=zS(),MT.insertStyleElement=QS(),VS()(LT.Z,MT),LT.Z&&LT.Z.locals&&LT.Z.locals;const UT="spell-details-dialog",jT='<dialog-box title="${model.name}" size="s">\r\n    <div class="spell-details">\r\n        <span class="text">Focus</span>\r\n        <checkbox size="xs" value.two-way="model.focus"></checkbox>\r\n\r\n        <span class="text">Ritual Spell</span>\r\n        <checkbox size="xs" value.two-way="model.ritual"></checkbox>\r\n\r\n        <span class="text">Attunement Bonus</span>\r\n        <stat-box class="attunement-bonus" mode="secondary" value.two-way="model.attunementBonus" min="0" size="xs" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Attunement Type</span>\r\n        <text-field class="attunement" value.two-way="model.attunement"></text-field>\r\n\r\n        <span class="text">Masteries</span>\r\n        <text-field class="masteries" value.two-way="model.masteries"></text-field>\r\n\r\n        <span class="text">Mastery XP</span>\r\n        <stat-box class="xp" mode="secondary" value.two-way="model.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    </div>\r\n</dialog-box>',BT=jT,NT=[];let FT;function VT(t){FT||(FT=Dh.define({name:UT,template:jT,dependencies:NT})),t.register(FT)}var DT;let zT=DT=class{activate(t){this.model=t}static open(t,e){let n=WM.get(lv),i=lC(t);n.open({component:()=>DT,overlayDismiss:!0,model:i}).whenClosed((n=>{t.focus=i.focus,t.ritual=i.ritual,t.attunement=i.attunement,t.attunementBonus=i.attunementBonus,t.masteries=i.masteries,t.xp=i.xp,e&&e()}))}};zT=DT=jS([Th(U),$h],zT);let qT=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spells}),xC,e),this.spellAdded=t=>{this.model.push({name:t,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,additionalInfo:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0,onWishlist:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.editDetails=t=>{zT.open(t)},this.unlearnSpell=t=>{t.onWishlist=!0}}};qT=jS([Th(M),BS(1,Ci),NS("design:paramtypes",[mm,Object])],qT);var ZT=n(6073),HT={};HT.styleTagTransform=GS(),HT.setAttributes=KS(),HT.insert=ZS().bind(null,"head"),HT.domAPI=zS(),HT.insertStyleElement=QS(),VS()(ZT.Z,HT),ZT.Z&&ZT.Z.locals&&ZT.Z.locals;const KT="spell-wishlist",WT='<title text="SPELL WISHLIST"></title>\r\n<div class="container">\r\n    <div class="spells">\r\n        <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n            <span class="form-header"></span>\r\n            <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n            <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n            <stat-box class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></stat-box>\r\n            <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n            <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n            <stat-info-button source.bind="spell" property="additionalInfo"></stat-info-button>\r\n            <cross-button click.delegate="learnSpell(spell)" title="Learn spell"></cross-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add spell" on-item-added.bind="spellAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',QT=WT,_T=[];let GT;function XT(t){GT||(GT=Dh.define({name:KT,template:WT,dependencies:_T})),t.register(GT)}let YT=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellWishlist}),kC,e),this.spellAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,additionalInfo:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0,onWishlist:!0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.learnSpell=t=>{t.onWishlist=!1}}};YT=jS([Th(B),BS(1,Ci),NS("design:paramtypes",[mm,Object])],YT);var JT=n(7266),t$={};t$.styleTagTransform=GS(),t$.setAttributes=KS(),t$.insert=ZS().bind(null,"head"),t$.domAPI=zS(),t$.insertStyleElement=QS(),VS()(JT.Z,t$),JT.Z&&JT.Z.locals&&JT.Z.locals;const e$="sigil",n$='<span class="text title">Sigil</span>\r\n<div class="container" drop.delegate="onDrop($event)" active-drag.class="dragging" dragenter.delegate="dragging = true" dragleave.delegate="dragging = false">\r\n    <div class="sigil-image-placeholder" if.bind="!model"></div>\r\n    <img class="sigil-image" if.bind="model" src="${model}"/>\r\n</div>',i$=n$,s$=[];let r$;function o$(t){r$||(r$=Dh.define({name:e$,template:n$,dependencies:s$})),t.register(r$)}let a$=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.sigil}),MC,e),this.dragging=!1,this.onDrop=t=>{if(1!=t.dataTransfer.items.length)return;let e=t.dataTransfer.items[0];if("file"==e.kind&&e.type.startsWith("image")){var n=new FileReader;n.onload=()=>{this.model=n.result,this.dragging=!1},n.readAsDataURL(e.getAsFile())}}}};a$=jS([Th(F),BS(1,Ci),NS("design:paramtypes",[mm,Object])],a$);const l$="magic",c$='\r\n\r\n\r\n\r\n\r\n\r\n<arts-block></arts-block>\r\n<spellcasting-modifiers-block></spellcasting-modifiers-block>\r\n<sigil></sigil>\r\n<div style="clear: both;"></div>\r\n<spell-list></spell-list>\r\n<spell-wishlist></spell-wishlist>\r\n\r\n<div style="clear: both;"></div>',h$=c$,u$=[O,L,j,N,V];let d$;function p$(t){d$||(d$=Dh.define({name:l$,template:c$,dependencies:u$})),t.register(d$)}let f$=class{};f$=jS([Th(D)],f$);var g$=n(8412),v$={};v$.styleTagTransform=GS(),v$.setAttributes=KS(),v$.insert=ZS().bind(null,"head"),v$.domAPI=zS(),v$.insertStyleElement=QS(),VS()(g$.Z,v$),g$.Z&&g$.Z.locals&&g$.Z.locals;const m$="lab-stats",b$='<title text="LAB STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Aura Bonus</span>\r\n        <span class="text">Size</span>\r\n        <span class="text">Refinement</span>\r\n        <span class="text">Occupied Size</span>\r\n        <span class="text">Effective Safety</span>\r\n        <span class="text">Living Conditions Modifier</span>\r\n        <span class="text">Specialisation 1</span>\r\n        <span class="text">Specialisation 2</span>\r\n        <span class="text">Art 1 (Any)</span>\r\n        <span class="text">Art 2 (Any)</span>\r\n        <span class="text">Art 3 (Form)</span>\r\n        <span class="text">Art 4 (Form)</span>\r\n\r\n        <stat-box value.two-way="model.auraBonus" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.size" mode="primary-angled" min="-3"></stat-box>\r\n        <stat-box value.two-way="model.refinement" mode="primary-angled" min="0"></stat-box>\r\n        <stat-box value.two-way="model.occupiedSize" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></stat-box>\r\n        <stat-box value.two-way="model.effectiveSafety" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></stat-box>\r\n        <stat-box value.two-way="model.livingConditionsModifier" mode="secondary-angled" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.specialisation1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.specialisation2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art3.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art4.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art3.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art4.name" placeholder="Modifier"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',w$=b$,y$=[];let x$;function k$(t){x$||(x$=Dh.define({name:m$,template:b$,dependencies:y$})),t.register(x$)}let S$=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),IC,e)}};S$=jS([Th(q),BS(1,Ci),NS("design:paramtypes",[mm,Object])],S$);var C$=n(4467),A$={};A$.styleTagTransform=GS(),A$.setAttributes=KS(),A$.insert=ZS().bind(null,"head"),A$.domAPI=zS(),A$.insertStyleElement=QS(),VS()(C$.Z,A$),C$.Z&&C$.Z.locals&&C$.Z.locals;const E$="research-projects",T$='<title text="RESEARCH PROJECTS"></title>\r\n<div class="container">\r\n    <div class="projects">\r\n        <div class="project grid" repeat.for="project of model.researchProjects">\r\n            <text-field class="name" value.two-way="project.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="project.arts" placeholder="Arts"></text-field>\r\n            <text-field class="prerequisites" value.two-way="project.prerequisites" placeholder="Prereq"></text-field>\r\n            <stat-box class="level" mode="secondary" value.two-way="project.level" min="1" size="m" title="Level"></stat-box>\r\n\r\n            <checkbox value.two-way="project.focus" title="Focus"></checkbox>\r\n            <stat-box class="specialisation-bonus" mode="secondary" value.two-way="project.specialisationBonus" min="0" size="s" title="Lab Specialisation Bonus" prefix-plus.bind="true"></stat-box>\r\n            <checkbox value.two-way="project.intelligenceSpecialisation" title="Intelligence Specialisation"></checkbox>\r\n            <checkbox value.two-way="project.magicTheorySpecialisation" title="Magic Theory Specialisation"></checkbox>\r\n            <checkbox value.two-way="project.talisman" title="Talisman"></checkbox>\r\n            <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="project.newWork" title="New Invention"></checkbox>\r\n            <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="project.experiment" title="Experiment"></checkbox>\r\n            <checkbox if.bind="showGoodCycle" value.two-way="project.positiveCycle" title="Good Cycle"></checkbox>\r\n            <checkbox value.two-way="project.nocturnal" title="Nocturnal - An owl, the magas daily cycle is the opposite of most folk  she\r\n            works at night and sleeps during the day. This has the advantage that the night\r\n            is quieter and presents fewer distractions  gain +2 to the Lab Total for\r\n            the season. Due to lack of sunlight and daylight living, however, she suffers a 1\r\n            penalty to her Living Conditions modifier for any year in which she has taken at\r\n            least one Nocturnal season. She also has trouble functioning during the daytime;\r\n            when dawn breaks, she loses a Long-Term Fatigue level and gains one extra botch\r\n            die on all activities for the day. She will likely not appreciate being woken up in\r\n            daylight hours. This routine is commonly taken by characters with the Nocturnal\r\n            Personality Flaw."></checkbox>\r\n            <stat-box class="similar-research-bonus" mode="secondary" value.two-way="project.similarResearchBonus" min="0" size="s" title="Similar Research Bonus" prefix-plus.bind="true"></stat-box>\r\n            <text-field class="material" value.two-way="project.material" placeholder="Material"></text-field>\r\n            <stat-box class="material-bonus" mode="secondary" value.two-way="project.materialBonus" min="0" size="s" title="Material Bonus" prefix-plus.bind="true"></stat-box>\r\n            <text-field class="shape" value.two-way="project.shape" placeholder="Shape"></text-field>\r\n            <stat-box class="shape-bonus" mode="secondary" value.two-way="project.shapeBonus" min="0" size="s" title="Shape Bonus" prefix-plus.bind="true"></stat-box>\r\n            <stat-box class="lab-assistant-bonus" mode="secondary" value.two-way="project.labAssistantBonus" min="0" size="s" title="Lab Assistant Bonus" prefix-plus.bind="true"></stat-box>\r\n            \r\n            <stat-box class="total" mode="primary" readonly.bind="true" value.two-way="project.labTotal" min="0" size="s" title="Lab Total"></stat-box>\r\n            <stat-box class="surplus" mode="secondary" readonly.bind="true" value.two-way="project.surplusLabTotal" min="0" size="s" title="Surplus Lab Total"></stat-box>\r\n            <stat-box class="accumulated-total" mode="secondary" value.two-way="project.accumulatedLabTotal" min="0" size="s" title="Accumulated Lab Total"></stat-box>\r\n            \r\n            <stat-info-button source.bind="project" property="additionalInfo"></stat-info-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add project" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',$$=T$,I$=[];let R$;function O$(t){R$||(R$=Dh.define({name:E$,template:T$,dependencies:I$})),t.register(R$)}let P$=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),IC,e),this.itemAdded=t=>{this.model.researchProjects.push({name:t,accumulatedLabTotal:0,surplusLabTotal:0,artModifier:0,arts:"",prerequisites:"",focus:!1,labTotal:0,labAssistantBonus:0,magicTheorySpecialisation:!1,intelligenceSpecialisation:!0,material:"",materialBonus:0,shape:"",shapeBonus:0,similarResearchBonus:0,specialisationBonus:0,talisman:!1,level:1,experiment:!1,newWork:!0,nocturnal:!1,positiveCycle:!1,additionalInfo:""})}}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};P$=jS([Th(H),BS(1,Ci),NS("design:paramtypes",[mm,Object])],P$);var L$=n(6964),M$={};M$.styleTagTransform=GS(),M$.setAttributes=KS(),M$.insert=ZS().bind(null,"head"),M$.domAPI=zS(),M$.insertStyleElement=QS(),VS()(L$.Z,M$),L$.Z&&L$.Z.locals&&L$.Z.locals;const U$="lab-modifications-list",j$='<title text="LAB MODIFICATIONS"></title>\r\n<div class="container">\r\n    <add-item-input class="add-modifier-input" title="Add Modifier Column" on-item-added.bind="modifierAdded"></add-item-input>\r\n    \r\n    <div class="block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n\r\n        <label class="text title">VIRTUES</label>\r\n        <div class="items">\r\n            <div class="virtue grid" repeat.for="virtue of model.virtues">\r\n                <stat-box class="cost" fade-zero.bind="true" mode="secondary-angled" value.two-way="virtue.cost" min="0" size="xs" title="Cost"></stat-box>\r\n                <text-field class="name" value.two-way="virtue.name" placeholder="Name"></text-field>\r\n                <text-field class="category" value.two-way="virtue.category" placeholder="Category"></text-field>\r\n                <text-field class="description" value.two-way="virtue.description" placeholder="Description"></text-field>\r\n                <stat-box class="modifier" fade-zero.bind="true" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of virtue.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></stat-box>\r\n            </div>\r\n        </div>\r\n        <add-item-input placeholder="Add virtue" on-item-added.bind="virtueAdded"></add-item-input>\r\n    </div>\r\n\r\n    <div class="block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n\r\n        <label class="text title">FLAWS</label>\r\n        <div class="items">\r\n            <div class="flaw grid" repeat.for="flaw of model.flaws">\r\n                <stat-box class="cost" fade-zero.bind="true" mode="secondary-angled" value.two-way="flaw.cost" max="0" size="xs" title="Cost"></stat-box>\r\n                <text-field class="name" value.two-way="flaw.name" placeholder="Name"></text-field>\r\n                <text-field class="category" value.two-way="flaw.category" placeholder="Category"></text-field>\r\n                <text-field class="description" value.two-way="flaw.description" placeholder="Description"></text-field>\r\n                <stat-box class="modifier" fade-zero.bind="true" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of flaw.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></stat-box>\r\n            </div>\r\n        </div>\r\n        <add-item-input placeholder="Add flaw" on-item-added.bind="flawAdded"></add-item-input>\r\n    </div>\r\n\r\n    <div class="block last-block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n        <div class="modifier-totals">\r\n            <span class="numbers modifier-total" repeat.for="total of totals" class="modifier-title text">${total > 0 ? \'+\' : \'\'}${total}</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<footer></footer>',B$=j$,N$=[];let F$;function V$(t){F$||(F$=Dh.define({name:U$,template:j$,dependencies:N$})),t.register(F$)}let D$=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),IC,e),this.virtueAdded=t=>{this.model.virtues.push({name:t,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Virtue"}),this.model.virtues.sort(((t,e)=>t.name.localeCompare(e.name)))},this.flawAdded=t=>{this.model.flaws.push({name:t,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Flaw"}),this.model.flaws.sort(((t,e)=>t.name.localeCompare(e.name)))},this.modifierAdded=t=>{this.model.availableModifiers.push({name:t})}}get totals(){return this.model?nA(this.model).map((t=>t.rating)):[]}};D$=jS([Th(W),BS(1,Ci),NS("design:paramtypes",[mm,Object])],D$);var z$=n(2820),q$={};q$.styleTagTransform=GS(),q$.setAttributes=KS(),q$.insert=ZS().bind(null,"head"),q$.domAPI=zS(),q$.insertStyleElement=QS(),VS()(z$.Z,q$),z$.Z&&z$.Z.locals&&z$.Z.locals;const Z$="lab-description-block",H$='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',K$=H$,W$=[];let Q$;function _$(t){Q$||(Q$=Dh.define({name:Z$,template:H$,dependencies:W$})),t.register(Q$)}let G$=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),IC,e)}};G$=jS([Th(_),BS(1,Ci),NS("design:paramtypes",[mm,Object])],G$);const X$="lab",Y$='\r\n\r\n\r\n\r\n\r\n<lab-stats></lab-stats>\r\n<research-projects></research-projects>\r\n<lab-description-block></lab-description-block>\r\n<lab-modifications-list></lab-modifications-list>\r\n\r\n<div style="clear: both;"></div>',J$=Y$,tI=[Z,K,Q,G];let eI;function nI(t){eI||(eI=Dh.define({name:X$,template:Y$,dependencies:tI})),t.register(eI)}let iI=class{};iI=jS([Th(X)],iI);var sI=n(8985),rI={};rI.styleTagTransform=GS(),rI.setAttributes=KS(),rI.insert=ZS().bind(null,"head"),rI.domAPI=zS(),rI.insertStyleElement=QS(),VS()(sI.Z,rI),sI.Z&&sI.Z.locals&&sI.Z.locals;const oI="carried-belongings-block",aI='<text-box title="CARRIED" text.two-way="model.carried"></text-box>',lI=aI,cI=[];let hI;function uI(t){hI||(hI=Dh.define({name:oI,template:aI,dependencies:cI})),t.register(hI)}let dI=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),UC,e)}};dI=jS([Th(J),BS(1,Ci),NS("design:paramtypes",[mm,Object])],dI);var pI=n(5204),fI={};fI.styleTagTransform=GS(),fI.setAttributes=KS(),fI.insert=ZS().bind(null,"head"),fI.domAPI=zS(),fI.insertStyleElement=QS(),VS()(pI.Z,fI),pI.Z&&pI.Z.locals&&pI.Z.locals;const gI="sanctum-belongings-block",vI='<text-box title="SANCTUM" text.two-way="model.inSanctum"></text-box>',mI=vI,bI=[];let wI;function yI(t){wI||(wI=Dh.define({name:gI,template:vI,dependencies:bI})),t.register(wI)}let xI=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),UC,e)}};xI=jS([Th(et),BS(1,Ci),NS("design:paramtypes",[mm,Object])],xI);var kI=n(1860),SI={};SI.styleTagTransform=GS(),SI.setAttributes=KS(),SI.insert=ZS().bind(null,"head"),SI.domAPI=zS(),SI.insertStyleElement=QS(),VS()(kI.Z,SI),kI.Z&&kI.Z.locals&&kI.Z.locals;const CI="vis-block",AI='<title text="VIS"></title>\r\n<div class="container">\r\n    <div class="vis grid" repeat.for="vis of model.vis">\r\n        <text-field class="name" value.two-way="vis.name"></text-field>\r\n        <stat-box class="lab-vis" mode="secondary" value.two-way="vis.amountInLab" min="0" size="s" title="In lab"></stat-box>\r\n        <stat-box class="personal-vis" mode="secondary" value.two-way="vis.amountOnPerson" min="0" size="s" title="On person"></stat-box>\r\n        <text-field class="income" value.two-way="vis.income" placeholder="Income" title="${vis.income}"></text-field>\r\n        <text-field class="notes" value.two-way="vis.notes" placeholder="Notes" title="${vis.notes}"></text-field>\r\n    </div>\r\n    <add-item-input placeholder="Add vis type" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',EI=AI,TI=[];let $I;function II(t){$I||($I=Dh.define({name:CI,template:AI,dependencies:TI})),t.register($I)}let RI=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),UC,e),this.itemAdded=t=>{this.model||(this.model={carried:"",inSanctum:"",vis:[]}),this.model.vis||(this.model.vis=[]),this.model.vis.push({name:t,amountInLab:0,amountOnPerson:0,income:"",notes:""}),this.model.vis.sort(((t,e)=>t.name.localeCompare(e.name)))}}};RI=jS([Th(it),BS(1,Ci),NS("design:paramtypes",[mm,Object])],RI);const OI="belongings",PI='\r\n\r\n\r\n\r\n<carried-belongings-block></carried-belongings-block>\r\n<sanctum-belongings-block></sanctum-belongings-block>\r\n<vis-block></vis-block>\r\n\r\n<div style="clear: both;"></div>',LI=PI,MI=[tt,nt,st];let UI;function jI(t){UI||(UI=Dh.define({name:OI,template:PI,dependencies:MI})),t.register(UI)}let BI=class{};BI=jS([Th(rt)],BI);var NI=n(3349),FI={};FI.styleTagTransform=GS(),FI.setAttributes=KS(),FI.insert=ZS().bind(null,"head"),FI.domAPI=zS(),FI.insertStyleElement=QS(),VS()(NI.Z,FI),NI.Z&&NI.Z.locals&&NI.Z.locals;const VI="notes-block",DI='<text-box title="NOTES" text.two-way="model"></text-box>',zI=DI,qI=[];let ZI;function HI(t){ZI||(ZI=Dh.define({name:VI,template:DI,dependencies:qI})),t.register(ZI)}let KI=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.notes}),$C,e)}};KI=jS([Th(at),BS(1,Ci),NS("design:paramtypes",[mm,Object])],KI);var WI=n(3260),QI={};QI.styleTagTransform=GS(),QI.setAttributes=KS(),QI.insert=ZS().bind(null,"head"),QI.domAPI=zS(),QI.insertStyleElement=QS(),VS()(WI.Z,QI),WI.Z&&WI.Z.locals&&WI.Z.locals;const _I="background-block",GI='<text-box title="BACKGROUND" text.two-way="model"></text-box>',XI=GI,YI=[];let JI;function tR(t){JI||(JI=Dh.define({name:_I,template:GI,dependencies:YI})),t.register(JI)}let eR=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.background}),LC,e)}};eR=jS([Th(ct),BS(1,Ci),NS("design:paramtypes",[mm,Object])],eR);var nR=n(7600),iR={};iR.styleTagTransform=GS(),iR.setAttributes=KS(),iR.insert=ZS().bind(null,"head"),iR.domAPI=zS(),iR.insertStyleElement=QS(),VS()(nR.Z,iR),nR.Z&&nR.Z.locals&&nR.Z.locals;const sR="quest-list",rR='<title text="QUESTS"></title>\r\n<div class="container">\r\n    <div class="quests">\r\n        <div class="quest grid" repeat.for="quest of model">\r\n            <checkbox mode="angled" size="xs" value.two-way="quest.focused" title="Focused"></checkbox>\r\n            <stat-box class="priority" mode="secondary" value.two-way="quest.priority" min="1" size="xs" title="Priority"></stat-box>\r\n            <text-field class="name" value.two-way="quest.name" placeholder="Name" title="${quest.name}"></text-field>\r\n            <stat-info-button source.bind="quest" property="additionalInfo"></stat-info-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add quest" on-item-added.bind="questAdded">\r\n</div>\r\n<footer></footer>',oR=rR,aR=[];let lR;function cR(t){lR||(lR=Dh.define({name:sR,template:rR,dependencies:aR})),t.register(lR)}let hR=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.quests}),NC,e),this.questAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,focused:!1,priority:0,additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))).sort(((t,e)=>t.priority-e.priority))}}};hR=jS([Th(ut),BS(1,Ci),NS("design:paramtypes",[mm,Object])],hR);var uR=n(280),dR={};dR.styleTagTransform=GS(),dR.setAttributes=KS(),dR.insert=ZS().bind(null,"head"),dR.domAPI=zS(),dR.insertStyleElement=QS(),VS()(uR.Z,dR),uR.Z&&uR.Z.locals&&uR.Z.locals;const pR="npc-list",fR='<title text="Persons of Interest"></title>\r\n<div class="container">\r\n    <div class="npcs">\r\n        <div class="npc grid" repeat.for="npc of model">\r\n            <text-field class="name" value.two-way="npc.name" placeholder="Name" title="${npc.name}"></text-field>\r\n            <text-field class="description" value.two-way="npc.description" placeholder="Description" title="${npc.description}"></text-field>\r\n            <stat-info-button source.bind="npc" property="additionalInfo"></stat-info-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add person" on-item-added.bind="npcAdded">\r\n</div>\r\n<footer></footer>',gR=fR,vR=[];let mR;function bR(t){mR||(mR=Dh.define({name:pR,template:fR,dependencies:vR})),t.register(mR)}let wR=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.npcs}),FC,e),this.npcAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};wR=jS([Th(pt),BS(1,Ci),NS("design:paramtypes",[mm,Object])],wR);const yR="notes",xR='\r\n\r\n\r\n\r\n\r\n<notes-block></notes-block>\r\n<background-block></background-block>\r\n<quest-list></quest-list>\r\n<npc-list></npc-list>\r\n\r\n<div style="clear: both;"></div>',kR=xR,SR=[lt,ht,dt,ft];let CR;function AR(t){CR||(CR=Dh.define({name:yR,template:xR,dependencies:SR})),t.register(CR)}let ER=class{};ER=jS([Th(gt)],ER);var TR=n(8840),$R={};$R.styleTagTransform=GS(),$R.setAttributes=KS(),$R.insert=ZS().bind(null,"head"),$R.domAPI=zS(),$R.insertStyleElement=QS(),VS()(TR.Z,$R),TR.Z&&TR.Z.locals&&TR.Z.locals;const IR="xp-list",RR='<title text="XP ENTRIES"></title>\r\n<div class="container">\r\n    <div class="xp-entry grid" repeat.for="entry of planningEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n        <text-field class="plans" value.two-way="entry.plans" placeholder="Plans"></text-field>\r\n    </div>\r\n\r\n    <div class="separator"></div>\r\n    <div class="center-button-box">\r\n        <cross-button click.delegate="deletePreviousEntries()" title="Delete previous entries" mode="angled"></cross-button>\r\n    </div>\r\n\r\n    <div class="past-xp-entry grid" repeat.for="entry of pastEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>',OR=RR,PR=[];let LR;function MR(t){LR||(LR=Dh.define({name:IR,template:RR,dependencies:PR})),t.register(LR)}let UR=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.xpEntries}),TC,e),this.deletePreviousEntries=()=>{let t=this.state.present.character.ageing.currentYear;this.model=this.model.filter((e=>e.year>=t))}}get planningEntries(){return this.model?this.model.filter((t=>t.planningMode)):[]}get pastEntries(){return this.model?this.model.filter((t=>!t.planningMode)):[]}};UR=jS([Th(mt),BS(1,Ci),NS("design:paramtypes",[mm,Object])],UR);var jR=n(2012),BR={};BR.styleTagTransform=GS(),BR.setAttributes=KS(),BR.insert=ZS().bind(null,"head"),BR.domAPI=zS(),BR.insertStyleElement=QS(),VS()(jR.Z,BR),jR.Z&&jR.Z.locals&&jR.Z.locals;const NR="age-block",FR='<div class="container grid">\r\n    <stat-box class="small-text" mode="secondary-angled" size="m" value.two-way="model.birthYear" min="0" max="2000" title="Birth Year"></stat-box>\r\n    <div>\r\n        <stat-box mode="secondary" size="s" value.two-way="model.age" readonly.bind="true" min="0" title="Age"></stat-box>\r\n        <stat-box mode="secondary" size="s" value.two-way="model.apparentAge" min="0" title="Apparent Age"></stat-box>\r\n    </div>\r\n    <stat-box class="small-text" mode="secondary-angled" size="m" value.two-way="model.currentYear" min="0" max="2000" title="Current Year"></stat-box>\r\n\r\n    <stat-box mode="secondary" size="s" value.two-way="model.livingConditionModifier" prefix-plus.bind="true" title="Living condition modifier"></stat-box>\r\n    <stat-box mode="primary" value.two-way="model.ageingRollModifier" prefix-plus.bind="true" title="Ageing roll bonus" readonly.bind="true"></stat-box>\r\n    <stat-box mode="secondary" size="s" value.two-way="model.longevityModifier" min="0" prefix-plus.bind="true" title="Longevity ritual modifier"></stat-box>\r\n\r\n    <checkbox class="left" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 1" title="Decrepitude level 1"></checkbox>\r\n    <stat-box mode="primary" value.two-way="model.decrepitudePoints" min="0" title="Decrepitude points"></stat-box>\r\n    <checkbox class="right" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 5" title="Decrepitude level 5"></checkbox>\r\n\r\n    <checkbox class="right top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 2" title="Decrepitude level 2"></checkbox>\r\n    <checkbox class="bottom" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 3" title="Decrepitude level 3"></checkbox>\r\n    <checkbox class="left top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 4" title="Decrepitude level 4"></checkbox>\r\n</div>',VR=FR,DR=[];let zR;function qR(t){zR||(zR=Dh.define({name:NR,template:FR,dependencies:DR})),t.register(zR)}let ZR=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.ageing}),SC,e)}};ZR=jS([Th(wt),BS(1,Ci),NS("design:paramtypes",[mm,Object])],ZR);const HR="progression",KR='\r\n\r\n\r\n<age-block></age-block>\r\n<xp-list></xp-list>\r\n\r\n<div style="clear: both;"></div>',WR=KR,QR=[bt,yt];let _R;function GR(t){_R||(_R=Dh.define({name:HR,template:KR,dependencies:QR})),t.register(_R)}let XR=class{};XR=jS([Th(xt)],XR);var YR=n(6019),JR={};JR.styleTagTransform=GS(),JR.setAttributes=KS(),JR.insert=ZS().bind(null,"head"),JR.domAPI=zS(),JR.insertStyleElement=QS(),VS()(YR.Z,JR),YR.Z&&YR.Z.locals&&YR.Z.locals;const tO="talisman-block",eO='<title text="TALISMAN"></title>\r\n<div class="container">\r\n    <stat-box class="invested-vis" mode="primary" value.two-way="model.investedVis" min="0" size="m" title="Invested vis"></stat-box>\r\n    <stat-box class="spent-vis" mode="secondary" value.two-way="model.spentVis" min="0" max.bind="model.investedVis" size="s" title="Spent vis"></stat-box>\r\n    <text-field class="description" value.two-way="model.description" placeholder="Description" title="${model.description}"></text-field>\r\n\r\n    <div class="bonuses">\r\n        <span class="title text">Bonuses</span>\r\n        <div class="bonus grid" repeat.for="bonus of model.bonuses">\r\n            <checkbox mode="angled" size="xs" value.two-way="bonus.instilled" title="Instilled"></checkbox>\r\n            <text-field class="name" value.two-way="bonus.name" placeholder="Name" title="${bonus.name}"></text-field>\r\n            <stat-box class="bonus-modifier" mode="secondary" value.two-way="bonus.bonus" min="1" size="s" title="Bonus" prefix-plus.bind="true"></stat-box>\r\n            <text-field class="source" value.two-way="bonus.source" placeholder="Source"></text-field>\r\n            <text-field class="notes" value.two-way="bonus.notes" placeholder="Notes" title="${bonus.notes}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="bonusAdded" placeholder="Add bonus"></add-item-input>\r\n    </div>\r\n\r\n    <div class="effects">\r\n        <span class="title text">Effects</span>\r\n        <div class="effect grid" repeat.for="effect of model.effects">\r\n            <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n            <stat-box class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></stat-box>\r\n            <stat-box class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></stat-box>\r\n            <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n            <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n            <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n            <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n            <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="effectAdded" placeholder="Add effect"></add-item-input>\r\n    </div>\r\n</div>\r\n<footer></footer>',nO=eO,iO=[];let sO;function rO(t){sO||(sO=Dh.define({name:tO,template:eO,dependencies:iO})),t.register(sO)}let oO=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.talisman}),jC,e),this.bonusAdded=t=>{this.model.bonuses.push({name:t,bonus:1,instilled:!1,source:"",notes:""}),this.model.bonuses.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=t=>{this.model.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),this.model.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};oO=jS([Th(St),BS(1,Ci),NS("design:paramtypes",[mm,Object])],oO);var aO=n(4769),lO={};lO.styleTagTransform=GS(),lO.setAttributes=KS(),lO.insert=ZS().bind(null,"head"),lO.domAPI=zS(),lO.insertStyleElement=QS(),VS()(aO.Z,lO),aO.Z&&aO.Z.locals&&aO.Z.locals;const cO="magic-items-block",hO='<title text="MAGIC ITEMS"></title>\r\n<div class="container">\r\n    <div class="magic-item grid" repeat.for="magicItem of model">\r\n        <text-field class="name" value.two-way="magicItem.name" placeholder="Name"></text-field>\r\n        <stat-box class="invested-vis" mode="primary" value.two-way="magicItem.investedVis" min="0" size="m" title="Invested vis"></stat-box>\r\n        <stat-box class="spent-vis" mode="secondary" value.two-way="magicItem.spentVis" min="0" max.bind="magicItem.investedVis" size="s" title="Spent vis"></stat-box>\r\n        <text-field class="description" value.two-way="magicItem.description" placeholder="Description" title="${magicItem.description}"></text-field>\r\n        <span></span>\r\n\r\n        <div class="effects">\r\n            <span class="title text">Effects</span>\r\n            <div class="effect grid" repeat.for="effect of magicItem.effects">\r\n                <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n                <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n                <stat-box class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></stat-box>\r\n                <stat-box class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></stat-box>\r\n                <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n                <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n                <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n                <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n                <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n            </div>\r\n            <add-item-input on-item-added.bind="effectAdded" parent.bind="magicItem" placeholder="Add effect"></add-item-input>\r\n        </div>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add items"></add-item-input>\r\n</div>\r\n<footer></footer>',uO=hO,dO=[];let pO;function fO(t){pO||(pO=Dh.define({name:cO,template:hO,dependencies:dO})),t.register(pO)}let gO=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.magicItems}),BC,e),this.itemAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",investedVis:0,spentVis:0,effects:[]}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=(t,e)=>{e.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),e.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};gO=jS([Th(At),BS(1,Ci),NS("design:paramtypes",[mm,Object])],gO);var vO=n(912),mO={};mO.styleTagTransform=GS(),mO.setAttributes=KS(),mO.insert=ZS().bind(null,"head"),mO.domAPI=zS(),mO.insertStyleElement=QS(),VS()(vO.Z,mO),vO.Z&&vO.Z.locals&&vO.Z.locals;const bO="familiar-block",wO='<title text="FAMILIAR"></title>\r\n<div class="container text">\r\n    <div class="grid">\r\n        <text-field class="name" value.two-way="model.name" placeholder="Name"></text-field>\r\n        <text-field class="arts" value.two-way="model.arts" placeholder="Arts"></text-field>\r\n        <checkbox value.two-way="model.isSpirit" title="Is spirit"></checkbox>\r\n        <stat-info-button source.bind="model" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <text-field class="description" value.two-way="model.description" placeholder="Description"></text-field>\r\n    <div class="block">\r\n        <stat-box header="Bronze" value.two-way="model.bronzeBondLevel" min="0" size="m"></stat-box>\r\n        <stat-box header="Silver" value.two-way="model.silverBondLevel" min="0" size="m"></stat-box>\r\n        <stat-box header="Gold" value.two-way="model.goldBondLevel" min="0" size="m"></stat-box>\r\n    </div>\r\n\r\n    <label class="text title">Powers</label>\r\n    <div class="effect grid" repeat.for="effect of model.effects">\r\n        <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n        <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n        <stat-box class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></stat-box>\r\n        <stat-box class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></stat-box>\r\n        <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n        <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n        <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n        <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n        <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add power"></add-item-input>\r\n</div>\r\n<footer></footer>',yO=wO,xO=[];let kO;function SO(t){kO||(kO=Dh.define({name:bO,template:wO,dependencies:xO})),t.register(kO)}let CO=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.familiar}),VC,e),this.itemAdded=t=>{this.model.effects.push({name:t,arts:"",description:"",duration:"",level:0,penetration:0,range:"",target:"",usages:""}),this.model.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};CO=jS([Th(Tt),BS(1,Ci),NS("design:paramtypes",[mm,Object])],CO);const AO="enchantments",EO='\r\n\r\n\r\n\r\n<div style="overflow-y: auto; max-height: 1000px;">\r\n    <talisman-block></talisman-block>\r\n    <magic-items-block></magic-items-block>\r\n    <familiar-block></familiar-block>\r\n\r\n    <div style="clear: both;"></div>\r\n</div>',TO=EO,$O=[Ct,Et,$t];let IO;function RO(t){IO||(IO=Dh.define({name:AO,template:EO,dependencies:$O})),t.register(IO)}let OO=class{};OO=jS([Th(It)],OO);var PO=n(6767),LO={};LO.styleTagTransform=GS(),LO.setAttributes=KS(),LO.insert=ZS().bind(null,"head"),LO.domAPI=zS(),LO.insertStyleElement=QS(),VS()(PO.Z,LO),PO.Z&&PO.Z.locals&&PO.Z.locals;const MO="character-type-selector",UO='<div class="container">\r\n    <span>Magus</span> <radio-button group="character-type" state="${model == \'magus\' ? \'selected\' : \'unselected\'}" value="magus"></radio-button>\r\n    <span>Companion</span> <radio-button group="character-type" state="${model == \'companion\' ? \'selected\' : \'unselected\'}" value="companion"></radio-button>\r\n</div>',jO=UO,BO=[];let NO;function FO(t){NO||(NO=Dh.define({name:MO,template:UO,dependencies:BO})),t.register(NO)}let VO=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.type}),PC,e)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"character-type"==t.group&&(this.model=t.value)}))}};VO=jS([Th(Ot),BS(1,Ci),NS("design:paramtypes",[mm,Object])],VO);const DO="settings",zO="\r\n\r\n<character-type-selector></character-type-selector>\r\n",qO=zO,ZO=[Pt];let HO;function KO(t){HO||(HO=Dh.define({name:DO,template:zO,dependencies:ZO})),t.register(HO)}let WO=class{};WO=jS([Th(Lt)],WO);const QO="my-app",_O='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<page-header></page-header>\r\n<div class="main-paper">\r\n    <div class="page-view">\r\n        <au-viewport name="main" default="description"></au-viewport>\r\n    </div>\r\n</div>\r\n<div class="buttons">\r\n    <button click.delegate="undo()" disabled.bind="state.past.length == 0">Undo</button>\r\n    <button click.delegate="redo()" disabled.bind="state.future.length == 0">Redo</button>\r\n    <button click.delegate="save()">Save As</button>\r\n    <button click.delegate="load()">Load</button>\r\n    <button click.delegate="newCharacter()">Create New Character</button>\r\n    \r\n    <input type=\'file\' accept=\'.json\' files.bind="selectedFiles" ref="fileInput" style="display: none;"><br>\r\n</div>',GO=_O,XO=[p,I,z,Y,ot,vt,kt,Rt,Mt];let YO;function JO(t){YO||(YO=Dh.define({name:QO,template:_O,dependencies:XO})),t.register(YO)}let tP=class{constructor(t){this.store=t,this.middlewareRegistered=!1,this.isStandalone=window.matchMedia("(display-mode: standalone)").matches,this.undo=()=>{this.store.dispatch(em,-1)},this.redo=()=>{this.store.dispatch(em,1)},this.save=async()=>{if(this.isStandalone){const t={suggestedName:"character sheet.ars",types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};this.fileHandle=await window.showSaveFilePicker(t),await this.saveFile(this.state),this.middlewareRegistered||(this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),om.After),this.isInitialized=!0)}else!function(t,e){const n=document.createElement("a"),i=e.split(".").pop();n.href=URL.createObjectURL(new Blob([t],{type:`text/${"txt"===i?"plain":i}`})),n.download=e,n.click(),n.remove()}(JSON.stringify(this.state.present,null,4),"character sheet.ars")},this.load=async()=>{if(this.isStandalone){const t={types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};let[e]=await window.showOpenFilePicker(t);this.fileHandle=e,this.isInitialized=!1,this.middlewareRegistered||this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),om.After),this.store.dispatch(uC,await this.fileHandle.getFile())}else this.fileInput.click(),this.fileInput.onchange=this.fileInputChanged},this.newCharacter=async()=>{this.isStandalone&&(this.fileHandle=null),await this.store.dispatch(hC),this.isStandalone&&await this.save()},this.fileInputChanged=()=>{this.theFile.text().then((t=>this.store.dispatch(RC,t)))},this.isInitialized=!1,this.fileStorageMiddlewareFactory=()=>(this.middlewareRegistered=!0,(t,e,n)=>{this.isInitialized?(console.log("Saving file to disk"),this.saveFile(t)):this.isInitialized=!0}),this.saveFile=async t=>{if(this.fileHandle){var e=await this.fileHandle.createWritable();await e.write(JSON.stringify(t.present,null,4)),await e.close()}else console.log("Could not save - file handle not set")},this.store.registerAction("createNewCharacter",hC),this.store.registerAction("loadCharacter",dC),this.store.registerAction("loadCharacterFromFile",uC),this.store.registerAction("importCharacter",RC),this.store.registerAction("updateCharacteristics",pC),this.store.registerAction("updateAbilities",fC),this.store.registerAction("updateVirtues",vC),this.store.registerAction("updateFlaws",mC),this.store.registerAction("updateDescription",bC),this.store.registerAction("updatePhysicalStatus",wC),this.store.registerAction("updateArts",yC),this.store.registerAction("updateSpells",xC),this.store.registerAction("updateSpellWishlist",kC),this.store.registerAction("updatePersonalityTraits",gC),this.store.registerAction("updateAgeing",SC),this.store.registerAction("updateConfidence",CC),this.store.registerAction("updateWarping",AC),this.store.registerAction("updateActiveMagic",EC),this.store.registerAction("updateXpEntries",TC),this.store.registerAction("updateNotes",$C),this.store.registerAction("updateLab",IC),this.store.registerAction("updateSpellcastingStats",OC),this.store.registerAction("updateCharacterType",PC),this.store.registerAction("updateBackground",LC),this.store.registerAction("updateSigil",MC),this.store.registerAction("updateBelongings",UC),this.store.registerAction("updateTalisman",jC),this.store.registerAction("updateMagicItems",BC),this.store.registerAction("updateQuests",NC),this.store.registerAction("updateNpcs",FC),this.store.registerAction("updateFamiliar",VC),this.isStandalone?this.registerFileLaunchHandler():(this.store.registerAction("rehydrateFromLocalStorage",hm),t.registerMiddleware(cm,om.After,{key:"character-sheets"}),t.dispatch(hm,"character-sheets"))}stateChanged(t,e){var n,i,s;cC.name=null!==(s=null===(i=null===(n=t.present)||void 0===n?void 0:n.character)||void 0===i?void 0:i.description.name)&&void 0!==s?s:""}registerFileLaunchHandler(){let t=window.launchQueue;t&&t.setConsumer((async t=>{const[e]=t.files;if(e){this.fileHandle=e;const t=await e.getFile();t&&(this.store.dispatch(uC,t),this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),om.After))}}))}get theFile(){return this.selectedFiles&&this.selectedFiles.length>0?this.selectedFiles[0]:null}};tP=jS([Th(Ut),wm(),NS("design:paramtypes",[mm])],tP);var eP=n(288),nP={};nP.styleTagTransform=GS(),nP.setAttributes=KS(),nP.insert=ZS().bind(null,"head"),nP.domAPI=zS(),nP.insertStyleElement=QS(),VS()(eP.Z,nP),eP.Z&&eP.Z.locals&&eP.Z.locals;const iP="checkbox",sP="<div class=\"container ${value ? 'checked' : 'unchecked'} ${readonly ? 'readonly' : ''} ${colorMode} ${size} ${mode}\" pointerup.delegate=\"toggle()\">\r\n</div>",rP=sP,oP=[];let aP;function lP(t){aP||(aP=Dh.define({name:iP,template:sP,dependencies:oP})),t.register(aP)}class cP{constructor(){this.colorMode="color"}}jS([ql,NS("design:type",String)],cP.prototype,"colorMode",void 0);let hP=class extends cP{constructor(){super(...arguments),this.value=!1,this.size="m",this.mode="regular",this.readonly=!1,this.toggle=()=>{this.readonly||(this.value=!this.value)}}};jS([ql,NS("design:type",Boolean)],hP.prototype,"value",void 0),jS([ql,NS("design:type",String)],hP.prototype,"size",void 0),jS([ql,NS("design:type",String)],hP.prototype,"mode",void 0),jS([ql,NS("design:type",Boolean)],hP.prototype,"readonly",void 0),hP=jS([Th(jt)],hP);var uP=n(2001),dP={};dP.styleTagTransform=GS(),dP.setAttributes=KS(),dP.insert=ZS().bind(null,"head"),dP.domAPI=zS(),dP.insertStyleElement=QS(),VS()(uP.Z,dP),uP.Z&&uP.Z.locals&&uP.Z.locals;const pP="list",fP='<title text.bind="title"></title>\r\n<div class="container">\r\n    <div repeat.for="item of items">\r\n        <text-field class="list-entry" value.two-way="item.name" title="${item.name}"></text-field>\r\n        <stat-info-button if.bind="hasAdditionalInfo" source.bind="item" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <add-item-input placeholder="Add item" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',gP=fP,vP=[];let mP;function bP(t){mP||(mP=Dh.define({name:pP,template:fP,dependencies:vP})),t.register(mP)}let wP=class{constructor(){this.items=[],this.hasAdditionalInfo=!1,this.itemAdded=t=>{this.items.push({name:t,additionalInfo:""}),this.items.sort(((t,e)=>t.name.localeCompare(e.name)))}}};jS([ql,NS("design:type",String)],wP.prototype,"title",void 0),jS([ql,NS("design:type",Array)],wP.prototype,"items",void 0),jS([ql,NS("design:type",Boolean)],wP.prototype,"hasAdditionalInfo",void 0),wP=jS([Th(Bt)],wP);var yP=n(1365),xP={};xP.styleTagTransform=GS(),xP.setAttributes=KS(),xP.insert=ZS().bind(null,"head"),xP.domAPI=zS(),xP.insertStyleElement=QS(),VS()(yP.Z,xP),yP.Z&&yP.Z.locals&&yP.Z.locals;const kP="stat-box",SP='<span if.bind="showHeader && header" class="header ${mode} ${size}">${header}</span>\r\n<div class="container ${active === true ? \'active\' : \'\'} ${readonly ? \'readonly\' : \'\'} ${fadeZero && value == 0 ? \'fade\' : \'\'} ${mode} ${colorMode} ${size}"\r\n     pointerdown.delegate="press()"\r\n     ref="containerElement">\r\n    <span class="content numbers">${getValuePrefix()+value}</div>\r\n</div>\r\n<div class="overlay" if.bind="active"  pointerup.delegate="release()" pointermove.delegate="move($event)"></div>',CP=SP,AP=[];let EP;function TP(t){EP||(EP=Dh.define({name:kP,template:SP,dependencies:AP})),t.register(EP)}let $P=class extends cP{constructor(t){super(),this.ea=t,this.max=99,this.min=-99,this.mode="primary-angled",this.size="m",this.prefixPlus=!1,this.readonly=!1,this.header="",this.showHeader=!0,this.fadeZero=!1,this.active=!1,this.delta=0,this.press=()=>{this.readonly||(this.active=!0,this.originalValue=this.value,this.delta=0,window.addEventListener("pointerout",this.checkPointerOutsideWindow))},this.checkPointerOutsideWindow=t=>{(t.clientY<=0||t.clientX<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(window.removeEventListener("pointerout",this.checkPointerOutsideWindow),this.release())},this.release=()=>{this.readonly||(this.active=!1)},this.move=t=>{if(!this.active||this.readonly)return;this.delta+=t.movementY;let e=Math.round(this.originalValue-this.delta/10);this.value=Math.max(this.min,Math.min(this.max,e)),this.ea.publish("ui-interaction")},this.getValuePrefix=()=>this.prefixPlus&&this.value>0?"+":""}};jS([ql,NS("design:type",Number)],$P.prototype,"value",void 0),jS([ql,NS("design:type",Number)],$P.prototype,"max",void 0),jS([ql,NS("design:type",Number)],$P.prototype,"min",void 0),jS([ql,NS("design:type",String)],$P.prototype,"mode",void 0),jS([ql,NS("design:type",String)],$P.prototype,"size",void 0),jS([ql,NS("design:type",Boolean)],$P.prototype,"prefixPlus",void 0),jS([ql,NS("design:type",Boolean)],$P.prototype,"readonly",void 0),jS([ql,NS("design:type",String)],$P.prototype,"header",void 0),jS([ql,NS("design:type",Boolean)],$P.prototype,"showHeader",void 0),jS([ql,NS("design:type",Boolean)],$P.prototype,"fadeZero",void 0),$P=jS([Th(Nt),BS(0,Ci),NS("design:paramtypes",[Object])],$P);var IP=n(9909),RP={};RP.styleTagTransform=GS(),RP.setAttributes=KS(),RP.insert=ZS().bind(null,"head"),RP.domAPI=zS(),RP.insertStyleElement=QS(),VS()(IP.Z,RP),IP.Z&&IP.Z.locals&&IP.Z.locals;const OP="radio-button",PP='<div class="container ${state} ${colorMode}"\r\n     pointerup.delegate="select()"\r\n     ref="element">\r\n</div>',LP=PP,MP=[];let UP;function jP(t){UP||(UP=Dh.define({name:OP,template:PP,dependencies:MP})),t.register(UP)}let BP=class extends cP{constructor(t){super(),this.ea=t,this.state="unselected",this.select=()=>{this.group?this.ea.publish("radio-button-selected",{group:this.group,source:this.element,value:this.value}):this.state="selected"}}bound(){this.ea.subscribe("radio-button-selected",(t=>{this.group==t.group&&(this.state=t.source===this.element?"selected":"unselected")}))}};jS([ql,NS("design:type",String)],BP.prototype,"state",void 0),jS([ql,NS("design:type",String)],BP.prototype,"group",void 0),jS([ql,NS("design:type",String)],BP.prototype,"value",void 0),BP=jS([Th(Ft),BS(0,Ci),NS("design:paramtypes",[Object])],BP);var NP=n(835),FP={};FP.styleTagTransform=GS(),FP.setAttributes=KS(),FP.insert=ZS().bind(null,"head"),FP.domAPI=zS(),FP.insertStyleElement=QS(),VS()(NP.Z,FP),NP.Z&&NP.Z.locals&&NP.Z.locals;const VP="text-box",DP='<title text.bind="title" if.bind="showBorders"></title>\r\n<div class="container">\r\n    <textarea value.bind="text" cols="32" rows="8" keydown.delegate="onChange()" autocomplete="chrome-off"></textarea>\r\n</div>\r\n<footer if.bind="showBorders"></footer>',zP=DP,qP=[];let ZP;function HP(t){ZP||(ZP=Dh.define({name:VP,template:DP,dependencies:qP})),t.register(ZP)}let KP=class{constructor(t){this.ea=t,this.showBorders=!0,this.onChange=()=>{this.ea.publish("ui-interaction")}}};jS([ql,NS("design:type",String)],KP.prototype,"title",void 0),jS([ql,NS("design:type",String)],KP.prototype,"text",void 0),jS([ql,NS("design:type",Boolean)],KP.prototype,"showBorders",void 0),KP=jS([Th(Vt),BS(0,Ci),NS("design:paramtypes",[Object])],KP);var WP=n(6140),QP={};QP.styleTagTransform=GS(),QP.setAttributes=KS(),QP.insert=ZS().bind(null,"head"),QP.domAPI=zS(),QP.insertStyleElement=QS(),VS()(WP.Z,QP),WP.Z&&WP.Z.locals&&WP.Z.locals;const _P="footer",GP='<div class="grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',XP=GP,YP=[];let JP;function tL(t){JP||(JP=Dh.define({name:_P,template:GP,dependencies:YP})),t.register(JP)}let eL=class{};eL=jS([Th(Dt)],eL);var nL=n(1939),iL={};iL.styleTagTransform=GS(),iL.setAttributes=KS(),iL.insert=ZS().bind(null,"head"),iL.domAPI=zS(),iL.insertStyleElement=QS(),VS()(nL.Z,iL),nL.Z&&nL.Z.locals&&nL.Z.locals;const sL="title",rL='<div class="title grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n    <span class="text">${text}</span>\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',oL=rL,aL=[];let lL;function cL(t){lL||(lL=Dh.define({name:sL,template:rL,dependencies:aL})),t.register(lL)}let hL=class{};jS([ql,NS("design:type",String)],hL.prototype,"text",void 0),hL=jS([Th(zt)],hL);var uL=n(1525),dL={};dL.styleTagTransform=GS(),dL.setAttributes=KS(),dL.insert=ZS().bind(null,"head"),dL.domAPI=zS(),dL.insertStyleElement=QS(),VS()(uL.Z,dL),uL.Z&&uL.Z.locals&&uL.Z.locals;const pL="rune-edge",fL='<div class="container">\r\n</div>',gL=fL,vL=[];let mL;function bL(t){mL||(mL=Dh.define({name:pL,template:fL,dependencies:vL})),t.register(mL)}let wL=class{};wL=jS([Th(qt)],wL);var yL=n(6392),xL={};xL.styleTagTransform=GS(),xL.setAttributes=KS(),xL.insert=ZS().bind(null,"head"),xL.domAPI=zS(),xL.insertStyleElement=QS(),VS()(yL.Z,xL),yL.Z&&yL.Z.locals&&yL.Z.locals;const kL="name-block",SL='<text-field placeholder="Name" value.two-way="model.name"></text-field>',CL=SL,AL=[];let EL;function TL(t){EL||(EL=Dh.define({name:kL,template:SL,dependencies:AL})),t.register(EL)}let $L=class extends sA{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),bC,e)}};$L=jS([Th(Zt),$h,BS(1,Ci),NS("design:paramtypes",[mm,Object])],$L);const IL="page-header",RL='\r\n\r\n<div class="grid">\r\n    <div class="page-links">\r\n        <a class="page-link description active" href="/description"></a>\r\n        <a class="page-link stats" href="/stats"></a>\r\n        <a class="page-link magic" href="/magic" if.bind="state.present.character.type == \'magus\'"></a>\r\n        <a class="page-link progression" href="/progression"></a>\r\n        <a class="page-link lab" href="/lab" if.bind="state.present.character.type == \'magus\'"></a>\r\n        <a class="page-link belongings" href="/belongings"></a>\r\n        <a class="page-link enchantments" href="/enchantments" if.bind="state.present.character.type == \'magus\'"></a>\r\n        <a class="page-link notes" href="/notes"></a>\r\n        <a class="page-link settings" href="/settings"></a>\r\n    </div>\r\n</div>',OL=RL,PL=[Ht];let LL;function ML(t){LL||(LL=Dh.define({name:IL,template:RL,dependencies:PL})),t.register(LL)}let UL=class{};UL=jS([Th(Kt),wm()],UL);var jL=n(4280),BL={};BL.styleTagTransform=GS(),BL.setAttributes=KS(),BL.insert=ZS().bind(null,"head"),BL.domAPI=zS(),BL.insertStyleElement=QS(),VS()(jL.Z,BL),jL.Z&&jL.Z.locals&&jL.Z.locals;const NL="text-field",FL='<input type="text" class.bind="class" value.bind="value" placeholder.bind="placeholder" title.bind="title" keydown.delegate="onChange()">\r\n',VL=FL,DL=[];let zL;function qL(t){zL||(zL=Dh.define({name:NL,template:FL,dependencies:DL})),t.register(zL)}let ZL=class{constructor(t){this.ea=t,this.placeholder="",this.title="",this.class="",this.onChange=()=>{this.ea.publish("ui-interaction")}}};jS([ql,NS("design:type",String)],ZL.prototype,"value",void 0),jS([ql,NS("design:type",String)],ZL.prototype,"placeholder",void 0),jS([ql,NS("design:type",String)],ZL.prototype,"title",void 0),jS([ql,NS("design:type",String)],ZL.prototype,"class",void 0),ZL=jS([Th(Wt),$h,BS(0,Ci),NS("design:paramtypes",[Object])],ZL);var HL=n(2661),KL={};KL.styleTagTransform=GS(),KL.setAttributes=KS(),KL.insert=ZS().bind(null,"head"),KL.domAPI=zS(),KL.insertStyleElement=QS(),VS()(HL.Z,KL),HL.Z&&HL.Z.locals&&HL.Z.locals;const WL="add-item-input",QL='<input class="add-item-input-field ${class}" type="text" placeholder.bind="placeholder" keyup.delegate="keyPressed($event)" value.two-way="newItemString">',_L=QL,GL=[];let XL;function YL(t){XL||(XL=Dh.define({name:WL,template:QL,dependencies:GL})),t.register(XL)}let JL=class{constructor(){this.placeholder="",this.class="",this.newItemString="",this.keyPressed=t=>{this.onItemAdded&&"Enter"==t.key&&this.newItemString&&(this.parent?this.onItemAdded(this.newItemString,this.parent):this.onItemAdded(this.newItemString),this.newItemString="")}}};jS([ql,NS("design:type",String)],JL.prototype,"placeholder",void 0),jS([ql,NS("design:type",Function)],JL.prototype,"onItemAdded",void 0),jS([ql,NS("design:type",Object)],JL.prototype,"parent",void 0),jS([ql,NS("design:type",String)],JL.prototype,"class",void 0),JL=jS([Th(Qt),$h],JL);var tM=n(3055),eM={};eM.styleTagTransform=GS(),eM.setAttributes=KS(),eM.insert=ZS().bind(null,"head"),eM.domAPI=zS(),eM.insertStyleElement=QS(),VS()(tM.Z,eM),tM.Z&&tM.Z.locals&&tM.Z.locals;const nM="dialog-box",iM='<div class="dialog-container ${size}">\r\n    <div class="inner-container">\r\n        <title text.bind="title"></title>\r\n        <au-slot></au-slot>\r\n        <footer></footer>\r\n    </div>\r\n</div>\r\n',sM=iM,rM=[];let oM;function aM(t){oM||(oM=Dh.define({name:nM,template:iM,dependencies:rM})),t.register(oM)}let lM=class{constructor(t){this.host=t,this.size="m"}attaching(){return document.body.classList.add("disable-scrolling"),this.host.animate([{transform:"scale(0.8)",opacity:"0"},{transform:"scale(1)",opacity:"1"}],{duration:200}).finished}detaching(){return document.body.classList.remove("disable-scrolling"),this.host.animate([{transform:"scale(1)",opacity:"1"},{transform:"scale(0.8)",opacity:"0"}],{duration:200}).finished}};jS([ql,NS("design:type",String)],lM.prototype,"title",void 0),jS([ql,NS("design:type",String)],lM.prototype,"size",void 0),lM=jS([Th(_t),xn(Element),NS("design:paramtypes",[Element])],lM);var cM=n(2495),hM={};hM.styleTagTransform=GS(),hM.setAttributes=KS(),hM.insert=ZS().bind(null,"head"),hM.domAPI=zS(),hM.insertStyleElement=QS(),VS()(cM.Z,hM),cM.Z&&cM.Z.locals&&cM.Z.locals;const uM="text-dialog",dM='<dialog-box title="${model.title}" size="m">\r\n    <text-box class="text-dialog-input" text.two-way="model.value" show-borders.bind="false"></text-box>\r\n</dialog-box>',pM=dM,fM=[];let gM;function vM(t){gM||(gM=Dh.define({name:uM,template:dM,dependencies:fM})),t.register(gM)}var mM;let bM=mM=class{activate(t){this.model=t}static open(t,e){let n=WM.get(lv),i=lC(t);n.open({component:()=>mM,overlayDismiss:!0,model:i}).whenClosed((n=>{t.value=i.value,e()}))}};bM=mM=jS([Th(Gt),$h],bM);var wM=n(1247),yM={};yM.styleTagTransform=GS(),yM.setAttributes=KS(),yM.insert=ZS().bind(null,"head"),yM.domAPI=zS(),yM.insertStyleElement=QS(),VS()(wM.Z,yM),wM.Z&&wM.Z.locals&&wM.Z.locals;const xM="stat-info-button",kM='<div class="button ${isActive ? \'active\' : \'\'}" click.delegate="activate()" title="Additional information">\r\n</div>',SM=kM,CM=[];let AM;function EM(t){AM||(AM=Dh.define({name:xM,template:kM,dependencies:CM})),t.register(AM)}let TM=class{constructor(){this.activate=()=>{let t=this.source[this.property],e={value:null!=t?t:"",title:"INFORMATION"};bM.open(e,(()=>{this.source[this.property]=e.value}))}}get isActive(){let t=this.source[this.property];return null!=t&&t.length>0}};jS([ql,NS("design:type",Object)],TM.prototype,"source",void 0),jS([ql,NS("design:type",String)],TM.prototype,"property",void 0),TM=jS([Th(Xt)],TM);var $M=n(1187),IM={};IM.styleTagTransform=GS(),IM.setAttributes=KS(),IM.insert=ZS().bind(null,"head"),IM.domAPI=zS(),IM.insertStyleElement=QS(),VS()($M.Z,IM),$M.Z&&$M.Z.locals&&$M.Z.locals;const RM="cross-button",OM='<div class="button-container ${mode}">\r\n\r\n</div>',PM=OM,LM=[];let MM;function UM(t){MM||(MM=Dh.define({name:RM,template:OM,dependencies:LM})),t.register(MM)}let jM=class{constructor(){this.mode="standard"}};jS([ql,NS("design:type",String)],jM.prototype,"mode",void 0),jM=jS([Th(Yt)],jM);var BM=n(8831),NM={};NM.styleTagTransform=GS(),NM.setAttributes=KS(),NM.insert=ZS().bind(null,"head"),NM.domAPI=zS(),NM.insertStyleElement=QS(),VS()(BM.Z,NM),BM.Z&&BM.Z.locals&&BM.Z.locals;const FM="symbol",VM='<div class="symbol-container ${icon}">\r\n</div>',DM=VM,zM=[];let qM;function ZM(t){qM||(qM=Dh.define({name:FM,template:VM,dependencies:zM})),t.register(qM)}let HM=class{constructor(){this.icon="three-dots"}};jS([ql,NS("design:type",String)],HM.prototype,"icon",void 0),HM=jS([Th(Jt)],HM);let KM=$v.register(ym.withInitialState(aC).withOptions({history:{undoable:!0,limit:20}})).register(US.customize({title:{transformTitle:(t,e,n)=>cC.name?`${cC.name} - ${t}`:t,appTitle:"${componentTitles}${appTitleSeparator}Sheet Maker"}})).register(Av).register(hP,wP,$P,BP,KP,ZL,JL,lM,bM,TM,jM,HM).register(eL,hL,wL,UL).app(tP);const WM=KM.container;KM.start(),window.addEventListener("dragover",(function(t){t.preventDefault()}),!1),window.addEventListener("drop",(function(t){t.preventDefault()}),!1),!(window.location.href.indexOf("localhost")>=0)&&"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sheet-maker/service-worker.js").then((t=>{console.log("SW registered: ",t)})).catch((t=>{console.log("SW registration failed: ",t)}))}))})()})();