/*! For license information please see entry.aa2496449e8d637878ec.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={2661:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".add-item-input-field {\r\n    margin-top: 15px;\r\n    width: 250px;\r\n    border-bottom-style: dashed !important;\r\n    display: block;\r\n}",""]);const a=o},288:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8390),n.b),h=new URL(n(3208),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"checkbox {\r\n    display: inline-block;\r\n}\r\n\r\ncheckbox > .container:not(.readonly) {\r\n    cursor: pointer;\r\n}\r\n\r\ncheckbox .container {\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\ncheckbox .container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncheckbox .container.s {\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n\r\ncheckbox .container.xs {\r\n    width: 13px;\r\n    height: 13px;\r\n}\r\n\r\ncheckbox .container.checked {\r\n    background-image: url("+d+");\r\n}\r\n\r\ncheckbox .container.unchecked {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},2001:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nlist > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nlist .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nlist .list-entry {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},8908:(t,e,n)=>{n.d(e,{Z:()=>y});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8801),n.b),h=new URL(n(9462),n.b),u=new URL(n(3473),n.b),d=new URL(n(2867),n.b),p=o()(s()),f=l()(c),g=l()(h),v=l()(u),m=l()(d);p.push([t.id,"primary-stat {\r\n    display: inline-block;\r\n}\r\n\r\nprimary-stat .container {\r\n    width: 60px;\r\n    height: 60px;\r\n    background-size: contain;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nprimary-stat > .container:not(.readonly) {\r\n    cursor: -webkit-grab;\r\n    cursor: grab;\r\n}\r\n\r\nprimary-stat .container.l {\r\n    width: 90px;\r\n    height: 90px;\r\n    font-size: 30px;\r\n}\r\n\r\nprimary-stat .container.s {\r\n    width: 45px;\r\n    height: 45px;\r\n    font-size: 13px;\r\n}\r\n\r\nprimary-stat .container.xs {\r\n    width: 36px;\r\n    height: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nprimary-stat .container.primary {\r\n    background-image: url("+f+");\r\n}\r\n\r\nprimary-stat .container.primary-angled {\r\n    background-image: url("+g+");\r\n}\r\n\r\nprimary-stat .container.secondary {\r\n    background-image: url("+v+");\r\n    width: 44px;\r\n    height: 44px;\r\n}\r\nprimary-stat .container.secondary.s {\r\n    width: 33px;\r\n    height: 33px;\r\n}\r\nprimary-stat .container.secondary.xs {\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nprimary-stat .container.secondary-angled {\r\n    background-image: url("+m+");\r\n}\r\n\r\nprimary-stat .container.active {\r\n    cursor: -webkit-grabbing;\r\n    cursor: grabbing;\r\n}\r\n\r\nprimary-stat .container .content {\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\nprimary-stat .overlay {\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 1;\r\n}",""]);const y=p},9909:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(164),n.b),h=new URL(n(2),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"radio-button {\r\n    display: inline-block;\r\n    cursor: pointer;\r\n}\r\n\r\nradio-button .container {\r\n    background-size: contain;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nradio-button .container.selected {\r\n    background-image: url("+d+");\r\n}\r\n\r\nradio-button .container.unselected {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},835:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box {\r\n    display: block;\r\n    width: 300px;\r\n}\r\n\r\ntext-box > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\ntext-box textarea {\r\n    font-family: 'Estonia', cursive;\r\n    font-size: 30px;\r\n    background-color: transparent;\r\n    font-weight: bold;\r\n\r\n    width: 100%;\r\n    border: none;\r\n    overflow: auto;\r\n    outline: none;\r\n    box-shadow: none;\r\n\r\n    resize: none;\r\n}",""]);const a=o},4280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-field .input {\r\n    text-overflow: ellipsis;\r\n    display: inline-block;\r\n}",""]);const a=o},6140:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"footer {\r\n    display: block;\r\n}\r\n\r\nfooter .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1) scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block; \r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n}",""]);const f=u},6392:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8626),n.b),h=o()(s()),u=l()(c);h.push([t.id,"page-header {\r\n    display: block;\r\n    width: 100%;\r\n    margin-top: 20px;\r\n}\r\n\r\npage-header > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto 1fr;\r\n    grid-template-rows:  0 1fr;\r\n}\r\n\r\npage-header .name-box {\r\n    height: 150px;\r\n    width: 400px;\r\n    background-position: 50%;\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    background-image: url("+u+");\r\n    text-align: center;\r\n}\r\n\r\npage-header .name-box input {\r\n    margin-top: 30px;\r\n    text-align: center;\r\n    font-size: 70px;\r\n    width: 300px;\r\n    border: none;\r\n}\r\n\r\npage-header .left-page-links {\r\n    align-self: center;\r\n    justify-self: right;\r\n    margin: 20px;\r\n    margin-top: 45px;\r\n}\r\n\r\npage-header .right-page-links {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 20px;\r\n    margin-top: 45px;\r\n}\r\n\r\npage-header .page-link {\r\n    margin: 10px;\r\n    color: #446;;\r\n}\r\n\r\npage-header .page-link {\r\n    text-decoration: none;\r\n}\r\n\r\n\r\n\r\npage-header .page-link:hover:not(.active) {\r\n    color: black;\r\n}\r\n\r\npage-header .page-link.active{\r\n    cursor: default;\r\n    color: darkred;\r\n}",""]);const d=h},1525:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7283),n.b),h=o()(s()),u=l()(c);h.push([t.id,"rune-edge {\r\n    display: block;\r\n    width: 100%;\r\n    height: 20px;\r\n    background-size: contain;\r\n    background-repeat: repeat-x;\r\n    background-image: url("+u+");\r\n    margin: 45px 0;\r\n}",""]);const d=h},1939:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"title {\r\n    display: block;\r\n    height: auto;\r\n}\r\n\r\ntitle .text {\r\n    font-size: 18px;\r\n    color: darkred;\r\n    padding: 0 4px;\r\n    display: inline-block;\r\n}\r\n\r\ntitle .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1);\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto auto auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n    \r\n}",""]);const f=u},1138:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(4378),n.b),h=o()(s()),u=l()(c);h.push([t.id,".message {\n  background-color: red;\n}\n\nbody {\n  font-family: 'Eagle Lake', cursive;\n  font-size: 20px;\n  color: darkred;\n  background-image:  url("+u+");\n  background-color: #FBF5EB;\n  margin: 0;\n}\n\n.numbers {\n  font-family: 'MedievalSharp', cursive;\n}\n\n/*\nfont-family: 'Amatic SC', cursive;\nfont-family: 'Eagle Lake', cursive;\nfont-family: 'Estonia', cursive;\nfont-family: 'Fleur De Leah', cursive;\nfont-family: 'IM Fell DW Pica SC', serif;\nfont-family: 'IM Fell English SC', serif;\nfont-family: 'MedievalSharp', cursive;\n*/\n\n.monochrome {\n  filter: grayscale(100%);\n}\n\n.text {\n    font-size: 16px;\n    color: #446;\n}\n\ninput[type=\"text\"] {\n  border: none;\n  border-bottom: 2px solid #cbc1ad;\n  background: none;\n  padding: 0px 6px;\n  font-family: 'Estonia', cursive;\n  font-size: 30px;\n  font-weight: bold;\n  text-indent: 5px;\n}\n\ninput[type=\"text\"]:focus {\n  outline: none;\n}\n\ninput[type=\"text\"].specialisation {\n  text-align: center;\n  width: 150px;\n  color: #888;\n}\n\n::-moz-placeholder {\n  color: #bbb;\n  opacity: 1; /* Firefox */\n}\n\n::placeholder {\n  color: #bbb;\n  opacity: 1; /* Firefox */\n}\n\nmy-app > .page-view {\n  min-height: 1100px;\n}",""]);const d=h},927:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"abilities-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nabilities-block > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nabilities-block .ability > * {\r\n    display: inline-block;\r\n}\r\n\r\nabilities-block .ability .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .name {\r\n    opacity: 0.4;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability .specialisation {\r\n    width: 150px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .specialisation {\r\n    opacity: 0;\r\n}\r\n\r\nabilities-block .add-item-input {\r\n    margin-top: 15px;\r\n    width: 200px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nabilities-block .puissant-label {\r\n    width: 0;\r\n}",""]);const a=o},7804:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"active-magic-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n    width: 366px;\r\n}\r\n\r\nactive-magic-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nactive-magic-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nactive-magic-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nactive-magic-list .add-magic-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}",""]);const a=o},2012:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"age-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nage-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-template-rows: auto auto auto 60px;\r\n}\r\n\r\nage-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 4px;\r\n}\r\n\r\nage-block > .grid > .left {\r\n    justify-self: left;\r\n}\r\n\r\nage-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nage-block > .grid > .bottom {\r\n    align-self: end;\r\n}\r\n\r\nage-block > .grid > .top {\r\n    align-self: baseline;\r\n}\r\n\r\nage-block .small-text {\r\n    font-size: 14px;\r\n}",""]);const a=o},5185:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"arts-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\narts-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto 40px auto auto auto auto  10px auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\narts-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\narts-block .untrained {\r\n    opacity: 0.4;\r\n}",""]);const a=o},3260:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"background-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nbackground-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nbackground-block text-box textarea {\r\n    height: 1200px;\r\n}",""]);const a=o},8985:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"carried-belongings-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\ncarried-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\ncarried-belongings-block text-box textarea {\r\n    height: 800px;\r\n}",""]);const a=o},6767:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"character-type-selector {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    height: -webkit-fit-content;\r\n    height: -moz-fit-content;\r\n    height: fit-content;\r\n    color: #446;\r\n    margin: 20px;\r\n}\r\n\r\ncharacter-type-selector .container > * {\r\n    vertical-align: middle;\r\n}",""]);const a=o},3292:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"characteristics-block {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    color: #446;\r\n    margin: 30px;\r\n    float: left;\r\n}\r\n\r\ncharacteristics-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ncharacteristics-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr;\r\n}\r\n\r\ncharacteristics-block .grid > * {\r\n    align-self: center;\r\n}\r\n\r\ncharacteristics-block .grid .text.left-col {\r\n    justify-self: right;\r\n}\r\n\r\ncharacteristics-block .grid .text{\r\n    justify-self: left;\r\n    margin-left: 3px;\r\n    margin-right: 3px;\r\n}\r\n\r\n\r\ncharacteristics-block .grid primary-stat {\r\n    margin: 1px;\r\n}\r\n\r\ncharacteristics-block footer {\r\n    margin-top: 5px;\r\n}\r\n\r\ncharacteristics-block .specialisation {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},4397:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"confidence-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},6903:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"damage-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\ndamage-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ndamage-block .wound-type {\r\n    display: inline-block;\r\n    margin: 0 10px;\r\n}\r\n\r\ndamage-block .wound-type:nth-child(1) {\r\n    display: inline-block;\r\n    margin-left: 0;\r\n}\r\n",""]);const a=o},3845:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"description-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},1459:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"fatigue-block {\r\n    display: block;\r\n    margin: 30px;\r\n    min-width: 280px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nfatigue-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nfatigue-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\nfatigue-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nfatigue-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nfatigue-block radio-button {\r\n    margin-left: 5px;\r\n}",""]);const a=o},2820:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-description-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\nlab-description-block text-box {\r\n    width: 100%;\r\n}",""]);const a=o},6964:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,'lab-modifications-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    min-width: 845px;\r\n    float: left;\r\n}\r\n\r\nlab-modifications-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-modifications-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nlab-modifications-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-modifications-list .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .container > .title {\r\n    display: block;\r\n    margin-top: 30px;\r\n}\r\n\r\nlab-modifications-list .grid > .name {\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .grid > .category {\r\n    width: 100px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .grid > .description {\r\n    width: 400px;\r\n}\r\n\r\nlab-modifications-list .add-item-input.add-modifier-input {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: -15px;\r\n    width: 60px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .modifier-titles {\r\n    position: absolute;\r\n    right: 32px;\r\n    top: 40px;\r\n}\r\n\r\nlab-modifications-list .modifier-title {\r\n    font-size: 9px;\r\n    display: inline-block;\r\n    width: 33px;\r\n    margin: 2px;\r\n    text-align: center;\r\n    font-family: "Eagle Lake", cursive;\r\n    border-bottom: none;\r\n    padding: 0px;\r\n    font-weight: unset;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nlab-modifications-list .modifier-totals {\r\n    position: absolute;\r\n    right: 30px;\r\n    bottom: 20px;\r\n}\r\n\r\nlab-modifications-list .modifier-total {\r\n    font-size: 16px;\r\n    display: inline-block;\r\n    width: 33px;\r\n    margin: 2px;\r\n    text-align: center;\r\n}',""]);const a=o},8412:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-stats {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 1500px;\r\n    float: left;\r\n}\r\n\r\nlab-stats > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-stats > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr 1fr;\r\n}\r\n\r\nlab-stats > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-stats > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nlab-stats .modifier-selector {\r\n    text-align: center;\r\n    width: 100px;\r\n}",""]);const a=o},4769:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"magic-items-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 2128px;\r\n    float: left;\r\n}\r\n\r\nmagic-items-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nmagic-items-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content auto;\r\n    grid-template-columns: min-content min-content min-content min-content auto;\r\n    grid-auto-rows: auto auto;\r\n}\r\n\r\nmagic-items-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nmagic-items-block .magic-item > .effects {\r\n    grid-column-start: 1;\r\n    grid-column-end: 6;\r\n}\r\n\r\nmagic-items-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\nmagic-items-block .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nmagic-items-block .effect .usages, magic-items-block .effect .range, magic-items-block .effect .duration, magic-items-block .effect .target, magic-items-block .effect .arts {\r\n    width: 150px;\r\n}\r\n\r\nmagic-items-block .magic-item {\r\n    border-left: 3px solid darkred;\r\n    margin-bottom: 20px;\r\n    padding: 0 10px;\r\n}",""]);const a=o},3349:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"notes-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nnotes-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nnotes-block text-box textarea {\r\n    height: 1200px;\r\n}",""]);const a=o},5555:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"personality-traits-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\npersonality-traits-list > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\npersonality-traits-list .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\npersonality-traits-list primary-stat {\r\n    margin-left: 10px;;\r\n}",""]);const a=o},7600:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"quest-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nquest-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nquest-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nquest-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nquest-list .name {\r\n    width: 650px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nquest-list .priority {\r\n    margin-left: 10px !important;\r\n}",""]);const a=o},4467:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"research-projects {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 2128px;\r\n    float: left;\r\n}\r\n\r\nresearch-projects > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nresearch-projects .aura-bonus {\r\n    display: block;\r\n}\r\n\r\nresearch-projects .add-item-input {\r\n    margin-top: 15px;\r\n    width: 250px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nresearch-projects > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nresearch-projects > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nresearch-projects .description {\r\n    width: 600px;\r\n    margin-left: 40px !important;\r\n    text-overflow: ellipsis;\r\n}\r\nresearch-projects .arts, research-projects .prerequisites {\r\n    width: 50px;\r\n    text-align: center;\r\n}\r\nresearch-projects .level {\r\n    margin-right: 40px !important;\r\n}\r\n\r\nresearch-projects .material, research-projects .shape {\r\n    width: 150px;\r\n    text-align: center;\r\n}\r\n\r\nresearch-projects .total {\r\n    margin-left: 40px !important;\r\n}",""]);const a=o},5204:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"sanctum-belongings-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\nsanctum-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nsanctum-belongings-block text-box textarea {\r\n    height: 800px;\r\n}",""]);const a=o},7266:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(9462),n.b),h=new URL(n(3082),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"sigil {\r\n    display: block;\r\n    height: auto;\r\n    float: left;\r\n}\r\n\r\nsigil > .container {\r\n    width: 130px;\r\n    height: 130px;\r\n    background-size: contain;\r\n    background-image: url("+d+");\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nsigil > .container .sigil-image-placeholder {\r\n    width: 70px;\r\n    height: 35px;\r\n    background-size: contain;\r\n    background-image: url("+p+");\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container .sigil-image {\r\n    width: 70px;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container.active-drag {\r\n    opacity: 0.6;\r\n}",""]);const f=u},7624:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nspell-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-list .add-item-input {\r\n    margin-top: 15px;\r\n    width: 300px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-list .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-list .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-list .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-list .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-list .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-list .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-list .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-list .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-list .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-list .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-list .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-list .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #bbb;\r\n}\r\n\r\nspell-list .co-form ~ .co-form .form-header::before,\r\nspell-list .an-form ~ .an-form .form-header::before,\r\nspell-list .au-form ~ .au-form .form-header::before,\r\nspell-list .aq-form ~ .aq-form .form-header::before,\r\nspell-list .he-form ~ .he-form .form-header::before,\r\nspell-list .vi-form ~ .vi-form .form-header::before,\r\nspell-list .te-form ~ .te-form .form-header::before,\r\nspell-list .ig-form ~ .ig-form .form-header::before,\r\nspell-list .me-form ~ .me-form .form-header::before,\r\nspell-list .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}",""]);const a=o},2244:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spellcasting-modifiers-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 1000px;\r\n    float: left;\r\n}\r\n\r\nspellcasting-modifiers-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid .arts {\r\n    width: 60px;\r\n    text-align: center;\r\n}",""]);const a=o},6019:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"talisman-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 2062px;\r\n    float: left;\r\n}\r\n\r\ntalisman-block .effects .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .container > .description {\r\n    width: 800px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .effects.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid > *, talisman-block > .container .effects.grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\ntalisman-block .bonuses, talisman-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\ntalisman-block .bonuses .name {\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .effect .notes {\r\n    width: 400px;\r\n}\r\n\r\ntalisman-block .effect .usages, talisman-block .effect .range, talisman-block .effect .duration, talisman-block .effect .target, talisman-block .effect .arts {\r\n    width: 150px;\r\n}",""]);const a=o},1860:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"vis-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nvis-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nvis-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nvis-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nvis-block .add-item-input {\r\n    margin-top: 15px;\r\n    width: 100px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nvis-block .name {\r\n    width: 100px;\r\n}\r\n\r\nvis-block .income, vis-block .notes {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},2410:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"warping-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n    width: 420px;\r\n}\r\n\r\nwarping-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nwarping-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nwarping-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nwarping-block .warping-level {\r\n    text-align: center;\r\n}\r\n\r\nwarping-block .add-effect-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}",""]);const a=o},8840:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"xp-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nxp-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nxp-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 70px 100px auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nxp-list > .container > .grid.past-xp-entry {\r\n    grid-template-columns: 70px 100px auto auto auto auto;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n}\r\n\r\nxp-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nxp-list .description, xp-list .plans {\r\n    width: 400px;\r\n}\r\n\r\nxp-list .xp {\r\n    width: 600px;\r\n}\r\n\r\nxp-list .correspondence, xp-list .area-lore  {\r\n    width: 150px;\r\n}\r\n\r\nxp-list .separator {\r\n    height: 40px;\r\n}",""]);const a=o},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,s,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},1667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:t=>{t.exports=function(t){return t[1]}},3379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],h=r[c]||0,u="".concat(c," ").concat(h);r[c]=h+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=s(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var r=i(t=t||[],s=s||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=n(r[o]);e[a].references--}for(var l=i(t,s),c=0;c<r.length;c++){var h=n(r[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=l}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},8390:(t,e,n)=>{t.exports=n.p+"3747d62d05f8f09fb741.png"},3208:(t,e,n)=>{t.exports=n.p+"b037ca7f505f5c048bae.png"},164:(t,e,n)=>{t.exports=n.p+"5c3d1b2ce7bb3793be6e.png"},2:(t,e,n)=>{t.exports=n.p+"2b9f9a8912419b0f4b69.png"},2867:(t,e,n)=>{t.exports=n.p+"fe3a2cf273f4367e50c9.png"},3473:(t,e,n)=>{t.exports=n.p+"60e08010af0453fec957.png"},9462:(t,e,n)=>{t.exports=n.p+"c945e6443b532c587958.png"},8801:(t,e,n)=>{t.exports=n.p+"8a70e34efeda3124235b.png"},3082:(t,e,n)=>{t.exports=n.p+"dd674023209c7164b31e.png"},7283:(t,e,n)=>{t.exports=n.p+"33cbb501e4e522021025.png"},1668:(t,e,n)=>{t.exports=n.p+"92bd8516e50642f8233a.png"},3356:(t,e,n)=>{t.exports=n.p+"5bd76dab3a9d835f39f2.png"},8626:(t,e,n)=>{t.exports=n.p+"ec6a054a75f35ddbe8db.png"},4378:(t,e,n)=>{t.exports=n.p+"4a319709cc0699c694dc.png"}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/sheet-maker/",n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var t={};n.r(t),n.d(t,{default:()=>BS,dependencies:()=>FS,name:()=>US,register:()=>DS,template:()=>NS});var e={};n.r(e),n.d(e,{CharacterTypeSelector:()=>jC});var i={};n.r(i),n.d(i,{default:()=>VC,dependencies:()=>DC,name:()=>BC,register:()=>qC,template:()=>FC});var s={};n.r(s),n.d(s,{DescriptionBlock:()=>HC});var r={};n.r(r),n.d(r,{default:()=>KC,dependencies:()=>_C,name:()=>ZC,register:()=>GC,template:()=>WC});var o={};n.r(o),n.d(o,{VirtuesList:()=>XC});var a={};n.r(a),n.d(a,{default:()=>tA,dependencies:()=>eA,name:()=>YC,register:()=>iA,template:()=>JC});var l={};n.r(l),n.d(l,{FlawsList:()=>sA});var c={};n.r(c),n.d(c,{default:()=>cA,dependencies:()=>hA,name:()=>aA,register:()=>dA,template:()=>lA});var h={};n.r(h),n.d(h,{PersonalityTraitsList:()=>pA});var u={};n.r(u),n.d(u,{default:()=>yA,dependencies:()=>bA,name:()=>vA,register:()=>xA,template:()=>mA});var d={};n.r(d),n.d(d,{WarpingBlock:()=>kA});var p={};n.r(p),n.d(p,{default:()=>AA,dependencies:()=>EA,name:()=>SA,register:()=>$A,template:()=>CA});var f={};n.r(f),n.d(f,{Description:()=>IA});var g={};n.r(g),n.d(g,{default:()=>MA,dependencies:()=>jA,name:()=>PA,register:()=>NA,template:()=>LA});var v={};n.r(v),n.d(v,{AbilitiesBlock:()=>BA});var m={};n.r(m),n.d(m,{default:()=>qA,dependencies:()=>HA,name:()=>DA,register:()=>WA,template:()=>zA});var y={};n.r(y),n.d(y,{CharacteristicsBlock:()=>KA});var b={};n.r(b),n.d(b,{default:()=>YA,dependencies:()=>JA,name:()=>GA,register:()=>eE,template:()=>XA});var w={};n.r(w),n.d(w,{FatigueBlock:()=>nE});var x={};n.r(x),n.d(x,{default:()=>aE,dependencies:()=>lE,name:()=>rE,register:()=>hE,template:()=>oE});var k={};n.r(k),n.d(k,{DamageBlock:()=>uE});var S={};n.r(S),n.d(S,{default:()=>vE,dependencies:()=>mE,name:()=>fE,register:()=>bE,template:()=>gE});var C={};n.r(C),n.d(C,{ConfidenceBlock:()=>wE});var A={};n.r(A),n.d(A,{default:()=>AE,dependencies:()=>EE,name:()=>SE,register:()=>$E,template:()=>CE});var E={};n.r(E),n.d(E,{ActiveMagicList:()=>IE});var T={};n.r(T),n.d(T,{default:()=>PE,dependencies:()=>LE,name:()=>OE,register:()=>jE,template:()=>RE});var $={};n.r($),n.d($,{Stats:()=>UE});var I={};n.r(I),n.d(I,{default:()=>DE,dependencies:()=>zE,name:()=>FE,register:()=>HE,template:()=>VE});var O={};n.r(O),n.d(O,{ArtsBlock:()=>ZE});var R={};n.r(R),n.d(R,{default:()=>GE,dependencies:()=>XE,name:()=>_E,register:()=>JE,template:()=>QE});var P={};n.r(P),n.d(P,{SpellcastingModifiersBlock:()=>tT});var L={};n.r(L),n.d(L,{default:()=>rT,dependencies:()=>oT,name:()=>iT,register:()=>lT,template:()=>sT});var M={};n.r(M),n.d(M,{SpellList:()=>cT});var j={};n.r(j),n.d(j,{default:()=>fT,dependencies:()=>gT,name:()=>dT,register:()=>mT,template:()=>pT});var U={};n.r(U),n.d(U,{Sigil:()=>yT});var N={};n.r(N),n.d(N,{default:()=>xT,dependencies:()=>kT,name:()=>bT,register:()=>CT,template:()=>wT});var B={};n.r(B),n.d(B,{Magic:()=>AT});var F={};n.r(F),n.d(F,{default:()=>OT,dependencies:()=>RT,name:()=>$T,register:()=>LT,template:()=>IT});var V={};n.r(V),n.d(V,{LabStats:()=>MT});var D={};n.r(D),n.d(D,{default:()=>FT,dependencies:()=>VT,name:()=>NT,register:()=>zT,template:()=>BT});var z={};n.r(z),n.d(z,{ResearchProjects:()=>qT});var q={};n.r(q),n.d(q,{default:()=>_T,dependencies:()=>QT,name:()=>WT,register:()=>XT,template:()=>KT});var H={};n.r(H),n.d(H,{LabModificationsList:()=>YT});var Z={};n.r(Z),n.d(Z,{default:()=>i$,dependencies:()=>s$,name:()=>e$,register:()=>o$,template:()=>n$});var W={};n.r(W),n.d(W,{LabDescriptionBlock:()=>a$});var K={};n.r(K),n.d(K,{default:()=>h$,dependencies:()=>u$,name:()=>l$,register:()=>p$,template:()=>c$});var _={};n.r(_),n.d(_,{Lab:()=>f$});var Q={};n.r(Q),n.d(Q,{default:()=>b$,dependencies:()=>w$,name:()=>m$,register:()=>k$,template:()=>y$});var G={};n.r(G),n.d(G,{CarriedBelongingsBlock:()=>S$});var X={};n.r(X),n.d(X,{default:()=>$$,dependencies:()=>I$,name:()=>E$,register:()=>R$,template:()=>T$});var Y={};n.r(Y),n.d(Y,{SanctumBelongingsBlock:()=>P$});var J={};n.r(J),n.d(J,{default:()=>N$,dependencies:()=>B$,name:()=>j$,register:()=>V$,template:()=>U$});var tt={};n.r(tt),n.d(tt,{VisBlock:()=>D$});var et={};n.r(et),n.d(et,{default:()=>H$,dependencies:()=>Z$,name:()=>z$,register:()=>K$,template:()=>q$});var nt={};n.r(nt),n.d(nt,{Belongings:()=>_$});var it={};n.r(it),n.d(it,{default:()=>J$,dependencies:()=>tI,name:()=>X$,register:()=>nI,template:()=>Y$});var st={};n.r(st),n.d(st,{NotesBlock:()=>iI});var rt={};n.r(rt),n.d(rt,{default:()=>lI,dependencies:()=>cI,name:()=>oI,register:()=>uI,template:()=>aI});var ot={};n.r(ot),n.d(ot,{BackgroundBlock:()=>dI});var at={};n.r(at),n.d(at,{default:()=>mI,dependencies:()=>yI,name:()=>gI,register:()=>wI,template:()=>vI});var lt={};n.r(lt),n.d(lt,{QuestList:()=>xI});var ct={};n.r(ct),n.d(ct,{default:()=>CI,dependencies:()=>AI,name:()=>kI,register:()=>TI,template:()=>SI});var ht={};n.r(ht),n.d(ht,{Notes:()=>$I});var ut={};n.r(ut),n.d(ut,{default:()=>LI,dependencies:()=>MI,name:()=>RI,register:()=>UI,template:()=>PI});var dt={};n.r(dt),n.d(dt,{XpList:()=>NI});var pt={};n.r(pt),n.d(pt,{default:()=>zI,dependencies:()=>qI,name:()=>VI,register:()=>ZI,template:()=>DI});var ft={};n.r(ft),n.d(ft,{AgeBlock:()=>WI});var gt={};n.r(gt),n.d(gt,{default:()=>QI,dependencies:()=>GI,name:()=>KI,register:()=>YI,template:()=>_I});var vt={};n.r(vt),n.d(vt,{Progression:()=>JI});var mt={};n.r(mt),n.d(mt,{default:()=>sO,dependencies:()=>rO,name:()=>nO,register:()=>aO,template:()=>iO});var yt={};n.r(yt),n.d(yt,{TalismanBlock:()=>lO});var bt={};n.r(bt),n.d(bt,{default:()=>pO,dependencies:()=>fO,name:()=>uO,register:()=>vO,template:()=>dO});var wt={};n.r(wt),n.d(wt,{MagicItemsBlock:()=>mO});var xt={};n.r(xt),n.d(xt,{default:()=>wO,dependencies:()=>xO,name:()=>yO,register:()=>SO,template:()=>bO});var kt={};n.r(kt),n.d(kt,{Enchantments:()=>CO});var St={};n.r(St),n.d(St,{default:()=>TO,dependencies:()=>$O,name:()=>AO,register:()=>OO,template:()=>EO});var Ct={};n.r(Ct),n.d(Ct,{default:()=>UO,dependencies:()=>NO,name:()=>MO,register:()=>FO,template:()=>jO});var At={};n.r(At),n.d(At,{default:()=>WO,dependencies:()=>KO,name:()=>HO,register:()=>QO,template:()=>ZO});var Et={};n.r(Et),n.d(Et,{default:()=>eR,dependencies:()=>nR,name:()=>JO,register:()=>sR,template:()=>tR});var Tt={};n.r(Tt),n.d(Tt,{default:()=>hR,dependencies:()=>uR,name:()=>lR,register:()=>pR,template:()=>cR});var $t={};n.r($t),n.d($t,{default:()=>bR,dependencies:()=>wR,name:()=>mR,register:()=>kR,template:()=>yR});var It={};n.r(It),n.d(It,{default:()=>$R,dependencies:()=>IR,name:()=>ER,register:()=>RR,template:()=>TR});var Ot={};n.r(Ot),n.d(Ot,{default:()=>NR,dependencies:()=>BR,name:()=>jR,register:()=>VR,template:()=>UR});var Rt={};n.r(Rt),n.d(Rt,{default:()=>WR,dependencies:()=>KR,name:()=>HR,register:()=>QR,template:()=>ZR});var Pt={};n.r(Pt),n.d(Pt,{default:()=>eP,dependencies:()=>nP,name:()=>JR,register:()=>sP,template:()=>tP});var Lt={};n.r(Lt),n.d(Lt,{NameBlock:()=>rP});var Mt={};n.r(Mt),n.d(Mt,{default:()=>lP,dependencies:()=>cP,name:()=>oP,register:()=>uP,template:()=>aP});var jt={};n.r(jt),n.d(jt,{default:()=>mP,dependencies:()=>yP,name:()=>gP,register:()=>wP,template:()=>vP});var Ut={};function Nt(t){return"object"==typeof t&&null!==t||"function"==typeof t}function Bt(t){return null==t}n.r(Ut),n.d(Ut,{default:()=>EP,dependencies:()=>TP,name:()=>CP,register:()=>IP,template:()=>AP});let Ft=new WeakMap;function Vt(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function Dt(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function zt(t,e,n){let i=Ft.get(t);if(void 0===i){if(!n)return;i=new Map,Ft.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function qt(t,e,n){const i=zt(e,n,!1);return void 0!==i&&i.has(t)}function Ht(t,e,n){if(qt(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&Ht(t,i,n)}function Zt(t,e,n){const i=zt(e,n,!1);if(void 0!==i)return i.get(t)}function Wt(t,e,n){if(qt(t,e,n))return Zt(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?Wt(t,i,n):void 0}function Kt(t,e,n,i){zt(n,i,!0).set(t,e)}function _t(t,e){const n=[],i=zt(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function Qt(t,e){const n=_t(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=Qt(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}function Gt(t,e){return function(n,i){if(!Nt(n))throw Vt("@metadata",[t,e,n,i],"target",n,"Object or Function");Kt(t,e,n,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(i))}}function Xt(t,e,n,i){if(void 0!==n){if(!Array.isArray(t))throw Vt("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if(!Nt(e))throw Vt("Metadata.decorate",[t,e,n,i],"target",e,"Object or Function");if(!Nt(i)&&!Bt(i))throw Vt("Metadata.decorate",[t,e,n,i],"attributes",i,"Object, Function, null, or undefined");return null===i&&(i=void 0),function(t,e,n,i){for(let s=t.length-1;s>=0;--s){const r=(0,t[s])(e,n,i);if(!Bt(r)){if(!Nt(r))throw Vt("DecorateProperty",[t,e,n,i],"decorated",r,"Object, Function, null, or undefined");i=r}}return i}(t,e,n=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(n),i)}if(!Array.isArray(t))throw Vt("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if("function"!=typeof e)throw Vt("Metadata.decorate",[t,e,n,i],"target",e,"Function");return function(t,e){for(let n=t.length-1;n>=0;--n){const i=(0,t[n])(e);if(!Bt(i)){if("function"!=typeof i)throw Vt("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function Yt(t,e,n,i){if(!Nt(n))throw Vt("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return Kt(t,e,n,Dt(i))}function Jt(t,e,n){if(!Nt(e))throw Vt("Metadata.has",[t,e,n],"target",e,"Object or Function");return Ht(t,e,Dt(n))}function te(t,e,n){if(!Nt(e))throw Vt("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return qt(t,e,Dt(n))}function ee(t,e,n){if(!Nt(e))throw Vt("Metadata.get",[t,e,n],"target",e,"Object or Function");return Wt(t,e,Dt(n))}function ne(t,e,n){if(!Nt(e))throw Vt("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return Zt(t,e,Dt(n))}function ie(t,e){if(!Nt(t))throw Vt("Metadata.getKeys",[t,e],"target",t,"Object or Function");return Qt(t,Dt(e))}function se(t,e){if(!Nt(t))throw Vt("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return _t(t,Dt(e))}function re(t,e,n){if(!Nt(e))throw Vt("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=zt(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,Dt(n))}const oe={define:Yt,has:Jt,hasOwn:te,get:ee,getOwn:ne,getKeys:ie,getOwnKeys:se,delete:re};function ae(t,e,n,i,s){if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:s,value:n}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}const le="[[$au]]";function ce(t,e,n){ae(t,le,Ft,e,n),ae(t,"metadata",Gt,e,n),ae(t,"decorate",Xt,e,n),ae(t,"defineMetadata",Yt,e,n),ae(t,"hasMetadata",Jt,e,n),ae(t,"hasOwnMetadata",te,e,n),ae(t,"getMetadata",ee,e,n),ae(t,"getOwnMetadata",ne,e,n),ae(t,"getMetadataKeys",ie,e,n),ae(t,"getOwnMetadataKeys",se,e,n),ae(t,"deleteMetadata",re,e,n)}const he=oe.getOwn,ue=oe.hasOwn,de=oe.define,pe=t=>"function"==typeof t,fe=t=>"string"==typeof t,ge=()=>Object.create(null),ve={};function me(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=ve[t];if(void 0!==e)return e;const n=t.length;if(0===n)return ve[t]=!1;let i=0,s=0;for(;s<n;++s)if(i=t.charCodeAt(s),0===s&&48===i&&n>1||i<48||i>57)return ve[t]=!1;return ve[t]=!0}default:return!1}}function ye(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function be(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const we=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(ge(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function n(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const i=t.length;if(0===i)return t;let s,r=!1,o="",a="",l=0,c=t.charAt(0),h=n(c),u=0;for(;u<i;++u)s=l,a=c,l=h,c=t.charAt(u+1),h=n(c),0===l?o.length>0&&(r=!0):(!r&&o.length>0&&2===l&&(r=3===s||3===h),o+=e(a,r),r=!1);return o}}(),xe=function(){const t=ge();function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=we(n,e)),i}}(),ke=function(){const t=ge();return function(e){let n=t[e];return void 0===n&&(n=xe(e),n.length>0&&(n=n[0].toUpperCase()+n.slice(1)),t[e]=n),n}}(),Se=function(){const t=ge();function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=we(n,e)),i}}();function Ce(t){const{length:e}=t,n=Array(e);let i=0;for(;i<e;++i)n[i]=t[i];return n}const Ae={};function Ee(t){return void 0===Ae[t]&&(Ae[t]=0),++Ae[t]}function Te(t,e){return t-e}function $e(t,e,n){return{configurable:!0,enumerable:n.enumerable,get(){const t=n.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:n.enumerable}),t}}}function Ie(...t){const e=[];let n=0;const i=t.length;let s,r=0,o=0;for(;o<i;++o)if(s=t[o],void 0!==s){r=s.length;let t=0;for(;t<r;++t)e[n++]=s[t]}return e}function Oe(...t){const e=t.length;let n,i=0;for(;e>i;++i)if(n=t[i],void 0!==n)return n;throw new Error("No default value found")}const Re=function(){const t=Function.prototype,e=Object.getPrototypeOf,n=new WeakMap;let i,s=t,r=0;return function(o){if(i=n.get(o),void 0===i)for(n.set(o,i=[s=o]),r=0;(s=e(s))!==t;)i[++r]=s;return i}}();function Pe(...t){return Object.assign(ge(),...t)}const Le=function(){const t=new WeakMap;let e=!1,n="",i=0;return function(s){return e=t.get(s),void 0===e&&(n=s.toString(),i=n.length,e=i>=29&&i<=100&&125===n.charCodeAt(i-1)&&n.charCodeAt(i-2)<=32&&93===n.charCodeAt(i-3)&&101===n.charCodeAt(i-4)&&100===n.charCodeAt(i-5)&&111===n.charCodeAt(i-6)&&99===n.charCodeAt(i-7)&&32===n.charCodeAt(i-8)&&101===n.charCodeAt(i-9)&&118===n.charCodeAt(i-10)&&105===n.charCodeAt(i-11)&&116===n.charCodeAt(i-12)&&97===n.charCodeAt(i-13)&&110===n.charCodeAt(i-14)&&88===n.charCodeAt(i-15),t.set(s,e)),e}}();function Me(t,e){return t instanceof Promise?t.then(e):e(t)}function je(...t){let e,n,i,s=0,r=t.length;for(;s<r;++s)e=t[s],(e=t[s])instanceof Promise&&(void 0===n?n=e:void 0===i?i=[n,e]:i.push(e));return void 0===i?n:Promise.all(i)}const Ue="au:annotation",Ne=(t,e)=>void 0===e?`${Ue}:${t}`:`${Ue}:${t}:${e}`,Be=(t,e)=>{const n=he(Ue,t);void 0===n?de(Ue,[e],t):n.push(e)},Fe=Object.freeze({name:"au:annotation",appendTo:Be,set(t,e,n){de(Ne(e),n,t)},get:(t,e)=>he(Ne(e),t),getKeys(t){let e=he(Ue,t);return void 0===e&&de(Ue,e=[],t),e},isKey:t=>t.startsWith(Ue),keyFor:Ne}),Ve="au:resource",De=Object.freeze({name:Ve,appendTo(t,e){const n=he(Ve,t);void 0===n?de(Ve,[e],t):n.push(e)},has:t=>ue(Ve,t),getAll(t){const e=he(Ve,t);return void 0===e?Pn:e.map((e=>he(e,t)))},getKeys(t){let e=he(Ve,t);return void 0===e&&de(Ve,e=[],t),e},isKey:t=>t.startsWith(Ve),keyFor:(t,e)=>void 0===e?`${Ve}:${t}`:`${Ve}:${t}:${e}`}),ze={annotation:Fe,resource:De},qe=Object.prototype.hasOwnProperty;function He(t,e,n,i){let s=he(Ne(t),n);return void 0===s?(s=e[t],void 0===s?(s=n[t],void 0!==s&&qe.call(n,t)?s:i()):s):s}function Ze(t,e,n){let i=he(Ne(t),e);return void 0===i?(i=e[t],void 0!==i&&qe.call(e,t)?i:n()):i}function We(t,e,n){const i=e[t];return void 0===i?n():i}!function(t,e=!0,n=!1,i=!0,s=!0){if(function(t){return le in t}(t)){if(t[le]===Ft)return;if(t[le]instanceof WeakMap)return void(Ft=t[le]);throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const r=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`)}n&&ce(t,i,s)}else ce(t,i,s)}(Reflect,!1,!1);class Ke{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,En(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:n,key:i}=this;return this.container=this.key=void 0,n.registerResolver(i,new pn(i,t,e))}}function _e(t){const e=t.slice(),n=Object.keys(t),i=n.length;let s;for(let r=0;r<i;++r)s=n[r],me(s)||(e[s]=t[s]);return e}const Qe={none(t){throw Error(`AUR0002:${t.toString()}`)},singleton:t=>new pn(t,1,t),transient:t=>new pn(t,2,t)};class Ge{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){var e,n;return void 0===t||t===Ge.DEFAULT?Ge.DEFAULT:new Ge(null!==(e=t.inheritParentResources)&&void 0!==e&&e,null!==(n=t.defaultResolver)&&void 0!==n?n:Qe.singleton)}}Ge.DEFAULT=Ge.from({});const Xe={createContainer:t=>new Sn(null,Ge.from(t)),getDesignParamtypes:t=>he("design:paramtypes",t),getAnnotationParamtypes(t){const e=Ne("di:paramtypes");return he(e,t)},getOrCreateAnnotationParamTypes:Je,getDependencies:Ye,createInterface(t,e){const n=pe(t)?t:e,i=fe(t)?t:void 0,s=function(t,e,n){if(null==t||void 0!==new.target)throw new Error(`AUR0001:${s.friendlyName}`);Je(t)[n]=s};return s.$isInterface=!0,s.friendlyName=null==i?"(anonymous)":i,null!=n&&(s.register=function(t,e){return n(new Ke(t,null!=e?e:s))}),s.toString=function(){return`InterfaceSymbol<${s.friendlyName}>`},s},inject:(...t)=>function(e,n,i){if("number"==typeof i){const n=Je(e),s=t[0];void 0!==s&&(n[i]=s)}else if(n){const i=Je(e.constructor),s=t[0];void 0!==s&&(i[n]=s)}else if(i){const e=Je(i.value);let n;for(let i=0;i<t.length;++i)n=t[i],void 0!==n&&(e[i]=n)}else{const n=Je(e);let i;for(let e=0;e<t.length;++e)i=t[e],void 0!==i&&(n[e]=i)}},transient:t=>(t.register=function(e){return Tn.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=on)=>(t.register=function(e){return Tn.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)};function Ye(t){const e=Ne("di:dependencies");let n=he(e,t);if(void 0===n){const i=t.inject;if(void 0===i){const e=Xe.getDesignParamtypes(t),i=Xe.getAnnotationParamtypes(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);n=pe(e)&&e!==Function.prototype?_e(Ye(e)):[]}else n=_e(i);else if(void 0===i)n=_e(e);else{n=_e(e);let t,s=i.length,r=0;for(;r<s;++r)t=i[r],void 0!==t&&(n[r]=t);const o=Object.keys(i);let a;for(r=0,s=o.length,r=0;r<s;++r)a=o[r],me(a)||(n[a]=i[a])}}else n=_e(i);de(e,n,t),Be(t,e)}return n}function Je(t){const e=Ne("di:paramtypes");let n=he(e,t);return void 0===n&&(de(e,n=[],t),Be(t,e)),n}const tn=Xe.createInterface("IContainer"),en=tn;function nn(t){return function(e){const n=function(t,e,i){Xe.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return t(e,n,i)},n}}function sn(t){return Xe.transient(t)}function rn(t){return null==t?sn:sn(t)}Xe.inject;const on={scoped:!1},an=function(t,e){e=!!e;const n=function(t,e,i){Xe.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return((t,e,n,i)=>n.getAll(t,i))(t,0,i,e)},n},ln=(nn(((t,e,n)=>()=>n.get(t))),nn(((t,e,n)=>n.has(t,!0)?n.get(t):void 0)));function cn(t,e,n){Xe.inject(cn)(t,e,n)}function hn(t,e,n){return e.getFactory(t).construct(n)}var un,dn;cn.$isResolver=!0,cn.resolve=()=>{},nn(((t,e,n)=>(...i)=>e.getFactory(t).construct(n,i))),nn(((t,e,n)=>{const i=hn(t,e,n),s=new $n(String(t),i);return n.registerResolver(t,s,!0),i})),nn(((t,e,n)=>hn(t,e,n))),(dn=un||(un={}))[dn.instance=0]="instance",dn[dn.singleton=1]="singleton",dn[dn.transient=2]="transient",dn[dn.callback=3]="callback",dn[dn.array=4]="array",dn[dn.alias=5]="alias";class pn{constructor(t,e,n){this.key=t,this.strategy=e,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`AUR0003:${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const n=t.getFactory(this.state);if(null===n)throw new Error(`AUR0004:${String(this.key)}`);return n.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`AUR0005:${this.strategy}`)}}getFactory(t){var e,n,i;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(i=null===(n=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===n?void 0:n.call(e,t))&&void 0!==i?i:null;default:return null}}}function fn(t){return this.get(t)}function gn(t,e){return e(t)}class vn{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let n;return n=void 0===e?new this.Type(...this.dependencies.map(fn,t)):new this.Type(...this.dependencies.map(fn,t),...e),null==this.transformers?n:this.transformers.reduce(gn,n)}registerTransformer(t){var e;(null!==(e=this.transformers)&&void 0!==e?e:this.transformers=[]).push(t)}}const mn={$isResolver:!0,resolve:(t,e)=>e};function yn(t){return pe(t.register)}function bn(t){return function(t){return yn(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}function wn(t){return void 0!==t.prototype}const xn=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]);let kn=0;class Sn{constructor(t,e){this.parent=t,this.config=e,this.id=++kn,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=ge()):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign(ge(),t.res,this.root.res):this.res=ge()),this.u.set(tn,mn)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw new Error(`AUR0006:${t.map(String)}`);let e,n,i,s,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],Nt(e))if(yn(e))e.register(this);else if(ze.resource.has(e)){const t=ze.resource.getAll(e);if(1===t.length)t[0].register(this);else for(s=0,r=t.length;r>s;)t[s].register(this),++s}else if(wn(e))Tn.singleton(e,e).register(this);else for(n=Object.keys(e),s=0,r=n.length;s<r;++s)i=e[n[s]],Nt(i)&&(yn(i)?i.register(this):this.register(i));return--this.t,this}registerResolver(t,e,n=!1){In(t);const i=this.u,s=i.get(t);if(null==s){if(i.set(t,e),function(t){return fe(t)&&t.indexOf(":")>0}(t)){if(void 0!==this.res[t])throw new Error(`AUR0007:${t}`);this.res[t]=e}}else s instanceof pn&&4===s.strategy?s.state.push(e):i.set(t,new pn(t,4,[s,e]));return n&&this.i.set(t,e),e}registerTransformer(t,e){const n=this.getResolver(t);if(null==n)return!1;if(n.getFactory){const t=n.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(In(t),void 0!==t.resolve)return t;let n,i=this;for(;null!=i;){if(n=i.u.get(t),null!=n)return n;if(null==i.parent){const n=bn(t)?this:i;return e?this.R(t,n):null}i=i.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(In(t),t.$isResolver)return t.resolve(this,this);let e,n=this;for(;null!=n;){if(e=n.u.get(t),null!=e)return e.resolve(n,this);if(null==n.parent){const i=bn(t)?this:n;return e=this.R(t,i),e.resolve(n,this)}n=n.parent}throw new Error(`AUR0008:${String(t)}`)}getAll(t,e=!1){In(t);const n=this;let i,s=n;if(e){let e=Pn;for(;null!=s;)i=s.u.get(t),null!=i&&(e=e.concat(On(i,s,n))),s=s.parent;return e}for(;null!=s;){if(i=s.u.get(t),null!=i)return On(i,s,n);if(s=s.parent,null==s)return Pn}return Pn}invoke(t,e){if(Le(t))throw Rn(t);return void 0===e?new t(...Ye(t).map(fn,this)):new t(...Ye(t).map(fn,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(Le(t))throw Rn(t);this.h.set(t,e=new vn(t,Ye(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===Ge.DEFAULT?new Sn(this,this.config):new Sn(this,Ge.from({...this.config,inheritParentResources:!1})):new Sn(this,Ge.from(null!=t?t:this.config))}disposeResolvers(){const t=this.u,e=this.i;let n,i;for([i,n]of e.entries())n.dispose(),t.delete(i);e.clear()}find(t,e){const n=t.keyFrom(e);let i=this.res[n];if(void 0===i&&(i=this.root.res[n],void 0===i))return null;if(null===i)return null;if(pe(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const n=he(t.name,e.Type);return void 0===n?null:n}return null}create(t,e){var n,i;const s=t.keyFrom(e);let r=this.res[s];return void 0===r?(r=this.root.res[s],void 0===r?null:null!==(n=r.resolve(this.root,this))&&void 0!==n?n:null):null!==(i=r.resolve(this,this))&&void 0!==i?i:null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}R(t,e){if(!pe(t))throw new Error(`AUR0009:${t}`);if(xn.has(t.name))throw new Error(`AUR0010:${t.name}`);if(yn(t)){const n=t.register(e,t);if(!(n instanceof Object)||null==n.resolve){const n=e.u.get(t);if(null!=n)return n;throw new Error("AUR0011")}return n}if(ze.resource.has(t)){const n=ze.resource.getAll(t);if(1===n.length)n[0].register(e);else{const t=n.length;for(let i=0;i<t;++i)n[i].register(e)}const i=e.u.get(t);if(null!=i)return i;throw new Error("AUR0011")}if(t.$isInterface)throw new Error(`AUR0012:${t.friendlyName}`);{const n=this.config.defaultResolver(t,e);return e.u.set(t,n),n}}}class Cn{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const An=new WeakMap;function En(t){return function(e,n,i){let s=An.get(e);if(void 0===s&&An.set(e,s=new WeakMap),s.has(i))return s.get(i);const r=t(e,n,i);return s.set(i,r),r}}const Tn={instance:(t,e)=>new pn(t,0,e),singleton:(t,e)=>new pn(t,1,e),transient:(t,e)=>new pn(t,2,e),callback:(t,e)=>new pn(t,3,e),cachedCallback:(t,e)=>new pn(t,3,En(e)),aliasTo:(t,e)=>new pn(e,5,t),defer:(t,...e)=>new Cn(t,e)};class $n{constructor(t,e){this.C=null,this.$=t,void 0!==e&&(this.C=e)}get friendlyName(){return this.$}prepare(t){this.C=t}get $isResolver(){return!0}resolve(){if(null==this.C)throw new Error(`AUR0013:${this.$}`);return this.C}dispose(){this.C=null}}function In(t){if(null==t)throw new Error("AUR0014")}function On(t,e,n){if(t instanceof pn&&4===t.strategy){const i=t.state;let s=i.length;const r=new Array(s);for(;s--;)r[s]=i[s].resolve(e,n);return r}return[t.resolve(e,n)]}function Rn(t){return new Error(`AUR0015:${t.name}`)}const Pn=Object.freeze([]),Ln=Object.freeze({});function Mn(){}const jn=Xe.createInterface("IPlatform");function Un(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function Nn(t,e){return function(n,i){e(n,i,t)}}var Bn,Fn;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(Bn||(Bn={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Fn||(Fn={}));const Vn=Xe.createInterface("ILogConfig",(t=>t.instance(new Kn(0,3)))),Dn=Xe.createInterface("ISink"),zn=Xe.createInterface("ILogEventFactory",(t=>t.singleton(Xn))),qn=Xe.createInterface("ILogger",(t=>t.singleton(Jn))),Hn=Xe.createInterface("ILogScope"),Zn=Object.freeze({key:Ne("logger-sink-handles"),define(t,e){return de(this.key,e.handles,t.prototype),t},getHandles(t){return oe.get(this.key,t)}}),Wn=Pe({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class Kn{constructor(t,e){this.colorOptions=t,this.level=e}}const _n=function(){const t=[Pe({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),Pe({TRC:Wn.grey("TRC"),DBG:Wn.grey("DBG"),INF:Wn.white("INF"),WRN:Wn.yellow("WRN"),ERR:Wn.red("ERR"),FTL:Wn.red("FTL"),QQQ:Wn.grey("???")})];return function(e,n){return e<=0?t[n].TRC:e<=1?t[n].DBG:e<=2?t[n].INF:e<=3?t[n].WRN:e<=4?t[n].ERR:e<=5?t[n].FTL:t[n].QQQ}}();function Qn(t,e){return 0===e?new Date(t).toISOString():Wn.grey(new Date(t).toISOString())}class Gn{constructor(t,e,n,i,s,r){this.severity=t,this.message=e,this.optionalParams=n,this.scope=i,this.colorOptions=s,this.timestamp=r}toString(){const{severity:t,message:e,scope:n,colorOptions:i,timestamp:s}=this;return 0===n.length?`${Qn(s,i)} [${_n(t,i)}] ${e}`:`${Qn(s,i)} [${_n(t,i)} ${function(t,e){return 0===e?t.join("."):t.map(Wn.cyan).join(".")}(n,i)}] ${e}`}}let Xn=class{constructor(t){this.config=t}createLogEvent(t,e,n,i){return new Gn(e,n,i,t.scope,this.config.colorOptions,Date.now())}};Xn=Un([Nn(0,Vn)],Xn);let Yn=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const n=t.optionalParams;if(void 0===n||0===n.length){const n=t.toString();switch(t.severity){case 0:case 1:return e.debug(n);case 2:return e.info(n);case 3:return e.warn(n);case 4:case 5:return e.error(n)}}else{let i=t.toString(),s=0;for(;i.includes("%s");)i=i.replace("%s",String(n[s++]));switch(t.severity){case 0:case 1:return e.debug(i,...n.slice(s));case 2:return e.info(i,...n.slice(s));case 3:return e.warn(i,...n.slice(s));case 4:case 5:return e.error(i,...n.slice(s))}}}}static register(e){Tn.singleton(Dn,t).register(e)}};Yn=Un([Nn(0,jn)],Yn);let Jn=class t{constructor(t,e,n,i=[],s=null){var r,o,a,l,c,h;let u,d,p,f,g,v;if(this.config=t,this.factory=e,this.scope=i,this.scopedLoggers=ge(),null===s){this.root=this,this.parent=this,u=this.traceSinks=[],d=this.debugSinks=[],p=this.infoSinks=[],f=this.warnSinks=[],g=this.errorSinks=[],v=this.fatalSinks=[];for(const t of n){const e=Zn.getHandles(t);(null===(r=null==e?void 0:e.includes(0))||void 0===r||r)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&d.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&p.push(t),(null===(l=null==e?void 0:e.includes(3))||void 0===l||l)&&f.push(t),(null===(c=null==e?void 0:e.includes(4))||void 0===c||c)&&g.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&v.push(t)}}else this.root=s.root,this.parent=s,u=this.traceSinks=s.traceSinks,d=this.debugSinks=s.debugSinks,p=this.infoSinks=s.infoSinks,f=this.warnSinks=s.warnSinks,g=this.errorSinks=s.errorSinks,v=this.fatalSinks=s.fatalSinks}trace(t,...e){this.config.level<=0&&this.emit(this.traceSinks,0,t,e)}debug(t,...e){this.config.level<=1&&this.emit(this.debugSinks,1,t,e)}info(t,...e){this.config.level<=2&&this.emit(this.infoSinks,2,t,e)}warn(t,...e){this.config.level<=3&&this.emit(this.warnSinks,3,t,e)}error(t,...e){this.config.level<=4&&this.emit(this.errorSinks,4,t,e)}fatal(t,...e){this.config.level<=5&&this.emit(this.fatalSinks,5,t,e)}scopeTo(e){const n=this.scopedLoggers;let i=n[e];return void 0===i&&(i=n[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),i}emit(t,e,n,i){const s=pe(n)?n():n,r=this.factory.createLogEvent(this,e,s,i);for(let e=0,n=t.length;e<n;++e)t[e].handleEvent(r)}};function ti(t){return t}Un([$e],Jn.prototype,"trace",null),Un([$e],Jn.prototype,"debug",null),Un([$e],Jn.prototype,"info",null),Un([$e],Jn.prototype,"warn",null),Un([$e],Jn.prototype,"error",null),Un([$e],Jn.prototype,"fatal",null),Jn=Un([Nn(0,Vn),Nn(1,zn),Nn(2,an(Dn)),Nn(3,ln(Hn)),Nn(4,cn)],Jn),Pe({create:({level:t=3,colorOptions:e=0,sinks:n=[]}={})=>Pe({register(i){i.register(Tn.instance(Vn,new Kn(e,t)));for(const t of n)pe(t)?i.register(Tn.singleton(Dn,t)):i.register(t);return i}})}),Xe.createInterface((t=>t.singleton(ni)));class ei{constructor(t){this.$transform=t,this.A=new Map,this.j=new Map}transform(t){if(t instanceof Promise)return this.I(t);if("object"==typeof t&&null!==t)return this.O(t);throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`)}I(t){if(this.A.has(t))return this.A.get(t);const e=t.then((t=>this.O(t)));return this.A.set(t,e),e.then((e=>{this.A.set(t,e)})),e}O(t){if(this.j.has(t))return this.j.get(t);const e=this.$transform(this.M(t));return this.j.set(t,e),e instanceof Promise&&e.then((e=>{this.j.set(t,e)})),e}M(t){let e,n,i,s;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;n=pe(e.register),i=!1,s=Pn;break;case"function":n=pe(e.register),i=void 0!==e.prototype,s=ze.resource.getAll(e);break;default:continue}r.push(new si(o,e,n,i,s))}return new ii(t,r)}}class ni{constructor(){this.transformers=new Map}load(t,e=ti){const n=this.transformers;let i=n.get(e);return void 0===i&&n.set(e,i=new ei(e)),i.transform(t)}dispose(){this.transformers.clear()}}class ii{constructor(t,e){this.raw=t,this.items=e}}class si{constructor(t,e,n,i,s){this.key=t,this.value=e,this.isRegistry=n,this.isConstructable=i,this.definitions=s}}class ri{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}const oi=Xe.createInterface("IEventAggregator",(t=>t.singleton(ai)));class ai{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw new Error(`Invalid channel name or instance: ${t}.`);if(fe(t)){let n=this.eventLookup[t];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)n[i](e,t)}}else{const e=this.messageHandlers.slice();let n=e.length;for(;n-- >0;)e[n].handle(t)}}subscribe(t,e){if(!t)throw new Error(`Invalid channel name or type: ${t}.`);let n,i;return fe(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),n=e,i=this.eventLookup[t]):(n=new ri(t,e),i=this.messageHandlers),i.push(n),{dispose(){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const n=this.subscribe(t,(function(t,i){n.dispose(),e(t,i)}));return n}}const li=Object.prototype.hasOwnProperty,ci=Reflect.defineProperty,hi=t=>"function"==typeof t,ui=t=>"string"==typeof t;function di(t,e,n){return ci(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function pi(t,e,n,i=!1){!i&&li.call(t,e)||di(t,e,n)}const fi=()=>Object.create(null),gi=oe.getOwn,vi=oe.hasOwn,mi=oe.define,yi=ze.annotation.keyFor,bi=ze.resource.keyFor,wi=ze.resource.appendTo;function xi(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Tn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class ki{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)li.call(t,e)&&(this[e]=t[e])}static create(t,e){return new ki(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class Si{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new Si(null,t,null==e?Ci.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new Si(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new Si(t,e,Ci.create(e),!1)}}class Ci{constructor(t){this.bindingContext=t}static create(t){return new Ci(t)}}const Ai=Xe.createInterface("ISignaler",(t=>t.singleton(Ei)));class Ei{constructor(){this.signals=fi()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var Ti;function $i(t){return function(e){return Mi.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(Ti||(Ti={}));class Ii{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;ui(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===Ri;return new Ii(e,Oe(Li(e,"name"),n),Ie(Li(e,"aliases"),i.aliases,e.aliases),Mi.keyFrom(n),He("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Tn.singleton(n,e).register(t);break;case 2:Tn.instance(n,new Oi(t,e)).register(t)}Tn.aliasTo(n,e).register(t),xi(i,Mi,n,t)}}class Oi{constructor(t,e){this.ctn=t,this.Type=e,this.deps=Xe.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class Ri{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{ci(Ri.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const Pi=bi("binding-behavior"),Li=(t,e)=>gi(yi(e),t),Mi=Object.freeze({name:Pi,keyFrom:t=>`${Pi}:${t}`,isType:t=>hi(t)&&vi(Pi,t),define(t,e){const n=Ii.create(t,e);return mi(Pi,n,n.Type),mi(Pi,n,n),wi(e,Pi),n.Type},getDefinition(t){const e=gi(Pi,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){mi(yi(e),n,t)},getAnnotation:Li});function ji(t){return function(e){return Fi.define(t,e)}}class Ui{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return ui(t)?(n=t,i={name:n}):(n=t.name,i=t),new Ui(e,Oe(Bi(e,"name"),n),Ie(Bi(e,"aliases"),i.aliases,e.aliases),Fi.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Tn.singleton(n,e).register(t),Tn.aliasTo(n,e).register(t),xi(i,Fi,n,t)}}const Ni=bi("value-converter"),Bi=(t,e)=>gi(yi(e),t),Fi=Object.freeze({name:Ni,keyFrom:t=>`${Ni}:${t}`,isType:t=>hi(t)&&vi(Ni,t),define(t,e){const n=Ui.create(t,e);return mi(Ni,n,n.Type),mi(Ni,n,n),wi(e,Ni),n.Type},getDefinition(t){const e=gi(Ni,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){mi(yi(e),n,t)},getAnnotation:Bi});var Vi;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(Vi||(Vi={}));class Di{constructor(){this.text=""}static unparse(t){const e=new Di;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",ui(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class zi{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class qi{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=Mi.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof Oi)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(hi(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return Di.unparse(this)}}class Hi{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=Fi.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(Ai);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(Ai);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return Di.unparse(this)}}class Zi{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return Di.unparse(this)}}class Wi{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return Di.unparse(this)}}class Ki{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return Di.unparse(this)}}Ki.$this=new Ki(0),Ki.$parent=new Ki(1);class _i{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=ki.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=ki.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return Di.unparse(this)}}class Qi{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return Di.unparse(this)}}class Gi{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return Di.unparse(this)}}class Xi{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=ki.get(e,this.name,this.ancestor,t),o=gs(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return Di.unparse(this)}}class Yi{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=gs(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return Di.unparse(this)}}class Ji{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(hi(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return Di.unparse(this)}}class ts{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!hi(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(ye(s)||ye(r))return(s||0)+(r||0);if(be(s)||be(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return Di.unparse(this)}}class es{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return Di.unparse(this)}}class ns{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return Di.unparse(this)}}ns.$undefined=new ns(void 0),ns.$null=new ns(null),ns.$true=new ns(!0),ns.$false=new ns(!1),ns.$empty=new ns("");class is{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return Di.unparse(this)}}is.$empty=new is(Pn);class ss{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return Di.unparse(this)}}ss.$empty=new ss(Pn,Pn);class rs{constructor(t,e=Pn){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return Di.unparse(this)}}rs.$empty=new rs([""]);class os{constructor(t,e,n,i=Pn){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!hi(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return Di.unparse(this)}}class as{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return Di.unparse(this)}}class ls{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return Di.unparse(this)}}class cs{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return Di.unparse(this)}}const hs=Object.prototype.toString;class us{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(hs.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${hs.call(e)}`)}}iterate(t,e,n){switch(hs.call(e)){case"[object Array]":return vs(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;vs(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;vs(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;vs(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${hs.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return Di.unparse(this)}}class ds{constructor(t,e=Pn){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return Di.unparse(this)}}class ps{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,Si.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return Di.unparse(this)}}class fs{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,Si.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return Di.unparse(this)}}function gs(t,e,n){const i=null==e?null:e[n];if(hi(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function vs(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}const ms=Xe.createInterface("ICoercionConfiguration");var ys,bs,ws,xs,ks,Ss;function Cs(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function As(t){return null==t?Es:Es(t)}function Es(t){const e=t.prototype;ci(e,"subs",{get:$s}),pi(e,"subscribe",Is),pi(e,"unsubscribe",Os)}!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(ys||(ys={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(bs||(bs={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(ws||(ws={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(xs||(xs={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(ks||(ks={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(Ss||(Ss={}));class Ts{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function $s(){return di(this,"subs",new Ts)}function Is(t){return this.subs.add(t)}function Os(t){return this.subs.remove(t)}function Rs(t){return null==t?Ps:Ps(t)}function Ps(t){const e=t.prototype;ci(e,"queue",{get:Ms})}class Ls{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(js)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function Ms(){return Ls.instance}function js(t,e,n){n.delete(t),t.flush()}Ls.instance=new Ls;class Us{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&me(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){Ds=this.h,this.h=this.v,this.subs.notify(this.v,Ds,this.f)}}class Ns{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){Ds=this.h,this.h=this.v,this.subs.notify(this.v,Ds,this.f)}}function Bs(t){const e=t.prototype;pi(e,"subscribe",Fs,!0),pi(e,"unsubscribe",Vs,!0),Rs(t),As(t)}function Fs(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function Vs(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let Ds;Bs(Us),Bs(Ns);const zs=new WeakMap;function qs(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Hs(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function Zs(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function Ws(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,y,b,w,x,k,S,C=0,A=0;for(;;){if(i-n<=10)return void Zs(t,e,n,i,s);C=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[C],h=e[C],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,y=n+1,b=i-1,t[C]=t[y],e[C]=e[y],t[y]=v,e[y]=m;t:for(A=y+1;A<b;A++)if(w=t[A],x=e[A],k=s(w,v),k<0)t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,y++;else if(k>0){do{if(b--,b==A)break t;S=t[b],k=s(S,v)}while(k>0);t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,k<0&&(w=t[A],x=e[A],t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,y++)}i-b<y-n?(Ws(t,e,b,i,s),i=y):(Ws(t,e,n,y,s),n=b)}}const Ks=Array.prototype,_s=Ks.push,Qs=Ks.unshift,Gs=Ks.pop,Xs=Ks.shift,Ys=Ks.splice,Js=Ks.reverse,tr=Ks.sort,er=["push","unshift","pop","shift","splice","reverse","sort"],nr={push:function(...t){const e=zs.get(this);if(void 0===e)return _s.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=zs.get(this);if(void 0===e)return Qs.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;Qs.apply(e.indexMap,i);const r=Qs.apply(this,t);return e.notify(),r},pop:function(){const t=zs.get(this);if(void 0===t)return Gs.call(this);const e=t.indexMap,n=Gs.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),Gs.call(e),t.notify(),n},shift:function(){const t=zs.get(this);if(void 0===t)return Xs.call(this);const e=t.indexMap,n=Xs.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),Xs.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=zs.get(this);if(void 0===i)return Ys.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;Ys.call(a,e,n,...i)}else Ys.apply(a,t);const h=Ys.apply(this,t);return i.notify(),h},reverse:function(){const t=zs.get(this);if(void 0===t)return Js.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=zs.get(this);if(void 0===e)return tr.call(this,t),this;const n=this.length;if(n<2)return this;Ws(this,e.indexMap,0,n,Hs);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&hi(t)||(t=qs),Ws(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of er)ci(nr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ir=!1;class sr{constructor(t){this.type=18,ir||(ir=!0,function(){for(const t of er)!0!==Ks[t].observing&&di(Ks,t,nr[t])}()),this.indexObservers={},this.collection=t,this.indexMap=Cs(t.length),this.lenObs=void 0,zs.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=Cs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Us(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new rr(this,t)}}class rr{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function or(t){let e=zs.get(t);return void 0===e&&(e=new sr(t)),e}As(sr),As(rr);const ar=new WeakMap,lr=Set.prototype,cr=lr.add,hr=lr.clear,ur=lr.delete,dr=["add","clear","delete"],pr={add:function(t){const e=ar.get(this);if(void 0===e)return cr.call(this,t),this;const n=this.size;return cr.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=ar.get(this);if(void 0===t)return hr.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;hr.call(this),e.length=0,t.notify()}},delete:function(t){const e=ar.get(this);if(void 0===e)return ur.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=ur.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},fr={writable:!0,enumerable:!1,configurable:!0};for(const t of dr)ci(pr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let gr=!1;class vr{constructor(t){this.type=34,gr||(gr=!0,function(){for(const t of dr)!0!==lr[t].observing&&ci(lr,t,{...fr,value:pr[t]})}()),this.collection=t,this.indexMap=Cs(t.size),this.lenObs=void 0,ar.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Cs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Ns(this)}}function mr(t){let e=ar.get(t);return void 0===e&&(e=new vr(t)),e}As(vr);const yr=new WeakMap,br=Map.prototype,wr=br.set,xr=br.clear,kr=br.delete,Sr=["set","clear","delete"],Cr={set:function(t,e){const n=yr.get(this);if(void 0===n)return wr.call(this,t,e),this;const i=this.get(t),s=this.size;if(wr.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=yr.get(this);if(void 0===t)return xr.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;xr.call(this),e.length=0,t.notify()}},delete:function(t){const e=yr.get(this);if(void 0===e)return kr.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=kr.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},Ar={writable:!0,enumerable:!1,configurable:!0};for(const t of Sr)ci(Cr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Er=!1;class Tr{constructor(t){this.type=66,Er||(Er=!0,function(){for(const t of Sr)!0!==br[t].observing&&ci(br,t,{...Ar,value:Cr[t]})}()),this.collection=t,this.indexMap=Cs(t.size),this.lenObs=void 0,yr.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Cs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Ns(this)}}function $r(t){let e=yr.get(t);return void 0===e&&(e=new Tr(t)),e}function Ir(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function Or(){return di(this,"obs",new jr(this))}function Rr(t){let e;if(t instanceof Array)e=or(t);else if(t instanceof Set)e=mr(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=$r(t)}this.obs.add(e)}function Pr(t){this.obs.add(t)}function Lr(){throw new Error("AUR2011:handleChange")}function Mr(){throw new Error("AUR2012:handleCollectionChange")}As(Tr);class jr{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(Nr,this),this.count=this.o.size}clearAll(){this.o.forEach(Ur,this),this.o.clear(),this.count=0}}function Ur(t,e){e.unsubscribe(this)}function Nr(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function Br(t){const e=t.prototype;return pi(e,"observe",Ir,!0),pi(e,"observeCollection",Rr,!0),pi(e,"subscribeTo",Pr,!0),ci(e,"obs",{get:Or}),pi(e,"handleChange",Lr),pi(e,"handleCollectionChange",Mr),t}function Fr(t){return null==t?Br:Br(t)}Br(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}});const Vr=Xe.createInterface("IExpressionParser",(t=>t.singleton(Dr)));class Dr{constructor(){this.u=fi(),this.A=fi(),this.U=fi()}parse(t,e){let n;switch(e){case 16:return new zi(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return ns.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return to.ip=t,to.length=t.length,to.index=0,to.O=t.charCodeAt(0),eo(to,0,61,void 0===e?8:e)}}var zr,qr,Hr,Zr;function Wr(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(zr||(zr={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(qr||(qr={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(Hr||(Hr={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(Zr||(Zr={}));const Kr=ns.$false,_r=ns.$true,Qr=ns.$null,Gr=ns.$undefined,Xr=Ki.$this,Yr=Ki.$parent;var Jr;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(Jr||(Jr={}));const to=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function eo(t,e,n,i){if(16===i)return new zi(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),io(t);const i=eo(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(Wr(so(t)));break;default:s+=String.fromCharCode(t.O)}so(t)}return n.length?(e.push(s),new ds(e,n)):null}(t);if(io(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=ho[63&t.$];io(t),s=new es(n,eo(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(io(t),e++,!lo(t,16393)){if(524288&t.$){const t=511&e;s=0===t?Xr:1===t?Yr:new Ki(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new cs(t.L):(s=new _i(t.L,511&e),e=1024),t.R=!0,io(t);break;case 3076:t.R=!1,io(t),s=Xr,e=512;break;case 671751:io(t),s=eo(t,0,62,i),co(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new ps(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(io(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return co(t,1835022),n;function o(){""!==i?(e.push(new fs(new Qi(Xr,i),new Gi(Xr,new ns(r++)),void 0)),i=""):r++}}(t):function(t,e,n){io(t);const i=new Array;for(;1835022!==t.$;)if(lo(t,1572876)){if(i.push(Gr),1835022===t.$)break}else{if(i.push(eo(t,e,62,-3&n)),!lo(t,1572876))break;if(1835022===t.$)break}return co(t,1835022),2&n?new as(i):(t.R=!1,new is(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(io(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)io(t),co(t,1572879),i.push(eo(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;io(t),lo(t,1572879)?i.push(eo(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(eo(t,0,450,-3&e)))}}1835018!==t.$&&co(t,1572876)}return co(t,1835018),2&e?new ls(n,i):(t.R=!1,new ss(n,i))}(t,i),e=0;break;case 540714:s=new rs([t.L]),t.R=!1,io(t),e=0;break;case 540715:s=no(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new ns(t.L),t.R=!1,io(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=ho[63&t.$],t.R=!1,io(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);io(t);const n=e,i=eo(t,0,61,0);return new us(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,io(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,io(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new _i(r,s.ancestor):new Qi(s,r);continue;case 671757:t.R=!0,io(t),e=4096,s=new Gi(s,eo(t,0,62,i)),co(t,1835022);break;case 671751:for(t.R=!1,io(t);1835019!==t.$&&(n.push(eo(t,0,62,i)),lo(t,1572876)););co(t,1835019),s=1024&e?new Xi(r,n,s.ancestor):2048&e?new Yi(s,r,n):new Ji(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new os(o,o,s),io(t);break;case 540715:s=no(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;io(t),s=new ts(ho[63&r],s,eo(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(lo(t,1572880)){const n=eo(t,e,62,i);co(t,1572879),s=new Wi(s,n,eo(t,e,62,i)),t.R=!1}if(62<n)return s;if(lo(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new Zi(s,eo(t,e,62,i))}if(61<n)return s;for(;lo(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;io(t);const r=new Array;for(;lo(t,1572879);)r.push(eo(t,e,62,i));s=new Hi(s,n,r)}for(;lo(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;io(t);const r=new Array;for(;lo(t,1572879);)r.push(eo(t,e,62,i));s=new qi(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function no(t,e,n,i,s){const r=[t.L];co(t,540715);const o=[eo(t,e,62,n)];for(;540714!==(t.$=ao(t));)r.push(t.L),co(t,540715),o.push(eo(t,e,62,n));return r.push(t.L),t.R=!1,s?(io(t),new os(r,r,i,o)):(io(t),new rs(r,o))}function io(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=bo[t.O](t)))return;t.$=1572864}function so(t){return t.O=t.ip.charCodeAt(++t.index)}function ro(t,e){let n=t.O;if(!1===e){do{n=so(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=so(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=so(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function oo(t){let e=!0,n="";for(;96!==so(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(Wr(so(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return so(t),t.L=n,e?540714:540715}function ao(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,oo(t)}function lo(t,e){return t.$===e&&(io(t),!0)}function co(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);io(t)}const ho=[Kr,_r,Qr,Gr,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],uo=fi();uo.true=2049,uo.null=2050,uo.false=2048,uo.undefined=2051,uo.$this=3076,uo.$parent=3078,uo.in=1640799,uo.instanceof=1640800,uo.typeof=34851,uo.void=34852,uo.of=1051180;const po=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],fo=[48,58];function go(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function vo(t){return e=>(so(e),t)}const mo=t=>{throw new Error(`AUR0168:${t.ip}`)};mo.notMapped=!0,go(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const yo=new Uint8Array(65535);go(yo,null,po,1),go(yo,null,fo,1);const bo=new Array(65535);bo.fill(mo,0,65535),go(bo,null,[0,33,127,161],(t=>(so(t),null))),go(bo,null,po,(function(t){for(;yo[so(t)];);const e=uo[t.L=t.P];return void 0===e?1024:e})),go(bo,null,fo,(t=>ro(t,!1))),bo[34]=bo[39]=t=>function(t){const e=t.O;so(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),so(t),n=Wr(t.O),so(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);so(t)}const r=t.ip.slice(s,t.index);so(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),bo[96]=t=>oo(t),bo[33]=t=>61!==so(t)?32809:61!==so(t)?1638680:(so(t),1638682),bo[61]=t=>61!==so(t)?1048616:61!==so(t)?1638679:(so(t),1638681),bo[38]=t=>38!==so(t)?1572883:(so(t),1638614),bo[124]=t=>124!==so(t)?1572884:(so(t),1638549),bo[46]=t=>so(t)<=57&&t.O>=48?ro(t,!0):16393,bo[60]=t=>61!==so(t)?1638747:(so(t),1638749),bo[62]=t=>61!==so(t)?1638748:(so(t),1638750),bo[37]=vo(1638886),bo[40]=vo(671751),bo[41]=vo(1835019),bo[42]=vo(1638885),bo[43]=vo(623009),bo[44]=vo(1572876),bo[45]=vo(623010),bo[47]=vo(1638887),bo[58]=vo(1572879),bo[63]=vo(1572880),bo[91]=vo(671757),bo[93]=vo(1835022),bo[123]=vo(131080),bo[125]=vo(1835018);let wo=null;const xo=[];let ko=!1;function So(){return wo}function Co(t){if(null==t)throw new Error("AUR0206");if(null==wo)return wo=t,xo[0]=wo,void(ko=!0);if(wo===t)throw new Error("AUR0207");xo.push(t),wo=t,ko=!0}function Ao(t){if(null==t)throw new Error("AUR0208");if(wo!==t)throw new Error("AUR0209");xo.pop(),wo=xo.length>0?xo[xo.length-1]:null,ko=null!=wo}const Eo=Object.freeze({get current(){return wo},get connecting(){return ko},enter:Co,exit:Ao,pause:function(){ko=!1},resume:function(){ko=!0}}),To=Reflect.get,$o=Object.prototype.toString,Io=new WeakMap;function Oo(t){switch($o.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Ro="__raw__";function Po(t){return Oo(t)?Lo(t):t}function Lo(t){var e;return null!==(e=Io.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?Bo:t instanceof Map||t instanceof Set?aa:No,n=new Proxy(t,e);return Io.set(t,n),n}(t)}function Mo(t){var e;return null!==(e=t[Ro])&&void 0!==e?e:t}function jo(t){return Oo(t)&&t[Ro]||t}function Uo(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const No={get(t,e,n){if(e===Ro)return t;const i=So();return!ko||Uo(e)||null==i?To(t,e,n):(i.observe(t,e),Po(To(t,e,n)))}},Bo={get(t,e,n){if(e===Ro)return t;const i=So();if(!ko||Uo(e)||null==i)return To(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return Fo;case"includes":return zo;case"indexOf":return qo;case"lastIndexOf":return Ho;case"every":return Vo;case"filter":return Do;case"find":return Wo;case"findIndex":return Zo;case"flat":return Ko;case"flatMap":return _o;case"join":return Qo;case"push":return Xo;case"pop":return Go;case"reduce":return ra;case"reduceRight":return oa;case"reverse":return ea;case"shift":return Yo;case"unshift":return Jo;case"slice":return sa;case"splice":return ta;case"some":return na;case"sort":return ia;case"keys":return ga;case"values":case Symbol.iterator:return va;case"entries":return ma}return i.observe(t,e),Po(To(t,e,n))},ownKeys(t){var e;return null===(e=So())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function Fo(t,e){var n;const i=Mo(this),s=i.map(((n,i)=>jo(t.call(e,Po(n),i,this))));return null===(n=So())||void 0===n||n.observeCollection(i),Po(s)}function Vo(t,e){var n;const i=Mo(this),s=i.every(((n,i)=>t.call(e,Po(n),i,this)));return null===(n=So())||void 0===n||n.observeCollection(i),s}function Do(t,e){var n;const i=Mo(this),s=i.filter(((n,i)=>jo(t.call(e,Po(n),i,this))));return null===(n=So())||void 0===n||n.observeCollection(i),Po(s)}function zo(t){var e;const n=Mo(this),i=n.includes(jo(t));return null===(e=So())||void 0===e||e.observeCollection(n),i}function qo(t){var e;const n=Mo(this),i=n.indexOf(jo(t));return null===(e=So())||void 0===e||e.observeCollection(n),i}function Ho(t){var e;const n=Mo(this),i=n.lastIndexOf(jo(t));return null===(e=So())||void 0===e||e.observeCollection(n),i}function Zo(t,e){var n;const i=Mo(this),s=i.findIndex(((n,i)=>jo(t.call(e,Po(n),i,this))));return null===(n=So())||void 0===n||n.observeCollection(i),s}function Wo(t,e){var n;const i=Mo(this),s=i.find(((e,n)=>t(Po(e),n,this)),e);return null===(n=So())||void 0===n||n.observeCollection(i),Po(s)}function Ko(){var t;const e=Mo(this);return null===(t=So())||void 0===t||t.observeCollection(e),Po(e.flat())}function _o(t,e){var n;const i=Mo(this);return null===(n=So())||void 0===n||n.observeCollection(i),Lo(i.flatMap(((n,i)=>Po(t.call(e,Po(n),i,this)))))}function Qo(t){var e;const n=Mo(this);return null===(e=So())||void 0===e||e.observeCollection(n),n.join(t)}function Go(){return Po(Mo(this).pop())}function Xo(...t){return Mo(this).push(...t)}function Yo(){return Po(Mo(this).shift())}function Jo(...t){return Mo(this).unshift(...t)}function ta(...t){return Po(Mo(this).splice(...t))}function ea(...t){var e;const n=Mo(this),i=n.reverse();return null===(e=So())||void 0===e||e.observeCollection(n),Po(i)}function na(t,e){var n;const i=Mo(this),s=i.some(((n,i)=>jo(t.call(e,Po(n),i,this))));return null===(n=So())||void 0===n||n.observeCollection(i),s}function ia(t){var e;const n=Mo(this),i=n.sort(t);return null===(e=So())||void 0===e||e.observeCollection(n),Po(i)}function sa(t,e){var n;const i=Mo(this);return null===(n=So())||void 0===n||n.observeCollection(i),Lo(i.slice(t,e))}function ra(t,e){var n;const i=Mo(this),s=i.reduce(((e,n,i)=>t(e,Po(n),i,this)),e);return null===(n=So())||void 0===n||n.observeCollection(i),Po(s)}function oa(t,e){var n;const i=Mo(this),s=i.reduceRight(((e,n,i)=>t(e,Po(n),i,this)),e);return null===(n=So())||void 0===n||n.observeCollection(i),Po(s)}const aa={get(t,e,n){if(e===Ro)return t;const i=So();if(!ko||Uo(e)||null==i)return To(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return pa;case"delete":return fa;case"forEach":return la;case"add":if(t instanceof Set)return da;break;case"get":if(t instanceof Map)return ha;break;case"set":if(t instanceof Map)return ua;break;case"has":return ca;case"keys":return ga;case"values":return va;case"entries":return ma;case Symbol.iterator:return t instanceof Map?ma:va}return Po(To(t,e,n))}};function la(t,e){var n;const i=Mo(this);return null===(n=So())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,Po(n),Po(i),this)}))}function ca(t){var e;const n=Mo(this);return null===(e=So())||void 0===e||e.observeCollection(n),n.has(jo(t))}function ha(t){var e;const n=Mo(this);return null===(e=So())||void 0===e||e.observeCollection(n),Po(n.get(jo(t)))}function ua(t,e){return Po(Mo(this).set(jo(t),jo(e)))}function da(t){return Po(Mo(this).add(jo(t)))}function pa(){return Po(Mo(this).clear())}function fa(t){return Po(Mo(this).delete(jo(t)))}function ga(){var t;const e=Mo(this);null===(t=So())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Po(e),done:i}},[Symbol.iterator](){return this}}}function va(){var t;const e=Mo(this);null===(t=So())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Po(e),done:i}},[Symbol.iterator](){return this}}}function ma(){var t;const e=Mo(this);null===(t=So())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[Po(e[0]),Po(e[1])],done:i}},[Symbol.iterator](){return this}}}const ya=Object.freeze({getProxy:Lo,getRaw:Mo,wrap:Po,unwrap:jo,rawKey:Ro});class ba{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new ba(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,ci(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!hi(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){wa=this.ov,this.ov=this.v,this.subs.notify(this.v,wa,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return Co(this),this.v=jo(this.get.call(this.up?Po(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,Ao(this)}}}let wa;Fr(ba),As(ba),Rs(ba);const xa=Xe.createInterface("IDirtyChecker",(t=>t.singleton(Ca))),ka={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},Sa={persistent:!0};class Ca{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(ka.disabled)return;if(++this.j<ka.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(ka.throw)throw new Error(`AUR0222:${e}`);return new Aa(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,Sa))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}Ca.inject=[jn],Rs(Ca);class Aa{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}As(Aa);class Ea{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Ta{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}}let $a;class Ia{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){$a=this.ov,this.ov=this.v,this.subs.notify(this.v,$a,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],ci(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(ci(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class Oa{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=hi(n);const s=t[e];this.cb=hi(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){$a=this.ov,this.ov=this.v,this.subs.notify(this.v,$a,this.f)}}As(Ia),As(Oa),Rs(Ia),Rs(Oa);const Ra=new Ta,Pa=Xe.createInterface("IObserverLocator",(t=>t.singleton(ja))),La=Xe.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(qn).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new Ma)))));class Ma{handles(){return!1}getObserver(){return Ra}getAccessor(){return Ra}}class ja{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):Ra}getArrayObserver(t){return or(t)}getMapObserver(t){return $r(t)}getSetObserver(t){return mr(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new Ea(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return or(t).getLengthObserver();break;case"size":if(t instanceof Map)return $r(t).getLengthObserver();if(t instanceof Set)return mr(t).getLengthObserver();break;default:if(t instanceof Array&&me(e))return or(t).getIndexObserver(Number(e))}let o=Na(t,e);if(void 0===o){let n=Ua(t);for(;null!==n&&(o=Na(n,e),void 0===o);)n=Ua(n)}if(void 0!==o&&!li.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?ba.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new Ia(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(ci(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}ja.inject=[xa,La];const Ua=Object.getPrototypeOf,Na=Object.getOwnPropertyDescriptor;Xe.createInterface("IObservation",(t=>t.singleton(Ba)));class Ba{constructor(t){this.oL=t}static get inject(){return[Pa]}run(t){const e=new Fa(this.oL,t);return e.run(),e}}class Fa{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Co(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,Ao(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}Fr(Fa);const Va=new Map;function Da(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}class za{constructor(t,e={}){var n,i,s,r,o,a,l,c,h,u,d,p,f;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,this.decodeURI="decodeURI"in e?e.decodeURI:t.decodeURI,this.decodeURIComponent="decodeURIComponent"in e?e.decodeURIComponent:t.decodeURIComponent,this.encodeURI="encodeURI"in e?e.encodeURI:t.encodeURI,this.encodeURIComponent="encodeURIComponent"in e?e.encodeURIComponent:t.encodeURIComponent,this.Date="Date"in e?e.Date:t.Date,this.Reflect="Reflect"in e?e.Reflect:t.Reflect,this.clearInterval="clearInterval"in e?e.clearInterval:null!==(i=null===(n=t.clearInterval)||void 0===n?void 0:n.bind(t))&&void 0!==i?i:Da("clearInterval"),this.clearTimeout="clearTimeout"in e?e.clearTimeout:null!==(r=null===(s=t.clearTimeout)||void 0===s?void 0:s.bind(t))&&void 0!==r?r:Da("clearTimeout"),this.queueMicrotask="queueMicrotask"in e?e.queueMicrotask:null!==(a=null===(o=t.queueMicrotask)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:Da("queueMicrotask"),this.setInterval="setInterval"in e?e.setInterval:null!==(c=null===(l=t.setInterval)||void 0===l?void 0:l.bind(t))&&void 0!==c?c:Da("setInterval"),this.setTimeout="setTimeout"in e?e.setTimeout:null!==(u=null===(h=t.setTimeout)||void 0===h?void 0:h.bind(t))&&void 0!==u?u:Da("setTimeout"),this.console="console"in e?e.console:t.console,this.performanceNow="performanceNow"in e?e.performanceNow:null!==(f=null===(p=null===(d=t.performance)||void 0===d?void 0:d.now)||void 0===p?void 0:p.bind(t.performance))&&void 0!==f?f:Da("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new Ha(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let n=Va.get(t);return void 0===n&&Va.set(t,n=new za(t,e)),n}static set(t,e){Va.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}function qa(t){return t.persistent}class Ha{constructor(t,e,n){this.platform=t,this.$request=e,this.$cancel=n,this.t=void 0,this.i=0,this.processing=[],this.pending=[],this.delayed=[],this.flushRequested=!1,this.h=void 0,this.taskPool=[],this.u=0,this.T=0,this.$=0,this.I=()=>{this.flushRequested||(this.flushRequested=!0,this.T=this.platform.performanceNow(),this.$request())},this.M=new Ga(t.console)}get isEmpty(){return 0===this.i&&0===this.processing.length&&0===this.pending.length&&0===this.delayed.length}get P(){return 0===this.i&&this.processing.every(qa)&&this.pending.every(qa)&&this.delayed.every(qa)}flush(t=this.platform.performanceNow()){if(this.flushRequested=!1,this.$=t,void 0===this.t){if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}let e;for(;this.processing.length>0;)if((e=this.processing.shift()).run(),1===e.status){if(!0===e.suspend)return this.t=e,void this.I();++this.i}if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}if((this.processing.length>0||this.delayed.length>0||this.i>0)&&this.I(),void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}}else this.I()}cancel(){this.flushRequested&&(this.$cancel(),this.flushRequested=!1)}async yield(){this.isEmpty||(void 0===this.h&&(this.h=el()),await this.h)}queueTask(t,e){const{delay:n,preempt:i,persistent:s,reusable:r,suspend:o}={...Xa,...e};if(i){if(n>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(s)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}0===this.processing.length&&this.I();const a=this.platform.performanceNow();let l;if(r){const e=this.taskPool,c=this.u-1;c>=0?(l=e[c],e[c]=void 0,this.u=c,l.reuse(a,n,i,s,o,t)):l=new Qa(this.M,this,a,a+n,i,s,o,r,t)}else l=new Qa(this.M,this,a,a+n,i,s,o,r,t);return i?this.processing[this.processing.length]=l:0===n?this.pending[this.pending.length]=l:this.delayed[this.delayed.length]=l,l}remove(t){let e=this.processing.indexOf(t);if(e>-1)this.processing.splice(e,1);else if(e=this.pending.indexOf(t),e>-1)this.pending.splice(e,1);else{if(e=this.delayed.indexOf(t),!(e>-1))throw new Error(`Task #${t.id} could not be found`);this.delayed.splice(e,1)}}returnToPool(t){this.taskPool[this.u++]=t}resetPersistentTask(t){t.reset(this.platform.performanceNow()),t.createdTime===t.queueTime?this.pending[this.pending.length]=t:this.delayed[this.delayed.length]=t}completeAsyncTask(t){var e;if(!0===t.suspend){if(this.t!==t)throw new Error(`Async task completion mismatch: suspenderTask=${null===(e=this.t)||void 0===e?void 0:e.id}, task=${t.id}`);this.t=void 0}else--this.i;if(void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class Za extends Error{constructor(t){super("Task was canceled."),this.task=t}}let Wa=0;var Ka,_a;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(Ka||(Ka={}));class Qa{constructor(t,e,n,i,s,r,o,a,l){this.taskQueue=e,this.createdTime=n,this.queueTime=i,this.preempt=s,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=l,this.id=++Wa,this.R=void 0,this.A=void 0,this.q=void 0,this.C=0,this.M=t}get result(){const t=this.q;if(void 0===t)switch(this.C){case 0:{const t=this.q=el();return this.R=t.resolve,this.A=t.reject,t}case 1:throw new Error("Trying to await task from within task will cause a deadlock.");case 2:return this.q=Promise.resolve();case 3:return this.q=Promise.reject(new Za(this))}return t}get status(){return this.C}run(t=this.taskQueue.platform.performanceNow()){if(0!==this.C)throw new Error(`Cannot run task in ${this.C} state`);const{persistent:e,reusable:n,taskQueue:i,callback:s,R:r,A:o,createdTime:a}=this;let l;this.C=1;try{l=s(t-a),l instanceof Promise?l.then((t=>{this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),i.completeAsyncTask(this),void 0!==r&&r(t),!this.persistent&&n&&i.returnToPool(this)})).catch((t=>{if(this.persistent||this.dispose(),i.completeAsyncTask(this),void 0===o)throw t;o(t)})):(this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),void 0!==r&&r(l),!this.persistent&&n&&i.returnToPool(this))}catch(t){if(this.persistent||this.dispose(),void 0===o)throw t;o(t)}}cancel(){if(0===this.C){const t=this.taskQueue,e=this.reusable,n=this.A;return t.remove(this),t.isEmpty&&t.cancel(),this.C=3,this.dispose(),e&&t.returnToPool(this),void 0!==n&&n(new Za(this)),!0}return!(1!==this.C||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.C=0,this.R=void 0,this.A=void 0,this.q=void 0}reuse(t,e,n,i,s,r){this.createdTime=t,this.queueTime=t+e,this.preempt=n,this.persistent=i,this.suspend=s,this.callback=r,this.C=0}dispose(){this.callback=void 0,this.R=void 0,this.A=void 0,this.q=void 0}}class Ga{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,n){if(e instanceof Ha){const i=`processing=${e.processing.length} pending=${e.pending.length} delayed=${e.delayed.length} flushReq=${e.flushRequested} susTask=${!!e.t}`;this.console.log(`${t}[Q.${n}] ${i}`)}else{const i=e.id,s=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,l=e.persistent,c=e.suspend,h=function(t){switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}}(e.C),u=`id=${i} created=${s} queue=${r} preempt=${o} persistent=${l} reusable=${a} status=${h} suspend=${c}`;this.console.log(`${t}[T.${n}] ${u}`)}}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(_a||(_a={}));const Xa={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let Ya,Ja;function tl(t,e){Ya=t,Ja=e}function el(){const t=new Promise(tl);return t.resolve=Ya,t.reject=Ja,t}const nl=new Map;class il extends za{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver,window,document,location,history,navigator,customElements".split(",").forEach((n=>{this[n]=n in e?e[n]:t[n]})),"fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((n=>{var i,s;this[n]=n in e?e[n]:null!==(s=null===(i=t[n])||void 0===i?void 0:i.bind(t))&&void 0!==s?s:function(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}(n)})),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new Ha(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new Ha(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let n=nl.get(t);return void 0===n&&nl.set(t,n=new il(t,e)),n}static set(t,e){nl.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}function sl(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function rl(t,e){return function(n,i){e(n,i,t)}}const ol=oe.getOwn,al=oe.hasOwn,ll=oe.define,{annotation:cl,resource:hl}=ze,ul=cl.keyFor,dl=hl.keyFor,pl=hl.appendTo,fl=cl.appendTo,gl=cl.getKeys,vl=()=>Object.create(null),ml=Object.prototype.hasOwnProperty,yl=vl(),bl=(t,e,n)=>{if(!0===yl[e])return!0;if(!kl(e))return!1;const i=e.slice(0,5);return yl[e]="aria-"===i||"data-"===i||n.isStandardSvgAttribute(t,e)},wl=t=>t instanceof Promise,xl=t=>"function"==typeof t,kl=t=>"string"==typeof t,Sl=Object.defineProperty,Cl=t=>{throw t};function Al(t,e){let n;function i(t,e){arguments.length>1&&(n.property=e),ll(Tl,Il.create(e,t,n),t.constructor,e),fl(t.constructor,$l.keyFrom(e))}return arguments.length>1?(n={},void i(t,e)):kl(t)?(n={},i):(n=void 0===t?{}:t,i)}function El(t){return t.startsWith(Tl)}const Tl=ul("bindable"),$l=Object.freeze({name:Tl,keyFrom:t=>`${Tl}:${t}`,from(t,...e){const n={},i=Array.isArray;function s(e){n[e]=Il.create(e,t)}function r(e,i){n[e]=i instanceof Il?i:Il.create(e,t,i)}return e.forEach((function(t){i(t)?t.forEach(s):t instanceof Il?n[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>r(e,t[e])))})),n},for(t){let e;const n={add(i){let s,r;return kl(i)?(s=i,r={property:s}):(s=i.property,r=i),e=Il.create(s,t,r),al(Tl,t,s)||fl(t,$l.keyFrom(s)),ll(Tl,e,t,s),n},mode:t=>(e.mode=t,n),callback:t=>(e.callback=t,n),attribute:t=>(e.attribute=t,n),primary:()=>(e.primary=!0,n),set:t=>(e.set=t,n)};return n},getAll(t){const e=Tl.length+1,n=[],i=Re(t);let s,r,o,a,l=i.length,c=0;for(;--l>=0;)for(o=i[l],s=gl(o).filter(El),r=s.length,a=0;a<r;++a)n[c++]=ol(Tl,o,s[a].slice(e));return n}});class Il{constructor(t,e,n,i,s,r){this.attribute=t,this.callback=e,this.mode=n,this.primary=i,this.property=s,this.set=r}static create(t,e,n={}){return new Il(Oe(n.attribute,Se(t)),Oe(n.callback,`${t}Changed`),Oe(n.mode,ys.toView),Oe(n.primary,!1),Oe(n.property,t),Oe(n.set,function(t,e,n={}){var i,s,r;const o=null!==(s=null!==(i=n.type)&&void 0!==i?i:Reflect.getMetadata("design:type",e,t))&&void 0!==s?s:null;if(null==o)return Mn;let a;switch(o){case Number:case Boolean:case String:case BigInt:a=o;break;default:{const t=o.coerce;a="function"==typeof t?t.bind(o):null!==(r=Ol.for(o))&&void 0!==r?r:Mn;break}}return a===Mn?a:function(t,e){return function(n,i){var s;return(null==i?void 0:i.enableCoercion)?(null!=e?e:null===(s=null==i?void 0:i.coerceNullish)||void 0===s||!s)&&null==n?n:t(n,i):n}}(a,n.nullable)}(t,e,n)))}}const Ol={key:ul("coercer"),define(t,e){ll(Ol.key,t[e].bind(t),t)},for:t=>ol(Ol.key,t)};class Rl{constructor(t,e,n,i,s,r){this.set=i,this.$controller=s,this.t=r,this.v=void 0,this.ov=void 0,this.f=0;const o=t[n],a=t.propertyChanged,l=this.i=xl(o),c=this.u=xl(a),h=this.hs=i!==Mn;let u;this.o=t,this.k=e,this.cb=l?o:Mn,this.C=c?a:Mn,void 0!==this.cb||c||h?(this.iO=!0,u=t[e],this.v=h&&void 0!==u?i(u,this.t):u,this.A()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t,e){this.hs&&(t=this.set(t,this.t));const n=this.v;if(this.iO){if(Object.is(t,n))return;this.v=t,this.ov=n,this.f=e,(null==this.$controller||this.$controller.isBound)&&(this.i&&this.cb.call(this.o,t,n,e),this.u&&this.C.call(this.o,this.k,t,n,e)),this.queue.add(this)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.t):this.o[this.k],this.A()),this.subs.add(t)}flush(){Pl=this.ov,this.ov=this.v,this.subs.notify(this.v,Pl,this.f)}A(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t,0)}})}}let Pl;As(Rl),Rs(Rl);class Ll{constructor(t,e,n,i){if(this.chars=t,this.repeat=e,this.isSymbol=n,this.isInverted=i,i)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.B;break;default:this.has=this.I}else switch(t.length){case 0:this.has=this.T;break;case 1:this.has=this.P;break;default:this.has=this.$}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}$(t){return this.chars.includes(t)}P(t){return this.chars===t}T(t){return!1}I(t){return!this.chars.includes(t)}B(t){return this.chars!==t}R(t){return!0}}class Ml{constructor(){this.parts=Pn,this.O="",this.L={},this.q={}}get pattern(){const t=this.O;return""===t?null:t}set pattern(t){null==t?(this.O="",this.parts=Pn):(this.O=t,this.parts=this.q[t])}append(t,e){const n=this.L;void 0===n[t]?n[t]=e:n[t]+=e}next(t){const e=this.L;let n;void 0!==e[t]&&(n=this.q,void 0===n[t]?n[t]=[e[t]]:n[t].push(e[t]),e[t]=void 0)}}class jl{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,n=e.length;let i=null,s=0;for(;s<n;++s)if(i=e[s],t.equals(i.charSpec))return i;return null}append(t,e){const n=this.patterns;n.includes(e)||n.push(e);let i=this.findChild(t);return null==i&&(i=new jl(t,e),this.nextStates.push(i),t.repeat&&i.nextStates.push(i)),i}findMatches(t,e){const n=[],i=this.nextStates,s=i.length;let r=0,o=null,a=0,l=0;for(;a<s;++a)if(o=i[a],o.charSpec.has(t))if(n.push(o),r=o.patterns.length,l=0,o.charSpec.isSymbol)for(;l<r;++l)e.next(o.patterns[l]);else for(;l<r;++l)e.append(o.patterns[l],t);return n}}class Ul{constructor(t){this.text=t;const e=this.len=t.length,n=this.specs=[];let i=0;for(;e>i;++i)n.push(new Ll(t[i],!1,!1,!1))}eachChar(t){const e=this.len,n=this.specs;let i=0;for(;e>i;++i)t(n[i])}}class Nl{constructor(t){this.text="PART",this.spec=new Ll(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class Bl{constructor(t){this.text=t,this.spec=new Ll(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class Fl{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Vl=Xe.createInterface("ISyntaxInterpreter",(t=>t.singleton(Dl)));class Dl{constructor(){this.rootState=new jl(null),this.initialStates=[this.rootState]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let n,i,s,r,o,a,l,c,h=0;for(;e>h;){for(n=this.rootState,i=t[h],s=i.pattern,r=new Fl,o=this.parse(i,r),a=o.length,l=t=>{n=n.append(t,s)},c=0;a>c;++c)o[c].eachChar(l);n.types=r,n.isEndpoint=!0,++h}}interpret(t){const e=new Ml,n=t.length;let i,s=this.initialStates,r=0;for(;r<n&&(s=this.getNextStates(s,t.charAt(r),e),0!==s.length);++r);return s=s.filter(zl),s.length>0&&(s.sort(ql),i=s[0],i.charSpec.isSymbol||e.next(i.pattern),e.pattern=i.pattern),e}getNextStates(t,e,n){const i=[];let s=null;const r=t.length;let o=0;for(;o<r;++o)s=t[o],i.push(...s.findMatches(e,n));return i}parse(t,e){const n=[],i=t.pattern,s=i.length,r=t.symbols;let o=0,a=0,l="";for(;o<s;)l=i.charAt(o),0!==r.length&&r.includes(l)?o!==a?(n.push(new Ul(i.slice(a,o))),++e.statics,a=o):(n.push(new Bl(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===l&&"PART"===i.slice(o,o+4)?(a=o+=4,n.push(new Nl(r)),++e.dynamics):++o;return a!==o&&(n.push(new Ul(i.slice(a,o))),++e.statics),n}}function zl(t){return t.isEndpoint}function ql(t,e){const n=t.types,i=e.types;return n.statics!==i.statics?i.statics-n.statics:n.dynamics!==i.dynamics?i.dynamics-n.dynamics:n.symbols!==i.symbols?i.symbols-n.symbols:0}class Hl{constructor(t,e,n,i){this.rawName=t,this.rawValue=e,this.target=n,this.command=i}}const Zl=Xe.createInterface("IAttributePattern"),Wl=Xe.createInterface("IAttributeParser",(t=>t.singleton(Kl)));class Kl{constructor(t,e){this.U={},this._=t;const n=this.F={},i=e.reduce(((t,e)=>{const i=Yl(e.constructor);return i.forEach((t=>n[t.pattern]=e)),t.concat(i)}),Pn);t.add(i)}parse(t,e){let n=this.U[t];null==n&&(n=this.U[t]=this._.interpret(t));const i=n.pattern;return null==i?new Hl(t,e,t,null):this.F[i][i](t,e,n.parts)}}function _l(...t){return function(e){return Jl.define(t,e)}}Kl.inject=[Vl,an(Zl)];class Ql{constructor(t){this.Type=t,this.name=void 0}register(t){Tn.singleton(Zl,this.Type).register(t)}}const Gl=dl("attribute-pattern"),Xl="attribute-pattern-definitions",Yl=t=>ze.annotation.get(t,Xl),Jl=Object.freeze({name:Gl,definitionAnnotationKey:Xl,define(t,e){const n=new Ql(e);return ll(Gl,n,e),pl(e,Gl),ze.annotation.set(e,Xl,t),fl(e,Xl),e},getPatternDefinitions:Yl});let tc=class{"PART.PART"(t,e,n){return new Hl(t,e,n[0],n[1])}"PART.PART.PART"(t,e,n){return new Hl(t,e,n[0],n[2])}};tc=sl([_l({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],tc);let ec=class{ref(t,e,n){return new Hl(t,e,"element","ref")}"PART.ref"(t,e,n){return new Hl(t,e,n[0],"ref")}};ec=sl([_l({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],ec);let nc=class{":PART"(t,e,n){return new Hl(t,e,n[0],"bind")}};nc=sl([_l({pattern:":PART",symbols:":"})],nc);let ic=class{"@PART"(t,e,n){return new Hl(t,e,n[0],"trigger")}};ic=sl([_l({pattern:"@PART",symbols:"@"})],ic);let sc=class{"...$attrs"(t,e,n){return new Hl(t,e,"","...$attrs")}};sc=sl([_l({pattern:"...$attrs",symbols:""})],sc);const rc=jn,oc=Xe.createInterface("ISVGAnalyzer",(t=>t.singleton(ac)));class ac{isStandardSvgAttribute(t,e){return!1}}const lc=Xe.createInterface("IAttrMapper",(t=>t.singleton(cc)));class cc{constructor(t){this.svg=t,this.fns=[],this.N=vl(),this.W=vl(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[oc]}useMapping(t){var e,n;let i,s,r,o;for(r in t)for(o in i=t[r],s=null!==(e=(n=this.N)[r])&&void 0!==e?e:n[r]=vl(),i){if(void 0!==s[o])throw hc(o,r);s[o]=i[o]}}useGlobalMapping(t){const e=this.W;for(const n in t){if(void 0!==e[n])throw hc(n,"*");e[n]=t[n]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((n=>n(t,e)))}map(t,e){var n,i,s;return null!==(s=null!==(i=null===(n=this.N[t.nodeName])||void 0===n?void 0:n[e])&&void 0!==i?i:this.W[e])&&void 0!==s?s:bl(t,e,this.svg)?e:null}}function hc(t,e){return new Error(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}class uc{constructor(t,e,n,i,s){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=s,this.interceptor=this,this.isBound=!1,this.targetObserver=i.getAccessor(e,n)}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(e,"$event"),n}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.targetObserver.setValue((t=>this.interceptor.callSource(t)),t,this.target,this.targetProperty),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t,this.target,this.targetProperty),this.isBound=!1)}observe(t,e){}handleChange(t,e,n){}}class dc{constructor(t,e,n){this.type=7,this.v=null,this.ov=null,this.H=!1,this.f=0,this.o=t,this.G=e,this.X=n}getValue(){return this.v}setValue(t,e){this.v=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H)switch(this.H=!1,this.ov=this.v,this.X){case"class":this.o.classList.toggle(this.G,!!this.v);break;case"style":{let t="",e=this.v;kl(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.G,e,t);break}default:null==this.v?this.o.removeAttribute(this.X):this.o.setAttribute(this.X,String(this.v))}}handleMutation(t){let e=!1;for(let n=0,i=t.length;i>n;++n){const i=t[n];if("attributes"===i.type&&i.attributeName===this.G){e=!0;break}}if(e){let t;switch(this.X){case"class":t=this.o.classList.contains(this.G);break;case"style":t=this.o.style.getPropertyValue(this.G);break;default:throw new Error(`AUR0651:${this.X}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.H=!1,this.f=0,this.queue.add(this))}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.G),pc(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&fc(this.o,this)}flush(){mc=this.ov,this.ov=this.v,this.subs.notify(this.v,mc,this.f)}}As(dc),Rs(dc);const pc=(t,e,n)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(gc)).observe(e,{attributes:!0}),e.$eMObs.add(n)},fc=(t,e)=>{const n=t.$eMObs;return!(!n||!n.delete(e)||(0===n.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},gc=t=>{t[0].target.$eMObs.forEach(vc,t)};function vc(t){t.handleMutation(this)}let mc;class yc{constructor(t){this.b=t}handleChange(t,e,n){const i=this.b;t!==i.sourceExpression.evaluate(n,i.$scope,i.locator,null)&&i.updateSource(t,n)}}const{oneTime:bc,toView:wc,fromView:xc}=ys,kc=wc|bc,Sc={reusable:!1,preempt:!0};class Cc{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.targetAttribute=n,this.targetProperty=i,this.mode=s,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=e,this.p=o.get(rc),this.oL=r}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;n|=this.persistentFlags;const i=this.mode,s=this.interceptor,r=this.sourceExpression,o=this.$scope,a=this.locator,l=this.targetObserver,c=0==(2&n)&&(4&l.type)>0;let h,u=!1;(10082!==r.$kind||this.obs.count>1)&&(u=0==(i&bc),u&&this.obs.version++,t=r.evaluate(n,o,a,s),u&&this.obs.clear()),t!==this.value&&(this.value=t,c?(h=this.task,this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,s.updateTarget(t,n)}),Sc),null==h||h.cancel()):s.updateTarget(t,n))}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);let s=this.targetObserver;s||(s=this.targetObserver=new dc(this.target,this.targetProperty,this.targetAttribute)),i=this.sourceExpression;const r=this.mode,o=this.interceptor;let a=!1;r&kc&&(a=(r&wc)>0,o.updateTarget(this.value=i.evaluate(t,e,this.locator,a?o:null),t)),r&xc&&s.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new yc(o)),this.isBound=!0}$unbind(t){var e;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.obs.clearAll(),this.isBound=!1)}}Fr(Cc);const{toView:Ac}=ys,Ec={reusable:!1,preempt:!0};class Tc{constructor(t,e,n,i,s,r,o){this.interpolation=e,this.target=n,this.targetProperty=i,this.mode=s,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.oL=t,this.targetObserver=t.getAccessor(n,i);const a=e.expressions,l=this.partBindings=Array(a.length),c=a.length;let h=0;for(;c>h;++h)l[h]=new $c(a[h],n,i,r,t,this)}updateTarget(t,e){const n=this.partBindings,i=this.interpolation.parts,s=n.length;let r="",o=0;if(1===s)r=i[0]+n[0].value+i[1];else for(r=i[0];s>o;++o)r+=n[o].value+i[o+1];const a=this.targetObserver;let l;0==(2&e)&&(4&a.type)>0?(l=this.task,this.task=this.taskQueue.queueTask((()=>{this.task=null,a.setValue(r,e,this.target,this.targetProperty)}),Ec),null==l||l.cancel(),l=null):a.setValue(r,e,this.target,this.targetProperty)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].$bind(t,e);this.updateTarget(void 0,t)}$unbind(t){var e;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].interceptor.$unbind(t);null===(e=this.task)||void 0===e||e.cancel(),this.task=null}}class $c{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=i,this.owner=r,this.interceptor=this,this.mode=ys.toView,this.value="",this.task=null,this.isBound=!1,this.oL=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.sourceExpression,s=this.obs;let r=!1;10082===i.$kind&&1===s.count||(r=(this.mode&Ac)>0,r&&s.version++,t=i.evaluate(n,this.$scope,this.locator,r?this.interceptor:null),r&&s.clear()),t!=this.value&&(this.value=t,t instanceof Array&&this.observeCollection(t),this.owner.updateTarget(t,n))}handleCollectionChange(t,e){this.owner.updateTarget(void 0,e)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&Ac)>0?this.interceptor:null),this.value instanceof Array&&this.observeCollection(this.value)}$unbind(t){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll())}}Fr($c);class Ic{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.locator=n,this.p=s,this.strict=r,this.interceptor=this,this.mode=ys.toView,this.value="",this.task=null,this.isBound=!1,this.oL=i}updateTarget(t,e){var n,i;const s=this.target,r=this.p.Node,o=this.value;this.value=t,o instanceof r&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o)),t instanceof r?(s.textContent="",null===(i=s.parentNode)||void 0===i||i.insertBefore(t,s)):s.textContent=String(t)}handleChange(t,e,n){var i;if(!this.isBound)return;const s=this.sourceExpression,r=this.obs;let o=!1;if(10082===s.$kind&&1===r.count||(o=(this.mode&Ac)>0,o&&r.version++,n|=this.strict?1:0,t=s.evaluate(n,this.$scope,this.locator,o?this.interceptor:null),o&&r.clear()),t===this.value)return null===(i=this.task)||void 0===i||i.cancel(),void(this.task=null);0==(2&n)?this.queueUpdate(t,n):this.updateTarget(t,n)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),t|=this.strict?1:0;const n=this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&Ac)>0?this.interceptor:null);n instanceof Array&&this.observeCollection(n),this.updateTarget(n,t)}$unbind(t){var e;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),null===(e=this.task)||void 0===e||e.cancel(),this.task=null)}queueUpdate(t,e){const n=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(t,e)}),Ec),null==n||n.cancel()}}Fr(Ic);class Oc{constructor(t,e,n,i,s=!1){this.sourceExpression=t,this.targetProperty=e,this.locator=i,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.target=null,this.oL=n,this.Y=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.target,s=this.targetProperty,r=i[s];this.obs.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),this.obs.clear(),t!==r&&(i[s]=t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.target=this.Y?e.bindingContext:e.overrideContext;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|t,e,this.locator,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),this.isBound=!1}}Fr(Oc);const{oneTime:Rc,toView:Pc,fromView:Lc}=ys,Mc=Pc|Rc,jc={reusable:!1,preempt:!0};class Uc{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.mode=i,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null,this.oL=s}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;const i=0==(2&(n|=this.persistentFlags))&&(4&this.targetObserver.type)>0,s=this.obs;let r=!1;(10082!==this.sourceExpression.$kind||s.count>1)&&(r=this.mode>Rc,r&&s.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),r&&s.clear()),i?(Nc=this.task,this.task=this.taskQueue.queueTask((()=>{this.interceptor.updateTarget(t,n),this.task=null}),jc),null==Nc||Nc.cancel(),Nc=null):this.interceptor.updateTarget(t,n)}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}t|=1,this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);const s=this.oL,r=this.mode;let o=this.targetObserver;o||(o=r&Lc?s.getObserver(this.target,this.targetProperty):s.getAccessor(this.target,this.targetProperty),this.targetObserver=o),i=this.sourceExpression;const a=this.interceptor,l=(r&Pc)>0;r&Mc&&a.updateTarget(i.evaluate(t,e,this.locator,l?a:null),t),r&Lc&&(o.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new yc(a)),l||a.updateSource(o.getValue(this.target,this.targetProperty),t)),this.isBound=!0}$unbind(t){this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,Nc=this.task,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=Nc&&(Nc.cancel(),Nc=this.task=null),this.obs.clearAll(),this.isBound=!1)}}Fr(Uc);let Nc=null;class Bc{constructor(t,e,n){this.sourceExpression=t,this.target=e,this.locator=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(t,this.$scope,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,null)===this.target&&e.assign(t,this.$scope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const Fc=Xe.createInterface("IAppTask");class Vc{constructor(t,e,n){this.c=void 0,this.slot=t,this.k=e,this.cb=n}register(t){return this.c=t.register(Tn.instance(Fc,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const Dc=Object.freeze({beforeCreate:zc("beforeCreate"),hydrating:zc("hydrating"),hydrated:zc("hydrated"),beforeActivate:zc("beforeActivate"),afterActivate:zc("afterActivate"),beforeDeactivate:zc("beforeDeactivate"),afterDeactivate:zc("afterDeactivate")});function zc(t){return function(e,n){return xl(n)?new Vc(t,e,n):new Vc(t,null,e)}}function qc(t){return t.startsWith(Hc)}const Hc=ul("children-observer"),Zc=Object.freeze({name:Hc,keyFrom:t=>`${Hc}:${t}`,from(...t){const e={},n=Array.isArray;function i(t){e[t]=Kc.create(t)}function s(t,n){e[t]=Kc.create(t,n)}return t.forEach((function(t){n(t)?t.forEach(i):t instanceof Kc?e[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>s(e,t)))})),e},getAll(t){const e=Hc.length+1,n=[],i=Re(t);let s,r,o,a=i.length,l=0;for(;--a>=0;){o=i[a],s=gl(o).filter(qc),r=s.length;for(let t=0;t<r;++t)n[l++]=ol(Hc,o,s[t].slice(e))}return n}}),Wc={childList:!0};class Kc{constructor(t,e,n,i,s,r){this.callback=t,this.property=e,this.options=n,this.query=i,this.filter=s,this.map=r}static create(t,e={}){var n;return new Kc(Oe(e.callback,`${t}Changed`),Oe(e.property,t),null!==(n=e.options)&&void 0!==n?n:Wc,e.query,e.filter,e.map)}}class _c{constructor(t,e,n,i,s=Qc,r=Gc,o=Xc,a){this.controller=t,this.obj=e,this.propertyKey=n,this.query=s,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[i],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){var t;this.observing||(this.observing=!0,this.children=this.get(),(null!==(t=this.observer)&&void 0!==t?t:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.Z()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=Pn)}Z(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(t,e,n,i){var s;const r=e(t),o=r.length,a=[];let l,c,h,u=0;for(;u<o;++u)l=r[u],c=Sh.for(l,Yc),h=null!==(s=null==c?void 0:c.viewModel)&&void 0!==s?s:null,n(l,c,h)&&a.push(i(l,c,h));return a}(this.controller,this.query,this.filter,this.map)}}function Qc(t){return t.host.childNodes}function Gc(t,e,n){return!!n}function Xc(t,e,n){return n}As()(_c);const Yc={optional:!0};function Jc(t){return function(e){return rh.define(t,e)}}function th(t){return function(e){return rh.define(kl(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class eh{constructor(t,e,n,i,s,r,o,a,l,c){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.defaultBindingMode=s,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=l,this.dependencies=c}get type(){return 2}static create(t,e){let n,i;return kl(t)?(n=t,i={name:n}):(n=t.name,i=t),new eh(e,Oe(sh(e,"name"),n),Ie(sh(e,"aliases"),i.aliases,e.aliases),rh.keyFrom(n),Oe(sh(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,ys.toView),Oe(sh(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),$l.from(e,...$l.getAll(e),sh(e,"bindables"),e.bindables,i.bindables),Oe(sh(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),Ie(lh.getAnnotation(e),e.watches),Ie(sh(e,"dependencies"),i.dependencies,e.dependencies))}register(t){const{Type:e,key:n,aliases:i}=this;Tn.transient(n,e).register(t),Tn.aliasTo(n,e).register(t),xi(i,rh,n,t)}}const nh=dl("custom-attribute"),ih=t=>`${nh}:${t}`,sh=(t,e)=>ol(ul(e),t),rh=Object.freeze({name:nh,keyFrom:ih,isType:t=>xl(t)&&al(nh,t),for(t,e){var n;return null!==(n=Bu(t,ih(e)))&&void 0!==n?n:void 0},define(t,e){const n=eh.create(t,e);return ll(nh,n,n.Type),ll(nh,n,n),pl(e,nh),n.Type},getDefinition(t){const e=ol(nh,t);if(void 0===e)throw new Error(`AUR0759:${t.name}`);return e},annotate(t,e,n){ll(ul(e),n,t)},getAnnotation:sh}),oh=Pn,ah=ul("watch"),lh=Object.freeze({name:ah,add(t,e){let n=ol(ah,t);null==n&&ll(ah,n=[],t),n.push(e)},getAnnotation(t){var e;return null!==(e=ol(ah,t))&&void 0!==e?e:oh}});function ch(t){return function(e){return Sh.define(t,e)}}function hh(t){if(void 0===t)return function(t){xh(t,"containerless",!0)};xh(t,"containerless",!0)}const uh=new WeakMap;class dh{constructor(t,e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v,m,y,b,w){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.cache=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=g,this.shadowOptions=v,this.hasSlots=m,this.enhance=y,this.watches=b,this.processContent=w}get type(){return 1}static create(t,e=null){if(null===e){const n=t;if(kl(n))throw new Error(`AUR0761:${t}`);const i=We("name",n,wh);return e=xl(n.Type)?n.Type:Sh.generateType(ke(i)),new dh(e,i,Ie(n.aliases),We("key",n,(()=>Sh.keyFrom(i))),We("cache",n,fh),We("capture",n,vh),We("template",n,gh),Ie(n.instructions),Ie(n.dependencies),We("injectable",n,gh),We("needsCompile",n,mh),Ie(n.surrogates),$l.from(e,n.bindables),Zc.from(n.childrenObservers),We("containerless",n,vh),We("isStrictBinding",n,vh),We("shadowOptions",n,gh),We("hasSlots",n,vh),We("enhance",n,vh),We("watches",n,yh),Ze("processContent",e,gh))}if(kl(t))return new dh(e,t,Ie(kh(e,"aliases"),e.aliases),Sh.keyFrom(t),Ze("cache",e,fh),Ze("capture",e,vh),Ze("template",e,gh),Ie(kh(e,"instructions"),e.instructions),Ie(kh(e,"dependencies"),e.dependencies),Ze("injectable",e,gh),Ze("needsCompile",e,mh),Ie(kh(e,"surrogates"),e.surrogates),$l.from(e,...$l.getAll(e),kh(e,"bindables"),e.bindables),Zc.from(...Zc.getAll(e),kh(e,"childrenObservers"),e.childrenObservers),Ze("containerless",e,vh),Ze("isStrictBinding",e,vh),Ze("shadowOptions",e,gh),Ze("hasSlots",e,vh),Ze("enhance",e,vh),Ie(lh.getAnnotation(e),e.watches),Ze("processContent",e,gh));const n=We("name",t,wh);return new dh(e,n,Ie(kh(e,"aliases"),t.aliases,e.aliases),Sh.keyFrom(n),He("cache",t,e,fh),He("capture",t,e,vh),He("template",t,e,gh),Ie(kh(e,"instructions"),t.instructions,e.instructions),Ie(kh(e,"dependencies"),t.dependencies,e.dependencies),He("injectable",t,e,gh),He("needsCompile",t,e,mh),Ie(kh(e,"surrogates"),t.surrogates,e.surrogates),$l.from(e,...$l.getAll(e),kh(e,"bindables"),e.bindables,t.bindables),Zc.from(...Zc.getAll(e),kh(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),He("containerless",t,e,vh),He("isStrictBinding",t,e,vh),He("shadowOptions",t,e,gh),He("hasSlots",t,e,vh),He("enhance",t,e,vh),Ie(t.watches,lh.getAnnotation(e),e.watches),He("processContent",t,e,gh))}static getOrCreate(t){if(t instanceof dh)return t;if(uh.has(t))return uh.get(t);const e=dh.create(t);return uh.set(t,e),ll(bh,e,e.Type),e}register(t){const{Type:e,key:n,aliases:i}=this;t.has(n,!1)||(Tn.transient(n,e).register(t),Tn.aliasTo(n,e).register(t),xi(i,Sh,n,t))}}const ph={name:void 0,searchParents:!1,optional:!1},fh=()=>0,gh=()=>null,vh=()=>!1,mh=()=>!0,yh=()=>Pn,bh=dl("custom-element"),wh=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),xh=(t,e,n)=>{ll(ul(e),n,t)},kh=(t,e)=>ol(ul(e),t),Sh=Object.freeze({name:bh,keyFrom:t=>`${bh}:${t}`,isType:t=>xl(t)&&al(bh,t),for(t,e=ph){if(void 0===e.name&&!0!==e.searchParents){const n=Bu(t,bh);if(null===n){if(!0===e.optional)return null;throw new Error("AUR0762")}return n}if(void 0!==e.name){if(!0!==e.searchParents){const n=Bu(t,bh);if(null===n)throw new Error("AUR0763");return n.is(e.name)?n:void 0}let n=t,i=!1;for(;null!==n;){const t=Bu(n,bh);if(null!==t&&(i=!0,t.is(e.name)))return t;n=Zu(n)}if(i)return;throw new Error("AUR0764")}let n=t;for(;null!==n;){const t=Bu(n,bh);if(null!==t)return t;n=Zu(n)}throw new Error("AUR0765")},define(t,e){const n=dh.create(t,e);return ll(bh,n,n.Type),ll(bh,n,n),pl(n.Type,bh),n.Type},getDefinition(t){const e=ol(bh,t);if(void 0===e)throw new Error(`AUR0760:${t.name}`);return e},annotate:xh,getAnnotation:kh,generateName:wh,createInjectable(){const t=function(e,n,i){return Xe.getOrCreateAnnotationParamTypes(e)[i]=t,e};return t.register=function(e){return{resolve:(e,n)=>n.has(t,!0)?n.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(n,i=e){const s=class{};return t.value=n,Reflect.defineProperty(s,"name",t),i!==e&&Object.assign(s.prototype,i),s}}()});ul("processContent");class Ch{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.J={},this.tt=0,this.H=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H){this.H=!1;const t=this.value,e=this.J,n=Ah(t);let i=this.tt;if(this.ov=t,n.length>0&&this.it(n),this.tt+=1,0===i)return;i-=1;for(const t in e)ml.call(e,t)&&e[t]===i&&this.obj.classList.remove(t)}}it(t){const e=this.obj,n=t.length;let i,s=0;for(;s<n;s++)i=t[s],0!==i.length&&(this.J[i]=this.tt,e.classList.add(i))}}function Ah(t){if(kl(t))return Eh(t);if("object"!=typeof t)return Pn;if(t instanceof Array){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...Ah(t[i]));return n}return Pn}const e=[];let n;for(n in t)Boolean(t[n])&&(n.includes(" ")?e.push(...Eh(n)):e.push(n));return e}function Eh(t){const e=t.match(/\S+/g);return null===e?Pn:e}Xe.createInterface("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>Rh.supported(t.get(rc))?t.get(Th):t.get($h)))));class Th{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new Rh(this.p,t,this.cache,e)}}Th.inject=[rc];class $h{constructor(t){this.p=t}createStyles(t,e){return new Ph(this.p,t,e)}}$h.inject=[rc];const Ih=Xe.createInterface("IShadowDOMStyles"),Oh=Xe.createInterface("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:Mn})));class Rh{constructor(t,e,n,i=null){this.sharedStyles=i,this.styleSheets=e.map((e=>{let i;return e instanceof t.CSSStyleSheet?i=e:(i=n.get(e),void 0===i&&(i=new t.CSSStyleSheet,i.replaceSync(e),n.set(e,i))),i}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class Ph{constructor(t,e,n=null){this.p=t,this.localStyles=e,this.sharedStyles=n}applyTo(t){const e=this.localStyles,n=this.p;for(let i=e.length-1;i>-1;--i){const s=n.document.createElement("style");s.innerHTML=e[i],t.prepend(s)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:Lh,exit:Mh}=Eo,{wrap:jh,unwrap:Uh}=ya;class Nh{constructor(t,e,n,i,s){this.obj=t,this.get=n,this.cb=i,this.useProxy=s,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.value,n=this.compute();Object.is(n,e)||this.cb.call(t,n,e,t)}compute(){this.running=!0,this.obs.version++;try{return Lh(this),this.value=Uh(this.get.call(void 0,this.useProxy?jh(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,Mh(this)}}}class Bh{constructor(t,e,n,i,s){this.scope=t,this.locator=e,this.oL=n,this.expression=i,this.callback=s,this.interceptor=this,this.isBound=!1,this.obj=t.bindingContext}handleChange(t){const e=this.expression,n=this.obj,i=this.value;10082===e.$kind&&1===this.obs.count||(this.obs.version++,t=e.evaluate(0,this.scope,this.locator,this),this.obs.clear()),Object.is(t,i)||(this.value=t,this.callback.call(n,t,i,n))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,this.locator,this),this.obs.clear())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.value=void 0)}}Fr(Nh),Fr(Bh);const Fh=Xe.createInterface("ILifecycleHooks");class Vh{constructor(t,e){this.definition=t,this.instance=e}}class Dh{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const n=new Set;let i=e.prototype;for(;i!==Object.prototype;){for(const t of Object.getOwnPropertyNames(i))"constructor"!==t&&n.add(t);i=Object.getPrototypeOf(i)}return new Dh(e,n)}register(t){Tn.singleton(Fh,this.Type).register(t)}}const zh=new WeakMap,qh=ul("lifecycle-hooks"),Hh=Object.freeze({name:qh,define(t,e){const n=Dh.create(t,e);return ll(qh,n,e),pl(e,qh),n.Type},resolve(t){let e=zh.get(t);if(void 0===e){zh.set(t,e=new Zh);const n=t.root,i=n.id===t.id?t.getAll(Fh):t.has(Fh,!1)?n.getAll(Fh).concat(t.getAll(Fh)):n.getAll(Fh);let s,r,o,a,l;for(s of i)for(a of(r=ol(qh,s.constructor),o=new Vh(r,s),r.propertyNames))l=e[a],void 0===l?e[a]=[o]:l.push(o)}return e}});class Zh{}const Wh=Xe.createInterface("IViewFactory");class Kh{constructor(t,e){this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=Kh.maxCacheSize:kl(t)&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t){const e=this.cache;let n;return null!=e&&e.length>0?(n=e.pop(),n):(n=ou.$view(this,t),n)}}Kh.maxCacheSize=65535;const _h=new WeakSet;function Qh(t){return!_h.has(t)}function Gh(t){return _h.add(t),dh.create(t)}const Xh=dl("views"),Yh=Object.freeze({name:Xh,has:t=>xl(t)&&(al(Xh,t)||"$views"in t),get(t){if(xl(t)&&"$views"in t){const e=t.$views.filter(Qh).map(Gh);for(const n of e)Yh.add(t,n)}let e=ol(Xh,t);return void 0===e&&ll(Xh,e=[],t),e},add(t,e){const n=dh.create(e);let i=ol(Xh,t);return void 0===i?ll(Xh,i=[n],t):i.push(n),i}}),Jh=Xe.createInterface("IViewLocator",(t=>t.singleton(tu)));class tu{constructor(){this.et=new WeakMap,this.st=new Map}getViewComponentForObject(t,e){if(t){const n=Yh.has(t.constructor)?Yh.get(t.constructor):[],i=xl(e)?e(t,n):this.nt(n,e);return this.rt(t,n,i)}return null}rt(t,e,n){let i,s=this.et.get(t);if(void 0===s?(s={},this.et.set(t,s)):i=s[n],void 0===i){const r=this.ot(t,e,n);i=Sh.define(Sh.getDefinition(r),class extends r{constructor(){super(t)}}),s[n]=i}return i}ot(t,e,n){let i,s=this.st.get(t.constructor);if(void 0===s?(s={},this.st.set(t.constructor,s)):i=s[n],void 0===i){i=Sh.define(this.lt(e,n),class{constructor(t){this.viewModel=t}define(t,e,n){const i=this.viewModel;if(t.scope=Si.fromParent(t.scope,i),void 0!==i.define)return i.define(t,e,n)}});const r=i.prototype;"hydrating"in t&&(r.hydrating=function(t){this.viewModel.hydrating(t)}),"hydrated"in t&&(r.hydrated=function(t){this.viewModel.hydrated(t)}),"created"in t&&(r.created=function(t){this.viewModel.created(t)}),"binding"in t&&(r.binding=function(t,e,n){return this.viewModel.binding(t,e,n)}),"bound"in t&&(r.bound=function(t,e,n){return this.viewModel.bound(t,e,n)}),"attaching"in t&&(r.attaching=function(t,e,n){return this.viewModel.attaching(t,e,n)}),"attached"in t&&(r.attached=function(t,e){return this.viewModel.attached(t,e)}),"detaching"in t&&(r.detaching=function(t,e,n){return this.viewModel.detaching(t,e,n)}),"unbinding"in t&&(r.unbinding=function(t,e,n){return this.viewModel.unbinding(t,e,n)}),"dispose"in t&&(r.dispose=function(){this.viewModel.dispose()}),s[n]=i}return i}nt(t,e){return e||(1===t.length?t[0].name:"default-view")}lt(t,e){const n=t.find((t=>t.name===e));if(void 0===n)throw new Error(`Could not find view: ${e}`);return n}}const eu=Xe.createInterface("IRendering",(t=>t.singleton(nu)));class nu{constructor(t){this.ht=new WeakMap,this.ct=new WeakMap,this.ut=(this.ft=t.root).get(rc),this.dt=new _u(this.ut,this.ut.document.createDocumentFragment())}get renderers(){return null==this.rs?this.rs=this.ft.getAll(Pd,!1).reduce(((t,e)=>(t[e.target]=e,t)),vl()):this.rs}compile(t,e,n){if(!1!==t.needsCompile){const i=this.ht,s=e.get(Rd);let r=i.get(t);return null==r?i.set(t,r=s.compile(t,e,n)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new Kh(e,dh.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new _u(this.ut,t.template);let e;const n=this.ct;if(n.has(t))e=n.get(t);else{const i=this.ut,s=i.document,r=t.template;let o;null===r?e=null:r instanceof i.Node?"TEMPLATE"===r.nodeName?e=s.adoptNode(r.content):(e=s.adoptNode(s.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=s.createElement("template"),kl(r)&&(o.innerHTML=r),s.adoptNode(e=o.content)),n.set(t,e)}return null==e?this.dt:new _u(this.ut,e.cloneNode(!0))}render(t,e,n,i){const s=n.instructions,r=this.renderers,o=e.length;if(e.length!==s.length)throw new Error(`AUR0757:${o}<>${s.length}`);let a,l,c,h=0,u=0,d=0;if(o>0)for(;o>h;){for(a=s[h],c=e[h],u=0,d=a.length;d>u;)l=a[u],r[l.type].render(t,c,l),++u;++h}if(null!=i&&(a=n.surrogates,(d=a.length)>0))for(u=0;d>u;)l=a[u],r[l.type].render(t,i,l),++u}}var iu;nu.inject=[tn],function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(iu||(iu={}));const su={optional:!0},ru=new WeakMap;class ou{constructor(t,e,n,i,s,r,o){switch(this.container=t,this.vmKind=e,this.definition=n,this.viewFactory=i,this.viewModel=s,this.host=r,this.id=Ee("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.vt=!1,this.gt=Pn,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.wt=0,this.bt=0,this.xt=0,this.location=o,this.r=t.root.get(eu),e){case 1:case 0:this.hooks=new du(s);break;case 2:this.hooks=du.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var t;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(t=this.parent.definition)||void 0===t?void 0:t.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(t){return ru.get(t)}static getCachedOrThrow(t){const e=ou.getCached(t);if(void 0===e)throw new Error(`AUR0500:${t}`);return e}static $el(t,e,n,i,s,r=null){if(ru.has(e))return ru.get(e);s=null!=s?s:Sh.getDefinition(e.constructor);const o=new ou(t,0,s,null,e,n,r),a=t.get(ln(yu));return s.dependencies.length>0&&t.register(...s.dependencies),t.registerResolver(yu,new $n("IHydrationContext",new bu(o,i,a))),ru.set(e,o),null!=i&&!1===i.hydrate||o.hE(i,a),o}static $attr(t,e,n,i){if(ru.has(e))return ru.get(e);i=null!=i?i:rh.getDefinition(e.constructor);const s=new ou(t,1,i,null,e,n,null);return i.dependencies.length>0&&t.register(...i.dependencies),ru.set(e,s),s.yt(),s}static $view(t,e){const n=new ou(t.container,2,null,t,null,null,null);return n.parent=null!=e?e:null,n.kt(),n}hE(t,e){const n=this.container,i=(this.flags,this.viewModel);let s=this.definition;if(this.scope=Si.create(i,null,!0),s.watches.length>0&&uu(this,n,s,i),lu(this,s,0,i),this.gt=function(t,e,n){const i=e.childrenObservers,s=Object.getOwnPropertyNames(i),r=s.length;if(r>0){const e=au(n),o=[];let a,l,c=0;for(;c<r;++c)a=s[c],null==e[a]&&(l=i[a],o[o.length]=e[a]=new _c(t,n,a,l.callback,l.query,l.filter,l.map,l.options));return o}return Pn}(this,s,i),this.hooks.hasDefine){const t=i.define(this,e,s);void 0!==t&&t!==s&&(s=dh.getOrCreate(t))}this.lifecycleHooks=Hh.resolve(n),s.register(n),null!==s.injectable&&n.registerResolver(s.injectable,new $n("definition.injectable",i)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){void 0!==this.lifecycleHooks.hydrating&&this.lifecycleHooks.hydrating.forEach(ku,this),this.hooks.hasHydrating&&this.viewModel.hydrating(this);const e=this.Ct=this.r.compile(this.definition,this.container,t),{shadowOptions:n,isStrictBinding:i,hasSlots:s}=e,r=this.location;if(this.isStrictBinding=i,null!==(this.hostController=Sh.for(this.host,su))&&(this.host=this.container.root.get(rc).document.createElement(this.definition.name)),Fu(this.host,Sh.name,this),Fu(this.host,this.definition.key,this),null!==n||s){if(null!=r)throw new Error("AUR0501");Fu(this.shadowRoot=this.host.attachShadow(null!=n?n:pu),Sh.name,this),Fu(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=r?(Fu(r,Sh.name,this),Fu(r,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.lifecycleHooks.hydrated&&this.lifecycleHooks.hydrated.forEach(Su,this),this.hooks.hasHydrated&&this.viewModel.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Ct,this.host),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(xu,this),this.hooks.hasCreated&&this.viewModel.created(this)}yt(){const t=this.definition,e=this.viewModel;t.watches.length>0&&uu(this,this.container,t,e),lu(this,t,this.flags,e),e.$controller=this,this.lifecycleHooks=Hh.resolve(this.container),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(xu,this),this.hooks.hasCreated&&this.viewModel.created(this)}kt(){this.Ct=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Ct.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Ct)).findTargets(),this.Ct,void 0)}activate(t,e,n,i){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`AUR0502:${this.name}`);default:throw new Error(`AUR0503:${this.name} ${vu(this.state)}`)}switch(this.parent=e,n|=2,this.vmKind){case 0:this.scope.parentScope=null!=i?i:null;break;case 1:this.scope=null!=i?i:null;break;case 2:if(null==i)throw new Error("AUR0504");this.hasLockedScope||(this.scope=i)}let s;return this.isStrictBinding&&(n|=1),this.$initiator=t,this.$flags=n,this.At(),2!==this.vmKind&&null!=this.lifecycleHooks.binding&&(s=je(...this.lifecycleHooks.binding.map(Cu,this))),this.hooks.hasBinding&&(s=je(s,this.viewModel.binding(this.$initiator,this.parent,this.$flags))),s instanceof Promise?(this.Rt(),s.then((()=>{this.bind()})).catch((t=>{this.St(t)})),this.$promise):(this.bind(),this.$promise)}bind(){let t,e=0,n=this.gt.length;if(n>0)for(;n>e;)this.gt[e].start(),++e;if(null!==this.bindings)for(e=0,n=this.bindings.length;n>e;)this.bindings[e].$bind(this.$flags,this.scope),++e;if(2!==this.vmKind&&null!=this.lifecycleHooks.bound&&(t=je(...this.lifecycleHooks.bound.map(Au,this))),this.hooks.hasBound&&(t=je(t,this.viewModel.bound(this.$initiator,this.parent,this.$flags))),t instanceof Promise)return this.Rt(),void t.then((()=>{this.isBound=!0,this.Et()})).catch((t=>{this.St(t)}));this.isBound=!0,this.Et()}Bt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Et(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Bt(this.host);break;case 3:this.hostController.Bt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(Ih,!1)?t.get(Ih):t.get(Oh)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.lifecycleHooks.attaching&&(t=je(...this.lifecycleHooks.attaching.map(Eu,this))),this.hooks.hasAttaching&&(t=je(t,this.viewModel.attaching(this.$initiator,this.parent,this.$flags))),t instanceof Promise&&(this.Rt(),this.At(),t.then((()=>{this.It()})).catch((t=>{this.St(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.It()}deactivate(t,e,n){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`AUR0505:${this.name} ${vu(this.state)}`)}this.$initiator=t,this.$flags=n,t===this&&this.Tt();let i,s=0;if(this.gt.length)for(;s<this.gt.length;++s)this.gt[s].stop();if(null!==this.children)for(s=0;s<this.children.length;++s)this.children[s].deactivate(t,this,n);if(2!==this.vmKind&&null!=this.lifecycleHooks.detaching&&(i=je(...this.lifecycleHooks.detaching.map($u,this))),this.hooks.hasDetaching&&(i=je(i,this.viewModel.detaching(this.$initiator,this.parent,this.$flags))),i instanceof Promise&&(this.Rt(),t.Tt(),i.then((()=>{t.Dt()})).catch((e=>{t.St(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Dt(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=4|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].$unbind(t);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}16==(16&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.Pt()}Rt(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Rt())}Pt(){void 0!==this.$promise&&(Ou=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,Ou(),Ou=void 0)}St(t){void 0!==this.$promise&&(Ru=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,Ru(t),Ru=void 0),this.$initiator!==this&&this.parent.St(t)}At(){++this.wt,this.$initiator!==this&&this.parent.At()}It(){if(0==--this.wt){if(2!==this.vmKind&&null!=this.lifecycleHooks.attached&&(Pu=je(...this.lifecycleHooks.attached.map(Tu,this))),this.hooks.hasAttached&&(Pu=je(Pu,this.viewModel.attached(this.$initiator,this.$flags))),Pu instanceof Promise)return this.Rt(),Pu.then((()=>{this.state=2,this.Pt(),this.$initiator!==this&&this.parent.It()})).catch((t=>{this.St(t)})),void(Pu=void 0);Pu=void 0,this.state=2,this.Pt()}this.$initiator!==this&&this.parent.It()}Tt(){++this.bt}Dt(){if(0==--this.bt){this.$t(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),2!==e.vmKind&&null!=e.lifecycleHooks.unbinding&&(t=je(...e.lifecycleHooks.unbinding.map(Iu,this))),e.hooks.hasUnbinding&&(e.debug&&e.logger.trace("unbinding()"),t=je(t,e.viewModel.unbinding(e.$initiator,e.parent,e.$flags))),t instanceof Promise&&(this.Rt(),this.$t(),t.then((()=>{this.Ot()})).catch((t=>{this.St(t)}))),t=void 0,e=e.next;this.Ot()}}$t(){++this.xt}Ot(){if(0==--this.xt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return rh.getDefinition(this.viewModel.constructor).name===t;case 0:return Sh.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(Fu(t,Sh.name,this),Fu(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(Fu(t,Sh.name,this),Fu(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(Fu(t,Sh.name,this),Fu(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(wu),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(ru.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}}function au(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function lu(t,e,n,i){const s=e.bindables,r=Object.getOwnPropertyNames(s),o=r.length;if(o>0){let e,n,a=0;const l=au(i),c=t.container,h=c.has(ms,!0)?c.get(ms):null;for(;a<o;++a)e=r[a],void 0===l[e]&&(n=s[e],l[e]=new Rl(i,e,n.callback,n.set,t,h))}}const cu=new Map,hu=t=>{let e=cu.get(t);return null==e&&(e=new _i(t,0),cu.set(t,e)),e};function uu(t,e,n,i){const s=e.get(Pa),r=e.get(Vr),o=n.watches,a=0===t.vmKind?t.scope:Si.create(i,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if(({expression:c,callback:h}=o[d]),h=xl(h)?h:Reflect.get(i,h),!xl(h))throw new Error(`AUR0506:${String(h)}`);xl(c)?t.addBinding(new Nh(i,s,c,h,!0)):(u=kl(c)?r.parse(c,8):hu(c),t.addBinding(new Bh(a,e,s,u,h)))}}class du{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}du.none=new du({});const pu={mode:"open"};var fu,gu;function vu(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(fu||(fu={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(gu||(gu={}));const mu=Xe.createInterface("IController"),yu=Xe.createInterface("IHydrationContext");class bu{constructor(t,e,n){this.instruction=e,this.parent=n,this.controller=t}}function wu(t){t.dispose()}function xu(t){t.instance.created(this.viewModel,this)}function ku(t){t.instance.hydrating(this.viewModel,this)}function Su(t){t.instance.hydrated(this.viewModel,this)}function Cu(t){return t.instance.binding(this.viewModel,this.$initiator,this.parent,this.$flags)}function Au(t){return t.instance.bound(this.viewModel,this.$initiator,this.parent,this.$flags)}function Eu(t){return t.instance.attaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Tu(t){return t.instance.attached(this.viewModel,this.$initiator,this.$flags)}function $u(t){return t.instance.detaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Iu(t){return t.instance.unbinding(this.viewModel,this.$initiator,this.parent,this.$flags)}let Ou,Ru,Pu;const Lu=Xe.createInterface("IAppRoot"),Mu=Xe.createInterface("IWorkTracker",(t=>t.singleton(ju)));class ju{constructor(t){this.Lt=0,this.qt=null,this.Pt=null,this.Ut=t.scopeTo("WorkTracker")}start(){this.Ut.trace(`start(stack:${this.Lt})`),++this.Lt}finish(){if(this.Ut.trace(`finish(stack:${this.Lt})`),0==--this.Lt){const t=this.Pt;null!==t&&(this.Pt=this.qt=null,t())}}wait(){if(this.Ut.trace(`wait(stack:${this.Lt})`),null===this.qt){if(0===this.Lt)return Promise.resolve();this.qt=new Promise((t=>{this.Pt=t}))}return this.qt}}ju.inject=[qn];class Uu{constructor(t,e,n,i){this.config=t,this.platform=e,this.container=n,this.controller=void 0,this._t=void 0,this.host=t.host,this.work=n.get(Mu),i.prepare(this),n.registerResolver(e.HTMLElement,n.registerResolver(e.Element,n.registerResolver(Vu,new $n("ElementResolver",t.host)))),this._t=Me(this.Ft("beforeCreate"),(()=>{const e=t.component,i=n.createChild();let s;s=Sh.isType(e)?this.container.get(e):t.component;const r={hydrate:!1,projections:null},o=this.controller=ou.$el(i,s,this.host,r);return o.hE(r,null),Me(this.Ft("hydrating"),(()=>(o.hS(null),Me(this.Ft("hydrated"),(()=>{o.hC(),this._t=void 0})))))}))}activate(){return Me(this._t,(()=>Me(this.Ft("beforeActivate"),(()=>Me(this.controller.activate(this.controller,null,2,void 0),(()=>this.Ft("afterActivate")))))))}deactivate(){return Me(this.Ft("beforeDeactivate"),(()=>Me(this.controller.deactivate(this.controller,null,0),(()=>this.Ft("afterDeactivate")))))}Ft(t){return je(...this.container.getAll(Fc).reduce(((e,n)=>(n.slot===t&&e.push(n.run()),e)),[]))}dispose(){var t;null===(t=this.controller)||void 0===t||t.dispose()}}class Nu{}function Bu(t,e){var n,i;return null!==(i=null===(n=t.$au)||void 0===n?void 0:n[e])&&void 0!==i?i:null}function Fu(t,e,n){var i,s;(null!==(i=(s=t).$au)&&void 0!==i?i:s.$au=new Nu)[e]=n}const Vu=Xe.createInterface("INode"),Du=Xe.createInterface("IEventTarget",(t=>t.cachedCallback((t=>t.has(Lu,!0)?t.get(Lu).host:t.get(rc).document)))),zu=Xe.createInterface("IRenderLocation");var qu;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(qu||(qu={}));const Hu=new WeakMap;function Zu(t){if(Hu.has(t))return Hu.get(t);let e=0,n=t.nextSibling;for(;null!==n;){if(8===n.nodeType)switch(n.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return n}n=n.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Sh.for(t);if(void 0===e)return null;if(2===e.mountTarget)return Zu(e.host)}return t.parentNode}function Wu(t){if(Ku(t))return t;const e=t.ownerDocument.createComment("au-end"),n=t.ownerDocument.createComment("au-start");return null!==t.parentNode&&(t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(n,e)),e.$start=n,e}function Ku(t){return"au-end"===t.textContent}class _u{constructor(t,e){this.platform=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const n=e.querySelectorAll(".au");let i,s=0,r=n.length,o=this.targets=Array(r);for(;r>s;)i=n[s],"AU-M"===i.nodeName?o[s]=Wu(i):o[s]=i,++s;const a=e.childNodes,l=this.childNodes=Array(r=a.length);for(s=0;r>s;)l[s]=a[s],++s;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e,n=this.firstChild;const i=this.lastChild;for(;null!=n&&(e=n.nextSibling,t.appendChild(n),n!==i);)n=e}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let n,i=this.firstChild;for(;null!==i&&(n=i.nextSibling,t.appendChild(i),i!==e);)i=n}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,Ku(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}const Qu=Xe.createInterface("IWindow",(t=>t.callback((t=>t.get(rc).window)))),Gu=Xe.createInterface("ILocation",(t=>t.callback((t=>t.get(Qu).location)))),Xu=Xe.createInterface("IHistory",(t=>t.callback((t=>t.get(Qu).history)))),Yu={[xs.capturing]:{capture:!0},[xs.bubbling]:{capture:!1}};class Ju{constructor(t,e,n){this.prevent=t,this.strategy=e,this.expAsHandler=n}}class td{constructor(t,e,n,i,s,r,o){this.platform=t,this.targetEvent=e,this.sourceExpression=n,this.target=i,this.eventDelegator=s,this.locator=r,this.Vt=o,this.interceptor=this,this.isBound=!1,this.handler=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;let n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);if(delete e.$event,this.Vt.expAsHandler){if(!xl(n))throw new Error(`Handler of "${this.targetEvent}" event is not a function.`);n=n(t)}return!0!==n&&this.Vt.prevent&&t.preventDefault(),n}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.Vt.strategy===xs.none?this.target.addEventListener(this.targetEvent,this):this.handler=this.eventDelegator.addEventListener(this.locator.get(Du),this.target,this.targetEvent,this,Yu[this.Vt.strategy]),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.Vt.strategy===xs.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const ed={capture:!1};class nd{constructor(t,e,n=ed){this.Mt=t,this.jt=e,this.Vt=n,this.Nt=0,this.Wt=new Map,this.Ht=new Map}zt(){1==++this.Nt&&this.Mt.addEventListener(this.jt,this,this.Vt)}Gt(){0==--this.Nt&&this.Mt.removeEventListener(this.jt,this,this.Vt)}dispose(){this.Nt>0&&(this.Nt=0,this.Mt.removeEventListener(this.jt,this,this.Vt)),this.Wt.clear(),this.Ht.clear()}Xt(t){const e=!0===this.Vt.capture?this.Wt:this.Ht;let n=e.get(t);return void 0===n&&e.set(t,n=vl()),n}handleEvent(t){const e=!0===this.Vt.capture?this.Wt:this.Ht,n=t.composedPath();!0===this.Vt.capture&&n.reverse();for(const i of n){const n=e.get(i);if(void 0===n)continue;const s=n[this.jt];if(void 0!==s&&(xl(s)?s(t):s.handleEvent(t),!0===t.cancelBubble))return}}}class id{constructor(t,e,n,i){this.Kt=t,this.Yt=e,this.jt=n,t.zt(),e[n]=i}dispose(){this.Kt.Gt(),this.Yt[this.jt]=void 0}}class sd{constructor(t){this.config=t,this.target=null,this.handler=null}subscribe(t,e){let n;for(n of(this.target=t,this.handler=e,this.config.events))t.addEventListener(n,e)}dispose(){const{target:t,handler:e}=this;let n;if(null!==t&&null!==e)for(n of this.config.events)t.removeEventListener(n,e);this.target=this.handler=null}}const rd=Xe.createInterface("IEventDelegator",(t=>t.singleton(od)));class od{constructor(){this.Zt=vl()}addEventListener(t,e,n,i,s){var r,o;const a=null!==(r=(o=this.Zt)[n])&&void 0!==r?r:o[n]=new Map;let l=a.get(t);return void 0===l&&a.set(t,l=new nd(t,n,s)),new id(l,l.Xt(e),n,i)}dispose(){for(const t in this.Zt){const e=this.Zt[t];for(const t of e.values())t.dispose();e.clear()}}}Xe.createInterface("IProjections");const ad=Xe.createInterface("IAuSlotsInfo");class ld{constructor(t){this.projectedSlots=t}}var cd;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}(cd||(cd={}));const hd=Xe.createInterface("Instruction");function ud(t){const e=t.type;return kl(e)&&2===e.length}class dd{constructor(t,e){this.from=t,this.to=e}get type(){return"rf"}}class pd{constructor(t,e,n){this.from=t,this.to=e,this.mode=n}get type(){return"rg"}}class fd{constructor(t,e){this.from=t,this.to=e}get type(){return"rk"}}class gd{constructor(t,e){this.from=t,this.to=e}get type(){return"rh"}}class vd{constructor(t,e){this.from=t,this.to=e}get type(){return"rj"}}class md{constructor(t,e){this.value=t,this.to=e}get type(){return"re"}}class yd{constructor(t,e,n,i,s,r){this.res=t,this.alias=e,this.props=n,this.projections=i,this.containerless=s,this.captures=r,this.auSlot=null}get type(){return"ra"}}class bd{constructor(t,e,n){this.res=t,this.alias=e,this.props=n}get type(){return"rb"}}class wd{constructor(t,e,n,i){this.def=t,this.res=e,this.alias=n,this.props=i}get type(){return"rc"}}class xd{constructor(t,e){this.instructions=t,this.toBindingContext=e}get type(){return"rd"}}class kd{constructor(t,e){this.from=t,this.to=e}get type(){return"ri"}}class Sd{constructor(t,e){this.from=t,this.strict=e}get type(){return"ha"}}class Cd{constructor(t,e,n,i){this.from=t,this.to=e,this.preventDefault=n,this.strategy=i}get type(){return"hb"}}class Ad{constructor(t,e){this.value=t,this.to=e}get type(){return"he"}}class Ed{constructor(t){this.value=t,this.type="hf"}}class Td{constructor(t){this.value=t,this.type="hg"}}class $d{constructor(t,e,n){this.attr=t,this.from=e,this.to=n}get type(){return"hc"}}class Id{get type(){return"hs"}}class Od{constructor(t){this.instructions=t}get type(){return"hp"}}const Rd=Xe.createInterface("ITemplateCompiler"),Pd=Xe.createInterface("IRenderer");function Ld(t){return function(e){return e.register=function(t){Tn.singleton(Pd,this).register(t)},Sl(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function Md(t,e,n){return kl(e)?t.parse(e,n):e}function jd(t){return null!=t.viewModel?t.viewModel:t}let Ud=class{render(t,e,n){const i=jd(e);void 0!==i.$observers&&void 0!==i.$observers[n.to]?i.$observers[n.to].setValue(n.value,2):i[n.to]=n.value}};Ud=sl([Ld("re")],Ud);let Nd=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[eu,rc]}render(t,e,n){let i,s,r,o;const a=n.res,l=n.projections,c=t.container;if("string"==typeof a){if(i=c.find(Sh,a),null==i)throw new Error(`AUR0752:${a}@${t.name}`)}else i=a;const h=n.containerless||i.containerless?Wu(e):null,u=function(t,e,n,i,s,r){const o=e.container.createChild();return o.registerResolver(t.HTMLElement,o.registerResolver(t.Element,o.registerResolver(Vu,new $n("ElementResolver",n)))),o.registerResolver(mu,new $n(ap,e)),o.registerResolver(hd,new $n(lp,i)),o.registerResolver(zu,null==s?pp:new dp(s)),o.registerResolver(Wh,fp),o.registerResolver(ad,null==r?gp:new $n(cp,r)),o}(this.p,t,e,n,h,null==l?void 0:new ld(Object.keys(l)));s=i.Type,r=u.invoke(s),u.registerResolver(s,new $n(i.key,r)),o=ou.$el(u,r,e,n,i,h),Fu(e,i.key,o);const d=this.r.renderers,p=n.props,f=p.length;let g,v=0;for(;f>v;)g=p[v],d[g.type].render(t,o,g),++v;t.addChild(o)}};Nd=sl([Ld("ra")],Nd);let Bd=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[eu,rc]}render(t,e,n){let i,s=t.container;if("string"==typeof n.res){if(i=s.find(rh,n.res),null==i)throw new Error(`AUR0753:${n.res}@${t.name}`)}else i=n.res;const r=up(this.p,i,t,e,n,void 0,void 0),o=ou.$attr(r.ctn,r.vm,e,i);Fu(e,i.key,o);const a=this.r.renderers,l=n.props,c=l.length;let h,u=0;for(;c>u;)h=l[u],a[h.type].render(t,o,h),++u;t.addChild(o)}};Bd=sl([Ld("rb")],Bd);let Fd=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[eu,rc]}render(t,e,n){var i,s;let r,o=t.container;if("string"==typeof n.res){if(r=o.find(rh,n.res),null==r)throw new Error(`AUR0754:${n.res}@${t.name}`)}else r=n.res;const a=this.r.getViewFactory(n.def,o),l=Wu(e),c=up(this.p,r,t,e,n,a,l),h=ou.$attr(c.ctn,c.vm,e,r);Fu(l,r.key,h),null===(s=(i=c.vm).link)||void 0===s||s.call(i,t,h,e,n);const u=this.r.renderers,d=n.props,p=d.length;let f,g=0;for(;p>g;)f=d[g],u[f.type].render(t,h,f),++g;t.addChild(h)}};Fd=sl([Ld("rc")],Fd);let Vd=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){e.remove();const i=n.instructions,s=n.toBindingContext,r=t.container,o=i.length;let a,l,c,h=0;for(;o>h;)a=i[h],l=Md(this.ep,a.from,8),c=new Oc(l,a.to,this.oL,r,s),t.addBinding(38962===l.$kind?_d(c,l,r):c),++h}};Vd.inject=[Vr,Pa],Vd=sl([Ld("rd")],Vd);let Dd=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=Md(this.ep,n.from,12),s=new uc(i,jd(e),n.to,this.oL,t.container);t.addBinding(38962===i.$kind?_d(s,i,t.container):s)}};Dd.inject=[Vr,Pa],Dd=sl([Ld("rh")],Dd);let zd=class{constructor(t){this.ep=t}render(t,e,n){const i=Md(this.ep,n.from,8),s=new Bc(i,function(t,e){if("element"===e)return t;switch(e){case"controller":return Sh.for(t);case"view":throw new Error("AUR0750");case"view-model":return Sh.for(t).viewModel;default:{const n=rh.for(t,e);if(void 0!==n)return n.viewModel;const i=Sh.for(t,{name:e});if(void 0===i)throw new Error(`AUR0751:${e}`);return i.viewModel}}}(e,n.to),t.container);t.addBinding(38962===i.$kind?_d(s,i,t.container):s)}};zd.inject=[Vr],zd=sl([Ld("rj")],zd);let qd=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=Md(this.ep,n.from,1),r=new Tc(this.oL,s,jd(e),n.to,ys.toView,i,this.p.domWriteQueue),o=r.partBindings,a=o.length;let l,c=0;for(;a>c;++c)l=o[c],38962===l.sourceExpression.$kind&&(o[c]=_d(l,l.sourceExpression,i));t.addBinding(r)}};qd.inject=[Vr,Pa,rc],qd=sl([Ld("rf")],qd);let Hd=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Md(this.ep,n.from,8),s=new Uc(i,jd(e),n.to,n.mode,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?_d(s,i,t.container):s)}};Hd.inject=[Vr,Pa,rc],Hd=sl([Ld("rg")],Hd);let Zd=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Md(this.ep,n.from,2),s=new Uc(i,jd(e),n.to,ys.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.iterable.$kind?_d(s,i.iterable,t.container):s)}};Zd.inject=[Vr,Pa,rc],Zd=sl([Ld("rk")],Zd);let Wd=0;const Kd=[];function _d(t,e,n){for(;e instanceof qi;)Kd[Wd++]=e,e=e.expression;for(;Wd>0;){const e=Kd[--Wd],i=n.get(e.behaviorKey);i instanceof Oi&&(t=i.construct(t,e))}return Kd.length=0,t}let Qd=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=e.nextSibling,r=e.parentNode,o=this.p.document,a=Md(this.ep,n.from,1),l=a.parts,c=a.expressions,h=c.length;let u,d,p=0,f=l[0];for(""!==f&&r.insertBefore(o.createTextNode(f),s);h>p;++p)d=c[p],u=new Ic(d,r.insertBefore(o.createTextNode(""),s),i,this.oL,this.p,n.strict),t.addBinding(38962===d.$kind?_d(u,d,i):u),f=l[p+1],""!==f&&r.insertBefore(o.createTextNode(f),s);"AU-M"===e.nodeName&&e.remove()}};Qd.inject=[Vr,Pa,rc],Qd=sl([Ld("ha")],Qd);const Gd=Xe.createInterface("IListenerBehaviorOptions",(t=>t.singleton(Xd)));class Xd{constructor(){this.expAsHandler=!1}}let Yd=class{constructor(t,e,n,i){this.ep=t,this.Jt=e,this.p=n,this.Qt=i}render(t,e,n){const i=Md(this.ep,n.from,4),s=new td(this.p,n.to,i,e,this.Jt,t.container,new Ju(n.preventDefault,n.strategy,this.Qt.expAsHandler));t.addBinding(38962===i.$kind?_d(s,i,t.container):s)}};Yd.inject=[Vr,rd,rc,Gd],Yd=sl([Ld("hb")],Yd);let Jd=class{render(t,e,n){e.setAttribute(n.to,n.value)}};Jd=sl([Ld("he")],Jd);let tp=class{render(t,e,n){!function(t,e){const n=e.length;let i=0;for(let s=0;s<n;++s)32===e.charCodeAt(s)?(s!==i&&t.add(e.slice(i,s)),i=s+1):s+1===n&&t.add(e.slice(i))}(e.classList,n.value)}};tp=sl([Ld("hf")],tp);let ep=class{render(t,e,n){e.style.cssText+=n.value}};ep=sl([Ld("hg")],ep);let np=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Md(this.ep,n.from,8),s=new Uc(i,e.style,n.to,ys.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?_d(s,i,t.container):s)}};np.inject=[Vr,Pa,rc],np=sl([Ld("hd")],np);let ip=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=Md(this.ep,n.from,8),s=new Cc(i,e,n.attr,n.to,ys.toView,this.oL,t.container);t.addBinding(38962===i.$kind?_d(s,i,t.container):s)}};ip.inject=[Vr,Pa],ip=sl([Ld("hc")],ip);let sp=class{constructor(t,e){this.ti=t,this.r=e}static get inject(){return[Rd,eu]}render(t,e,n){const i=t.container.get(yu),s=this.r.renderers,r=t=>{let e=t,n=i;for(;null!=n&&e>0;)n=n.parent,--e;if(null==n)throw new Error("No scope context for spread binding.");return n},o=n=>{var i,a;const l=r(n),c=op(l),h=this.ti.compileSpread(l.controller.definition,null!==(a=null===(i=l.instruction)||void 0===i?void 0:i.captures)&&void 0!==a?a:Pn,l.controller.container,e);let u;for(u of h)switch(u.type){case"hs":o(n+1);break;case"hp":s[u.instructions.type].render(c,Sh.for(e),u.instructions);break;default:s[u.type].render(c,e,u)}t.addBinding(c)};o(0)}};sp=sl([Ld("hs")],sp);class rp{constructor(t,e){this.ii=t,this.ei=e,this.interceptor=this,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}$bind(t,e){var n;if(this.isBound)return;this.isBound=!0;const i=this.$scope=null!==(n=this.ei.controller.scope.parentScope)&&void 0!==n?n:void 0;if(null==i)throw new Error("Invalid spreading. Context scope is null/undefined");this.ii.forEach((e=>e.$bind(t,i)))}$unbind(t){this.ii.forEach((e=>e.$unbind(t))),this.isBound=!1}addBinding(t){this.ii.push(t)}addChild(t){if(1!==t.vmKind)throw new Error("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}}const op=t=>new rp([],t),ap="IController",lp="IInstruction",cp="IAuSlotsInfo";class hp{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw new Error("AUR7055");if(!kl(t.name)||0===t.name.length)throw new Error("AUR0756");return t}}function up(t,e,n,i,s,r,o,a){const l=n.container.createChild();return l.registerResolver(t.HTMLElement,l.registerResolver(t.Element,l.registerResolver(Vu,new $n("ElementResolver",i)))),n=n instanceof ou?n:n.ctrl,l.registerResolver(mu,new $n(ap,n)),l.registerResolver(hd,new $n(lp,s)),l.registerResolver(zu,null==o?pp:new $n("IRenderLocation",o)),l.registerResolver(Wh,null==r?fp:new hp(r)),l.registerResolver(ad,null==a?gp:new $n(cp,a)),{vm:l.invoke(e.Type),ctn:l}}class dp{constructor(t){this.l=t}get name(){return"IRenderLocation"}get $isResolver(){return!0}resolve(){return this.l}}const pp=new dp(null),fp=new hp(null),gp=new $n(cp,new ld(Pn));var vp;function mp(t){return function(e){return kp.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(vp||(vp={}));class yp{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.type=s}static create(t,e){let n,i;return kl(t)?(n=t,i={name:n}):(n=t.name,i=t),new yp(e,Oe(xp(e,"name"),n),Ie(xp(e,"aliases"),i.aliases,e.aliases),wp(n),Oe(xp(e,"type"),i.type,e.type,null))}register(t){const{Type:e,key:n,aliases:i}=this;Tn.singleton(n,e).register(t),Tn.aliasTo(n,e).register(t),xi(i,kp,n,t)}}const bp=dl("binding-command"),wp=t=>`${bp}:${t}`,xp=(t,e)=>ol(ul(e),t),kp=Object.freeze({name:bp,keyFrom:wp,define(t,e){const n=yp.create(t,e);return ll(bp,n,n.Type),ll(bp,n,n),pl(e,bp),n.Type},getAnnotation:xp});let Sp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"one-time"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:xe(n):(""===i&&1===t.def.type&&(i=xe(n)),n=t.bindable.property),new pd(this.ep.parse(i,8),n,ys.oneTime)}};Sp.inject=[lc,Vr],Sp=sl([mp("one-time")],Sp);let Cp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"to-view"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:xe(n):(""===i&&1===t.def.type&&(i=xe(n)),n=t.bindable.property),new pd(this.ep.parse(i,8),n,ys.toView)}};Cp.inject=[lc,Vr],Cp=sl([mp("to-view")],Cp);let Ap=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"from-view"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:xe(i):(""===s&&1===t.def.type&&(s=xe(i)),i=t.bindable.property),new pd(this.ep.parse(s,8),i,ys.fromView)}};Ap.inject=[lc,Vr],Ap=sl([mp("from-view")],Ap);let Ep=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"two-way"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:xe(i):(""===s&&1===t.def.type&&(s=xe(i)),i=t.bindable.property),new pd(this.ep.parse(s,8),i,ys.twoWay)}};Ep.inject=[lc,Vr],Ep=sl([mp("two-way")],Ep);let Tp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"bind"}build(t){var e;const n=t.attr,i=t.bindable;let s,r,o=n.target,a=n.rawValue;return null==i?(r=this.m.isTwoWay(t.node,o)?ys.twoWay:ys.toView,o=null!==(e=this.m.map(t.node,o))&&void 0!==e?e:xe(o)):(""===a&&1===t.def.type&&(a=xe(o)),s=t.def.defaultBindingMode,r=i.mode===ys.default||null==i.mode?null==s||s===ys.default?ys.toView:s:i.mode,o=i.property),new pd(this.ep.parse(a,8),o,r)}};Tp.inject=[lc,Vr],Tp=sl([mp("bind")],Tp);let $p=class{constructor(t){this.type=0,this.ep=t}get name(){return"call"}build(t){const e=null===t.bindable?xe(t.attr.target):t.bindable.property;return new gd(this.ep.parse(t.attr.rawValue,12),e)}};$p.inject=[Vr],$p=sl([mp("call")],$p);let Ip=class{constructor(t){this.type=0,this.ep=t}get name(){return"for"}build(t){const e=null===t.bindable?xe(t.attr.target):t.bindable.property;return new fd(this.ep.parse(t.attr.rawValue,2),e)}};Ip.inject=[Vr],Ip=sl([mp("for")],Ip);let Op=class{constructor(t){this.type=1,this.ep=t}get name(){return"trigger"}build(t){return new Cd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!0,xs.none)}};Op.inject=[Vr],Op=sl([mp("trigger")],Op);let Rp=class{constructor(t){this.type=1,this.ep=t}get name(){return"delegate"}build(t){return new Cd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,xs.bubbling)}};Rp.inject=[Vr],Rp=sl([mp("delegate")],Rp);let Pp=class{constructor(t){this.type=1,this.ep=t}get name(){return"capture"}build(t){return new Cd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,xs.capturing)}};Pp.inject=[Vr],Pp=sl([mp("capture")],Pp);let Lp=class{constructor(t){this.type=1,this.ep=t}get name(){return"attr"}build(t){return new $d(t.attr.target,this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Lp.inject=[Vr],Lp=sl([mp("attr")],Lp);let Mp=class{constructor(t){this.type=1,this.ep=t}get name(){return"style"}build(t){return new $d("style",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Mp.inject=[Vr],Mp=sl([mp("style")],Mp);let jp=class{constructor(t){this.type=1,this.ep=t}get name(){return"class"}build(t){return new $d("class",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};jp.inject=[Vr],jp=sl([mp("class")],jp);let Up=class{constructor(t){this.type=1,this.ep=t}get name(){return"ref"}build(t){return new vd(this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Up.inject=[Vr],Up=sl([mp("ref")],Up);let Np=class{constructor(){this.type=1}get name(){return"...$attrs"}build(t){return new Id}};Np=sl([mp("...$attrs")],Np);const Bp=Xe.createInterface("ITemplateElementFactory",(t=>t.singleton(Vp))),Fp={};class Vp{constructor(t){this.p=t,this.si=t.document.createElement("template")}createTemplate(t){var e;if(kl(t)){let e=Fp[t];if(void 0===e){const n=this.si;n.innerHTML=t;const i=n.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.si=this.p.document.createElement("template"),e=n):(n.content.removeChild(i),e=i),Fp[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.p.document.createElement("template");return e.content.appendChild(t),e}return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.cloneNode(!0)}}Vp.inject=[rc];class Dp{constructor(t,e,n,i,s,r){this.hasSlot=!1,this.Ci=vl();const o=null!==i;this.c=e,this.root=null===s?this:s,this.def=t,this.ci=n,this.parent=i,this.ni=o?i.ni:e.get(Bp),this.di=o?i.di:e.get(Wl),this.ep=o?i.ep:e.get(Vr),this.m=o?i.m:e.get(lc),this.Ut=o?i.Ut:e.get(qn),this.p=o?i.p:e.get(rc),this.localEls=o?i.localEls:new Set,this.rows=null!=r?r:[]}ki(t){var e,n;(null!==(e=(n=this.root).deps)&&void 0!==e?e:n.deps=[]).push(t),this.root.c.register(t)}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}hi(t){return this.c.find(Sh,t)}ui(t){return this.c.find(rh,t)}xi(t){return new Dp(this.def,this.c,this.ci,this,this.root,t)}ai(t){if(this.root!==this)return this.root.ai(t);const e=t.command;if(null===e)return null;let n=this.Ci[e];if(void 0===n){if(n=this.c.create(kp,e),null===n)throw new Error(`AUR0713:${e}`);this.Ci[e]=n}return n}}function zp(t){const e=t.length;let n=0,i=0;for(;e>i;){if(n=t.charCodeAt(i),92===n)++i;else{if(58===n)return!0;if(36===n&&123===t.charCodeAt(i+1))return!1}++i}return!1}function qp(){Wp.node=Wp.attr=Wp.bindable=Wp.def=null}const Hp={projections:null},Zp={name:"unnamed"},Wp={node:null,attr:null,bindable:null,def:null},Kp=Object.assign(vl(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),_p={checkbox:1,radio:1},Qp=new WeakMap;class Gp{constructor(t,e,n){this.attrs=t,this.bindables=e,this.primary=n}static from(t,e){let n=Qp.get(t);if(null==n){const i=t.bindables,s=vl(),r=e?void 0===t.defaultBindingMode?ys.default:t.defaultBindingMode:ys.default;let o,a,l,c,h=!1;for(a in i){if(o=i[a],c=o.attribute,!0===o.primary){if(h)throw new Error(`AUR0714:${t.name}`);h=!0,l=o}else h||null!=l||(l=o);s[c]=Il.create(a,t.Type,o)}null==o&&e&&(l=s.value=Il.create("value",t.Type,{mode:r})),Qp.set(t,n=new Gp(s,i,l))}return n}}var Xp;!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(Xp||(Xp={}));const Yp=Object.freeze(["property","attribute","mode"]),Jp="as-custom-element";function tf(t,e){const n=t.getAttribute(Jp);if(null===n||""===n)throw new Error("AUR0715");if(e.has(n))throw new Error(`AUR0716:${n}`);return e.add(n),t.removeAttribute(Jp),n}function ef(t){switch(t.getAttribute("mode")){case"oneTime":return ys.oneTime;case"toView":return ys.toView;case"fromView":return ys.fromView;case"twoWay":return ys.twoWay;default:return ys.default}}const nf=Xe.createInterface("ITemplateCompilerHooks"),sf=new WeakMap,rf=dl("compiler-hooks");Object.freeze({name:rf,define(t){let e=sf.get(t);return void 0===e&&(sf.set(t,e=new of(t)),ll(rf,e,t),pl(t,rf)),t}});class of{constructor(t){this.Type=t}get name(){return""}register(t){t.register(Tn.singleton(nf,this.Type))}}const af=Sh.generateName,lf="default",cf="au-slot";class hf{constructor(t){this.mode=t,this.Ai=new Map}bind(t,e,n){this.Ai.set(n,n.mode),n.mode=this.mode}unbind(t,e,n){n.mode=this.Ai.get(n),this.Ai.delete(n)}}class uf extends hf{constructor(){super(ys.oneTime)}}class df extends hf{constructor(){super(ys.toView)}}class pf extends hf{constructor(){super(ys.fromView)}}class ff extends hf{constructor(){super(ys.twoWay)}}$i("oneTime")(uf),$i("toView")(df),$i("fromView")(pf),$i("twoWay")(ff);class gf extends Ri{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(jn).taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(t,e,n)}updateSource(t,e){this.queueTask((()=>this.binding.updateSource(t,e)))}queueTask(t){const e=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,t())),this.opts),null==e||e.cancel()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.binding.$unbind(t)}}$i("debounce")(gf);class vf{constructor(t){this.Yt=new Map,this.Ri=t}bind(t,e,n,...i){if(!("handleChange"in n))throw new Error("AUR0817");if(0===i.length)throw new Error("AUR0818");let s;for(s of(this.Yt.set(n,i),i))this.Ri.addSignalListener(s,n)}unbind(t,e,n){const i=this.Yt.get(n);let s;for(s of(this.Yt.delete(n),i))this.Ri.removeSignalListener(s,n)}}vf.inject=[Ai],$i("signal")(vf);class mf extends Ri{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.p=t.locator.get(jn),this.Si=this.p.taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.Ei((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.p.performanceNow()),this.binding.handleChange(t,e,n)}updateSource(t,e){this.Ei((()=>this.binding.updateSource(t,e)))}Ei(t){const e=this.opts,n=this.p,i=this.lastCall+e.delay-n.performanceNow();if(i>0){const s=this.task;e.delay=i,this.task=this.Si.queueTask((()=>{this.lastCall=n.performanceNow(),this.task=null,e.delay=this.delay,t()}),e),null==s||s.cancel()}else this.lastCall=n.performanceNow(),t()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=this.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,super.$unbind(t)}}$i("throttle")(mf);const yf=new class{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,n,i){null==t?n.removeAttribute(i):n.setAttribute(i,t)}};class bf{bind(t,e,n){n.targetObserver=yf}unbind(t,e,n){}}function wf(t){const e=t.composedPath()[0];if(this.target===e)return this.selfEventCallSource(t)}$i("attr")(bf);class xf{bind(t,e,n){if(!n.callSource||!n.targetEvent)throw new Error("AUR0801");n.selfEventCallSource=n.callSource,n.callSource=wf}unbind(t,e,n){n.callSource=n.selfEventCallSource,n.selfEventCallSource=null}}$i("self")(xf);const kf=vl();class Sf{constructor(t){this.ns=t,this.type=6}static forNs(t){var e;return null!==(e=kf[t])&&void 0!==e?e:kf[t]=new Sf(t)}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,n,i){null==t?n.removeAttributeNS(this.ns,i):n.setAttributeNS(this.ns,i,t)}}function Cf(t,e){return t===e}class Af{constructor(t,e,n,i){this.handler=n,this.type=7,this.v=void 0,this.ov=void 0,this.Bi=void 0,this.Ii=void 0,this.f=0,this.o=t,this.oL=i}getValue(){return this.v}setValue(t,e){const n=this.v;t!==n&&(this.v=t,this.ov=n,this.f=e,this.Ti(),this.Di(),this.queue.add(this))}handleCollectionChange(t,e){this.Di()}handleChange(t,e,n){this.Di()}Di(){const t=this.v,e=this.o,n=ml.call(e,"model")?e.model:e.value,i="radio"===e.type,s=void 0!==e.matcher?e.matcher:Cf;if(i)e.checked=!!s(t,n);else if(!0===t)e.checked=!0;else{let i=!1;if(t instanceof Array)i=-1!==t.findIndex((t=>!!s(t,n)));else if(t instanceof Set){for(const e of t)if(s(e,n)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(s(t,n)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.o,n=ml.call(e,"model")?e.model:e.value,i=e.checked,s=void 0!==e.matcher?e.matcher:Cf;if("checkbox"===e.type){if(t instanceof Array){const e=t.findIndex((t=>!!s(t,n)));return void(i&&-1===e?t.push(n):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===s(e,n)){r=e;break}return void(i&&r===e?t.add(n):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===s(t,n)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=n}this.v=t,this.queue.add(this)}start(){this.handler.subscribe(this.o,this),this.Ti()}stop(){var t,e;this.handler.dispose(),null===(t=this.Bi)||void 0===t||t.unsubscribe(this),this.Bi=void 0,null===(e=this.Ii)||void 0===e||e.unsubscribe(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.start()}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.stop()}flush(){Ef=this.ov,this.ov=this.v,this.subs.notify(this.v,Ef,this.f)}Ti(){var t,e,n,i,s,r,o;const a=this.o;null===(s=null!==(t=this.Ii)&&void 0!==t?t:this.Ii=null!==(n=null===(e=a.$observers)||void 0===e?void 0:e.model)&&void 0!==n?n:null===(i=a.$observers)||void 0===i?void 0:i.value)||void 0===s||s.subscribe(this),null===(r=this.Bi)||void 0===r||r.unsubscribe(this),this.Bi=void 0,"checkbox"===a.type&&(null===(o=this.Bi=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))||void 0===o||o.subscribe(this))}}let Ef;As(Af),Rs(Af);const Tf={childList:!0,subtree:!0,characterData:!0};function $f(t,e){return t===e}class If{constructor(t,e,n,i){this.type=7,this.v=void 0,this.ov=void 0,this.H=!1,this.Pi=void 0,this.$i=void 0,this.iO=!1,this.o=t,this.oL=i,this.handler=n}getValue(){return this.iO?this.v:this.o.multiple?function(t){const e=[];if(0===t.length)return e;const n=t.length;let i,s=0;for(;n>s;)i=t[s],i.selected&&(e[e.length]=ml.call(i,"model")?i.model:i.value),++s;return e}(this.o.options):this.o.value}setValue(t,e){this.ov=this.v,this.v=t,this.H=t!==this.ov,this.Oi(t instanceof Array?t:null),0==(64&e)&&this.K()}K(){this.H&&(this.H=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var t;const e=this.v,n=this.o,i=Array.isArray(e),s=null!==(t=n.matcher)&&void 0!==t?t:$f,r=n.options;let o=r.length;for(;o-- >0;){const t=r[o],n=ml.call(t,"model")?t.model:t.value;t.selected=i?-1!==e.findIndex((t=>!!s(n,t))):!!s(n,e)}}syncValue(){const t=this.o,e=t.options,n=e.length,i=this.v;let s=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||$f,a=[];for(;s<n;)r=e[s],r.selected&&a.push(ml.call(r,"model")?r.model:r.value),++s;let l;for(s=0;s<i.length;)l=i[s],-1===a.findIndex((t=>!!o(l,t)))?i.splice(s,1):++s;for(s=0;s<a.length;)l=a[s],-1===i.findIndex((t=>!!o(l,t)))&&i.push(l),++s;return!1}let r,o=null;for(;s<n;){if(r=e[s],r.selected){o=ml.call(r,"model")?r.model:r.value;break}++s}return this.ov=this.v,this.v=o,!0}Li(){(this.$i=new this.o.ownerDocument.defaultView.MutationObserver(this.qi.bind(this))).observe(this.o,Tf),this.Oi(this.v instanceof Array?this.v:null),this.iO=!0}Ui(){var t;this.$i.disconnect(),null===(t=this.Pi)||void 0===t||t.unsubscribe(this),this.$i=this.Pi=void 0,this.iO=!1}Oi(t){var e;if(null===(e=this.Pi)||void 0===e||e.unsubscribe(this),this.Pi=void 0,null!=t){if(!this.o.multiple)throw new Error("AUR0654");(this.Pi=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}qi(t){this.syncOptions(),this.syncValue()&&this.queue.add(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.Li())}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.handler.dispose(),this.Ui())}flush(){Of=this.ov,this.ov=this.v,this.subs.notify(this.v,Of,0)}}let Of,Rf;As(If),Rs(If);class Pf{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.styles={},this.version=0,this.H=!1}getValue(){return this.obj.style.cssText}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}_i(t){const e=[],n=/url\([^)]+$/;let i,s,r,o,a=0,l="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),l+=t.substring(a,i),a=i+1,n.test(l)?l+=";":(s=l.indexOf(":"),r=l.substring(0,s).trim(),o=l.substring(s+1).trim(),e.push([r,o]),l="");return e}Fi(t){let e,n;const i=[];for(n in t)if(e=t[n],null!=e)if(kl(e)){if(n.startsWith("--")){i.push([n,e]);continue}i.push([Se(n),e])}else i.push(...this.Vi(e));return i}Mi(t){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...this.Vi(t[i]));return n}return Pn}Vi(t){return kl(t)?this._i(t):t instanceof Array?this.Mi(t):t instanceof Object?this.Fi(t):Pn}K(){if(this.H){this.H=!1;const t=this.value,e=this.styles,n=this.Vi(t);let i,s,r,o,a=this.version;this.ov=t;let l=0;const c=n.length;for(;l<c;++l)s=n[l],r=s[0],o=s[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)ml.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let n="";null!=e&&xl(e.indexOf)&&e.includes("!important")&&(n="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,n)}bind(t){this.value=this.ov=this.obj.style.cssText}}class Lf{constructor(t,e,n){this.handler=n,this.type=7,this.v="",this.ov="",this.H=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.H=!0,this.handler.config.readonly||0!=(64&e)||this.K(e))}K(t){var e;this.H&&(this.H=!1,this.o[this.k]=null!==(e=this.v)&&void 0!==e?e:this.handler.config.default,0==(2&t)&&this.queue.add(this))}handleEvent(){this.ov=this.v,this.v=this.o[this.k],this.ov!==this.v&&(this.H=!1,this.queue.add(this))}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.v=this.ov=this.o[this.k])}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.handler.dispose()}flush(){Rf=this.ov,this.ov=this.v,this.subs.notify(this.v,Rf,0)}}As(Lf),Rs(Lf);const Mf="http://www.w3.org/1999/xlink",jf="http://www.w3.org/XML/1998/namespace",Uf="http://www.w3.org/2000/xmlns/",Nf=Object.assign(vl(),{"xlink:actuate":["actuate",Mf],"xlink:arcrole":["arcrole",Mf],"xlink:href":["href",Mf],"xlink:role":["role",Mf],"xlink:show":["show",Mf],"xlink:title":["title",Mf],"xlink:type":["type",Mf],"xml:lang":["lang",jf],"xml:space":["space",jf],xmlns:["xmlns",Uf],"xmlns:xlink":["xlink",Uf]}),Bf=new Ta;Bf.type=6;class Ff{constructor(t){var e;this.type=null!==(e=t.type)&&void 0!==e?e:Lf,this.events=t.events,this.readonly=t.readonly,this.default=t.default}}class Vf{constructor(t,e,n,i){this.locator=t,this.platform=e,this.dirtyChecker=n,this.svgAnalyzer=i,this.allowDirtyCheck=!0,this.ji=vl(),this.Ni=vl(),this.Wi=vl(),this.Hi=vl();const s=["change","input"],r={events:s,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:s,default:0},checked:{type:Af,events:s},files:{events:s,readonly:!0}},SELECT:{value:{type:If,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){Tn.aliasTo(La,Vf).register(t),Tn.singleton(La,Vf).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,n){var i,s;const r=this.ji;let o;if(kl(t))o=null!==(i=r[t])&&void 0!==i?i:r[t]=vl(),null==o[e]?o[e]=new Ff(n):Df(t,e);else for(const n in t){o=null!==(s=r[n])&&void 0!==s?s:r[n]=vl();const i=t[n];for(e in i)null==o[e]?o[e]=new Ff(i[e]):Df(n,e)}}useConfigGlobal(t,e){const n=this.Ni;if("object"==typeof t)for(const e in t)null==n[e]?n[e]=new Ff(t[e]):Df("*",e);else null==n[t]?n[t]=new Ff(e):Df("*",t)}getAccessor(t,e,n){var i;if(e in this.Hi||e in(null!==(i=this.Wi[t.tagName])&&void 0!==i?i:Ln))return this.getObserver(t,e,n);switch(e){case"src":case"href":case"role":return yf;default:{const n=Nf[e];return void 0!==n?Sf.forNs(n[1]):bl(t,e,this.svgAnalyzer)?yf:Bf}}}overrideAccessor(t,e){var n,i,s,r;let o;if(kl(t))o=null!==(n=(s=this.Wi)[t])&&void 0!==n?n:s[t]=vl(),o[e]=!0;else for(const e in t)for(const n of t[e])o=null!==(i=(r=this.Wi)[e])&&void 0!==i?i:r[e]=vl(),o[n]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Hi[e]=!0}getObserver(t,e,n){var i,s;switch(e){case"role":return yf;case"class":return new Ch(t);case"css":case"style":return new Pf(t)}const r=null!==(s=null===(i=this.ji[t.tagName])||void 0===i?void 0:i[e])&&void 0!==s?s:this.Ni[e];if(null!=r)return new r.type(t,e,new sd(r),n,this.locator);const o=Nf[e];if(void 0!==o)return Sf.forNs(o[1]);if(bl(t,e,this.svgAnalyzer))return yf;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw new Error(`AUR0652:${String(e)}`)}return new Ia(t,e)}}function Df(t,e){throw new Error(`AUR0653:${String(e)}@${t}`)}Vf.inject=[en,rc,xa,oc];class zf{constructor(t){this.oL=t}bind(t,e,n,...i){if(0===i.length)throw new Error("AUR0802");if(n.mode!==ys.twoWay&&n.mode!==ys.fromView)throw new Error("AUR0803");const s=this.oL.getObserver(n.target,n.targetProperty);if(!s.handler)throw new Error("AUR0804");n.targetObserver=s;const r=s.handler;s.originalHandler=r,s.handler=new sd(new Ff({default:r.config.default,events:i,readonly:r.config.readonly}))}unbind(t,e,n){n.targetObserver.handler.dispose(),n.targetObserver.handler=n.targetObserver.originalHandler,n.targetObserver.originalHandler=null}}zf.inject=[Pa],$i("updateTrigger")(zf);class qf{constructor(t,e){this.zi=t,this.p=e,this.Gi=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Xi():this.Gi=!0}attached(){this.Gi&&(this.Gi=!1,this.Xi()),this.zi.addEventListener("focus",this),this.zi.addEventListener("blur",this)}afterDetachChildren(){const t=this.zi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Ki||(this.value=!1)}Xi(){const t=this.zi,e=this.Ki,n=this.value;n&&!e?t.focus():!n&&e&&t.blur()}get Ki(){return this.zi===this.p.document.activeElement}}qf.inject=[Vu,rc],sl([Al({mode:ys.twoWay})],qf.prototype,"value",void 0),Jc("focus")(qf);let Hf=class{constructor(t,e,n){this.el=t,this.p=e,this.Yi=!1,this.Zi=null,this.$val="",this.$prio="",this.update=()=>{this.Zi=null,Boolean(this.value)!==this.Ji&&(this.Ji===this.Qi?(this.Ji=!this.Qi,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Ji=this.Qi,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.Ji=this.Qi="hide"!==n.alias}binding(){this.Yi=!0,this.update()}detaching(){var t;this.Yi=!1,null===(t=this.Zi)||void 0===t||t.cancel(),this.Zi=null}valueChanged(){this.Yi&&null===this.Zi&&(this.Zi=this.p.domWriteQueue.queueTask(this.update))}};sl([Al],Hf.prototype,"value",void 0),Hf=sl([rl(0,Vu),rl(1,rc),rl(2,hd)],Hf),function(...t){return function(e){const n=yi("aliases"),i=gi(n,e);void 0===i?mi(n,t,e):i.push(...t)}}("hide")(Hf),Jc("show")(Hf);class Zf{constructor(t,e,n){this.id=Ee("au$component"),this.strict=!1,this.p=n,this.te=n.document.createElement("div"),this.view=t.create(),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)Hu.set(t,e);else{const n=t.childNodes;for(let t=0,i=n.length;t<i;++t)Hu.set(n[t],e)}}(this.view.nodes,e)}attaching(t,e,n){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const i=this.te=this.ie();return this.view.setHost(i),this.ee(t,i,n)}detaching(t,e,n){return this.se(t,this.te,n)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.te,n=this.te=this.ie();if(e===n)return;this.view.setHost(n);const i=Me(this.se(null,n,t.flags),(()=>this.ee(null,n,t.flags)));i instanceof Promise&&i.catch((t=>{throw t}))}ee(t,e,n){const{activating:i,callbackContext:s,view:r}=this;return r.setHost(e),Me(null==i?void 0:i.call(s,e,r),(()=>this.ne(t,e,n)))}ne(t,e,n){const{$controller:i,view:s}=this;return null!==t?Me(s.activate(null!=t?t:s,i,n,i.scope),(()=>this.re(e))):(s.nodes.appendTo(e),this.re(e))}re(t){const{activated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}se(t,e,n){const{deactivating:i,callbackContext:s,view:r}=this;return Me(null==i?void 0:i.call(s,e,r),(()=>this.oe(t,e,n)))}oe(t,e,n){const{$controller:i,view:s}=this;return null!==t?Me(s.deactivate(t,i,n),(()=>this.le(e))):(s.nodes.remove(),this.le(e))}le(t){const{deactivated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}ie(){const t=this.p,e=t.document;let n=this.target,i=this.renderContext;if(""===n){if(this.strict)throw new Error("AUR0811");return e.body}if(kl(n)){let s=e;kl(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(s=i),n=s.querySelector(n)}if(n instanceof t.Node)return n;if(null==n){if(this.strict)throw new Error("AUR0812");return e.body}return n}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Zf.inject=[Wh,zu,rc],sl([Al({primary:!0})],Zf.prototype,"target",void 0),sl([Al({callback:"targetChanged"})],Zf.prototype,"renderContext",void 0),sl([Al()],Zf.prototype,"strict",void 0),sl([Al()],Zf.prototype,"deactivating",void 0),sl([Al()],Zf.prototype,"activating",void 0),sl([Al()],Zf.prototype,"deactivated",void 0),sl([Al()],Zf.prototype,"activated",void 0),sl([Al()],Zf.prototype,"callbackContext",void 0),th("portal")(Zf);class Wf extends class{constructor(t,e,n){this.fs=n,this.id=Ee("au$component"),this.view=t.create().setLocation(e)}attaching(t,e,n){const{$controller:i}=this;return this.view.activate(t,i,n|this.fs,i.scope)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}{constructor(t,e){super(t,e,32)}}Wf.inject=[Wh,zu],th("observe-shallow")(Wf);class Kf{constructor(t,e,n){this.ifFactory=t,this.location=e,this.work=n,this.id=Ee("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.he=!1,this.ae=0}attaching(t,e,n){let i;const s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;return Me(this.pending,(()=>{var e;o()&&(this.pending=void 0,i=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=i&&(i.setLocation(this.location),this.pending=Me(i.activate(t,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e,n){return this.he=!0,Me(this.pending,(()=>{var e;this.he=!1,this.pending=void 0,null===(e=this.view)||void 0===e||e.deactivate(t,this.$controller,n)}))}valueChanged(t,e,n){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;this.work.start();const i=this.view,s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;let a;return Me(Me(this.pending,(()=>this.pending=Me(null==i?void 0:i.deactivate(i,s,n),(()=>{var e;if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=a))return a.setLocation(this.location),Me(a.activate(a,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var t,e;null===(t=this.ifView)||void 0===t||t.dispose(),null===(e=this.elseView)||void 0===e||e.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Kf.inject=[Wh,zu,Mu],sl([Al],Kf.prototype,"value",void 0),sl([Al({set:t=>""===t||!!t&&"false"!==t})],Kf.prototype,"cache",void 0),th("if")(Kf);class _f{constructor(t){this.factory=t,this.id=Ee("au$component")}link(t,e,n,i){const s=t.children,r=s[s.length-1];if(r instanceof Kf)r.elseFactory=this.factory;else{if(!(r.viewModel instanceof Kf))throw new Error("AUR0810");r.viewModel.elseFactory=this.factory}}}function Qf(t){t.dispose()}_f.inject=[Wh],th({name:"else"})(_f);const Gf=[38962,36913];class Xf{constructor(t,e,n){this.l=t,this.ce=e,this.f=n,this.id=Ee("au$component"),this.views=[],this.key=void 0,this.ue=void 0,this.fe=!1,this.de=!1,this.me=null,this.ve=void 0,this.ge=!1}binding(t,e,n){const i=this.ce.bindings,s=i.length;let r,o,a=0;for(;s>a;++a)if(r=i[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.sourceExpression,this.pe=r;let t=o.iterable;for(;null!=t&&Gf.includes(t.$kind);)t=t.expression,this.fe=!0;this.me=t;break}this.we(n);const l=o.declaration;(this.ge=90137===l.$kind||106521===l.$kind)||(this.local=l.evaluate(n,this.$controller.scope,r.locator,null))}attaching(t,e,n){return this.be(n),this.xe(t,n)}detaching(t,e,n){return this.we(n),this.ye(t,n)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.we(t),this.be(t);const n=Me(this.ye(null,t),(()=>this.xe(null,t)));n instanceof Promise&&n.catch(Cl)}handleCollectionChange(t,e){const{$controller:n}=this;if(n.isActive){if(this.fe){if(this.de)return;return this.de=!0,this.items=this.forOf.iterable.evaluate(e,n.scope,this.pe.locator,null),void(this.de=!1)}if(e|=n.flags,this.be(e),void 0===t){const t=Me(this.ye(null,e),(()=>this.xe(null,e)));t instanceof Promise&&t.catch(Cl)}else{const n=this.views.length,i=function(t){let e=0,n=0,i=0;const s=function(t){const e=t.slice();return e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t),r=s.length;for(;i<r;++i){for(;s.deletedItems[n]<=i-e;)++n,--e;-2===s[i]?++e:s[i]+=e}return s}(t);if(i.deletedItems.length>0){i.deletedItems.sort(Te);const t=Me(this.ke(i,e),(()=>this.Ce(n,i,e)));t instanceof Promise&&t.catch(Cl)}else this.Ce(n,i,e)}}}we(t){var e;const n=this.$controller.scope;let i=this.Ae,s=this.fe;s&&(i=this.Ae=null!==(e=this.me.evaluate(t,n,this.pe.locator,null))&&void 0!==e?e:null,s=this.fe=!Object.is(this.items,i));const r=this.ue;if(4&t)void 0!==r&&r.unsubscribe(this);else if(this.$controller.isActive){const t=this.ue=function(t){let e;return t instanceof Array?e=or(t):t instanceof Map?e=$r(t):t instanceof Set&&(e=mr(t)),e}(s?i:this.items);r!==t&&r&&r.unsubscribe(this),t&&t.subscribe(this)}}be(t){const e=this.items;if(e instanceof Array)return void(this.ve=e);if(void 0===this.forOf)return;const n=[];this.forOf.iterate(t,e,((t,e,i)=>{n[e]=i})),this.ve=n}xe(t,e){let n,i,s,r;const{$controller:o,f:a,local:l,l:c,items:h}=this,u=o.scope,d=this.forOf,p=d.count(e,h),f=this.views=Array(p);if(d.iterate(e,h,((h,g,v)=>{s=f[g]=a.create().setLocation(c),s.nodes.unlink(),this.ge?d.declaration.assign(e,r=Si.fromParent(u,ki.create()),this.pe.locator,v):r=Si.fromParent(u,ki.create(l,v)),eg(r.overrideContext,g,p),i=s.activate(null!=t?t:s,o,e,r),i instanceof Promise&&(null!=n?n:n=[]).push(i)})),void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ye(t,e){let n,i,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),i=s.deactivate(null!=t?t:s,a,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ke(t,e){let n,i,s;const{$controller:r,views:o}=this,a=t.deletedItems,l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),i=s.deactivate(s,r,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);c=0;let h=0;for(;l>c;++c)h=a[c]-c,o.splice(h,1);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}Ce(t,e,n){var i;let s,r,o,a,l=0;const{$controller:c,f:h,local:u,ve:d,l:p,views:f}=this,g=e.length;for(;g>l;++l)-2===e[l]&&(o=h.create(),f.splice(l,0,o));if(f.length!==g)throw new Error(`AUR0814:${f.length}!=${g}`);const v=c.scope,m=e.length;!function(t,e){const n=t.slice(),i=e.length;let s=0,r=0;for(;s<i;)r=e[s],-2!==r&&(t[s]=n[r]),++s}(f,e);const y=function(t){const e=t.length;e>Yf&&(Yf=e,Jf=new Int32Array(e),tg=new Int32Array(e));let n=0,i=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=Jf[n],s=t[o],-2!==s&&s<i){tg[r]=o,Jf[++n]=r;continue}for(a=0,l=n;a<l;)c=a+l>>1,s=t[Jf[c]],-2!==s&&s<i?a=c+1:l=c;s=t[Jf[a]],(i<s||-2===s)&&(a>0&&(tg[r]=Jf[a-1]),Jf[a]=r)}r=++n;const h=new Int32Array(r);for(i=Jf[n-1];n-- >0;)h[n]=i,i=tg[i];for(;r-- >0;)Jf[r]=0;return h}(e),b=y.length;let w,x=b-1;for(l=m-1;l>=0;--l)o=f[l],w=f[l+1],o.nodes.link(null!==(i=null==w?void 0:w.nodes)&&void 0!==i?i:p),-2===e[l]?(this.ge?this.forOf.declaration.assign(n,a=Si.fromParent(v,ki.create()),this.pe.locator,d[l]):a=Si.fromParent(v,ki.create(u,d[l])),eg(a.overrideContext,l,m),o.setLocation(p),r=o.activate(o,c,n,a),r instanceof Promise&&(null!=s?s:s=[]).push(r)):x<0||1===b||l!==y[x]?(eg(o.scope.overrideContext,l,m),o.nodes.insertBefore(o.location)):(t!==m&&eg(o.scope.overrideContext,l,m),--x);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(Qf),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}Xf.inject=[zu,mu,Wh],sl([Al],Xf.prototype,"items",void 0),th("repeat")(Xf);let Yf=16,Jf=new Int32Array(Yf),tg=new Int32Array(Yf);function eg(t,e,n){const i=0===e,s=e===n-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=s,t.$middle=!i&&!s,t.$even=r,t.$odd=!r,t.$length=n}class ng{constructor(t,e){this.id=Ee("au$component"),this.id=Ee("au$component"),this.view=t.create().setLocation(e)}valueChanged(t,e,n){const i=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(i.isActive&&null!=s)for(r=Si.fromParent(i.scope,void 0===t?{}:t),a=s.length;a>o;++o)s[o].$bind(2,r)}attaching(t,e,n){const{$controller:i,value:s}=this,r=Si.fromParent(i.scope,void 0===s?{}:s);return this.view.activate(t,i,n,r)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}ng.inject=[Wh,zu],sl([Al],ng.prototype,"value",void 0),th("with")(ng);let ig=class{constructor(t,e){this.f=t,this.l=e,this.id=Ee("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return this.queue((()=>i.activate(t,s,n,s.scope))),this.queue((()=>this.swap(t,n,this.value))),this.promise}detaching(t,e,n){return this.queue((()=>this.view.deactivate(t,this.$controller,n))),this.promise}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}valueChanged(t,e,n){this.$controller.isActive&&this.queue((()=>this.swap(null,n,this.value)))}caseChanged(t,e){this.queue((()=>this.Re(t,e)))}Re(t,e){const n=t.isMatch(this.value,e),i=this.activeCases,s=i.length;if(!n)return s>0&&i[0].id===t.id?this.Se(null,e):void 0;if(s>0&&i[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,n=e.indexOf(t);for(let t=n,i=e.length;t<i&&o;t++){const n=e[t];r.push(n),o=n.fallThrough}}else r.push(t);return Me(this.Se(null,e,r),(()=>(this.activeCases=r,this.Ee(null,e))))}swap(t,e,n){const i=[];let s=!1;for(const t of this.cases)if((s||t.isMatch(n,e))&&(i.push(t),s=t.fallThrough),i.length>0&&!s)break;const r=this.defaultCase;return 0===i.length&&void 0!==r&&i.push(r),Me(this.activeCases.length>0?this.Se(t,e,i):void 0,(()=>{if(this.activeCases=i,0!==i.length)return this.Ee(t,e)}))}Ee(t,e){const n=this.$controller;if(!n.isActive)return;const i=this.activeCases,s=i.length;if(0===s)return;const r=n.scope;return 1===s?i[0].activate(t,e,r):je(...i.map((n=>n.activate(t,e,r))))}Se(t,e,n=[]){const i=this.activeCases,s=i.length;if(0!==s){if(1===s){const s=i[0];return n.includes(s)?void 0:(i.length=0,s.deactivate(t,e))}return Me(je(...i.reduce(((i,s)=>(n.includes(s)||i.push(s.deactivate(t,e)),i)),[])),(()=>{i.length=0}))}}queue(t){const e=this.promise;let n;n=this.promise=Me(Me(e,t),(()=>{this.promise===n&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};sl([Al],ig.prototype,"value",void 0),ig=sl([th("switch"),rl(0,Wh),rl(1,zu)],ig);let sg=class{constructor(t,e,n,i){this.f=t,this.Be=e,this.l=n,this.id=Ee("au$component"),this.fallThrough=!1,this.view=void 0,this.Ie=i.config.level<=1,this.Ut=i.scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,n,i){const s=t.parent,r=null==s?void 0:s.viewModel;if(!(r instanceof ig))throw new Error("AUR0815");this.$switch=r,this.linkToSwitch(r)}detaching(t,e,n){return this.deactivate(t,n)}isMatch(t,e){this.Ut.debug("isMatch()");const n=this.value;return Array.isArray(n)?(void 0===this.ue&&(this.ue=this.Te(e,n)),n.includes(t)):n===t}valueChanged(t,e,n){var i;Array.isArray(t)?(null===(i=this.ue)||void 0===i||i.unsubscribe(this),this.ue=this.Te(n,t)):void 0!==this.ue&&this.ue.unsubscribe(this),this.$switch.caseChanged(this,n)}handleCollectionChange(t,e){this.$switch.caseChanged(this,e)}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(null!=t?t:i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(null!=t?t:n,this.$controller,e)}dispose(){var t,e;null===(t=this.ue)||void 0===t||t.unsubscribe(this),null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Te(t,e){const n=this.Be.getArrayObserver(e);return n.subscribe(this),n}accept(t){var e;return!0===this.$controller.accept(t)||(null===(e=this.view)||void 0===e?void 0:e.accept(t))}};sg.inject=[Wh,Pa,zu,qn],sl([Al],sg.prototype,"value",void 0),sl([Al({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:ys.oneTime})],sg.prototype,"fallThrough",void 0),sg=sl([th("case")],sg);let rg=class extends sg{linkToSwitch(t){if(void 0!==t.defaultCase)throw new Error("AUR0816");t.defaultCase=this}};rg=sl([th("default-case")],rg);let og=class{constructor(t,e,n,i){this.f=t,this.l=e,this.p=n,this.id=Ee("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=i.scopeTo("promise.resolve")}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return Me(i.activate(t,s,n,this.viewScope=Si.fromParent(s.scope,{})),(()=>this.swap(t,n)))}valueChanged(t,e,n){this.$controller.isActive&&this.swap(null,n)}swap(t,e){var n,i;const s=this.value;if(!(s instanceof Promise))return void this.logger.warn(`The value '${String(s)}' is not a promise. No change will be done.`);const r=this.p.domWriteQueue,o=this.fulfilled,a=this.rejected,l=this.pending,c=this.viewScope;let h;const u={reusable:!1},d=()=>{je(h=(this.preSettledTask=r.queueTask((()=>je(null==o?void 0:o.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==l?void 0:l.activate(t,e,c))),u)).result.catch((t=>{if(!(t instanceof Za))throw t})),s.then((n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>je(null==l?void 0:l.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==o?void 0:o.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())}),(n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>je(null==l?void 0:l.deactivate(t,e),null==o?void 0:o.deactivate(t,e),null==a?void 0:a.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())})))};1===(null===(n=this.postSettledTask)||void 0===n?void 0:n.status)?this.postSettlePromise.then(d):(null===(i=this.postSettledTask)||void 0===i||i.cancel(),d())}detaching(t,e,n){var i,s;return null===(i=this.preSettledTask)||void 0===i||i.cancel(),null===(s=this.postSettledTask)||void 0===s||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};sl([Al],og.prototype,"value",void 0),og=sl([th("promise"),rl(0,Wh),rl(1,zu),rl(2,rc),rl(3,qn)],og);let ag=class{constructor(t,e){this.f=t,this.l=e,this.id=Ee("au$component"),this.view=void 0}link(t,e,n,i){hg(t).pending=this}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};sl([Al({mode:ys.toView})],ag.prototype,"value",void 0),ag=sl([th("pending"),rl(0,Wh),rl(1,zu)],ag);let lg=class{constructor(t,e){this.f=t,this.l=e,this.id=Ee("au$component"),this.view=void 0}link(t,e,n,i){hg(t).fulfilled=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};sl([Al({mode:ys.fromView})],lg.prototype,"value",void 0),lg=sl([th("then"),rl(0,Wh),rl(1,zu)],lg);let cg=class{constructor(t,e){this.f=t,this.l=e,this.id=Ee("au$component"),this.view=void 0}link(t,e,n,i){hg(t).rejected=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};function hg(t){const e=t.parent,n=null==e?void 0:e.viewModel;if(n instanceof og)return n;throw new Error("AUR0813")}sl([Al({mode:ys.fromView})],cg.prototype,"value",void 0),cg=sl([th("catch"),rl(0,Wh),rl(1,zu)],cg);let ug=class{"promise.resolve"(t,e,n){return new Hl(t,e,"promise","bind")}};ug=sl([_l({pattern:"promise.resolve",symbols:""})],ug);let dg=class{then(t,e,n){return new Hl(t,e,"then","from-view")}};dg=sl([_l({pattern:"then",symbols:""})],dg);let pg=class{catch(t,e,n){return new Hl(t,e,"catch","from-view")}};pg=sl([_l({pattern:"catch",symbols:""})],pg);class fg{constructor(t,e,n){this.node=t,this.instructions=e,this.De=n,this.Pe=void 0}get definition(){return void 0===this.Pe&&(this.Pe=dh.create({name:Sh.generateName(),template:this.node,needsCompile:kl(this.node),instructions:this.instructions,dependencies:this.De})),this.Pe}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return t.root.get(eu).getViewFactory(this.definition,t.createChild().register(...this.De))}mergeInto(t,e,n){t.appendChild(this.node),e.push(...this.instructions),n.push(...this.De)}}function gg(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const o=n[r];switch(typeof o){case"string":e.appendChild(t.document.createTextNode(o));break;case"object":o instanceof t.Node?e.appendChild(o):"mergeInto"in o&&o.mergeInto(e,i,s)}}}function vg(t,e){const n=e.to;return void 0!==n&&"subject"!==n&&"composing"!==n&&(t[n]=e),t}class mg{constructor(t,e,n,i){this.p=t,this.$e=e,this.Oe=n,this.r=i,this.id=Ee("au$component"),this.component=void 0,this.composing=!1,this.view=void 0,this.Le=void 0,this.qe=e.props.reduce(vg,{})}attaching(t,e,n){const{component:i,view:s}=this;return void 0===s||this.Le!==i?(this.Le=i,this.composing=!0,this.compose(void 0,i,t,n)):this.compose(s,i,t,n)}detaching(t,e,n){return this.oe(this.view,t,n)}componentChanged(t,e,n){const{$controller:i}=this;if(!i.isActive)return;if(this.Le===t)return;this.Le=t,this.composing=!0,n|=i.flags;const s=Me(this.oe(this.view,null,n),(()=>this.compose(void 0,t,null,n)));s instanceof Promise&&s.catch((t=>{throw t}))}compose(t,e,n,i){return Me(void 0===t?Me(e,(t=>this.Ue(t,i))):t,(t=>this.ne(this.view=t,n,i)))}oe(t,e,n){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,n)}ne(t,e,n){const{$controller:i}=this;return Me(null==t?void 0:t.activate(null!=e?e:t,i,n,i.scope),(()=>{this.composing=!1}))}Ue(t,e){const n=this._e(t,e);if(n)return n.setLocation(this.$controller.location),n.lockScope(this.$controller.scope),n}_e(t,e){if(!t)return;const n=this.Oe.controller.container;if("object"==typeof t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(n);if("create"in t)return t.create();if("template"in t)return this.r.getViewFactory(dh.getOrCreate(t),n).create()}if(kl(t)){const e=n.find(Sh,t);if(null==e)throw new Error(`AUR0809:${t}`);t=e.Type}return function(t,e,n,i){if(kl(e))return function(t,e,n,i){const s=[],r=[],o=[],a=t.document.createElement(e);let l=!1;return n&&Object.keys(n).forEach((t=>{const e=n[t];ud(e)?(l=!0,s.push(e)):a.setAttribute(t,e)})),l&&(a.className="au",r.push(s)),i&&gg(t,a,i,r,o),new fg(a,r,o)}(t,e,n,i);if(Sh.isType(e))return function(t,e,n,i){const s=Sh.getDefinition(e),r=[],o=[r],a=[],l=[],c=s.bindables,h=t.document.createElement(s.name);return h.className="au",a.includes(e)||a.push(e),r.push(new yd(s,void 0,l,null,!1,void 0)),n&&Object.keys(n).forEach((t=>{const e=n[t];ud(e)?l.push(e):void 0===c[t]?l.push(new Ad(e,t)):l.push(new md(e,t))})),i&&gg(t,h,i,o,a),new fg(h,o,a)}(t,e,n,i);throw new Error("Invalid Tag or Type.")}(this.p,t,this.qe,this.$controller.host.childNodes).createView(n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}mg.inject=[rc,hd,yu,eu],sl([Al],mg.prototype,"component",void 0),sl([Al({mode:ys.fromView})],mg.prototype,"composing",void 0),ch({name:"au-render",template:null,containerless:!0,capture:!0})(mg);class yg{constructor(t,e,n,i,s,r,o){this.c=t,this.parent=e,this.host=n,this.l=i,this.p=s,this.scopeBehavior="auto",this.Fe=void 0,this.r=t.get(eu),this.$e=r,this.Ve=o}static get inject(){return[tn,mu,Vu,zu,rc,hd,rn(wg)]}get pending(){return this.Me}get composition(){return this.Fe}attaching(t,e,n){return this.Me=Me(this.queue(new xg(this.view,this.viewModel,this.model,void 0),t),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)}))}detaching(t){const e=this.Fe,n=this.Me;return this.Ve.invalidate(),this.Fe=this.Me=void 0,Me(n,(()=>null==e?void 0:e.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Fe?this.Me=Me(this.Me,(()=>Me(this.queue(new xg(this.view,this.viewModel,this.model,t),void 0),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)})))):this.Fe.update(this.model)}queue(t,e){const n=this.Ve,i=this.Fe;return Me(n.create(t),(t=>n.isCurrent(t)?Me(this.compose(t),(s=>n.isCurrent(t)?Me(s.activate(e),(()=>n.isCurrent(t)?(this.Fe=s,Me(null==i?void 0:i.deactivate(e),(()=>t))):Me(s.controller.deactivate(s.controller,this.$controller,4),(()=>(s.controller.dispose(),t))))):(s.controller.dispose(),t))):t))}compose(t){let e,n,i;const{view:s,viewModel:r,model:o}=t.change,{c:a,host:l,$controller:c,l:h}=this,u=this.getDef(r),d=a.createChild(),p=null==h?l.parentNode:h.parentNode;if(null!==u){if(u.containerless)throw new Error("AUR0806");null==h?(n=l,i=()=>{}):(n=p.insertBefore(this.p.document.createElement(u.name),h),i=()=>{n.remove()}),e=this.getVm(d,r,n)}else n=null==h?l:h,e=this.getVm(d,r,n);const f=()=>{if(null!==u){const s=ou.$el(d,e,n,{projections:this.$e.projections},u);return new Cg(s,(t=>s.activate(null!=t?t:s,c,2,c.scope.parentScope)),(t=>Me(s.deactivate(null!=t?t:s,c,4),i)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}{const i=dh.create({name:Sh.generateName(),template:s}),r=this.r.getViewFactory(i,d),o=ou.$view(r,c),a="auto"===this.scopeBehavior?Si.fromParent(this.parent.scope,e):Si.create(e);return Ku(n)?o.setLocation(n):o.setHost(n),new Cg(o,(t=>o.activate(null!=t?t:o,c,2,a)),(t=>o.deactivate(null!=t?t:o,c,4)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}};return"activate"in e?Me(e.activate(o),(()=>f())):f()}getVm(t,e,n){if(null==e)return new bg;if("object"==typeof e)return e;const i=this.p,s=Ku(n);t.registerResolver(i.Element,t.registerResolver(Vu,new $n("ElementResolver",s?null:n))),t.registerResolver(zu,new $n("IRenderLocation",s?n:null));const r=t.invoke(e);return t.registerResolver(e,new $n("au-compose.viewModel",r)),r}getDef(t){const e=xl(t)?t:null==t?void 0:t.constructor;return Sh.isType(e)?Sh.getDefinition(e):null}}sl([Al],yg.prototype,"view",void 0),sl([Al],yg.prototype,"viewModel",void 0),sl([Al],yg.prototype,"model",void 0),sl([Al({set:t=>{if("scoped"===t||"auto"===t)return t;throw new Error("AUR0805")}})],yg.prototype,"scopeBehavior",void 0),ch("au-compose")(yg);class bg{}class wg{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return Me(t.load(),(t=>new Sg(++this.id,t)))}invalidate(){this.id++}}class xg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}load(){return wl(this.view)||wl(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new kg(t,e,this.model,this.src))):new kg(this.view,this.viewModel,this.model,this.src)}}class kg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}}class Sg{constructor(t,e){this.id=t,this.change=e}}class Cg{constructor(t,e,n,i,s){this.controller=t,this.start=e,this.stop=n,this.update=i,this.context=s,this.state=0}activate(t){if(0!==this.state)throw new Error(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw new Error("AUR0808");default:this.state=-1}}}class Ag{constructor(t,e,n,i){var s,r;let o;this.je=null,this.Ne=null;const a=e.auSlot,l=null===(r=null===(s=n.instruction)||void 0===s?void 0:s.projections)||void 0===r?void 0:r[a.name];null==l?(o=i.getViewFactory(a.fallback,n.controller.container),this.We=!1):(o=i.getViewFactory(l,n.parent.controller.container),this.We=!0),this.Oe=n,this.view=o.create().setLocation(t)}static get inject(){return[zu,hd,yu,eu]}binding(t,e,n){var i;let s;this.je=this.$controller.scope.parentScope,this.We&&(s=this.Oe.controller.scope.parentScope,(this.Ne=Si.fromParent(s,s.bindingContext)).overrideContext.$host=null!==(i=this.expose)&&void 0!==i?i:this.je.bindingContext)}attaching(t,e,n){return this.view.activate(t,this.$controller,n,this.We?this.Ne:this.je)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}exposeChanged(t){this.We&&null!=this.Ne&&(this.Ne.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}sl([Al],Ag.prototype,"expose",void 0),ch({name:"au-slot",template:null,containerless:!0})(Ag);const Eg=Xe.createInterface("ISanitizer",(t=>t.singleton(class{sanitize(){throw new Error('"sanitize" method not implemented')}})));let Tg=class{constructor(t){this.He=t}toView(t){return null==t?null:this.He.sanitize(t)}};Tg=sl([rl(0,Eg)],Tg),ji("sanitize")(Tg);let $g=class{constructor(t){this.ze=t}toView(t,e){return this.ze.getViewComponentForObject(t,e)}};$g=sl([rl(0,Jh)],$g),ji("view")($g);const Ig=gf,Og=uf,Rg=df,Pg=pf,Lg=vf,Mg=mf,jg=ff,Ug=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return Tn.singleton(Rd,this).register(t)}compile(t,e,n){var i,s,r,o;const a=dh.getOrCreate(t);if(null===a.template||void 0===a.template)return a;if(!1===a.needsCompile)return a;null!=n||(n=Hp);const l=new Dp(t,e,n,null,null,void 0),c=kl(a.template)||!t.enhance?l.ni.createTemplate(a.template):a.template,h="TEMPLATE"===c.nodeName&&null!=c.content,u=h?c.content:c,d=e.get(function(t){function e(t,n,i){Xe.inject(e)(t,n,i)}return e.$isResolver=!0,e.resolve=function(e,n){return n.root===n?n.getAll(t,!1):n.has(t,!1)?n.getAll(t,!1).concat(n.root.getAll(t,!1)):n.root.getAll(t,!1)},e}(nf)),p=d.length;let f=0;if(p>0)for(;p>f;)null===(s=(i=d[f]).compiling)||void 0===s||s.call(i,c),++f;if(c.hasAttribute(Jp))throw new Error("AUR0701");return this.ri(u,l),this.oi(u,l),dh.create({...t,name:t.name||af(),dependencies:(null!==(r=t.dependencies)&&void 0!==r?r:Pn).concat(null!==(o=l.deps)&&void 0!==o?o:Pn),instructions:l.rows,surrogates:h?this.li(c,l):Pn,template:c,hasSlots:l.hasSlot,needsCompile:!1})}compileSpread(t,e,n,i){var s;const r=new Dp(t,n,Hp,null,null,void 0),o=[],a=r.hi(i.nodeName.toLowerCase()),l=null!==a,c=r.ep,h=e.length;let u,d,p,f,g,v,m,y,b,w,x=0,k=null,S=null;for(;h>x;++x)if(u=e[x],b=u.target,w=u.rawValue,S=r.ai(u),null!==S&&(1&S.type)>0)Wp.node=i,Wp.attr=u,Wp.bindable=null,Wp.def=null,o.push(S.build(Wp));else if(k=r.ui(b),null===k)if(null===S){if(m=c.parse(w,1),l&&(f=Gp.from(a,!1),g=f.attrs[b],void 0!==g)){m=c.parse(w,1),o.push(new Od(null==m?new md(w,g.property):new dd(m,g.property)));continue}if(null!=m)o.push(new dd(m,null!==(s=r.m.map(i,b))&&void 0!==s?s:xe(b)));else switch(b){case"class":o.push(new Ed(w));break;case"style":o.push(new Td(w));break;default:o.push(new Ad(w,b))}}else{if(l&&(f=Gp.from(a,!1),g=f.attrs[b],void 0!==g)){Wp.node=i,Wp.attr=u,Wp.bindable=g,Wp.def=a,o.push(new Od(S.build(Wp)));continue}Wp.node=i,Wp.attr=u,Wp.bindable=null,Wp.def=null,o.push(S.build(Wp))}else{if(k.isTemplateController)throw new Error(`AUR0703:${b}`);f=Gp.from(k,!0),y=!1===k.noMultiBindings&&null===S&&zp(w),y?p=this.fi(i,w,k,r):(v=f.primary,null===S?(m=c.parse(w,1),p=[null===m?new md(w,v.property):new dd(m,v.property)]):(Wp.node=i,Wp.attr=u,Wp.bindable=v,Wp.def=k,p=[S.build(Wp)])),(null!=d?d:d=[]).push(new bd(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(b)?b:void 0,p))}return qp(),null!=d?d.concat(o):o}li(t,e){var n;const i=[],s=t.attributes,r=e.ep;let o,a,l,c,h,u,d,p,f,g,v,m,y=s.length,b=0,w=null,x=null;for(;y>b;++b){if(o=s[b],a=o.name,l=o.value,c=e.di.parse(a,l),v=c.target,m=c.rawValue,Kp[v])throw new Error(`AUR0702:${a}`);if(x=e.ai(c),null!==x&&(1&x.type)>0)Wp.node=t,Wp.attr=c,Wp.bindable=null,Wp.def=null,i.push(x.build(Wp));else if(w=e.ui(v),null===w)if(null===x)if(f=r.parse(m,1),null!=f)t.removeAttribute(a),--b,--y,i.push(new dd(f,null!==(n=e.m.map(t,v))&&void 0!==n?n:xe(v)));else switch(a){case"class":i.push(new Ed(m));break;case"style":i.push(new Td(m));break;default:i.push(new Ad(m,a))}else Wp.node=t,Wp.attr=c,Wp.bindable=null,Wp.def=null,i.push(x.build(Wp));else{if(w.isTemplateController)throw new Error(`AUR0703:${v}`);d=Gp.from(w,!0),g=!1===w.noMultiBindings&&null===x&&zp(m),g?u=this.fi(t,m,w,e):(p=d.primary,null===x?(f=r.parse(m,1),u=[null===f?new md(m,p.property):new dd(f,p.property)]):(Wp.node=t,Wp.attr=c,Wp.bindable=p,Wp.def=w,u=[x.build(Wp)])),t.removeAttribute(a),--b,--y,(null!=h?h:h=[]).push(new bd(this.resolveResources?w:w.name,null!=w.aliases&&w.aliases.includes(v)?v:void 0,u))}}return qp(),null!=h?h.concat(i):i}oi(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.mi(t,e):this.vi(t,e);case 3:return this.gi(t,e);case 11:{let n=t.firstChild;for(;null!==n;)n=this.oi(n,e);break}}return t.nextSibling}mi(t,e){const n=t.attributes,i=n.length,s=[],r=e.ep;let o,a,l,c,h,u,d,p,f=!1,g=0;for(;i>g;++g)if(o=n[g],l=o.name,c=o.value,"to-binding-context"!==l){if(a=e.di.parse(l,c),u=a.target,d=a.rawValue,h=e.ai(a),null!==h)switch(h.name){case"to-view":case"bind":s.push(new kd(r.parse(d,8),xe(u)));continue;default:throw new Error(`AUR0704:${a.command}`)}p=r.parse(d,1),s.push(new kd(null===p?new ns(d):p,xe(u)))}else f=!0;return e.rows.push([new xd(s,f)]),this.pi(t).nextSibling}vi(t,e){var n,i,s,r,o,a,l,c,h,u;const d=t.nextSibling,p=(null!==(n=t.getAttribute("as-element"))&&void 0!==n?n:t.nodeName).toLowerCase(),f=e.hi(p),g=null!==f,v=g&&null!=f.shadowOptions,m=!!(null==f?void 0:f.capture),y=m?[]:Pn,b=e.ep,w=this.debug?Mn:()=>{t.removeAttribute(S),--z,--D};let x,k,S,C,A,E,T,$,I,O,R,P,L,M,j,U,N,B,F,V=t.attributes,D=V.length,z=0,q=null,H=!1,Z=null,W=!0,K=!1;if("slot"===p){if(null==e.root.def.shadowOptions)throw new Error(`AUR0717:${e.root.def.name}`);e.root.hasSlot=!0}if(g&&(W=null===(i=f.processContent)||void 0===i?void 0:i.call(f.Type,t,e.p),V=t.attributes,D=V.length),e.root.def.enhance&&t.classList.contains("au"))throw new Error("AUR0705");for(;D>z;++z){switch(k=V[z],S=k.name,C=k.value,S){case"as-element":case"containerless":w(),K||(K="containerless"===S);continue}if(A=e.di.parse(S,C),Z=e.ai(A),N=A.target,B=A.rawValue,m){if(null!=Z&&1&Z.type){w(),y.push(A);continue}if("au-slot"!==N&&(j=Gp.from(f,!1),null==j.attrs[N]&&!(null===(s=e.ui(N))||void 0===s?void 0:s.isTemplateController))){w(),y.push(A);continue}}if(null!==Z&&1&Z.type)Wp.node=t,Wp.attr=A,Wp.bindable=null,Wp.def=null,(null!=E?E:E=[]).push(Z.build(Wp)),w();else if(q=e.ui(N),null===q)if(null!==Z)w(),g&&(j=Gp.from(f,!1),$=j.attrs[N],void 0!==$)?(Wp.node=t,Wp.attr=A,Wp.bindable=$,Wp.def=f,(null!=T?T:T=[]).push(Z.build(Wp))):(Wp.node=t,Wp.attr=A,Wp.bindable=null,Wp.def=null,(null!=E?E:E=[]).push(Z.build(Wp)));else{if(g&&(j=Gp.from(f,!1),$=j.attrs[N],void 0!==$)){L=b.parse(B,1),(null!=T?T:T=[]).push(null==L?new md(B,$.property):new dd(L,$.property)),w();continue}L=b.parse(B,1),null!=L&&(w(),(null!=E?E:E=[]).push(new dd(L,null!==(r=e.m.map(t,N))&&void 0!==r?r:xe(N))))}else j=Gp.from(q,!0),H=!1===q.noMultiBindings&&null===Z&&zp(B),H?O=this.fi(t,B,q,e):(U=j.primary,null===Z?(L=b.parse(B,1),O=[null===L?new md(B,U.property):new dd(L,U.property)]):(Wp.node=t,Wp.attr=A,Wp.bindable=U,Wp.def=q,O=[Z.build(Wp)])),w(),q.isTemplateController?(null!=R?R:R=[]).push(new wd(Zp,this.resolveResources?q:q.name,void 0,O)):(null!=I?I:I=[]).push(new bd(this.resolveResources?q:q.name,null!=q.aliases&&q.aliases.includes(N)?N:void 0,O))}if(qp(),this.wi(t)&&null!=E&&E.length>1&&this.bi(t,E),g&&(M=new yd(this.resolveResources?f:f.name,void 0,null!=T?T:Pn,null,K,y),p===cf)){const n=t.getAttribute("name")||lf,i=e.h("template"),s=e.xi();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?t.removeChild(r):i.content.appendChild(r),r=t.firstChild;this.oi(i.content,s),M.auSlot={name:n,fallback:dh.create({name:af(),template:i,instructions:s.rows,needsCompile:!1})},t=this.yi(t,e)}if(null==E&&null==M&&null==I||(x=Pn.concat(null!=M?M:Pn,null!=I?I:Pn,null!=E?E:Pn),this.pi(t)),null!=R){let n;D=R.length-1,z=D,P=R[z],this.yi(t,e),"TEMPLATE"===t.nodeName?n=t:(n=e.h("template"),n.content.appendChild(t));const i=n,s=e.xi(null==x?[]:[x]);let r,a,h,u,d,m,y,b,w=0,k=0,S=t.firstChild,C=!1;if(!1!==W)for(;null!==S;)if(a=1===S.nodeType?S.getAttribute(cf):null,null!==a&&S.removeAttribute(cf),g)r=S.nextSibling,v||(C=3===S.nodeType&&""===S.textContent.trim(),C||(null!==(o=(l=null!=u?u:u={})[c=a||lf])&&void 0!==o?o:l[c]=[]).push(S),t.removeChild(S)),S=r;else{if(null!==a)throw a=a||lf,new Error(`AUR0706:${p}[${a}]`);S=S.nextSibling}if(null!=u){for(a in h={},u){for(n=e.h("template"),d=u[a],w=0,k=d.length;k>w;++w)m=d[w],"TEMPLATE"===m.nodeName?m.attributes.length>0?n.content.appendChild(m):n.content.appendChild(m.content):n.content.appendChild(m);b=e.xi(),this.oi(n.content,b),h[a]=dh.create({name:af(),template:n,instructions:b.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=h}if(g&&(K||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!K&&!1!==W,F)if("TEMPLATE"===t.nodeName)this.oi(t.content,s);else for(S=t.firstChild;null!==S;)S=this.oi(S,s);for(P.def=dh.create({name:af(),template:i,instructions:s.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});z-- >0;)P=R[z],n=e.h("template"),y=e.h("au-m"),y.classList.add("au"),n.content.appendChild(y),P.def=dh.create({name:af(),template:n,needsCompile:!1,instructions:[[R[z+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([P])}else{null!=x&&e.rows.push(x);let n,i,s,r,o,l,c,d=t.firstChild,m=null,y=!1,b=0,w=0;if(!1!==W)for(;null!==d;)if(i=1===d.nodeType?d.getAttribute(cf):null,null!==i&&d.removeAttribute(cf),g)n=d.nextSibling,v||(y=3===d.nodeType&&""===d.textContent.trim(),y||(null!==(a=(h=null!=s?s:s={})[u=i||lf])&&void 0!==a?a:h[u]=[]).push(d),t.removeChild(d)),d=n;else{if(null!==i)throw i=i||lf,new Error(`AUR0706:${p}[${i}]`);d=d.nextSibling}if(null!=s){for(i in m={},s){for(l=e.h("template"),r=s[i],b=0,w=r.length;w>b;++b)o=r[b],"TEMPLATE"===o.nodeName?o.attributes.length>0?l.content.appendChild(o):l.content.appendChild(o.content):l.content.appendChild(o);c=e.xi(),this.oi(l.content,c),m[i]=dh.create({name:af(),template:l,instructions:c.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=m}if(g&&(K||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!K&&!1!==W,F&&t.childNodes.length>0)for(d=t.firstChild;null!==d;)d=this.oi(d,e)}return d}gi(t,e){let n="",i=t;for(;null!==i&&3===i.nodeType;)n+=i.textContent,i=i.nextSibling;const s=e.ep.parse(n,1);if(null===s)return i;const r=t.parentNode;for(r.insertBefore(this.pi(e.h("au-m")),t),e.rows.push([new Sd(s,!!e.def.isStrictBinding)]),t.textContent="",i=t.nextSibling;null!==i&&3===i.nodeType;)r.removeChild(i),i=t.nextSibling;return t.nextSibling}fi(t,e,n,i){const s=Gp.from(n,!0),r=e.length,o=[];let a,l,c,h,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){l=e.slice(p,g);break}if(void 0===l&&(l=e.slice(p)),h=i.di.parse(a,l),u=i.ai(h),d=s.attrs[h.target],null==d)throw new Error(`AUR0707:${n.name}.${h.target}`);for(null===u?(c=i.ep.parse(l,1),o.push(null===c?new md(l,d.property):new dd(c,d.property))):(Wp.node=t,Wp.attr=h,Wp.bindable=d,Wp.def=n,o.push(u.build(Wp)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,l=void 0}return qp(),o}ri(t,e){var n,i;const s=t,r=Ce(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===s.childElementCount)throw new Error("AUR0708");const a=new Set,l=[];for(const t of r){if(t.parentNode!==s)throw new Error("AUR0709");const n=tf(t,a),i=class{},r=t.content,o=Ce(r.querySelectorAll("bindable")),c=$l.for(i),h=new Set,u=new Set;for(const t of o){if(t.parentNode!==r)throw new Error("AUR0710");const e=t.getAttribute("property");if(null===e)throw new Error("AUR0711");const n=t.getAttribute("attribute");if(null!==n&&u.has(n)||h.has(e))throw new Error(`AUR0712:${e}+${n}`);null!==n&&u.add(n),h.add(e),c.add({property:e,attribute:null!=n?n:void 0,mode:ef(t)}),t.getAttributeNames().filter((t=>!Yp.includes(t))).length,r.removeChild(t)}l.push(i),e.ki(Sh.define({name:n,template:t},i)),s.removeChild(t)}let c=0;const h=l.length;for(;h>c;++c)Sh.getDefinition(l[c]).dependencies.push(...null!==(n=e.def.dependencies)&&void 0!==n?n:Pn,...null!==(i=e.deps)&&void 0!==i?i:Pn)}wi(t){return"INPUT"===t.nodeName&&1===_p[t.type]}bi(t,e){if("INPUT"===t.nodeName){const t=e;let n,i,s,r=0;for(let e=0;e<t.length&&r<3;e++)switch(s=t[e],s.to){case"model":case"value":case"matcher":n=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==n&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}pi(t){return t.classList.add("au"),t}yi(t,e){const n=t.parentNode,i=e.h("au-m");return this.pi(n.insertBefore(i,t)),n.removeChild(t),i}},Vf],Ng=[ec,tc,sc],Bg=[Tp,Sp,Ap,Cp,Ep,$p,Ip,Up,Op,Rp,Pp,jp,Mp,Lp,Np],Fg=[Ig,Og,Rg,Pg,Lg,Mg,jg,Tg,$g,Wf,Kf,_f,Xf,ng,ig,sg,rg,og,ag,lg,cg,ug,dg,pg,bf,xf,zf,mg,yg,Zf,qf,Hf,Ag],Vg=[Hd,Zd,Dd,zd,qd,Ud,Nd,Bd,Fd,Vd,Yd,ip,Jd,tp,ep,np,Qd,sp],Dg=function t(e){return{optionsProvider:e,register(t){const n={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(n),t.register(Tn.instance(ms,n.coercingOptions),...Ug,...Fg,...Ng,...Bg,...Vg)},customize:n=>t(null!=n?n:e)}}(Mn),zg=Xe.createInterface("IAurelia");var qg;!function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(qg||(qg={}));const Hg=Xe.createInterface("IDialogService"),Zg=Xe.createInterface("IDialogController"),Wg=Xe.createInterface("IDialogDomRenderer"),Kg=Xe.createInterface("IDialogDom"),_g=Xe.createInterface("IDialogGlobalSettings");class Qg{constructor(t,e){this.wasCancelled=t,this.dialog=e}static create(t,e){return new Qg(t,e)}}class Gg{constructor(t,e){this.status=t,this.value=e}static create(t,e){return new Gg(t,e)}}var Xg;!function(t){t.Ok="ok",t.Error="error",t.Cancel="cancel",t.Abort="abort"}(Xg||(Xg={}));class Yg{constructor(t,e){this.p=t,this.ctn=e,this.closed=new Promise(((t,e)=>{this.Pt=t,this.St=e}))}static get inject(){return[rc,tn]}activate(t){var e;const n=this.ctn.createChild(),{model:i,template:s,rejectOnCancel:r}=t,o=n.get(Wg),a=null!==(e=t.host)&&void 0!==e?e:this.p.document.body,l=this.dom=o.render(a,t),c=n.has(Du,!0)?n.get(Du):null,h=l.contentHost;return this.settings=t,null!=c&&c.contains(a)||n.register(Tn.instance(Du,a)),n.register(Tn.instance(Vu,h),Tn.instance(Kg,l)),new Promise((e=>{var s,r;const o=Object.assign(this.cmp=this.getOrCreateVm(n,t,h),{$dialog:this});e(null===(r=null===(s=o.canActivate)||void 0===s?void 0:s.call(o,i))||void 0===r||r)})).then((e=>{var o;if(!0!==e){if(l.dispose(),r)throw tv(null,"Dialog activation rejected");return Qg.create(!0,this)}const a=this.cmp;return Me(null===(o=a.activate)||void 0===o?void 0:o.call(a,i),(()=>{var e;const i=this.controller=ou.$el(n,a,h,null,dh.create(null!==(e=this.getDefinition(a))&&void 0!==e?e:{name:Sh.generateName(),template:s}));return Me(i.activate(i,null,2),(()=>{var e;return l.overlay.addEventListener(null!==(e=t.mouseEvent)&&void 0!==e?e:"click",this),Qg.create(!1,this)}))}))}),(t=>{throw l.dispose(),t}))}deactivate(t,e){if(this.es)return this.es;let n=!0;const{controller:i,dom:s,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,l=Gg.create(t,e),c=new Promise((c=>{var h,u;c(Me(null===(u=null===(h=r.canDeactivate)||void 0===h?void 0:h.call(r,l))||void 0===u||u,(c=>{var h;if(!0!==c){if(n=!1,this.es=void 0,a)throw tv(null,"Dialog cancellation rejected");return Gg.create("abort")}return Me(null===(h=r.deactivate)||void 0===h?void 0:h.call(r,l),(()=>Me(i.deactivate(i,null,4),(()=>(s.dispose(),s.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===t?this.St(tv(e,"Dialog cancelled with a rejection on cancel")):this.Pt(l),l)))))})))})).catch((t=>{throw this.es=void 0,t}));return this.es=n?c:void 0,c}ok(t){return this.deactivate("ok",t)}cancel(t){return this.deactivate("cancel",t)}error(t){const e=function(t){const e=new Error;return e.wasCancelled=!1,e.value=t,e}(t);return new Promise((t=>{var n,i;return t(Me(null===(i=(n=this.cmp).deactivate)||void 0===i?void 0:i.call(n,Gg.create("error",e)),(()=>Me(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.St(e)})))))}))}handleEvent(t){this.settings.overlayDismiss&&!this.dom.contentHost.contains(t.target)&&this.cancel()}getOrCreateVm(t,e,n){const i=e.component;if(null==i)return new Jg;if("object"==typeof i)return i;const s=this.p;return t.registerResolver(s.HTMLElement,t.registerResolver(s.Element,t.registerResolver(Vu,new $n("ElementResolver",n)))),t.invoke(i)}getDefinition(t){const e=xl(t)?t:null==t?void 0:t.constructor;return Sh.isType(e)?Sh.getDefinition(e):null}}class Jg{}function tv(t,e){const n=new Error(e);return n.wasCancelled=!0,n.value=t,n}class ev{static from(...t){return Object.assign(new ev,...t).ls().os()}load(){const t=this,e=this.component,n=this.template,i=je(null==e?void 0:Me(e(),(e=>{t.component=e})),xl(n)?Me(n(),(e=>{t.template=e})):void 0);return i instanceof Promise?i.then((()=>t)):t}ls(){if(null==this.component&&null==this.template)throw new Error("AUR0903");return this}os(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function nv(t,e){return this.then((n=>n.dialog.closed.then(t,e)),e)}const iv="position:absolute;width:100%;height:100%;top:0;left:0;";class sv{constructor(t){this.p=t,this.wrapperCss=`${iv} display:flex;`,this.overlayCss=iv,this.hostCss="position:relative;margin:auto;"}static register(t){Tn.singleton(Wg,this).register(t)}render(t){const e=this.p.document,n=(t,n)=>{const i=e.createElement(t);return i.style.cssText=n,i},i=t.appendChild(n("au-dialog-container",this.wrapperCss)),s=i.appendChild(n("au-dialog-overlay",this.overlayCss)),r=i.appendChild(n("div",this.hostCss));return new rv(i,s,r)}}sv.inject=[rc];class rv{constructor(t,e,n){this.wrapper=t,this.overlay=e,this.contentHost=n}dispose(){this.wrapper.remove()}}function ov(t,e){return{settingsProvider:t,register:n=>n.register(...e,Dc.beforeCreate((()=>t(n.get(_g))))),customize:(t,n)=>ov(t,null!=n?n:e)}}ov((()=>{throw new Error("AUR0904")}),[class{static register(t){t.register(Tn.singleton(_g,this))}}]),ov(Mn,[class{constructor(t,e,n){this.ft=t,this.p=e,this.ss=n,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const t=this.dlgs;return t.length>0?t[t.length-1]:null}static get inject(){return[tn,rc,_g]}static register(t){t.register(Tn.singleton(Hg,this),Dc.beforeDeactivate(Hg,(t=>Me(t.closeAll(),(t=>{if(t.length>0)throw new Error(`AUR0901:${t.length}`)})))))}open(t){return function(t){return t.whenClosed=nv,t}(new Promise((e=>{var n;const i=ev.from(this.ss,t),s=null!==(n=i.container)&&void 0!==n?n:this.ft.createChild();e(Me(i.load(),(t=>{const e=s.invoke(Yg);return s.register(Tn.instance(Zg,e)),s.register(Tn.callback(Yg,(()=>{throw new Error("AUR0902")}))),Me(e.activate(t),(t=>{if(!t.wasCancelled){1===this.dlgs.push(e)&&this.p.window.addEventListener("keydown",this);const t=()=>this.remove(e);e.closed.then(t,t)}return t}))})))})))}closeAll(){return Promise.all(Array.from(this.dlgs).map((t=>t.settings.rejectOnCancel?t.cancel().then((()=>null)):t.cancel().then((e=>"cancel"===e.status?null:t))))).then((t=>t.filter((t=>!!t))))}remove(t){const e=this.dlgs,n=e.indexOf(t);n>-1&&this.dlgs.splice(n,1),0===e.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(t){const e=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(t);if(null==e)return;const n=this.top;if(null===n||0===n.settings.keyboard.length)return;const i=n.settings.keyboard;"Escape"===e&&i.includes(e)?n.cancel():"Enter"===e&&i.includes(e)&&n.ok()}},class{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(t){Tn.singleton(_g,this).register(t)}},sv]),Xe.createInterface((t=>t.singleton(av)));class av{constructor(t,e,n){this.ctn=t,this.p=e,this.r=n}define(t,e,n){if(!t.includes("-"))throw new Error('Invalid web-components custom element name. It must include a "-"');let i;if(null==e)throw new Error("Invalid custom element definition");if(i="function"==typeof e?Sh.isType(e)?Sh.getDefinition(e):dh.create(Sh.generateName(),e):dh.getOrCreate(e),i.containerless)throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");const s=(null==n?void 0:n.extends)?this.p.document.createElement(n.extends).constructor:HTMLElement,r=this.ctn,o=this.r,a=i.bindables,l=this.p;class c extends s{auInit(){if(this.auInited)return;this.auInited=!0;const t=r.createChild();t.registerResolver(l.HTMLElement,t.registerResolver(l.Element,t.registerResolver(Vu,new $n("ElementProvider",this))));const e=o.compile(i,t,{projections:null}),n=t.invoke(e.Type),s=this.auCtrl=ou.$el(t,n,this,null,e);Fu(this,e.key,s)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null,0)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null,0)}adoptedCallback(){this.auInit()}attributeChangedCallback(t,e,n){this.auInit(),this.auCtrl.viewModel[t]=n}}c.observedAttributes=Object.keys(a);for(const t in a)Object.defineProperty(c.prototype,t,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[t]},set(e){this.auInited||this.auInit(),this.auCtrl.viewModel[t]=e}});return this.p.customElements.define(t,c,n),c}}av.inject=[tn,rc,eu];const lv=il.getOrCreate(globalThis);class cv extends class{constructor(t=Xe.createContainer()){if(this.container=t,this.ir=!1,this.Ge=!1,this.Xe=!1,this.Ke=void 0,this.next=void 0,this.Ye=void 0,this.Ze=void 0,t.has(zg,!0))throw new Error("AUR0768");t.registerResolver(zg,new $n("IAurelia",this)),t.registerResolver(Lu,this.Je=new $n("IAppRoot"))}get isRunning(){return this.ir}get isStarting(){return this.Ge}get isStopping(){return this.Xe}get root(){if(null==this.Ke){if(null==this.next)throw new Error("AUR0767");return this.next}return this.Ke}register(...t){return this.container.register(...t),this}app(t){return this.next=new Uu(t,this.Qe(t.host),this.container,this.Je),this}enhance(t,e){var n;const i=null!==(n=t.container)&&void 0!==n?n:this.container.createChild(),s=t.host,r=this.Qe(s),o=t.component;let a;xl(o)?(i.registerResolver(r.HTMLElement,i.registerResolver(r.Element,i.registerResolver(Vu,new $n("ElementResolver",s)))),a=i.invoke(o)):a=o,i.registerResolver(Du,new $n("IEventTarget",s)),e=null!=e?e:null;const l=ou.$el(i,a,s,null,dh.create({name:Sh.generateName(),template:s,enhance:!0}));return Me(l.activate(l,e,2),(()=>l))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}Qe(t){let e;if(this.container.has(rc,!1))e=this.container.get(rc);else{if(null===t.ownerDocument.defaultView)throw new Error("AUR0769");e=new il(t.ownerDocument.defaultView),this.container.register(Tn.instance(rc,e))}return e}start(t=this.next){if(null==t)throw new Error("AUR0770");return this.Ye instanceof Promise?this.Ye:this.Ye=Me(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.Je.prepare(this.Ke=t),this.Ge=!0,Me(t.activate(),(()=>{this.ir=!0,this.Ge=!1,this.Ye=void 0,this.ts(t,"au-started",t.host)})))))}stop(t=!1){if(this.Ze instanceof Promise)return this.Ze;if(!0===this.ir){const e=this.Ke;return this.ir=!1,this.Xe=!0,this.Ze=Me(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.Ke=void 0,this.Je.dispose(),this.Xe=!1,this.ts(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.Xe)throw new Error("AUR0771");this.container.dispose()}ts(t,e,n){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});n.dispatchEvent(i)}}{constructor(t=function(){return Xe.createContainer().register(Tn.instance(rc,lv),Dg)}()){super(t)}static start(t){return(new cv).start(t)}static app(t){return(new cv).app(t)}static enhance(t,e){return(new cv).enhance(t,e)}static register(...t){return(new cv).register(...t)}app(t){if(Sh.isType(t)){const e=Sh.getDefinition(t);let n=document.querySelector(e.name);return null===n&&(n=document.body),super.app({host:n,component:t})}return super.app(t)}}var hv=function(t,e){return hv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},hv(t,e)};function uv(t,e){function n(){this.constructor=t}hv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function dv(t){return"function"==typeof t}var pv=!1,fv={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,pv=t},get useDeprecatedSynchronousErrorHandling(){return pv}};function gv(t){setTimeout((function(){throw t}),0)}var vv={closed:!0,next:function(t){},error:function(t){if(fv.useDeprecatedSynchronousErrorHandling)throw t;gv(t)},complete:function(){}},mv=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function yv(t){return null!==t&&"object"==typeof t}var bv=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),wv=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,i=n._parentOrParents,s=n._ctorUnsubscribe,r=n._unsubscribe,o=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(var a=0;a<i.length;++a)i[a].remove(this);if(dv(r)){s&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof bv?xv(t.errors):[t]}}if(mv(o)){a=-1;for(var l=o.length;++a<l;){var c=o[a];if(yv(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof bv?e=e.concat(xv(t.errors)):e.push(t)}}}if(e)throw new bv(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=n._parentOrParents;if(null===s)n._parentOrParents=this;else if(s instanceof t){if(s===this)return n;n._parentOrParents=[s,this]}else{if(-1!==s.indexOf(this))return n;s.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function xv(t){return t.reduce((function(t,e){return t.concat(e instanceof bv?e.errors:e)}),[])}var kv=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Sv=function(t){function e(n,i,s){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=vv;break;case 1:if(!n){r.destination=vv;break}if("object"==typeof n){n instanceof e?(r.syncErrorThrowable=n.syncErrorThrowable,r.destination=n,n.add(r)):(r.syncErrorThrowable=!0,r.destination=new Cv(r,n));break}default:r.syncErrorThrowable=!0,r.destination=new Cv(r,n,i,s)}return r}return uv(e,t),e.prototype[kv]=function(){return this},e.create=function(t,n,i){var s=new e(t,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(wv),Cv=function(t){function e(e,n,i,s){var r,o=t.call(this)||this;o._parentSubscriber=e;var a=o;return dv(n)?r=n:n&&(r=n.next,i=n.error,s=n.complete,n!==vv&&(dv((a=Object.create(n)).unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=r,o._error=i,o._complete=s,o}return uv(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;fv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=fv.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):gv(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;gv(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};fv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),fv.useDeprecatedSynchronousErrorHandling)throw t;gv(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!fv.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return fv.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(gv(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Sv),Av=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Ev(t){return t}function Tv(t){return 0===t.length?Ev:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var $v=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,s=function(t,e,n){if(t){if(t instanceof Sv)return t;if(t[kv])return t[kv]()}return t||e||n?new Sv(t,e,n):new Sv(vv)}(t,e,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||fv.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),fv.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){fv.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,i=e.destination,s=e.isStopped;if(n||s)return!1;t=i&&i instanceof Sv?i:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=Iv(e))((function(e,i){var s;s=n.subscribe((function(e){try{t(e)}catch(t){i(t),s&&s.unsubscribe()}}),i,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Av]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Tv(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=Iv(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function Iv(t){if(t||(t=fv.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var Ov=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Rv=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return uv(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(wv),Pv=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return uv(e,t),e}(Sv),Lv=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return uv(e,t),e.prototype[kv]=function(){return new Pv(this)},e.prototype.lift=function(t){var e=new Mv(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new Ov;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new Ov;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Ov;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new Ov;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new Ov;return this.hasError?(t.error(this.thrownError),wv.EMPTY):this.isStopped?(t.complete(),wv.EMPTY):(this.observers.push(t),new Rv(this,t))},e.prototype.asObservable=function(){var t=new $v;return t.source=this,t},e.create=function(t,e){return new Mv(t,e)},e}($v),Mv=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return uv(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):wv.EMPTY},e}(Lv),jv=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return uv(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ov;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(Lv);function Uv(t,e){if(!Bv(t))throw Error("Provided state is not of type StateHistory");return e>0?function(t,e){if(e<0||e>=t.future.length)return t;const{past:n,future:i,present:s}=t;return{past:[...n,s,...i.slice(0,e)],present:i[e],future:i.slice(e+1)}}(t,e-1):e<0?function(t,e){if(e<0||e>=t.past.length)return t;const{past:n,future:i,present:s}=t,r=n.slice(0,e),o=[...n.slice(e+1),s,...i];return{past:r,present:n[e],future:o}}(t,t.past.length+e):t}function Nv(t,e){return{...t,past:[...t.past,t.present],present:e,future:[]}}function Bv(t){return void 0!==t.present&&void 0!==t.future&&void 0!==t.past&&Array.isArray(t.future)&&Array.isArray(t.past)}function Fv(t,e){return function(n,i){e(n,i,t)}}const Vv="aurelia-store-state";var Dv,zv,qv;function Hv(t,e,n){const i=Kv.container.get(Qu).localStorage;if(void 0!==i){const e=void 0!==(null==n?void 0:n.key)?n.key:Vv;i.setItem(e,JSON.stringify(t))}}function Zv(t,e){const n=Kv.container.get(Qu).localStorage;if(void 0===n)return t;const i=n.getItem(void 0===e?Vv:e);if(null===i||""===i)return t;try{return JSON.parse(i)}catch(t){}return t}function Wv(t,e,n){var i;return(null===(i=t.logDefinitions)||void 0===i?void 0:i.hasOwnProperty(e))&&t.logDefinitions[e]&&Object.values(zv).includes(t.logDefinitions[e])?t.logDefinitions[e]:n}!function(t){t.Before="before",t.After="after"}(Dv||(Dv={})),function(t){t.trace="trace",t.debug="debug",t.info="info",t.warn="warn",t.error="error"}(zv||(zv={})),function(t){t.StartEnd="startEnd",t.All="all"}(qv||(qv={}));const Kv={container:null};class _v extends Error{constructor(t){super(`Tried to dispatch an unregistered action ${void 0!==t&&("string"==typeof t?t:t.name)}`)}}class Qv extends Error{}class Gv extends Error{}class Xv extends Error{}let Yv=class{constructor(t,e,n,i){var s,r,o,a;this.initialState=t,this.logger=e,this.t=n,this.devToolsAvailable=!1,this.actions=new Map,this.middlewares=new Map,this.dispatchQueue=[],this.options=null!=i?i:{};const l=!0===(null===(r=null===(s=this.options)||void 0===s?void 0:s.history)||void 0===r?void 0:r.undoable);this._state=new jv(t),this.state=this._state.asObservable(),!0!==(null===(a=null===(o=this.options)||void 0===o?void 0:o.devToolsOptions)||void 0===a?void 0:a.disable)&&this.setupDevTools(),l&&this.registerHistoryMethods()}registerMiddleware(t,e,n){this.middlewares.set(t,{placement:e,settings:n})}unregisterMiddleware(t){this.middlewares.has(t)&&this.middlewares.delete(t)}isMiddlewareRegistered(t){return this.middlewares.has(t)}registerAction(t,e){if(0===e.length)throw new Gv("The reducer is expected to have one or more parameters, where the first will be the present state");this.actions.set(e,{type:t})}unregisterAction(t){this.actions.has(t)&&this.actions.delete(t)}isActionRegistered(t){return"string"==typeof t?void 0!==Array.from(this.actions).find((e=>e[1].type===t)):this.actions.has(t)}resetToState(t){this._state.next(t)}async dispatch(t,...e){const n=this.lookupAction(t);return n?this.queueDispatch([{reducer:n,params:e}]):Promise.reject(new _v(t))}pipe(t,...e){const n=[],i={dispatch:async()=>this.queueDispatch(n),pipe:(e,...s)=>{const r=this.lookupAction(e);if(!r)throw new _v(t);return n.push({reducer:r,params:s}),i}};return i.pipe(t,...e)}lookupAction(t){if("string"==typeof t){const e=Array.from(this.actions).find((([e,n])=>n.type===t));if(e)return e[0]}else if(this.actions.has(t))return t}async queueDispatch(t){return new Promise(((e,n)=>{this.dispatchQueue.push({actions:t,resolve:e,reject:n}),1===this.dispatchQueue.length&&this.handleQueue()}))}async handleQueue(){if(this.dispatchQueue.length>0){const t=this.dispatchQueue[0];try{await this.internalDispatch(t.actions),t.resolve()}catch(e){t.reject(e)}this.dispatchQueue.shift(),this.handleQueue()}}async internalDispatch(t){var e;const n=t.find((t=>!this.actions.has(t.reducer)));if(n)throw new _v(n.reducer);Kv.container.get(Qu).performance.mark("dispatch-start");const i=t.map((t=>({type:this.actions.get(t.reducer).type,params:t.params,reducer:t.reducer}))),s={name:i.map((t=>t.type)).join("->"),params:i.reduce(((t,e)=>t.concat(e.params)),[]),pipedActions:i.map((t=>({name:t.type,params:t.params})))};this.options.logDispatchedActions&&this.logger[Wv(this.options,"dispatchedActions",zv.info)](`Dispatching: ${s.name}`);const r=await this.executeMiddlewares(this._state.getValue(),Dv.Before,s);if(!1===r)return Kv.container.get(Qu).performance.clearMarks(),void Kv.container.get(Qu).performance.clearMeasures();let o=r;for(const t of i){if(o=await t.reducer(o,...t.params),!1===o)return Kv.container.get(Qu).performance.clearMarks(),void Kv.container.get(Qu).performance.clearMeasures();if(Kv.container.get(Qu).performance.mark(`dispatch-after-reducer-${t.type}`),!o&&"object"!=typeof o)throw new Xv("The reducer has to return a new state")}let a=await this.executeMiddlewares(o,Dv.After,s);if(!1===a)return Kv.container.get(Qu).performance.clearMarks(),void Kv.container.get(Qu).performance.clearMeasures();if(Bv(a)&&(null===(e=this.options.history)||void 0===e?void 0:e.limit)&&(a=function(t,e){return Bv(t)&&(t.past.length>e&&(t.past=t.past.slice(t.past.length-e)),t.future.length>e&&(t.future=t.future.slice(0,e))),t}(a,this.options.history.limit)),this._state.next(a),Kv.container.get(Qu).performance.mark("dispatch-end"),this.options.measurePerformance===qv.StartEnd){Kv.container.get(Qu).performance.measure("startEndDispatchDuration","dispatch-start","dispatch-end");const t=Kv.container.get(Qu).performance.getEntriesByName("startEndDispatchDuration");this.logger[Wv(this.options,"performanceLog",zv.info)](`Total duration ${t[0].duration} of dispatched action ${s.name}:`,t)}else if(this.options.measurePerformance===qv.All){const t=Kv.container.get(Qu).performance.getEntriesByType("mark"),e=t[t.length-1].startTime-t[0].startTime;this.logger[Wv(this.options,"performanceLog",zv.info)](`Total duration ${e} of dispatched action ${s.name}:`,t)}Kv.container.get(Qu).performance.clearMarks(),Kv.container.get(Qu).performance.clearMeasures(),this.updateDevToolsState({type:s.name,params:s.params},a)}executeMiddlewares(t,e,n){return Array.from(this.middlewares).filter((t=>t[1].placement===e)).reduce((async(t,i,s)=>{try{const s=await i[0](await t,this._state.getValue(),i[1].settings,n);return!1!==s&&(s||await t)}catch(e){if(this.options.propagateError)throw e;return await t}finally{Kv.container.get(Qu).performance.mark(`dispatch-${e}-${i[0].name}`)}}),t)}setupDevTools(){this.t.__REDUX_DEVTOOLS_EXTENSION__&&(this.logger[Wv(this.options,"devToolsStatus",zv.debug)]("DevTools are available"),this.devToolsAvailable=!0,this.devTools=this.t.__REDUX_DEVTOOLS_EXTENSION__.connect(this.options.devToolsOptions),this.devTools.init(this.initialState),this.devTools.subscribe((t=>{var e,n;if(this.logger[Wv(this.options,"devToolsStatus",zv.debug)](`DevTools sent change ${t.type}`),"ACTION"!==t.type||void 0===t.payload){if("DISPATCH"===t.type&&t.payload)switch(t.payload.type){case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return void this._state.next(JSON.parse(t.state));case"COMMIT":return void this.devTools.init(this._state.getValue());case"RESET":return this.devTools.init(this.initialState),void this.resetToState(this.initialState);case"ROLLBACK":{const e=JSON.parse(t.state);return this.resetToState(e),void this.devTools.init(e)}}}else{const i=Array.from(this.actions).find((function([e]){var n;return e.name===(null===(n=t.payload)||void 0===n?void 0:n.name)})),s=null!==(n=this.lookupAction(null===(e=t.payload)||void 0===e?void 0:e.name))&&void 0!==n?n:null==i?void 0:i[0];if(!s)throw new Qv("Tried to remotely dispatch an unregistered action");if(!t.payload.args||t.payload.args.length<1)throw new Qv("No action arguments provided");this.dispatch(s,...t.payload.args.slice(1).map((t=>JSON.parse(t)))).catch((()=>{throw new Qv("Issue when trying to dispatch an action through devtools")}))}})))}updateDevToolsState(t,e){this.devToolsAvailable&&this.devTools&&this.devTools.send(t,e)}registerHistoryMethods(){this.registerAction("jump",Uv)}};Yv=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}([Fv(1,qn),Fv(2,Qu)],Yv);const Jv=t=>t.state;function tm(t){const e={selector:"function"==typeof t?t:Jv,...t};function n(t,e){const n=e(t);return n instanceof $v?n:t.state}function i(){const t="object"==typeof e.selector,n={[e.target||"state"]:e.selector||Jv};return Object.entries({...t?e.selector:n}).map((([n,i])=>{var s,r;return{targets:e.target&&t?[e.target,n]:[n],selector:i,changeHandlers:{[null!==(s=e.onChanged)&&void 0!==s?s:""]:1,[`${null!==(r=e.target)&&void 0!==r?r:n}Changed`]:e.target?0:1,propertyChanged:0}}}))}return function(e){const s="object"==typeof t&&t.setup?e.prototype[t.setup]:e.prototype.binding,r="object"==typeof t&&t.teardown?e.prototype[t.teardown]:e.prototype.unbinding;e.prototype["object"==typeof t&&void 0!==t.setup?t.setup:"binding"]=function(){if("object"==typeof t&&"string"==typeof t.onChanged&&!(t.onChanged in this))throw new Error("Provided onChanged handler does not exist on target VM");const e=ou.getCached(this)?ou.getCached(this).container.get(Yv):Kv.container.get(Yv);if(this._stateSubscriptions=i().map((t=>n(e,t.selector).subscribe((e=>{const n=t.targets.length-1,i=t.targets.reduce(((t={},e)=>t[e]),this);Object.entries(t.changeHandlers).forEach((([s,r])=>{s in this&&this[s](...[t.targets[n],e,i].slice(r,3))})),t.targets.reduce(((t,i,s)=>(t[i]=s===n?e:t[i]||{},t[i])),this)})))),s)return s.apply(this,arguments)},e.prototype["object"==typeof t&&t.teardown?t.teardown:"unbinding"]=function(){if(this._stateSubscriptions&&Array.isArray(this._stateSubscriptions)&&this._stateSubscriptions.forEach((t=>{t instanceof wv&&!1===t.closed&&t.unsubscribe()})),r)return r.apply(this,arguments)}}}const em={withInitialState(t){return Reflect.set(this,"state",t),this},withOptions(t){return Reflect.set(this,"options",t),this},register(t){var e;Kv.container=t;const n=Reflect.get(this,"state"),i=Reflect.get(this,"options"),s=t.get(qn),r=t.get(Qu);if(!n)throw new Error("initialState must be provided via withInitialState builder method");let o=n;return(null===(e=null==i?void 0:i.history)||void 0===e?void 0:e.undoable)&&!Bv(n)&&(o={past:[],present:n,future:[]}),Tn.instance(Yv,new Yv(o,s,r,i)).register(t),t}};function nm(t){return"object"==typeof t&&null!==t||"function"==typeof t}let im=new WeakMap;function sm(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function rm(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function om(t,e,n){let i=im.get(t);if(void 0===i){if(!n)return;i=new Map,im.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function am(t,e,n){const i=om(e,n,!1);return void 0!==i&&i.has(t)}function lm(t,e,n){if(am(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&lm(t,i,n)}function cm(t,e,n){const i=om(e,n,!1);if(void 0!==i)return i.get(t)}function hm(t,e,n){if(am(t,e,n))return cm(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?hm(t,i,n):void 0}function um(t,e){const n=[],i=om(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function dm(t,e){const n=um(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=dm(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}const pm={define:function(t,e,n,i){if(!nm(n))throw sm("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return function(t,e,n,i){om(n,i,!0).set(t,e)}(t,e,n,rm(i))},has:function(t,e,n){if(!nm(e))throw sm("Metadata.has",[t,e,n],"target",e,"Object or Function");return lm(t,e,rm(n))},hasOwn:function(t,e,n){if(!nm(e))throw sm("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return am(t,e,rm(n))},get:function(t,e,n){if(!nm(e))throw sm("Metadata.get",[t,e,n],"target",e,"Object or Function");return hm(t,e,rm(n))},getOwn:function(t,e,n){if(!nm(e))throw sm("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return cm(t,e,rm(n))},getKeys:function(t,e){if(!nm(t))throw sm("Metadata.getKeys",[t,e],"target",t,"Object or Function");return dm(t,rm(e))},getOwnKeys:function(t,e){if(!nm(t))throw sm("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return um(t,rm(e))},delete:function(t,e,n){if(!nm(e))throw sm("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=om(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,rm(n))}};class fm{constructor(t,e,n){this.path=t,this.caseSensitive=e,this.handler=n}}class gm{constructor(t,e){this.route=t,this.paramNames=e}}class vm{constructor(t,e){this.endpoint=t,this.params=e}}class mm{constructor(t,e,n,i){var s;this.chars=t,this.states=e,this.skippedStates=n,this.result=i,this.head=e[e.length-1],this.endpoint=null===(s=this.head)||void 0===s?void 0:s.endpoint}advance(t){const{chars:e,states:n,skippedStates:i,result:s}=this;let r=null,o=0;const a=n[n.length-1];function l(c,h){if(c.isMatch(t)&&(1==++o?r=c:s.add(new mm(e.concat(t),n.concat(c),null===h?i:i.concat(h),s))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw new Error(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw new Error("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)l(e,c)}}if(a.isDynamic&&l(a,null),null!==a.nextStates)for(const t of a.nextStates)l(t,null);null!==r&&(n.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&s.remove(this)}finalize(){!function t(e,n){const i=n.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const n of i)if(n.isOptional&&null!==n.endpoint){if(e.push(n),null!==n.nextStates)for(const i of n.nextStates)t(e,i);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:n}=this,i={};for(const t of n.paramNames)i[t]=void 0;for(let n=0,s=t.length;n<s;++n){const s=t[n];if(s.isDynamic){const t=s.segment.name;void 0===i[t]?i[t]=e[n]:i[t]+=e[n]}}return i}compareTo(t){const e=this.states,n=t.states;for(let t=0,i=0,s=Math.max(e.length,n.length);t<s;++t){let s=e[t];if(void 0===s)return 1;let r=n[i];if(void 0===r)return-1;let o=s.segment,a=r.segment;if(null===o){if(null===a){++i;continue}if(void 0===(s=e[++t]))return 1;o=s.segment}else if(null===a){if(void 0===(r=n[++i]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,s=t.skippedStates,r=i.length,o=s.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=i[t],n=s[t];if(e.length<n.length)return 1;if(e.length>n.length)return-1}return 0}}function ym(t){return null!==t.head.endpoint}function bm(t,e){return t.compareTo(e)}class wm{constructor(t){this.candidates=[],this.candidates=[new mm([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(ym);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(bm),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const n of e)n.advance(t)}}class xm{constructor(t,e,n){switch(this.prevState=t,this.segment=e,this.value=n,this.nextStates=null,this.endpoint=null,null==e?void 0:e.kind){case 2:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let n,i=this.nextStates;return null===i?(n=void 0,i=this.nextStates=[]):n=null===t?i.find((t=>t.value===e)):i.find((e=>{var n;return null===(n=e.segment)||void 0===n?void 0:n.equals(t)})),void 0===n&&i.push(n=new xm(this,t,e)),n}setEndpoint(t){if(null!==this.endpoint)throw new Error(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(null==e?void 0:e.kind){case 2:return!this.value.includes(t);case 1:return!0;case 3:case void 0:return this.value.includes(t)}}}function km(t){return t.length>0}var Sm;!function(t){t[t.star=1]="star",t[t.dynamic=2]="dynamic",t[t.static=3]="static"}(Sm||(Sm={}));class Cm{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 3}appendTo(t){const{value:e,value:{length:n}}=this;if(this.caseSensitive)for(let i=0;i<n;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<n;++i){const n=e.charAt(i);t=t.append(this,n.toUpperCase()+n.toLowerCase())}return t}equals(t){return 3===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class Am{constructor(t,e){this.name=t,this.optional=e}get kind(){return 2}appendTo(t){return t.append(this,"/")}equals(t){return 2===t.kind&&t.optional===this.optional&&t.name===this.name}}class Em{constructor(t){this.name=t}get kind(){return 1}appendTo(t){return t.append(this,"")}equals(t){return 1===t.kind&&t.name===this.name}}const Tm=Object.prototype.hasOwnProperty,$m=Reflect.defineProperty,Im=t=>"function"==typeof t,Om=t=>"string"==typeof t;function Rm(t,e,n){return $m(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function Pm(t,e,n,i=!1){!i&&Tm.call(t,e)||Rm(t,e,n)}const Lm=()=>Object.create(null),Mm=pm.getOwn,jm=pm.hasOwn,Um=pm.define,Nm=ze.annotation.keyFor,Bm=ze.resource.keyFor,Fm=ze.resource.appendTo;function Vm(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Tn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class Dm{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Tm.call(t,e)&&(this[e]=t[e])}static create(t,e){return new Dm(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class zm{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new zm(null,t,null==e?qm.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new zm(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new zm(t,e,qm.create(e),!1)}}class qm{constructor(t){this.bindingContext=t}static create(t){return new qm(t)}}const Hm=Xe.createInterface("ISignaler",(t=>t.singleton(Zm)));class Zm{constructor(){this.signals=Lm()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var Wm;!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(Wm||(Wm={}));class Km{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;Om(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===Qm;return new Km(e,Oe(Xm(e,"name"),n),Ie(Xm(e,"aliases"),i.aliases,e.aliases),Ym.keyFrom(n),He("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Tn.singleton(n,e).register(t);break;case 2:Tn.instance(n,new _m(t,e)).register(t)}Tn.aliasTo(n,e).register(t),Vm(i,Ym,n,t)}}class _m{constructor(t,e){this.ctn=t,this.Type=e,this.deps=Xe.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class Qm{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{$m(Qm.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const Gm=Bm("binding-behavior"),Xm=(t,e)=>Mm(Nm(e),t),Ym=Object.freeze({name:Gm,keyFrom:t=>`${Gm}:${t}`,isType:t=>Im(t)&&jm(Gm,t),define(t,e){const n=Km.create(t,e);return Um(Gm,n,n.Type),Um(Gm,n,n),Fm(e,Gm),n.Type},getDefinition(t){const e=Mm(Gm,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){Um(Nm(e),n,t)},getAnnotation:Xm});class Jm{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return Om(t)?(n=t,i={name:n}):(n=t.name,i=t),new Jm(e,Oe(ey(e,"name"),n),Ie(ey(e,"aliases"),i.aliases,e.aliases),ny.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Tn.singleton(n,e).register(t),Tn.aliasTo(n,e).register(t),Vm(i,ny,n,t)}}const ty=Bm("value-converter"),ey=(t,e)=>Mm(Nm(e),t),ny=Object.freeze({name:ty,keyFrom:t=>`${ty}:${t}`,isType:t=>Im(t)&&jm(ty,t),define(t,e){const n=Jm.create(t,e);return Um(ty,n,n.Type),Um(ty,n,n),Fm(e,ty),n.Type},getDefinition(t){const e=Mm(ty,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){Um(Nm(e),n,t)},getAnnotation:ey});var iy;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(iy||(iy={}));class sy{constructor(){this.text=""}static unparse(t){const e=new sy;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",Om(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class ry{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class oy{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=Ym.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof _m)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(Im(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return sy.unparse(this)}}class ay{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=ny.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(Hm);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(Hm);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return sy.unparse(this)}}class ly{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return sy.unparse(this)}}class cy{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return sy.unparse(this)}}class hy{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return sy.unparse(this)}}hy.$this=new hy(0),hy.$parent=new hy(1);class uy{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=Dm.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=Dm.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return sy.unparse(this)}}class dy{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return sy.unparse(this)}}class py{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return sy.unparse(this)}}class fy{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=Dm.get(e,this.name,this.ancestor,t),o=Py(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return sy.unparse(this)}}class gy{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=Py(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return sy.unparse(this)}}class vy{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(Im(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return sy.unparse(this)}}class my{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!Im(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(ye(s)||ye(r))return(s||0)+(r||0);if(be(s)||be(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return sy.unparse(this)}}class yy{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return sy.unparse(this)}}class by{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return sy.unparse(this)}}by.$undefined=new by(void 0),by.$null=new by(null),by.$true=new by(!0),by.$false=new by(!1),by.$empty=new by("");class wy{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return sy.unparse(this)}}wy.$empty=new wy(Pn);class xy{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return sy.unparse(this)}}xy.$empty=new xy(Pn,Pn);class ky{constructor(t,e=Pn){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return sy.unparse(this)}}ky.$empty=new ky([""]);class Sy{constructor(t,e,n,i=Pn){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!Im(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return sy.unparse(this)}}class Cy{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return sy.unparse(this)}}class Ay{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return sy.unparse(this)}}class Ey{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return sy.unparse(this)}}const Ty=Object.prototype.toString;class $y{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(Ty.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${Ty.call(e)}`)}}iterate(t,e,n){switch(Ty.call(e)){case"[object Array]":return Ly(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;Ly(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;Ly(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;Ly(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${Ty.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return sy.unparse(this)}}class Iy{constructor(t,e=Pn){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return sy.unparse(this)}}class Oy{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,zm.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return sy.unparse(this)}}class Ry{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,zm.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return sy.unparse(this)}}function Py(t,e,n){const i=null==e?null:e[n];if(Im(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function Ly(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}var My,jy,Uy,Ny,By,Fy;function Vy(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function Dy(t){return null==t?zy:zy(t)}function zy(t){const e=t.prototype;$m(e,"subs",{get:Hy}),Pm(e,"subscribe",Zy),Pm(e,"unsubscribe",Wy)}Xe.createInterface("ICoercionConfiguration"),function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(My||(My={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(jy||(jy={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(Uy||(Uy={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(Ny||(Ny={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(By||(By={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(Fy||(Fy={}));class qy{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function Hy(){return Rm(this,"subs",new qy)}function Zy(t){return this.subs.add(t)}function Wy(t){return this.subs.remove(t)}function Ky(t){return null==t?_y:_y(t)}function _y(t){const e=t.prototype;$m(e,"queue",{get:Gy})}class Qy{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(Xy)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function Gy(){return Qy.instance}function Xy(t,e,n){n.delete(t),t.flush()}Qy.instance=new Qy;class Yy{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&me(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){ib=this.h,this.h=this.v,this.subs.notify(this.v,ib,this.f)}}class Jy{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){ib=this.h,this.h=this.v,this.subs.notify(this.v,ib,this.f)}}function tb(t){const e=t.prototype;Pm(e,"subscribe",eb,!0),Pm(e,"unsubscribe",nb,!0),Ky(t),Dy(t)}function eb(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function nb(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let ib;tb(Yy),tb(Jy);const sb=new WeakMap;function rb(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function ob(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function ab(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function lb(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,y,b,w,x,k,S,C=0,A=0;for(;;){if(i-n<=10)return void ab(t,e,n,i,s);C=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[C],h=e[C],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,y=n+1,b=i-1,t[C]=t[y],e[C]=e[y],t[y]=v,e[y]=m;t:for(A=y+1;A<b;A++)if(w=t[A],x=e[A],k=s(w,v),k<0)t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,y++;else if(k>0){do{if(b--,b==A)break t;S=t[b],k=s(S,v)}while(k>0);t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,k<0&&(w=t[A],x=e[A],t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,y++)}i-b<y-n?(lb(t,e,b,i,s),i=y):(lb(t,e,n,y,s),n=b)}}const cb=Array.prototype,hb=cb.push,ub=cb.unshift,db=cb.pop,pb=cb.shift,fb=cb.splice,gb=cb.reverse,vb=cb.sort,mb=["push","unshift","pop","shift","splice","reverse","sort"],yb={push:function(...t){const e=sb.get(this);if(void 0===e)return hb.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=sb.get(this);if(void 0===e)return ub.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;ub.apply(e.indexMap,i);const r=ub.apply(this,t);return e.notify(),r},pop:function(){const t=sb.get(this);if(void 0===t)return db.call(this);const e=t.indexMap,n=db.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),db.call(e),t.notify(),n},shift:function(){const t=sb.get(this);if(void 0===t)return pb.call(this);const e=t.indexMap,n=pb.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),pb.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=sb.get(this);if(void 0===i)return fb.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;fb.call(a,e,n,...i)}else fb.apply(a,t);const h=fb.apply(this,t);return i.notify(),h},reverse:function(){const t=sb.get(this);if(void 0===t)return gb.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=sb.get(this);if(void 0===e)return vb.call(this,t),this;const n=this.length;if(n<2)return this;lb(this,e.indexMap,0,n,ob);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&Im(t)||(t=rb),lb(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of mb)$m(yb[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let bb=!1;class wb{constructor(t){this.type=18,bb||(bb=!0,function(){for(const t of mb)!0!==cb[t].observing&&Rm(cb,t,yb[t])}()),this.indexObservers={},this.collection=t,this.indexMap=Vy(t.length),this.lenObs=void 0,sb.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=Vy(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Yy(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new xb(this,t)}}class xb{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function kb(t){let e=sb.get(t);return void 0===e&&(e=new wb(t)),e}Dy(wb),Dy(xb);const Sb=new WeakMap,Cb=Set.prototype,Ab=Cb.add,Eb=Cb.clear,Tb=Cb.delete,$b=["add","clear","delete"],Ib={add:function(t){const e=Sb.get(this);if(void 0===e)return Ab.call(this,t),this;const n=this.size;return Ab.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=Sb.get(this);if(void 0===t)return Eb.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Eb.call(this),e.length=0,t.notify()}},delete:function(t){const e=Sb.get(this);if(void 0===e)return Tb.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Tb.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},Ob={writable:!0,enumerable:!1,configurable:!0};for(const t of $b)$m(Ib[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Rb=!1;class Pb{constructor(t){this.type=34,Rb||(Rb=!0,function(){for(const t of $b)!0!==Cb[t].observing&&$m(Cb,t,{...Ob,value:Ib[t]})}()),this.collection=t,this.indexMap=Vy(t.size),this.lenObs=void 0,Sb.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Vy(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Jy(this)}}function Lb(t){let e=Sb.get(t);return void 0===e&&(e=new Pb(t)),e}Dy(Pb);const Mb=new WeakMap,jb=Map.prototype,Ub=jb.set,Nb=jb.clear,Bb=jb.delete,Fb=["set","clear","delete"],Vb={set:function(t,e){const n=Mb.get(this);if(void 0===n)return Ub.call(this,t,e),this;const i=this.get(t),s=this.size;if(Ub.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=Mb.get(this);if(void 0===t)return Nb.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Nb.call(this),e.length=0,t.notify()}},delete:function(t){const e=Mb.get(this);if(void 0===e)return Bb.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Bb.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},Db={writable:!0,enumerable:!1,configurable:!0};for(const t of Fb)$m(Vb[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let zb=!1;class qb{constructor(t){this.type=66,zb||(zb=!0,function(){for(const t of Fb)!0!==jb[t].observing&&$m(jb,t,{...Db,value:Vb[t]})}()),this.collection=t,this.indexMap=Vy(t.size),this.lenObs=void 0,Mb.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Vy(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Jy(this)}}function Hb(t){let e=Mb.get(t);return void 0===e&&(e=new qb(t)),e}function Zb(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function Wb(){return Rm(this,"obs",new Xb(this))}function Kb(t){let e;if(t instanceof Array)e=kb(t);else if(t instanceof Set)e=Lb(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=Hb(t)}this.obs.add(e)}function _b(t){this.obs.add(t)}function Qb(){throw new Error("AUR2011:handleChange")}function Gb(){throw new Error("AUR2012:handleCollectionChange")}Dy(qb);class Xb{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(Jb,this),this.count=this.o.size}clearAll(){this.o.forEach(Yb,this),this.o.clear(),this.count=0}}function Yb(t,e){e.unsubscribe(this)}function Jb(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function tw(t){const e=t.prototype;return Pm(e,"observe",Zb,!0),Pm(e,"observeCollection",Kb,!0),Pm(e,"subscribeTo",_b,!0),$m(e,"obs",{get:Wb}),Pm(e,"handleChange",Qb),Pm(e,"handleCollectionChange",Gb),t}function ew(t){return null==t?tw:tw(t)}tw(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}}),Xe.createInterface("IExpressionParser",(t=>t.singleton(nw)));class nw{constructor(){this.u=Lm(),this.A=Lm(),this.U=Lm()}parse(t,e){let n;switch(e){case 16:return new ry(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return by.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return gw.ip=t,gw.length=t.length,gw.index=0,gw.O=t.charCodeAt(0),vw(gw,0,61,void 0===e?8:e)}}var iw,sw,rw,ow;function aw(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(iw||(iw={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(sw||(sw={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(rw||(rw={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(ow||(ow={}));const lw=by.$false,cw=by.$true,hw=by.$null,uw=by.$undefined,dw=hy.$this,pw=hy.$parent;var fw;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(fw||(fw={}));const gw=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function vw(t,e,n,i){if(16===i)return new ry(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),yw(t);const i=vw(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(aw(bw(t)));break;default:s+=String.fromCharCode(t.O)}bw(t)}return n.length?(e.push(s),new Iy(e,n)):null}(t);if(yw(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=Aw[63&t.$];yw(t),s=new yy(n,vw(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(yw(t),e++,!Sw(t,16393)){if(524288&t.$){const t=511&e;s=0===t?dw:1===t?pw:new hy(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new Ey(t.L):(s=new uy(t.L,511&e),e=1024),t.R=!0,yw(t);break;case 3076:t.R=!1,yw(t),s=dw,e=512;break;case 671751:yw(t),s=vw(t,0,62,i),Cw(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new Oy(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(yw(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return Cw(t,1835022),n;function o(){""!==i?(e.push(new Ry(new dy(dw,i),new py(dw,new by(r++)),void 0)),i=""):r++}}(t):function(t,e,n){yw(t);const i=new Array;for(;1835022!==t.$;)if(Sw(t,1572876)){if(i.push(uw),1835022===t.$)break}else{if(i.push(vw(t,e,62,-3&n)),!Sw(t,1572876))break;if(1835022===t.$)break}return Cw(t,1835022),2&n?new Cy(i):(t.R=!1,new wy(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(yw(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)yw(t),Cw(t,1572879),i.push(vw(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;yw(t),Sw(t,1572879)?i.push(vw(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(vw(t,0,450,-3&e)))}}1835018!==t.$&&Cw(t,1572876)}return Cw(t,1835018),2&e?new Ay(n,i):(t.R=!1,new xy(n,i))}(t,i),e=0;break;case 540714:s=new ky([t.L]),t.R=!1,yw(t),e=0;break;case 540715:s=mw(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new by(t.L),t.R=!1,yw(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=Aw[63&t.$],t.R=!1,yw(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);yw(t);const n=e,i=vw(t,0,61,0);return new $y(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,yw(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,yw(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new uy(r,s.ancestor):new dy(s,r);continue;case 671757:t.R=!0,yw(t),e=4096,s=new py(s,vw(t,0,62,i)),Cw(t,1835022);break;case 671751:for(t.R=!1,yw(t);1835019!==t.$&&(n.push(vw(t,0,62,i)),Sw(t,1572876)););Cw(t,1835019),s=1024&e?new fy(r,n,s.ancestor):2048&e?new gy(s,r,n):new vy(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new Sy(o,o,s),yw(t);break;case 540715:s=mw(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;yw(t),s=new my(Aw[63&r],s,vw(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(Sw(t,1572880)){const n=vw(t,e,62,i);Cw(t,1572879),s=new cy(s,n,vw(t,e,62,i)),t.R=!1}if(62<n)return s;if(Sw(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new ly(s,vw(t,e,62,i))}if(61<n)return s;for(;Sw(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;yw(t);const r=new Array;for(;Sw(t,1572879);)r.push(vw(t,e,62,i));s=new ay(s,n,r)}for(;Sw(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;yw(t);const r=new Array;for(;Sw(t,1572879);)r.push(vw(t,e,62,i));s=new oy(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function mw(t,e,n,i,s){const r=[t.L];Cw(t,540715);const o=[vw(t,e,62,n)];for(;540714!==(t.$=kw(t));)r.push(t.L),Cw(t,540715),o.push(vw(t,e,62,n));return r.push(t.L),t.R=!1,s?(yw(t),new Sy(r,r,i,o)):(yw(t),new ky(r,o))}function yw(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=Lw[t.O](t)))return;t.$=1572864}function bw(t){return t.O=t.ip.charCodeAt(++t.index)}function ww(t,e){let n=t.O;if(!1===e){do{n=bw(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=bw(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=bw(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function xw(t){let e=!0,n="";for(;96!==bw(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(aw(bw(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return bw(t),t.L=n,e?540714:540715}function kw(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,xw(t)}function Sw(t,e){return t.$===e&&(yw(t),!0)}function Cw(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);yw(t)}const Aw=[lw,cw,hw,uw,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Ew=Lm();Ew.true=2049,Ew.null=2050,Ew.false=2048,Ew.undefined=2051,Ew.$this=3076,Ew.$parent=3078,Ew.in=1640799,Ew.instanceof=1640800,Ew.typeof=34851,Ew.void=34852,Ew.of=1051180;const Tw=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],$w=[48,58];function Iw(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function Ow(t){return e=>(bw(e),t)}const Rw=t=>{throw new Error(`AUR0168:${t.ip}`)};Rw.notMapped=!0,Iw(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const Pw=new Uint8Array(65535);Iw(Pw,null,Tw,1),Iw(Pw,null,$w,1);const Lw=new Array(65535);Lw.fill(Rw,0,65535),Iw(Lw,null,[0,33,127,161],(t=>(bw(t),null))),Iw(Lw,null,Tw,(function(t){for(;Pw[bw(t)];);const e=Ew[t.L=t.P];return void 0===e?1024:e})),Iw(Lw,null,$w,(t=>ww(t,!1))),Lw[34]=Lw[39]=t=>function(t){const e=t.O;bw(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),bw(t),n=aw(t.O),bw(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);bw(t)}const r=t.ip.slice(s,t.index);bw(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),Lw[96]=t=>xw(t),Lw[33]=t=>61!==bw(t)?32809:61!==bw(t)?1638680:(bw(t),1638682),Lw[61]=t=>61!==bw(t)?1048616:61!==bw(t)?1638679:(bw(t),1638681),Lw[38]=t=>38!==bw(t)?1572883:(bw(t),1638614),Lw[124]=t=>124!==bw(t)?1572884:(bw(t),1638549),Lw[46]=t=>bw(t)<=57&&t.O>=48?ww(t,!0):16393,Lw[60]=t=>61!==bw(t)?1638747:(bw(t),1638749),Lw[62]=t=>61!==bw(t)?1638748:(bw(t),1638750),Lw[37]=Ow(1638886),Lw[40]=Ow(671751),Lw[41]=Ow(1835019),Lw[42]=Ow(1638885),Lw[43]=Ow(623009),Lw[44]=Ow(1572876),Lw[45]=Ow(623010),Lw[47]=Ow(1638887),Lw[58]=Ow(1572879),Lw[63]=Ow(1572880),Lw[91]=Ow(671757),Lw[93]=Ow(1835022),Lw[123]=Ow(131080),Lw[125]=Ow(1835018);let Mw=null;const jw=[];let Uw=!1;function Nw(){return Mw}function Bw(t){if(null==t)throw new Error("AUR0206");if(null==Mw)return Mw=t,jw[0]=Mw,void(Uw=!0);if(Mw===t)throw new Error("AUR0207");jw.push(t),Mw=t,Uw=!0}function Fw(t){if(null==t)throw new Error("AUR0208");if(Mw!==t)throw new Error("AUR0209");jw.pop(),Mw=jw.length>0?jw[jw.length-1]:null,Uw=null!=Mw}Object.freeze({get current(){return Mw},get connecting(){return Uw},enter:Bw,exit:Fw,pause:function(){Uw=!1},resume:function(){Uw=!0}});const Vw=Reflect.get,Dw=Object.prototype.toString,zw=new WeakMap;function qw(t){switch(Dw.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Hw="__raw__";function Zw(t){return qw(t)?Ww(t):t}function Ww(t){var e;return null!==(e=zw.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?Xw:t instanceof Map||t instanceof Set?wx:Gw,n=new Proxy(t,e);return zw.set(t,n),n}(t)}function Kw(t){var e;return null!==(e=t.__raw__)&&void 0!==e?e:t}function _w(t){return qw(t)&&t.__raw__||t}function Qw(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const Gw={get(t,e,n){if(e===Hw)return t;const i=Nw();return!Uw||Qw(e)||null==i?Vw(t,e,n):(i.observe(t,e),Zw(Vw(t,e,n)))}},Xw={get(t,e,n){if(e===Hw)return t;const i=Nw();if(!Uw||Qw(e)||null==i)return Vw(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return Yw;case"includes":return ex;case"indexOf":return nx;case"lastIndexOf":return ix;case"every":return Jw;case"filter":return tx;case"find":return rx;case"findIndex":return sx;case"flat":return ox;case"flatMap":return ax;case"join":return lx;case"push":return hx;case"pop":return cx;case"reduce":return yx;case"reduceRight":return bx;case"reverse":return fx;case"shift":return ux;case"unshift":return dx;case"slice":return mx;case"splice":return px;case"some":return gx;case"sort":return vx;case"keys":return $x;case"values":case Symbol.iterator:return Ix;case"entries":return Ox}return i.observe(t,e),Zw(Vw(t,e,n))},ownKeys(t){var e;return null===(e=Nw())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function Yw(t,e){var n;const i=Kw(this),s=i.map(((n,i)=>_w(t.call(e,Zw(n),i,this))));return null===(n=Nw())||void 0===n||n.observeCollection(i),Zw(s)}function Jw(t,e){var n;const i=Kw(this),s=i.every(((n,i)=>t.call(e,Zw(n),i,this)));return null===(n=Nw())||void 0===n||n.observeCollection(i),s}function tx(t,e){var n;const i=Kw(this),s=i.filter(((n,i)=>_w(t.call(e,Zw(n),i,this))));return null===(n=Nw())||void 0===n||n.observeCollection(i),Zw(s)}function ex(t){var e;const n=Kw(this),i=n.includes(_w(t));return null===(e=Nw())||void 0===e||e.observeCollection(n),i}function nx(t){var e;const n=Kw(this),i=n.indexOf(_w(t));return null===(e=Nw())||void 0===e||e.observeCollection(n),i}function ix(t){var e;const n=Kw(this),i=n.lastIndexOf(_w(t));return null===(e=Nw())||void 0===e||e.observeCollection(n),i}function sx(t,e){var n;const i=Kw(this),s=i.findIndex(((n,i)=>_w(t.call(e,Zw(n),i,this))));return null===(n=Nw())||void 0===n||n.observeCollection(i),s}function rx(t,e){var n;const i=Kw(this),s=i.find(((e,n)=>t(Zw(e),n,this)),e);return null===(n=Nw())||void 0===n||n.observeCollection(i),Zw(s)}function ox(){var t;const e=Kw(this);return null===(t=Nw())||void 0===t||t.observeCollection(e),Zw(e.flat())}function ax(t,e){var n;const i=Kw(this);return null===(n=Nw())||void 0===n||n.observeCollection(i),Ww(i.flatMap(((n,i)=>Zw(t.call(e,Zw(n),i,this)))))}function lx(t){var e;const n=Kw(this);return null===(e=Nw())||void 0===e||e.observeCollection(n),n.join(t)}function cx(){return Zw(Kw(this).pop())}function hx(...t){return Kw(this).push(...t)}function ux(){return Zw(Kw(this).shift())}function dx(...t){return Kw(this).unshift(...t)}function px(...t){return Zw(Kw(this).splice(...t))}function fx(...t){var e;const n=Kw(this),i=n.reverse();return null===(e=Nw())||void 0===e||e.observeCollection(n),Zw(i)}function gx(t,e){var n;const i=Kw(this),s=i.some(((n,i)=>_w(t.call(e,Zw(n),i,this))));return null===(n=Nw())||void 0===n||n.observeCollection(i),s}function vx(t){var e;const n=Kw(this),i=n.sort(t);return null===(e=Nw())||void 0===e||e.observeCollection(n),Zw(i)}function mx(t,e){var n;const i=Kw(this);return null===(n=Nw())||void 0===n||n.observeCollection(i),Ww(i.slice(t,e))}function yx(t,e){var n;const i=Kw(this),s=i.reduce(((e,n,i)=>t(e,Zw(n),i,this)),e);return null===(n=Nw())||void 0===n||n.observeCollection(i),Zw(s)}function bx(t,e){var n;const i=Kw(this),s=i.reduceRight(((e,n,i)=>t(e,Zw(n),i,this)),e);return null===(n=Nw())||void 0===n||n.observeCollection(i),Zw(s)}const wx={get(t,e,n){if(e===Hw)return t;const i=Nw();if(!Uw||Qw(e)||null==i)return Vw(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Ex;case"delete":return Tx;case"forEach":return xx;case"add":if(t instanceof Set)return Ax;break;case"get":if(t instanceof Map)return Sx;break;case"set":if(t instanceof Map)return Cx;break;case"has":return kx;case"keys":return $x;case"values":return Ix;case"entries":return Ox;case Symbol.iterator:return t instanceof Map?Ox:Ix}return Zw(Vw(t,e,n))}};function xx(t,e){var n;const i=Kw(this);return null===(n=Nw())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,Zw(n),Zw(i),this)}))}function kx(t){var e;const n=Kw(this);return null===(e=Nw())||void 0===e||e.observeCollection(n),n.has(_w(t))}function Sx(t){var e;const n=Kw(this);return null===(e=Nw())||void 0===e||e.observeCollection(n),Zw(n.get(_w(t)))}function Cx(t,e){return Zw(Kw(this).set(_w(t),_w(e)))}function Ax(t){return Zw(Kw(this).add(_w(t)))}function Ex(){return Zw(Kw(this).clear())}function Tx(t){return Zw(Kw(this).delete(_w(t)))}function $x(){var t;const e=Kw(this);null===(t=Nw())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Zw(e),done:i}},[Symbol.iterator](){return this}}}function Ix(){var t;const e=Kw(this);null===(t=Nw())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Zw(e),done:i}},[Symbol.iterator](){return this}}}function Ox(){var t;const e=Kw(this);null===(t=Nw())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[Zw(e[0]),Zw(e[1])],done:i}},[Symbol.iterator](){return this}}}Object.freeze({getProxy:Ww,getRaw:Kw,wrap:Zw,unwrap:_w,rawKey:Hw});class Rx{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new Rx(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,$m(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!Im(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){Px=this.ov,this.ov=this.v,this.subs.notify(this.v,Px,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return Bw(this),this.v=_w(this.get.call(this.up?Zw(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,Fw(this)}}}let Px;ew(Rx),Dy(Rx),Ky(Rx);const Lx=Xe.createInterface("IDirtyChecker",(t=>t.singleton(Ux))),Mx={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},jx={persistent:!0};class Ux{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(Mx.disabled)return;if(++this.j<Mx.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(Mx.throw)throw new Error(`AUR0222:${e}`);return new Nx(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,jx))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}Ux.inject=[jn],Ky(Ux);class Nx{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}Dy(Nx);class Bx{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}let Fx;class Vx{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){Fx=this.ov,this.ov=this.v,this.subs.notify(this.v,Fx,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],$m(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&($m(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class Dx{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=Im(n);const s=t[e];this.cb=Im(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){Fx=this.ov,this.ov=this.v,this.subs.notify(this.v,Fx,this.f)}}Dy(Vx),Dy(Dx),Ky(Vx),Ky(Dx);const zx=new class{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}},qx=Xe.createInterface("IObserverLocator",(t=>t.singleton(Wx))),Hx=Xe.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(qn).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new Zx)))));class Zx{handles(){return!1}getObserver(){return zx}getAccessor(){return zx}}class Wx{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):zx}getArrayObserver(t){return kb(t)}getMapObserver(t){return Hb(t)}getSetObserver(t){return Lb(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new Bx(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return kb(t).getLengthObserver();break;case"size":if(t instanceof Map)return Hb(t).getLengthObserver();if(t instanceof Set)return Lb(t).getLengthObserver();break;default:if(t instanceof Array&&me(e))return kb(t).getIndexObserver(Number(e))}let o=_x(t,e);if(void 0===o){let n=Kx(t);for(;null!==n&&(o=_x(n,e),void 0===o);)n=Kx(n)}if(void 0!==o&&!Tm.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?Rx.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new Vx(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?($m(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}Wx.inject=[Lx,Hx];const Kx=Object.getPrototypeOf,_x=Object.getOwnPropertyDescriptor;Xe.createInterface("IObservation",(t=>t.singleton(Qx)));class Qx{constructor(t){this.oL=t}static get inject(){return[qx]}run(t){const e=new Gx(this.oL,t);return e.run(),e}}class Gx{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Bw(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,Fw(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}ew(Gx);class Xx{constructor(t,e,n,i={}){this.router=t,this.name=e,this.connectedCE=n,this.options=i,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}get activeContent(){var t;return null!==(t=this.getNextContent())&&void 0!==t?t:this.getContent()}get connectedScope(){var t;return null===(t=this.activeContent)||void 0===t?void 0:t.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){var t,e;return null!==(e=null===(t=this.connectedCE)||void 0===t?void 0:t.$controller)&&void 0!==e?e:null}get isViewport(){return this instanceof Ck}get isViewportScope(){return this instanceof yk}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){var n;return this.getContent().delete(),null===(n=this.getNextContent())||void 0===n||n.delete(),!0}canUnload(t){return!0}canLoad(t){return!0}unload(t){}load(t){}}class Yx{constructor(t,e,n,i,s=Ek.create(""),r=wk.create({instruction:"",fullStateInstruction:""})){var o,a;this.router=t,this.endpoint=e,this.instruction=s,this.navigation=r,this.completed=!1,this.connectedScope=new Rk(t,i,n,this),null!==this.router.rootScope&&(null!==(a=null===(o=this.endpoint.connectedScope)||void 0===o?void 0:o.parent)&&void 0!==a?a:this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){var t;null===(t=this.connectedScope.parent)||void 0===t||t.removeChild(this.connectedScope)}}class Jx{constructor(t=null,e="",n=[],i="",s={}){this.match=t,this.matching=e,this.instructions=n,this.remaining=i,this.params=s}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.length>0}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}function tk(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function ek(t,e){return function(n,i){e(n,i,t)}}class nk{static parse(t,e,n,i){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!nk.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const s=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===s.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);i=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),n=!0);const{instructions:o,remaining:a}=nk.parse(t,e,r,!1);s[s.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:n,remaining:r}=nk.parse(t,e,!0,i);s.push(...n),e=r}else if(e.startsWith(t.groupEnd)){n&&(e=e.slice(t.groupEnd.length));let i=0;const r=e.length;for(;i<r;i++){if(e.slice(i,i+t.sibling.length)===t.sibling)return{instructions:s,remaining:e};if(e.slice(i,i+t.groupEnd.length)!==t.groupEnd){if(s.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(i);break}}if(i>=r)return{instructions:s,remaining:e}}else if(e.startsWith(t.sibling)&&!nk.isAdd(t,e)){if(!n)return{instructions:s,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:n,remaining:i}=nk.parseOne(t,e);s.push(n),e=i}return{instructions:s,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const n=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let i,s,r,o,a,l=!0;const c=[t.add,t.clear];for(const s of c)if(e===s){i=e,e="",n.shift(),n.shift(),o=t.viewport;break}if(void 0===i)for(const s of c)if(e.startsWith(`${s}${t.viewport}`)){i=s,e=e.slice(`${s}${t.viewport}`.length),n.shift(),n.shift(),o=t.viewport;break}if(void 0===i&&(({token:o,pos:a}=nk.findNextToken(e,n)),i=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",n.shift(),o===t.parameters&&(({token:o,pos:a}=nk.findNextToken(e,[t.parametersEnd])),s=e.slice(0,a),e=e.slice(a+o.length),({token:o}=nk.findNextToken(e,n)),e=e.slice(o.length)),n.shift()),o===t.viewport&&(({token:o,pos:a}=nk.findNextToken(e,n)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),n.shift(),o===t.noScope&&(l=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(null!=i?i:""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);return{instruction:Ek.create(i,r,s,l),remaining:e}}static findNextToken(t,e){const n={};for(const i of e)t.indexOf(i)>-1&&(n[i]=t.indexOf(i));const i=Math.min(...Object.values(n));for(const t in n)if(n[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}}class ik{constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",n="top-down",i=" > ",s=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=n,this.componentTitleSeparator=i,this.useComponentNames=s,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new ik((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return ok.for(t).title}apply(t={}){var e,n,i,s,r,o;t="string"==typeof t?{appTitle:t}:t,this.appTitle=null!==(e=t.appTitle)&&void 0!==e?e:this.appTitle,this.appTitleSeparator=null!==(n=t.appTitleSeparator)&&void 0!==n?n:this.appTitleSeparator,this.componentTitleOrder=null!==(i=t.componentTitleOrder)&&void 0!==i?i:this.componentTitleOrder,this.componentTitleSeparator=null!==(s=t.componentTitleSeparator)&&void 0!==s?s:this.componentTitleSeparator,this.useComponentNames=null!==(r=t.useComponentNames)&&void 0!==r?r:this.useComponentNames,this.componentPrefix=null!==(o=t.componentPrefix)&&void 0!==o?o:this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class sk{constructor(t="@",e="+",n="/",i="(",s=")",r="!",o="(",a=")",l=",",c="=",h="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=n,this.groupStart=i,this.groupEnd=s,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=l,this.parameterKeySeparator=c,this.add=h,this.clear=u,this.action=d}static create(t={}){return new sk(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return ok.for(t).separators}apply(t={}){var e,n,i,s,r,o,a,l,c,h,u,d,p;this.viewport=null!==(e=t.viewport)&&void 0!==e?e:this.viewport,this.sibling=null!==(n=t.sibling)&&void 0!==n?n:this.sibling,this.scope=null!==(i=t.scope)&&void 0!==i?i:this.scope,this.groupStart=null!==(s=t.groupStart)&&void 0!==s?s:this.groupStart,this.groupEnd=null!==(r=t.groupEnd)&&void 0!==r?r:this.groupEnd,this.noScope=null!==(o=t.noScope)&&void 0!==o?o:this.noScope,this.parameters=null!==(a=t.parameters)&&void 0!==a?a:this.parameters,this.parametersEnd=null!==(l=t.parametersEnd)&&void 0!==l?l:this.parametersEnd,this.parameterSeparator=null!==(c=t.parameterSeparator)&&void 0!==c?c:this.parameterSeparator,this.parameterKeySeparator=null!==(h=t.parameterKeySeparator)&&void 0!==h?h:this.parameterKeySeparator,this.add=null!==(u=t.add)&&void 0!==u?u:this.add,this.clear=null!==(d=t.clear)&&void 0!==d?d:this.clear,this.action=null!==(p=t.action)&&void 0!==p?p:this.action}}class rk{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new rk(t.loadActive,t.viewportNavigating)}static for(t){return ok.for(t).indicators}apply(t={}){var e,n;this.loadActive=null!==(e=t.loadActive)&&void 0!==e?e:this.loadActive,this.viewportNavigating=null!==(n=t.viewportNavigating)&&void 0!==n?n:this.viewportNavigating}}class ok{constructor(t=sk.create(),e=rk.create(),n=!0,i=null,s=!0,r=0,o=!0,a=!0,l=!0,c=ik.create(),h=["guardedUnload","swapped","completed"],u="attach-next-detach-current"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=n,this.basePath=i,this.useHref=s,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=l,this.title=c,this.navigationSyncStates=h,this.swapOrder=u,this.registrationHooks=[]}static create(t={}){return new ok(sk.create(t.separators),rk.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,ik.create(t.title),t.navigationSyncStates,t.swapOrder)}static for(t){return t instanceof vS?t.options:(t=t instanceof qk?t.configuration:t.get(pS)).options}apply(t){var e,n,i,s,r,o,a,l,c;t=null!=t?t:{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=null!==(e=t.useUrlFragmentHash)&&void 0!==e?e:this.useUrlFragmentHash,this.basePath=null!==(n=t.basePath)&&void 0!==n?n:this.basePath,this.useHref=null!==(i=t.useHref)&&void 0!==i?i:this.useHref,this.statefulHistoryLength=null!==(s=t.statefulHistoryLength)&&void 0!==s?s:this.statefulHistoryLength,this.useDirectRouting=null!==(r=t.useDirectRouting)&&void 0!==r?r:this.useDirectRouting,this.useConfiguredRoutes=null!==(o=t.useConfiguredRoutes)&&void 0!==o?o:this.useConfiguredRoutes,this.additiveInstructionDefault=null!==(a=t.additiveInstructionDefault)&&void 0!==a?a:this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=null!==(l=t.navigationSyncStates)&&void 0!==l?l:this.navigationSyncStates,this.swapOrder=null!==(c=t.swapOrder)&&void 0!==c?c:this.swapOrder,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}var ak;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(ak||(ak={}));class lk{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new lk;return e.set(t),e}static parse(t,e,n=!1){if(null==e||0===e.length)return[];const i=sk.for(t),s=i.parameterSeparator,r=i.parameterKeySeparator;if("string"==typeof e){const t=[],i=e.split(s);for(const e of i){let i,s;[i,s]=e.split(r),void 0===s?(s=n?decodeURIComponent(i):i,i=void 0):n&&(i=decodeURIComponent(i),s=decodeURIComponent(s)),t.push({key:i,value:s})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,n=!1){if(!Array.isArray(e)||0===e.length)return"";const i=sk.for(t);return e.map((t=>{const e=void 0!==t.key&&n?encodeURIComponent(t.key):t.key,s=n?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==s?e+i.parameterKeySeparator+s:s})).join(i.parameterSeparator)}static contains(t,e){return Object.keys(e).every((n=>e[n]===t[n]))}parameters(t){return lk.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const n=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==n.length?1===n.length?n[0]:n:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=null!=e?e:[];const n=this.parameters(t),i={};for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const[s]=n.splice(e,1);i[t]=s.value}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const[s]=n.splice(e,1);i[t]=s.value}}for(const t of n.filter((t=>void 0!==t.key)))i[t.key]=t.value;let s=e.length;for(const t of n.filter((t=>void 0===t.key)))i[s++]=t.value;return i}toSortedParameters(t,e){e=e||[];const n=this.parameters(t),i=[];for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const t={...n.splice(e,1)[0]};t.key=void 0,i.push(t)}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const t={...n.splice(e,1)[0]};i.push(t)}else i.push({value:void 0})}const s=n.filter((t=>void 0!==t.key));return s.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),i.push(...s),i.push(...n.filter((t=>void 0===t.key))),i}same(t,e,n){const i=null!==n?n.parameters:[],s=this.toSpecifiedParameters(t,i),r=e.toSpecifiedParameters(t,i);return Object.keys(s).every((t=>s[t]===r[t]))&&Object.keys(r).every((t=>r[t]===s[t]))}}class ck{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new ck;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return Sh.isType(t.Type)}static isType(t){return Sh.isType(t)}static isInstance(t){return function(t){return Nt(t)&&Sh.isType(t.constructor)}(t)}static isAppelation(t){return ck.isName(t)||ck.isType(t)||ck.isInstance(t)}static getName(t){return ck.isName(t)?t:ck.isType(t)?Sh.getDefinition(t).name:ck.getName(t.constructor)}static getType(t){return ck.isName(t)?null:ck.isType(t)?t:t.constructor}static getInstance(t){return ck.isName(t)||ck.isType(t)?null:t}set(t){let e=null,n=null,i=null,s=null,r=null;t instanceof Promise?s=t:ck.isName(t)?e=ck.getName(t):ck.isType(t)?(e=this.getNewName(t),n=ck.getType(t)):ck.isInstance(t)?(e=this.getNewName(ck.getType(t)),n=ck.getType(t),i=ck.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=n,this.instance=i,this.promise=s,this.func=r}resolve(){if(null!==this.func&&this.set(this.func()),this.promise instanceof Promise)return this.promise.then((t=>{if(ck.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const n=e[0];this.set(t[n])}))}get none(){return!this.isName()&&!this.isType()&&!this.isInstance()}isName(){return!!this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t){if(null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(Sh.keyFrom(this.name),!0)){const e=t.getResolver(Sh.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const n=e.getFactory(t);if(n)return n.Type}}}return null}toInstance(t){if(null!==this.instance)return this.instance;if(null!=t){const e=this.isType()?t.get(this.type):t.get(Sh.keyFrom(this.name));return!this.isType()||e instanceof this.type||console.warn("Failed to instantiate",this.type,e),null!=e?e:null}return null}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?ck.getName(t):this.name}}function hk(t,e){const n=[];let i=t.findIndex(e);for(;i>=0;)n.push(t.splice(i,1)[0]),i=t.findIndex(e);return n}function uk(t,e=!1){return t.filter(((t,n,i)=>(e||null!=t)&&i.indexOf(t)===n))}class dk{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class pk{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return null==e?void 0:e[0];let s=!1;null===t&&(t=new fk,s=!0);const r=new fk(e.shift());return pk.connect(t,r,null!==(i=null==t?void 0:t.runParallel)&&void 0!==i&&i||s),e.length>0&&pk.add(r,!1,...e),s?(pk.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):r}static runParallel(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return[];let s=!1;return null===t?(t=new fk,s=!0):t=pk.connect(t,new fk,!0),pk.add(t,!0,...e),s&&pk.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?null!==(i=t.result)&&void 0!==i?i:[]:t}static step(t){if(t instanceof Promise)return pk.runners.get(t)}static cancel(t){const e=pk.step(t);void 0!==e&&e.cancel()}static add(t,e,...n){let i=new fk(n.shift(),e);null!==t&&(i=pk.connect(t,i,e));const s=i;for(;n.length>0;)i=pk.connect(i,new fk(n.shift(),e),!1);return s}static connect(t,e,n){if(n){const n=t.child;t.child=e,e.parent=t,e.next=n,null!==n&&(n.parent=null,n.previous=e)}else{const n=t.next;t.next=e,e.previous=t,e.next=n,null!==n&&(n.previous=e,n.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)pk.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const n=t.value;pk.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,pk.settlePromise(t),t.isDone=!0,t.isDoing=!1;const n=t.nextToDo();null===n||t.isExited?(t.root.doneAll||t.isExited)&&pk.settlePromise(t.root):pk.process(n)})).catch((t=>{throw t}))})(t,n)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?pk.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&pk.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new dk,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){var n,i,s,r;if(null!==(i=null===(n=t.finally)||void 0===n?void 0:n.isPending)&&void 0!==i&&i)switch(t.promise=null,e){case"resolve":null===(s=t.finally)||void 0===s||s.resolve(t.result);break;case"reject":null===(r=t.finally)||void 0===r||r.reject(t.result)}}}pk.runners=new WeakMap,pk.roots={};class fk{constructor(t,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+fk.id++}get isParallelParent(){var t,e;return null!==(e=null===(t=this.child)||void 0===t?void 0:t.runParallel)&&void 0!==e&&e}get result(){var t,e;if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:null===(e=null===(t=this.child)||void 0===t?void 0:t.tail)||void 0===e?void 0:e.result}let n=this.value;for(;n instanceof fk;)n=n.result;return n}get asValue(){return this.result}get previousValue(){var t,e,n,i;return this.runParallel?null===(n=null===(e=null===(t=this.head.parent)||void 0===t?void 0:t.parent)||void 0===e?void 0:e.previous)||void 0===n?void 0:n.result:null===(i=this.previous)||void 0===i?void 0:i.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){var e,n;return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,null===(e=this.child)||void 0===e||e.cancel(!1),null===(n=this.next)||void 0===n||n.cancel(!1),!0)}exit(t=!0){var e,n;return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,null===(e=this.child)||void 0===e||e.exit(!1),null===(n=this.next)||void 0===n||n.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){var t;let e=this.next;for(;null!==e;){if(!e.isDoing&&!e.isDone)return e;e=e.next}const n=null!==(t=this.head.parent)&&void 0!==t?t:null;return null!==n&&n.done?n.nextOrUp():null}get path(){var t,e;return`${null!==(e=null===(t=this.head.parent)||void 0===t?void 0:t.path)&&void 0!==e?e:""}/${this.name}`}get tree(){let t="",e=this.head,n=e.parent,i="";for(;null!==n;)i=`${n.path}${i}`,n=n.head.parent;do{if(t+=`${i}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){var t,e,n,i;let s=`${this.path}\n`;return s+=null!==(e=null===(t=this.child)||void 0===t?void 0:t.report)&&void 0!==e?e:"",s+=null!==(i=null===(n=this.next)||void 0===n?void 0:n.report)&&void 0!==i?i:"",s}}fk.id=0;class gk{constructor(t,e,n,i,s,r,o,a){this.path=t,this.id=e,this.redirectTo=n,this.instructions=i,this.caseSensitive=s,this.title=r,this.reloadBehavior=o,this.data=a}static isConfigured(t){return pm.hasOwn(gk.resourceKey,t)||"parameters"in t||"title"in t}static configure(t,e){const n=gk.create(t,e);return pm.define(gk.resourceKey,n,e),e}static getConfiguration(t){var e;const n=null!==(e=pm.getOwn(gk.resourceKey,t))&&void 0!==e?e:{};return Array.isArray(t.parameters)&&(n.parameters=t.parameters),"title"in t&&(n.title=t.title),n instanceof gk?n:gk.create(n,t)}static create(t,e=null){var n,i,s,r,o,a,l,c,h;null!==e&&(t=gk.transferTypeToComponent(t,e)),Sh.isType(t)?t=gk.getConfiguration(t):null===e&&(t={...t});const u=gk.transferIndividualIntoInstructions(t);gk.validateRouteConfiguration(u);let d=u.path;return Array.isArray(d)&&(d=d.join(",")),new gk(null!==(n=u.path)&&void 0!==n?n:"",null!==(s=null!==(i=u.id)&&void 0!==i?i:d)&&void 0!==s?s:null,null!==(r=u.redirectTo)&&void 0!==r?r:null,null!==(o=u.instructions)&&void 0!==o?o:null,null!==(a=u.caseSensitive)&&void 0!==a&&a,null!==(l=u.title)&&void 0!==l?l:null,null!==(c=u.reloadBehavior)&&void 0!==c?c:null,null!==(h=u.data)&&void 0!==h?h:null)}static transferTypeToComponent(t,e){var n;if(Sh.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const i=null!==(n={...t})&&void 0!==n?n:{};if("component"in i||"instructions"in i)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in i||(i.component=e),"path"in i||"redirectTo"in i||(i.path=Sh.getDefinition(e).name),i}static transferIndividualIntoInstructions(t){var e,n,i,s;if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(null!==(e=t.component)&&void 0!==e?e:null)||null!==(null!==(n=t.viewport)&&void 0!==n?n:null)||null!==(null!==(i=t.parameters)&&void 0!==i?i:null)||null!==(null!==(s=t.children)&&void 0!==s?s:null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}gk.resourceKey=ze.resource.keyFor("route");const vk={name:ze.resource.keyFor("routes"),isConfigured:t=>pm.hasOwn(vk.name,t)||"routes"in t,configure(t,e){const n=t.map((t=>gk.create(t)));return pm.define(vk.name,n,e),e},getConfiguration(t){const e=t,n=[],i=pm.getOwn(vk.name,t);return Array.isArray(i)&&n.push(...i),Array.isArray(e.routes)&&n.push(...e.routes),n.map((t=>t instanceof gk?t:gk.create(t)))}};class mk extends Yx{}class yk extends Xx{constructor(t,e,n,i,s,r=null,o={catches:[],source:null}){super(t,e,n),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new mk(t,this,i,s)),this.catches.length>0&&(this.instruction=Ek.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){var t;return null!==(t=this.options.source)&&void 0!==t?t:null}get catches(){var t;let e=null!==(t=this.options.catches)&&void 0!==t?t:[];return"string"==typeof e&&(e=e.split(",")),e}get default(){if(this.catches.length>0)return this.catches[0]}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.instruction)||void 0===t?void 0:t.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`vs:${this.name}[${s}->${r}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new mk(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){pk.run(null,(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){var n;const i=this.contents.findIndex((e=>e.navigation===t.navigation));let s=this.contents[i];if(this.remove){const t=new mk(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(i,1,t),s.delete(),s=t}s.completed=!0;let r=0;for(let t=0,e=i;t<e&&null!==(n=this.contents[0].navigation.completed)&&void 0!==n&&n;t++)r++;this.contents.splice(0,r),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation));if(this.contents.splice(n,1),this.add){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===Ek.clear(this.router)||t===Ek.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&hk(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){if(null!==this.rootComponentType){const t=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;return vk.getConfiguration(t)}return null}}class bk{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class wk extends class{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}{constructor(t={instruction:"",fullStateInstruction:""}){var e,n,i,s,r,o;super(t),this.navigation=new bk,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=null!==(e=t.fromBrowser)&&void 0!==e?e:this.fromBrowser,this.origin=null!==(n=t.origin)&&void 0!==n?n:this.origin,this.replacing=null!==(i=t.replacing)&&void 0!==i?i:this.replacing,this.refreshing=null!==(s=t.refreshing)&&void 0!==s?s:this.refreshing,this.untracked=null!==(r=t.untracked)&&void 0!==r?r:this.untracked,this.historyMovement=null!==(o=t.historyMovement)&&void 0!==o?o:this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){var t,e,n;return null!==(t=this.navigation.back)&&void 0!==t&&t||null!==(e=this.navigation.forward)&&void 0!==e&&e||null!==(n=this.navigation.refresh)&&void 0!==n&&n}static create(t={instruction:"",fullStateInstruction:""}){return new wk(t)}}class xk{constructor(){this.map=new Map}set(t,e){const n=this.map.get(t);n instanceof dk&&n.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof dk&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new dk;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof dk?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof dk)}clone(){const t=new xk;return t.map=new Map(this.map),t}}class kk extends Yx{constructor(t,e,n,i,s=Ek.create(""),r=wk.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,n,i,s,r),this.router=t,this.instruction=s,this.navigation=r,this.contentStates=new xk,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==(null==o?void 0:o.container)||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){var t,e;return this.instruction.route instanceof Jx&&null!==(null===(t=this.instruction.route.match)||void 0===t?void 0:t.reloadBehavior)?null===(e=this.instruction.route.match)||void 0===e?void 0:e.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){var e,n;return this.instruction.sameComponent(this.router,t.instruction,!0)&&(null!==(e=this.navigation.query)&&void 0!==e?e:"")===(null!==(n=t.navigation.query)&&void 0!==n?n:"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return ou.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(n){if(""===(null!=e?e:""))throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`);this.instruction.parameters.set([this.instruction.component.name]),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(t){throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`)}}this.contentStates.set("created",void 0),this.contentStates.has("loaded")||!this.instruction.component.instance||this.fromCache&&this.fromHistory||(this.contentController(t).parent=t.controller)}}canLoad(){var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const i=this.instruction.component.instance;if(null==i)return!0;this.contentStates.set("checkedLoad",void 0);const s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"canLoad").map((t=>e=>{const n=t(i,o,this.instruction,this.navigation);return"boolean"==typeof n?(!1===n&&e.exit(),n):"string"==typeof n?(e.exit(),[Ek.create(n,this.endpoint)]):n}));if(0!==a.length){const t=pk.run(null,...a);if(!0!==t)return!1!==t&&("string"==typeof t?[Ek.create(t,this.endpoint)]:t)}if(null==i.canLoad)return!0;const l=i.canLoad(o,this.instruction,this.navigation);return"boolean"==typeof l?l:"string"==typeof l?[Ek.create(l,this.endpoint)]:l}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=wk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"canUnload").map((n=>i=>{const s=n(e,this.instruction,t);return"boolean"==typeof s?(!1===s&&i.exit(),s):s}));if(0!==n.length){const t=pk.run(null,...n);if(!0!==t)return!1!==t&&t}if(!e.canUnload)return!0;const i=e.canUnload(this.instruction,t);if("boolean"!=typeof i&&!(i instanceof Promise))throw new Error(`Method 'canUnload' in component "${this.instruction.component.name}" needs to return true or false or a Promise resolving to true or false.`);return i}load(t){return pk.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const i=this.instruction.component.instance,s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"load").map((t=>()=>t(i,o,this.instruction,this.navigation)));return 0!==a.length?(null!=i.load&&a.push((()=>i.load(o,this.instruction,this.navigation))),pk.run(null,...a)):null!=i.load?i.load(o,this.instruction,this.navigation):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=wk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"unload").map((n=>()=>n(e,this.instruction,t)));return 0!==n.length?(null!=e.unload&&n.push((()=>e.unload(this.instruction,t))),pk.run(null,...n)):null!=e.unload?e.unload(this.instruction,t):void 0}activateComponent(t,e,n,i,s,r,o){return pk.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(n)),(()=>{if(this.contentStates.has("activating")||this.contentStates.has("activated"))return;this.contentStates.set("activating",void 0);const t=this.contentController(s);return t.activate(null!=e?e:t,n,i,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,n,i,s,r=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return pk.run(t,(()=>{if(r&&null!==s.element){const t=Array.from(s.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}this.contentStates.delete("activated"),this.contentStates.delete("activating");const t=this.contentController(s);return t.deactivate(null!=e?e:t,n,i)}))}disposeComponent(t,e,n=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance){if(!n)return this.contentStates.delete("created"),this.contentController(t).dispose();e.push(this)}}freeContent(t,e,n,i,s=!1){return pk.run(t,(()=>this.unload(n)),(t=>this.deactivateComponent(t,null,e.controller,0,e,s)),(()=>this.disposeComponent(e,i,s)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t)}toComponentInstance(t){return this.instruction.component.none?null:this.instruction.component.toInstance(t)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}getLifecycleHooks(t,e){var n;return(null!==(n=t.$controller.lifecycleHooks[e])&&void 0!==n?n:[]).map((t=>t.instance[e].bind(t.instance)))}}class Sk{constructor(t=!0,e=[],n="",i="",s=!1,r=!1,o=!1,a=!1,l=!1){this.scope=t,this.usedBy=e,this.fallback=i,this.noLink=s,this.noTitle=r,this.stateful=o,this.forceDescription=a,this.noHistory=l,this.default=void 0,this.default=n}static create(t){const e=new Sk;return void 0!==t&&e.apply(t),e}apply(t){var e,n,i,s,r,o,a,l,c;this.scope=null!==(e=t.scope)&&void 0!==e?e:this.scope,this.usedBy=null!==(n="string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)&&void 0!==n?n:this.usedBy,this.default=null!==(i=t.default)&&void 0!==i?i:this.default,this.fallback=null!==(s=t.fallback)&&void 0!==s?s:this.fallback,this.noLink=null!==(r=t.noLink)&&void 0!==r?r:this.noLink,this.noTitle=null!==(o=t.noTitle)&&void 0!==o?o:this.noTitle,this.stateful=null!==(a=t.stateful)&&void 0!==a?a:this.stateful,this.forceDescription=null!==(l=t.forceDescription)&&void 0!==l?l:this.forceDescription,this.noHistory=null!==(c=t.noHistory)&&void 0!==c?c:this.noHistory}}class Ck extends Xx{constructor(t,e,n,i,s,r){super(t,e,n),this.contents=[],this.forceRemove=!1,this.options=new Sk,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new kk(t,this,i,s)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){var t;if(1===this.contents.length)return this.contents[0];let e;for(let n=0,i=this.contents.length;n<i&&null!==(t=this.contents[n].completed)&&void 0!==t&&t;n++)e=this.contents[n];return e}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let n=0,i=this.contents.length;n<i&&!(this.contents[n].navigation.timestamp>t);n++)e=this.contents[n];return e}get parentViewport(){let t=this.connectedScope;for(;null!=(null==t?void 0:t.parent);)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.getContent())||void 0===t?void 0:t.instruction.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`v:${this.name}[${s}->${r}]`}setNextContent(t,e){var n;t.endpoint.set(this),this.clear=t.isClear(this.router);const i=this.contents[this.contents.length-1],s=new kk(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,null!==(n=this.connectedCE)&&void 0!==n?n:null);if(this.contents.push(s),s.fromHistory=!(null===s.componentInstance||!e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>s.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(s),1,t),s.fromCache=!0):this.cache.push(s)}return null!==s.componentInstance&&i.componentInstance===s.componentInstance?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):!i.equalComponent(s)||e.navigation.refresh||"refresh"===i.reloadBehavior?this.transitionAction="swap":"disallow"===i.reloadBehavior?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):"reload"===i.reloadBehavior?(i.reload=!0,s.instruction.component.set(i.componentInstance),s.contentStates=i.contentStates.clone(),s.reload=i.reload,this.transitionAction="reload"):this.options.stateful&&i.equalParameters(s)||i.equalParameters(s)?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){var n,i,s,r,o;e=null!=e?e:{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),null!=this.connectionResolve&&this.connectionResolve());const a=(null!==(i=null===(n=this.scope.parent)||void 0===n?void 0:n.endpoint.getRoutes())&&void 0!==i?i:[]).filter((t=>""===t.path)).length>0;if(null===this.getContent().componentInstance&&null==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance)&&(this.options.default||a)){const t=Ek.parse(this.router,null!==(r=this.options.default)&&void 0!==r?r:"");if(0===t.length&&a){const e=null===(o=this.scope.parent)||void 0===o?void 0:o.findInstructions([Ek.create("")],!1,this.router.configuration.options.useConfiguredRoutes);(null==e?void 0:e.foundConfiguration)&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&pk.run(t,(t=>{var e,n;if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),pk.run(t,...e)}return!0}))}async transition(t){var e,n,i,s;const r=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let o=this.parentViewport;null!==o&&"reload"!==o.transitionAction&&"swap"!==o.transitionAction&&(o=null);const a=[e=>{if(this.isActiveNavigation(t))return this.canUnload(e)},e=>{this.isActiveNavigation(t)&&(e.previousValue?this.router.isRestrictedNavigation&&this.getNextContent().createComponent(this.connectedCE,this.options.fallback):t.cancel()),t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==o?t.waitForEndpointState(o,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(e)},e=>{if(this.isActiveNavigation(t)){const n=e.previousValue;if("boolean"!=typeof n)return pk.run(e,(()=>this.router.load(n,{append:!0})),(e=>this.cancelContentChange(t,e)));if(!n)return e.cancel(),void t.cancel()}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],l=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==o?t.waitForEndpointState(o,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],c=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":c.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":c.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":c.push((e=>pk.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":c.push((e=>pk.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}c.push((()=>t.addEndpointState(this,"swapped"))),null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!0),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!0);const h=pk.run(null,(e=>t.setEndpointStep(this,e.root)),...a,...l,...c,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{var e,n,i,s;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!1),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!1)}));h instanceof Promise&&h.catch((t=>{}))}canUnload(t){return pk.run(t,(t=>this.getContent().connectedScope.canUnload(t)),(t=>{var e,n;return!!t.previousValue&&this.getContent().canUnload(null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null)}))}canLoad(t){return!!this.clear||pk.run(t,(()=>this.waitForConnected()),(()=>(this.getNextContent().createComponent(this.connectedCE,this.options.fallback),this.getNextContent().canLoad())))}load(t){if(!this.clear)return this.getNextContent().load(t)}addContent(t,e){return this.activate(t,null,this.connectedController,0,e)}removeContent(t,e){var n;if(this.isEmpty)return;const i=this.router.statefulHistory||null!==(n=this.options.stateful)&&void 0!==n&&n;return pk.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController,i?0:16)),(()=>i?this.dispose():void 0))}activate(t,e,n,i,s){if(null!==this.activeContent.componentInstance)return pk.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,n,i,this.connectedCE,(()=>null==s?void 0:s.addEndpointState(this,"bound")),null==s?void 0:s.waitForSyncState("bound"))))}deactivate(t,e,n,i){var s;const r=this.getContent();if(null!=(null==r?void 0:r.componentInstance)&&!r.reload&&r.componentInstance!==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance))return r.deactivateComponent(t,e,n,i,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t){return pk.run(t,(t=>this.getContent().connectedScope.unload(t)),(()=>{var t,e;return null!=this.getContent().componentInstance?this.getContent().unload(null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.navigation)&&void 0!==e?e:null):void 0}))}dispose(){var t;null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===(null===(t=this.getNextContent())||void 0===t?void 0:t.componentInstance)||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){var n,i,s,r,o;const a=this.contents.findIndex((e=>e.navigation===t.navigation));let l=this.contents[a];const c=this.contents[a-1];if(this.clear){const t=new kk(this.router,this,this.owningScope,this.scope.hasScope,void 0,l.navigation);this.contents.splice(a,1,t),l.delete(),l=t}else l.reload=!1;c.delete(),l.completed=!0,this.transitionAction="",l.contentStates.delete("checkedUnload"),l.contentStates.delete("checkedLoad"),this.previousViewportState=null;const h=this.router.configuration.options.indicators.viewportNavigating;null===(i=null===(n=this.connectedCE)||void 0===n?void 0:n.setActivity)||void 0===i||i.call(n,h,!1),null===(r=null===(s=this.connectedCE)||void 0===s?void 0:s.setActivity)||void 0===r||r.call(s,t.navigation.navigation,!1);let u=0;for(let t=0,e=a;t<e&&null!==(o=this.contents[0].navigation.completed)&&void 0!==o&&o;t++)u++;this.contents.splice(0,u),hk(this.coordinators,(e=>e===t))}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation)),i=this.contents[n],s=this.contents[n-1];return pk.run(e,(t=>{if(null!=i)return i.freeContent(t,this.connectedCE,i.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)}),(()=>{var e,n,r,o;this.previousViewportState&&Object.assign(this,this.previousViewportState),null==i||i.delete(),null!==i&&this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="",null==s||s.contentStates.delete("checkedUnload"),null==s||s.contentStates.delete("checkedLoad");const a=this.router.configuration.options.indicators.viewportNavigating;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,a,!1),null===(o=null===(r=this.connectedCE)||void 0===r?void 0:r.setActivity)||void 0===o||o.call(r,t.navigation.navigation,!1),t.removeEndpoint(this),hk(this.coordinators,(e=>e===t))}),(()=>null==e?void 0:e.exit()))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const n=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==n)return pk.run(t,(t=>(this.forceRemove=!0,n.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,hk(this.historyCache,(t=>t===n))}))}getRoutes(){let t=this.getComponentType();if(null===t)return null;t=t.constructor===t.constructor.constructor?t:t.constructor;const e=vk.getConfiguration(t);return Array.isArray(e)?e:null}getTitle(t){var e,n;if(this.options.noTitle)return"";const i=this.getComponentType();if(null===i)return"";let s="";const r=i.title;if(void 0!==r)if("string"==typeof r)s=r;else{const e=this.getComponentInstance();s=r.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=null!==(e=this.getContentInstruction().component.name)&&void 0!==e?e:"";const i=null!==(n=this.router.configuration.options.title.componentPrefix)&&void 0!==n?n:"";t.startsWith(i)&&(t=t.slice(i.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){var t;let e=null!==(t=this.getContentInstruction().component.type)&&void 0!==t?t:null;return null===e&&(e=Sh.for(this.connectedCE.element).container.componentType),null!=e?e:null}getComponentInstance(){var t;return null!==(t=this.getContentInstruction().component.instance)&&void 0!==t?t:null}getContentInstruction(){var t,e,n;return null!==(n=null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.instruction)&&void 0!==e?e:this.getContent().instruction)&&void 0!==n?n:null}clearState(){this.options=Sk.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new kk(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class Ak{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof Ck?"Viewport":this.instance instanceof yk?"ViewportScope":null}static create(t){const e=new Ak;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof Xx}static getName(t){return Ak.isName(t)?t:t?t.name:null}static getInstance(t){return Ak.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class Ek{constructor(t,e,n){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.component=ck.create(t),this.endpoint=Ak.create(e),this.parameters=lk.create(n)}static create(t,e,n,i=!0,s=null){const r=new Ek(t,e,n);return r.ownsScope=i,r.nextScopeInstructions=s,r}static createClear(t,e){return Ek.create(Ek.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const n=[];for(const i of e)if("string"==typeof i)n.push(...Ek.parse(t,i));else if(i instanceof Ek)n.push(i);else if(i instanceof Promise)n.push(Ek.create(i));else if(ck.isAppelation(i))n.push(Ek.create(i));else if(ck.isDefinition(i))n.push(Ek.create(i.Type));else if("component"in i){const e=i,s=Ek.create(e.component,e.viewport,e.parameters);void 0!==e.children&&null!==e.children&&(s.nextScopeInstructions=Ek.from(t,e.children)),n.push(s)}else if("object"==typeof i&&null!==i){const t=Sh.define(i);n.push(Ek.create(t))}else n.push(Ek.create(i));return n}static clear(t){return sk.for(t).clear}static add(t){return sk.for(t).add}static parse(t,e){const n=sk.for(t);let i="";const s=/^[./]+/.exec(e);Array.isArray(s)&&s.length>0&&(i=s[0],e=e.slice(i.length));const r=nk.parse(n,e,!0,!0).instructions;for(const t of r)t.scopeModifier=i;return r}static stringify(t,e,n=!1,i=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,n,i))).filter((t=>t.length>0)).join(sk.for(t).sibling)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>Ek.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const n of t)e.push(n),n.hasNextScopeInstructions&&e.push(...Ek.flat(n.nextScopeInstructions));return e}static clone(t,e=!1,n=!1){return t.map((t=>t.clone(e,n)))}static contains(t,e,n,i){return n.every((n=>n.isIn(t,e,i)))}get viewport(){return this.endpoint.instance instanceof Ck||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof yk||null===this.endpoint.endpointType?this.endpoint:null}get previous(){var t,e;return null===(e=null===(t=this.endpoint.instance)||void 0===t?void 0:t.getContent())||void 0===e?void 0:e.instruction}isAdd(t){return this.component.name===sk.for(t).add}isClear(t){return this.component.name===sk.for(t).clear}isAddAll(t){var e,n;return this.isAdd(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}isClearAll(t){var e,n;return this.isClear(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}get hasNextScopeInstructions(){var t,e;return(null!==(e=null===(t=this.nextScopeInstructions)||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0}typeParameters(t){var e,n;return this.parameters.toSpecifiedParameters(t,null!==(n=null===(e=this.component.type)||void 0===e?void 0:e.parameters)&&void 0!==n?n:[])}sameComponent(t,e,n=!1,i=!1){return!(n&&!this.sameParameters(t,e,i))&&this.component.same(e.component,i)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,n=!1){return!!this.component.same(e.component,n)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,n=!1){var i,s,r,o,a;const l=sk.for(t);let c=e,h=!1;if(n){const t=null!==(s=null===(i=this.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==(r=null==t?void 0:t.options.noLink)&&void 0!==r&&r)return"";this.needsEndpointDescribed||null!==(o=null==t?void 0:t.options.forceDescription)&&void 0!==o&&o&&null==(null===(a=this.viewportScope)||void 0===a?void 0:a.instance)||(c=!0),(null==t?void 0:t.options.fallback)===this.component.name&&(h=!0),(null==t?void 0:t.options.default)===this.component.name&&(h=!0)}const u=this.nextScopeInstructions;let d=this.scopeModifier;if(null!==this.route){if(!this.routeStart)return Array.isArray(u)?Ek.stringify(t,u,e,n):"";const i=this.route.matching;d+=i.endsWith(l.scope)?i.slice(0,-l.scope.length):i}else d+=this.stringifyShallow(t,c,h);if(Array.isArray(u)&&u.length>0){const i=Ek.stringify(t,u,e,n);i.length>0&&(d+=l.scope,d+=1===u.length?i:`${l.groupStart}${i}${l.groupEnd}`)}return d}clone(t=!1,e=!1,n=!1){var i,s,r,o,a,l;const c=Ek.create(null!==(r=null!==(s=null!==(i=this.component.func)&&void 0!==i?i:this.component.promise)&&void 0!==s?s:this.component.type)&&void 0!==r?r:this.component.name,this.endpoint.name,null!==this.parameters.typedParameters?this.parameters.typedParameters:void 0);return t&&(c.component.set(null!==(a=null!==(o=this.component.instance)&&void 0!==o?o:this.component.type)&&void 0!==a?a:this.component.name),c.endpoint.set(null!==(l=this.endpoint.instance)&&void 0!==l?l:this.endpoint.name)),c.component.name=this.component.name,c.needsEndpointDescribed=this.needsEndpointDescribed,c.route=this.route,c.routeStart=this.routeStart,c.default=this.default,e&&(c.scopeModifier=this.scopeModifier),c.scope=t?this.scope:null,this.hasNextScopeInstructions&&!n&&(c.nextScopeInstructions=Ek.clone(this.nextScopeInstructions,t,e)),c}isIn(t,e,n){const i=e.filter((e=>{var n,i;if(!e.sameComponent(t,this))return!1;const s=null!==(n=e.component.type)&&void 0!==n?n:this.component.type,r=null!==(i=this.component.type)&&void 0!==i?i:e.component.type,o=e.parameters.toSpecifiedParameters(t,null==s?void 0:s.parameters),a=this.parameters.toSpecifiedParameters(t,null==r?void 0:r.parameters);return!!lk.contains(o,a)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===i.length||n&&this.hasNextScopeInstructions&&!i.some((e=>{var i;return Ek.contains(t,null!==(i=e.nextScopeInstructions)&&void 0!==i?i:[],this.nextScopeInstructions,n)})))}getTitle(t){var e;if(null!==this.route){const n=null===(e=this.route.match)||void 0===e?void 0:e.title;if(null!=n)return this.routeStart?"string"==typeof n?n:n(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){var t,e,n;return{component:null!==(t=this.component.name)&&void 0!==t?t:void 0,viewport:null!==(e=this.endpoint.name)&&void 0!==e?e:void 0,parameters:null!==(n=this.parameters.parametersRecord)&&void 0!==n?n:void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,n=!1){var i;const s=sk.for(t);let r=n?"":null!==(i=this.component.name)&&void 0!==i?i:"";const o=this.component.type?this.component.type.parameters:null,a=lk.stringify(t,this.parameters.toSortedParameters(t,o));return a.length>0&&(r+=n?a:`${s.parameters}${a}${s.parametersEnd}`),null==this.endpoint.name||e||(r+=`${s.viewport}${this.endpoint.name}`),this.ownsScope||(r+=s.noScope),r||""}}class Tk{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new Tk(Tk.eventName,t)}}Tk.eventName="au:router:navigation-navigate";let $k=class{constructor(t,e){this.ea=t,this.container=e,this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=wk.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.lastNavigationIndex=-1}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){var e,n,i,s;t instanceof wk||(t=wk.create(t));const r=new bk;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?r.refresh=!0:(r.first=!0,r.new=!0,this.lastNavigationIndex=0,this.navigations=[wk.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||null!==(e=t.replacing)&&void 0!==e&&e||null!==(n=t.refreshing)&&void 0!==n&&n?null!==(i=t.refreshing)&&void 0!==i&&i||r.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):null!==(s=t.replacing)&&void 0!==s&&s?(r.replace=!0,r.new=!0,t.index=this.lastNavigationIndex):(r.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?r.forward=!0:t.historyMovement<0&&(r.back=!0)),t.navigation=r,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new dk,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){var n,i,s,r,o,a,l;if(null!==(n=t.untracked)&&void 0!==n&&n)null!==(i=t.fromBrowser)&&void 0!==i&&i&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(null!==(s=t.replacing)&&void 0!==s&&s)0===(null!==(r=t.historyMovement)&&void 0!==r?r:0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const n=t.index;if(e&&(this.navigations=this.navigations.slice(0,n)),this.navigations[n]=t,(null!==(o=this.options.statefulHistoryLength)&&void 0!==o?o:0)>0){const t=this.navigations.length-(null!==(a=this.options.statefulHistoryLength)&&void 0!==a?a:0);for(const e of this.navigations.slice(n))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,n))}await this.saveState(t.index,!(null!==(l=t.fromBrowser)&&void 0!==l&&l))}}async cancel(t){var e,n,i;null!=this.options.store&&((null===(e=t.navigation)||void 0===e?void 0:e.new)?null!==(n=t.fromBrowser)&&void 0!==n&&n&&await this.options.store.popNavigatorState():0!==(null!==(i=t.historyMovement)&&void 0!==i?i:0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const n=this.navigations[e];return this.navigate(n)}getState(){var t,e;const n=null!=this.options.store?{...this.options.store.state}:{};return{navigations:null!==(t=null==n?void 0:n.navigations)&&void 0!==t?t:[],navigationIndex:null!==(e=null==n?void 0:n.navigationIndex)&&void 0!==e?e:-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>wk.create(t))),this.lastNavigationIndex=e}async saveState(t,e){var n,i,s,r,o;for(let t=0;t<this.navigations.length;t++)this.navigations[t]=wk.create(this.navigations[t].toStoredNavigation());if((null!==(n=this.options.statefulHistoryLength)&&void 0!==n?n:0)>0){const t=this.navigations.length-(null!==(i=this.options.statefulHistoryLength)&&void 0!==i?i:0);for(let e=0;e<t;e++){const n=this.navigations[e];"string"==typeof n.instruction&&"string"==typeof n.fullStateInstruction||await this.serializeNavigation(n,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const a={navigations:(null!==(s=this.navigations)&&void 0!==s?s:[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?null===(o=null===(r=this.options)||void 0===r?void 0:r.store)||void 0===o?void 0:o.pushNavigatorState(a):this.options.store.replaceNavigatorState(a)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(Tk.eventName,Tk.create(t))}toStoreableNavigation(t){const e=t instanceof wk?t.toStoredNavigation():t;return e.instruction=Ek.stringify(this.container,e.instruction),e.fullStateInstruction=Ek.stringify(this.container,e.fullStateInstruction),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let n=[];for(const t of e)"string"!=typeof t.instruction&&n.push(...Ek.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&n.push(...Ek.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));n=uk(n);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=Ek.stringify(this.container,t.fullStateInstruction)),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=Ek.stringify(this.container,t.instruction)),i=i.filter(((t,e,n)=>null!=t.component.instance&&n.indexOf(t)===e));const s=[];for(const t of i)await this.freeInstructionComponents(t,n,s)}freeInstructionComponents(t,e,n){var i,s;const r=t.component.instance,o=null!==(s=null===(i=t.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==r&&null!==o&&!n.some((t=>t===r))){if(!e.some((t=>t===r)))return pk.run(null,(t=>o.freeContent(t,r)),(()=>{n.push(r)}));if(t.hasNextScopeInstructions)for(const i of t.nextScopeInstructions)return this.freeInstructionComponents(i,e,n)}}};$k=tk([ek(0,oi),ek(1,tn)],$k);class Ik extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){hk(this,(e=>e===t))}}class Ok{static matchEndpoints(t,e,n,i=!1){const s=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!n.some((e=>t===e.endpoint.instance)))),o=new Ik(...e.slice());let a=null;for(Ok.matchKnownEndpoints(t.router,"ViewportScope",o,r,s,!1),i||Ok.matchKnownEndpoints(t.router,"Viewport",o,r,s,!1),Ok.matchViewportScopeSegment(t.router,t,o,r,s);null!==(a=o.next());)a.needsEndpointDescribed=!0;return Ok.matchViewportConfiguration(o,r,s),i||Ok.matchSpecifiedViewport(o,r,s,!1),Ok.matchLastViewport(o,r,s),i&&Ok.matchSpecifiedViewport(o,r,s,!1),{matchedInstructions:s,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,n,i,s,r=!1){let o;for(;null!==(o=n.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(Ok.matchEndpoint(o,o.endpoint.instance,r),s.push(o),hk(i,(t=>t===o.endpoint.instance)),n.removeCurrent())}static matchViewportScopeSegment(t,e,n,i,s){let r;for(;null!==(r=n.next());)for(let o of i)if(o instanceof yk&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let n=i.find((t=>t instanceof yk&&t.name===o.name));if(void 0===n||r.isAdd(t)){const t=o.addSourceItem();n=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=n}Ok.matchEndpoint(r,o,!1),s.push(r),hk(i,(t=>t===r.endpoint.instance)),n.removeCurrent();break}}static matchViewportConfiguration(t,e,n){let i;for(;null!==(i=t.next());)for(const s of e)if(s instanceof Ck&&(null==s?void 0:s.wantComponent(i.component.name))){Ok.matchEndpoint(i,s,!0),n.push(i),hk(e,(t=>t===i.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,n,i){var s;let r;for(;null!==(r=t.next());){let o=r.endpoint.instance;if(null==o){const t=r.endpoint.name;if(0===(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0))continue;for(const n of e)if(n instanceof Ck&&t===n.name){o=n;break}}(null==o?void 0:o.acceptComponent(r.component.name))&&(Ok.matchEndpoint(r,o,i),n.push(r),hk(e,(t=>t===r.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,n){let i;for(;null!==(i=t.next());){const s=[];for(const t of e)t instanceof Ck&&t.acceptComponent(i.component.name)&&s.push(t);if(1===s.length){const r=s[0];Ok.matchEndpoint(i,r,!0),n.push(i),hk(e,(t=>t===i.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,n){t.endpoint.set(e),n&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof Ck?e.scope:e.scope.scope)}))}}class Rk{constructor(t,e,n,i){this.router=t,this.hasScope=e,this.owningScope=n,this.endpointContent=i,this.id=-1,this.parent=null,this.children=[],this.path=null,this.id=++Rk.lastId,this.owningScope=null!=n?n:this}static for(t){var e;if(null==t)return null;if(t instanceof Rk||t instanceof Ck||t instanceof yk)return t.scope;let n;if("res"in t)n=t;else if("container"in t)n=t.container;else if("$controller"in t)n=t.$controller.container;else{const e=Sh.for(t,{searchParents:!0});n=null==e?void 0:e.container}if(null==n)return null;const i=n.has(qk.closestEndpointKey,!0)?n.get(qk.closestEndpointKey):null;return null!==(e=null==i?void 0:i.scope)&&void 0!==e?e:null}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof Ck}get isViewportScope(){return this.endpoint instanceof yk}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const n=t.indexOf(e);t.splice(n,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const n=e.indexOf(t);e.splice(n,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,n,i=""){var s,r,o,a;const l=this.router,c=l.configuration.options,h=t.filter((t=>null==t.route));if(h.length>0){const e=this.findInstructions(h,c.useDirectRouting,c.useConfiguredRoutes);!h.some((t=>!t.component.none))||e.foundConfiguration||e.foundInstructions||l.unknownRoute(Ek.stringify(l,h)),t=[...t.filter((t=>null!=t.route)),...e.instructions],t.some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(i=(null!=i?i:"")+e.matching)}const u=t.filter((t=>t.component.isFunction()||t.component.isPromise()));u.length>0&&await Promise.all(u.map((t=>t.component.resolve()))),c.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let d=[];({clearEndpoints:d,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(l))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;const p=[];let f=[],{matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(t,f),m=100;do{m--||l.unresolvedInstructionsError(e,v);const c=[],h=g.map((t=>t.endpoint.instance));g.push(...d.filter((t=>!h.includes(t))).map((t=>Ek.createClear(l,t))));const u=await Fk.invokeBeforeNavigation(g,e);if(!1===u)return l.cancelNavigation(e,n),[];if(!0!==u&&u!==g){const t=Ek.flat(g);v=v.filter((e=>!t.includes(e))),g=u}for(const t of g){const o=t.endpoint.instance;if(null!==o){const a=o.setNextContent(t,e);"skip"!==a&&(c.push(o),n.addEndpoint(o));const h=[o];if("swap"===a&&h.push(...o.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),hk(d,(t=>h.includes(t))),hk(g,(e=>e!==t&&e.isClear(l)&&h.includes(e.endpoint.instance))),!t.isClear(l)&&(null===(r=null===(s=t.scope)||void 0===s?void 0:s.parent)||void 0===r?void 0:r.isViewportScope)&&(hk(d,(e=>e===t.scope.parent.endpoint)),hk(g,(e=>e!==t&&e.isClear(l)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==a&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=o.scope,e.endpoint.instance=null;"skip"!==a||t.hasNextScopeInstructions||p.push(...await o.scope.processInstructions([],e,n,i))}}const y=g.filter((t=>{var e;return"skip"===(null===(e=t.endpoint.instance)||void 0===e?void 0:e.transitionAction)})),b=y.filter((t=>t.hasNextScopeInstructions));if((0===y.length||0===b.length)&&(l.isRestrictedNavigation||n.finalEndpoint(),n.run(),n.hasAllEndpoints)){const t=n.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(n.cancelled)return l.cancelNavigation(e,n),[];for(const t of c)p.every((e=>e!==t))&&p.push(t);if(f.push(...g.splice(0)),v.length>0&&({matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(v,f)),!l.isRestrictedNavigation&&(g.length>0||v.length>0)&&n.running){const t=n.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===g.length&&0===v.length){const s=[];for(const r of t){if(!r.hasNextScopeInstructions)continue;const t=null!==(a=null===(o=r.endpoint.instance)||void 0===o?void 0:o.scope)&&void 0!==a?a:r.endpoint.scope;s.push(t.processInstructions(r.nextScopeInstructions,e,n,i))}p.push(...(await Promise.all(s)).flat())}if(e.useFullStateInstruction&&(n.appendedInstructions=n.appendedInstructions.filter((t=>!t.default))),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v)),0===g.length&&0===v.length){const t=f.map((t=>{var e,n;return null===(n=(null===(e=t.endpoint.instance)||void 0===e?void 0:e.connectedCE).pendingPromise)||void 0===n?void 0:n.promise})).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v))):g=d.map((t=>Ek.createClear(l,t)))}const w=g.filter((t=>t.component.isFunction()||t.component.isPromise()));w.length>0&&await Promise.all(w.map((t=>t.component.resolve())))}while(g.length>0||v.length>0);return p}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.router.configuration.options.useConfiguredRoutes&&this.router.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.router.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const n=Ek.create(Ek.clear(e));return n.scope=this,[n,...t]}return t}getClearAllEndpoints(t){const e=this.router;let n=[];return t.some((t=>{var n;return(null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e)}))&&(n=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>{var n;return!((null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e))}))),{clearEndpoints:n,instructions:t}}findInstructions(t,e,n){var i,s;const r=this.router;let o=new Jx;if(n&&!Ek.containsSiblings(r,t)){let n=t.filter((t=>t.isClear(r)||t.isClearAll(r)));const a=t.filter((t=>!t.isClear(r)&&!t.isClearAll(r)));if(a.length>0)for(const l of a){const c=this.findMatchingRoute(Ek.stringify(r,a));if(null!==(i=null==c?void 0:c.foundConfiguration)&&void 0!==i&&i)o=c,o.instructions=[...n,...o.instructions],n=[];else{if(!e)throw new Error(`No route found for: ${Ek.stringify(r,t)}!`);o.instructions=[...n,...o.instructions,l],n=[],o.remaining=Ek.stringify(r,null!==(s=l.nextScopeInstructions)&&void 0!==s?s:[])}}else o.instructions=[...n]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${Ek.stringify(r,t)}!`);o.instructions.push(...t)}o.instructions=o.instructions.filter((t=>""!==t.component.name));for(const t of o.instructions)null===t.scope&&(t.scope=this);return o}matchEndpoints(t,e,n=!1){const i=[],s=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)===this})),r=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)!==this})),{matchedInstructions:o,remainingInstructions:a}=Ok.matchEndpoints(this,s,e,n);return i.push(...o),r.push(...a),{matchedInstructions:i,remainingInstructions:r}}addEndpoint(t,e,n,i={}){var s,r,o,a;let l=null!==(r=null===(s=this.getOwnedScopes().find((n=>n.type===t&&n.endpoint.name===e)))||void 0===s?void 0:s.endpoint)&&void 0!==r?r:null;return null!=n&&null!=(null==l?void 0:l.connectedCE)&&l.connectedCE!==n&&(l=null!==(a=null===(o=this.getOwnedScopes(!0).find((i=>i.type===t&&i.endpoint.name===e&&i.endpoint.connectedCE===n)))||void 0===o?void 0:o.endpoint)&&void 0!==a?a:null),null==l&&(l="Viewport"===t?new Ck(this.router,e,n,this.scope,!!i.scope,i):new yk(this.router,e,n,this.scope,!0,null,i),this.addChild(l.connectedScope)),null!=n&&l.setConnectedCE(n,i),l}removeEndpoint(t,e,n){return!(null===(null!=n?n:null)&&!e.removeEndpoint(t,n)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const n of e.slice())e.push(...n.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const n of e.slice())e.push(...n.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const n of e.slice())if(n.passThroughScope){const i=e.indexOf(n);e.splice(i,1,...n.getOwnedRoutingScopes(t))}return uk(e)}getRoutingInstructions(t){var e;const n=uk(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),i=[];for(const s of n){const n=s.instruction.clone(!0,!1,!1);""!==(null!==(e=n.component.name)&&void 0!==e?e:"")&&(n.nextScopeInstructions=s.connectedScope.getRoutingInstructions(t),i.push(n))}return i}canUnload(t){return pk.run(t,(t=>pk.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.canUnload(e):e=>t.canUnload(e))))),(t=>t.previousValue.every((t=>t))))}unload(t){return pk.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.unload(e):e=>t.unload(e))))}matchScope(t,e=!1){const n=[];for(const i of t)i.scope===this?n.push(i):e&&i.hasNextScopeInstructions&&n.push(...this.matchScope(i.nextScopeInstructions,e));return n}findMatchingRoute(t){if(this.isViewportScope&&!this.passThroughScope)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());if(this.isViewport)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());for(const e of this.enabledChildren){const n=e.findMatchingRoute(t);if(null!==n)return n}return null}findMatchingRouteInRoutes(t,e){var n,i,s;if(!Array.isArray(e))return null;e=e.map((t=>this.ensureProperRoute(t)));const r=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const n of e)r.push({...t,path:n,handler:t}),""!==n&&r.push({...t,path:`${n}/*remainingPath`,handler:t})}const o=new Jx;(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const a=e.find((e=>e.id===t));let l={params:{},endpoint:{}};if(null!=a)l.endpoint={route:{handler:a}};else{const e=new class{constructor(){this.rootState=new xm(null,null,""),this.cache=new Map}add(t){if(t instanceof Array)for(const e of t)this.$add(e);else this.$add(t);this.cache.clear()}$add(t){const e=t.path,n=new fm(t.path,!0===t.caseSensitive,t.handler),i=""===e?[""]:e.split("/").filter(km),s=[];let r=this.rootState;for(const t of i)switch(r=r.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),n=e?t.slice(1,-1):t.slice(1);s.push(n),r=new Am(n,e).appendTo(r);break}case"*":{const e=t.slice(1);s.push(e),r=new Em(e).appendTo(r);break}default:r=new Cm(t,n.caseSensitive).appendTo(r)}const o=new gm(n,s);r.setEndpoint(o)}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new wm(this.rootState);for(let n=0,i=t.length;n<i;++n){const i=t.charAt(n);if(e.advance(i),e.isEmpty)return null}const n=e.getSolution();if(null===n)return null;const{endpoint:i}=n,s=n.getParams();return new vm(i,s)}};e.add(r),l=e.recognize(t)}if(null!=l){o.match=l.endpoint.route.handler,o.matching=t;const r={...l.params};if(null!=r.remainingPath&&(o.remaining=r.remainingPath,Reflect.deleteProperty(r,"remainingPath"),o.matching=o.matching.slice(0,o.matching.indexOf(o.remaining))),o.params=r,null!=(null===(n=o.match)||void 0===n?void 0:n.redirectTo)){let t=null===(i=o.match)||void 0===i?void 0:i.redirectTo;return(null!==(s=o.remaining)&&void 0!==s?s:"").length>0&&(t+=`/${o.remaining}`),this.findMatchingRouteInRoutes(t,e)}}if(o.foundConfiguration){o.instructions=Ek.clone(o.match.instructions,!1,!0);const t=o.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(o.params),e.route=o,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}o.instructions.length>0&&(o.instructions[0].routeStart=!0);const e=Ek.parse(this.router,o.remaining);if(e.length>0){let t=o.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return o}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=Ek.from(this.router,t.instructions)),t}}Rk.lastId=0;class Pk{constructor(t,e,n=0){this.taskQueue=t,this.item=e,this.cost=n,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class Lk{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{var e;null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=null!==(e=this.processing.cost)&&void 0!==e?e:0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const n=Array.isArray(t),i=n?t:[t],s=i.map(((t,n)=>Array.isArray(e)?e[n]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of i)r.push(t instanceof Pk?t:this.createQueueTask(t,s.shift()));return this.pending.push(...r),this.dequeue(),n?r:r[0]}createQueueTask(t,e){return new Pk(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,n){e(n),this.processing=null,this.dequeue()}}let Mk=class{constructor(t,e,n,i,s){this.platform=t,this.window=e,this.history=n,this.location=i,this.ea=s,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls=new Lk}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){var t,e;const{pathname:n,search:i,hash:s}=this.location,r=null!==(t=this.options.useUrlFragmentHash)&&void 0!==t&&t?s.slice(1):`${n}${i}`,o=null!==(e=this.options.useUrlFragmentHash)&&void 0!==e&&e?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new jk(n,i.slice(1),o,r)}async go(t,e=!1){const n=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const i=n,s=e;this.forwardState({eventTask:i,suppressPopstate:s}),t.resolve()},e=>{const n=this.history,i=t;n.go(i),e.resolve()}],[0,1]),n.wait()}async pushNavigatorState(t){const{title:e,path:n}=t.navigations[t.navigationIndex],i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((s=>{const r=this.history,o=t,a=e||"",l=`${i}${n}`;try{r.pushState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,l),this.setTitle(a)}s.resolve()}),1).wait()}async replaceNavigatorState(t,e,n){const i=t.navigations[t.navigationIndex];null!=e||(e=i.title),null!=n||(n=i.path);const s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((i=>{const r=this.history,o=t,a=e||"",l=`${s}${n}`;try{r.replaceState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,l),this.setTitle(a)}i.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const n=t;await this.popState(n),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:n}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async i=>{n||this.notifySubscribers(t),null!==e&&await e.execute(),i.resolve()}),1)}notifySubscribers(t){this.ea.publish(Uk.eventName,Uk.create(this.viewerState,t,this.history.state))}async popState(t){var e,n;await this.go(-1,!0);const i=this.history.state,s=null===(e=null==i?void 0:i.navigations)||void 0===e?void 0:e[null!==(n=null==i?void 0:i.navigationIndex)&&void 0!==n?n:0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(i)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,n){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${n}`)}}};Mk=tk([ek(0,rc),ek(1,Qu),ek(2,Xu),ek(3,Gu),ek(4,oi)],Mk);class jk{constructor(t,e,n,i){this.path=t,this.query=e,this.hash=n,this.instruction=i}}class Uk{constructor(t,e,n,i){this.eventName=t,this.viewerState=e,this.event=n,this.state=i}static create(t,e,n){return new Uk(Uk.eventName,t,e,n)}}Uk.eventName="au:router:navigation-state-change";class Nk{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class Bk{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,n){const i=new Bk(t,e);return n.syncStates.forEach((t=>i.addSyncState(t))),i}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new dk;this.syncStates.set(t,e)}addEndpoint(t){let e=this.entities.find((e=>e.endpoint===t));return void 0!==e||(e=new Nk(t),this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this)),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&hk(this.entities,(t=>t===e))}setEndpointStep(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t)),n.step=e}addEndpointState(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t));const i=n.states.get(e);i instanceof dk&&i.resolve(),n.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const n=this.syncStates.get(t);if(void 0!==n){if(null!==e){const i=this.entities.find((t=>t.endpoint===e));if(null===(null==i?void 0:i.syncPromise)&&n.isPending)return i.syncingState=t,i.syncPromise=new dk,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),i.syncPromise.promise}return n.isPending?n.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let n=this.entities.find((e=>e.endpoint===t));if(null==n&&(n=this.addEndpoint(t)),n.hasReachedState(e))return;let i=n.states.get(e);return null==i&&(i=new dk,n.states.set(e,i)),i.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0}cancel(){this.cancelled=!0,this.entities.forEach((t=>{var e,n;const i=t.endpoint.cancelContentChange(this,null!==(n=null===(e=t.step)||void 0===e?void 0:e.current)&&void 0!==n?n:null);i instanceof Promise&&i.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{var t;null===(t=this.navigation.process)||void 0===t||t.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,n){let i=[...this.appendedInstructions];t=[...t],e=[...e],n=[...n];const s=i.filter((t=>!t.default)),r=i.filter((t=>t.default));for(i=s.length>0?[...s]:[...r];i.length>0;){const s=i.shift();hk(this.appendedInstructions,(t=>t===s));const r=e.some((t=>t.sameEndpoint(s,!0))),o=t.find((t=>t.sameEndpoint(s,!0))),a=n.find((t=>t.sameEndpoint(s,!0)));s.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&hk(t,(t=>t===o)),void 0!==a&&hk(n,(t=>t===a)),null!==s.endpoint.instance?t.push(s):n.push(s))}return{matchedInstructions:t,earlierMatchedInstructions:e,remainingInstructions:n}}checkSyncState(t){var e;const n=this.syncStates.get(t);if(void 0!==n&&this.hasAllEndpoints&&n.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const n of this.entities)n.syncingState===t&&(null===(e=n.syncPromise)||void 0===e||e.resolve(),n.syncPromise=null,n.syncingState=null);n.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class Fk{constructor(t,e,n){var i,s;this.hook=t,this.id=n,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of null!==(i=e.include)&&void 0!==i?i:[])this.includeTargets.push(new Vk(t));for(const t of null!==(s=e.exclude)&&void 0!==s?s:[])this.excludeTargets.push(new Vk(t))}static add(t,e){const n=new Fk(t,null!=e?e:{},++this.lastIdentity);return this.hooks[n.type].push(n),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const n=this.hooks[e].findIndex((e=>e.id===t));n>=0&&this.hooks[e].splice(n,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,n){let i=n;for(const s of this.hooks[t])if(!s.wantsMatch||s.matches(n))if(i=await s.invoke(e,n),"boolean"==typeof i){if(!i)return!1}else n=i;return i}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}Fk.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},Fk.lastIdentity=0;class Vk{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(ck.isType(t))this.componentType=t,this.componentName=ck.getName(t);else{const e=t;null!=e.component&&(this.componentType=ck.isType(e.component)?ck.getType(e.component):null,this.componentName=ck.getName(e.component)),null!=e.viewport&&(this.viewport=Ak.isInstance(e.viewport)?e.viewport:null,this.viewportName=Ak.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(Ek.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class Dk{static async getTitle(t,e,n){let i=await Fk.invokeTransformTitle(t,e);if("string"!=typeof i){const t=Dk.stringifyTitles(i,e,n);i=n.appTitle,i=i.replace(/\${componentTitles}/g,t),i=i.replace(/\${appTitleSeparator}/g,""!==t?n.appTitleSeparator:"")}return i=await Fk.invokeTransformTitle(i,e),i}static stringifyTitles(t,e,n){const i=t.map((t=>Dk.stringifyTitle(t,e,n))).filter((t=>{var e;return(null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0)>0}));return i.join(" + ")}static stringifyTitle(t,e,n){const i=t.nextScopeInstructions;let s=Dk.resolveTitle(t,e,n);if(Array.isArray(i)&&i.length>0){let t=Dk.stringifyTitles(i,e,n);t.length>0&&(1!==i.length&&(t=`[ ${t} ]`),s=s.length>0?"top-down"===n.componentTitleOrder?s+n.componentTitleSeparator+t:t+n.componentTitleSeparator+s:t)}return s}static resolveTitle(t,e,n){let i=t.getTitle(e);return null!=n.transformTitle&&(i=n.transformTitle(i,t,e)),i}}const zk=Xe.createInterface("IRouter",(t=>t.singleton(qk)));class qk{constructor(t,e,n,i,s,r){this.container=t,this.ea=e,this.navigator=n,this.viewer=i,this.store=s,this.configuration=r,this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.handleNavigatorNavigateEvent=t=>{this.processNavigation(t.navigation).catch((t=>{throw t}))},this.handleNavigatorStateChangeEvent=t=>{var e;if(null!=(null===(e=t.state)||void 0===e?void 0:e.navigationIndex)){const e=wk.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{var e;this.loadedFirst=!0;const n=this.configuration.options,i=Bk.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(i),i.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(_k.eventName,_k.create(t));let s="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await Fk.invokeTransformFromUrl(t.instruction,i.navigation);const r=n.basePath;null!==r&&"string"==typeof s&&s.startsWith(r)&&!n.useUrlFragmentHash&&(s=s.slice(r.length)),"/"===s&&(s=""),"string"==typeof s&&(s=""===s?[new Ek("")]:Ek.parse(this,s)),null!==(e=t.scope)&&void 0!==e||(t.scope=this.rootScope.scope);const o=await t.scope.processInstructions(s,t,i);return pk.run(null,(()=>(i.finalEndpoint(),i.waitForSyncState("completed"))),(()=>(i.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&o.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(var t;this.coordinators.length>0&&this.coordinators[0].completed;){const e=this.coordinators.shift();await this.navigator.finalize(e.navigation,!1),this.ea.publish(Xk.eventName,Xk.create(e.navigation)),this.ea.publish(Qk.eventName,Qk.create(e.navigation)),null===(t=e.navigation.process)||void 0===t||t.resolve(!0)}}))}}static get inject(){return[tn,oi,$k,Mk,Mk,pS]}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw new Error("Router has already been started");this.isActive=!0;const t=this.container.get(Lu);this.rootScope=new yk(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const n=new URL(t.host.baseURI);e.basePath=n.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.navigatorStateChangeEventSubscription=this.ea.subscribe(Uk.eventName,this.handleNavigatorStateChangeEvent),this.navigatorNavigateEventSubscription=this.ea.subscribe(Tk.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(Zk.eventName,Zk.create())}stop(){if(!this.isActive)throw new Error("Router has not been started");this.ea.publish(Wk.eventName,Wk.create()),this.navigator.stop(),this.viewer.stop(),this.navigatorStateChangeEventSubscription.dispose(),this.navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,n=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,n}getEndpoint(t,e){var n;return null!==(n=this.allEndpoints(t).find((t=>t.name===e)))&&void 0!==n?n:null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,e,n,i,s){const r=n.container,o=(r.has(qk.closestEndpointKey,!0)?r.get(qk.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=o.addEndpoint(e,i,n,s),Tn.instance(qk.closestEndpointKey,t).register(r)),t}disconnectEndpoint(t,e,n){if(!e.connectedScope.parent.removeEndpoint(t,e,n))throw new Error("Failed to remove endpoint: "+e.name)}async load(t,e){var n,i,s;e=null!=e?e:{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let r=null;if(({instructions:t,scope:r}=this.applyLoadOptions(t,e)),null!==(n=e.append)&&void 0!==n&&n&&(!this.loadedFirst||this.isNavigating))return t=Ek.from(this,t),this.appendInstructions(t,r),Promise.resolve();const o=wk.create({instruction:t,fullStateInstruction:"",scope:r,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:null!==(i=e.replacing)&&void 0!==i&&i||e.replace,repeating:e.append,fromBrowser:null!==(s=e.fromBrowser)&&void 0!==s&&s,origin:e.origin,completed:!1});return this.navigator.navigate(o)}applyLoadOptions(t,e,n=!0){var i,s,r;"origin"in(e=null!=e?e:{})&&!("context"in e)&&(e.context=e.origin);let o=null!==(s=Rk.for(null!==(i=e.context)&&void 0!==i?i:null))&&void 0!==s?s:null;if("string"==typeof t){if(t.startsWith("/"))o=null;else{if(t.startsWith("."))for(t.startsWith("./")&&(t=t.slice(2));t.startsWith("../");)o=null!==(r=null==o?void 0:o.parent)&&void 0!==r?r:o,t=t.slice(3);null!=(null==o?void 0:o.path)&&(t=`${o.path}/${t}`,o=null)}if(!n){t=Ek.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}}else{t=Ek.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}return{instructions:t,scope:o}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw new Error(`Parameter instructions to checkActivate can not be a string ('${t}')!`);e=null!=e?e:{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>{var e;return null!==(e=t.scope)&&void 0!==e?e:t.scope=this.rootScope.scope}));const n=uk(t.map((t=>t.scope)));for(const e of n){const n=e.matchScope(t,!1),i=e.matchScope(this.activeComponents,!0);if(!Ek.contains(this,i,n,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(Yk.eventName,Yk.create(t)),this.ea.publish(Qk.eventName,Qk.create(t)),function(t){const e=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return e.remainingInstructions=t,console.log(e,e.remainingInstructions),e}(e)}cancelNavigation(t,e){e.cancel(),this.ea.publish(Gk.eventName,Gk.create(t)),this.ea.publish(Qk.eventName,Qk.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const n of t)null===n.scope&&(n.scope=e);let n=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){n=this.coordinators[t];break}if(null===n){if(this.loadedFirst)throw Error("Failed to append routing instructions to coordinator");this.appendedInstructions.push(...t)}null==n||n.enqueueAppendedInstructions(t)}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.configuration.options.useConfiguredRoutes&&this.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}async updateNavigation(t){var e,n,i,s,r,o,a;this.rootScope.scope.reparentRoutingInstructions();const l=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:c}=this.rootScope.scope.matchEndpoints(l,[],!0),h=100;for(;c.length>0;){if(0==h--)throw new Error("Failed to find viewport when updating viewer paths.");c=c.map((t=>{var e;const{matchedInstructions:n}=t.endpoint.instance.scope.matchEndpoints(null!==(e=t.nextScopeInstructions)&&void 0!==e?e:[],[],!0);return n})).flat()}t.timestamp>=(null!==(n=null===(e=this.activeNavigation)||void 0===e?void 0:e.timestamp)&&void 0!==n?n:0)&&(this.activeNavigation=t,this.activeComponents=l);let u=await Fk.invokeTransformToUrl(l,t);if("string"!=typeof u&&(u=Ek.stringify(this,u,!1,!0)),u=await Fk.invokeTransformToUrl(u,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[n,i]of Object.entries(t.parameters)){n=encodeURIComponent(n),Array.isArray(i)||(i=[i]);for(const t of i)e.append(n,encodeURIComponent(t))}t.query=e.toString()}let d=`${this.configuration.options.basePath}/`;(null===d||""!==u&&"/"===u[0]||this.configuration.options.useUrlFragmentHash)&&(d="");const p=(null!==(s=null===(i=t.query)||void 0===i?void 0:i.length)&&void 0!==s?s:0)>0?"?"+t.query:"",f=(null!==(o=null===(r=t.fragment)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>0?"#"+t.fragment:"";t.path=d+u+p+f;const g=[Ek.create(Ek.clear(this))];if(g.push(...Ek.clone(l,this.statefulHistory)),t.fullStateInstruction=g,null===(null!==(a=t.title)&&void 0!==a?a:null)){const e=await Dk.getTitle(l,t,this.configuration.options.title);null!==e&&(t.title=e)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[n,i]=t.split("#");t=n,e.fragment=i}return t}extractQuery(t,e){var n;if("string"==typeof t&&null==e.query){const[n,i]=t.split("?");t=n,e.query=i}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(null!==(n=e.parameters)&&void 0!==n||(e.parameters={}),new URLSearchParams(e.query).forEach(((t,n)=>{n=decodeURIComponent(n),t=decodeURIComponent(t),n in e.parameters?(Array.isArray(e.parameters[n])||(e.parameters[n]=[e.parameters[n]]),e.parameters[n].push(t)):e.parameters[n]=t}))),t}}qk.closestEndpointKey=ze.annotation.keyFor("closest-endpoint");class Hk{constructor(t){this.eventName=t}}class Zk extends Hk{static create(){return new Zk(this.eventName)}}Zk.eventName="au:router:router-start";class Wk extends Hk{static create(){return new Wk(this.eventName)}}Wk.eventName="au:router:router-stop";class Kk{constructor(t,e){this.eventName=t,this.navigation=e}}class _k extends Kk{static create(t){return new _k(this.eventName,t)}}_k.eventName="au:router:navigation-start";class Qk extends Kk{static create(t){return new Qk(this.eventName,t)}}Qk.eventName="au:router:navigation-end";class Gk extends Kk{static create(t){return new Gk(this.eventName,t)}}Gk.eventName="au:router:navigation-cancel";class Xk extends Kk{static create(t){return new Xk(this.eventName,t)}}Xk.eventName="au:router:navigation-complete";class Yk extends Kk{static create(t){return new Yk(this.eventName,t)}}Yk.eventName="au:router:navigation-error";const Jk=Xe.createInterface("ILinkHandler",(t=>t.singleton(tS)));let tS=class{constructor(t,e){this.window=t,this.router=e}handleEvent(t){this.handleClick(t)}handleClick(t){var e,n;if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const i=t.currentTarget;if(i.hasAttribute("external"))return;const s=null!==(e=i.getAttribute("target"))&&void 0!==e?e:"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const r=rh.for(i,"load"),o=void 0!==r?r.viewModel.value:null,a=this.router.configuration.options.useHref&&i.hasAttribute("href")?i.getAttribute("href"):null;if(!(null!==o&&0!==o.length||null!==a&&0!==a.length))return;t.preventDefault();let l=null!==(n=null!=o?o:a)&&void 0!==n?n:"";"string"==typeof l&&l.startsWith("#")&&(l=l.slice(1),l.startsWith("/")||(l=`/${l}`)),this.router.load(l,{origin:i}).catch((t=>{throw t}))}};var eS;function nS(t,e,n,i,s=!1){var r;if(s)return""===e;if(n)return e;const o=null!==(r=i.getAttribute(t))&&void 0!==r?r:"";return o.length>0?o:e}function iS(t,e){if(!t.isActive)return new Promise((t=>{const n=e.subscribe(Zk.eventName,(()=>{t(),n.dispose()}))}))}function sS(t,e,n,i){var s,r;let o=null===(r=null===(s=rh.for(n,"considered-active"))||void 0===s?void 0:s.viewModel)||void 0===r?void 0:r.value;void 0===o&&(o=i);const a=t.applyLoadOptions(o,{context:e}),l=Ek.from(t,a.instructions);for(const t of l)null===t.scope&&(t.scope=a.scope);return l}function rS(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return null!=e||(e=t),e}tS=tk([ek(0,Qu),ek(1,zk)],tS),function(t){t.default="default",t.disallow="disallow",t.reload="reload",t.refresh="refresh"}(eS||(eS={}));const oS=Sh.createInjectable();let aS=class{constructor(t,e,n,i,s,r){this.router=t,this.element=e,this.container=n,this.ea=i,this.parentViewport=s,this.instruction=r,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1}hydrated(t){this.controller=t,this.container=t.container;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new dk)),pk.run(null,(()=>iS(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e,n){return this.isBound=!0,pk.run(null,(()=>iS(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{var t;null!=(null===(t=this.endpoint)||void 0===t?void 0:t.activeResolve)&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{var e;if(null!==this.endpoint&&null===this.endpoint.getNextContent())return null===(e=this.endpoint.activate(null,t,this.controller,n,void 0))||void 0===e?void 0:e.asValue}))}detaching(t,e,n){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e,n)}unbinding(t,e,n){if(null!==this.endpoint)return this.disconnect(null)}dispose(){var t;null===(t=this.endpoint)||void 0===t||t.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,n=nS("name",this.name,t,e),i={};i.scope=!nS("no-scope",this.noScope,!1,e,!0),i.usedBy=nS("used-by",this.usedBy,t,e),i.default=nS("default",this.default,t,e),i.fallback=nS("fallback",this.fallback,t,e),i.noLink=nS("no-link",this.noLink,t,e,!0),i.noTitle=nS("no-title",this.noTitle,t,e,!0),i.noHistory=nS("no-history",this.noHistory,t,e,!0),i.stateful=nS("stateful",this.stateful,t,e,!0),Object.keys(i).forEach((t=>{void 0===i[t]&&delete i[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,n,i);const s=this.parentViewport;null!=s&&(hk(s.pendingChildren,(t=>t===this)),0===s.pendingChildren.length&&null!==s.pendingPromise&&(s.pendingPromise.resolve(),s.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const n=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const i in t)this.element.classList.toggle(`${n}-${i}`,e&&t[i])}};tk([Al],aS.prototype,"name",void 0),tk([Al],aS.prototype,"usedBy",void 0),tk([Al],aS.prototype,"default",void 0),tk([Al],aS.prototype,"fallback",void 0),tk([Al],aS.prototype,"noScope",void 0),tk([Al],aS.prototype,"noLink",void 0),tk([Al],aS.prototype,"noTitle",void 0),tk([Al],aS.prototype,"noHistory",void 0),tk([Al],aS.prototype,"stateful",void 0),aS=tk([ch({name:"au-viewport",injectable:oS}),ek(0,zk),ek(1,Vu),ek(2,tn),ek(3,oi),ek(4,oS),ek(5,hd)],aS);const lS=Sh.createInjectable();let cS=class{constructor(t,e,n,i,s){this.router=t,this.element=e,this.container=n,this.parent=i,this.parentController=s,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e,n){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e,n){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let n=this.getAttribute("catches",this.catches);void 0!==n&&(e.catches=n),n=this.getAttribute("collection",this.collection,!0),void 0!==n&&(e.collection=n),e.source=this.source||null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,n=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(n)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};tk([Al],cS.prototype,"name",void 0),tk([Al],cS.prototype,"catches",void 0),tk([Al],cS.prototype,"collection",void 0),tk([Al],cS.prototype,"source",void 0),cS=tk([ch({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:lS}),ek(0,zk),ek(1,Vu),ek(2,tn),ek(3,lS),ek(4,mu)],cS);let hS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.hasHref=null,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(Qk.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#${t}`),this.element.setAttribute("href",t)}}updateActive(){const t=rh.for(this.element,"load").parent,e=sS(this.router,t,this.element,this.value);rS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}};tk([Al({mode:My.toView})],hS.prototype,"value",void 0),hS=tk([Jc("load"),ek(0,Vu),ek(1,zk),ek(2,Jk),ek(3,oi)],hS);let uS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(Qk.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){var t;this.element.removeEventListener("click",this.linkHandler),null===(t=this.routerNavigationSubscription)||void 0===t||t.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=rh.for(this.element,"href").parent,e=sS(this.router,t,this.element,this.value);rS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){var t;const e=this.$controller.parent.children;return null!==(t=null==e?void 0:e.some((t=>1===t.vmKind&&t.viewModel instanceof hS)))&&void 0!==t&&t}};tk([Al({mode:My.toView})],uS.prototype,"value",void 0),uS=tk([Jc({name:"href",noMultiBindings:!0}),ek(0,Vu),ek(1,zk),ek(2,Jk),ek(3,oi)],uS);let dS=class{};tk([Al({mode:My.toView})],dS.prototype,"value",void 0),dS=tk([Jc("considered-active")],dS);const pS=Xe.createInterface("IRouterConfiguration",(t=>t.singleton(vS))),fS=[zk],gS=[aS,cS,hS,uS,dS];class vS{static register(t){const e=t.get(pS);return e.options=vS.options,e.options.setRouterConfiguration(e),vS.options=ok.create(),t.register(...fS,...gS,Dc.beforeActivate(zk,vS.configurationCall),Dc.afterActivate(zk,(t=>t.initialLoad())),Dc.afterDeactivate(zk,(t=>t.stop())))}static customize(t){return void 0===t?(vS.options=ok.create(),vS.configurationCall=t=>{t.start()}):t instanceof Function?vS.configurationCall=t:(vS.options=ok.create(),vS.options.apply(t)),vS}static createContainer(){return this.register(Xe.createContainer())}static for(t){return t instanceof qk?t.configuration:t.get(pS)}apply(t,e=!1){e&&(this.options=ok.create()),this.options.apply(t)}addHook(t,e){return Fk.add(t,e)}removeHook(t){return Fk.remove(t)}removeAllHooks(){return Fk.removeAll()}}function mS(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function yS(t,e){return function(n,i){e(n,i,t)}}function bS(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}vS.options=ok.create(),vS.configurationCall=t=>{t.start()},Object.create,Object.create;var wS=n(3379),xS=n.n(wS),kS=n(7795),SS=n.n(kS),CS=n(569),AS=n.n(CS),ES=n(3565),TS=n.n(ES),$S=n(9216),IS=n.n($S),OS=n(4589),RS=n.n(OS),PS=n(1138),LS={};LS.styleTagTransform=RS(),LS.setAttributes=TS(),LS.insert=AS().bind(null,"head"),LS.domAPI=SS(),LS.insertStyleElement=IS(),xS()(PS.Z,LS),PS.Z&&PS.Z.locals&&PS.Z.locals;var MS=n(6767),jS={};jS.styleTagTransform=RS(),jS.setAttributes=TS(),jS.insert=AS().bind(null,"head"),jS.domAPI=SS(),jS.insertStyleElement=IS(),xS()(MS.Z,jS),MS.Z&&MS.Z.locals&&MS.Z.locals;const US="character-type-selector",NS='<div class="container">\r\n    <span>Magus</span> <radio-button group="character-type" state="${model == \'magus\' ? \'selected\' : \'unselected\'}" value="magus"></radio-button>\r\n    <span>Companion</span> <radio-button group="character-type" state="${model == \'companion\' ? \'selected\' : \'unselected\'}" value="companion"></radio-button>\r\n</div>',BS=NS,FS=[];let VS;function DS(t){VS||(VS=Sh.define({name:US,template:NS,dependencies:FS})),t.register(VS)}const zS={character:{type:"magus",physicalStatus:{fatigue:0,lightWounds:0,mediumWounds:0,heavyWounds:0},description:{name:"",description:""},abilities:[],personalityTraits:[],characteristics:{communication:{value:0,specialisation:"",agingPoints:0},dexterity:{value:0,specialisation:"",agingPoints:0},intelligence:{value:0,specialisation:"",agingPoints:0},perception:{value:0,specialisation:"",agingPoints:0},presence:{value:0,specialisation:"",agingPoints:0},quickness:{value:0,specialisation:"",agingPoints:0},stamina:{value:0,specialisation:"",agingPoints:0},strength:{value:0,specialisation:"",agingPoints:0}},flaws:[],virtues:[],arts:{creo:{level:0,xp:0,puissant:!1},muto:{level:0,xp:0,puissant:!1},rego:{level:0,xp:0,puissant:!1},intellego:{level:0,xp:0,puissant:!1},perdo:{level:0,xp:0,puissant:!1},animal:{level:0,xp:0,puissant:!1},auram:{level:0,xp:0,puissant:!1},aquam:{level:0,xp:0,puissant:!1},ignem:{level:0,xp:0,puissant:!1},terram:{level:0,xp:0,puissant:!1},herbam:{level:0,xp:0,puissant:!1},mentem:{level:0,xp:0,puissant:!1},corpus:{level:0,xp:0,puissant:!1},imaginem:{level:0,xp:0,puissant:!1},vim:{level:0,xp:0,puissant:!1}},spells:[],ageing:{age:25,apparentAge:25,birthYear:1195,currentYear:1220,decrepitudeLevel:0,decrepitudePoints:0,longevityModifier:0,ageingRollModifier:0,livingConditionModifier:0},confidence:{score:3},warping:{warpingPoints:0,warpingLevel:0,ongoingEffects:[]},activeMagic:[],xpEntries:[],notes:"",background:"",lab:{art1:{name:"",rating:0},art2:{name:"",rating:0},art3:{name:"",rating:0},art4:{name:"",rating:0},specialisation1:{name:"",rating:0},specialisation2:{name:"",rating:0},auraBonus:0,description:"",effectiveSafety:0,flaws:[],virtues:[],intelligenceBonus:0,labBaseQuality:0,livingConditionsModifier:0,magicTheory:0,occupiedSize:0,refinement:0,size:0,availableModifiers:[{name:"GQ"},{name:"Safety"},{name:"Health"},{name:"Aesthetics"},{name:"Upkeep"},{name:"Warping"}],researchProjects:[],inventiveGeniusVirtue:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1},spellcastingStats:{arts:"",aura:0,ceremonial:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1,positiveCycle:!1,focus:!1,largeGestures:!1,loudVoice:!1,similarFomulaicSpellBonus:0,spontaneousCastingTotal:0,staminaSpecialisation:!1,talismanBonus:0},sigil:"",belongings:{carried:"",inSanctum:"",vis:[]},talisman:{description:"",investedVis:0,spentVis:0,bonuses:[],effects:[]},magicItems:[],quests:[]}};function qS(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if("object"==typeof t){if("function"==typeof t[Symbol.iterator]){const e=[];if(t.length>0)for(const n of t)e.push(qS(n));return e}{const e=Object.keys(t),n={};if(e.length>0)for(const i of e)n[i]=qS(t[i]);return n}}return t}function HS(t){return Nv(t,qS(zS))}async function ZS(t,e){const n=await e.text();return Nv(t,JSON.parse(n))}function WS(t,e){const n=qS(t.present);return n.character=e,Nv(t,n)}function KS(t,e){console.log("Saving characteristics",e);const n=qS(t.present);return n.character.characteristics=e,kC(n),LC(n),Nv(t,n)}function _S(t,e){console.log("Saving abilities",e);const n=qS(t.present);return n.character.abilities=yC(e),LC(n),kC(n),Nv(t,n)}function QS(t,e){console.log("Saving personality traits",e);const n=qS(t.present);return n.character.personalityTraits=yC(e),Nv(t,n)}function GS(t,e){console.log("Saving virtues",e);const n=qS(t.present);return n.character.virtues=yC(e),bC(n),kC(n),OC(n),Nv(t,n)}function XS(t,e){console.log("Saving flaws",e);const n=qS(t.present);return n.character.flaws=yC(e),kC(n),OC(n),Nv(t,n)}function YS(t,e){console.log("Saving description",e);const n=qS(t.present);return n.character.description=e,Nv(t,n)}function JS(t,e){console.log("Saving physical status",e);const n=qS(t.present);return n.character.physicalStatus=e,kC(n),Nv(t,n)}function tC(t,e){console.log("Saving arts",e);const n=qS(t.present);return n.character.arts=e,kC(n),LC(n),Nv(t,n)}function eC(t,e){console.log("Saving spells",e);const n=qS(t.present);return n.character.spells=yC(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),kC(n),Nv(t,n)}function nC(t,e){console.log("Saving ageing",e);const n=qS(t.present);return n.character.ageing=e,bC(n),function(t){for(t.character.xpEntries||(t.character.xpEntries=[IC(t.character.ageing.currentYear,"Spring"),IC(t.character.ageing.currentYear,"Summer"),IC(t.character.ageing.currentYear,"Fall"),IC(t.character.ageing.currentYear,"Winter")]),t.character.xpEntries=t.character.xpEntries.filter((e=>e.year<t.character.ageing.currentYear+3)),0==t.character.xpEntries.length&&(t.character.xpEntries=[IC(t.character.ageing.currentYear,"Spring"),IC(t.character.ageing.currentYear,"Summer"),IC(t.character.ageing.currentYear,"Fall"),IC(t.character.ageing.currentYear,"Winter")]);t.character.xpEntries[t.character.xpEntries.length-1].year<t.character.ageing.currentYear+3;){let e=t.character.xpEntries[t.character.xpEntries.length-1].year+1;t.character.xpEntries.push(IC(e,"Spring")),t.character.xpEntries.push(IC(e,"Summer")),t.character.xpEntries.push(IC(e,"Fall")),t.character.xpEntries.push(IC(e,"Winter"))}t.character.xpEntries.forEach((e=>e.planningMode=e.year>=t.character.ageing.currentYear))}(n),Nv(t,n)}function iC(t,e){console.log("Saving confidence",e);const n=qS(t.present);return n.character.confidence=e,Nv(t,n)}function sC(t,e){console.log("Saving warping",e);const n=qS(t.present);return n.character.warping=e,n.character.warping.ongoingEffects=yC(e.ongoingEffects),function(t){t.character.warping.warpingLevel=xC(t.character.warping.warpingPoints,0)}(n),Nv(t,n)}function rC(t,e){console.log("Saving active magic",e);const n=qS(t.present);return n.character.activeMagic=yC(e),function(t){t.character.activeMagic.forEach((t=>t.penetration=t.active?t.penetration:0))}(n),Nv(t,n)}function oC(t,e){console.log("Saving xp entries",e);const n=qS(t.present);return n.character.xpEntries=e,Nv(t,n)}function aC(t,e){console.log("Saving notes",e);const n=qS(t.present);return n.character.notes=e,Nv(t,n)}function lC(t,e){console.log("Saving lab",e);const n=qS(t.present);return n.character.lab=e,n.character.lab.virtues=yC(n.character.lab.virtues),n.character.lab.flaws=yC(n.character.lab.flaws),n.character.lab.availableModifiers=n.character.lab.availableModifiers.filter((t=>""!=t.name)),n.character.lab.researchProjects=yC(n.character.lab.researchProjects),OC(n),Nv(t,n)}function cC(t,e){console.log("Importing character");const n=qS(t.present);return n.character=JSON.parse(e),Nv(t,n)}function hC(t,e){console.log("Saving spellcasting stats");const n=qS(t.present);return n.character.spellcastingStats=e,kC(n),Nv(t,n)}function uC(t,e){console.log("Saving character type");const n=qS(t.present);return n.character.type=e,kC(n),Nv(t,n)}function dC(t,e){console.log("Saving background");const n=qS(t.present);return n.character.background=e,Nv(t,n)}function pC(t,e){console.log("Saving sigil");const n=qS(t.present);return n.character.sigil=e,Nv(t,n)}function fC(t,e){console.log("Saving belongings");const n=qS(t.present);return n.character.belongings=e,n.character.belongings.vis=yC(e.vis),Nv(t,n)}function gC(t,e){console.log("Saving talisman");const n=qS(t.present);return n.character.talisman=e,n.character.talisman.effects=yC(e.effects),n.character.talisman.bonuses=yC(e.bonuses),Nv(t,n)}function vC(t,e){console.log("Saving magic items");const n=qS(t.present);return n.character.magicItems=yC(e),n.character.magicItems.forEach((t=>t.effects=yC(t.effects))),Nv(t,n)}function mC(t,e){console.log("Saving quests");const n=qS(t.present);return n.character.quests=yC(e).sort(((t,e)=>t.priority-e.priority)),Nv(t,n)}function yC(t){return t.filter((t=>""!=t.name)).sort(((t,e)=>t.name.localeCompare(e.name)))}function bC(t){wC(t),function(t){t.character.ageing.decrepitudeLevel=xC(t.character.ageing.decrepitudePoints,0)}(t),function(t){t.character.ageing.age=t.character.ageing.currentYear-t.character.ageing.birthYear}(t)}function wC(t){let e=t.character.virtues.findIndex((t=>t.name.indexOf("Strong Faerie Blood")>=0))>=0?3:t.character.virtues.findIndex((t=>t.name.indexOf("Faerie Blood")>=0))>=0?1:0;t.character.ageing.ageingRollModifier=t.character.ageing.livingConditionModifier+t.character.ageing.longevityModifier+t.character.lab.livingConditionsModifier+e-Math.ceil(t.character.ageing.age/10)}function xC(t,e){let n=5*(e+1);return n>t?e:xC(t-n,e+1)}function kC(t){var e;(null===(e=null==t?void 0:t.character)||void 0===e?void 0:e.arts)&&(t.character.spellcastingStats.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.spontaneousCastingTotal=function(t){let e=t.character.spellcastingStats;return SC(t)+AC(t,e.arts,"",e.focus)+e.talismanBonus+e.similarFomulaicSpellBonus+(e.ceremonial?CC(t,"Ceremonial"):0)}(t),t.character.spells.forEach((e=>e.castingTotal=function(t,e){return SC(t)+AC(t,e.arts,e.prerequisites,e.focus)+e.attunementBonus+e.masteryLevel+(e.ritual?CC(t,"Ritual"):0)}(t,e))))}function SC(t){let e=t.character.spellcastingStats,n=e.cyclicMagicVirtue?3:0,i=e.cyclicMagicFlaw?-3:0;return t.character.characteristics.stamina.value+function(t){let e=t.character.physicalStatus;return-e.lightWounds+-3*e.mediumWounds+-5*e.heavyWounds}(t)+function(t){let e=t.character.physicalStatus.fatigue;return e<=1?0:2===e?-1:3===e?-3:4===e?-5:0}(t)+e.aura+(e.positiveCycle?n:i)+(e.staminaSpecialisation?1:0)+(e.largeGestures?1:0)+(e.loudVoice?1:0)}function CC(t,e){var n,i;let s=t.character.abilities.find((t=>"Artes Liberales"==t.name)),r=t.character.abilities.find((t=>"Philosophiae"==t.name)),o=(null==s?void 0:s.specialisation)==e?1:0,a=(null==r?void 0:r.specialisation)==e?1:0,l=(null==s?void 0:s.puissant)?3:0,c=(null==r?void 0:r.puissant)?3:0;return(null!==(n=null==s?void 0:s.level)&&void 0!==n?n:0)+o+l+(null!==(i=null==r?void 0:r.level)&&void 0!==i?i:0)+a+c}function AC(t,e,n,i){let s=EC(t,e),r=TC(t,e);if(null===s||null==r)return 0;let o=EC(t,n),a=TC(t,n),l=Math.min(s,null!=o?o:1e3),c=Math.min(r,null!=a?a:1e3);return l+c+(i?Math.min(l,c):0)}function EC(t,e){let n=t.character.arts;return e.indexOf("Cr")>=0?$C(n.creo):e.indexOf("In")>=0?$C(n.intellego):e.indexOf("Mu")>=0?$C(n.muto):e.indexOf("Pe")>=0?$C(n.perdo):e.indexOf("Re")>=0?$C(n.rego):null}function TC(t,e){let n=t.character.arts;return e.indexOf("An")>=0?$C(n.animal):e.indexOf("Aq")>=0?$C(n.aquam):e.indexOf("Au")>=0?$C(n.auram):e.indexOf("Co")>=0?$C(n.corpus):e.indexOf("He")>=0?$C(n.herbam):e.indexOf("Ig")>=0?$C(n.ignem):e.indexOf("Im")>=0?$C(n.imaginem):e.indexOf("Me")>=0?$C(n.mentem):e.indexOf("Te")>=0?$C(n.terram):e.indexOf("Vi")>=0?$C(n.vim):null}function $C(t){return t.level+(t.puissant?3:0)}function IC(t,e){return{year:t,xp:"",correspondence:"",description:"",plans:"",areaLore:"",season:e,planningMode:!0}}function OC(t){RC(t.character.lab.virtues,t.character.lab.availableModifiers),RC(t.character.lab.flaws,t.character.lab.availableModifiers),function(t){var e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v;let m=t.character.lab,y=PC(m),b=m.virtues.concat(m.flaws).reduce(((t,e)=>t+e.cost),0);m.occupiedSize=m.size+b-m.refinement;let w=null!==(n=null===(e=y.find((t=>"Safety"==t.name)))||void 0===e?void 0:e.rating)&&void 0!==n?n:0,x=null!==(s=null===(i=y.find((t=>"Health"==t.name)))||void 0===i?void 0:i.rating)&&void 0!==s?s:0;m.livingConditionsModifier=x>=0?Math.floor(x/2):Math.ceil(x/2),m.effectiveSafety=w-Math.max(0,m.occupiedSize)+m.refinement,m.specialisation1.rating=null!==(o=null===(r=y.find((t=>t.name==m.specialisation1.name)))||void 0===r?void 0:r.rating)&&void 0!==o?o:0,m.specialisation2.rating=null!==(l=null===(a=y.find((t=>t.name==m.specialisation2.name)))||void 0===a?void 0:a.rating)&&void 0!==l?l:0,m.art1.rating=null!==(h=null===(c=y.find((t=>t.name==m.art1.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0,m.art2.rating=null!==(d=null===(u=y.find((t=>t.name==m.art2.name)))||void 0===u?void 0:u.rating)&&void 0!==d?d:0,m.art3.rating=null!==(f=null===(p=y.find((t=>t.name==m.art3.name)))||void 0===p?void 0:p.rating)&&void 0!==f?f:0,m.art4.rating=null!==(v=null===(g=y.find((t=>t.name==m.art4.name)))||void 0===g?void 0:g.rating)&&void 0!==v?v:0,t.character.lab.inventiveGeniusVirtue=t.character.virtues.findIndex((t=>"Inventive Genius"==t.name))>=0,t.character.lab.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.lab.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0}(t),LC(t),wC(t)}function RC(t,e){t.forEach((t=>{let n=t.modifiers.filter((t=>0!=t.rating));t.modifiers=e.map((t=>({name:t.name,rating:0}))),n.forEach((e=>{let n=t.modifiers.findIndex((t=>t.name==e.name));n>=0&&(t.modifiers[n].rating=e.rating)})),t.category.length>1&&("outfitting".startsWith(t.category.toLocaleLowerCase())&&(t.category="Outfitting"),"stucture".startsWith(t.category.toLocaleLowerCase())&&(t.category="Structure"),"supernatural".startsWith(t.category.toLocaleLowerCase())&&(t.category="Supernatural"))}))}function PC(t){return t.availableModifiers.map((e=>({name:e.name,rating:t.virtues.concat(t.flaws).reduce(((t,n)=>t.concat(n.modifiers.filter((t=>t.name==e.name)))),[]).reduce(((t,e)=>t+e.rating),0)})))}function LC(t){let e=t.character.lab,n=e.inventiveGeniusVirtue?3:0,i=e.inventiveGeniusVirtue?6:0,s=e.cyclicMagicVirtue?3:0,r=e.cyclicMagicFlaw?-3:0;e.researchProjects.forEach((o=>{var a,l,c,h;let u=null!==(l=null===(a=t.character.abilities.find((t=>"Magic Theory"==t.name)))||void 0===a?void 0:a.level)&&void 0!==l?l:0,d=null!==(h=null===(c=PC(e).find((t=>"GQ"==t.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0;o.artModifier=AC(t,o.arts,o.prerequisites,o.focus),o.labTotal=e.auraBonus+e.labBaseQuality+d+o.artModifier+o.labAssistantBonus+u+Math.max(o.experiment?i:0,o.newWork?n:0)+(o.positiveCycle?s:r)+(o.magicTheorySpecialisation?1:0)+t.character.characteristics.intelligence.value+(o.intelligenceSpecialisation?1:0)+(o.nocturnal?2:0)+o.materialBonus+o.shapeBonus+o.similarResearchBonus+(o.talisman?5:0),o.surplusLabTotal=o.labTotal-o.level}))}let MC=class{constructor(t,e,n,i){this.store=t,this.pluckModel=e,this.saveAction=n,this.ea=i,this.model=void 0,this.modelState=void 0,this.active=!1,this.interacting=!1,this.stopInteraction=function(t,e=300){let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(this,i)}),e)}}((()=>{this.interacting=!1}),1e3)}stateChanged(t,e){t.present&&(this.modelState=this.pluckModel(t.present),this.hasChanges()&&(this.model=qS(this.modelState)))}bound(){this.active=!0,this.checkForChanges(),this.ea.subscribe("ui-interaction",(()=>{this.interacting=!0,this.stopInteraction()}))}unbound(){this.active=!1}checkForChanges(){this.active&&(this.hasChanges()&&this.saveChanges(),setTimeout((()=>{this.checkForChanges()}),2e3))}saveChanges(){this.interacting||this.store.dispatch(this.saveAction,qS(this.model))}hasChanges(){return JSON.stringify(this.modelState)!==JSON.stringify(this.model)}};MC=mS([tm(),bS("design:paramtypes",[Yv,Function,Function,Object])],MC);let jC=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.type}),uC,e)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"character-type"==t.group&&(this.model=t.value)}))}};jC=mS([ch(t),yS(1,oi),bS("design:paramtypes",[Yv,Object])],jC);var UC=n(3845),NC={};NC.styleTagTransform=RS(),NC.setAttributes=TS(),NC.insert=AS().bind(null,"head"),NC.domAPI=SS(),NC.insertStyleElement=IS(),xS()(UC.Z,NC),UC.Z&&UC.Z.locals&&UC.Z.locals;const BC="description-block",FC='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',VC=FC,DC=[];let zC;function qC(t){zC||(zC=Sh.define({name:BC,template:FC,dependencies:DC})),t.register(zC)}let HC=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),YS,e)}};HC=mS([ch(i),yS(1,oi),bS("design:paramtypes",[Yv,Object])],HC);const ZC="virtues-list",WC='<list title="VIRTUES" items.two-way="model"></list>',KC=WC,_C=[];let QC;function GC(t){QC||(QC=Sh.define({name:ZC,template:WC,dependencies:_C})),t.register(QC)}let XC=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.virtues}),GS,e)}};XC=mS([ch(r),yS(1,oi),bS("design:paramtypes",[Yv,Object])],XC);const YC="flaws-list",JC='<list title="FLAWS" items.two-way="model"></list>',tA=JC,eA=[];let nA;function iA(t){nA||(nA=Sh.define({name:YC,template:JC,dependencies:eA})),t.register(nA)}let sA=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.flaws}),XS,e)}};sA=mS([ch(a),yS(1,oi),bS("design:paramtypes",[Yv,Object])],sA);var rA=n(5555),oA={};oA.styleTagTransform=RS(),oA.setAttributes=TS(),oA.insert=AS().bind(null,"head"),oA.domAPI=SS(),oA.insertStyleElement=IS(),xS()(rA.Z,oA),rA.Z&&rA.Z.locals&&rA.Z.locals;const aA="personality-traits-list",lA='<title text="PERSONALITY"></title>\r\n<div class="container">\r\n    <div repeat.for="trait of model">\r\n        <text-field value.two-way="trait.name"></text-field>\r\n        <primary-stat mode="secondary" size="s" value.two-way="trait.rating" prefix-plus.bind="true"></primary-stat>\r\n    </div>\r\n    <input type="text" class="add-item-input" placeholder="Add trait" keyup.delegate="keyPressed($event)" value.two-way="newTraitText">\r\n</div>\r\n<footer></footer>',cA=lA,hA=[];let uA;function dA(t){uA||(uA=Sh.define({name:aA,template:lA,dependencies:hA})),t.register(uA)}let pA=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.personalityTraits}),QS,e),this.newTraitText="",this.keyPressed=t=>{"Enter"==t.key&&this.newTraitText&&(this.model.push({name:this.newTraitText,rating:0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newTraitText="")}}};pA=mS([ch(c),yS(1,oi),bS("design:paramtypes",[Yv,Object])],pA);var fA=n(2410),gA={};gA.styleTagTransform=RS(),gA.setAttributes=TS(),gA.insert=AS().bind(null,"head"),gA.domAPI=SS(),gA.insertStyleElement=IS(),xS()(fA.Z,gA),fA.Z&&fA.Z.locals&&fA.Z.locals;const vA="warping-block",mA='<title text="WARPING"></title>\r\n<div class="container">\r\n    <div class="warping-level">\r\n        <primary-stat mode="secondary" value.two-way="model.warpingPoints" min="0" max="999" size="s" title="Warping Points"></primary-stat>\r\n        <primary-stat mode="secondary" readonly.bind="true" value.two-way="model.warpingLevel" min="0" size="m" title="Warping Level"></primary-stat>\r\n    </div>\r\n    <div class="warping-effect grid" repeat.for="effect of model.ongoingEffects">\r\n        <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n        <primary-stat mode="secondary" value.two-way="effect.warpingPointsPerYear" min="1" size="s" title="Warping Points Per Year"></primary-stat>\r\n        <span class="text">/year</span>\r\n    </div>\r\n    <input class="add-effect-input" type="text" placeholder="Add ongoing effect" keyup.delegate="keyPressed($event)" value.two-way="newEffectText">\r\n</div>\r\n<footer></footer>',yA=mA,bA=[];let wA;function xA(t){wA||(wA=Sh.define({name:vA,template:mA,dependencies:bA})),t.register(wA)}let kA=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.warping}),sC,e),this.newEffectText="",this.keyPressed=t=>{"Enter"==t.key&&this.newEffectText&&(this.model.ongoingEffects.push({name:this.newEffectText,warpingPointsPerYear:1}),this.model.ongoingEffects.sort(((t,e)=>t.name.localeCompare(e.name))),this.newEffectText="")}}};kA=mS([ch(u),yS(1,oi),bS("design:paramtypes",[Yv,Object])],kA);const SA="description",CA='\r\n\r\n\r\n\r\n\r\n\r\n<description-block></description-block>\r\n<virtues-list></virtues-list>\r\n<flaws-list></flaws-list>\r\n<personality-traits-list></personality-traits-list>\r\n<warping-block></warping-block>\r\n\r\n<div style="clear: both;"></div>',AA=CA,EA=[s,o,l,h,d];let TA;function $A(t){TA||(TA=Sh.define({name:SA,template:CA,dependencies:EA})),t.register(TA)}let IA=class{};IA=mS([ch(p)],IA);var OA=n(927),RA={};RA.styleTagTransform=RS(),RA.setAttributes=TS(),RA.insert=AS().bind(null,"head"),RA.domAPI=SS(),RA.insertStyleElement=IS(),xS()(OA.Z,RA),OA.Z&&OA.Z.locals&&OA.Z.locals;const PA="abilities-block",LA='<title text="ABILITIES"></title>\r\n<div class="container">\r\n    <div class="ability ${item.level === 0 ? \'untrained\' : \'\'}" repeat.for="item of model">\r\n        <checkbox size="xs" mode="angled" value.two-way="item.puissant" title="Puissant ability"></checkbox>\r\n        <text-field class="name" value.two-way="item.name"></text-field>\r\n        <text-field class="specialisation" value.two-way="item.specialisation" placeholder="Specialisation"></text-field>\r\n        <primary-stat class="level" mode="secondary" value.two-way="item.level" min="0" size="s" title="Ability level"></primary-stat>\r\n        <primary-stat class="xp" mode="secondary" value.two-way="item.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n        <span class="puissant-label"><span class="numbers text" if.bind="item.puissant">+2</span></span>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add item" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',MA=LA,jA=[];let UA;function NA(t){UA||(UA=Sh.define({name:PA,template:LA,dependencies:jA})),t.register(UA)}let BA=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.abilities}),_S,e),this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.model.push({name:this.newItemText,specialisation:"",level:0,xp:0,puissant:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};BA=mS([ch(g),yS(1,oi),bS("design:paramtypes",[Yv,Object])],BA);var FA=n(3292),VA={};VA.styleTagTransform=RS(),VA.setAttributes=TS(),VA.insert=AS().bind(null,"head"),VA.domAPI=SS(),VA.insertStyleElement=IS(),xS()(FA.Z,VA),FA.Z&&FA.Z.locals&&FA.Z.locals;const DA="characteristics-block",zA='<title text="CHARACTERISTICS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.strength.specialisation"></text-field>\r\n        <span class="text left-col">STR</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.strength.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.strength.value"></primary-stat>\r\n\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.dexterity.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.dexterity.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">DEX</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.dexterity.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.stamina.specialisation"></text-field>\r\n        <span class="text left-col">STA</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.stamina.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.stamina.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.quickness.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.quickness.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">QUI</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.quickness.specialisation"></text-field>\r\n    </div>\r\n    <br/>\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.intelligence.specialisation"></text-field>\r\n        <span class="text left-col">INT</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.intelligence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.intelligence.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.presence.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.presence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">PRE</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.presence.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.perception.specialisation"></text-field>\r\n        <span class="text left-col">PER</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.perception.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.perception.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.communication.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.communication.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">COM</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.communication.specialisation"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',qA=zA,HA=[];let ZA;function WA(t){ZA||(ZA=Sh.define({name:DA,template:zA,dependencies:HA})),t.register(ZA)}let KA=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.characteristics}),KS,e)}};KA=mS([ch(m),yS(1,oi),bS("design:paramtypes",[Yv,Object])],KA);var _A=n(1459),QA={};QA.styleTagTransform=RS(),QA.setAttributes=TS(),QA.insert=AS().bind(null,"head"),QA.domAPI=SS(),QA.insertStyleElement=IS(),xS()(_A.Z,QA),_A.Z&&_A.Z.locals&&_A.Z.locals;const GA="fatigue-block",XA='<title text="FATIGUE"></title>\r\n<div class="container grid text">\r\n    <span>Fresh (-0)</span><span class="right"></span><radio-button group="fatigue" state="${model.fatigue == 0 ? \'selected\' : \'unselected\'}" value="0"></radio-button>\r\n    <span>Winded (-0)</span><span class="right">2m</span><radio-button group="fatigue" state="${model.fatigue == 1 ? \'selected\' : \'unselected\'}" value="1"></radio-button>\r\n    <span>Weary (-1)</span><span class="right">10m</span><radio-button group="fatigue" state="${model.fatigue == 2 ? \'selected\' : \'unselected\'}" value="2"></radio-button>\r\n    <span>Tired (-3)</span><span class="right">30m</span><radio-button group="fatigue" state="${model.fatigue == 3 ? \'selected\' : \'unselected\'}" value="3"></radio-button>\r\n    <span>Dazed (-5)</span><span class="right">1h</span><radio-button group="fatigue" state="${model.fatigue == 4 ? \'selected\' : \'unselected\'}" value="4"></radio-button>\r\n    <span>Unconscious</span><span class="right">2h</span><radio-button group="fatigue" state="${model.fatigue == 5 ? \'selected\' : \'unselected\'}" value="5"></radio-button>\r\n</div>\r\n<footer></footer>',YA=XA,JA=[];let tE;function eE(t){tE||(tE=Sh.define({name:GA,template:XA,dependencies:JA})),t.register(tE)}let nE=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),JS,e)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"fatigue"==t.group&&(this.model.fatigue=Number.parseInt(t.value))}))}};nE=mS([ch(b),yS(1,oi),bS("design:paramtypes",[Yv,Object])],nE);var iE=n(6903),sE={};sE.styleTagTransform=RS(),sE.setAttributes=TS(),sE.insert=AS().bind(null,"head"),sE.domAPI=SS(),sE.insertStyleElement=IS(),xS()(iE.Z,sE),iE.Z&&iE.Z.locals&&iE.Z.locals;const rE="damage-block",oE='<title text="WOUNDS"></title>\r\n<div class="container text">\r\n    <span class="wound-type">Light</span><primary-stat value.two-way="model.lightWounds" min="0" size="s"></primary-stat>\r\n    <span class="wound-type">Medium</span><primary-stat value.two-way="model.mediumWounds" min="0" size="s"></primary-stat>\r\n    <span class="wound-type">Heavy</span><primary-stat value.two-way="model.heavyWounds" min="0" size="s"></primary-stat>\r\n</div>\r\n<footer></footer>',aE=oE,lE=[];let cE;function hE(t){cE||(cE=Sh.define({name:rE,template:oE,dependencies:lE})),t.register(cE)}let uE=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),JS,e)}};uE=mS([ch(x),yS(1,oi),bS("design:paramtypes",[Yv,Object])],uE);var dE=n(4397),pE={};pE.styleTagTransform=RS(),pE.setAttributes=TS(),pE.insert=AS().bind(null,"head"),pE.domAPI=SS(),pE.insertStyleElement=IS(),xS()(dE.Z,pE),dE.Z&&dE.Z.locals&&dE.Z.locals;const fE="confidence-block",gE='<primary-stat size="l" min="0" value.two-way="model.score" mode="primary-angled" title="Confidence Points"></primary-stat>',vE=gE,mE=[];let yE;function bE(t){yE||(yE=Sh.define({name:fE,template:gE,dependencies:mE})),t.register(yE)}let wE=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.confidence}),iC,e)}};wE=mS([ch(S),yS(1,oi),bS("design:paramtypes",[Yv,Object])],wE);var xE=n(7804),kE={};kE.styleTagTransform=RS(),kE.setAttributes=TS(),kE.insert=AS().bind(null,"head"),kE.domAPI=SS(),kE.insertStyleElement=IS(),xS()(xE.Z,kE),xE.Z&&xE.Z.locals&&xE.Z.locals;const SE="active-magic-list",CE='<title text="ACTIVE MAGIC"></title>\r\n<div class="container">\r\n    <div class="active-magic grid" repeat.for="magic of model">\r\n        <checkbox size="s" mode="angled" value.two-way="magic.active" title="Active"></checkbox>\r\n        <text-field class="name" value.two-way="magic.name" placeholder="Name"></text-field>\r\n        <primary-stat mode="secondary" value.two-way="magic.penetration" min="0" size="s" title="Penetration" readonly.bind="!magic.active" color-mode="${magic.active ? \'color\' : \'monochrome\'}"></primary-stat>\r\n    </div>\r\n    <input class="add-magic-input" type="text" placeholder="Add active magic" keyup.delegate="keyPressed($event)" value.two-way="newMagicText">\r\n</div>\r\n<footer></footer>',AE=CE,EE=[];let TE;function $E(t){TE||(TE=Sh.define({name:SE,template:CE,dependencies:EE})),t.register(TE)}let IE=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.activeMagic}),rC,e),this.newMagicText="",this.keyPressed=t=>{this.model||(this.model=[]),"Enter"==t.key&&this.newMagicText&&(this.model.push({name:this.newMagicText,penetration:0,active:!0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newMagicText="")}}};IE=mS([ch(A),yS(1,oi),bS("design:paramtypes",[Yv,Object])],IE);const OE="stats",RE='\r\n\r\n\r\n\r\n\r\n\r\n\r\n<abilities-block></abilities-block>\r\n<characteristics-block></characteristics-block>\r\n<fatigue-block></fatigue-block>\r\n<damage-block></damage-block>\r\n<confidence-block></confidence-block>\r\n<active-magic-list></active-magic-list>\r\n\r\n<div style="clear: both;"></div>',PE=RE,LE=[v,y,w,k,C,E];let ME;function jE(t){ME||(ME=Sh.define({name:OE,template:RE,dependencies:LE})),t.register(ME)}let UE=class{};UE=mS([ch(T)],UE);var NE=n(5185),BE={};BE.styleTagTransform=RS(),BE.setAttributes=TS(),BE.insert=AS().bind(null,"head"),BE.domAPI=SS(),BE.insertStyleElement=IS(),xS()(NE.Z,BE),NE.Z&&NE.Z.locals&&NE.Z.locals;const FE="arts-block",VE='<title text="ARTS"></title>\r\n<div class="container grid">\r\n    <checkbox size="xs" mode="angled" value.two-way="model.creo.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.creo.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.creo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.creo.level === 0 ? \'untrained\' : \'\'}">Creo</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.animal.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.animal.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.animal.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span  class="name text ${model.animal.level === 0 ? \'untrained\' : \'\'}">Animal</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.ignem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.ignem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.ignem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.ignem.level === 0 ? \'untrained\' : \'\'}">Ignem</span>\r\n\r\n   \r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.intellego.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.intellego.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.intellego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.intellego.level === 0 ? \'untrained\' : \'\'}">Intellego</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.aquam.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.aquam.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.aquam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.aquam.level === 0 ? \'untrained\' : \'\'}">Aquam</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.imaginem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.imaginem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.imaginem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.imaginem.level === 0 ? \'untrained\' : \'\'}">Imaginem</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.muto.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.muto.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.muto.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.muto.level === 0 ? \'untrained\' : \'\'}">Muto</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.auram.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.auram.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.auram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.auram.level === 0 ? \'untrained\' : \'\'}">Auram</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.mentem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.mentem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.mentem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.mentem.level === 0 ? \'untrained\' : \'\'}">Mentem</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.perdo.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.perdo.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.perdo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.perdo.level === 0 ? \'untrained\' : \'\'}">Perdo</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.corpus.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.corpus.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.corpus.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.corpus.level === 0 ? \'untrained\' : \'\'}">Corpus</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.terram.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.terram.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.terram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.terram.level === 0 ? \'untrained\' : \'\'}">Terram</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.rego.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.rego.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.rego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.rego.level === 0 ? \'untrained\' : \'\'}">Rego</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.herbam.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.herbam.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.herbam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.herbam.level === 0 ? \'untrained\' : \'\'}">Herbam</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.vim.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.vim.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.vim.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.vim.level === 0 ? \'untrained\' : \'\'}">Vim</span>\r\n</div>\r\n<footer></footer>',DE=VE,zE=[];let qE;function HE(t){qE||(qE=Sh.define({name:FE,template:VE,dependencies:zE})),t.register(qE)}let ZE=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.arts}),tC,e)}};ZE=mS([ch(I),yS(1,oi),bS("design:paramtypes",[Yv,Object])],ZE);var WE=n(2244),KE={};KE.styleTagTransform=RS(),KE.setAttributes=TS(),KE.insert=AS().bind(null,"head"),KE.domAPI=SS(),KE.insertStyleElement=IS(),xS()(WE.Z,KE),WE.Z&&WE.Z.locals&&WE.Z.locals;const _E="spellcasting-modifiers-block",QE='<title text="SPELLCASTING STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Aura</span>\r\n        <span class="text">Stamina Specialisation</span>\r\n        <span class="text" if.bind="showGoodCycle">Good Cycle</span>\r\n        <span class="text">Loud Voice</span>\r\n        <span class="text">Large Gestures</span>\r\n\r\n        <span class="text">Arts</span>\r\n        <span class="text">Ceremonial</span>\r\n        <span class="text">Talisman Bonus</span>\r\n        <span class="text">Similar Spell</span>\r\n        <span class="text">Focus</span>\r\n        <span class="text">Casting Total</span>\r\n\r\n        <span if.bind="!showGoodCycle"></span>\r\n\r\n        <primary-stat value.two-way="model.aura" mode="secondary" prefix-plus.bind="true"></primary-stat></primary-stat>\r\n        <checkbox value.two-way="model.staminaSpecialisation" mode="angled"></checkbox>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="model.positiveCycle" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.loudVoice" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.largeGestures" mode="angled"></checkbox>\r\n\r\n        <text-field class="arts" value.two-way="model.arts" placeholder="Arts"></text-field>\r\n        <checkbox value.two-way="model.ceremonial" mode="angled" color-mode="monochrome"></checkbox>\r\n        <primary-stat value.two-way="model.talismanBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.similarFomulaicSpellBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n        <checkbox value.two-way="model.focus" mode="angled" color-mode="monochrome"></checkbox>\r\n        <primary-stat value.two-way="model.spontaneousCastingTotal" mode="primary-angled" readonly.bind="true" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',GE=QE,XE=[];let YE;function JE(t){YE||(YE=Sh.define({name:_E,template:QE,dependencies:XE})),t.register(YE)}let tT=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellcastingStats}),hC,e)}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};tT=mS([ch(R),yS(1,oi),bS("design:paramtypes",[Yv,Object])],tT);var eT=n(7624),nT={};nT.styleTagTransform=RS(),nT.setAttributes=TS(),nT.insert=AS().bind(null,"head"),nT.domAPI=SS(),nT.insertStyleElement=IS(),xS()(eT.Z,nT),eT.Z&&eT.Z.locals&&eT.Z.locals;const iT="spell-list",sT='<title text="SPELLS"></title>\r\n<div class="container">\r\n    <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n        <span class="form-header"></span>\r\n        <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n        <checkbox size="xs" value.two-way="spell.focus" title="Focus"></checkbox>\r\n        <checkbox size="xs" value.two-way="spell.ritual" title="Ritual"></checkbox>\r\n        <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n        <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n        <span class="casting-total-label numbers text">+${spell.castingTotal}</span>\r\n        <primary-stat class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></primary-stat>\r\n        <primary-stat class="attunement-bonus" mode="secondary" value.two-way="spell.attunementBonus" min="0" size="xs" color-mode="monochrome" title="Attunement bonus"></primary-stat>\r\n        <text-field class="attunement" value.two-way="spell.attunement" placeholder="Attunement"></text-field>\r\n        <text-field class="masteries" value.two-way="spell.masteries" placeholder="Masteries"></text-field>\r\n        <primary-stat class="mastery-level" mode="secondary" value.two-way="spell.masteryLevel" min="0" size="s" color-mode="monochrome" title="Mastery level"></primary-stat>\r\n        <primary-stat class="xp" mode="secondary" value.two-way="spell.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n        <text-field class="range" value.two-way="spell.range" placeholder="Range"></text-field>\r\n        <text-field class="duration" value.two-way="spell.duration" placeholder="Duration"></text-field>\r\n        <text-field class="target" value.two-way="spell.target" placeholder="Target"></text-field>\r\n        <text-field class="notes" value.two-way="spell.notes" placeholder="Notes" title="${spell.notes}"></text-field>\r\n        <text-field class="sigil" value.two-way="spell.sigil" placeholder="Sigil" title="${spell.sigil}"></text-field>\r\n        <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n        <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add spell" keyup.delegate="keyPressed($event)" value.two-way="newSpellText">\r\n</div>\r\n<footer></footer>',rT=sT,oT=[];let aT;function lT(t){aT||(aT=Sh.define({name:iT,template:sT,dependencies:oT})),t.register(aT)}let cT=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spells}),eC,e),this.newSpellText="",this.keyPressed=t=>{"Enter"==t.key&&this.newSpellText&&(this.model.push({name:this.newSpellText,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,notes:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newSpellText="")}}};cT=mS([ch(L),yS(1,oi),bS("design:paramtypes",[Yv,Object])],cT);var hT=n(7266),uT={};uT.styleTagTransform=RS(),uT.setAttributes=TS(),uT.insert=AS().bind(null,"head"),uT.domAPI=SS(),uT.insertStyleElement=IS(),xS()(hT.Z,uT),hT.Z&&hT.Z.locals&&hT.Z.locals;const dT="sigil",pT='<div class="container" drop.delegate="onDrop($event)" active-drag.class="dragging" dragenter.delegate="dragging = true" dragleave.delegate="dragging = false">\r\n    <div class="sigil-image-placeholder" if.bind="!model"></div>\r\n    <img class="sigil-image" if.bind="model" src="${model}"/>\r\n</div>',fT=pT,gT=[];let vT;function mT(t){vT||(vT=Sh.define({name:dT,template:pT,dependencies:gT})),t.register(vT)}let yT=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.sigil}),pC,e),this.dragging=!1,this.onDrop=t=>{if(1!=t.dataTransfer.items.length)return;let e=t.dataTransfer.items[0];if("file"==e.kind&&e.type.startsWith("image")){var n=new FileReader;n.onload=()=>{this.model=n.result,this.dragging=!1},n.readAsDataURL(e.getAsFile())}}}};yT=mS([ch(j),yS(1,oi),bS("design:paramtypes",[Yv,Object])],yT);const bT="magic",wT='\r\n\r\n\r\n\r\n\r\n<arts-block></arts-block>\r\n<spellcasting-modifiers-block></spellcasting-modifiers-block>\r\n<spell-list></spell-list>\r\n<sigil></sigil>\r\n\r\n<div style="clear: both;"></div>',xT=wT,kT=[O,P,M,U];let ST;function CT(t){ST||(ST=Sh.define({name:bT,template:wT,dependencies:kT})),t.register(ST)}let AT=class{};AT=mS([ch(N)],AT);var ET=n(8412),TT={};TT.styleTagTransform=RS(),TT.setAttributes=TS(),TT.insert=AS().bind(null,"head"),TT.domAPI=SS(),TT.insertStyleElement=IS(),xS()(ET.Z,TT),ET.Z&&ET.Z.locals&&ET.Z.locals;const $T="lab-stats",IT='<title text="LAB STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Size</span>\r\n        <span class="text">Refinement</span>\r\n        <span class="text">Occupied Size</span>\r\n        <span class="text">Effective Safety</span>\r\n        <span class="text">Living Conditions Modifier</span>\r\n        <span class="text">Specialisation 1</span>\r\n        <span class="text">Specialisation 2</span>\r\n        <span class="text">Art 1 (Any)</span>\r\n        <span class="text">Art 2 (Any)</span>\r\n        <span class="text">Art 3 (Form)</span>\r\n        <span class="text">Art 4 (Form)</span>\r\n\r\n        <primary-stat value.two-way="model.size" mode="primary-angled" min="-3"></primary-stat>\r\n        <primary-stat value.two-way="model.refinement" mode="primary-angled" min="0"></primary-stat>\r\n        <primary-stat value.two-way="model.occupiedSize" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.effectiveSafety" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.livingConditionsModifier" mode="secondary-angled" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.specialisation1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.specialisation2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art3.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art4.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art3.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art4.name" placeholder="Modifier"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',OT=IT,RT=[];let PT;function LT(t){PT||(PT=Sh.define({name:$T,template:IT,dependencies:RT})),t.register(PT)}let MT=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),lC,e)}};MT=mS([ch(F),yS(1,oi),bS("design:paramtypes",[Yv,Object])],MT);var jT=n(4467),UT={};UT.styleTagTransform=RS(),UT.setAttributes=TS(),UT.insert=AS().bind(null,"head"),UT.domAPI=SS(),UT.insertStyleElement=IS(),xS()(jT.Z,UT),jT.Z&&jT.Z.locals&&jT.Z.locals;const NT="research-projects",BT='<title text="RESEARCH PROJECTS"></title>\r\n<div class="container">\r\n    <primary-stat class="aura-bonus" mode="secondary" value.two-way="model.auraBonus" size="s" title="Aura Bonus" prefix-plus.bind="true"></primary-stat>\r\n\r\n    <div class="project grid" repeat.for="project of model.researchProjects">\r\n        <text-field class="name" value.two-way="project.name" placeholder="Name"></text-field>\r\n        <text-field class="arts" value.two-way="project.arts" placeholder="Arts"></text-field>\r\n        <text-field class="prerequisites" value.two-way="project.prerequisites" placeholder="Prereq"></text-field>\r\n        <primary-stat class="level" mode="secondary" value.two-way="project.level" min="1" size="m" title="Level"></primary-stat>\r\n\r\n        <checkbox value.two-way="project.focus" title="Focus"></checkbox>\r\n        <primary-stat class="specialisation-bonus" mode="secondary" value.two-way="project.specialisationBonus" min="0" size="s" title="Lab Specialisation Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <checkbox value.two-way="project.intelligenceSpecialisation" title="Intelligence Specialisation"></checkbox>\r\n        <checkbox value.two-way="project.magicTheorySpecialisation" title="Magic Theory Specialisation"></checkbox>\r\n        <checkbox value.two-way="project.talisman" title="Talisman"></checkbox>\r\n        <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="project.newWork" title="New Invention"></checkbox>\r\n        <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="project.experiment" title="Experiment"></checkbox>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="project.positiveCycle" title="Good Cycle"></checkbox>\r\n        <checkbox value.two-way="project.nocturnal" title="Nocturnal - An “owl,” the maga’s daily cycle is the opposite of most folk — she\r\n        works at night and sleeps during the day. This has the advantage that the night\r\n        is quieter and presents fewer distractions — gain +2 to the Lab Total for\r\n        the season. Due to lack of sunlight and daylight living, however, she suffers a –1\r\n        penalty to her Living Conditions modifier for any year in which she has taken at\r\n        least one Nocturnal season. She also has trouble functioning during the daytime;\r\n        when dawn breaks, she loses a Long-Term Fatigue level and gains one extra botch\r\n        die on all activities for the day. She will likely not appreciate being woken up in\r\n        daylight hours. This routine is commonly taken by characters with the Nocturnal\r\n        Personality Flaw."></checkbox>\r\n        <primary-stat class="similar-research-bonus" mode="secondary" value.two-way="project.similarResearchBonus" min="0" size="s" title="Similar Research Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <text-field class="material" value.two-way="project.material" placeholder="Material"></text-field>\r\n        <primary-stat class="material-bonus" mode="secondary" value.two-way="project.materialBonus" min="0" size="s" title="Material Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <text-field class="shape" value.two-way="project.shape" placeholder="Shape"></text-field>\r\n        <primary-stat class="shape-bonus" mode="secondary" value.two-way="project.shapeBonus" min="0" size="s" title="Shape Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat class="lab-assistant-bonus" mode="secondary" value.two-way="project.labAssistantBonus" min="0" size="s" title="Lab Assistant Bonus" prefix-plus.bind="true"></primary-stat>\r\n        \r\n        <primary-stat class="total" mode="primary" readonly.bind="true" value.two-way="project.labTotal" min="0" size="m" title="Lab Total"></primary-stat>\r\n        <primary-stat class="surplus" mode="secondary" readonly.bind="true" value.two-way="project.surplusLabTotal" min="0" size="s" title="Surplus Lab Total"></primary-stat>\r\n        <primary-stat class="accumulated-total" mode="secondary" value.two-way="project.accumulatedLabTotal" min="0" size="s" title="Accumulated Lab Total"></primary-stat>\r\n        \r\n        <text-field class="description" value.two-way="project.description" placeholder="Description" title="${project.description}"></text-field>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add project" keyup.delegate="keyPressed($event)" value.two-way="newProjectText">\r\n</div>\r\n<footer></footer>',FT=BT,VT=[];let DT;function zT(t){DT||(DT=Sh.define({name:NT,template:BT,dependencies:VT})),t.register(DT)}let qT=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),lC,e),this.newProjectText="",this.keyPressed=t=>{"Enter"==t.key&&this.newProjectText&&(this.model.researchProjects.push({name:this.newProjectText,description:"",accumulatedLabTotal:0,surplusLabTotal:0,artModifier:0,arts:"",prerequisites:"",focus:!1,labTotal:0,labAssistantBonus:0,magicTheorySpecialisation:!1,intelligenceSpecialisation:!0,material:"",materialBonus:0,shape:"",shapeBonus:0,similarResearchBonus:0,specialisationBonus:0,talisman:!1,level:1,experiment:!1,newWork:!0,nocturnal:!1,positiveCycle:!1}),this.newProjectText="")}}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};qT=mS([ch(D),yS(1,oi),bS("design:paramtypes",[Yv,Object])],qT);var HT=n(6964),ZT={};ZT.styleTagTransform=RS(),ZT.setAttributes=TS(),ZT.insert=AS().bind(null,"head"),ZT.domAPI=SS(),ZT.insertStyleElement=IS(),xS()(HT.Z,ZT),HT.Z&&HT.Z.locals&&HT.Z.locals;const WT="lab-modifications-list",KT='<title text="LAB MODIFICATIONS"></title>\r\n<div class="container">\r\n    <input class="add-item-input add-modifier-input" type="text" keyup.delegate="keyPressed($event, \'modifier\')" value.two-way="newModifierText" title="Add Modifier Column">\r\n    <div class="modifier-titles">\r\n        <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n    </div>\r\n\r\n    <label class="text title">VIRTUES</label>\r\n    <div class="virtue grid" repeat.for="virtue of model.virtues">\r\n        <text-field class="name" value.two-way="virtue.name" placeholder="Name"></text-field>\r\n        <text-field class="category" value.two-way="virtue.category" placeholder="Category"></text-field>\r\n        <text-field class="description" value.two-way="virtue.description" placeholder="Description"></text-field>\r\n        <primary-stat class="cost" mode="secondary" value.two-way="virtue.cost" min="0" size="s" title="Cost"></primary-stat>\r\n        <primary-stat class="modifier" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of virtue.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></primary-stat>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add virtue" keyup.delegate="keyPressed($event, \'virtue\')" value.two-way="newVirtueText">\r\n\r\n    <label class="text title">FLAWS</label>\r\n    <div class="flaw grid" repeat.for="flaw of model.flaws">\r\n        <text-field class="name" value.two-way="flaw.name" placeholder="Name"></text-field>\r\n        <text-field class="category" value.two-way="flaw.category" placeholder="Category"></text-field>\r\n        <text-field class="description" value.two-way="flaw.description" placeholder="Description"></text-field>\r\n        <primary-stat class="cost" mode="secondary" value.two-way="flaw.cost" max="0" size="s" title="Cost"></primary-stat>\r\n        <primary-stat class="modifier" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of flaw.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></primary-stat>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add flaw" keyup.delegate="keyPressed($event, \'flaw\')" value.two-way="newFlawText">\r\n\r\n    <div class="modifier-totals">\r\n        <span class="numbers modifier-total" repeat.for="total of totals" class="modifier-title text">${total}</span>\r\n    </div>\r\n</div>\r\n<footer></footer>',_T=KT,QT=[];let GT;function XT(t){GT||(GT=Sh.define({name:WT,template:KT,dependencies:QT})),t.register(GT)}let YT=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),lC,e),this.newVirtueText="",this.newFlawText="",this.newModifierText="",this.keyPressed=(t,e)=>{"Enter"==t.key&&("virtue"==e&&this.newVirtueText&&(this.model.virtues.push({name:this.newVirtueText,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Virtue"}),this.model.virtues.sort(((t,e)=>t.name.localeCompare(e.name))),this.newVirtueText=""),"flaw"==e&&this.newFlawText&&(this.model.flaws.push({name:this.newFlawText,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Flaw"}),this.model.flaws.sort(((t,e)=>t.name.localeCompare(e.name))),this.newFlawText=""),"modifier"==e&&this.newModifierText&&(this.model.availableModifiers.push({name:this.newModifierText}),this.newModifierText=""))}}get totals(){return this.model?PC(this.model).map((t=>t.rating)):[]}};YT=mS([ch(q),yS(1,oi),bS("design:paramtypes",[Yv,Object])],YT);var JT=n(2820),t$={};t$.styleTagTransform=RS(),t$.setAttributes=TS(),t$.insert=AS().bind(null,"head"),t$.domAPI=SS(),t$.insertStyleElement=IS(),xS()(JT.Z,t$),JT.Z&&JT.Z.locals&&JT.Z.locals;const e$="lab-description-block",n$='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',i$=n$,s$=[];let r$;function o$(t){r$||(r$=Sh.define({name:e$,template:n$,dependencies:s$})),t.register(r$)}let a$=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),lC,e)}};a$=mS([ch(Z),yS(1,oi),bS("design:paramtypes",[Yv,Object])],a$);const l$="lab",c$='\r\n\r\n\r\n\r\n\r\n<lab-stats></lab-stats>\r\n<research-projects></research-projects>\r\n<lab-modifications-list></lab-modifications-list>\r\n<lab-description-block></lab-description-block>\r\n\r\n<div style="clear: both;"></div>',h$=c$,u$=[V,z,H,W];let d$;function p$(t){d$||(d$=Sh.define({name:l$,template:c$,dependencies:u$})),t.register(d$)}let f$=class{};f$=mS([ch(K)],f$);var g$=n(8985),v$={};v$.styleTagTransform=RS(),v$.setAttributes=TS(),v$.insert=AS().bind(null,"head"),v$.domAPI=SS(),v$.insertStyleElement=IS(),xS()(g$.Z,v$),g$.Z&&g$.Z.locals&&g$.Z.locals;const m$="carried-belongings-block",y$='<text-box title="CARRIED" text.two-way="model.carried"></text-box>',b$=y$,w$=[];let x$;function k$(t){x$||(x$=Sh.define({name:m$,template:y$,dependencies:w$})),t.register(x$)}let S$=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),fC,e)}};S$=mS([ch(Q),yS(1,oi),bS("design:paramtypes",[Yv,Object])],S$);var C$=n(5204),A$={};A$.styleTagTransform=RS(),A$.setAttributes=TS(),A$.insert=AS().bind(null,"head"),A$.domAPI=SS(),A$.insertStyleElement=IS(),xS()(C$.Z,A$),C$.Z&&C$.Z.locals&&C$.Z.locals;const E$="sanctum-belongings-block",T$='<text-box title="SANCTUM" text.two-way="model.inSanctum"></text-box>',$$=T$,I$=[];let O$;function R$(t){O$||(O$=Sh.define({name:E$,template:T$,dependencies:I$})),t.register(O$)}let P$=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),fC,e)}};P$=mS([ch(X),yS(1,oi),bS("design:paramtypes",[Yv,Object])],P$);var L$=n(1860),M$={};M$.styleTagTransform=RS(),M$.setAttributes=TS(),M$.insert=AS().bind(null,"head"),M$.domAPI=SS(),M$.insertStyleElement=IS(),xS()(L$.Z,M$),L$.Z&&L$.Z.locals&&L$.Z.locals;const j$="vis-block",U$='<title text="VIS"></title>\r\n<div class="container">\r\n    <div class="vis grid" repeat.for="vis of model.vis">\r\n        <text-field class="name" value.two-way="vis.name"></text-field>\r\n        <primary-stat class="lab-vis" mode="secondary" value.two-way="vis.amountInLab" min="0" size="s" title="In lab"></primary-stat>\r\n        <primary-stat class="personal-vis" mode="secondary" value.two-way="vis.amountOnPerson" min="0" size="s" title="On person"></primary-stat>\r\n        <text-field class="income" value.two-way="vis.income" placeholder="Income" title="${vis.income}"></text-field>\r\n        <text-field class="notes" value.two-way="vis.notes" placeholder="Notes" title="${vis.notes}"></text-field>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add vis type" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',N$=U$,B$=[];let F$;function V$(t){F$||(F$=Sh.define({name:j$,template:U$,dependencies:B$})),t.register(F$)}let D$=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),fC,e),this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.model||(this.model={carried:"",inSanctum:"",vis:[]}),this.model.vis||(this.model.vis=[]),this.model.vis.push({name:this.newItemText,amountInLab:0,amountOnPerson:0,income:"",notes:""}),this.model.vis.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};D$=mS([ch(J),yS(1,oi),bS("design:paramtypes",[Yv,Object])],D$);const z$="belongings",q$='\r\n\r\n\r\n\r\n<carried-belongings-block></carried-belongings-block>\r\n<sanctum-belongings-block></sanctum-belongings-block>\r\n<vis-block></vis-block>\r\n\r\n<div style="clear: both;"></div>',H$=q$,Z$=[G,Y,tt];let W$;function K$(t){W$||(W$=Sh.define({name:z$,template:q$,dependencies:Z$})),t.register(W$)}let _$=class{};_$=mS([ch(et)],_$);var Q$=n(3349),G$={};G$.styleTagTransform=RS(),G$.setAttributes=TS(),G$.insert=AS().bind(null,"head"),G$.domAPI=SS(),G$.insertStyleElement=IS(),xS()(Q$.Z,G$),Q$.Z&&Q$.Z.locals&&Q$.Z.locals;const X$="notes-block",Y$='<text-box title="NOTES" text.two-way="model"></text-box>',J$=Y$,tI=[];let eI;function nI(t){eI||(eI=Sh.define({name:X$,template:Y$,dependencies:tI})),t.register(eI)}let iI=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.notes}),aC,e)}};iI=mS([ch(it),yS(1,oi),bS("design:paramtypes",[Yv,Object])],iI);var sI=n(3260),rI={};rI.styleTagTransform=RS(),rI.setAttributes=TS(),rI.insert=AS().bind(null,"head"),rI.domAPI=SS(),rI.insertStyleElement=IS(),xS()(sI.Z,rI),sI.Z&&sI.Z.locals&&sI.Z.locals;const oI="background-block",aI='<text-box title="BACKGROUND" text.two-way="model"></text-box>',lI=aI,cI=[];let hI;function uI(t){hI||(hI=Sh.define({name:oI,template:aI,dependencies:cI})),t.register(hI)}let dI=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.background}),dC,e)}};dI=mS([ch(rt),yS(1,oi),bS("design:paramtypes",[Yv,Object])],dI);var pI=n(7600),fI={};fI.styleTagTransform=RS(),fI.setAttributes=TS(),fI.insert=AS().bind(null,"head"),fI.domAPI=SS(),fI.insertStyleElement=IS(),xS()(pI.Z,fI),pI.Z&&pI.Z.locals&&pI.Z.locals;const gI="quest-list",vI='<title text="QUESTS"></title>\r\n<div class="container">\r\n    <div class="quest grid" repeat.for="quest of model">\r\n        <checkbox mode="angled" size="xs" value.two-way="quest.focused" title="Focused"></checkbox>\r\n        <primary-stat class="priority" mode="secondary" value.two-way="quest.priority" min="1" size="xs" title="Priority"></primary-stat>\r\n        <text-field class="name" value.two-way="quest.name" placeholder="Name" title="${quest.name}"></text-field>\r\n    </div>\r\n    <add-item-input placeholder="Add quest" on-item-added.bind="questAdded">\r\n</div>\r\n<footer></footer>',mI=vI,yI=[];let bI;function wI(t){bI||(bI=Sh.define({name:gI,template:vI,dependencies:yI})),t.register(bI)}let xI=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.quests}),mC,e),this.questAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,focused:!1,priority:0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))).sort(((t,e)=>t.priority-e.priority))}}};xI=mS([ch(at),yS(1,oi),bS("design:paramtypes",[Yv,Object])],xI);const kI="notes",SI='\r\n\r\n\r\n\r\n<notes-block></notes-block>\r\n<background-block></background-block>\r\n<quest-list></quest-list>\r\n\r\n<div style="clear: both;"></div>',CI=SI,AI=[st,ot,lt];let EI;function TI(t){EI||(EI=Sh.define({name:kI,template:SI,dependencies:AI})),t.register(EI)}let $I=class{};$I=mS([ch(ct)],$I);var II=n(8840),OI={};OI.styleTagTransform=RS(),OI.setAttributes=TS(),OI.insert=AS().bind(null,"head"),OI.domAPI=SS(),OI.insertStyleElement=IS(),xS()(II.Z,OI),II.Z&&II.Z.locals&&II.Z.locals;const RI="xp-list",PI='<title text="XP ENTRIES"></title>\r\n<div class="container">\r\n    <div class="xp-entry grid" repeat.for="entry of planningEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n        <text-field class="plans" value.two-way="entry.plans" placeholder="Plans"></text-field>\r\n    </div>\r\n\r\n    <div class="separator"></div>\r\n\r\n    <div class="past-xp-entry grid" repeat.for="entry of pastEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>',LI=PI,MI=[];let jI;function UI(t){jI||(jI=Sh.define({name:RI,template:PI,dependencies:MI})),t.register(jI)}let NI=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.xpEntries}),oC,e)}get planningEntries(){return this.model?this.model.filter((t=>t.planningMode)):[]}get pastEntries(){return this.model?this.model.filter((t=>!t.planningMode)):[]}};NI=mS([ch(ut),yS(1,oi),bS("design:paramtypes",[Yv,Object])],NI);var BI=n(2012),FI={};FI.styleTagTransform=RS(),FI.setAttributes=TS(),FI.insert=AS().bind(null,"head"),FI.domAPI=SS(),FI.insertStyleElement=IS(),xS()(BI.Z,FI),BI.Z&&BI.Z.locals&&BI.Z.locals;const VI="age-block",DI='<div class="container grid">\r\n    <primary-stat class="small-text" mode="secondary-angled" size="m" value.two-way="model.birthYear" min="0" max="2000" title="Birth Year"></primary-stat>\r\n    <div>\r\n        <primary-stat mode="secondary" size="s" value.two-way="model.age" readonly.bind="true" min="0" title="Age"></primary-stat>\r\n        <primary-stat mode="secondary" size="s" value.two-way="model.apparentAge" min="0" title="Apparent Age"></primary-stat>\r\n    </div>\r\n    <primary-stat class="small-text" mode="secondary-angled" size="m" value.two-way="model.currentYear" min="0" max="2000" title="Current Year"></primary-stat>\r\n\r\n    <primary-stat mode="secondary" size="s" value.two-way="model.livingConditionModifier" prefix-plus.bind="true" title="Living condition modifier"></primary-stat>\r\n    <primary-stat mode="primary" value.two-way="model.ageingRollModifier" prefix-plus.bind="true" title="Ageing roll bonus" readonly.bind="true"></primary-stat>\r\n    <primary-stat mode="secondary" size="s" value.two-way="model.longevityModifier" min="0" prefix-plus.bind="true" title="Longevity ritual modifier"></primary-stat>\r\n\r\n    <checkbox class="left" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 1" title="Decrepitude level 1"></checkbox>\r\n    <primary-stat mode="primary" value.two-way="model.decrepitudePoints" min="0" title="Decrepitude points"></primary-stat>\r\n    <checkbox class="right" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 5" title="Decrepitude level 5"></checkbox>\r\n\r\n    <checkbox class="right top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 2" title="Decrepitude level 2"></checkbox>\r\n    <checkbox class="bottom" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 3" title="Decrepitude level 3"></checkbox>\r\n    <checkbox class="left top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 4" title="Decrepitude level 4"></checkbox>\r\n</div>',zI=DI,qI=[];let HI;function ZI(t){HI||(HI=Sh.define({name:VI,template:DI,dependencies:qI})),t.register(HI)}let WI=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.ageing}),nC,e)}};WI=mS([ch(pt),yS(1,oi),bS("design:paramtypes",[Yv,Object])],WI);const KI="progression",_I='\r\n\r\n\r\n<age-block></age-block>\r\n<xp-list></xp-list>\r\n\r\n<div style="clear: both;"></div>',QI=_I,GI=[dt,ft];let XI;function YI(t){XI||(XI=Sh.define({name:KI,template:_I,dependencies:GI})),t.register(XI)}let JI=class{};JI=mS([ch(gt)],JI);var tO=n(6019),eO={};eO.styleTagTransform=RS(),eO.setAttributes=TS(),eO.insert=AS().bind(null,"head"),eO.domAPI=SS(),eO.insertStyleElement=IS(),xS()(tO.Z,eO),tO.Z&&tO.Z.locals&&tO.Z.locals;const nO="talisman-block",iO='<title text="TALISMAN"></title>\r\n<div class="container">\r\n    <primary-stat class="invested-vis" mode="primary" value.two-way="model.investedVis" min="0" size="m" title="Invested vis"></primary-stat>\r\n    <primary-stat class="spent-vis" mode="secondary" value.two-way="model.spentVis" min="0" max.bind="model.investedVis" size="s" title="Spent vis"></primary-stat>\r\n    <text-field class="description" value.two-way="model.description" placeholder="Description" title="${model.description}"></text-field>\r\n\r\n    <div class="bonuses">\r\n        <span class="title text">Bonuses</span>\r\n        <div class="bonus grid" repeat.for="bonus of model.bonuses">\r\n            <checkbox mode="angled" size="xs" value.two-way="bonus.instilled" title="Instilled"></checkbox>\r\n            <text-field class="name" value.two-way="bonus.name" placeholder="Name" title="${bonus.name}"></text-field>\r\n            <primary-stat class="bonus-modifier" mode="secondary" value.two-way="bonus.bonus" min="1" size="s" title="Bonus" prefix-plus.bind="true"></primary-stat>\r\n            <text-field class="source" value.two-way="bonus.source" placeholder="Source"></text-field>\r\n            <text-field class="notes" value.two-way="bonus.notes" placeholder="Notes" title="${bonus.notes}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="bonusAdded" placeholder="Add bonus"></add-item-input>\r\n    </div>\r\n\r\n    <div class="effects">\r\n        <span class="title text">Effects</span>\r\n        <div class="effect grid" repeat.for="effect of model.effects">\r\n            <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n            <primary-stat class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></primary-stat>\r\n            <primary-stat class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></primary-stat>\r\n            <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n            <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n            <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n            <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n            <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="effectAdded" placeholder="Add effect"></add-item-input>\r\n    </div>\r\n</div>\r\n<footer></footer>',sO=iO,rO=[];let oO;function aO(t){oO||(oO=Sh.define({name:nO,template:iO,dependencies:rO})),t.register(oO)}let lO=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.talisman}),gC,e),this.bonusAdded=t=>{this.model.bonuses.push({name:t,bonus:1,instilled:!1,source:"",notes:""}),this.model.bonuses.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=t=>{this.model.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),this.model.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};lO=mS([ch(mt),yS(1,oi),bS("design:paramtypes",[Yv,Object])],lO);var cO=n(4769),hO={};hO.styleTagTransform=RS(),hO.setAttributes=TS(),hO.insert=AS().bind(null,"head"),hO.domAPI=SS(),hO.insertStyleElement=IS(),xS()(cO.Z,hO),cO.Z&&cO.Z.locals&&cO.Z.locals;const uO="magic-items-block",dO='<title text="MAGIC ITEMS"></title>\r\n<div class="container">\r\n    <div class="magic-item grid" repeat.for="magicItem of model">\r\n        <text-field class="name" value.two-way="magicItem.name" placeholder="Name"></text-field>\r\n        <primary-stat class="invested-vis" mode="primary" value.two-way="magicItem.investedVis" min="0" size="m" title="Invested vis"></primary-stat>\r\n        <primary-stat class="spent-vis" mode="secondary" value.two-way="magicItem.spentVis" min="0" max.bind="magicItem.investedVis" size="s" title="Spent vis"></primary-stat>\r\n        <text-field class="description" value.two-way="magicItem.description" placeholder="Description" title="${magicItem.description}"></text-field>\r\n        <span></span>\r\n\r\n        <div class="effects">\r\n            <span class="title text">Effects</span>\r\n            <div class="effect grid" repeat.for="effect of magicItem.effects">\r\n                <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n                <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n                <primary-stat class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></primary-stat>\r\n                <primary-stat class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></primary-stat>\r\n                <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n                <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n                <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n                <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n                <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n            </div>\r\n            <add-item-input on-item-added.bind="effectAdded" parent.bind="magicItem" placeholder="Add effect"></add-item-input>\r\n        </div>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add items"></add-item-input>\r\n</div>\r\n<footer></footer>',pO=dO,fO=[];let gO;function vO(t){gO||(gO=Sh.define({name:uO,template:dO,dependencies:fO})),t.register(gO)}let mO=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.magicItems}),vC,e),this.itemAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",investedVis:0,spentVis:0,effects:[]}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=(t,e)=>{e.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),e.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};mO=mS([ch(bt),yS(1,oi),bS("design:paramtypes",[Yv,Object])],mO);const yO="enchantments",bO='\r\n\r\n\r\n<talisman-block></talisman-block>\r\n<magic-items-block></magic-items-block>\r\n\r\n<div style="clear: both;"></div>',wO=bO,xO=[yt,wt];let kO;function SO(t){kO||(kO=Sh.define({name:yO,template:bO,dependencies:xO})),t.register(kO)}let CO=class{};CO=mS([ch(xt)],CO);const AO="my-app",EO='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<page-header></page-header>\r\n\r\n<div class="page-view">\r\n    <au-viewport name="main" default="description"></au-viewport>\r\n</div>\r\n\r\n<rune-edge></rune-edge>\r\n\r\n<button click.delegate="undo()" disabled.bind="state.past.length == 0">Undo</button>\r\n<button click.delegate="redo()" disabled.bind="state.future.length == 0">Redo</button>\r\n<button click.delegate="save()">Save As</button>\r\n<button click.delegate="load()">Load</button>\r\n<button click.delegate="newCharacter()">Create New Character</button>\r\n<character-type-selector></character-type-selector>\r\n\r\n<input type=\'file\' accept=\'.json\' files.bind="selectedFiles" ref="fileInput" style="display: none;"><br>',TO=EO,$O=[e,f,$,B,_,nt,ht,vt,kt];let IO;function OO(t){IO||(IO=Sh.define({name:AO,template:EO,dependencies:$O})),t.register(IO)}let RO=class{constructor(t){this.store=t,this.middlewareRegistered=!1,this.isStandalone=window.matchMedia("(display-mode: standalone)").matches,this.undo=()=>{this.store.dispatch(Uv,-1)},this.redo=()=>{this.store.dispatch(Uv,1)},this.save=async()=>{if(this.isStandalone){const t={suggestedName:"character sheet.ars",types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};this.fileHandle=await window.showSaveFilePicker(t),await this.saveFile(this.state),this.middlewareRegistered||(this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),Dv.After),this.isInitialized=!0)}else!function(t,e){const n=document.createElement("a"),i=e.split(".").pop();n.href=URL.createObjectURL(new Blob([t],{type:`text/${"txt"===i?"plain":i}`})),n.download=e,n.click(),n.remove()}(JSON.stringify(this.state.present,null,4),"character sheet.ars")},this.load=async()=>{if(this.isStandalone){const t={types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};let[e]=await window.showOpenFilePicker(t);this.fileHandle=e,this.isInitialized=!1,this.middlewareRegistered||this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),Dv.After),this.store.dispatch(ZS,await this.fileHandle.getFile())}else this.fileInput.click(),this.fileInput.onchange=this.fileInputChanged},this.newCharacter=async()=>{this.isStandalone&&(this.fileHandle=null),await this.store.dispatch(HS),this.isStandalone&&await this.save()},this.fileInputChanged=()=>{this.theFile.text().then((t=>this.store.dispatch(cC,t)))},this.isInitialized=!1,this.fileStorageMiddlewareFactory=()=>(this.middlewareRegistered=!0,(t,e,n)=>{this.isInitialized?(console.log("Saving file to disk"),this.saveFile(t)):this.isInitialized=!0}),this.saveFile=async t=>{if(this.fileHandle){var e=await this.fileHandle.createWritable();await e.write(JSON.stringify(t.present,null,4)),await e.close()}else console.log("Could not save - file handle not set")},this.store.registerAction("createNewCharacter",HS),this.store.registerAction("loadCharacter",WS),this.store.registerAction("loadCharacterFromFile",ZS),this.store.registerAction("importCharacter",cC),this.store.registerAction("updateCharacteristics",KS),this.store.registerAction("updateAbilities",_S),this.store.registerAction("updateVirtues",GS),this.store.registerAction("updateFlaws",XS),this.store.registerAction("updateDescription",YS),this.store.registerAction("updatePhysicalStatus",JS),this.store.registerAction("updateArts",tC),this.store.registerAction("updateSpells",eC),this.store.registerAction("updatePersonalityTraits",QS),this.store.registerAction("updateAgeing",nC),this.store.registerAction("updateConfidence",iC),this.store.registerAction("updateWarping",sC),this.store.registerAction("updateActiveMagic",rC),this.store.registerAction("updateXpEntries",oC),this.store.registerAction("updateNotes",aC),this.store.registerAction("updateLab",lC),this.store.registerAction("updateSpellcastingStats",hC),this.store.registerAction("updateCharacterType",uC),this.store.registerAction("updateBackground",dC),this.store.registerAction("updateSigil",pC),this.store.registerAction("updateBelongings",fC),this.store.registerAction("updateTalisman",gC),this.store.registerAction("updateMagicItems",vC),this.store.registerAction("updateQuests",mC),this.isStandalone?this.registerFileLaunchHandler():(this.store.registerAction("rehydrateFromLocalStorage",Zv),t.registerMiddleware(Hv,Dv.After,{key:"character-sheets"}),t.dispatch(Zv,"character-sheets"))}registerFileLaunchHandler(){let t=window.launchQueue;t&&t.setConsumer((async t=>{const[e]=t.files;if(e){this.fileHandle=e;const t=await e.getFile();t&&(this.store.dispatch(ZS,t),this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),Dv.After))}}))}get theFile(){return this.selectedFiles&&this.selectedFiles.length>0?this.selectedFiles[0]:null}};RO=mS([ch(St),tm(),bS("design:paramtypes",[Yv])],RO);var PO=n(288),LO={};LO.styleTagTransform=RS(),LO.setAttributes=TS(),LO.insert=AS().bind(null,"head"),LO.domAPI=SS(),LO.insertStyleElement=IS(),xS()(PO.Z,LO),PO.Z&&PO.Z.locals&&PO.Z.locals;const MO="checkbox",jO="<div class=\"container ${value ? 'checked' : 'unchecked'} ${readonly ? 'readonly' : ''} ${colorMode} ${size} ${mode}\" pointerup.delegate=\"toggle()\">\r\n</div>",UO=jO,NO=[];let BO;function FO(t){BO||(BO=Sh.define({name:MO,template:jO,dependencies:NO})),t.register(BO)}class VO{constructor(){this.colorMode="color"}}mS([Al,bS("design:type",String)],VO.prototype,"colorMode",void 0);let DO=class extends VO{constructor(){super(...arguments),this.value=!1,this.size="m",this.mode="regular",this.readonly=!1,this.toggle=()=>{this.readonly||(this.value=!this.value)}}};mS([Al,bS("design:type",Boolean)],DO.prototype,"value",void 0),mS([Al,bS("design:type",String)],DO.prototype,"size",void 0),mS([Al,bS("design:type",String)],DO.prototype,"mode",void 0),mS([Al,bS("design:type",Boolean)],DO.prototype,"readonly",void 0),DO=mS([ch(Ct)],DO);var zO=n(2001),qO={};qO.styleTagTransform=RS(),qO.setAttributes=TS(),qO.insert=AS().bind(null,"head"),qO.domAPI=SS(),qO.insertStyleElement=IS(),xS()(zO.Z,qO),zO.Z&&zO.Z.locals&&zO.Z.locals;const HO="list",ZO='<title text.bind="title"></title>\r\n<div class="container">\r\n    <div repeat.for="item of items">\r\n        <text-field class="list-entry" value.two-way="item.name" title="${item.name}"></text-field>\r\n    </div>\r\n    <input type="text" class="add-item-input" placeholder="Add item" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',WO=ZO,KO=[];let _O;function QO(t){_O||(_O=Sh.define({name:HO,template:ZO,dependencies:KO})),t.register(_O)}let GO=class{constructor(){this.items=[],this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.items.push({name:this.newItemText}),this.items.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};mS([Al,bS("design:type",String)],GO.prototype,"title",void 0),mS([Al,bS("design:type",Array)],GO.prototype,"items",void 0),GO=mS([ch(At)],GO);var XO=n(8908),YO={};YO.styleTagTransform=RS(),YO.setAttributes=TS(),YO.insert=AS().bind(null,"head"),YO.domAPI=SS(),YO.insertStyleElement=IS(),xS()(XO.Z,YO),XO.Z&&XO.Z.locals&&XO.Z.locals;const JO="primary-stat",tR='<div class="container ${active === true ? \'active\' : \'\'} ${readonly ? \'readonly\' : \'\'} ${mode} ${colorMode} ${size}"\r\n     pointerdown.delegate="press()"\r\n     ref="containerElement">\r\n    <span class="content numbers">${getValuePrefix()+value}</div>\r\n</div>\r\n<div class="overlay" if.bind="active"  pointerup.delegate="release()" pointermove.delegate="move($event)"></div>',eR=tR,nR=[];let iR;function sR(t){iR||(iR=Sh.define({name:JO,template:tR,dependencies:nR})),t.register(iR)}let rR=class extends VO{constructor(t){super(),this.ea=t,this.max=99,this.min=-99,this.mode="primary-angled",this.size="m",this.prefixPlus=!1,this.readonly=!1,this.active=!1,this.delta=0,this.press=()=>{this.readonly||(this.active=!0,this.originalValue=this.value,this.delta=0,window.addEventListener("pointerout",this.checkPointerOutsideWindow))},this.checkPointerOutsideWindow=t=>{(t.clientY<=0||t.clientX<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(window.removeEventListener("pointerout",this.checkPointerOutsideWindow),this.release())},this.release=()=>{this.readonly||(this.active=!1)},this.move=t=>{if(!this.active||this.readonly)return;this.delta+=t.movementY;let e=Math.round(this.originalValue-this.delta/10);this.value=Math.max(this.min,Math.min(this.max,e)),this.ea.publish("ui-interaction")},this.getValuePrefix=()=>this.prefixPlus&&this.value>0?"+":""}};mS([Al,bS("design:type",Number)],rR.prototype,"value",void 0),mS([Al,bS("design:type",Number)],rR.prototype,"max",void 0),mS([Al,bS("design:type",Number)],rR.prototype,"min",void 0),mS([Al,bS("design:type",String)],rR.prototype,"mode",void 0),mS([Al,bS("design:type",String)],rR.prototype,"size",void 0),mS([Al,bS("design:type",Boolean)],rR.prototype,"prefixPlus",void 0),mS([Al,bS("design:type",Boolean)],rR.prototype,"readonly",void 0),rR=mS([ch(Et),yS(0,oi),bS("design:paramtypes",[Object])],rR);var oR=n(9909),aR={};aR.styleTagTransform=RS(),aR.setAttributes=TS(),aR.insert=AS().bind(null,"head"),aR.domAPI=SS(),aR.insertStyleElement=IS(),xS()(oR.Z,aR),oR.Z&&oR.Z.locals&&oR.Z.locals;const lR="radio-button",cR='<div class="container ${state} ${colorMode}"\r\n     pointerup.delegate="select()"\r\n     ref="element">\r\n</div>',hR=cR,uR=[];let dR;function pR(t){dR||(dR=Sh.define({name:lR,template:cR,dependencies:uR})),t.register(dR)}let fR=class extends VO{constructor(t){super(),this.ea=t,this.state="unselected",this.select=()=>{this.group?this.ea.publish("radio-button-selected",{group:this.group,source:this.element,value:this.value}):this.state="selected"}}bound(){this.ea.subscribe("radio-button-selected",(t=>{this.group==t.group&&(this.state=t.source===this.element?"selected":"unselected")}))}};mS([Al,bS("design:type",String)],fR.prototype,"state",void 0),mS([Al,bS("design:type",String)],fR.prototype,"group",void 0),mS([Al,bS("design:type",String)],fR.prototype,"value",void 0),fR=mS([ch(Tt),yS(0,oi),bS("design:paramtypes",[Object])],fR);var gR=n(835),vR={};vR.styleTagTransform=RS(),vR.setAttributes=TS(),vR.insert=AS().bind(null,"head"),vR.domAPI=SS(),vR.insertStyleElement=IS(),xS()(gR.Z,vR),gR.Z&&gR.Z.locals&&gR.Z.locals;const mR="text-box",yR='<title text.bind="title"></title>\r\n<div class="container">\r\n    <textarea value.bind="text" cols="32" rows="8" keydown.delegate="onChange()" autocomplete="chrome-off"></textarea>\r\n</div>\r\n<footer></footer>',bR=yR,wR=[];let xR;function kR(t){xR||(xR=Sh.define({name:mR,template:yR,dependencies:wR})),t.register(xR)}let SR=class{constructor(t){this.ea=t,this.onChange=()=>{this.ea.publish("ui-interaction")}}};mS([Al,bS("design:type",String)],SR.prototype,"title",void 0),mS([Al,bS("design:type",String)],SR.prototype,"text",void 0),SR=mS([ch($t),yS(0,oi),bS("design:paramtypes",[Object])],SR);var CR=n(6140),AR={};AR.styleTagTransform=RS(),AR.setAttributes=TS(),AR.insert=AS().bind(null,"head"),AR.domAPI=SS(),AR.insertStyleElement=IS(),xS()(CR.Z,AR),CR.Z&&CR.Z.locals&&CR.Z.locals;const ER="footer",TR='<div class="grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',$R=TR,IR=[];let OR;function RR(t){OR||(OR=Sh.define({name:ER,template:TR,dependencies:IR})),t.register(OR)}let PR=class{};PR=mS([ch(It)],PR);var LR=n(1939),MR={};MR.styleTagTransform=RS(),MR.setAttributes=TS(),MR.insert=AS().bind(null,"head"),MR.domAPI=SS(),MR.insertStyleElement=IS(),xS()(LR.Z,MR),LR.Z&&LR.Z.locals&&LR.Z.locals;const jR="title",UR='<div class="title grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n    <span class="text">${text}</span>\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',NR=UR,BR=[];let FR;function VR(t){FR||(FR=Sh.define({name:jR,template:UR,dependencies:BR})),t.register(FR)}let DR=class{};mS([Al,bS("design:type",String)],DR.prototype,"text",void 0),DR=mS([ch(Ot)],DR);var zR=n(1525),qR={};qR.styleTagTransform=RS(),qR.setAttributes=TS(),qR.insert=AS().bind(null,"head"),qR.domAPI=SS(),qR.insertStyleElement=IS(),xS()(zR.Z,qR),zR.Z&&zR.Z.locals&&zR.Z.locals;const HR="rune-edge",ZR='<div class="container">\r\n</div>',WR=ZR,KR=[];let _R;function QR(t){_R||(_R=Sh.define({name:HR,template:ZR,dependencies:KR})),t.register(_R)}let GR=class{};GR=mS([ch(Rt)],GR);var XR=n(6392),YR={};YR.styleTagTransform=RS(),YR.setAttributes=TS(),YR.insert=AS().bind(null,"head"),YR.domAPI=SS(),YR.insertStyleElement=IS(),xS()(XR.Z,YR),XR.Z&&XR.Z.locals&&XR.Z.locals;const JR="name-block",tP='<text-field placeholder="Name" value.two-way="model.name"></text-field>',eP=tP,nP=[];let iP;function sP(t){iP||(iP=Sh.define({name:JR,template:tP,dependencies:nP})),t.register(iP)}let rP=class extends MC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),YS,e)}};rP=mS([ch(Pt),hh,yS(1,oi),bS("design:paramtypes",[Yv,Object])],rP);const oP="page-header",aP='\r\n\r\n<div class="grid">\r\n    <div class="left-page-links">\r\n        <a class="page-link active" href="/description">Description</a>\r\n        <a class="page-link" href="/stats">Stats</a>\r\n        <a class="page-link" href="/magic" if.bind="state.present.character.type == \'magus\'">Magic</a>\r\n        <a class="page-link" href="/progression">Progression</a>\r\n    </div>\r\n    <div></div>\r\n    <div class="right-page-links">\r\n        <a class="page-link" href="/lab" if.bind="state.present.character.type == \'magus\'">Lab</a>\r\n        <a class="page-link" href="/belongings">Belongings</a>\r\n        <a class="page-link" href="/enchantments" if.bind="state.present.character.type == \'magus\'">Enchantments</a>\r\n        <a class="page-link" href="/notes">Notes</a>\r\n    </div>\r\n\r\n    <rune-edge></rune-edge>\r\n    <div class="name-box">\r\n        <name-block></name-block>\r\n    </div>\r\n    <rune-edge></rune-edge>\r\n</div>',lP=aP,cP=[Lt];let hP;function uP(t){hP||(hP=Sh.define({name:oP,template:aP,dependencies:cP})),t.register(hP)}let dP=class{};dP=mS([ch(Mt),tm()],dP);var pP=n(4280),fP={};fP.styleTagTransform=RS(),fP.setAttributes=TS(),fP.insert=AS().bind(null,"head"),fP.domAPI=SS(),fP.insertStyleElement=IS(),xS()(pP.Z,fP),pP.Z&&pP.Z.locals&&pP.Z.locals;const gP="text-field",vP='<input type="text" class.bind="class" value.bind="value" placeholder.bind="placeholder" title.bind="title" keydown.delegate="onChange()">\r\n',mP=vP,yP=[];let bP;function wP(t){bP||(bP=Sh.define({name:gP,template:vP,dependencies:yP})),t.register(bP)}let xP=class{constructor(t){this.ea=t,this.placeholder="",this.title="",this.class="",this.onChange=()=>{this.ea.publish("ui-interaction")}}};mS([Al,bS("design:type",String)],xP.prototype,"value",void 0),mS([Al,bS("design:type",String)],xP.prototype,"placeholder",void 0),mS([Al,bS("design:type",String)],xP.prototype,"title",void 0),mS([Al,bS("design:type",String)],xP.prototype,"class",void 0),xP=mS([ch(jt),hh,yS(0,oi),bS("design:paramtypes",[Object])],xP);var kP=n(2661),SP={};SP.styleTagTransform=RS(),SP.setAttributes=TS(),SP.insert=AS().bind(null,"head"),SP.domAPI=SS(),SP.insertStyleElement=IS(),xS()(kP.Z,SP),kP.Z&&kP.Z.locals&&kP.Z.locals;const CP="add-item-input",AP='<input class="add-item-input-field" type="text" placeholder.bind="placeholder" keyup.delegate="keyPressed($event)" value.two-way="newItemString">',EP=AP,TP=[];let $P;function IP(t){$P||($P=Sh.define({name:CP,template:AP,dependencies:TP})),t.register($P)}let OP=class{constructor(){this.newItemString="",this.keyPressed=t=>{this.onItemAdded&&"Enter"==t.key&&this.newItemString&&(this.parent?this.onItemAdded(this.newItemString,this.parent):this.onItemAdded(this.newItemString),this.newItemString="")}}};mS([Al,bS("design:type",String)],OP.prototype,"placeholder",void 0),mS([Al,bS("design:type",Function)],OP.prototype,"onItemAdded",void 0),mS([Al,bS("design:type",Object)],OP.prototype,"parent",void 0),OP=mS([ch(Ut),hh],OP),cv.register(em.withInitialState(zS).withOptions({history:{undoable:!0,limit:20}})).register(vS.customize({})).register(DO,GO,rR,fR,SR,xP,OP).register(PR,DR,GR,dP).app(RO).start(),window.addEventListener("dragover",(function(t){t.preventDefault()}),!1),window.addEventListener("drop",(function(t){t.preventDefault()}),!1),!(window.location.href.indexOf("localhost")>=0)&&"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sheet-maker/service-worker.js").then((t=>{console.log("SW registered: ",t)})).catch((t=>{console.log("SW registration failed: ",t)}))}))})()})();