/*! For license information please see entry.57bac03d34bebe5cd0b5.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={2661:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".add-item-input-field {\r\n    margin-top: 15px;\r\n    width: 250px;\r\n    border-bottom-style: dashed !important;\r\n    display: block;\r\n}",""]);const a=o},288:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8390),n.b),h=new URL(n(3208),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"checkbox {\r\n    display: inline-block;\r\n}\r\n\r\ncheckbox > .container:not(.readonly) {\r\n    cursor: pointer;\r\n}\r\n\r\ncheckbox .container {\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\ncheckbox .container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncheckbox .container.s {\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n\r\ncheckbox .container.xs {\r\n    width: 13px;\r\n    height: 13px;\r\n}\r\n\r\ncheckbox .container.checked {\r\n    background-image: url("+d+");\r\n}\r\n\r\ncheckbox .container.unchecked {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},1187:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7786),n.b),h=o()(s()),u=l()(c);h.push([t.id,"cross-button {\r\n    display: inline-block;\r\n}\r\n\r\ncross-button .button-container {\r\n    width: 30px;\r\n    height: 30px;\r\n    background-size: contain;\r\n    background-image: url("+u+");\r\n}\r\n\r\ncross-button .button-container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncross-button .button-container:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}\r\n\r\ncross-button .button-container.angled:hover {\r\n    cursor: pointer;\r\n    transform: rotate(45deg) scale(1.1);\r\n}",""]);const d=h},3055:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(1526),n.b),h=new URL(n(6035),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"dialog-box {\r\n    display: block;\r\n}\r\n\r\ndialog-box .dialog-container {\r\n    padding: 20px;\r\n    filter: drop-shadow(8px 8px 10px rgba(0, 0, 0, 0.371));\r\n}\r\n\r\ndialog-box  .inner-container {\r\n    margin: 10px 20px;\r\n}\r\n\r\ndialog-box .dialog-container.m {\r\n    width: 960px;\r\n    height: 710px;\r\n    background-image: url("+d+");\r\n}\r\n\r\ndialog-box .dialog-container.s {\r\n    width: 460px;\r\n    height: 335px;\r\n    background-image: url("+p+");\r\n}\r\n\r\n/* Fixes rendering error for the built in dialog UI, which does not work with scrolling */\r\nau-dialog-overlay {\r\n    position: fixed !important;\r\n}\r\nau-dialog-container {\r\n    position: fixed !important;\r\n}",""]);const f=u},2001:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nlist > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nlist .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nlist .list-entry {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},8908:(t,e,n)=>{n.d(e,{Z:()=>b});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8801),n.b),h=new URL(n(9462),n.b),u=new URL(n(3473),n.b),d=new URL(n(2867),n.b),p=o()(s()),f=l()(c),g=l()(h),v=l()(u),m=l()(d);p.push([t.id,"primary-stat {\r\n    display: inline-block;\r\n}\r\n\r\nprimary-stat .container.fade {\r\n    opacity: 0.4;\r\n}\r\n\r\nprimary-stat .container {\r\n    width: 60px;\r\n    height: 60px;\r\n    background-size: contain;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nprimary-stat .header {\r\n    display: inline-block;\r\n    text-align: center;\r\n    width: 60px;\r\n    font-size: 13px;\r\n    color: #446;\r\n}\r\n\r\nprimary-stat > .container:not(.readonly) {\r\n    cursor: -webkit-grab;\r\n    cursor: grab;\r\n}\r\n\r\nprimary-stat .container.l {\r\n    width: 90px;\r\n    height: 90px;\r\n    font-size: 30px;\r\n}\r\n\r\nprimary-stat .header.l {\r\n    width: 90px;\r\n    font-size: 15px;\r\n}\r\n\r\nprimary-stat .container.s {\r\n    width: 45px;\r\n    height: 45px;\r\n    font-size: 13px;\r\n}\r\n\r\nprimary-stat .header.s {\r\n    width: 45px;\r\n    font-size: 10px;\r\n}\r\n\r\nprimary-stat .container.xs {\r\n    width: 36px;\r\n    height: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nprimary-stat .header.xs {\r\n    width: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nprimary-stat .container.primary {\r\n    background-image: url("+f+");\r\n}\r\n\r\nprimary-stat .container.primary-angled {\r\n    background-image: url("+g+");\r\n}\r\n\r\nprimary-stat .container.secondary {\r\n    background-image: url("+v+");\r\n    width: 44px;\r\n    height: 44px;\r\n}\r\nprimary-stat .container.secondary.s {\r\n    width: 33px;\r\n    height: 33px;\r\n}\r\nprimary-stat .container.secondary.xs {\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nprimary-stat .header.secondary {\r\n    width: 44px;\r\n}\r\nprimary-stat .header.secondary.s {\r\n    width: 33px;\r\n}\r\nprimary-stat .header.secondary.xs {\r\n    width: 24px;\r\n}\r\n\r\nprimary-stat .container.secondary-angled {\r\n    background-image: url("+m+");\r\n}\r\n\r\nprimary-stat .container.active {\r\n    cursor: -webkit-grabbing;\r\n    cursor: grabbing;\r\n}\r\n\r\nprimary-stat .container .content {\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\nprimary-stat .overlay {\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 1;\r\n}",""]);const b=p},9909:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(164),n.b),h=new URL(n(2),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"radio-button {\r\n    display: inline-block;\r\n    cursor: pointer;\r\n}\r\n\r\nradio-button .container {\r\n    background-size: contain;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nradio-button .container.selected {\r\n    background-image: url("+d+");\r\n}\r\n\r\nradio-button .container.unselected {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},1247:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7552),n.b),h=o()(s()),u=l()(c);h.push([t.id,"stat-info-button {\r\n    display: inline-block;\r\n    width: 25px;\r\n    height: 25px;\r\n}\r\n\r\nstat-info-button:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}\r\n\r\nstat-info-button .button {\r\n    opacity: 0.5;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-image: url("+u+");\r\n    background-size: contain;\r\n}\r\n\r\nstat-info-button .button.active {\r\n    opacity: 1;\r\n}",""]);const d=h},835:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box {\r\n    display: block;\r\n    width: 300px;\r\n}\r\n\r\ntext-box > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\ntext-box textarea {\r\n    font-family: 'Estonia', cursive;\r\n    font-size: 30px;\r\n    background-color: transparent;\r\n    font-weight: bold;\r\n\r\n    width: 100%;\r\n    border: none;\r\n    overflow: auto;\r\n    outline: none;\r\n    box-shadow: none;\r\n\r\n    resize: none;\r\n}",""]);const a=o},2495:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box.text-dialog-input textarea {\r\n    height: 230px;\r\n    width: 405px;\r\n    padding: 7px;\r\n}\r\n\r\ntext-box.text-dialog-input .container {\r\n    margin: 0;\r\n}\r\n\r\n.dialog-container.m text-box.text-dialog-input textarea {\r\n    height: 600px;\r\n    width: 905px;\r\n}",""]);const a=o},4280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-field .input {\r\n    text-overflow: ellipsis;\r\n    display: inline-block;\r\n}",""]);const a=o},6140:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"footer {\r\n    display: block;\r\n}\r\n\r\nfooter .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1) scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block; \r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n}",""]);const f=u},6392:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8626),n.b),h=o()(s()),u=l()(c);h.push([t.id,"page-header {\r\n    display: block;\r\n    width: 100%;\r\n    margin-top: 20px;\r\n}\r\n\r\npage-header > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto 1fr;\r\n    grid-template-rows:  0 1fr;\r\n}\r\n\r\npage-header .name-box {\r\n    height: 150px;\r\n    width: 400px;\r\n    background-position: 50%;\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    background-image: url("+u+");\r\n    text-align: center;\r\n}\r\n\r\npage-header .name-box input {\r\n    margin-top: 30px;\r\n    text-align: center;\r\n    font-size: 70px;\r\n    width: 300px;\r\n    border: none;\r\n}\r\n\r\npage-header .left-page-links {\r\n    align-self: center;\r\n    justify-self: right;\r\n    margin: 20px;\r\n    margin-top: 45px;\r\n}\r\n\r\npage-header .right-page-links {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 20px;\r\n    margin-top: 45px;\r\n}\r\n\r\npage-header .page-link {\r\n    margin: 10px;\r\n    color: #446;;\r\n}\r\n\r\npage-header .page-link {\r\n    text-decoration: none;\r\n}\r\n\r\n\r\n\r\npage-header .page-link:hover:not(.active) {\r\n    color: black;\r\n}\r\n\r\npage-header .page-link.active{\r\n    cursor: default;\r\n    color: darkred;\r\n}",""]);const d=h},1525:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7283),n.b),h=o()(s()),u=l()(c);h.push([t.id,"rune-edge {\r\n    display: block;\r\n    width: 100%;\r\n    height: 20px;\r\n    background-size: contain;\r\n    background-repeat: repeat-x;\r\n    background-image: url("+u+");\r\n    margin: 45px 0;\r\n}",""]);const d=h},1939:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"title {\r\n    display: block;\r\n    height: auto;\r\n}\r\n\r\ntitle .text {\r\n    font-size: 18px;\r\n    color: darkred;\r\n    padding: 0 4px;\r\n    display: inline-block;\r\n}\r\n\r\ntitle .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1);\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto auto auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n    \r\n}",""]);const f=u},1138:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(4378),n.b),h=o()(s()),u=l()(c);h.push([t.id,".message {\n  background-color: red;\n}\n\nbody {\n  font-family: 'Eagle Lake', cursive;\n  font-size: 20px;\n  color: darkred;\n  background-image:  url("+u+");\n  background-color: #FBF5EB;\n  margin: 0;\n}\n\n.numbers {\n  font-family: 'MedievalSharp', cursive;\n}\n\n/*\nfont-family: 'Amatic SC', cursive;\nfont-family: 'Eagle Lake', cursive;\nfont-family: 'Estonia', cursive;\nfont-family: 'Fleur De Leah', cursive;\nfont-family: 'IM Fell DW Pica SC', serif;\nfont-family: 'IM Fell English SC', serif;\nfont-family: 'MedievalSharp', cursive;\n*/\n\n.monochrome {\n  filter: grayscale(100%);\n}\n\n.text {\n    font-size: 16px;\n    color: #446;\n}\n\ninput[type=\"text\"] {\n  border: none;\n  border-bottom: 2px solid #cbc1ad;\n  background: none;\n  padding: 0px 6px;\n  font-family: 'Estonia', cursive;\n  font-size: 30px;\n  font-weight: bold;\n  text-indent: 5px;\n}\n\ninput[type=\"text\"]:focus {\n  outline: none;\n}\n\ninput[type=\"text\"].specialisation {\n  text-align: center;\n  width: 150px;\n  color: #888;\n}\n\n::-moz-placeholder {\n  color: #bbb;\n  opacity: 1; /* Firefox */\n}\n\n::placeholder {\n  color: #bbb;\n  opacity: 1; /* Firefox */\n}\n\nmy-app > .page-view {\n  min-height: 1100px;\n}\n\n@-webkit-keyframes fadeIn {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@keyframes fadeIn {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@-webkit-keyframes fadeOut {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@keyframes fadeOut {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n.disable-scrolling {\n  overflow: hidden;\n}",""]);const d=h},927:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"abilities-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nabilities-block > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nabilities-block .ability > * {\r\n    display: inline-block;\r\n}\r\n\r\nabilities-block .ability .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .name {\r\n    opacity: 0.4;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability .specialisation {\r\n    width: 150px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .specialisation {\r\n    opacity: 0;\r\n}\r\n\r\nabilities-block .add-item-input {\r\n    margin-top: 15px;\r\n    width: 200px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nabilities-block .puissant-label {\r\n    width: 0;\r\n}",""]);const a=o},7804:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"active-magic-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nactive-magic-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nactive-magic-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nactive-magic-list > .container > .grid > * {\r\n    align-self: end;\r\n    margin: 1px 2px;\r\n}\r\nactive-magic-list > .container > .grid > checkbox {\r\n    margin-bottom: 10px;\r\n}\r\nactive-magic-list > .container > .grid > stat-info-button {\r\n    margin-bottom: 6px;\r\n    margin-left: 6px;\r\n}\r\n\r\nactive-magic-list .add-magic-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}",""]);const a=o},2012:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"age-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nage-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-template-rows: auto auto auto 60px;\r\n}\r\n\r\nage-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 4px;\r\n}\r\n\r\nage-block > .grid > .left {\r\n    justify-self: left;\r\n}\r\n\r\nage-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nage-block > .grid > .bottom {\r\n    align-self: end;\r\n}\r\n\r\nage-block > .grid > .top {\r\n    align-self: baseline;\r\n}\r\n\r\nage-block .small-text {\r\n    font-size: 14px;\r\n}",""]);const a=o},5185:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"arts-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\narts-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto 40px auto auto auto auto  10px auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\narts-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\narts-block .untrained {\r\n    opacity: 0.4;\r\n}",""]);const a=o},3260:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"background-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nbackground-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nbackground-block text-box textarea {\r\n    height: 1200px;\r\n}",""]);const a=o},8985:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"carried-belongings-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\ncarried-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\ncarried-belongings-block text-box textarea {\r\n    height: 800px;\r\n}",""]);const a=o},6767:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"character-type-selector {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    height: -webkit-fit-content;\r\n    height: -moz-fit-content;\r\n    height: fit-content;\r\n    color: #446;\r\n    margin: 20px;\r\n}\r\n\r\ncharacter-type-selector .container > * {\r\n    vertical-align: middle;\r\n}",""]);const a=o},3292:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"characteristics-block {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    color: #446;\r\n    margin: 30px;\r\n    float: left;\r\n}\r\n\r\ncharacteristics-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ncharacteristics-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr;\r\n}\r\n\r\ncharacteristics-block .grid > * {\r\n    align-self: center;\r\n}\r\n\r\ncharacteristics-block .grid .text.left-col {\r\n    justify-self: right;\r\n}\r\n\r\ncharacteristics-block .grid .text{\r\n    justify-self: left;\r\n    margin-left: 3px;\r\n    margin-right: 3px;\r\n}\r\n\r\n\r\ncharacteristics-block .grid primary-stat {\r\n    margin: 1px;\r\n}\r\n\r\ncharacteristics-block footer {\r\n    margin-top: 5px;\r\n}\r\n\r\ncharacteristics-block .specialisation {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},4397:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"confidence-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},6903:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"damage-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\ndamage-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ndamage-block .wound-type {\r\n    display: inline-block;\r\n    margin: 0 10px;\r\n}\r\n\r\ndamage-block .wound-type:nth-child(1) {\r\n    display: inline-block;\r\n    margin-left: 0;\r\n}\r\n",""]);const a=o},3845:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"description-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},1459:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"fatigue-block {\r\n    display: block;\r\n    margin: 30px;\r\n    min-width: 280px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nfatigue-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nfatigue-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\nfatigue-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nfatigue-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nfatigue-block radio-button {\r\n    margin-left: 5px;\r\n}",""]);const a=o},2820:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-description-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\nlab-description-block text-box {\r\n    width: 100%;\r\n}",""]);const a=o},6964:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,'lab-modifications-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    min-width: 845px;\r\n    float: left;\r\n}\r\n\r\nlab-modifications-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-modifications-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nlab-modifications-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-modifications-list .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .container > .title {\r\n    display: block;\r\n    margin-top: 30px;\r\n}\r\n\r\nlab-modifications-list .grid > .name {\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .grid > .category {\r\n    width: 100px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .grid > .description {\r\n    width: 400px;\r\n}\r\n\r\nlab-modifications-list .add-item-input.add-modifier-input {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: -15px;\r\n    width: 60px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .modifier-titles {\r\n    position: absolute;\r\n    right: 3px;\r\n    top: 10px;\r\n}\r\n\r\nlab-modifications-list .modifier-title {\r\n    font-size: 9px;\r\n    display: inline-block;\r\n    width: 27px;\r\n    text-align: center;\r\n    font-family: "Eagle Lake", cursive;\r\n    border-bottom: none;\r\n    padding: 0;\r\n    font-weight: unset;\r\n    text-overflow: ellipsis;\r\n    text-indent: 0;\r\n}\r\n\r\n\r\nlab-modifications-list .modifier-totals {\r\n    position: absolute;\r\n    right: 30px;\r\n    bottom: 20px;\r\n}\r\n\r\nlab-modifications-list .modifier-total {\r\n    font-size: 16px;\r\n    display: inline-block;\r\n    width: 33px;\r\n    margin: 2px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .block {\r\n    margin-top: 30px;\r\n    position: relative;\r\n}\r\n',""]);const a=o},8412:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-stats {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 1500px;\r\n    float: left;\r\n}\r\n\r\nlab-stats > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-stats > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr 1fr;\r\n}\r\n\r\nlab-stats > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-stats > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nlab-stats .modifier-selector {\r\n    text-align: center;\r\n    width: 100px;\r\n}",""]);const a=o},4769:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"magic-items-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 2128px;\r\n    float: left;\r\n}\r\n\r\nmagic-items-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nmagic-items-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content auto;\r\n    grid-template-columns: min-content min-content min-content min-content auto;\r\n    grid-auto-rows: auto auto;\r\n}\r\n\r\nmagic-items-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nmagic-items-block .magic-item > .effects {\r\n    grid-column-start: 1;\r\n    grid-column-end: 6;\r\n}\r\n\r\nmagic-items-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\nmagic-items-block .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nmagic-items-block .effect .usages, magic-items-block .effect .range, magic-items-block .effect .duration, magic-items-block .effect .target, magic-items-block .effect .arts {\r\n    width: 150px;\r\n}\r\n\r\nmagic-items-block .magic-item {\r\n    border-left: 3px solid darkred;\r\n    margin-bottom: 20px;\r\n    padding: 0 10px;\r\n}",""]);const a=o},3349:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"notes-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nnotes-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nnotes-block text-box textarea {\r\n    height: 1200px;\r\n}",""]);const a=o},280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"npc-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nnpc-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nnpc-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nnpc-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nnpc-list .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nnpc-list .description {\r\n    width: 500px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nnpc-list .add-item-input-field {\r\n    width: 200px;\r\n}",""]);const a=o},5555:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"personality-traits-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\npersonality-traits-list > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\npersonality-traits-list .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\npersonality-traits-list primary-stat {\r\n    margin-left: 10px;;\r\n}",""]);const a=o},5889:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"physical-penalty-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},7600:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"quest-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nquest-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nquest-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nquest-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nquest-list .name {\r\n    width: 650px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nquest-list .priority {\r\n    margin-left: 10px !important;\r\n}\r\n\r\nquest-list .add-item-input-field {\r\n    width: 600px;\r\n}",""]);const a=o},4467:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"research-projects {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 1480px;\r\n    float: left;\r\n}\r\n\r\nresearch-projects > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nresearch-projects .aura-bonus {\r\n    display: block;\r\n}\r\n\r\nresearch-projects .add-item-input {\r\n    margin-top: 15px;\r\n    width: 250px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nresearch-projects > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nresearch-projects > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nresearch-projects stat-info-button {\r\n    margin-left: 20px !important;\r\n}\r\nresearch-projects .arts, research-projects .prerequisites {\r\n    width: 50px;\r\n    text-align: center;\r\n}\r\nresearch-projects .level {\r\n    margin-right: 30px !important;\r\n}\r\n\r\nresearch-projects .material, research-projects .shape {\r\n    width: 150px;\r\n    text-align: center;\r\n}\r\n\r\nresearch-projects .total {\r\n    margin-left: 30px !important;\r\n}",""]);const a=o},5204:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"sanctum-belongings-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\nsanctum-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nsanctum-belongings-block text-box textarea {\r\n    height: 800px;\r\n}",""]);const a=o},7266:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(9462),n.b),h=new URL(n(3082),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"sigil {\r\n    display: block;\r\n    height: auto;\r\n    float: left;\r\n}\r\n\r\nsigil > .container {\r\n    width: 130px;\r\n    height: 130px;\r\n    background-size: contain;\r\n    background-image: url("+d+");\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nsigil > .container .sigil-image-placeholder {\r\n    width: 70px;\r\n    height: 35px;\r\n    background-size: contain;\r\n    background-image: url("+p+");\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container .sigil-image {\r\n    width: 70px;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container.active-drag {\r\n    opacity: 0.6;\r\n}",""]);const f=u},7624:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nspell-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-list .add-item-input-field {\r\n    width: 300px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-list .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-list .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-list .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-list .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-list .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-list .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-list .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-list .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-list .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-list .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-list .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-list .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #bbb;\r\n}\r\n\r\nspell-list .co-form ~ .co-form .form-header::before,\r\nspell-list .an-form ~ .an-form .form-header::before,\r\nspell-list .au-form ~ .au-form .form-header::before,\r\nspell-list .aq-form ~ .aq-form .form-header::before,\r\nspell-list .he-form ~ .he-form .form-header::before,\r\nspell-list .vi-form ~ .vi-form .form-header::before,\r\nspell-list .te-form ~ .te-form .form-header::before,\r\nspell-list .ig-form ~ .ig-form .form-header::before,\r\nspell-list .me-form ~ .me-form .form-header::before,\r\nspell-list .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}",""]);const a=o},6073:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-wishlist {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-wishlist > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nspell-wishlist > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-wishlist > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-wishlist .add-item-input-field {\r\n    width: 300px;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-wishlist  > .container > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-wishlist .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-wishlist .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-wishlist .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-wishlist .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-wishlist .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-wishlist .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-wishlist .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-wishlist .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-wishlist .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-wishlist .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-wishlist .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-wishlist .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #bbb;\r\n}\r\n\r\nspell-wishlist .co-form ~ .co-form .form-header::before,\r\nspell-wishlist .an-form ~ .an-form .form-header::before,\r\nspell-wishlist .au-form ~ .au-form .form-header::before,\r\nspell-wishlist .aq-form ~ .aq-form .form-header::before,\r\nspell-wishlist .he-form ~ .he-form .form-header::before,\r\nspell-wishlist .vi-form ~ .vi-form .form-header::before,\r\nspell-wishlist .te-form ~ .te-form .form-header::before,\r\nspell-wishlist .ig-form ~ .ig-form .form-header::before,\r\nspell-wishlist .me-form ~ .me-form .form-header::before,\r\nspell-wishlist .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}",""]);const a=o},2244:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spellcasting-modifiers-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 1000px;\r\n    float: left;\r\n}\r\n\r\nspellcasting-modifiers-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid .arts {\r\n    width: 60px;\r\n    text-align: center;\r\n}",""]);const a=o},6019:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"talisman-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 2062px;\r\n    float: left;\r\n}\r\n\r\ntalisman-block .effects .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .container > .description {\r\n    width: 800px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .effects.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid > *, talisman-block > .container .effects.grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\ntalisman-block .bonuses, talisman-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\ntalisman-block .bonuses .name {\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .effect .notes {\r\n    width: 400px;\r\n}\r\n\r\ntalisman-block .effect .usages, talisman-block .effect .range, talisman-block .effect .duration, talisman-block .effect .target, talisman-block .effect .arts {\r\n    width: 150px;\r\n}",""]);const a=o},1860:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"vis-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nvis-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nvis-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nvis-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nvis-block .add-item-input {\r\n    margin-top: 15px;\r\n    width: 100px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nvis-block .name {\r\n    width: 100px;\r\n}\r\n\r\nvis-block .income, vis-block .notes {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},2410:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"warping-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n    width: 420px;\r\n}\r\n\r\nwarping-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nwarping-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nwarping-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nwarping-block .warping-level {\r\n    text-align: center;\r\n}\r\n\r\nwarping-block .add-effect-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}",""]);const a=o},8840:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"xp-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nxp-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nxp-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 70px 100px auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nxp-list > .container > .grid.past-xp-entry {\r\n    grid-template-columns: 70px 100px auto auto auto auto;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n}\r\n\r\nxp-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nxp-list .description, xp-list .plans {\r\n    width: 400px;\r\n}\r\n\r\nxp-list .xp {\r\n    width: 600px;\r\n}\r\n\r\nxp-list .correspondence, xp-list .area-lore  {\r\n    width: 150px;\r\n}\r\n\r\nxp-list .separator {\r\n    height: 40px;\r\n}\r\n\r\nxp-list .center-button-box {\r\n    text-align: center;\r\n}",""]);const a=o},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,s,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},1667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:t=>{t.exports=function(t){return t[1]}},3379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],h=r[c]||0,u="".concat(c," ").concat(h);r[c]=h+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=s(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var r=i(t=t||[],s=s||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=n(r[o]);e[a].references--}for(var l=i(t,s),c=0;c<r.length;c++){var h=n(r[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=l}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},8390:(t,e,n)=>{t.exports=n.p+"3747d62d05f8f09fb741.png"},3208:(t,e,n)=>{t.exports=n.p+"b037ca7f505f5c048bae.png"},164:(t,e,n)=>{t.exports=n.p+"5c3d1b2ce7bb3793be6e.png"},2:(t,e,n)=>{t.exports=n.p+"2b9f9a8912419b0f4b69.png"},2867:(t,e,n)=>{t.exports=n.p+"fe3a2cf273f4367e50c9.png"},3473:(t,e,n)=>{t.exports=n.p+"60e08010af0453fec957.png"},9462:(t,e,n)=>{t.exports=n.p+"c945e6443b532c587958.png"},8801:(t,e,n)=>{t.exports=n.p+"8a70e34efeda3124235b.png"},7786:(t,e,n)=>{t.exports=n.p+"ec23475cb092652acfea.png"},3082:(t,e,n)=>{t.exports=n.p+"dd674023209c7164b31e.png"},7283:(t,e,n)=>{t.exports=n.p+"33cbb501e4e522021025.png"},7552:(t,e,n)=>{t.exports=n.p+"6b7b936e3906da3a44fa.png"},1668:(t,e,n)=>{t.exports=n.p+"92bd8516e50642f8233a.png"},3356:(t,e,n)=>{t.exports=n.p+"5bd76dab3a9d835f39f2.png"},8626:(t,e,n)=>{t.exports=n.p+"ec6a054a75f35ddbe8db.png"},4378:(t,e,n)=>{t.exports=n.p+"4a319709cc0699c694dc.png"},6035:(t,e,n)=>{t.exports=n.p+"d7f92444f5cd52674ec6.png"},1526:(t,e,n)=>{t.exports=n.p+"eed15122701badbc265d.png"}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/sheet-maker/",n.b=document.baseURI||self.location.href,n.nc=void 0;var i={};(()=>{n.d(i,{n:()=>sM});var t={};n.r(t),n.d(t,{default:()=>XS,dependencies:()=>YS,name:()=>QS,register:()=>tC,template:()=>GS});var e={};n.r(e),n.d(e,{CharacterTypeSelector:()=>XC});var s={};n.r(s),n.d(s,{default:()=>nA,dependencies:()=>iA,name:()=>tA,register:()=>rA,template:()=>eA});var r={};n.r(r),n.d(r,{DescriptionBlock:()=>oA});var o={};n.r(o),n.d(o,{default:()=>cA,dependencies:()=>hA,name:()=>aA,register:()=>dA,template:()=>lA});var a={};n.r(a),n.d(a,{VirtuesList:()=>pA});var l={};n.r(l),n.d(l,{default:()=>vA,dependencies:()=>mA,name:()=>fA,register:()=>yA,template:()=>gA});var c={};n.r(c),n.d(c,{FlawsList:()=>wA});var h={};n.r(h),n.d(h,{default:()=>AA,dependencies:()=>EA,name:()=>SA,register:()=>$A,template:()=>CA});var u={};n.r(u),n.d(u,{PersonalityTraitsList:()=>IA});var d={};n.r(d),n.d(d,{default:()=>MA,dependencies:()=>jA,name:()=>RA,register:()=>NA,template:()=>LA});var p={};n.r(p),n.d(p,{WarpingBlock:()=>BA});var f={};n.r(f),n.d(f,{default:()=>DA,dependencies:()=>zA,name:()=>FA,register:()=>HA,template:()=>VA});var g={};n.r(g),n.d(g,{Description:()=>ZA});var v={};n.r(v),n.d(v,{default:()=>GA,dependencies:()=>XA,name:()=>_A,register:()=>JA,template:()=>QA});var m={};n.r(m),n.d(m,{AbilitiesBlock:()=>tE});var b={};n.r(b),n.d(b,{default:()=>rE,dependencies:()=>oE,name:()=>iE,register:()=>lE,template:()=>sE});var y={};n.r(y),n.d(y,{CharacteristicsBlock:()=>cE});var w={};n.r(w),n.d(w,{default:()=>fE,dependencies:()=>gE,name:()=>dE,register:()=>mE,template:()=>pE});var x={};n.r(x),n.d(x,{FatigueBlock:()=>bE});var k={};n.r(k),n.d(k,{default:()=>SE,dependencies:()=>CE,name:()=>xE,register:()=>EE,template:()=>kE});var S={};n.r(S),n.d(S,{DamageBlock:()=>TE});var C={};n.r(C),n.d(C,{default:()=>RE,dependencies:()=>LE,name:()=>OE,register:()=>jE,template:()=>PE});var A={};n.r(A),n.d(A,{ConfidenceBlock:()=>UE});var E={};n.r(E),n.d(E,{default:()=>DE,dependencies:()=>zE,name:()=>FE,register:()=>HE,template:()=>VE});var T={};n.r(T),n.d(T,{ActiveMagicList:()=>ZE});var $={};n.r($),n.d($,{default:()=>GE,dependencies:()=>XE,name:()=>_E,register:()=>JE,template:()=>QE});var I={};n.r(I),n.d(I,{PhysicalPenaltyBlock:()=>tT});var O={};n.r(O),n.d(O,{default:()=>iT,dependencies:()=>sT,name:()=>eT,register:()=>oT,template:()=>nT});var P={};n.r(P),n.d(P,{Stats:()=>aT});var R={};n.r(R),n.d(R,{default:()=>dT,dependencies:()=>pT,name:()=>hT,register:()=>gT,template:()=>uT});var L={};n.r(L),n.d(L,{ArtsBlock:()=>vT});var M={};n.r(M),n.d(M,{default:()=>xT,dependencies:()=>kT,name:()=>yT,register:()=>CT,template:()=>wT});var j={};n.r(j),n.d(j,{SpellcastingModifiersBlock:()=>AT});var U={};n.r(U),n.d(U,{default:()=>OT,dependencies:()=>PT,name:()=>$T,register:()=>LT,template:()=>IT});var N={};n.r(N),n.d(N,{SpellList:()=>MT});var B={};n.r(B),n.d(B,{default:()=>FT,dependencies:()=>VT,name:()=>NT,register:()=>zT,template:()=>BT});var F={};n.r(F),n.d(F,{SpellWishlist:()=>qT});var V={};n.r(V),n.d(V,{default:()=>_T,dependencies:()=>QT,name:()=>WT,register:()=>XT,template:()=>KT});var D={};n.r(D),n.d(D,{Sigil:()=>YT});var z={};n.r(z),n.d(z,{default:()=>e$,dependencies:()=>n$,name:()=>JT,register:()=>s$,template:()=>t$});var q={};n.r(q),n.d(q,{Magic:()=>r$});var H={};n.r(H),n.d(H,{default:()=>h$,dependencies:()=>u$,name:()=>l$,register:()=>p$,template:()=>c$});var Z={};n.r(Z),n.d(Z,{LabStats:()=>f$});var W={};n.r(W),n.d(W,{default:()=>y$,dependencies:()=>w$,name:()=>m$,register:()=>k$,template:()=>b$});var K={};n.r(K),n.d(K,{ResearchProjects:()=>S$});var _={};n.r(_),n.d(_,{default:()=>$$,dependencies:()=>I$,name:()=>E$,register:()=>P$,template:()=>T$});var Q={};n.r(Q),n.d(Q,{LabModificationsList:()=>R$});var G={};n.r(G),n.d(G,{default:()=>N$,dependencies:()=>B$,name:()=>j$,register:()=>V$,template:()=>U$});var X={};n.r(X),n.d(X,{LabDescriptionBlock:()=>D$});var Y={};n.r(Y),n.d(Y,{default:()=>H$,dependencies:()=>Z$,name:()=>z$,register:()=>K$,template:()=>q$});var J={};n.r(J),n.d(J,{Lab:()=>_$});var tt={};n.r(tt),n.d(tt,{default:()=>J$,dependencies:()=>tI,name:()=>X$,register:()=>nI,template:()=>Y$});var et={};n.r(et),n.d(et,{CarriedBelongingsBlock:()=>iI});var nt={};n.r(nt),n.d(nt,{default:()=>lI,dependencies:()=>cI,name:()=>oI,register:()=>uI,template:()=>aI});var it={};n.r(it),n.d(it,{SanctumBelongingsBlock:()=>dI});var st={};n.r(st),n.d(st,{default:()=>mI,dependencies:()=>bI,name:()=>gI,register:()=>wI,template:()=>vI});var rt={};n.r(rt),n.d(rt,{VisBlock:()=>xI});var ot={};n.r(ot),n.d(ot,{default:()=>CI,dependencies:()=>AI,name:()=>kI,register:()=>TI,template:()=>SI});var at={};n.r(at),n.d(at,{Belongings:()=>$I});var lt={};n.r(lt),n.d(lt,{default:()=>LI,dependencies:()=>MI,name:()=>PI,register:()=>UI,template:()=>RI});var ct={};n.r(ct),n.d(ct,{NotesBlock:()=>NI});var ht={};n.r(ht),n.d(ht,{default:()=>zI,dependencies:()=>qI,name:()=>VI,register:()=>ZI,template:()=>DI});var ut={};n.r(ut),n.d(ut,{BackgroundBlock:()=>WI});var dt={};n.r(dt),n.d(dt,{default:()=>XI,dependencies:()=>YI,name:()=>QI,register:()=>tO,template:()=>GI});var pt={};n.r(pt),n.d(pt,{QuestList:()=>eO});var ft={};n.r(ft),n.d(ft,{default:()=>oO,dependencies:()=>aO,name:()=>sO,register:()=>cO,template:()=>rO});var gt={};n.r(gt),n.d(gt,{NpcList:()=>hO});var vt={};n.r(vt),n.d(vt,{default:()=>pO,dependencies:()=>fO,name:()=>uO,register:()=>vO,template:()=>dO});var mt={};n.r(mt),n.d(mt,{Notes:()=>mO});var bt={};n.r(bt),n.d(bt,{default:()=>kO,dependencies:()=>SO,name:()=>wO,register:()=>AO,template:()=>xO});var yt={};n.r(yt),n.d(yt,{XpList:()=>EO});var wt={};n.r(wt),n.d(wt,{default:()=>PO,dependencies:()=>RO,name:()=>IO,register:()=>MO,template:()=>OO});var xt={};n.r(xt),n.d(xt,{AgeBlock:()=>jO});var kt={};n.r(kt),n.d(kt,{default:()=>BO,dependencies:()=>FO,name:()=>UO,register:()=>DO,template:()=>NO});var St={};n.r(St),n.d(St,{Progression:()=>zO});var Ct={};n.r(Ct),n.d(Ct,{default:()=>KO,dependencies:()=>_O,name:()=>ZO,register:()=>GO,template:()=>WO});var At={};n.r(At),n.d(At,{TalismanBlock:()=>XO});var Et={};n.r(Et),n.d(Et,{default:()=>nP,dependencies:()=>iP,name:()=>tP,register:()=>rP,template:()=>eP});var Tt={};n.r(Tt),n.d(Tt,{MagicItemsBlock:()=>oP});var $t={};n.r($t),n.d($t,{default:()=>cP,dependencies:()=>hP,name:()=>aP,register:()=>dP,template:()=>lP});var It={};n.r(It),n.d(It,{Enchantments:()=>pP});var Ot={};n.r(Ot),n.d(Ot,{default:()=>vP,dependencies:()=>mP,name:()=>fP,register:()=>yP,template:()=>gP});var Pt={};n.r(Pt),n.d(Pt,{default:()=>AP,dependencies:()=>EP,name:()=>SP,register:()=>$P,template:()=>CP});var Rt={};n.r(Rt),n.d(Rt,{default:()=>jP,dependencies:()=>UP,name:()=>LP,register:()=>BP,template:()=>MP});var Lt={};n.r(Lt),n.d(Lt,{default:()=>HP,dependencies:()=>ZP,name:()=>zP,register:()=>KP,template:()=>qP});var Mt={};n.r(Mt),n.d(Mt,{default:()=>JP,dependencies:()=>tR,name:()=>XP,register:()=>nR,template:()=>YP});var jt={};n.r(jt),n.d(jt,{default:()=>lR,dependencies:()=>cR,name:()=>oR,register:()=>uR,template:()=>aR});var Ut={};n.r(Ut),n.d(Ut,{default:()=>mR,dependencies:()=>bR,name:()=>gR,register:()=>wR,template:()=>vR});var Nt={};n.r(Nt),n.d(Nt,{default:()=>ER,dependencies:()=>TR,name:()=>CR,register:()=>IR,template:()=>AR});var Bt={};n.r(Bt),n.d(Bt,{default:()=>jR,dependencies:()=>UR,name:()=>LR,register:()=>BR,template:()=>MR});var Ft={};n.r(Ft),n.d(Ft,{default:()=>HR,dependencies:()=>ZR,name:()=>zR,register:()=>KR,template:()=>qR});var Vt={};n.r(Vt),n.d(Vt,{NameBlock:()=>_R});var Dt={};n.r(Dt),n.d(Dt,{default:()=>XR,dependencies:()=>YR,name:()=>QR,register:()=>tL,template:()=>GR});var zt={};n.r(zt),n.d(zt,{default:()=>oL,dependencies:()=>aL,name:()=>sL,register:()=>cL,template:()=>rL});var qt={};n.r(qt),n.d(qt,{default:()=>gL,dependencies:()=>vL,name:()=>pL,register:()=>bL,template:()=>fL});var Ht={};n.r(Ht),n.d(Ht,{default:()=>CL,dependencies:()=>AL,name:()=>kL,register:()=>TL,template:()=>SL});var Zt={};n.r(Zt),n.d(Zt,{default:()=>LL,dependencies:()=>ML,name:()=>PL,register:()=>UL,template:()=>RL});var Wt={};n.r(Wt),n.d(Wt,{default:()=>qL,dependencies:()=>HL,name:()=>DL,register:()=>WL,template:()=>zL});var Kt={};function _t(t){return"object"==typeof t&&null!==t||"function"==typeof t}function Qt(t){return null==t}n.r(Kt),n.d(Kt,{default:()=>YL,dependencies:()=>JL,name:()=>GL,register:()=>eM,template:()=>XL});let Gt=new WeakMap;function Xt(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function Yt(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function Jt(t,e,n){let i=Gt.get(t);if(void 0===i){if(!n)return;i=new Map,Gt.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function te(t,e,n){const i=Jt(e,n,!1);return void 0!==i&&i.has(t)}function ee(t,e,n){if(te(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&ee(t,i,n)}function ne(t,e,n){const i=Jt(e,n,!1);if(void 0!==i)return i.get(t)}function ie(t,e,n){if(te(t,e,n))return ne(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?ie(t,i,n):void 0}function se(t,e,n,i){Jt(n,i,!0).set(t,e)}function re(t,e){const n=[],i=Jt(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function oe(t,e){const n=re(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=oe(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}function ae(t,e){return function(n,i){if(!_t(n))throw Xt("@metadata",[t,e,n,i],"target",n,"Object or Function");se(t,e,n,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(i))}}function le(t,e,n,i){if(void 0!==n){if(!Array.isArray(t))throw Xt("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if(!_t(e))throw Xt("Metadata.decorate",[t,e,n,i],"target",e,"Object or Function");if(!_t(i)&&!Qt(i))throw Xt("Metadata.decorate",[t,e,n,i],"attributes",i,"Object, Function, null, or undefined");return null===i&&(i=void 0),function(t,e,n,i){for(let s=t.length-1;s>=0;--s){const r=(0,t[s])(e,n,i);if(!Qt(r)){if(!_t(r))throw Xt("DecorateProperty",[t,e,n,i],"decorated",r,"Object, Function, null, or undefined");i=r}}return i}(t,e,n=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(n),i)}if(!Array.isArray(t))throw Xt("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if("function"!=typeof e)throw Xt("Metadata.decorate",[t,e,n,i],"target",e,"Function");return function(t,e){for(let n=t.length-1;n>=0;--n){const i=(0,t[n])(e);if(!Qt(i)){if("function"!=typeof i)throw Xt("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function ce(t,e,n,i){if(!_t(n))throw Xt("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return se(t,e,n,Yt(i))}function he(t,e,n){if(!_t(e))throw Xt("Metadata.has",[t,e,n],"target",e,"Object or Function");return ee(t,e,Yt(n))}function ue(t,e,n){if(!_t(e))throw Xt("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return te(t,e,Yt(n))}function de(t,e,n){if(!_t(e))throw Xt("Metadata.get",[t,e,n],"target",e,"Object or Function");return ie(t,e,Yt(n))}function pe(t,e,n){if(!_t(e))throw Xt("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return ne(t,e,Yt(n))}function fe(t,e){if(!_t(t))throw Xt("Metadata.getKeys",[t,e],"target",t,"Object or Function");return oe(t,Yt(e))}function ge(t,e){if(!_t(t))throw Xt("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return re(t,Yt(e))}function ve(t,e,n){if(!_t(e))throw Xt("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=Jt(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,Yt(n))}const me={define:ce,has:he,hasOwn:ue,get:de,getOwn:pe,getKeys:fe,getOwnKeys:ge,delete:ve};function be(t,e,n,i,s){if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:s,value:n}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}const ye="[[$au]]";function we(t,e,n){be(t,ye,Gt,e,n),be(t,"metadata",ae,e,n),be(t,"decorate",le,e,n),be(t,"defineMetadata",ce,e,n),be(t,"hasMetadata",he,e,n),be(t,"hasOwnMetadata",ue,e,n),be(t,"getMetadata",de,e,n),be(t,"getOwnMetadata",pe,e,n),be(t,"getMetadataKeys",fe,e,n),be(t,"getOwnMetadataKeys",ge,e,n),be(t,"deleteMetadata",ve,e,n)}const xe=me.getOwn,ke=me.hasOwn,Se=me.define,Ce=t=>"function"==typeof t,Ae=t=>"string"==typeof t,Ee=()=>Object.create(null),Te={};function $e(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=Te[t];if(void 0!==e)return e;const n=t.length;if(0===n)return Te[t]=!1;let i=0,s=0;for(;s<n;++s)if(i=t.charCodeAt(s),0===s&&48===i&&n>1||i<48||i>57)return Te[t]=!1;return Te[t]=!0}default:return!1}}function Ie(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function Oe(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const Pe=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(Ee(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function n(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const i=t.length;if(0===i)return t;let s,r=!1,o="",a="",l=0,c=t.charAt(0),h=n(c),u=0;for(;u<i;++u)s=l,a=c,l=h,c=t.charAt(u+1),h=n(c),0===l?o.length>0&&(r=!0):(!r&&o.length>0&&2===l&&(r=3===s||3===h),o+=e(a,r),r=!1);return o}}(),Re=function(){const t=Ee();function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=Pe(n,e)),i}}(),Le=function(){const t=Ee();return function(e){let n=t[e];return void 0===n&&(n=Re(e),n.length>0&&(n=n[0].toUpperCase()+n.slice(1)),t[e]=n),n}}(),Me=function(){const t=Ee();function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=Pe(n,e)),i}}();function je(t){const{length:e}=t,n=Array(e);let i=0;for(;i<e;++i)n[i]=t[i];return n}const Ue={};function Ne(t){return void 0===Ue[t]&&(Ue[t]=0),++Ue[t]}function Be(t,e){return t-e}function Fe(t,e,n){return{configurable:!0,enumerable:n.enumerable,get(){const t=n.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:n.enumerable}),t}}}function Ve(...t){const e=[];let n=0;const i=t.length;let s,r=0,o=0;for(;o<i;++o)if(s=t[o],void 0!==s){r=s.length;let t=0;for(;t<r;++t)e[n++]=s[t]}return e}function De(...t){const e=t.length;let n,i=0;for(;e>i;++i)if(n=t[i],void 0!==n)return n;throw new Error("No default value found")}const ze=function(){const t=Function.prototype,e=Object.getPrototypeOf,n=new WeakMap;let i,s=t,r=0;return function(o){if(i=n.get(o),void 0===i)for(n.set(o,i=[s=o]),r=0;(s=e(s))!==t;)i[++r]=s;return i}}();function qe(...t){return Object.assign(Ee(),...t)}const He=function(){const t=new WeakMap;let e=!1,n="",i=0;return function(s){return e=t.get(s),void 0===e&&(n=s.toString(),i=n.length,e=i>=29&&i<=100&&125===n.charCodeAt(i-1)&&n.charCodeAt(i-2)<=32&&93===n.charCodeAt(i-3)&&101===n.charCodeAt(i-4)&&100===n.charCodeAt(i-5)&&111===n.charCodeAt(i-6)&&99===n.charCodeAt(i-7)&&32===n.charCodeAt(i-8)&&101===n.charCodeAt(i-9)&&118===n.charCodeAt(i-10)&&105===n.charCodeAt(i-11)&&116===n.charCodeAt(i-12)&&97===n.charCodeAt(i-13)&&110===n.charCodeAt(i-14)&&88===n.charCodeAt(i-15),t.set(s,e)),e}}();function Ze(t,e){return t instanceof Promise?t.then(e):e(t)}function We(...t){let e,n,i,s=0,r=t.length;for(;s<r;++s)e=t[s],(e=t[s])instanceof Promise&&(void 0===n?n=e:void 0===i?i=[n,e]:i.push(e));return void 0===i?n:Promise.all(i)}const Ke="au:annotation",_e=(t,e)=>void 0===e?`${Ke}:${t}`:`${Ke}:${t}:${e}`,Qe=(t,e)=>{const n=xe(Ke,t);void 0===n?Se(Ke,[e],t):n.push(e)},Ge=Object.freeze({name:"au:annotation",appendTo:Qe,set(t,e,n){Se(_e(e),n,t)},get:(t,e)=>xe(_e(e),t),getKeys(t){let e=xe(Ke,t);return void 0===e&&Se(Ke,e=[],t),e},isKey:t=>t.startsWith(Ke),keyFor:_e}),Xe="au:resource",Ye=Object.freeze({name:Xe,appendTo(t,e){const n=xe(Xe,t);void 0===n?Se(Xe,[e],t):n.push(e)},has:t=>ke(Xe,t),getAll(t){const e=xe(Xe,t);return void 0===e?Hn:e.map((e=>xe(e,t)))},getKeys(t){let e=xe(Xe,t);return void 0===e&&Se(Xe,e=[],t),e},isKey:t=>t.startsWith(Xe),keyFor:(t,e)=>void 0===e?`${Xe}:${t}`:`${Xe}:${t}:${e}`}),Je={annotation:Ge,resource:Ye},tn=Object.prototype.hasOwnProperty;function en(t,e,n,i){let s=xe(_e(t),n);return void 0===s?(s=e[t],void 0===s?(s=n[t],void 0!==s&&tn.call(n,t)?s:i()):s):s}function nn(t,e,n){let i=xe(_e(t),e);return void 0===i?(i=e[t],void 0!==i&&tn.call(e,t)?i:n()):i}function sn(t,e,n){const i=e[t];return void 0===i?n():i}!function(t,e=!0,n=!1,i=!0,s=!0){if(function(t){return ye in t}(t)){if(t[ye]===Gt)return;if(t[ye]instanceof WeakMap)return void(Gt=t[ye]);throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const r=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`)}n&&we(t,i,s)}else we(t,i,s)}(Reflect,!1,!1);class rn{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,Bn(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:n,key:i}=this;return this.container=this.key=void 0,n.registerResolver(i,new An(i,t,e))}}function on(t){const e=t.slice(),n=Object.keys(t),i=n.length;let s;for(let r=0;r<i;++r)s=n[r],$e(s)||(e[s]=t[s]);return e}const an={none(t){throw Error(`AUR0002:${t.toString()}`)},singleton:t=>new An(t,1,t),transient:t=>new An(t,2,t)};class ln{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){var e,n;return void 0===t||t===ln.DEFAULT?ln.DEFAULT:new ln(null!==(e=t.inheritParentResources)&&void 0!==e&&e,null!==(n=t.defaultResolver)&&void 0!==n?n:an.singleton)}}ln.DEFAULT=ln.from({});const cn={createContainer:t=>new jn(null,ln.from(t)),getDesignParamtypes:t=>xe("design:paramtypes",t),getAnnotationParamtypes(t){const e=_e("di:paramtypes");return xe(e,t)},getOrCreateAnnotationParamTypes:un,getDependencies:hn,createInterface(t,e){const n=Ce(t)?t:e,i=Ae(t)?t:void 0,s=function(t,e,n){if(null==t||void 0!==new.target)throw new Error(`AUR0001:${s.friendlyName}`);un(t)[n]=s};return s.$isInterface=!0,s.friendlyName=null==i?"(anonymous)":i,null!=n&&(s.register=function(t,e){return n(new rn(t,null!=e?e:s))}),s.toString=function(){return`InterfaceSymbol<${s.friendlyName}>`},s},inject:(...t)=>function(e,n,i){if("number"==typeof i){const n=un(e),s=t[0];void 0!==s&&(n[i]=s)}else if(n){const i=un(e.constructor),s=t[0];void 0!==s&&(i[n]=s)}else if(i){const e=un(i.value);let n;for(let i=0;i<t.length;++i)n=t[i],void 0!==n&&(e[i]=n)}else{const n=un(e);let i;for(let e=0;e<t.length;++e)i=t[e],void 0!==i&&(n[e]=i)}},transient:t=>(t.register=function(e){return Fn.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=bn)=>(t.register=function(e){return Fn.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)};function hn(t){const e=_e("di:dependencies");let n=xe(e,t);if(void 0===n){const i=t.inject;if(void 0===i){const e=cn.getDesignParamtypes(t),i=cn.getAnnotationParamtypes(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);n=Ce(e)&&e!==Function.prototype?on(hn(e)):[]}else n=on(i);else if(void 0===i)n=on(e);else{n=on(e);let t,s=i.length,r=0;for(;r<s;++r)t=i[r],void 0!==t&&(n[r]=t);const o=Object.keys(i);let a;for(r=0,s=o.length,r=0;r<s;++r)a=o[r],$e(a)||(n[a]=i[a])}}else n=on(i);Se(e,n,t),Qe(t,e)}return n}function un(t){const e=_e("di:paramtypes");let n=xe(e,t);return void 0===n&&(Se(e,n=[],t),Qe(t,e)),n}const dn=cn.createInterface("IContainer"),pn=dn;function fn(t){return function(e){const n=function(t,e,i){cn.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return t(e,n,i)},n}}const gn=cn.inject;function vn(t){return cn.transient(t)}function mn(t){return null==t?vn:vn(t)}const bn={scoped:!1},yn=function(t,e){e=!!e;const n=function(t,e,i){cn.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return((t,e,n,i)=>n.getAll(t,i))(t,0,i,e)},n},wn=(fn(((t,e,n)=>()=>n.get(t))),fn(((t,e,n)=>n.has(t,!0)?n.get(t):void 0)));function xn(t,e,n){cn.inject(xn)(t,e,n)}function kn(t,e,n){return e.getFactory(t).construct(n)}var Sn,Cn;xn.$isResolver=!0,xn.resolve=()=>{},fn(((t,e,n)=>(...i)=>e.getFactory(t).construct(n,i))),fn(((t,e,n)=>{const i=kn(t,e,n),s=new Vn(String(t),i);return n.registerResolver(t,s,!0),i})),fn(((t,e,n)=>kn(t,e,n))),(Cn=Sn||(Sn={}))[Cn.instance=0]="instance",Cn[Cn.singleton=1]="singleton",Cn[Cn.transient=2]="transient",Cn[Cn.callback=3]="callback",Cn[Cn.array=4]="array",Cn[Cn.alias=5]="alias";class An{constructor(t,e,n){this.key=t,this.strategy=e,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`AUR0003:${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const n=t.getFactory(this.state);if(null===n)throw new Error(`AUR0004:${String(this.key)}`);return n.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`AUR0005:${this.strategy}`)}}getFactory(t){var e,n,i;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(i=null===(n=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===n?void 0:n.call(e,t))&&void 0!==i?i:null;default:return null}}}function En(t){return this.get(t)}function Tn(t,e){return e(t)}class $n{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let n;return n=void 0===e?new this.Type(...this.dependencies.map(En,t)):new this.Type(...this.dependencies.map(En,t),...e),null==this.transformers?n:this.transformers.reduce(Tn,n)}registerTransformer(t){var e;(null!==(e=this.transformers)&&void 0!==e?e:this.transformers=[]).push(t)}}const In={$isResolver:!0,resolve:(t,e)=>e};function On(t){return Ce(t.register)}function Pn(t){return function(t){return On(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}function Rn(t){return void 0!==t.prototype}const Ln=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]);let Mn=0;class jn{constructor(t,e){this.parent=t,this.config=e,this.id=++Mn,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=Ee()):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign(Ee(),t.res,this.root.res):this.res=Ee()),this.u.set(dn,In)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw new Error(`AUR0006:${t.map(String)}`);let e,n,i,s,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],_t(e))if(On(e))e.register(this);else if(Je.resource.has(e)){const t=Je.resource.getAll(e);if(1===t.length)t[0].register(this);else for(s=0,r=t.length;r>s;)t[s].register(this),++s}else if(Rn(e))Fn.singleton(e,e).register(this);else for(n=Object.keys(e),s=0,r=n.length;s<r;++s)i=e[n[s]],_t(i)&&(On(i)?i.register(this):this.register(i));return--this.t,this}registerResolver(t,e,n=!1){Dn(t);const i=this.u,s=i.get(t);if(null==s){if(i.set(t,e),function(t){return Ae(t)&&t.indexOf(":")>0}(t)){if(void 0!==this.res[t])throw new Error(`AUR0007:${t}`);this.res[t]=e}}else s instanceof An&&4===s.strategy?s.state.push(e):i.set(t,new An(t,4,[s,e]));return n&&this.i.set(t,e),e}registerTransformer(t,e){const n=this.getResolver(t);if(null==n)return!1;if(n.getFactory){const t=n.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(Dn(t),void 0!==t.resolve)return t;let n,i=this;for(;null!=i;){if(n=i.u.get(t),null!=n)return n;if(null==i.parent){const n=Pn(t)?this:i;return e?this.R(t,n):null}i=i.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(Dn(t),t.$isResolver)return t.resolve(this,this);let e,n=this;for(;null!=n;){if(e=n.u.get(t),null!=e)return e.resolve(n,this);if(null==n.parent){const i=Pn(t)?this:n;return e=this.R(t,i),e.resolve(n,this)}n=n.parent}throw new Error(`AUR0008:${String(t)}`)}getAll(t,e=!1){Dn(t);const n=this;let i,s=n;if(e){let e=Hn;for(;null!=s;)i=s.u.get(t),null!=i&&(e=e.concat(zn(i,s,n))),s=s.parent;return e}for(;null!=s;){if(i=s.u.get(t),null!=i)return zn(i,s,n);if(s=s.parent,null==s)return Hn}return Hn}invoke(t,e){if(He(t))throw qn(t);return void 0===e?new t(...hn(t).map(En,this)):new t(...hn(t).map(En,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(He(t))throw qn(t);this.h.set(t,e=new $n(t,hn(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===ln.DEFAULT?new jn(this,this.config):new jn(this,ln.from({...this.config,inheritParentResources:!1})):new jn(this,ln.from(null!=t?t:this.config))}disposeResolvers(){const t=this.u,e=this.i;let n,i;for([i,n]of e.entries())n.dispose(),t.delete(i);e.clear()}find(t,e){const n=t.keyFrom(e);let i=this.res[n];if(void 0===i&&(i=this.root.res[n],void 0===i))return null;if(null===i)return null;if(Ce(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const n=xe(t.name,e.Type);return void 0===n?null:n}return null}create(t,e){var n,i;const s=t.keyFrom(e);let r=this.res[s];return void 0===r?(r=this.root.res[s],void 0===r?null:null!==(n=r.resolve(this.root,this))&&void 0!==n?n:null):null!==(i=r.resolve(this,this))&&void 0!==i?i:null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}R(t,e){if(!Ce(t))throw new Error(`AUR0009:${t}`);if(Ln.has(t.name))throw new Error(`AUR0010:${t.name}`);if(On(t)){const n=t.register(e,t);if(!(n instanceof Object)||null==n.resolve){const n=e.u.get(t);if(null!=n)return n;throw new Error("AUR0011")}return n}if(Je.resource.has(t)){const n=Je.resource.getAll(t);if(1===n.length)n[0].register(e);else{const t=n.length;for(let i=0;i<t;++i)n[i].register(e)}const i=e.u.get(t);if(null!=i)return i;throw new Error("AUR0011")}if(t.$isInterface)throw new Error(`AUR0012:${t.friendlyName}`);{const n=this.config.defaultResolver(t,e);return e.u.set(t,n),n}}}class Un{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const Nn=new WeakMap;function Bn(t){return function(e,n,i){let s=Nn.get(e);if(void 0===s&&Nn.set(e,s=new WeakMap),s.has(i))return s.get(i);const r=t(e,n,i);return s.set(i,r),r}}const Fn={instance:(t,e)=>new An(t,0,e),singleton:(t,e)=>new An(t,1,e),transient:(t,e)=>new An(t,2,e),callback:(t,e)=>new An(t,3,e),cachedCallback:(t,e)=>new An(t,3,Bn(e)),aliasTo:(t,e)=>new An(e,5,t),defer:(t,...e)=>new Un(t,e)};class Vn{constructor(t,e){this.C=null,this.$=t,void 0!==e&&(this.C=e)}get friendlyName(){return this.$}prepare(t){this.C=t}get $isResolver(){return!0}resolve(){if(null==this.C)throw new Error(`AUR0013:${this.$}`);return this.C}dispose(){this.C=null}}function Dn(t){if(null==t)throw new Error("AUR0014")}function zn(t,e,n){if(t instanceof An&&4===t.strategy){const i=t.state;let s=i.length;const r=new Array(s);for(;s--;)r[s]=i[s].resolve(e,n);return r}return[t.resolve(e,n)]}function qn(t){return new Error(`AUR0015:${t.name}`)}const Hn=Object.freeze([]),Zn=Object.freeze({});function Wn(){}const Kn=cn.createInterface("IPlatform");function _n(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function Qn(t,e){return function(n,i){e(n,i,t)}}var Gn,Xn;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(Gn||(Gn={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Xn||(Xn={}));const Yn=cn.createInterface("ILogConfig",(t=>t.instance(new ri(0,3)))),Jn=cn.createInterface("ISink"),ti=cn.createInterface("ILogEventFactory",(t=>t.singleton(ci))),ei=cn.createInterface("ILogger",(t=>t.singleton(ui))),ni=cn.createInterface("ILogScope"),ii=Object.freeze({key:_e("logger-sink-handles"),define(t,e){return Se(this.key,e.handles,t.prototype),t},getHandles(t){return me.get(this.key,t)}}),si=qe({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class ri{constructor(t,e){this.colorOptions=t,this.level=e}}const oi=function(){const t=[qe({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),qe({TRC:si.grey("TRC"),DBG:si.grey("DBG"),INF:si.white("INF"),WRN:si.yellow("WRN"),ERR:si.red("ERR"),FTL:si.red("FTL"),QQQ:si.grey("???")})];return function(e,n){return e<=0?t[n].TRC:e<=1?t[n].DBG:e<=2?t[n].INF:e<=3?t[n].WRN:e<=4?t[n].ERR:e<=5?t[n].FTL:t[n].QQQ}}();function ai(t,e){return 0===e?new Date(t).toISOString():si.grey(new Date(t).toISOString())}class li{constructor(t,e,n,i,s,r){this.severity=t,this.message=e,this.optionalParams=n,this.scope=i,this.colorOptions=s,this.timestamp=r}toString(){const{severity:t,message:e,scope:n,colorOptions:i,timestamp:s}=this;return 0===n.length?`${ai(s,i)} [${oi(t,i)}] ${e}`:`${ai(s,i)} [${oi(t,i)} ${function(t,e){return 0===e?t.join("."):t.map(si.cyan).join(".")}(n,i)}] ${e}`}}let ci=class{constructor(t){this.config=t}createLogEvent(t,e,n,i){return new li(e,n,i,t.scope,this.config.colorOptions,Date.now())}};ci=_n([Qn(0,Yn)],ci);let hi=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const n=t.optionalParams;if(void 0===n||0===n.length){const n=t.toString();switch(t.severity){case 0:case 1:return e.debug(n);case 2:return e.info(n);case 3:return e.warn(n);case 4:case 5:return e.error(n)}}else{let i=t.toString(),s=0;for(;i.includes("%s");)i=i.replace("%s",String(n[s++]));switch(t.severity){case 0:case 1:return e.debug(i,...n.slice(s));case 2:return e.info(i,...n.slice(s));case 3:return e.warn(i,...n.slice(s));case 4:case 5:return e.error(i,...n.slice(s))}}}}static register(e){Fn.singleton(Jn,t).register(e)}};hi=_n([Qn(0,Kn)],hi);let ui=class t{constructor(t,e,n,i=[],s=null){var r,o,a,l,c,h;let u,d,p,f,g,v;if(this.config=t,this.factory=e,this.scope=i,this.scopedLoggers=Ee(),null===s){this.root=this,this.parent=this,u=this.traceSinks=[],d=this.debugSinks=[],p=this.infoSinks=[],f=this.warnSinks=[],g=this.errorSinks=[],v=this.fatalSinks=[];for(const t of n){const e=ii.getHandles(t);(null===(r=null==e?void 0:e.includes(0))||void 0===r||r)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&d.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&p.push(t),(null===(l=null==e?void 0:e.includes(3))||void 0===l||l)&&f.push(t),(null===(c=null==e?void 0:e.includes(4))||void 0===c||c)&&g.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&v.push(t)}}else this.root=s.root,this.parent=s,u=this.traceSinks=s.traceSinks,d=this.debugSinks=s.debugSinks,p=this.infoSinks=s.infoSinks,f=this.warnSinks=s.warnSinks,g=this.errorSinks=s.errorSinks,v=this.fatalSinks=s.fatalSinks}trace(t,...e){this.config.level<=0&&this.emit(this.traceSinks,0,t,e)}debug(t,...e){this.config.level<=1&&this.emit(this.debugSinks,1,t,e)}info(t,...e){this.config.level<=2&&this.emit(this.infoSinks,2,t,e)}warn(t,...e){this.config.level<=3&&this.emit(this.warnSinks,3,t,e)}error(t,...e){this.config.level<=4&&this.emit(this.errorSinks,4,t,e)}fatal(t,...e){this.config.level<=5&&this.emit(this.fatalSinks,5,t,e)}scopeTo(e){const n=this.scopedLoggers;let i=n[e];return void 0===i&&(i=n[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),i}emit(t,e,n,i){const s=Ce(n)?n():n,r=this.factory.createLogEvent(this,e,s,i);for(let e=0,n=t.length;e<n;++e)t[e].handleEvent(r)}};function di(t){return t}_n([Fe],ui.prototype,"trace",null),_n([Fe],ui.prototype,"debug",null),_n([Fe],ui.prototype,"info",null),_n([Fe],ui.prototype,"warn",null),_n([Fe],ui.prototype,"error",null),_n([Fe],ui.prototype,"fatal",null),ui=_n([Qn(0,Yn),Qn(1,ti),Qn(2,yn(Jn)),Qn(3,wn(ni)),Qn(4,xn)],ui),qe({create:({level:t=3,colorOptions:e=0,sinks:n=[]}={})=>qe({register(i){i.register(Fn.instance(Yn,new ri(e,t)));for(const t of n)Ce(t)?i.register(Fn.singleton(Jn,t)):i.register(t);return i}})}),cn.createInterface((t=>t.singleton(fi)));class pi{constructor(t){this.$transform=t,this.A=new Map,this.j=new Map}transform(t){if(t instanceof Promise)return this.I(t);if("object"==typeof t&&null!==t)return this.O(t);throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`)}I(t){if(this.A.has(t))return this.A.get(t);const e=t.then((t=>this.O(t)));return this.A.set(t,e),e.then((e=>{this.A.set(t,e)})),e}O(t){if(this.j.has(t))return this.j.get(t);const e=this.$transform(this.M(t));return this.j.set(t,e),e instanceof Promise&&e.then((e=>{this.j.set(t,e)})),e}M(t){let e,n,i,s;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;n=Ce(e.register),i=!1,s=Hn;break;case"function":n=Ce(e.register),i=void 0!==e.prototype,s=Je.resource.getAll(e);break;default:continue}r.push(new vi(o,e,n,i,s))}return new gi(t,r)}}class fi{constructor(){this.transformers=new Map}load(t,e=di){const n=this.transformers;let i=n.get(e);return void 0===i&&n.set(e,i=new pi(e)),i.transform(t)}dispose(){this.transformers.clear()}}class gi{constructor(t,e){this.raw=t,this.items=e}}class vi{constructor(t,e,n,i,s){this.key=t,this.value=e,this.isRegistry=n,this.isConstructable=i,this.definitions=s}}class mi{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}const bi=cn.createInterface("IEventAggregator",(t=>t.singleton(yi)));class yi{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw new Error(`Invalid channel name or instance: ${t}.`);if(Ae(t)){let n=this.eventLookup[t];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)n[i](e,t)}}else{const e=this.messageHandlers.slice();let n=e.length;for(;n-- >0;)e[n].handle(t)}}subscribe(t,e){if(!t)throw new Error(`Invalid channel name or type: ${t}.`);let n,i;return Ae(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),n=e,i=this.eventLookup[t]):(n=new mi(t,e),i=this.messageHandlers),i.push(n),{dispose(){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const n=this.subscribe(t,(function(t,i){n.dispose(),e(t,i)}));return n}}const wi=Object.prototype.hasOwnProperty,xi=Reflect.defineProperty,ki=t=>"function"==typeof t,Si=t=>"string"==typeof t;function Ci(t,e,n){return xi(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function Ai(t,e,n,i=!1){!i&&wi.call(t,e)||Ci(t,e,n)}const Ei=()=>Object.create(null),Ti=me.getOwn,$i=me.hasOwn,Ii=me.define,Oi=Je.annotation.keyFor,Pi=Je.resource.keyFor,Ri=Je.resource.appendTo;function Li(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Fn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class Mi{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)wi.call(t,e)&&(this[e]=t[e])}static create(t,e){return new Mi(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class ji{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new ji(null,t,null==e?Ui.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new ji(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new ji(t,e,Ui.create(e),!1)}}class Ui{constructor(t){this.bindingContext=t}static create(t){return new Ui(t)}}const Ni=cn.createInterface("ISignaler",(t=>t.singleton(Bi)));class Bi{constructor(){this.signals=Ei()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var Fi;function Vi(t){return function(e){return Wi.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(Fi||(Fi={}));class Di{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;Si(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===qi;return new Di(e,De(Zi(e,"name"),n),Ve(Zi(e,"aliases"),i.aliases,e.aliases),Wi.keyFrom(n),en("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Fn.singleton(n,e).register(t);break;case 2:Fn.instance(n,new zi(t,e)).register(t)}Fn.aliasTo(n,e).register(t),Li(i,Wi,n,t)}}class zi{constructor(t,e){this.ctn=t,this.Type=e,this.deps=cn.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class qi{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{xi(qi.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const Hi=Pi("binding-behavior"),Zi=(t,e)=>Ti(Oi(e),t),Wi=Object.freeze({name:Hi,keyFrom:t=>`${Hi}:${t}`,isType:t=>ki(t)&&$i(Hi,t),define(t,e){const n=Di.create(t,e);return Ii(Hi,n,n.Type),Ii(Hi,n,n),Ri(e,Hi),n.Type},getDefinition(t){const e=Ti(Hi,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){Ii(Oi(e),n,t)},getAnnotation:Zi});function Ki(t){return function(e){return Xi.define(t,e)}}class _i{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return Si(t)?(n=t,i={name:n}):(n=t.name,i=t),new _i(e,De(Gi(e,"name"),n),Ve(Gi(e,"aliases"),i.aliases,e.aliases),Xi.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Fn.singleton(n,e).register(t),Fn.aliasTo(n,e).register(t),Li(i,Xi,n,t)}}const Qi=Pi("value-converter"),Gi=(t,e)=>Ti(Oi(e),t),Xi=Object.freeze({name:Qi,keyFrom:t=>`${Qi}:${t}`,isType:t=>ki(t)&&$i(Qi,t),define(t,e){const n=_i.create(t,e);return Ii(Qi,n,n.Type),Ii(Qi,n,n),Ri(e,Qi),n.Type},getDefinition(t){const e=Ti(Qi,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){Ii(Oi(e),n,t)},getAnnotation:Gi});var Yi;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(Yi||(Yi={}));class Ji{constructor(){this.text=""}static unparse(t){const e=new Ji;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",Si(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class ts{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class es{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=Wi.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof zi)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(ki(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return Ji.unparse(this)}}class ns{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=Xi.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(Ni);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(Ni);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return Ji.unparse(this)}}class is{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return Ji.unparse(this)}}class ss{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return Ji.unparse(this)}}class rs{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return Ji.unparse(this)}}rs.$this=new rs(0),rs.$parent=new rs(1);class os{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=Mi.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=Mi.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return Ji.unparse(this)}}class as{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return Ji.unparse(this)}}class ls{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return Ji.unparse(this)}}class cs{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=Mi.get(e,this.name,this.ancestor,t),o=Ts(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return Ji.unparse(this)}}class hs{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=Ts(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return Ji.unparse(this)}}class us{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(ki(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return Ji.unparse(this)}}class ds{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!ki(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(Ie(s)||Ie(r))return(s||0)+(r||0);if(Oe(s)||Oe(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return Ji.unparse(this)}}class ps{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return Ji.unparse(this)}}class fs{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return Ji.unparse(this)}}fs.$undefined=new fs(void 0),fs.$null=new fs(null),fs.$true=new fs(!0),fs.$false=new fs(!1),fs.$empty=new fs("");class gs{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return Ji.unparse(this)}}gs.$empty=new gs(Hn);class vs{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return Ji.unparse(this)}}vs.$empty=new vs(Hn,Hn);class ms{constructor(t,e=Hn){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return Ji.unparse(this)}}ms.$empty=new ms([""]);class bs{constructor(t,e,n,i=Hn){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!ki(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return Ji.unparse(this)}}class ys{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return Ji.unparse(this)}}class ws{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return Ji.unparse(this)}}class xs{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return Ji.unparse(this)}}const ks=Object.prototype.toString;class Ss{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(ks.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${ks.call(e)}`)}}iterate(t,e,n){switch(ks.call(e)){case"[object Array]":return $s(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;$s(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;$s(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;$s(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${ks.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return Ji.unparse(this)}}class Cs{constructor(t,e=Hn){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return Ji.unparse(this)}}class As{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,ji.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return Ji.unparse(this)}}class Es{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,ji.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return Ji.unparse(this)}}function Ts(t,e,n){const i=null==e?null:e[n];if(ki(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function $s(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}const Is=cn.createInterface("ICoercionConfiguration");var Os,Ps,Rs,Ls,Ms,js;function Us(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function Ns(t){return null==t?Bs:Bs(t)}function Bs(t){const e=t.prototype;xi(e,"subs",{get:Vs}),Ai(e,"subscribe",Ds),Ai(e,"unsubscribe",zs)}!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(Os||(Os={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(Ps||(Ps={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(Rs||(Rs={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(Ls||(Ls={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(Ms||(Ms={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(js||(js={}));class Fs{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function Vs(){return Ci(this,"subs",new Fs)}function Ds(t){return this.subs.add(t)}function zs(t){return this.subs.remove(t)}function qs(t){return null==t?Hs:Hs(t)}function Hs(t){const e=t.prototype;xi(e,"queue",{get:Ws})}class Zs{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(Ks)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function Ws(){return Zs.instance}function Ks(t,e,n){n.delete(t),t.flush()}Zs.instance=new Zs;class _s{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&$e(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){Js=this.h,this.h=this.v,this.subs.notify(this.v,Js,this.f)}}class Qs{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){Js=this.h,this.h=this.v,this.subs.notify(this.v,Js,this.f)}}function Gs(t){const e=t.prototype;Ai(e,"subscribe",Xs,!0),Ai(e,"unsubscribe",Ys,!0),qs(t),Ns(t)}function Xs(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function Ys(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let Js;Gs(_s),Gs(Qs);const tr=new WeakMap;function er(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function nr(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function ir(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function sr(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,b,y,w,x,k,S,C=0,A=0;for(;;){if(i-n<=10)return void ir(t,e,n,i,s);C=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[C],h=e[C],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,b=n+1,y=i-1,t[C]=t[b],e[C]=e[b],t[b]=v,e[b]=m;t:for(A=b+1;A<y;A++)if(w=t[A],x=e[A],k=s(w,v),k<0)t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,b++;else if(k>0){do{if(y--,y==A)break t;S=t[y],k=s(S,v)}while(k>0);t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,k<0&&(w=t[A],x=e[A],t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,b++)}i-y<b-n?(sr(t,e,y,i,s),i=b):(sr(t,e,n,b,s),n=y)}}const rr=Array.prototype,or=rr.push,ar=rr.unshift,lr=rr.pop,cr=rr.shift,hr=rr.splice,ur=rr.reverse,dr=rr.sort,pr=["push","unshift","pop","shift","splice","reverse","sort"],fr={push:function(...t){const e=tr.get(this);if(void 0===e)return or.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=tr.get(this);if(void 0===e)return ar.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;ar.apply(e.indexMap,i);const r=ar.apply(this,t);return e.notify(),r},pop:function(){const t=tr.get(this);if(void 0===t)return lr.call(this);const e=t.indexMap,n=lr.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),lr.call(e),t.notify(),n},shift:function(){const t=tr.get(this);if(void 0===t)return cr.call(this);const e=t.indexMap,n=cr.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),cr.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=tr.get(this);if(void 0===i)return hr.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;hr.call(a,e,n,...i)}else hr.apply(a,t);const h=hr.apply(this,t);return i.notify(),h},reverse:function(){const t=tr.get(this);if(void 0===t)return ur.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=tr.get(this);if(void 0===e)return dr.call(this,t),this;const n=this.length;if(n<2)return this;sr(this,e.indexMap,0,n,nr);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&ki(t)||(t=er),sr(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of pr)xi(fr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let gr=!1;class vr{constructor(t){this.type=18,gr||(gr=!0,function(){for(const t of pr)!0!==rr[t].observing&&Ci(rr,t,fr[t])}()),this.indexObservers={},this.collection=t,this.indexMap=Us(t.length),this.lenObs=void 0,tr.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=Us(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new _s(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new mr(this,t)}}class mr{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function br(t){let e=tr.get(t);return void 0===e&&(e=new vr(t)),e}Ns(vr),Ns(mr);const yr=new WeakMap,wr=Set.prototype,xr=wr.add,kr=wr.clear,Sr=wr.delete,Cr=["add","clear","delete"],Ar={add:function(t){const e=yr.get(this);if(void 0===e)return xr.call(this,t),this;const n=this.size;return xr.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=yr.get(this);if(void 0===t)return kr.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;kr.call(this),e.length=0,t.notify()}},delete:function(t){const e=yr.get(this);if(void 0===e)return Sr.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Sr.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},Er={writable:!0,enumerable:!1,configurable:!0};for(const t of Cr)xi(Ar[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Tr=!1;class $r{constructor(t){this.type=34,Tr||(Tr=!0,function(){for(const t of Cr)!0!==wr[t].observing&&xi(wr,t,{...Er,value:Ar[t]})}()),this.collection=t,this.indexMap=Us(t.size),this.lenObs=void 0,yr.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Us(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Qs(this)}}function Ir(t){let e=yr.get(t);return void 0===e&&(e=new $r(t)),e}Ns($r);const Or=new WeakMap,Pr=Map.prototype,Rr=Pr.set,Lr=Pr.clear,Mr=Pr.delete,jr=["set","clear","delete"],Ur={set:function(t,e){const n=Or.get(this);if(void 0===n)return Rr.call(this,t,e),this;const i=this.get(t),s=this.size;if(Rr.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=Or.get(this);if(void 0===t)return Lr.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Lr.call(this),e.length=0,t.notify()}},delete:function(t){const e=Or.get(this);if(void 0===e)return Mr.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Mr.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},Nr={writable:!0,enumerable:!1,configurable:!0};for(const t of jr)xi(Ur[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Br=!1;class Fr{constructor(t){this.type=66,Br||(Br=!0,function(){for(const t of jr)!0!==Pr[t].observing&&xi(Pr,t,{...Nr,value:Ur[t]})}()),this.collection=t,this.indexMap=Us(t.size),this.lenObs=void 0,Or.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Us(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Qs(this)}}function Vr(t){let e=Or.get(t);return void 0===e&&(e=new Fr(t)),e}function Dr(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function zr(){return Ci(this,"obs",new Kr(this))}function qr(t){let e;if(t instanceof Array)e=br(t);else if(t instanceof Set)e=Ir(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=Vr(t)}this.obs.add(e)}function Hr(t){this.obs.add(t)}function Zr(){throw new Error("AUR2011:handleChange")}function Wr(){throw new Error("AUR2012:handleCollectionChange")}Ns(Fr);class Kr{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(Qr,this),this.count=this.o.size}clearAll(){this.o.forEach(_r,this),this.o.clear(),this.count=0}}function _r(t,e){e.unsubscribe(this)}function Qr(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function Gr(t){const e=t.prototype;return Ai(e,"observe",Dr,!0),Ai(e,"observeCollection",qr,!0),Ai(e,"subscribeTo",Hr,!0),xi(e,"obs",{get:zr}),Ai(e,"handleChange",Zr),Ai(e,"handleCollectionChange",Wr),t}function Xr(t){return null==t?Gr:Gr(t)}Gr(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}});const Yr=cn.createInterface("IExpressionParser",(t=>t.singleton(Jr)));class Jr{constructor(){this.u=Ei(),this.A=Ei(),this.U=Ei()}parse(t,e){let n;switch(e){case 16:return new ts(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return fs.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return po.ip=t,po.length=t.length,po.index=0,po.O=t.charCodeAt(0),fo(po,0,61,void 0===e?8:e)}}var to,eo,no,io;function so(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(to||(to={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(eo||(eo={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(no||(no={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(io||(io={}));const ro=fs.$false,oo=fs.$true,ao=fs.$null,lo=fs.$undefined,co=rs.$this,ho=rs.$parent;var uo;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(uo||(uo={}));const po=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function fo(t,e,n,i){if(16===i)return new ts(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),vo(t);const i=fo(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(so(mo(t)));break;default:s+=String.fromCharCode(t.O)}mo(t)}return n.length?(e.push(s),new Cs(e,n)):null}(t);if(vo(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=So[63&t.$];vo(t),s=new ps(n,fo(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(vo(t),e++,!xo(t,16393)){if(524288&t.$){const t=511&e;s=0===t?co:1===t?ho:new rs(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new xs(t.L):(s=new os(t.L,511&e),e=1024),t.R=!0,vo(t);break;case 3076:t.R=!1,vo(t),s=co,e=512;break;case 671751:vo(t),s=fo(t,0,62,i),ko(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new As(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(vo(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return ko(t,1835022),n;function o(){""!==i?(e.push(new Es(new as(co,i),new ls(co,new fs(r++)),void 0)),i=""):r++}}(t):function(t,e,n){vo(t);const i=new Array;for(;1835022!==t.$;)if(xo(t,1572876)){if(i.push(lo),1835022===t.$)break}else{if(i.push(fo(t,e,62,-3&n)),!xo(t,1572876))break;if(1835022===t.$)break}return ko(t,1835022),2&n?new ys(i):(t.R=!1,new gs(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(vo(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)vo(t),ko(t,1572879),i.push(fo(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;vo(t),xo(t,1572879)?i.push(fo(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(fo(t,0,450,-3&e)))}}1835018!==t.$&&ko(t,1572876)}return ko(t,1835018),2&e?new ws(n,i):(t.R=!1,new vs(n,i))}(t,i),e=0;break;case 540714:s=new ms([t.L]),t.R=!1,vo(t),e=0;break;case 540715:s=go(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new fs(t.L),t.R=!1,vo(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=So[63&t.$],t.R=!1,vo(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);vo(t);const n=e,i=fo(t,0,61,0);return new Ss(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,vo(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,vo(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new os(r,s.ancestor):new as(s,r);continue;case 671757:t.R=!0,vo(t),e=4096,s=new ls(s,fo(t,0,62,i)),ko(t,1835022);break;case 671751:for(t.R=!1,vo(t);1835019!==t.$&&(n.push(fo(t,0,62,i)),xo(t,1572876)););ko(t,1835019),s=1024&e?new cs(r,n,s.ancestor):2048&e?new hs(s,r,n):new us(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new bs(o,o,s),vo(t);break;case 540715:s=go(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;vo(t),s=new ds(So[63&r],s,fo(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(xo(t,1572880)){const n=fo(t,e,62,i);ko(t,1572879),s=new ss(s,n,fo(t,e,62,i)),t.R=!1}if(62<n)return s;if(xo(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new is(s,fo(t,e,62,i))}if(61<n)return s;for(;xo(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;vo(t);const r=new Array;for(;xo(t,1572879);)r.push(fo(t,e,62,i));s=new ns(s,n,r)}for(;xo(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;vo(t);const r=new Array;for(;xo(t,1572879);)r.push(fo(t,e,62,i));s=new es(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function go(t,e,n,i,s){const r=[t.L];ko(t,540715);const o=[fo(t,e,62,n)];for(;540714!==(t.$=wo(t));)r.push(t.L),ko(t,540715),o.push(fo(t,e,62,n));return r.push(t.L),t.R=!1,s?(vo(t),new bs(r,r,i,o)):(vo(t),new ms(r,o))}function vo(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=Po[t.O](t)))return;t.$=1572864}function mo(t){return t.O=t.ip.charCodeAt(++t.index)}function bo(t,e){let n=t.O;if(!1===e){do{n=mo(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=mo(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=mo(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function yo(t){let e=!0,n="";for(;96!==mo(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(so(mo(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return mo(t),t.L=n,e?540714:540715}function wo(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,yo(t)}function xo(t,e){return t.$===e&&(vo(t),!0)}function ko(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);vo(t)}const So=[ro,oo,ao,lo,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Co=Ei();Co.true=2049,Co.null=2050,Co.false=2048,Co.undefined=2051,Co.$this=3076,Co.$parent=3078,Co.in=1640799,Co.instanceof=1640800,Co.typeof=34851,Co.void=34852,Co.of=1051180;const Ao=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Eo=[48,58];function To(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function $o(t){return e=>(mo(e),t)}const Io=t=>{throw new Error(`AUR0168:${t.ip}`)};Io.notMapped=!0,To(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const Oo=new Uint8Array(65535);To(Oo,null,Ao,1),To(Oo,null,Eo,1);const Po=new Array(65535);Po.fill(Io,0,65535),To(Po,null,[0,33,127,161],(t=>(mo(t),null))),To(Po,null,Ao,(function(t){for(;Oo[mo(t)];);const e=Co[t.L=t.P];return void 0===e?1024:e})),To(Po,null,Eo,(t=>bo(t,!1))),Po[34]=Po[39]=t=>function(t){const e=t.O;mo(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),mo(t),n=so(t.O),mo(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);mo(t)}const r=t.ip.slice(s,t.index);mo(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),Po[96]=t=>yo(t),Po[33]=t=>61!==mo(t)?32809:61!==mo(t)?1638680:(mo(t),1638682),Po[61]=t=>61!==mo(t)?1048616:61!==mo(t)?1638679:(mo(t),1638681),Po[38]=t=>38!==mo(t)?1572883:(mo(t),1638614),Po[124]=t=>124!==mo(t)?1572884:(mo(t),1638549),Po[46]=t=>mo(t)<=57&&t.O>=48?bo(t,!0):16393,Po[60]=t=>61!==mo(t)?1638747:(mo(t),1638749),Po[62]=t=>61!==mo(t)?1638748:(mo(t),1638750),Po[37]=$o(1638886),Po[40]=$o(671751),Po[41]=$o(1835019),Po[42]=$o(1638885),Po[43]=$o(623009),Po[44]=$o(1572876),Po[45]=$o(623010),Po[47]=$o(1638887),Po[58]=$o(1572879),Po[63]=$o(1572880),Po[91]=$o(671757),Po[93]=$o(1835022),Po[123]=$o(131080),Po[125]=$o(1835018);let Ro=null;const Lo=[];let Mo=!1;function jo(){return Ro}function Uo(t){if(null==t)throw new Error("AUR0206");if(null==Ro)return Ro=t,Lo[0]=Ro,void(Mo=!0);if(Ro===t)throw new Error("AUR0207");Lo.push(t),Ro=t,Mo=!0}function No(t){if(null==t)throw new Error("AUR0208");if(Ro!==t)throw new Error("AUR0209");Lo.pop(),Ro=Lo.length>0?Lo[Lo.length-1]:null,Mo=null!=Ro}const Bo=Object.freeze({get current(){return Ro},get connecting(){return Mo},enter:Uo,exit:No,pause:function(){Mo=!1},resume:function(){Mo=!0}}),Fo=Reflect.get,Vo=Object.prototype.toString,Do=new WeakMap;function zo(t){switch(Vo.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const qo="__raw__";function Ho(t){return zo(t)?Zo(t):t}function Zo(t){var e;return null!==(e=Do.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?Go:t instanceof Map||t instanceof Set?ya:Qo,n=new Proxy(t,e);return Do.set(t,n),n}(t)}function Wo(t){var e;return null!==(e=t[qo])&&void 0!==e?e:t}function Ko(t){return zo(t)&&t[qo]||t}function _o(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const Qo={get(t,e,n){if(e===qo)return t;const i=jo();return!Mo||_o(e)||null==i?Fo(t,e,n):(i.observe(t,e),Ho(Fo(t,e,n)))}},Go={get(t,e,n){if(e===qo)return t;const i=jo();if(!Mo||_o(e)||null==i)return Fo(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return Xo;case"includes":return ta;case"indexOf":return ea;case"lastIndexOf":return na;case"every":return Yo;case"filter":return Jo;case"find":return sa;case"findIndex":return ia;case"flat":return ra;case"flatMap":return oa;case"join":return aa;case"push":return ca;case"pop":return la;case"reduce":return ma;case"reduceRight":return ba;case"reverse":return pa;case"shift":return ha;case"unshift":return ua;case"slice":return va;case"splice":return da;case"some":return fa;case"sort":return ga;case"keys":return Ta;case"values":case Symbol.iterator:return $a;case"entries":return Ia}return i.observe(t,e),Ho(Fo(t,e,n))},ownKeys(t){var e;return null===(e=jo())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function Xo(t,e){var n;const i=Wo(this),s=i.map(((n,i)=>Ko(t.call(e,Ho(n),i,this))));return null===(n=jo())||void 0===n||n.observeCollection(i),Ho(s)}function Yo(t,e){var n;const i=Wo(this),s=i.every(((n,i)=>t.call(e,Ho(n),i,this)));return null===(n=jo())||void 0===n||n.observeCollection(i),s}function Jo(t,e){var n;const i=Wo(this),s=i.filter(((n,i)=>Ko(t.call(e,Ho(n),i,this))));return null===(n=jo())||void 0===n||n.observeCollection(i),Ho(s)}function ta(t){var e;const n=Wo(this),i=n.includes(Ko(t));return null===(e=jo())||void 0===e||e.observeCollection(n),i}function ea(t){var e;const n=Wo(this),i=n.indexOf(Ko(t));return null===(e=jo())||void 0===e||e.observeCollection(n),i}function na(t){var e;const n=Wo(this),i=n.lastIndexOf(Ko(t));return null===(e=jo())||void 0===e||e.observeCollection(n),i}function ia(t,e){var n;const i=Wo(this),s=i.findIndex(((n,i)=>Ko(t.call(e,Ho(n),i,this))));return null===(n=jo())||void 0===n||n.observeCollection(i),s}function sa(t,e){var n;const i=Wo(this),s=i.find(((e,n)=>t(Ho(e),n,this)),e);return null===(n=jo())||void 0===n||n.observeCollection(i),Ho(s)}function ra(){var t;const e=Wo(this);return null===(t=jo())||void 0===t||t.observeCollection(e),Ho(e.flat())}function oa(t,e){var n;const i=Wo(this);return null===(n=jo())||void 0===n||n.observeCollection(i),Zo(i.flatMap(((n,i)=>Ho(t.call(e,Ho(n),i,this)))))}function aa(t){var e;const n=Wo(this);return null===(e=jo())||void 0===e||e.observeCollection(n),n.join(t)}function la(){return Ho(Wo(this).pop())}function ca(...t){return Wo(this).push(...t)}function ha(){return Ho(Wo(this).shift())}function ua(...t){return Wo(this).unshift(...t)}function da(...t){return Ho(Wo(this).splice(...t))}function pa(...t){var e;const n=Wo(this),i=n.reverse();return null===(e=jo())||void 0===e||e.observeCollection(n),Ho(i)}function fa(t,e){var n;const i=Wo(this),s=i.some(((n,i)=>Ko(t.call(e,Ho(n),i,this))));return null===(n=jo())||void 0===n||n.observeCollection(i),s}function ga(t){var e;const n=Wo(this),i=n.sort(t);return null===(e=jo())||void 0===e||e.observeCollection(n),Ho(i)}function va(t,e){var n;const i=Wo(this);return null===(n=jo())||void 0===n||n.observeCollection(i),Zo(i.slice(t,e))}function ma(t,e){var n;const i=Wo(this),s=i.reduce(((e,n,i)=>t(e,Ho(n),i,this)),e);return null===(n=jo())||void 0===n||n.observeCollection(i),Ho(s)}function ba(t,e){var n;const i=Wo(this),s=i.reduceRight(((e,n,i)=>t(e,Ho(n),i,this)),e);return null===(n=jo())||void 0===n||n.observeCollection(i),Ho(s)}const ya={get(t,e,n){if(e===qo)return t;const i=jo();if(!Mo||_o(e)||null==i)return Fo(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Aa;case"delete":return Ea;case"forEach":return wa;case"add":if(t instanceof Set)return Ca;break;case"get":if(t instanceof Map)return ka;break;case"set":if(t instanceof Map)return Sa;break;case"has":return xa;case"keys":return Ta;case"values":return $a;case"entries":return Ia;case Symbol.iterator:return t instanceof Map?Ia:$a}return Ho(Fo(t,e,n))}};function wa(t,e){var n;const i=Wo(this);return null===(n=jo())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,Ho(n),Ho(i),this)}))}function xa(t){var e;const n=Wo(this);return null===(e=jo())||void 0===e||e.observeCollection(n),n.has(Ko(t))}function ka(t){var e;const n=Wo(this);return null===(e=jo())||void 0===e||e.observeCollection(n),Ho(n.get(Ko(t)))}function Sa(t,e){return Ho(Wo(this).set(Ko(t),Ko(e)))}function Ca(t){return Ho(Wo(this).add(Ko(t)))}function Aa(){return Ho(Wo(this).clear())}function Ea(t){return Ho(Wo(this).delete(Ko(t)))}function Ta(){var t;const e=Wo(this);null===(t=jo())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Ho(e),done:i}},[Symbol.iterator](){return this}}}function $a(){var t;const e=Wo(this);null===(t=jo())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Ho(e),done:i}},[Symbol.iterator](){return this}}}function Ia(){var t;const e=Wo(this);null===(t=jo())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[Ho(e[0]),Ho(e[1])],done:i}},[Symbol.iterator](){return this}}}const Oa=Object.freeze({getProxy:Zo,getRaw:Wo,wrap:Ho,unwrap:Ko,rawKey:qo});class Pa{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new Pa(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,xi(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!ki(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){Ra=this.ov,this.ov=this.v,this.subs.notify(this.v,Ra,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return Uo(this),this.v=Ko(this.get.call(this.up?Ho(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,No(this)}}}let Ra;Xr(Pa),Ns(Pa),qs(Pa);const La=cn.createInterface("IDirtyChecker",(t=>t.singleton(Ua))),Ma={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},ja={persistent:!0};class Ua{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(Ma.disabled)return;if(++this.j<Ma.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(Ma.throw)throw new Error(`AUR0222:${e}`);return new Na(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,ja))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}Ua.inject=[Kn],qs(Ua);class Na{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}Ns(Na);class Ba{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Fa{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}}let Va;class Da{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){Va=this.ov,this.ov=this.v,this.subs.notify(this.v,Va,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],xi(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(xi(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class za{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=ki(n);const s=t[e];this.cb=ki(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){Va=this.ov,this.ov=this.v,this.subs.notify(this.v,Va,this.f)}}Ns(Da),Ns(za),qs(Da),qs(za);const qa=new Fa,Ha=cn.createInterface("IObserverLocator",(t=>t.singleton(Ka))),Za=cn.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(ei).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new Wa)))));class Wa{handles(){return!1}getObserver(){return qa}getAccessor(){return qa}}class Ka{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):qa}getArrayObserver(t){return br(t)}getMapObserver(t){return Vr(t)}getSetObserver(t){return Ir(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new Ba(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return br(t).getLengthObserver();break;case"size":if(t instanceof Map)return Vr(t).getLengthObserver();if(t instanceof Set)return Ir(t).getLengthObserver();break;default:if(t instanceof Array&&$e(e))return br(t).getIndexObserver(Number(e))}let o=Qa(t,e);if(void 0===o){let n=_a(t);for(;null!==n&&(o=Qa(n,e),void 0===o);)n=_a(n)}if(void 0!==o&&!wi.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?Pa.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new Da(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(xi(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}Ka.inject=[La,Za];const _a=Object.getPrototypeOf,Qa=Object.getOwnPropertyDescriptor;cn.createInterface("IObservation",(t=>t.singleton(Ga)));class Ga{constructor(t){this.oL=t}static get inject(){return[Ha]}run(t){const e=new Xa(this.oL,t);return e.run(),e}}class Xa{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Uo(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,No(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}Xr(Xa);const Ya=new Map;function Ja(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}class tl{constructor(t,e={}){var n,i,s,r,o,a,l,c,h,u,d,p,f;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,this.decodeURI="decodeURI"in e?e.decodeURI:t.decodeURI,this.decodeURIComponent="decodeURIComponent"in e?e.decodeURIComponent:t.decodeURIComponent,this.encodeURI="encodeURI"in e?e.encodeURI:t.encodeURI,this.encodeURIComponent="encodeURIComponent"in e?e.encodeURIComponent:t.encodeURIComponent,this.Date="Date"in e?e.Date:t.Date,this.Reflect="Reflect"in e?e.Reflect:t.Reflect,this.clearInterval="clearInterval"in e?e.clearInterval:null!==(i=null===(n=t.clearInterval)||void 0===n?void 0:n.bind(t))&&void 0!==i?i:Ja("clearInterval"),this.clearTimeout="clearTimeout"in e?e.clearTimeout:null!==(r=null===(s=t.clearTimeout)||void 0===s?void 0:s.bind(t))&&void 0!==r?r:Ja("clearTimeout"),this.queueMicrotask="queueMicrotask"in e?e.queueMicrotask:null!==(a=null===(o=t.queueMicrotask)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:Ja("queueMicrotask"),this.setInterval="setInterval"in e?e.setInterval:null!==(c=null===(l=t.setInterval)||void 0===l?void 0:l.bind(t))&&void 0!==c?c:Ja("setInterval"),this.setTimeout="setTimeout"in e?e.setTimeout:null!==(u=null===(h=t.setTimeout)||void 0===h?void 0:h.bind(t))&&void 0!==u?u:Ja("setTimeout"),this.console="console"in e?e.console:t.console,this.performanceNow="performanceNow"in e?e.performanceNow:null!==(f=null===(p=null===(d=t.performance)||void 0===d?void 0:d.now)||void 0===p?void 0:p.bind(t.performance))&&void 0!==f?f:Ja("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new nl(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let n=Ya.get(t);return void 0===n&&Ya.set(t,n=new tl(t,e)),n}static set(t,e){Ya.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}function el(t){return t.persistent}class nl{constructor(t,e,n){this.platform=t,this.$request=e,this.$cancel=n,this.t=void 0,this.i=0,this.processing=[],this.pending=[],this.delayed=[],this.flushRequested=!1,this.h=void 0,this.taskPool=[],this.u=0,this.T=0,this.$=0,this.I=()=>{this.flushRequested||(this.flushRequested=!0,this.T=this.platform.performanceNow(),this.$request())},this.M=new ll(t.console)}get isEmpty(){return 0===this.i&&0===this.processing.length&&0===this.pending.length&&0===this.delayed.length}get P(){return 0===this.i&&this.processing.every(el)&&this.pending.every(el)&&this.delayed.every(el)}flush(t=this.platform.performanceNow()){if(this.flushRequested=!1,this.$=t,void 0===this.t){if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}let e;for(;this.processing.length>0;)if((e=this.processing.shift()).run(),1===e.status){if(!0===e.suspend)return this.t=e,void this.I();++this.i}if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}if((this.processing.length>0||this.delayed.length>0||this.i>0)&&this.I(),void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}}else this.I()}cancel(){this.flushRequested&&(this.$cancel(),this.flushRequested=!1)}async yield(){this.isEmpty||(void 0===this.h&&(this.h=pl()),await this.h)}queueTask(t,e){const{delay:n,preempt:i,persistent:s,reusable:r,suspend:o}={...cl,...e};if(i){if(n>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(s)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}0===this.processing.length&&this.I();const a=this.platform.performanceNow();let l;if(r){const e=this.taskPool,c=this.u-1;c>=0?(l=e[c],e[c]=void 0,this.u=c,l.reuse(a,n,i,s,o,t)):l=new al(this.M,this,a,a+n,i,s,o,r,t)}else l=new al(this.M,this,a,a+n,i,s,o,r,t);return i?this.processing[this.processing.length]=l:0===n?this.pending[this.pending.length]=l:this.delayed[this.delayed.length]=l,l}remove(t){let e=this.processing.indexOf(t);if(e>-1)this.processing.splice(e,1);else if(e=this.pending.indexOf(t),e>-1)this.pending.splice(e,1);else{if(e=this.delayed.indexOf(t),!(e>-1))throw new Error(`Task #${t.id} could not be found`);this.delayed.splice(e,1)}}returnToPool(t){this.taskPool[this.u++]=t}resetPersistentTask(t){t.reset(this.platform.performanceNow()),t.createdTime===t.queueTime?this.pending[this.pending.length]=t:this.delayed[this.delayed.length]=t}completeAsyncTask(t){var e;if(!0===t.suspend){if(this.t!==t)throw new Error(`Async task completion mismatch: suspenderTask=${null===(e=this.t)||void 0===e?void 0:e.id}, task=${t.id}`);this.t=void 0}else--this.i;if(void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class il extends Error{constructor(t){super("Task was canceled."),this.task=t}}let sl=0;var rl,ol;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(rl||(rl={}));class al{constructor(t,e,n,i,s,r,o,a,l){this.taskQueue=e,this.createdTime=n,this.queueTime=i,this.preempt=s,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=l,this.id=++sl,this.R=void 0,this.A=void 0,this.q=void 0,this.C=0,this.M=t}get result(){const t=this.q;if(void 0===t)switch(this.C){case 0:{const t=this.q=pl();return this.R=t.resolve,this.A=t.reject,t}case 1:throw new Error("Trying to await task from within task will cause a deadlock.");case 2:return this.q=Promise.resolve();case 3:return this.q=Promise.reject(new il(this))}return t}get status(){return this.C}run(t=this.taskQueue.platform.performanceNow()){if(0!==this.C)throw new Error(`Cannot run task in ${this.C} state`);const{persistent:e,reusable:n,taskQueue:i,callback:s,R:r,A:o,createdTime:a}=this;let l;this.C=1;try{l=s(t-a),l instanceof Promise?l.then((t=>{this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),i.completeAsyncTask(this),void 0!==r&&r(t),!this.persistent&&n&&i.returnToPool(this)})).catch((t=>{if(this.persistent||this.dispose(),i.completeAsyncTask(this),void 0===o)throw t;o(t)})):(this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),void 0!==r&&r(l),!this.persistent&&n&&i.returnToPool(this))}catch(t){if(this.persistent||this.dispose(),void 0===o)throw t;o(t)}}cancel(){if(0===this.C){const t=this.taskQueue,e=this.reusable,n=this.A;return t.remove(this),t.isEmpty&&t.cancel(),this.C=3,this.dispose(),e&&t.returnToPool(this),void 0!==n&&n(new il(this)),!0}return!(1!==this.C||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.C=0,this.R=void 0,this.A=void 0,this.q=void 0}reuse(t,e,n,i,s,r){this.createdTime=t,this.queueTime=t+e,this.preempt=n,this.persistent=i,this.suspend=s,this.callback=r,this.C=0}dispose(){this.callback=void 0,this.R=void 0,this.A=void 0,this.q=void 0}}class ll{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,n){if(e instanceof nl){const i=`processing=${e.processing.length} pending=${e.pending.length} delayed=${e.delayed.length} flushReq=${e.flushRequested} susTask=${!!e.t}`;this.console.log(`${t}[Q.${n}] ${i}`)}else{const i=e.id,s=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,l=e.persistent,c=e.suspend,h=function(t){switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}}(e.C),u=`id=${i} created=${s} queue=${r} preempt=${o} persistent=${l} reusable=${a} status=${h} suspend=${c}`;this.console.log(`${t}[T.${n}] ${u}`)}}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(ol||(ol={}));const cl={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let hl,ul;function dl(t,e){hl=t,ul=e}function pl(){const t=new Promise(dl);return t.resolve=hl,t.reject=ul,t}const fl=new Map;class gl extends tl{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver,window,document,location,history,navigator,customElements".split(",").forEach((n=>{this[n]=n in e?e[n]:t[n]})),"fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((n=>{var i,s;this[n]=n in e?e[n]:null!==(s=null===(i=t[n])||void 0===i?void 0:i.bind(t))&&void 0!==s?s:function(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}(n)})),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new nl(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new nl(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let n=fl.get(t);return void 0===n&&fl.set(t,n=new gl(t,e)),n}static set(t,e){fl.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}function vl(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function ml(t,e){return function(n,i){e(n,i,t)}}const bl=me.getOwn,yl=me.hasOwn,wl=me.define,{annotation:xl,resource:kl}=Je,Sl=xl.keyFor,Cl=kl.keyFor,Al=kl.appendTo,El=xl.appendTo,Tl=xl.getKeys,$l=()=>Object.create(null),Il=Object.prototype.hasOwnProperty,Ol=$l(),Pl=(t,e,n)=>{if(!0===Ol[e])return!0;if(!Ml(e))return!1;const i=e.slice(0,5);return Ol[e]="aria-"===i||"data-"===i||n.isStandardSvgAttribute(t,e)},Rl=t=>t instanceof Promise,Ll=t=>"function"==typeof t,Ml=t=>"string"==typeof t,jl=Object.defineProperty,Ul=t=>{throw t};function Nl(t,e){let n;function i(t,e){arguments.length>1&&(n.property=e),wl(Fl,Dl.create(e,t,n),t.constructor,e),El(t.constructor,Vl.keyFrom(e))}return arguments.length>1?(n={},void i(t,e)):Ml(t)?(n={},i):(n=void 0===t?{}:t,i)}function Bl(t){return t.startsWith(Fl)}const Fl=Sl("bindable"),Vl=Object.freeze({name:Fl,keyFrom:t=>`${Fl}:${t}`,from(t,...e){const n={},i=Array.isArray;function s(e){n[e]=Dl.create(e,t)}function r(e,i){n[e]=i instanceof Dl?i:Dl.create(e,t,i)}return e.forEach((function(t){i(t)?t.forEach(s):t instanceof Dl?n[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>r(e,t[e])))})),n},for(t){let e;const n={add(i){let s,r;return Ml(i)?(s=i,r={property:s}):(s=i.property,r=i),e=Dl.create(s,t,r),yl(Fl,t,s)||El(t,Vl.keyFrom(s)),wl(Fl,e,t,s),n},mode:t=>(e.mode=t,n),callback:t=>(e.callback=t,n),attribute:t=>(e.attribute=t,n),primary:()=>(e.primary=!0,n),set:t=>(e.set=t,n)};return n},getAll(t){const e=Fl.length+1,n=[],i=ze(t);let s,r,o,a,l=i.length,c=0;for(;--l>=0;)for(o=i[l],s=Tl(o).filter(Bl),r=s.length,a=0;a<r;++a)n[c++]=bl(Fl,o,s[a].slice(e));return n}});class Dl{constructor(t,e,n,i,s,r){this.attribute=t,this.callback=e,this.mode=n,this.primary=i,this.property=s,this.set=r}static create(t,e,n={}){return new Dl(De(n.attribute,Me(t)),De(n.callback,`${t}Changed`),De(n.mode,Os.toView),De(n.primary,!1),De(n.property,t),De(n.set,function(t,e,n={}){var i,s,r;const o=null!==(s=null!==(i=n.type)&&void 0!==i?i:Reflect.getMetadata("design:type",e,t))&&void 0!==s?s:null;if(null==o)return Wn;let a;switch(o){case Number:case Boolean:case String:case BigInt:a=o;break;default:{const t=o.coerce;a="function"==typeof t?t.bind(o):null!==(r=zl.for(o))&&void 0!==r?r:Wn;break}}return a===Wn?a:function(t,e){return function(n,i){var s;return(null==i?void 0:i.enableCoercion)?(null!=e?e:null===(s=null==i?void 0:i.coerceNullish)||void 0===s||!s)&&null==n?n:t(n,i):n}}(a,n.nullable)}(t,e,n)))}}const zl={key:Sl("coercer"),define(t,e){wl(zl.key,t[e].bind(t),t)},for:t=>bl(zl.key,t)};class ql{constructor(t,e,n,i,s,r){this.set=i,this.$controller=s,this.t=r,this.v=void 0,this.ov=void 0,this.f=0;const o=t[n],a=t.propertyChanged,l=this.i=Ll(o),c=this.u=Ll(a),h=this.hs=i!==Wn;let u;this.o=t,this.k=e,this.cb=l?o:Wn,this.C=c?a:Wn,void 0!==this.cb||c||h?(this.iO=!0,u=t[e],this.v=h&&void 0!==u?i(u,this.t):u,this.A()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t,e){this.hs&&(t=this.set(t,this.t));const n=this.v;if(this.iO){if(Object.is(t,n))return;this.v=t,this.ov=n,this.f=e,(null==this.$controller||this.$controller.isBound)&&(this.i&&this.cb.call(this.o,t,n,e),this.u&&this.C.call(this.o,this.k,t,n,e)),this.queue.add(this)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.t):this.o[this.k],this.A()),this.subs.add(t)}flush(){Hl=this.ov,this.ov=this.v,this.subs.notify(this.v,Hl,this.f)}A(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t,0)}})}}let Hl;Ns(ql),qs(ql);class Zl{constructor(t,e,n,i){if(this.chars=t,this.repeat=e,this.isSymbol=n,this.isInverted=i,i)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.B;break;default:this.has=this.I}else switch(t.length){case 0:this.has=this.T;break;case 1:this.has=this.P;break;default:this.has=this.$}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}$(t){return this.chars.includes(t)}P(t){return this.chars===t}T(t){return!1}I(t){return!this.chars.includes(t)}B(t){return this.chars!==t}R(t){return!0}}class Wl{constructor(){this.parts=Hn,this.O="",this.L={},this.q={}}get pattern(){const t=this.O;return""===t?null:t}set pattern(t){null==t?(this.O="",this.parts=Hn):(this.O=t,this.parts=this.q[t])}append(t,e){const n=this.L;void 0===n[t]?n[t]=e:n[t]+=e}next(t){const e=this.L;let n;void 0!==e[t]&&(n=this.q,void 0===n[t]?n[t]=[e[t]]:n[t].push(e[t]),e[t]=void 0)}}class Kl{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,n=e.length;let i=null,s=0;for(;s<n;++s)if(i=e[s],t.equals(i.charSpec))return i;return null}append(t,e){const n=this.patterns;n.includes(e)||n.push(e);let i=this.findChild(t);return null==i&&(i=new Kl(t,e),this.nextStates.push(i),t.repeat&&i.nextStates.push(i)),i}findMatches(t,e){const n=[],i=this.nextStates,s=i.length;let r=0,o=null,a=0,l=0;for(;a<s;++a)if(o=i[a],o.charSpec.has(t))if(n.push(o),r=o.patterns.length,l=0,o.charSpec.isSymbol)for(;l<r;++l)e.next(o.patterns[l]);else for(;l<r;++l)e.append(o.patterns[l],t);return n}}class _l{constructor(t){this.text=t;const e=this.len=t.length,n=this.specs=[];let i=0;for(;e>i;++i)n.push(new Zl(t[i],!1,!1,!1))}eachChar(t){const e=this.len,n=this.specs;let i=0;for(;e>i;++i)t(n[i])}}class Ql{constructor(t){this.text="PART",this.spec=new Zl(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class Gl{constructor(t){this.text=t,this.spec=new Zl(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class Xl{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Yl=cn.createInterface("ISyntaxInterpreter",(t=>t.singleton(Jl)));class Jl{constructor(){this.rootState=new Kl(null),this.initialStates=[this.rootState]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let n,i,s,r,o,a,l,c,h=0;for(;e>h;){for(n=this.rootState,i=t[h],s=i.pattern,r=new Xl,o=this.parse(i,r),a=o.length,l=t=>{n=n.append(t,s)},c=0;a>c;++c)o[c].eachChar(l);n.types=r,n.isEndpoint=!0,++h}}interpret(t){const e=new Wl,n=t.length;let i,s=this.initialStates,r=0;for(;r<n&&(s=this.getNextStates(s,t.charAt(r),e),0!==s.length);++r);return s=s.filter(tc),s.length>0&&(s.sort(ec),i=s[0],i.charSpec.isSymbol||e.next(i.pattern),e.pattern=i.pattern),e}getNextStates(t,e,n){const i=[];let s=null;const r=t.length;let o=0;for(;o<r;++o)s=t[o],i.push(...s.findMatches(e,n));return i}parse(t,e){const n=[],i=t.pattern,s=i.length,r=t.symbols;let o=0,a=0,l="";for(;o<s;)l=i.charAt(o),0!==r.length&&r.includes(l)?o!==a?(n.push(new _l(i.slice(a,o))),++e.statics,a=o):(n.push(new Gl(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===l&&"PART"===i.slice(o,o+4)?(a=o+=4,n.push(new Ql(r)),++e.dynamics):++o;return a!==o&&(n.push(new _l(i.slice(a,o))),++e.statics),n}}function tc(t){return t.isEndpoint}function ec(t,e){const n=t.types,i=e.types;return n.statics!==i.statics?i.statics-n.statics:n.dynamics!==i.dynamics?i.dynamics-n.dynamics:n.symbols!==i.symbols?i.symbols-n.symbols:0}class nc{constructor(t,e,n,i){this.rawName=t,this.rawValue=e,this.target=n,this.command=i}}const ic=cn.createInterface("IAttributePattern"),sc=cn.createInterface("IAttributeParser",(t=>t.singleton(rc)));class rc{constructor(t,e){this.U={},this._=t;const n=this.F={},i=e.reduce(((t,e)=>{const i=hc(e.constructor);return i.forEach((t=>n[t.pattern]=e)),t.concat(i)}),Hn);t.add(i)}parse(t,e){let n=this.U[t];null==n&&(n=this.U[t]=this._.interpret(t));const i=n.pattern;return null==i?new nc(t,e,t,null):this.F[i][i](t,e,n.parts)}}function oc(...t){return function(e){return uc.define(t,e)}}rc.inject=[Yl,yn(ic)];class ac{constructor(t){this.Type=t,this.name=void 0}register(t){Fn.singleton(ic,this.Type).register(t)}}const lc=Cl("attribute-pattern"),cc="attribute-pattern-definitions",hc=t=>Je.annotation.get(t,cc),uc=Object.freeze({name:lc,definitionAnnotationKey:cc,define(t,e){const n=new ac(e);return wl(lc,n,e),Al(e,lc),Je.annotation.set(e,cc,t),El(e,cc),e},getPatternDefinitions:hc});let dc=class{"PART.PART"(t,e,n){return new nc(t,e,n[0],n[1])}"PART.PART.PART"(t,e,n){return new nc(t,e,n[0],n[2])}};dc=vl([oc({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],dc);let pc=class{ref(t,e,n){return new nc(t,e,"element","ref")}"PART.ref"(t,e,n){return new nc(t,e,n[0],"ref")}};pc=vl([oc({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],pc);let fc=class{":PART"(t,e,n){return new nc(t,e,n[0],"bind")}};fc=vl([oc({pattern:":PART",symbols:":"})],fc);let gc=class{"@PART"(t,e,n){return new nc(t,e,n[0],"trigger")}};gc=vl([oc({pattern:"@PART",symbols:"@"})],gc);let vc=class{"...$attrs"(t,e,n){return new nc(t,e,"","...$attrs")}};vc=vl([oc({pattern:"...$attrs",symbols:""})],vc);const mc=Kn,bc=cn.createInterface("ISVGAnalyzer",(t=>t.singleton(yc)));class yc{isStandardSvgAttribute(t,e){return!1}}const wc=cn.createInterface("IAttrMapper",(t=>t.singleton(xc)));class xc{constructor(t){this.svg=t,this.fns=[],this.N=$l(),this.W=$l(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[bc]}useMapping(t){var e,n;let i,s,r,o;for(r in t)for(o in i=t[r],s=null!==(e=(n=this.N)[r])&&void 0!==e?e:n[r]=$l(),i){if(void 0!==s[o])throw kc(o,r);s[o]=i[o]}}useGlobalMapping(t){const e=this.W;for(const n in t){if(void 0!==e[n])throw kc(n,"*");e[n]=t[n]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((n=>n(t,e)))}map(t,e){var n,i,s;return null!==(s=null!==(i=null===(n=this.N[t.nodeName])||void 0===n?void 0:n[e])&&void 0!==i?i:this.W[e])&&void 0!==s?s:Pl(t,e,this.svg)?e:null}}function kc(t,e){return new Error(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}class Sc{constructor(t,e,n,i,s){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=s,this.interceptor=this,this.isBound=!1,this.targetObserver=i.getAccessor(e,n)}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(e,"$event"),n}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.targetObserver.setValue((t=>this.interceptor.callSource(t)),t,this.target,this.targetProperty),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t,this.target,this.targetProperty),this.isBound=!1)}observe(t,e){}handleChange(t,e,n){}}class Cc{constructor(t,e,n){this.type=7,this.v=null,this.ov=null,this.H=!1,this.f=0,this.o=t,this.G=e,this.X=n}getValue(){return this.v}setValue(t,e){this.v=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H)switch(this.H=!1,this.ov=this.v,this.X){case"class":this.o.classList.toggle(this.G,!!this.v);break;case"style":{let t="",e=this.v;Ml(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.G,e,t);break}default:null==this.v?this.o.removeAttribute(this.X):this.o.setAttribute(this.X,String(this.v))}}handleMutation(t){let e=!1;for(let n=0,i=t.length;i>n;++n){const i=t[n];if("attributes"===i.type&&i.attributeName===this.G){e=!0;break}}if(e){let t;switch(this.X){case"class":t=this.o.classList.contains(this.G);break;case"style":t=this.o.style.getPropertyValue(this.G);break;default:throw new Error(`AUR0651:${this.X}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.H=!1,this.f=0,this.queue.add(this))}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.G),Ac(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&Ec(this.o,this)}flush(){Ic=this.ov,this.ov=this.v,this.subs.notify(this.v,Ic,this.f)}}Ns(Cc),qs(Cc);const Ac=(t,e,n)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(Tc)).observe(e,{attributes:!0}),e.$eMObs.add(n)},Ec=(t,e)=>{const n=t.$eMObs;return!(!n||!n.delete(e)||(0===n.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},Tc=t=>{t[0].target.$eMObs.forEach($c,t)};function $c(t){t.handleMutation(this)}let Ic;class Oc{constructor(t){this.b=t}handleChange(t,e,n){const i=this.b;t!==i.sourceExpression.evaluate(n,i.$scope,i.locator,null)&&i.updateSource(t,n)}}const{oneTime:Pc,toView:Rc,fromView:Lc}=Os,Mc=Rc|Pc,jc={reusable:!1,preempt:!0};class Uc{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.targetAttribute=n,this.targetProperty=i,this.mode=s,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=e,this.p=o.get(mc),this.oL=r}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;n|=this.persistentFlags;const i=this.mode,s=this.interceptor,r=this.sourceExpression,o=this.$scope,a=this.locator,l=this.targetObserver,c=0==(2&n)&&(4&l.type)>0;let h,u=!1;(10082!==r.$kind||this.obs.count>1)&&(u=0==(i&Pc),u&&this.obs.version++,t=r.evaluate(n,o,a,s),u&&this.obs.clear()),t!==this.value&&(this.value=t,c?(h=this.task,this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,s.updateTarget(t,n)}),jc),null==h||h.cancel()):s.updateTarget(t,n))}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);let s=this.targetObserver;s||(s=this.targetObserver=new Cc(this.target,this.targetProperty,this.targetAttribute)),i=this.sourceExpression;const r=this.mode,o=this.interceptor;let a=!1;r&Mc&&(a=(r&Rc)>0,o.updateTarget(this.value=i.evaluate(t,e,this.locator,a?o:null),t)),r&Lc&&s.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new Oc(o)),this.isBound=!0}$unbind(t){var e;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.obs.clearAll(),this.isBound=!1)}}Xr(Uc);const{toView:Nc}=Os,Bc={reusable:!1,preempt:!0};class Fc{constructor(t,e,n,i,s,r,o){this.interpolation=e,this.target=n,this.targetProperty=i,this.mode=s,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.oL=t,this.targetObserver=t.getAccessor(n,i);const a=e.expressions,l=this.partBindings=Array(a.length),c=a.length;let h=0;for(;c>h;++h)l[h]=new Vc(a[h],n,i,r,t,this)}updateTarget(t,e){const n=this.partBindings,i=this.interpolation.parts,s=n.length;let r="",o=0;if(1===s)r=i[0]+n[0].value+i[1];else for(r=i[0];s>o;++o)r+=n[o].value+i[o+1];const a=this.targetObserver;let l;0==(2&e)&&(4&a.type)>0?(l=this.task,this.task=this.taskQueue.queueTask((()=>{this.task=null,a.setValue(r,e,this.target,this.targetProperty)}),Bc),null==l||l.cancel(),l=null):a.setValue(r,e,this.target,this.targetProperty)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].$bind(t,e);this.updateTarget(void 0,t)}$unbind(t){var e;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].interceptor.$unbind(t);null===(e=this.task)||void 0===e||e.cancel(),this.task=null}}class Vc{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=i,this.owner=r,this.interceptor=this,this.mode=Os.toView,this.value="",this.task=null,this.isBound=!1,this.oL=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.sourceExpression,s=this.obs;let r=!1;10082===i.$kind&&1===s.count||(r=(this.mode&Nc)>0,r&&s.version++,t=i.evaluate(n,this.$scope,this.locator,r?this.interceptor:null),r&&s.clear()),t!=this.value&&(this.value=t,t instanceof Array&&this.observeCollection(t),this.owner.updateTarget(t,n))}handleCollectionChange(t,e){this.owner.updateTarget(void 0,e)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&Nc)>0?this.interceptor:null),this.value instanceof Array&&this.observeCollection(this.value)}$unbind(t){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll())}}Xr(Vc);class Dc{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.locator=n,this.p=s,this.strict=r,this.interceptor=this,this.mode=Os.toView,this.value="",this.task=null,this.isBound=!1,this.oL=i}updateTarget(t,e){var n,i;const s=this.target,r=this.p.Node,o=this.value;this.value=t,o instanceof r&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o)),t instanceof r?(s.textContent="",null===(i=s.parentNode)||void 0===i||i.insertBefore(t,s)):s.textContent=String(t)}handleChange(t,e,n){var i;if(!this.isBound)return;const s=this.sourceExpression,r=this.obs;let o=!1;if(10082===s.$kind&&1===r.count||(o=(this.mode&Nc)>0,o&&r.version++,n|=this.strict?1:0,t=s.evaluate(n,this.$scope,this.locator,o?this.interceptor:null),o&&r.clear()),t===this.value)return null===(i=this.task)||void 0===i||i.cancel(),void(this.task=null);0==(2&n)?this.queueUpdate(t,n):this.updateTarget(t,n)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),t|=this.strict?1:0;const n=this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&Nc)>0?this.interceptor:null);n instanceof Array&&this.observeCollection(n),this.updateTarget(n,t)}$unbind(t){var e;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),null===(e=this.task)||void 0===e||e.cancel(),this.task=null)}queueUpdate(t,e){const n=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(t,e)}),Bc),null==n||n.cancel()}}Xr(Dc);class zc{constructor(t,e,n,i,s=!1){this.sourceExpression=t,this.targetProperty=e,this.locator=i,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.target=null,this.oL=n,this.Y=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.target,s=this.targetProperty,r=i[s];this.obs.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),this.obs.clear(),t!==r&&(i[s]=t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.target=this.Y?e.bindingContext:e.overrideContext;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|t,e,this.locator,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),this.isBound=!1}}Xr(zc);const{oneTime:qc,toView:Hc,fromView:Zc}=Os,Wc=Hc|qc,Kc={reusable:!1,preempt:!0};class _c{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.mode=i,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null,this.oL=s}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;const i=0==(2&(n|=this.persistentFlags))&&(4&this.targetObserver.type)>0,s=this.obs;let r=!1;(10082!==this.sourceExpression.$kind||s.count>1)&&(r=this.mode>qc,r&&s.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),r&&s.clear()),i?(Qc=this.task,this.task=this.taskQueue.queueTask((()=>{this.interceptor.updateTarget(t,n),this.task=null}),Kc),null==Qc||Qc.cancel(),Qc=null):this.interceptor.updateTarget(t,n)}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}t|=1,this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);const s=this.oL,r=this.mode;let o=this.targetObserver;o||(o=r&Zc?s.getObserver(this.target,this.targetProperty):s.getAccessor(this.target,this.targetProperty),this.targetObserver=o),i=this.sourceExpression;const a=this.interceptor,l=(r&Hc)>0;r&Wc&&a.updateTarget(i.evaluate(t,e,this.locator,l?a:null),t),r&Zc&&(o.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new Oc(a)),l||a.updateSource(o.getValue(this.target,this.targetProperty),t)),this.isBound=!0}$unbind(t){this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,Qc=this.task,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=Qc&&(Qc.cancel(),Qc=this.task=null),this.obs.clearAll(),this.isBound=!1)}}Xr(_c);let Qc=null;class Gc{constructor(t,e,n){this.sourceExpression=t,this.target=e,this.locator=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(t,this.$scope,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,null)===this.target&&e.assign(t,this.$scope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const Xc=cn.createInterface("IAppTask");class Yc{constructor(t,e,n){this.c=void 0,this.slot=t,this.k=e,this.cb=n}register(t){return this.c=t.register(Fn.instance(Xc,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const Jc=Object.freeze({beforeCreate:th("beforeCreate"),hydrating:th("hydrating"),hydrated:th("hydrated"),beforeActivate:th("beforeActivate"),afterActivate:th("afterActivate"),beforeDeactivate:th("beforeDeactivate"),afterDeactivate:th("afterDeactivate")});function th(t){return function(e,n){return Ll(n)?new Yc(t,e,n):new Yc(t,null,e)}}function eh(t){return t.startsWith(nh)}const nh=Sl("children-observer"),ih=Object.freeze({name:nh,keyFrom:t=>`${nh}:${t}`,from(...t){const e={},n=Array.isArray;function i(t){e[t]=rh.create(t)}function s(t,n){e[t]=rh.create(t,n)}return t.forEach((function(t){n(t)?t.forEach(i):t instanceof rh?e[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>s(e,t)))})),e},getAll(t){const e=nh.length+1,n=[],i=ze(t);let s,r,o,a=i.length,l=0;for(;--a>=0;){o=i[a],s=Tl(o).filter(eh),r=s.length;for(let t=0;t<r;++t)n[l++]=bl(nh,o,s[t].slice(e))}return n}}),sh={childList:!0};class rh{constructor(t,e,n,i,s,r){this.callback=t,this.property=e,this.options=n,this.query=i,this.filter=s,this.map=r}static create(t,e={}){var n;return new rh(De(e.callback,`${t}Changed`),De(e.property,t),null!==(n=e.options)&&void 0!==n?n:sh,e.query,e.filter,e.map)}}class oh{constructor(t,e,n,i,s=ah,r=lh,o=ch,a){this.controller=t,this.obj=e,this.propertyKey=n,this.query=s,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[i],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){var t;this.observing||(this.observing=!0,this.children=this.get(),(null!==(t=this.observer)&&void 0!==t?t:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.Z()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=Hn)}Z(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(t,e,n,i){var s;const r=e(t),o=r.length,a=[];let l,c,h,u=0;for(;u<o;++u)l=r[u],c=jh.for(l,hh),h=null!==(s=null==c?void 0:c.viewModel)&&void 0!==s?s:null,n(l,c,h)&&a.push(i(l,c,h));return a}(this.controller,this.query,this.filter,this.map)}}function ah(t){return t.host.childNodes}function lh(t,e,n){return!!n}function ch(t,e,n){return n}Ns()(oh);const hh={optional:!0};function uh(t){return function(e){return mh.define(t,e)}}function dh(t){return function(e){return mh.define(Ml(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class ph{constructor(t,e,n,i,s,r,o,a,l,c){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.defaultBindingMode=s,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=l,this.dependencies=c}get type(){return 2}static create(t,e){let n,i;return Ml(t)?(n=t,i={name:n}):(n=t.name,i=t),new ph(e,De(vh(e,"name"),n),Ve(vh(e,"aliases"),i.aliases,e.aliases),mh.keyFrom(n),De(vh(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,Os.toView),De(vh(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Vl.from(e,...Vl.getAll(e),vh(e,"bindables"),e.bindables,i.bindables),De(vh(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),Ve(wh.getAnnotation(e),e.watches),Ve(vh(e,"dependencies"),i.dependencies,e.dependencies))}register(t){const{Type:e,key:n,aliases:i}=this;Fn.transient(n,e).register(t),Fn.aliasTo(n,e).register(t),Li(i,mh,n,t)}}const fh=Cl("custom-attribute"),gh=t=>`${fh}:${t}`,vh=(t,e)=>bl(Sl(e),t),mh=Object.freeze({name:fh,keyFrom:gh,isType:t=>Ll(t)&&yl(fh,t),for(t,e){var n;return null!==(n=Gu(t,gh(e)))&&void 0!==n?n:void 0},define(t,e){const n=ph.create(t,e);return wl(fh,n,n.Type),wl(fh,n,n),Al(e,fh),n.Type},getDefinition(t){const e=bl(fh,t);if(void 0===e)throw new Error(`AUR0759:${t.name}`);return e},annotate(t,e,n){wl(Sl(e),n,t)},getAnnotation:vh}),bh=Hn,yh=Sl("watch"),wh=Object.freeze({name:yh,add(t,e){let n=bl(yh,t);null==n&&wl(yh,n=[],t),n.push(e)},getAnnotation(t){var e;return null!==(e=bl(yh,t))&&void 0!==e?e:bh}});function xh(t){return function(e){return jh.define(t,e)}}function kh(t){if(void 0===t)return function(t){Lh(t,"containerless",!0)};Lh(t,"containerless",!0)}const Sh=new WeakMap;class Ch{constructor(t,e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v,m,b,y,w){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.cache=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=g,this.shadowOptions=v,this.hasSlots=m,this.enhance=b,this.watches=y,this.processContent=w}get type(){return 1}static create(t,e=null){if(null===e){const n=t;if(Ml(n))throw new Error(`AUR0761:${t}`);const i=sn("name",n,Rh);return e=Ll(n.Type)?n.Type:jh.generateType(Le(i)),new Ch(e,i,Ve(n.aliases),sn("key",n,(()=>jh.keyFrom(i))),sn("cache",n,Eh),sn("capture",n,$h),sn("template",n,Th),Ve(n.instructions),Ve(n.dependencies),sn("injectable",n,Th),sn("needsCompile",n,Ih),Ve(n.surrogates),Vl.from(e,n.bindables),ih.from(n.childrenObservers),sn("containerless",n,$h),sn("isStrictBinding",n,$h),sn("shadowOptions",n,Th),sn("hasSlots",n,$h),sn("enhance",n,$h),sn("watches",n,Oh),nn("processContent",e,Th))}if(Ml(t))return new Ch(e,t,Ve(Mh(e,"aliases"),e.aliases),jh.keyFrom(t),nn("cache",e,Eh),nn("capture",e,$h),nn("template",e,Th),Ve(Mh(e,"instructions"),e.instructions),Ve(Mh(e,"dependencies"),e.dependencies),nn("injectable",e,Th),nn("needsCompile",e,Ih),Ve(Mh(e,"surrogates"),e.surrogates),Vl.from(e,...Vl.getAll(e),Mh(e,"bindables"),e.bindables),ih.from(...ih.getAll(e),Mh(e,"childrenObservers"),e.childrenObservers),nn("containerless",e,$h),nn("isStrictBinding",e,$h),nn("shadowOptions",e,Th),nn("hasSlots",e,$h),nn("enhance",e,$h),Ve(wh.getAnnotation(e),e.watches),nn("processContent",e,Th));const n=sn("name",t,Rh);return new Ch(e,n,Ve(Mh(e,"aliases"),t.aliases,e.aliases),jh.keyFrom(n),en("cache",t,e,Eh),en("capture",t,e,$h),en("template",t,e,Th),Ve(Mh(e,"instructions"),t.instructions,e.instructions),Ve(Mh(e,"dependencies"),t.dependencies,e.dependencies),en("injectable",t,e,Th),en("needsCompile",t,e,Ih),Ve(Mh(e,"surrogates"),t.surrogates,e.surrogates),Vl.from(e,...Vl.getAll(e),Mh(e,"bindables"),e.bindables,t.bindables),ih.from(...ih.getAll(e),Mh(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),en("containerless",t,e,$h),en("isStrictBinding",t,e,$h),en("shadowOptions",t,e,Th),en("hasSlots",t,e,$h),en("enhance",t,e,$h),Ve(t.watches,wh.getAnnotation(e),e.watches),en("processContent",t,e,Th))}static getOrCreate(t){if(t instanceof Ch)return t;if(Sh.has(t))return Sh.get(t);const e=Ch.create(t);return Sh.set(t,e),wl(Ph,e,e.Type),e}register(t){const{Type:e,key:n,aliases:i}=this;t.has(n,!1)||(Fn.transient(n,e).register(t),Fn.aliasTo(n,e).register(t),Li(i,jh,n,t))}}const Ah={name:void 0,searchParents:!1,optional:!1},Eh=()=>0,Th=()=>null,$h=()=>!1,Ih=()=>!0,Oh=()=>Hn,Ph=Cl("custom-element"),Rh=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),Lh=(t,e,n)=>{wl(Sl(e),n,t)},Mh=(t,e)=>bl(Sl(e),t),jh=Object.freeze({name:Ph,keyFrom:t=>`${Ph}:${t}`,isType:t=>Ll(t)&&yl(Ph,t),for(t,e=Ah){if(void 0===e.name&&!0!==e.searchParents){const n=Gu(t,Ph);if(null===n){if(!0===e.optional)return null;throw new Error("AUR0762")}return n}if(void 0!==e.name){if(!0!==e.searchParents){const n=Gu(t,Ph);if(null===n)throw new Error("AUR0763");return n.is(e.name)?n:void 0}let n=t,i=!1;for(;null!==n;){const t=Gu(n,Ph);if(null!==t&&(i=!0,t.is(e.name)))return t;n=id(n)}if(i)return;throw new Error("AUR0764")}let n=t;for(;null!==n;){const t=Gu(n,Ph);if(null!==t)return t;n=id(n)}throw new Error("AUR0765")},define(t,e){const n=Ch.create(t,e);return wl(Ph,n,n.Type),wl(Ph,n,n),Al(n.Type,Ph),n.Type},getDefinition(t){const e=bl(Ph,t);if(void 0===e)throw new Error(`AUR0760:${t.name}`);return e},annotate:Lh,getAnnotation:Mh,generateName:Rh,createInjectable(){const t=function(e,n,i){return cn.getOrCreateAnnotationParamTypes(e)[i]=t,e};return t.register=function(e){return{resolve:(e,n)=>n.has(t,!0)?n.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(n,i=e){const s=class{};return t.value=n,Reflect.defineProperty(s,"name",t),i!==e&&Object.assign(s.prototype,i),s}}()});Sl("processContent");class Uh{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.J={},this.tt=0,this.H=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H){this.H=!1;const t=this.value,e=this.J,n=Nh(t);let i=this.tt;if(this.ov=t,n.length>0&&this.it(n),this.tt+=1,0===i)return;i-=1;for(const t in e)Il.call(e,t)&&e[t]===i&&this.obj.classList.remove(t)}}it(t){const e=this.obj,n=t.length;let i,s=0;for(;s<n;s++)i=t[s],0!==i.length&&(this.J[i]=this.tt,e.classList.add(i))}}function Nh(t){if(Ml(t))return Bh(t);if("object"!=typeof t)return Hn;if(t instanceof Array){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...Nh(t[i]));return n}return Hn}const e=[];let n;for(n in t)Boolean(t[n])&&(n.includes(" ")?e.push(...Bh(n)):e.push(n));return e}function Bh(t){const e=t.match(/\S+/g);return null===e?Hn:e}cn.createInterface("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>qh.supported(t.get(mc))?t.get(Fh):t.get(Vh)))));class Fh{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new qh(this.p,t,this.cache,e)}}Fh.inject=[mc];class Vh{constructor(t){this.p=t}createStyles(t,e){return new Hh(this.p,t,e)}}Vh.inject=[mc];const Dh=cn.createInterface("IShadowDOMStyles"),zh=cn.createInterface("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:Wn})));class qh{constructor(t,e,n,i=null){this.sharedStyles=i,this.styleSheets=e.map((e=>{let i;return e instanceof t.CSSStyleSheet?i=e:(i=n.get(e),void 0===i&&(i=new t.CSSStyleSheet,i.replaceSync(e),n.set(e,i))),i}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class Hh{constructor(t,e,n=null){this.p=t,this.localStyles=e,this.sharedStyles=n}applyTo(t){const e=this.localStyles,n=this.p;for(let i=e.length-1;i>-1;--i){const s=n.document.createElement("style");s.innerHTML=e[i],t.prepend(s)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:Zh,exit:Wh}=Bo,{wrap:Kh,unwrap:_h}=Oa;class Qh{constructor(t,e,n,i,s){this.obj=t,this.get=n,this.cb=i,this.useProxy=s,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.value,n=this.compute();Object.is(n,e)||this.cb.call(t,n,e,t)}compute(){this.running=!0,this.obs.version++;try{return Zh(this),this.value=_h(this.get.call(void 0,this.useProxy?Kh(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,Wh(this)}}}class Gh{constructor(t,e,n,i,s){this.scope=t,this.locator=e,this.oL=n,this.expression=i,this.callback=s,this.interceptor=this,this.isBound=!1,this.obj=t.bindingContext}handleChange(t){const e=this.expression,n=this.obj,i=this.value;10082===e.$kind&&1===this.obs.count||(this.obs.version++,t=e.evaluate(0,this.scope,this.locator,this),this.obs.clear()),Object.is(t,i)||(this.value=t,this.callback.call(n,t,i,n))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,this.locator,this),this.obs.clear())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.value=void 0)}}Xr(Qh),Xr(Gh);const Xh=cn.createInterface("ILifecycleHooks");class Yh{constructor(t,e){this.definition=t,this.instance=e}}class Jh{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const n=new Set;let i=e.prototype;for(;i!==Object.prototype;){for(const t of Object.getOwnPropertyNames(i))"constructor"!==t&&n.add(t);i=Object.getPrototypeOf(i)}return new Jh(e,n)}register(t){Fn.singleton(Xh,this.Type).register(t)}}const tu=new WeakMap,eu=Sl("lifecycle-hooks"),nu=Object.freeze({name:eu,define(t,e){const n=Jh.create(t,e);return wl(eu,n,e),Al(e,eu),n.Type},resolve(t){let e=tu.get(t);if(void 0===e){tu.set(t,e=new iu);const n=t.root,i=n.id===t.id?t.getAll(Xh):t.has(Xh,!1)?n.getAll(Xh).concat(t.getAll(Xh)):n.getAll(Xh);let s,r,o,a,l;for(s of i)for(a of(r=bl(eu,s.constructor),o=new Yh(r,s),r.propertyNames))l=e[a],void 0===l?e[a]=[o]:l.push(o)}return e}});class iu{}const su=cn.createInterface("IViewFactory");class ru{constructor(t,e){this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=ru.maxCacheSize:Ml(t)&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t){const e=this.cache;let n;return null!=e&&e.length>0?(n=e.pop(),n):(n=bu.$view(this,t),n)}}ru.maxCacheSize=65535;const ou=new WeakSet;function au(t){return!ou.has(t)}function lu(t){return ou.add(t),Ch.create(t)}const cu=Cl("views"),hu=Object.freeze({name:cu,has:t=>Ll(t)&&(yl(cu,t)||"$views"in t),get(t){if(Ll(t)&&"$views"in t){const e=t.$views.filter(au).map(lu);for(const n of e)hu.add(t,n)}let e=bl(cu,t);return void 0===e&&wl(cu,e=[],t),e},add(t,e){const n=Ch.create(e);let i=bl(cu,t);return void 0===i?wl(cu,i=[n],t):i.push(n),i}}),uu=cn.createInterface("IViewLocator",(t=>t.singleton(du)));class du{constructor(){this.et=new WeakMap,this.st=new Map}getViewComponentForObject(t,e){if(t){const n=hu.has(t.constructor)?hu.get(t.constructor):[],i=Ll(e)?e(t,n):this.nt(n,e);return this.rt(t,n,i)}return null}rt(t,e,n){let i,s=this.et.get(t);if(void 0===s?(s={},this.et.set(t,s)):i=s[n],void 0===i){const r=this.ot(t,e,n);i=jh.define(jh.getDefinition(r),class extends r{constructor(){super(t)}}),s[n]=i}return i}ot(t,e,n){let i,s=this.st.get(t.constructor);if(void 0===s?(s={},this.st.set(t.constructor,s)):i=s[n],void 0===i){i=jh.define(this.lt(e,n),class{constructor(t){this.viewModel=t}define(t,e,n){const i=this.viewModel;if(t.scope=ji.fromParent(t.scope,i),void 0!==i.define)return i.define(t,e,n)}});const r=i.prototype;"hydrating"in t&&(r.hydrating=function(t){this.viewModel.hydrating(t)}),"hydrated"in t&&(r.hydrated=function(t){this.viewModel.hydrated(t)}),"created"in t&&(r.created=function(t){this.viewModel.created(t)}),"binding"in t&&(r.binding=function(t,e,n){return this.viewModel.binding(t,e,n)}),"bound"in t&&(r.bound=function(t,e,n){return this.viewModel.bound(t,e,n)}),"attaching"in t&&(r.attaching=function(t,e,n){return this.viewModel.attaching(t,e,n)}),"attached"in t&&(r.attached=function(t,e){return this.viewModel.attached(t,e)}),"detaching"in t&&(r.detaching=function(t,e,n){return this.viewModel.detaching(t,e,n)}),"unbinding"in t&&(r.unbinding=function(t,e,n){return this.viewModel.unbinding(t,e,n)}),"dispose"in t&&(r.dispose=function(){this.viewModel.dispose()}),s[n]=i}return i}nt(t,e){return e||(1===t.length?t[0].name:"default-view")}lt(t,e){const n=t.find((t=>t.name===e));if(void 0===n)throw new Error(`Could not find view: ${e}`);return n}}const pu=cn.createInterface("IRendering",(t=>t.singleton(fu)));class fu{constructor(t){this.ht=new WeakMap,this.ct=new WeakMap,this.ut=(this.ft=t.root).get(mc),this.dt=new od(this.ut,this.ut.document.createDocumentFragment())}get renderers(){return null==this.rs?this.rs=this.ft.getAll(Hd,!1).reduce(((t,e)=>(t[e.target]=e,t)),$l()):this.rs}compile(t,e,n){if(!1!==t.needsCompile){const i=this.ht,s=e.get(qd);let r=i.get(t);return null==r?i.set(t,r=s.compile(t,e,n)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new ru(e,Ch.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new od(this.ut,t.template);let e;const n=this.ct;if(n.has(t))e=n.get(t);else{const i=this.ut,s=i.document,r=t.template;let o;null===r?e=null:r instanceof i.Node?"TEMPLATE"===r.nodeName?e=s.adoptNode(r.content):(e=s.adoptNode(s.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=s.createElement("template"),Ml(r)&&(o.innerHTML=r),s.adoptNode(e=o.content)),n.set(t,e)}return null==e?this.dt:new od(this.ut,e.cloneNode(!0))}render(t,e,n,i){const s=n.instructions,r=this.renderers,o=e.length;if(e.length!==s.length)throw new Error(`AUR0757:${o}<>${s.length}`);let a,l,c,h=0,u=0,d=0;if(o>0)for(;o>h;){for(a=s[h],c=e[h],u=0,d=a.length;d>u;)l=a[u],r[l.type].render(t,c,l),++u;++h}if(null!=i&&(a=n.surrogates,(d=a.length)>0))for(u=0;d>u;)l=a[u],r[l.type].render(t,i,l),++u}}var gu;fu.inject=[dn],function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(gu||(gu={}));const vu={optional:!0},mu=new WeakMap;class bu{constructor(t,e,n,i,s,r,o){switch(this.container=t,this.vmKind=e,this.definition=n,this.viewFactory=i,this.viewModel=s,this.host=r,this.id=Ne("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.vt=!1,this.gt=Hn,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.wt=0,this.bt=0,this.xt=0,this.location=o,this.r=t.root.get(pu),e){case 1:case 0:this.hooks=new Cu(s);break;case 2:this.hooks=Cu.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var t;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(t=this.parent.definition)||void 0===t?void 0:t.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(t){return mu.get(t)}static getCachedOrThrow(t){const e=bu.getCached(t);if(void 0===e)throw new Error(`AUR0500:${t}`);return e}static $el(t,e,n,i,s,r=null){if(mu.has(e))return mu.get(e);s=null!=s?s:jh.getDefinition(e.constructor);const o=new bu(t,0,s,null,e,n,r),a=t.get(wn(Ou));return s.dependencies.length>0&&t.register(...s.dependencies),t.registerResolver(Ou,new Vn("IHydrationContext",new Pu(o,i,a))),mu.set(e,o),null!=i&&!1===i.hydrate||o.hE(i,a),o}static $attr(t,e,n,i){if(mu.has(e))return mu.get(e);i=null!=i?i:mh.getDefinition(e.constructor);const s=new bu(t,1,i,null,e,n,null);return i.dependencies.length>0&&t.register(...i.dependencies),mu.set(e,s),s.yt(),s}static $view(t,e){const n=new bu(t.container,2,null,t,null,null,null);return n.parent=null!=e?e:null,n.kt(),n}hE(t,e){const n=this.container,i=(this.flags,this.viewModel);let s=this.definition;if(this.scope=ji.create(i,null,!0),s.watches.length>0&&Su(this,n,s,i),wu(this,s,0,i),this.gt=function(t,e,n){const i=e.childrenObservers,s=Object.getOwnPropertyNames(i),r=s.length;if(r>0){const e=yu(n),o=[];let a,l,c=0;for(;c<r;++c)a=s[c],null==e[a]&&(l=i[a],o[o.length]=e[a]=new oh(t,n,a,l.callback,l.query,l.filter,l.map,l.options));return o}return Hn}(this,s,i),this.hooks.hasDefine){const t=i.define(this,e,s);void 0!==t&&t!==s&&(s=Ch.getOrCreate(t))}this.lifecycleHooks=nu.resolve(n),s.register(n),null!==s.injectable&&n.registerResolver(s.injectable,new Vn("definition.injectable",i)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){void 0!==this.lifecycleHooks.hydrating&&this.lifecycleHooks.hydrating.forEach(Mu,this),this.hooks.hasHydrating&&this.viewModel.hydrating(this);const e=this.Ct=this.r.compile(this.definition,this.container,t),{shadowOptions:n,isStrictBinding:i,hasSlots:s}=e,r=this.location;if(this.isStrictBinding=i,null!==(this.hostController=jh.for(this.host,vu))&&(this.host=this.container.root.get(mc).document.createElement(this.definition.name)),Xu(this.host,jh.name,this),Xu(this.host,this.definition.key,this),null!==n||s){if(null!=r)throw new Error("AUR0501");Xu(this.shadowRoot=this.host.attachShadow(null!=n?n:Au),jh.name,this),Xu(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=r?(Xu(r,jh.name,this),Xu(r,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.lifecycleHooks.hydrated&&this.lifecycleHooks.hydrated.forEach(ju,this),this.hooks.hasHydrated&&this.viewModel.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Ct,this.host),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(Lu,this),this.hooks.hasCreated&&this.viewModel.created(this)}yt(){const t=this.definition,e=this.viewModel;t.watches.length>0&&Su(this,this.container,t,e),wu(this,t,this.flags,e),e.$controller=this,this.lifecycleHooks=nu.resolve(this.container),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(Lu,this),this.hooks.hasCreated&&this.viewModel.created(this)}kt(){this.Ct=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Ct.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Ct)).findTargets(),this.Ct,void 0)}activate(t,e,n,i){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`AUR0502:${this.name}`);default:throw new Error(`AUR0503:${this.name} ${$u(this.state)}`)}switch(this.parent=e,n|=2,this.vmKind){case 0:this.scope.parentScope=null!=i?i:null;break;case 1:this.scope=null!=i?i:null;break;case 2:if(null==i)throw new Error("AUR0504");this.hasLockedScope||(this.scope=i)}let s;return this.isStrictBinding&&(n|=1),this.$initiator=t,this.$flags=n,this.At(),2!==this.vmKind&&null!=this.lifecycleHooks.binding&&(s=We(...this.lifecycleHooks.binding.map(Uu,this))),this.hooks.hasBinding&&(s=We(s,this.viewModel.binding(this.$initiator,this.parent,this.$flags))),s instanceof Promise?(this.Rt(),s.then((()=>{this.bind()})).catch((t=>{this.St(t)})),this.$promise):(this.bind(),this.$promise)}bind(){let t,e=0,n=this.gt.length;if(n>0)for(;n>e;)this.gt[e].start(),++e;if(null!==this.bindings)for(e=0,n=this.bindings.length;n>e;)this.bindings[e].$bind(this.$flags,this.scope),++e;if(2!==this.vmKind&&null!=this.lifecycleHooks.bound&&(t=We(...this.lifecycleHooks.bound.map(Nu,this))),this.hooks.hasBound&&(t=We(t,this.viewModel.bound(this.$initiator,this.parent,this.$flags))),t instanceof Promise)return this.Rt(),void t.then((()=>{this.isBound=!0,this.Et()})).catch((t=>{this.St(t)}));this.isBound=!0,this.Et()}Bt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Et(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Bt(this.host);break;case 3:this.hostController.Bt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(Dh,!1)?t.get(Dh):t.get(zh)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.lifecycleHooks.attaching&&(t=We(...this.lifecycleHooks.attaching.map(Bu,this))),this.hooks.hasAttaching&&(t=We(t,this.viewModel.attaching(this.$initiator,this.parent,this.$flags))),t instanceof Promise&&(this.Rt(),this.At(),t.then((()=>{this.It()})).catch((t=>{this.St(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.It()}deactivate(t,e,n){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`AUR0505:${this.name} ${$u(this.state)}`)}this.$initiator=t,this.$flags=n,t===this&&this.Tt();let i,s=0;if(this.gt.length)for(;s<this.gt.length;++s)this.gt[s].stop();if(null!==this.children)for(s=0;s<this.children.length;++s)this.children[s].deactivate(t,this,n);if(2!==this.vmKind&&null!=this.lifecycleHooks.detaching&&(i=We(...this.lifecycleHooks.detaching.map(Vu,this))),this.hooks.hasDetaching&&(i=We(i,this.viewModel.detaching(this.$initiator,this.parent,this.$flags))),i instanceof Promise&&(this.Rt(),t.Tt(),i.then((()=>{t.Dt()})).catch((e=>{t.St(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Dt(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=4|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].$unbind(t);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}16==(16&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.Pt()}Rt(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Rt())}Pt(){void 0!==this.$promise&&(zu=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,zu(),zu=void 0)}St(t){void 0!==this.$promise&&(qu=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,qu(t),qu=void 0),this.$initiator!==this&&this.parent.St(t)}At(){++this.wt,this.$initiator!==this&&this.parent.At()}It(){if(0==--this.wt){if(2!==this.vmKind&&null!=this.lifecycleHooks.attached&&(Hu=We(...this.lifecycleHooks.attached.map(Fu,this))),this.hooks.hasAttached&&(Hu=We(Hu,this.viewModel.attached(this.$initiator,this.$flags))),Hu instanceof Promise)return this.Rt(),Hu.then((()=>{this.state=2,this.Pt(),this.$initiator!==this&&this.parent.It()})).catch((t=>{this.St(t)})),void(Hu=void 0);Hu=void 0,this.state=2,this.Pt()}this.$initiator!==this&&this.parent.It()}Tt(){++this.bt}Dt(){if(0==--this.bt){this.$t(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),2!==e.vmKind&&null!=e.lifecycleHooks.unbinding&&(t=We(...e.lifecycleHooks.unbinding.map(Du,this))),e.hooks.hasUnbinding&&(e.debug&&e.logger.trace("unbinding()"),t=We(t,e.viewModel.unbinding(e.$initiator,e.parent,e.$flags))),t instanceof Promise&&(this.Rt(),this.$t(),t.then((()=>{this.Ot()})).catch((t=>{this.St(t)}))),t=void 0,e=e.next;this.Ot()}}$t(){++this.xt}Ot(){if(0==--this.xt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return mh.getDefinition(this.viewModel.constructor).name===t;case 0:return jh.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(Xu(t,jh.name,this),Xu(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(Xu(t,jh.name,this),Xu(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(Xu(t,jh.name,this),Xu(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(Ru),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(mu.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}}function yu(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function wu(t,e,n,i){const s=e.bindables,r=Object.getOwnPropertyNames(s),o=r.length;if(o>0){let e,n,a=0;const l=yu(i),c=t.container,h=c.has(Is,!0)?c.get(Is):null;for(;a<o;++a)e=r[a],void 0===l[e]&&(n=s[e],l[e]=new ql(i,e,n.callback,n.set,t,h))}}const xu=new Map,ku=t=>{let e=xu.get(t);return null==e&&(e=new os(t,0),xu.set(t,e)),e};function Su(t,e,n,i){const s=e.get(Ha),r=e.get(Yr),o=n.watches,a=0===t.vmKind?t.scope:ji.create(i,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if(({expression:c,callback:h}=o[d]),h=Ll(h)?h:Reflect.get(i,h),!Ll(h))throw new Error(`AUR0506:${String(h)}`);Ll(c)?t.addBinding(new Qh(i,s,c,h,!0)):(u=Ml(c)?r.parse(c,8):ku(c),t.addBinding(new Gh(a,e,s,u,h)))}}class Cu{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}Cu.none=new Cu({});const Au={mode:"open"};var Eu,Tu;function $u(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(Eu||(Eu={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(Tu||(Tu={}));const Iu=cn.createInterface("IController"),Ou=cn.createInterface("IHydrationContext");class Pu{constructor(t,e,n){this.instruction=e,this.parent=n,this.controller=t}}function Ru(t){t.dispose()}function Lu(t){t.instance.created(this.viewModel,this)}function Mu(t){t.instance.hydrating(this.viewModel,this)}function ju(t){t.instance.hydrated(this.viewModel,this)}function Uu(t){return t.instance.binding(this.viewModel,this.$initiator,this.parent,this.$flags)}function Nu(t){return t.instance.bound(this.viewModel,this.$initiator,this.parent,this.$flags)}function Bu(t){return t.instance.attaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Fu(t){return t.instance.attached(this.viewModel,this.$initiator,this.$flags)}function Vu(t){return t.instance.detaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Du(t){return t.instance.unbinding(this.viewModel,this.$initiator,this.parent,this.$flags)}let zu,qu,Hu;const Zu=cn.createInterface("IAppRoot"),Wu=cn.createInterface("IWorkTracker",(t=>t.singleton(Ku)));class Ku{constructor(t){this.Lt=0,this.qt=null,this.Pt=null,this.Ut=t.scopeTo("WorkTracker")}start(){this.Ut.trace(`start(stack:${this.Lt})`),++this.Lt}finish(){if(this.Ut.trace(`finish(stack:${this.Lt})`),0==--this.Lt){const t=this.Pt;null!==t&&(this.Pt=this.qt=null,t())}}wait(){if(this.Ut.trace(`wait(stack:${this.Lt})`),null===this.qt){if(0===this.Lt)return Promise.resolve();this.qt=new Promise((t=>{this.Pt=t}))}return this.qt}}Ku.inject=[ei];class _u{constructor(t,e,n,i){this.config=t,this.platform=e,this.container=n,this.controller=void 0,this._t=void 0,this.host=t.host,this.work=n.get(Wu),i.prepare(this),n.registerResolver(e.HTMLElement,n.registerResolver(e.Element,n.registerResolver(Yu,new Vn("ElementResolver",t.host)))),this._t=Ze(this.Ft("beforeCreate"),(()=>{const e=t.component,i=n.createChild();let s;s=jh.isType(e)?this.container.get(e):t.component;const r={hydrate:!1,projections:null},o=this.controller=bu.$el(i,s,this.host,r);return o.hE(r,null),Ze(this.Ft("hydrating"),(()=>(o.hS(null),Ze(this.Ft("hydrated"),(()=>{o.hC(),this._t=void 0})))))}))}activate(){return Ze(this._t,(()=>Ze(this.Ft("beforeActivate"),(()=>Ze(this.controller.activate(this.controller,null,2,void 0),(()=>this.Ft("afterActivate")))))))}deactivate(){return Ze(this.Ft("beforeDeactivate"),(()=>Ze(this.controller.deactivate(this.controller,null,0),(()=>this.Ft("afterDeactivate")))))}Ft(t){return We(...this.container.getAll(Xc).reduce(((e,n)=>(n.slot===t&&e.push(n.run()),e)),[]))}dispose(){var t;null===(t=this.controller)||void 0===t||t.dispose()}}class Qu{}function Gu(t,e){var n,i;return null!==(i=null===(n=t.$au)||void 0===n?void 0:n[e])&&void 0!==i?i:null}function Xu(t,e,n){var i,s;(null!==(i=(s=t).$au)&&void 0!==i?i:s.$au=new Qu)[e]=n}const Yu=cn.createInterface("INode"),Ju=cn.createInterface("IEventTarget",(t=>t.cachedCallback((t=>t.has(Zu,!0)?t.get(Zu).host:t.get(mc).document)))),td=cn.createInterface("IRenderLocation");var ed;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(ed||(ed={}));const nd=new WeakMap;function id(t){if(nd.has(t))return nd.get(t);let e=0,n=t.nextSibling;for(;null!==n;){if(8===n.nodeType)switch(n.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return n}n=n.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=jh.for(t);if(void 0===e)return null;if(2===e.mountTarget)return id(e.host)}return t.parentNode}function sd(t){if(rd(t))return t;const e=t.ownerDocument.createComment("au-end"),n=t.ownerDocument.createComment("au-start");return null!==t.parentNode&&(t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(n,e)),e.$start=n,e}function rd(t){return"au-end"===t.textContent}class od{constructor(t,e){this.platform=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const n=e.querySelectorAll(".au");let i,s=0,r=n.length,o=this.targets=Array(r);for(;r>s;)i=n[s],"AU-M"===i.nodeName?o[s]=sd(i):o[s]=i,++s;const a=e.childNodes,l=this.childNodes=Array(r=a.length);for(s=0;r>s;)l[s]=a[s],++s;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e,n=this.firstChild;const i=this.lastChild;for(;null!=n&&(e=n.nextSibling,t.appendChild(n),n!==i);)n=e}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let n,i=this.firstChild;for(;null!==i&&(n=i.nextSibling,t.appendChild(i),i!==e);)i=n}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,rd(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}const ad=cn.createInterface("IWindow",(t=>t.callback((t=>t.get(mc).window)))),ld=cn.createInterface("ILocation",(t=>t.callback((t=>t.get(ad).location)))),cd=cn.createInterface("IHistory",(t=>t.callback((t=>t.get(ad).history)))),hd={[Ls.capturing]:{capture:!0},[Ls.bubbling]:{capture:!1}};class ud{constructor(t,e,n){this.prevent=t,this.strategy=e,this.expAsHandler=n}}class dd{constructor(t,e,n,i,s,r,o){this.platform=t,this.targetEvent=e,this.sourceExpression=n,this.target=i,this.eventDelegator=s,this.locator=r,this.Vt=o,this.interceptor=this,this.isBound=!1,this.handler=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;let n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);if(delete e.$event,this.Vt.expAsHandler){if(!Ll(n))throw new Error(`Handler of "${this.targetEvent}" event is not a function.`);n=n(t)}return!0!==n&&this.Vt.prevent&&t.preventDefault(),n}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.Vt.strategy===Ls.none?this.target.addEventListener(this.targetEvent,this):this.handler=this.eventDelegator.addEventListener(this.locator.get(Ju),this.target,this.targetEvent,this,hd[this.Vt.strategy]),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.Vt.strategy===Ls.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const pd={capture:!1};class fd{constructor(t,e,n=pd){this.Mt=t,this.jt=e,this.Vt=n,this.Nt=0,this.Wt=new Map,this.Ht=new Map}zt(){1==++this.Nt&&this.Mt.addEventListener(this.jt,this,this.Vt)}Gt(){0==--this.Nt&&this.Mt.removeEventListener(this.jt,this,this.Vt)}dispose(){this.Nt>0&&(this.Nt=0,this.Mt.removeEventListener(this.jt,this,this.Vt)),this.Wt.clear(),this.Ht.clear()}Xt(t){const e=!0===this.Vt.capture?this.Wt:this.Ht;let n=e.get(t);return void 0===n&&e.set(t,n=$l()),n}handleEvent(t){const e=!0===this.Vt.capture?this.Wt:this.Ht,n=t.composedPath();!0===this.Vt.capture&&n.reverse();for(const i of n){const n=e.get(i);if(void 0===n)continue;const s=n[this.jt];if(void 0!==s&&(Ll(s)?s(t):s.handleEvent(t),!0===t.cancelBubble))return}}}class gd{constructor(t,e,n,i){this.Kt=t,this.Yt=e,this.jt=n,t.zt(),e[n]=i}dispose(){this.Kt.Gt(),this.Yt[this.jt]=void 0}}class vd{constructor(t){this.config=t,this.target=null,this.handler=null}subscribe(t,e){let n;for(n of(this.target=t,this.handler=e,this.config.events))t.addEventListener(n,e)}dispose(){const{target:t,handler:e}=this;let n;if(null!==t&&null!==e)for(n of this.config.events)t.removeEventListener(n,e);this.target=this.handler=null}}const md=cn.createInterface("IEventDelegator",(t=>t.singleton(bd)));class bd{constructor(){this.Zt=$l()}addEventListener(t,e,n,i,s){var r,o;const a=null!==(r=(o=this.Zt)[n])&&void 0!==r?r:o[n]=new Map;let l=a.get(t);return void 0===l&&a.set(t,l=new fd(t,n,s)),new gd(l,l.Xt(e),n,i)}dispose(){for(const t in this.Zt){const e=this.Zt[t];for(const t of e.values())t.dispose();e.clear()}}}cn.createInterface("IProjections");const yd=cn.createInterface("IAuSlotsInfo");class wd{constructor(t){this.projectedSlots=t}}var xd;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}(xd||(xd={}));const kd=cn.createInterface("Instruction");function Sd(t){const e=t.type;return Ml(e)&&2===e.length}class Cd{constructor(t,e){this.from=t,this.to=e}get type(){return"rf"}}class Ad{constructor(t,e,n){this.from=t,this.to=e,this.mode=n}get type(){return"rg"}}class Ed{constructor(t,e){this.from=t,this.to=e}get type(){return"rk"}}class Td{constructor(t,e){this.from=t,this.to=e}get type(){return"rh"}}class $d{constructor(t,e){this.from=t,this.to=e}get type(){return"rj"}}class Id{constructor(t,e){this.value=t,this.to=e}get type(){return"re"}}class Od{constructor(t,e,n,i,s,r){this.res=t,this.alias=e,this.props=n,this.projections=i,this.containerless=s,this.captures=r,this.auSlot=null}get type(){return"ra"}}class Pd{constructor(t,e,n){this.res=t,this.alias=e,this.props=n}get type(){return"rb"}}class Rd{constructor(t,e,n,i){this.def=t,this.res=e,this.alias=n,this.props=i}get type(){return"rc"}}class Ld{constructor(t,e){this.instructions=t,this.toBindingContext=e}get type(){return"rd"}}class Md{constructor(t,e){this.from=t,this.to=e}get type(){return"ri"}}class jd{constructor(t,e){this.from=t,this.strict=e}get type(){return"ha"}}class Ud{constructor(t,e,n,i){this.from=t,this.to=e,this.preventDefault=n,this.strategy=i}get type(){return"hb"}}class Nd{constructor(t,e){this.value=t,this.to=e}get type(){return"he"}}class Bd{constructor(t){this.value=t,this.type="hf"}}class Fd{constructor(t){this.value=t,this.type="hg"}}class Vd{constructor(t,e,n){this.attr=t,this.from=e,this.to=n}get type(){return"hc"}}class Dd{get type(){return"hs"}}class zd{constructor(t){this.instructions=t}get type(){return"hp"}}const qd=cn.createInterface("ITemplateCompiler"),Hd=cn.createInterface("IRenderer");function Zd(t){return function(e){return e.register=function(t){Fn.singleton(Hd,this).register(t)},jl(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function Wd(t,e,n){return Ml(e)?t.parse(e,n):e}function Kd(t){return null!=t.viewModel?t.viewModel:t}let _d=class{render(t,e,n){const i=Kd(e);void 0!==i.$observers&&void 0!==i.$observers[n.to]?i.$observers[n.to].setValue(n.value,2):i[n.to]=n.value}};_d=vl([Zd("re")],_d);let Qd=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[pu,mc]}render(t,e,n){let i,s,r,o;const a=n.res,l=n.projections,c=t.container;if("string"==typeof a){if(i=c.find(jh,a),null==i)throw new Error(`AUR0752:${a}@${t.name}`)}else i=a;const h=n.containerless||i.containerless?sd(e):null,u=function(t,e,n,i,s,r){const o=e.container.createChild();return o.registerResolver(t.HTMLElement,o.registerResolver(t.Element,o.registerResolver(Yu,new Vn("ElementResolver",n)))),o.registerResolver(Iu,new Vn(yp,e)),o.registerResolver(kd,new Vn(wp,i)),o.registerResolver(td,null==s?Ap:new Cp(s)),o.registerResolver(su,Ep),o.registerResolver(yd,null==r?Tp:new Vn(xp,r)),o}(this.p,t,e,n,h,null==l?void 0:new wd(Object.keys(l)));s=i.Type,r=u.invoke(s),u.registerResolver(s,new Vn(i.key,r)),o=bu.$el(u,r,e,n,i,h),Xu(e,i.key,o);const d=this.r.renderers,p=n.props,f=p.length;let g,v=0;for(;f>v;)g=p[v],d[g.type].render(t,o,g),++v;t.addChild(o)}};Qd=vl([Zd("ra")],Qd);let Gd=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[pu,mc]}render(t,e,n){let i,s=t.container;if("string"==typeof n.res){if(i=s.find(mh,n.res),null==i)throw new Error(`AUR0753:${n.res}@${t.name}`)}else i=n.res;const r=Sp(this.p,i,t,e,n,void 0,void 0),o=bu.$attr(r.ctn,r.vm,e,i);Xu(e,i.key,o);const a=this.r.renderers,l=n.props,c=l.length;let h,u=0;for(;c>u;)h=l[u],a[h.type].render(t,o,h),++u;t.addChild(o)}};Gd=vl([Zd("rb")],Gd);let Xd=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[pu,mc]}render(t,e,n){var i,s;let r,o=t.container;if("string"==typeof n.res){if(r=o.find(mh,n.res),null==r)throw new Error(`AUR0754:${n.res}@${t.name}`)}else r=n.res;const a=this.r.getViewFactory(n.def,o),l=sd(e),c=Sp(this.p,r,t,e,n,a,l),h=bu.$attr(c.ctn,c.vm,e,r);Xu(l,r.key,h),null===(s=(i=c.vm).link)||void 0===s||s.call(i,t,h,e,n);const u=this.r.renderers,d=n.props,p=d.length;let f,g=0;for(;p>g;)f=d[g],u[f.type].render(t,h,f),++g;t.addChild(h)}};Xd=vl([Zd("rc")],Xd);let Yd=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){e.remove();const i=n.instructions,s=n.toBindingContext,r=t.container,o=i.length;let a,l,c,h=0;for(;o>h;)a=i[h],l=Wd(this.ep,a.from,8),c=new zc(l,a.to,this.oL,r,s),t.addBinding(38962===l.$kind?op(c,l,r):c),++h}};Yd.inject=[Yr,Ha],Yd=vl([Zd("rd")],Yd);let Jd=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=Wd(this.ep,n.from,12),s=new Sc(i,Kd(e),n.to,this.oL,t.container);t.addBinding(38962===i.$kind?op(s,i,t.container):s)}};Jd.inject=[Yr,Ha],Jd=vl([Zd("rh")],Jd);let tp=class{constructor(t){this.ep=t}render(t,e,n){const i=Wd(this.ep,n.from,8),s=new Gc(i,function(t,e){if("element"===e)return t;switch(e){case"controller":return jh.for(t);case"view":throw new Error("AUR0750");case"view-model":return jh.for(t).viewModel;default:{const n=mh.for(t,e);if(void 0!==n)return n.viewModel;const i=jh.for(t,{name:e});if(void 0===i)throw new Error(`AUR0751:${e}`);return i.viewModel}}}(e,n.to),t.container);t.addBinding(38962===i.$kind?op(s,i,t.container):s)}};tp.inject=[Yr],tp=vl([Zd("rj")],tp);let ep=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=Wd(this.ep,n.from,1),r=new Fc(this.oL,s,Kd(e),n.to,Os.toView,i,this.p.domWriteQueue),o=r.partBindings,a=o.length;let l,c=0;for(;a>c;++c)l=o[c],38962===l.sourceExpression.$kind&&(o[c]=op(l,l.sourceExpression,i));t.addBinding(r)}};ep.inject=[Yr,Ha,mc],ep=vl([Zd("rf")],ep);let np=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Wd(this.ep,n.from,8),s=new _c(i,Kd(e),n.to,n.mode,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?op(s,i,t.container):s)}};np.inject=[Yr,Ha,mc],np=vl([Zd("rg")],np);let ip=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Wd(this.ep,n.from,2),s=new _c(i,Kd(e),n.to,Os.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.iterable.$kind?op(s,i.iterable,t.container):s)}};ip.inject=[Yr,Ha,mc],ip=vl([Zd("rk")],ip);let sp=0;const rp=[];function op(t,e,n){for(;e instanceof es;)rp[sp++]=e,e=e.expression;for(;sp>0;){const e=rp[--sp],i=n.get(e.behaviorKey);i instanceof zi&&(t=i.construct(t,e))}return rp.length=0,t}let ap=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=e.nextSibling,r=e.parentNode,o=this.p.document,a=Wd(this.ep,n.from,1),l=a.parts,c=a.expressions,h=c.length;let u,d,p=0,f=l[0];for(""!==f&&r.insertBefore(o.createTextNode(f),s);h>p;++p)d=c[p],u=new Dc(d,r.insertBefore(o.createTextNode(""),s),i,this.oL,this.p,n.strict),t.addBinding(38962===d.$kind?op(u,d,i):u),f=l[p+1],""!==f&&r.insertBefore(o.createTextNode(f),s);"AU-M"===e.nodeName&&e.remove()}};ap.inject=[Yr,Ha,mc],ap=vl([Zd("ha")],ap);const lp=cn.createInterface("IListenerBehaviorOptions",(t=>t.singleton(cp)));class cp{constructor(){this.expAsHandler=!1}}let hp=class{constructor(t,e,n,i){this.ep=t,this.Jt=e,this.p=n,this.Qt=i}render(t,e,n){const i=Wd(this.ep,n.from,4),s=new dd(this.p,n.to,i,e,this.Jt,t.container,new ud(n.preventDefault,n.strategy,this.Qt.expAsHandler));t.addBinding(38962===i.$kind?op(s,i,t.container):s)}};hp.inject=[Yr,md,mc,lp],hp=vl([Zd("hb")],hp);let up=class{render(t,e,n){e.setAttribute(n.to,n.value)}};up=vl([Zd("he")],up);let dp=class{render(t,e,n){!function(t,e){const n=e.length;let i=0;for(let s=0;s<n;++s)32===e.charCodeAt(s)?(s!==i&&t.add(e.slice(i,s)),i=s+1):s+1===n&&t.add(e.slice(i))}(e.classList,n.value)}};dp=vl([Zd("hf")],dp);let pp=class{render(t,e,n){e.style.cssText+=n.value}};pp=vl([Zd("hg")],pp);let fp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Wd(this.ep,n.from,8),s=new _c(i,e.style,n.to,Os.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?op(s,i,t.container):s)}};fp.inject=[Yr,Ha,mc],fp=vl([Zd("hd")],fp);let gp=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=Wd(this.ep,n.from,8),s=new Uc(i,e,n.attr,n.to,Os.toView,this.oL,t.container);t.addBinding(38962===i.$kind?op(s,i,t.container):s)}};gp.inject=[Yr,Ha],gp=vl([Zd("hc")],gp);let vp=class{constructor(t,e){this.ti=t,this.r=e}static get inject(){return[qd,pu]}render(t,e,n){const i=t.container.get(Ou),s=this.r.renderers,r=t=>{let e=t,n=i;for(;null!=n&&e>0;)n=n.parent,--e;if(null==n)throw new Error("No scope context for spread binding.");return n},o=n=>{var i,a;const l=r(n),c=bp(l),h=this.ti.compileSpread(l.controller.definition,null!==(a=null===(i=l.instruction)||void 0===i?void 0:i.captures)&&void 0!==a?a:Hn,l.controller.container,e);let u;for(u of h)switch(u.type){case"hs":o(n+1);break;case"hp":s[u.instructions.type].render(c,jh.for(e),u.instructions);break;default:s[u.type].render(c,e,u)}t.addBinding(c)};o(0)}};vp=vl([Zd("hs")],vp);class mp{constructor(t,e){this.ii=t,this.ei=e,this.interceptor=this,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}$bind(t,e){var n;if(this.isBound)return;this.isBound=!0;const i=this.$scope=null!==(n=this.ei.controller.scope.parentScope)&&void 0!==n?n:void 0;if(null==i)throw new Error("Invalid spreading. Context scope is null/undefined");this.ii.forEach((e=>e.$bind(t,i)))}$unbind(t){this.ii.forEach((e=>e.$unbind(t))),this.isBound=!1}addBinding(t){this.ii.push(t)}addChild(t){if(1!==t.vmKind)throw new Error("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}}const bp=t=>new mp([],t),yp="IController",wp="IInstruction",xp="IAuSlotsInfo";class kp{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw new Error("AUR7055");if(!Ml(t.name)||0===t.name.length)throw new Error("AUR0756");return t}}function Sp(t,e,n,i,s,r,o,a){const l=n.container.createChild();return l.registerResolver(t.HTMLElement,l.registerResolver(t.Element,l.registerResolver(Yu,new Vn("ElementResolver",i)))),n=n instanceof bu?n:n.ctrl,l.registerResolver(Iu,new Vn(yp,n)),l.registerResolver(kd,new Vn(wp,s)),l.registerResolver(td,null==o?Ap:new Vn("IRenderLocation",o)),l.registerResolver(su,null==r?Ep:new kp(r)),l.registerResolver(yd,null==a?Tp:new Vn(xp,a)),{vm:l.invoke(e.Type),ctn:l}}class Cp{constructor(t){this.l=t}get name(){return"IRenderLocation"}get $isResolver(){return!0}resolve(){return this.l}}const Ap=new Cp(null),Ep=new kp(null),Tp=new Vn(xp,new wd(Hn));var $p;function Ip(t){return function(e){return Mp.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}($p||($p={}));class Op{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.type=s}static create(t,e){let n,i;return Ml(t)?(n=t,i={name:n}):(n=t.name,i=t),new Op(e,De(Lp(e,"name"),n),Ve(Lp(e,"aliases"),i.aliases,e.aliases),Rp(n),De(Lp(e,"type"),i.type,e.type,null))}register(t){const{Type:e,key:n,aliases:i}=this;Fn.singleton(n,e).register(t),Fn.aliasTo(n,e).register(t),Li(i,Mp,n,t)}}const Pp=Cl("binding-command"),Rp=t=>`${Pp}:${t}`,Lp=(t,e)=>bl(Sl(e),t),Mp=Object.freeze({name:Pp,keyFrom:Rp,define(t,e){const n=Op.create(t,e);return wl(Pp,n,n.Type),wl(Pp,n,n),Al(e,Pp),n.Type},getAnnotation:Lp});let jp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"one-time"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:Re(n):(""===i&&1===t.def.type&&(i=Re(n)),n=t.bindable.property),new Ad(this.ep.parse(i,8),n,Os.oneTime)}};jp.inject=[wc,Yr],jp=vl([Ip("one-time")],jp);let Up=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"to-view"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:Re(n):(""===i&&1===t.def.type&&(i=Re(n)),n=t.bindable.property),new Ad(this.ep.parse(i,8),n,Os.toView)}};Up.inject=[wc,Yr],Up=vl([Ip("to-view")],Up);let Np=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"from-view"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:Re(i):(""===s&&1===t.def.type&&(s=Re(i)),i=t.bindable.property),new Ad(this.ep.parse(s,8),i,Os.fromView)}};Np.inject=[wc,Yr],Np=vl([Ip("from-view")],Np);let Bp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"two-way"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:Re(i):(""===s&&1===t.def.type&&(s=Re(i)),i=t.bindable.property),new Ad(this.ep.parse(s,8),i,Os.twoWay)}};Bp.inject=[wc,Yr],Bp=vl([Ip("two-way")],Bp);let Fp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"bind"}build(t){var e;const n=t.attr,i=t.bindable;let s,r,o=n.target,a=n.rawValue;return null==i?(r=this.m.isTwoWay(t.node,o)?Os.twoWay:Os.toView,o=null!==(e=this.m.map(t.node,o))&&void 0!==e?e:Re(o)):(""===a&&1===t.def.type&&(a=Re(o)),s=t.def.defaultBindingMode,r=i.mode===Os.default||null==i.mode?null==s||s===Os.default?Os.toView:s:i.mode,o=i.property),new Ad(this.ep.parse(a,8),o,r)}};Fp.inject=[wc,Yr],Fp=vl([Ip("bind")],Fp);let Vp=class{constructor(t){this.type=0,this.ep=t}get name(){return"call"}build(t){const e=null===t.bindable?Re(t.attr.target):t.bindable.property;return new Td(this.ep.parse(t.attr.rawValue,12),e)}};Vp.inject=[Yr],Vp=vl([Ip("call")],Vp);let Dp=class{constructor(t){this.type=0,this.ep=t}get name(){return"for"}build(t){const e=null===t.bindable?Re(t.attr.target):t.bindable.property;return new Ed(this.ep.parse(t.attr.rawValue,2),e)}};Dp.inject=[Yr],Dp=vl([Ip("for")],Dp);let zp=class{constructor(t){this.type=1,this.ep=t}get name(){return"trigger"}build(t){return new Ud(this.ep.parse(t.attr.rawValue,4),t.attr.target,!0,Ls.none)}};zp.inject=[Yr],zp=vl([Ip("trigger")],zp);let qp=class{constructor(t){this.type=1,this.ep=t}get name(){return"delegate"}build(t){return new Ud(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Ls.bubbling)}};qp.inject=[Yr],qp=vl([Ip("delegate")],qp);let Hp=class{constructor(t){this.type=1,this.ep=t}get name(){return"capture"}build(t){return new Ud(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Ls.capturing)}};Hp.inject=[Yr],Hp=vl([Ip("capture")],Hp);let Zp=class{constructor(t){this.type=1,this.ep=t}get name(){return"attr"}build(t){return new Vd(t.attr.target,this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Zp.inject=[Yr],Zp=vl([Ip("attr")],Zp);let Wp=class{constructor(t){this.type=1,this.ep=t}get name(){return"style"}build(t){return new Vd("style",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Wp.inject=[Yr],Wp=vl([Ip("style")],Wp);let Kp=class{constructor(t){this.type=1,this.ep=t}get name(){return"class"}build(t){return new Vd("class",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Kp.inject=[Yr],Kp=vl([Ip("class")],Kp);let _p=class{constructor(t){this.type=1,this.ep=t}get name(){return"ref"}build(t){return new $d(this.ep.parse(t.attr.rawValue,8),t.attr.target)}};_p.inject=[Yr],_p=vl([Ip("ref")],_p);let Qp=class{constructor(){this.type=1}get name(){return"...$attrs"}build(t){return new Dd}};Qp=vl([Ip("...$attrs")],Qp);const Gp=cn.createInterface("ITemplateElementFactory",(t=>t.singleton(Yp))),Xp={};class Yp{constructor(t){this.p=t,this.si=t.document.createElement("template")}createTemplate(t){var e;if(Ml(t)){let e=Xp[t];if(void 0===e){const n=this.si;n.innerHTML=t;const i=n.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.si=this.p.document.createElement("template"),e=n):(n.content.removeChild(i),e=i),Xp[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.p.document.createElement("template");return e.content.appendChild(t),e}return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.cloneNode(!0)}}Yp.inject=[mc];class Jp{constructor(t,e,n,i,s,r){this.hasSlot=!1,this.Ci=$l();const o=null!==i;this.c=e,this.root=null===s?this:s,this.def=t,this.ci=n,this.parent=i,this.ni=o?i.ni:e.get(Gp),this.di=o?i.di:e.get(sc),this.ep=o?i.ep:e.get(Yr),this.m=o?i.m:e.get(wc),this.Ut=o?i.Ut:e.get(ei),this.p=o?i.p:e.get(mc),this.localEls=o?i.localEls:new Set,this.rows=null!=r?r:[]}ki(t){var e,n;(null!==(e=(n=this.root).deps)&&void 0!==e?e:n.deps=[]).push(t),this.root.c.register(t)}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}hi(t){return this.c.find(jh,t)}ui(t){return this.c.find(mh,t)}xi(t){return new Jp(this.def,this.c,this.ci,this,this.root,t)}ai(t){if(this.root!==this)return this.root.ai(t);const e=t.command;if(null===e)return null;let n=this.Ci[e];if(void 0===n){if(n=this.c.create(Mp,e),null===n)throw new Error(`AUR0713:${e}`);this.Ci[e]=n}return n}}function tf(t){const e=t.length;let n=0,i=0;for(;e>i;){if(n=t.charCodeAt(i),92===n)++i;else{if(58===n)return!0;if(36===n&&123===t.charCodeAt(i+1))return!1}++i}return!1}function ef(){rf.node=rf.attr=rf.bindable=rf.def=null}const nf={projections:null},sf={name:"unnamed"},rf={node:null,attr:null,bindable:null,def:null},of=Object.assign($l(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),af={checkbox:1,radio:1},lf=new WeakMap;class cf{constructor(t,e,n){this.attrs=t,this.bindables=e,this.primary=n}static from(t,e){let n=lf.get(t);if(null==n){const i=t.bindables,s=$l(),r=e?void 0===t.defaultBindingMode?Os.default:t.defaultBindingMode:Os.default;let o,a,l,c,h=!1;for(a in i){if(o=i[a],c=o.attribute,!0===o.primary){if(h)throw new Error(`AUR0714:${t.name}`);h=!0,l=o}else h||null!=l||(l=o);s[c]=Dl.create(a,t.Type,o)}null==o&&e&&(l=s.value=Dl.create("value",t.Type,{mode:r})),lf.set(t,n=new cf(s,i,l))}return n}}var hf;!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(hf||(hf={}));const uf=Object.freeze(["property","attribute","mode"]),df="as-custom-element";function pf(t,e){const n=t.getAttribute(df);if(null===n||""===n)throw new Error("AUR0715");if(e.has(n))throw new Error(`AUR0716:${n}`);return e.add(n),t.removeAttribute(df),n}function ff(t){switch(t.getAttribute("mode")){case"oneTime":return Os.oneTime;case"toView":return Os.toView;case"fromView":return Os.fromView;case"twoWay":return Os.twoWay;default:return Os.default}}const gf=cn.createInterface("ITemplateCompilerHooks"),vf=new WeakMap,mf=Cl("compiler-hooks");Object.freeze({name:mf,define(t){let e=vf.get(t);return void 0===e&&(vf.set(t,e=new bf(t)),wl(mf,e,t),Al(t,mf)),t}});class bf{constructor(t){this.Type=t}get name(){return""}register(t){t.register(Fn.singleton(gf,this.Type))}}const yf=jh.generateName,wf="default",xf="au-slot";class kf{constructor(t){this.mode=t,this.Ai=new Map}bind(t,e,n){this.Ai.set(n,n.mode),n.mode=this.mode}unbind(t,e,n){n.mode=this.Ai.get(n),this.Ai.delete(n)}}class Sf extends kf{constructor(){super(Os.oneTime)}}class Cf extends kf{constructor(){super(Os.toView)}}class Af extends kf{constructor(){super(Os.fromView)}}class Ef extends kf{constructor(){super(Os.twoWay)}}Vi("oneTime")(Sf),Vi("toView")(Cf),Vi("fromView")(Af),Vi("twoWay")(Ef);class Tf extends qi{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(Kn).taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(t,e,n)}updateSource(t,e){this.queueTask((()=>this.binding.updateSource(t,e)))}queueTask(t){const e=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,t())),this.opts),null==e||e.cancel()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.binding.$unbind(t)}}Vi("debounce")(Tf);class $f{constructor(t){this.Yt=new Map,this.Ri=t}bind(t,e,n,...i){if(!("handleChange"in n))throw new Error("AUR0817");if(0===i.length)throw new Error("AUR0818");let s;for(s of(this.Yt.set(n,i),i))this.Ri.addSignalListener(s,n)}unbind(t,e,n){const i=this.Yt.get(n);let s;for(s of(this.Yt.delete(n),i))this.Ri.removeSignalListener(s,n)}}$f.inject=[Ni],Vi("signal")($f);class If extends qi{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.p=t.locator.get(Kn),this.Si=this.p.taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.Ei((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.p.performanceNow()),this.binding.handleChange(t,e,n)}updateSource(t,e){this.Ei((()=>this.binding.updateSource(t,e)))}Ei(t){const e=this.opts,n=this.p,i=this.lastCall+e.delay-n.performanceNow();if(i>0){const s=this.task;e.delay=i,this.task=this.Si.queueTask((()=>{this.lastCall=n.performanceNow(),this.task=null,e.delay=this.delay,t()}),e),null==s||s.cancel()}else this.lastCall=n.performanceNow(),t()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=this.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,super.$unbind(t)}}Vi("throttle")(If);const Of=new class{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,n,i){null==t?n.removeAttribute(i):n.setAttribute(i,t)}};class Pf{bind(t,e,n){n.targetObserver=Of}unbind(t,e,n){}}function Rf(t){const e=t.composedPath()[0];if(this.target===e)return this.selfEventCallSource(t)}Vi("attr")(Pf);class Lf{bind(t,e,n){if(!n.callSource||!n.targetEvent)throw new Error("AUR0801");n.selfEventCallSource=n.callSource,n.callSource=Rf}unbind(t,e,n){n.callSource=n.selfEventCallSource,n.selfEventCallSource=null}}Vi("self")(Lf);const Mf=$l();class jf{constructor(t){this.ns=t,this.type=6}static forNs(t){var e;return null!==(e=Mf[t])&&void 0!==e?e:Mf[t]=new jf(t)}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,n,i){null==t?n.removeAttributeNS(this.ns,i):n.setAttributeNS(this.ns,i,t)}}function Uf(t,e){return t===e}class Nf{constructor(t,e,n,i){this.handler=n,this.type=7,this.v=void 0,this.ov=void 0,this.Bi=void 0,this.Ii=void 0,this.f=0,this.o=t,this.oL=i}getValue(){return this.v}setValue(t,e){const n=this.v;t!==n&&(this.v=t,this.ov=n,this.f=e,this.Ti(),this.Di(),this.queue.add(this))}handleCollectionChange(t,e){this.Di()}handleChange(t,e,n){this.Di()}Di(){const t=this.v,e=this.o,n=Il.call(e,"model")?e.model:e.value,i="radio"===e.type,s=void 0!==e.matcher?e.matcher:Uf;if(i)e.checked=!!s(t,n);else if(!0===t)e.checked=!0;else{let i=!1;if(t instanceof Array)i=-1!==t.findIndex((t=>!!s(t,n)));else if(t instanceof Set){for(const e of t)if(s(e,n)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(s(t,n)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.o,n=Il.call(e,"model")?e.model:e.value,i=e.checked,s=void 0!==e.matcher?e.matcher:Uf;if("checkbox"===e.type){if(t instanceof Array){const e=t.findIndex((t=>!!s(t,n)));return void(i&&-1===e?t.push(n):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===s(e,n)){r=e;break}return void(i&&r===e?t.add(n):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===s(t,n)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=n}this.v=t,this.queue.add(this)}start(){this.handler.subscribe(this.o,this),this.Ti()}stop(){var t,e;this.handler.dispose(),null===(t=this.Bi)||void 0===t||t.unsubscribe(this),this.Bi=void 0,null===(e=this.Ii)||void 0===e||e.unsubscribe(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.start()}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.stop()}flush(){Bf=this.ov,this.ov=this.v,this.subs.notify(this.v,Bf,this.f)}Ti(){var t,e,n,i,s,r,o;const a=this.o;null===(s=null!==(t=this.Ii)&&void 0!==t?t:this.Ii=null!==(n=null===(e=a.$observers)||void 0===e?void 0:e.model)&&void 0!==n?n:null===(i=a.$observers)||void 0===i?void 0:i.value)||void 0===s||s.subscribe(this),null===(r=this.Bi)||void 0===r||r.unsubscribe(this),this.Bi=void 0,"checkbox"===a.type&&(null===(o=this.Bi=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))||void 0===o||o.subscribe(this))}}let Bf;Ns(Nf),qs(Nf);const Ff={childList:!0,subtree:!0,characterData:!0};function Vf(t,e){return t===e}class Df{constructor(t,e,n,i){this.type=7,this.v=void 0,this.ov=void 0,this.H=!1,this.Pi=void 0,this.$i=void 0,this.iO=!1,this.o=t,this.oL=i,this.handler=n}getValue(){return this.iO?this.v:this.o.multiple?function(t){const e=[];if(0===t.length)return e;const n=t.length;let i,s=0;for(;n>s;)i=t[s],i.selected&&(e[e.length]=Il.call(i,"model")?i.model:i.value),++s;return e}(this.o.options):this.o.value}setValue(t,e){this.ov=this.v,this.v=t,this.H=t!==this.ov,this.Oi(t instanceof Array?t:null),0==(64&e)&&this.K()}K(){this.H&&(this.H=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var t;const e=this.v,n=this.o,i=Array.isArray(e),s=null!==(t=n.matcher)&&void 0!==t?t:Vf,r=n.options;let o=r.length;for(;o-- >0;){const t=r[o],n=Il.call(t,"model")?t.model:t.value;t.selected=i?-1!==e.findIndex((t=>!!s(n,t))):!!s(n,e)}}syncValue(){const t=this.o,e=t.options,n=e.length,i=this.v;let s=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||Vf,a=[];for(;s<n;)r=e[s],r.selected&&a.push(Il.call(r,"model")?r.model:r.value),++s;let l;for(s=0;s<i.length;)l=i[s],-1===a.findIndex((t=>!!o(l,t)))?i.splice(s,1):++s;for(s=0;s<a.length;)l=a[s],-1===i.findIndex((t=>!!o(l,t)))&&i.push(l),++s;return!1}let r,o=null;for(;s<n;){if(r=e[s],r.selected){o=Il.call(r,"model")?r.model:r.value;break}++s}return this.ov=this.v,this.v=o,!0}Li(){(this.$i=new this.o.ownerDocument.defaultView.MutationObserver(this.qi.bind(this))).observe(this.o,Ff),this.Oi(this.v instanceof Array?this.v:null),this.iO=!0}Ui(){var t;this.$i.disconnect(),null===(t=this.Pi)||void 0===t||t.unsubscribe(this),this.$i=this.Pi=void 0,this.iO=!1}Oi(t){var e;if(null===(e=this.Pi)||void 0===e||e.unsubscribe(this),this.Pi=void 0,null!=t){if(!this.o.multiple)throw new Error("AUR0654");(this.Pi=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}qi(t){this.syncOptions(),this.syncValue()&&this.queue.add(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.Li())}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.handler.dispose(),this.Ui())}flush(){zf=this.ov,this.ov=this.v,this.subs.notify(this.v,zf,0)}}let zf,qf;Ns(Df),qs(Df);class Hf{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.styles={},this.version=0,this.H=!1}getValue(){return this.obj.style.cssText}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}_i(t){const e=[],n=/url\([^)]+$/;let i,s,r,o,a=0,l="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),l+=t.substring(a,i),a=i+1,n.test(l)?l+=";":(s=l.indexOf(":"),r=l.substring(0,s).trim(),o=l.substring(s+1).trim(),e.push([r,o]),l="");return e}Fi(t){let e,n;const i=[];for(n in t)if(e=t[n],null!=e)if(Ml(e)){if(n.startsWith("--")){i.push([n,e]);continue}i.push([Me(n),e])}else i.push(...this.Vi(e));return i}Mi(t){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...this.Vi(t[i]));return n}return Hn}Vi(t){return Ml(t)?this._i(t):t instanceof Array?this.Mi(t):t instanceof Object?this.Fi(t):Hn}K(){if(this.H){this.H=!1;const t=this.value,e=this.styles,n=this.Vi(t);let i,s,r,o,a=this.version;this.ov=t;let l=0;const c=n.length;for(;l<c;++l)s=n[l],r=s[0],o=s[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Il.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let n="";null!=e&&Ll(e.indexOf)&&e.includes("!important")&&(n="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,n)}bind(t){this.value=this.ov=this.obj.style.cssText}}class Zf{constructor(t,e,n){this.handler=n,this.type=7,this.v="",this.ov="",this.H=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.H=!0,this.handler.config.readonly||0!=(64&e)||this.K(e))}K(t){var e;this.H&&(this.H=!1,this.o[this.k]=null!==(e=this.v)&&void 0!==e?e:this.handler.config.default,0==(2&t)&&this.queue.add(this))}handleEvent(){this.ov=this.v,this.v=this.o[this.k],this.ov!==this.v&&(this.H=!1,this.queue.add(this))}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.v=this.ov=this.o[this.k])}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.handler.dispose()}flush(){qf=this.ov,this.ov=this.v,this.subs.notify(this.v,qf,0)}}Ns(Zf),qs(Zf);const Wf="http://www.w3.org/1999/xlink",Kf="http://www.w3.org/XML/1998/namespace",_f="http://www.w3.org/2000/xmlns/",Qf=Object.assign($l(),{"xlink:actuate":["actuate",Wf],"xlink:arcrole":["arcrole",Wf],"xlink:href":["href",Wf],"xlink:role":["role",Wf],"xlink:show":["show",Wf],"xlink:title":["title",Wf],"xlink:type":["type",Wf],"xml:lang":["lang",Kf],"xml:space":["space",Kf],xmlns:["xmlns",_f],"xmlns:xlink":["xlink",_f]}),Gf=new Fa;Gf.type=6;class Xf{constructor(t){var e;this.type=null!==(e=t.type)&&void 0!==e?e:Zf,this.events=t.events,this.readonly=t.readonly,this.default=t.default}}class Yf{constructor(t,e,n,i){this.locator=t,this.platform=e,this.dirtyChecker=n,this.svgAnalyzer=i,this.allowDirtyCheck=!0,this.ji=$l(),this.Ni=$l(),this.Wi=$l(),this.Hi=$l();const s=["change","input"],r={events:s,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:s,default:0},checked:{type:Nf,events:s},files:{events:s,readonly:!0}},SELECT:{value:{type:Df,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){Fn.aliasTo(Za,Yf).register(t),Fn.singleton(Za,Yf).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,n){var i,s;const r=this.ji;let o;if(Ml(t))o=null!==(i=r[t])&&void 0!==i?i:r[t]=$l(),null==o[e]?o[e]=new Xf(n):Jf(t,e);else for(const n in t){o=null!==(s=r[n])&&void 0!==s?s:r[n]=$l();const i=t[n];for(e in i)null==o[e]?o[e]=new Xf(i[e]):Jf(n,e)}}useConfigGlobal(t,e){const n=this.Ni;if("object"==typeof t)for(const e in t)null==n[e]?n[e]=new Xf(t[e]):Jf("*",e);else null==n[t]?n[t]=new Xf(e):Jf("*",t)}getAccessor(t,e,n){var i;if(e in this.Hi||e in(null!==(i=this.Wi[t.tagName])&&void 0!==i?i:Zn))return this.getObserver(t,e,n);switch(e){case"src":case"href":case"role":return Of;default:{const n=Qf[e];return void 0!==n?jf.forNs(n[1]):Pl(t,e,this.svgAnalyzer)?Of:Gf}}}overrideAccessor(t,e){var n,i,s,r;let o;if(Ml(t))o=null!==(n=(s=this.Wi)[t])&&void 0!==n?n:s[t]=$l(),o[e]=!0;else for(const e in t)for(const n of t[e])o=null!==(i=(r=this.Wi)[e])&&void 0!==i?i:r[e]=$l(),o[n]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Hi[e]=!0}getObserver(t,e,n){var i,s;switch(e){case"role":return Of;case"class":return new Uh(t);case"css":case"style":return new Hf(t)}const r=null!==(s=null===(i=this.ji[t.tagName])||void 0===i?void 0:i[e])&&void 0!==s?s:this.Ni[e];if(null!=r)return new r.type(t,e,new vd(r),n,this.locator);const o=Qf[e];if(void 0!==o)return jf.forNs(o[1]);if(Pl(t,e,this.svgAnalyzer))return Of;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw new Error(`AUR0652:${String(e)}`)}return new Da(t,e)}}function Jf(t,e){throw new Error(`AUR0653:${String(e)}@${t}`)}Yf.inject=[pn,mc,La,bc];class tg{constructor(t){this.oL=t}bind(t,e,n,...i){if(0===i.length)throw new Error("AUR0802");if(n.mode!==Os.twoWay&&n.mode!==Os.fromView)throw new Error("AUR0803");const s=this.oL.getObserver(n.target,n.targetProperty);if(!s.handler)throw new Error("AUR0804");n.targetObserver=s;const r=s.handler;s.originalHandler=r,s.handler=new vd(new Xf({default:r.config.default,events:i,readonly:r.config.readonly}))}unbind(t,e,n){n.targetObserver.handler.dispose(),n.targetObserver.handler=n.targetObserver.originalHandler,n.targetObserver.originalHandler=null}}tg.inject=[Ha],Vi("updateTrigger")(tg);class eg{constructor(t,e){this.zi=t,this.p=e,this.Gi=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Xi():this.Gi=!0}attached(){this.Gi&&(this.Gi=!1,this.Xi()),this.zi.addEventListener("focus",this),this.zi.addEventListener("blur",this)}afterDetachChildren(){const t=this.zi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Ki||(this.value=!1)}Xi(){const t=this.zi,e=this.Ki,n=this.value;n&&!e?t.focus():!n&&e&&t.blur()}get Ki(){return this.zi===this.p.document.activeElement}}eg.inject=[Yu,mc],vl([Nl({mode:Os.twoWay})],eg.prototype,"value",void 0),uh("focus")(eg);let ng=class{constructor(t,e,n){this.el=t,this.p=e,this.Yi=!1,this.Zi=null,this.$val="",this.$prio="",this.update=()=>{this.Zi=null,Boolean(this.value)!==this.Ji&&(this.Ji===this.Qi?(this.Ji=!this.Qi,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Ji=this.Qi,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.Ji=this.Qi="hide"!==n.alias}binding(){this.Yi=!0,this.update()}detaching(){var t;this.Yi=!1,null===(t=this.Zi)||void 0===t||t.cancel(),this.Zi=null}valueChanged(){this.Yi&&null===this.Zi&&(this.Zi=this.p.domWriteQueue.queueTask(this.update))}};vl([Nl],ng.prototype,"value",void 0),ng=vl([ml(0,Yu),ml(1,mc),ml(2,kd)],ng),function(...t){return function(e){const n=Oi("aliases"),i=Ti(n,e);void 0===i?Ii(n,t,e):i.push(...t)}}("hide")(ng),uh("show")(ng);class ig{constructor(t,e,n){this.id=Ne("au$component"),this.strict=!1,this.p=n,this.te=n.document.createElement("div"),this.view=t.create(),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)nd.set(t,e);else{const n=t.childNodes;for(let t=0,i=n.length;t<i;++t)nd.set(n[t],e)}}(this.view.nodes,e)}attaching(t,e,n){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const i=this.te=this.ie();return this.view.setHost(i),this.ee(t,i,n)}detaching(t,e,n){return this.se(t,this.te,n)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.te,n=this.te=this.ie();if(e===n)return;this.view.setHost(n);const i=Ze(this.se(null,n,t.flags),(()=>this.ee(null,n,t.flags)));i instanceof Promise&&i.catch((t=>{throw t}))}ee(t,e,n){const{activating:i,callbackContext:s,view:r}=this;return r.setHost(e),Ze(null==i?void 0:i.call(s,e,r),(()=>this.ne(t,e,n)))}ne(t,e,n){const{$controller:i,view:s}=this;return null!==t?Ze(s.activate(null!=t?t:s,i,n,i.scope),(()=>this.re(e))):(s.nodes.appendTo(e),this.re(e))}re(t){const{activated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}se(t,e,n){const{deactivating:i,callbackContext:s,view:r}=this;return Ze(null==i?void 0:i.call(s,e,r),(()=>this.oe(t,e,n)))}oe(t,e,n){const{$controller:i,view:s}=this;return null!==t?Ze(s.deactivate(t,i,n),(()=>this.le(e))):(s.nodes.remove(),this.le(e))}le(t){const{deactivated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}ie(){const t=this.p,e=t.document;let n=this.target,i=this.renderContext;if(""===n){if(this.strict)throw new Error("AUR0811");return e.body}if(Ml(n)){let s=e;Ml(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(s=i),n=s.querySelector(n)}if(n instanceof t.Node)return n;if(null==n){if(this.strict)throw new Error("AUR0812");return e.body}return n}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}ig.inject=[su,td,mc],vl([Nl({primary:!0})],ig.prototype,"target",void 0),vl([Nl({callback:"targetChanged"})],ig.prototype,"renderContext",void 0),vl([Nl()],ig.prototype,"strict",void 0),vl([Nl()],ig.prototype,"deactivating",void 0),vl([Nl()],ig.prototype,"activating",void 0),vl([Nl()],ig.prototype,"deactivated",void 0),vl([Nl()],ig.prototype,"activated",void 0),vl([Nl()],ig.prototype,"callbackContext",void 0),dh("portal")(ig);class sg extends class{constructor(t,e,n){this.fs=n,this.id=Ne("au$component"),this.view=t.create().setLocation(e)}attaching(t,e,n){const{$controller:i}=this;return this.view.activate(t,i,n|this.fs,i.scope)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}{constructor(t,e){super(t,e,32)}}sg.inject=[su,td],dh("observe-shallow")(sg);class rg{constructor(t,e,n){this.ifFactory=t,this.location=e,this.work=n,this.id=Ne("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.he=!1,this.ae=0}attaching(t,e,n){let i;const s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;return Ze(this.pending,(()=>{var e;o()&&(this.pending=void 0,i=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=i&&(i.setLocation(this.location),this.pending=Ze(i.activate(t,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e,n){return this.he=!0,Ze(this.pending,(()=>{var e;this.he=!1,this.pending=void 0,null===(e=this.view)||void 0===e||e.deactivate(t,this.$controller,n)}))}valueChanged(t,e,n){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;this.work.start();const i=this.view,s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;let a;return Ze(Ze(this.pending,(()=>this.pending=Ze(null==i?void 0:i.deactivate(i,s,n),(()=>{var e;if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=a))return a.setLocation(this.location),Ze(a.activate(a,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var t,e;null===(t=this.ifView)||void 0===t||t.dispose(),null===(e=this.elseView)||void 0===e||e.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}rg.inject=[su,td,Wu],vl([Nl],rg.prototype,"value",void 0),vl([Nl({set:t=>""===t||!!t&&"false"!==t})],rg.prototype,"cache",void 0),dh("if")(rg);class og{constructor(t){this.factory=t,this.id=Ne("au$component")}link(t,e,n,i){const s=t.children,r=s[s.length-1];if(r instanceof rg)r.elseFactory=this.factory;else{if(!(r.viewModel instanceof rg))throw new Error("AUR0810");r.viewModel.elseFactory=this.factory}}}function ag(t){t.dispose()}og.inject=[su],dh({name:"else"})(og);const lg=[38962,36913];class cg{constructor(t,e,n){this.l=t,this.ce=e,this.f=n,this.id=Ne("au$component"),this.views=[],this.key=void 0,this.ue=void 0,this.fe=!1,this.de=!1,this.me=null,this.ve=void 0,this.ge=!1}binding(t,e,n){const i=this.ce.bindings,s=i.length;let r,o,a=0;for(;s>a;++a)if(r=i[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.sourceExpression,this.pe=r;let t=o.iterable;for(;null!=t&&lg.includes(t.$kind);)t=t.expression,this.fe=!0;this.me=t;break}this.we(n);const l=o.declaration;(this.ge=90137===l.$kind||106521===l.$kind)||(this.local=l.evaluate(n,this.$controller.scope,r.locator,null))}attaching(t,e,n){return this.be(n),this.xe(t,n)}detaching(t,e,n){return this.we(n),this.ye(t,n)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.we(t),this.be(t);const n=Ze(this.ye(null,t),(()=>this.xe(null,t)));n instanceof Promise&&n.catch(Ul)}handleCollectionChange(t,e){const{$controller:n}=this;if(n.isActive){if(this.fe){if(this.de)return;return this.de=!0,this.items=this.forOf.iterable.evaluate(e,n.scope,this.pe.locator,null),void(this.de=!1)}if(e|=n.flags,this.be(e),void 0===t){const t=Ze(this.ye(null,e),(()=>this.xe(null,e)));t instanceof Promise&&t.catch(Ul)}else{const n=this.views.length,i=function(t){let e=0,n=0,i=0;const s=function(t){const e=t.slice();return e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t),r=s.length;for(;i<r;++i){for(;s.deletedItems[n]<=i-e;)++n,--e;-2===s[i]?++e:s[i]+=e}return s}(t);if(i.deletedItems.length>0){i.deletedItems.sort(Be);const t=Ze(this.ke(i,e),(()=>this.Ce(n,i,e)));t instanceof Promise&&t.catch(Ul)}else this.Ce(n,i,e)}}}we(t){var e;const n=this.$controller.scope;let i=this.Ae,s=this.fe;s&&(i=this.Ae=null!==(e=this.me.evaluate(t,n,this.pe.locator,null))&&void 0!==e?e:null,s=this.fe=!Object.is(this.items,i));const r=this.ue;if(4&t)void 0!==r&&r.unsubscribe(this);else if(this.$controller.isActive){const t=this.ue=function(t){let e;return t instanceof Array?e=br(t):t instanceof Map?e=Vr(t):t instanceof Set&&(e=Ir(t)),e}(s?i:this.items);r!==t&&r&&r.unsubscribe(this),t&&t.subscribe(this)}}be(t){const e=this.items;if(e instanceof Array)return void(this.ve=e);if(void 0===this.forOf)return;const n=[];this.forOf.iterate(t,e,((t,e,i)=>{n[e]=i})),this.ve=n}xe(t,e){let n,i,s,r;const{$controller:o,f:a,local:l,l:c,items:h}=this,u=o.scope,d=this.forOf,p=d.count(e,h),f=this.views=Array(p);if(d.iterate(e,h,((h,g,v)=>{s=f[g]=a.create().setLocation(c),s.nodes.unlink(),this.ge?d.declaration.assign(e,r=ji.fromParent(u,Mi.create()),this.pe.locator,v):r=ji.fromParent(u,Mi.create(l,v)),pg(r.overrideContext,g,p),i=s.activate(null!=t?t:s,o,e,r),i instanceof Promise&&(null!=n?n:n=[]).push(i)})),void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ye(t,e){let n,i,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),i=s.deactivate(null!=t?t:s,a,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ke(t,e){let n,i,s;const{$controller:r,views:o}=this,a=t.deletedItems,l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),i=s.deactivate(s,r,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);c=0;let h=0;for(;l>c;++c)h=a[c]-c,o.splice(h,1);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}Ce(t,e,n){var i;let s,r,o,a,l=0;const{$controller:c,f:h,local:u,ve:d,l:p,views:f}=this,g=e.length;for(;g>l;++l)-2===e[l]&&(o=h.create(),f.splice(l,0,o));if(f.length!==g)throw new Error(`AUR0814:${f.length}!=${g}`);const v=c.scope,m=e.length;!function(t,e){const n=t.slice(),i=e.length;let s=0,r=0;for(;s<i;)r=e[s],-2!==r&&(t[s]=n[r]),++s}(f,e);const b=function(t){const e=t.length;e>hg&&(hg=e,ug=new Int32Array(e),dg=new Int32Array(e));let n=0,i=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=ug[n],s=t[o],-2!==s&&s<i){dg[r]=o,ug[++n]=r;continue}for(a=0,l=n;a<l;)c=a+l>>1,s=t[ug[c]],-2!==s&&s<i?a=c+1:l=c;s=t[ug[a]],(i<s||-2===s)&&(a>0&&(dg[r]=ug[a-1]),ug[a]=r)}r=++n;const h=new Int32Array(r);for(i=ug[n-1];n-- >0;)h[n]=i,i=dg[i];for(;r-- >0;)ug[r]=0;return h}(e),y=b.length;let w,x=y-1;for(l=m-1;l>=0;--l)o=f[l],w=f[l+1],o.nodes.link(null!==(i=null==w?void 0:w.nodes)&&void 0!==i?i:p),-2===e[l]?(this.ge?this.forOf.declaration.assign(n,a=ji.fromParent(v,Mi.create()),this.pe.locator,d[l]):a=ji.fromParent(v,Mi.create(u,d[l])),pg(a.overrideContext,l,m),o.setLocation(p),r=o.activate(o,c,n,a),r instanceof Promise&&(null!=s?s:s=[]).push(r)):x<0||1===y||l!==b[x]?(pg(o.scope.overrideContext,l,m),o.nodes.insertBefore(o.location)):(t!==m&&pg(o.scope.overrideContext,l,m),--x);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(ag),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}cg.inject=[td,Iu,su],vl([Nl],cg.prototype,"items",void 0),dh("repeat")(cg);let hg=16,ug=new Int32Array(hg),dg=new Int32Array(hg);function pg(t,e,n){const i=0===e,s=e===n-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=s,t.$middle=!i&&!s,t.$even=r,t.$odd=!r,t.$length=n}class fg{constructor(t,e){this.id=Ne("au$component"),this.id=Ne("au$component"),this.view=t.create().setLocation(e)}valueChanged(t,e,n){const i=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(i.isActive&&null!=s)for(r=ji.fromParent(i.scope,void 0===t?{}:t),a=s.length;a>o;++o)s[o].$bind(2,r)}attaching(t,e,n){const{$controller:i,value:s}=this,r=ji.fromParent(i.scope,void 0===s?{}:s);return this.view.activate(t,i,n,r)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}fg.inject=[su,td],vl([Nl],fg.prototype,"value",void 0),dh("with")(fg);let gg=class{constructor(t,e){this.f=t,this.l=e,this.id=Ne("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return this.queue((()=>i.activate(t,s,n,s.scope))),this.queue((()=>this.swap(t,n,this.value))),this.promise}detaching(t,e,n){return this.queue((()=>this.view.deactivate(t,this.$controller,n))),this.promise}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}valueChanged(t,e,n){this.$controller.isActive&&this.queue((()=>this.swap(null,n,this.value)))}caseChanged(t,e){this.queue((()=>this.Re(t,e)))}Re(t,e){const n=t.isMatch(this.value,e),i=this.activeCases,s=i.length;if(!n)return s>0&&i[0].id===t.id?this.Se(null,e):void 0;if(s>0&&i[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,n=e.indexOf(t);for(let t=n,i=e.length;t<i&&o;t++){const n=e[t];r.push(n),o=n.fallThrough}}else r.push(t);return Ze(this.Se(null,e,r),(()=>(this.activeCases=r,this.Ee(null,e))))}swap(t,e,n){const i=[];let s=!1;for(const t of this.cases)if((s||t.isMatch(n,e))&&(i.push(t),s=t.fallThrough),i.length>0&&!s)break;const r=this.defaultCase;return 0===i.length&&void 0!==r&&i.push(r),Ze(this.activeCases.length>0?this.Se(t,e,i):void 0,(()=>{if(this.activeCases=i,0!==i.length)return this.Ee(t,e)}))}Ee(t,e){const n=this.$controller;if(!n.isActive)return;const i=this.activeCases,s=i.length;if(0===s)return;const r=n.scope;return 1===s?i[0].activate(t,e,r):We(...i.map((n=>n.activate(t,e,r))))}Se(t,e,n=[]){const i=this.activeCases,s=i.length;if(0!==s){if(1===s){const s=i[0];return n.includes(s)?void 0:(i.length=0,s.deactivate(t,e))}return Ze(We(...i.reduce(((i,s)=>(n.includes(s)||i.push(s.deactivate(t,e)),i)),[])),(()=>{i.length=0}))}}queue(t){const e=this.promise;let n;n=this.promise=Ze(Ze(e,t),(()=>{this.promise===n&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};vl([Nl],gg.prototype,"value",void 0),gg=vl([dh("switch"),ml(0,su),ml(1,td)],gg);let vg=class{constructor(t,e,n,i){this.f=t,this.Be=e,this.l=n,this.id=Ne("au$component"),this.fallThrough=!1,this.view=void 0,this.Ie=i.config.level<=1,this.Ut=i.scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,n,i){const s=t.parent,r=null==s?void 0:s.viewModel;if(!(r instanceof gg))throw new Error("AUR0815");this.$switch=r,this.linkToSwitch(r)}detaching(t,e,n){return this.deactivate(t,n)}isMatch(t,e){this.Ut.debug("isMatch()");const n=this.value;return Array.isArray(n)?(void 0===this.ue&&(this.ue=this.Te(e,n)),n.includes(t)):n===t}valueChanged(t,e,n){var i;Array.isArray(t)?(null===(i=this.ue)||void 0===i||i.unsubscribe(this),this.ue=this.Te(n,t)):void 0!==this.ue&&this.ue.unsubscribe(this),this.$switch.caseChanged(this,n)}handleCollectionChange(t,e){this.$switch.caseChanged(this,e)}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(null!=t?t:i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(null!=t?t:n,this.$controller,e)}dispose(){var t,e;null===(t=this.ue)||void 0===t||t.unsubscribe(this),null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Te(t,e){const n=this.Be.getArrayObserver(e);return n.subscribe(this),n}accept(t){var e;return!0===this.$controller.accept(t)||(null===(e=this.view)||void 0===e?void 0:e.accept(t))}};vg.inject=[su,Ha,td,ei],vl([Nl],vg.prototype,"value",void 0),vl([Nl({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:Os.oneTime})],vg.prototype,"fallThrough",void 0),vg=vl([dh("case")],vg);let mg=class extends vg{linkToSwitch(t){if(void 0!==t.defaultCase)throw new Error("AUR0816");t.defaultCase=this}};mg=vl([dh("default-case")],mg);let bg=class{constructor(t,e,n,i){this.f=t,this.l=e,this.p=n,this.id=Ne("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=i.scopeTo("promise.resolve")}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return Ze(i.activate(t,s,n,this.viewScope=ji.fromParent(s.scope,{})),(()=>this.swap(t,n)))}valueChanged(t,e,n){this.$controller.isActive&&this.swap(null,n)}swap(t,e){var n,i;const s=this.value;if(!(s instanceof Promise))return void this.logger.warn(`The value '${String(s)}' is not a promise. No change will be done.`);const r=this.p.domWriteQueue,o=this.fulfilled,a=this.rejected,l=this.pending,c=this.viewScope;let h;const u={reusable:!1},d=()=>{We(h=(this.preSettledTask=r.queueTask((()=>We(null==o?void 0:o.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==l?void 0:l.activate(t,e,c))),u)).result.catch((t=>{if(!(t instanceof il))throw t})),s.then((n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>We(null==l?void 0:l.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==o?void 0:o.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())}),(n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>We(null==l?void 0:l.deactivate(t,e),null==o?void 0:o.deactivate(t,e),null==a?void 0:a.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())})))};1===(null===(n=this.postSettledTask)||void 0===n?void 0:n.status)?this.postSettlePromise.then(d):(null===(i=this.postSettledTask)||void 0===i||i.cancel(),d())}detaching(t,e,n){var i,s;return null===(i=this.preSettledTask)||void 0===i||i.cancel(),null===(s=this.postSettledTask)||void 0===s||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};vl([Nl],bg.prototype,"value",void 0),bg=vl([dh("promise"),ml(0,su),ml(1,td),ml(2,mc),ml(3,ei)],bg);let yg=class{constructor(t,e){this.f=t,this.l=e,this.id=Ne("au$component"),this.view=void 0}link(t,e,n,i){kg(t).pending=this}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};vl([Nl({mode:Os.toView})],yg.prototype,"value",void 0),yg=vl([dh("pending"),ml(0,su),ml(1,td)],yg);let wg=class{constructor(t,e){this.f=t,this.l=e,this.id=Ne("au$component"),this.view=void 0}link(t,e,n,i){kg(t).fulfilled=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};vl([Nl({mode:Os.fromView})],wg.prototype,"value",void 0),wg=vl([dh("then"),ml(0,su),ml(1,td)],wg);let xg=class{constructor(t,e){this.f=t,this.l=e,this.id=Ne("au$component"),this.view=void 0}link(t,e,n,i){kg(t).rejected=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};function kg(t){const e=t.parent,n=null==e?void 0:e.viewModel;if(n instanceof bg)return n;throw new Error("AUR0813")}vl([Nl({mode:Os.fromView})],xg.prototype,"value",void 0),xg=vl([dh("catch"),ml(0,su),ml(1,td)],xg);let Sg=class{"promise.resolve"(t,e,n){return new nc(t,e,"promise","bind")}};Sg=vl([oc({pattern:"promise.resolve",symbols:""})],Sg);let Cg=class{then(t,e,n){return new nc(t,e,"then","from-view")}};Cg=vl([oc({pattern:"then",symbols:""})],Cg);let Ag=class{catch(t,e,n){return new nc(t,e,"catch","from-view")}};Ag=vl([oc({pattern:"catch",symbols:""})],Ag);class Eg{constructor(t,e,n){this.node=t,this.instructions=e,this.De=n,this.Pe=void 0}get definition(){return void 0===this.Pe&&(this.Pe=Ch.create({name:jh.generateName(),template:this.node,needsCompile:Ml(this.node),instructions:this.instructions,dependencies:this.De})),this.Pe}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return t.root.get(pu).getViewFactory(this.definition,t.createChild().register(...this.De))}mergeInto(t,e,n){t.appendChild(this.node),e.push(...this.instructions),n.push(...this.De)}}function Tg(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const o=n[r];switch(typeof o){case"string":e.appendChild(t.document.createTextNode(o));break;case"object":o instanceof t.Node?e.appendChild(o):"mergeInto"in o&&o.mergeInto(e,i,s)}}}function $g(t,e){const n=e.to;return void 0!==n&&"subject"!==n&&"composing"!==n&&(t[n]=e),t}class Ig{constructor(t,e,n,i){this.p=t,this.$e=e,this.Oe=n,this.r=i,this.id=Ne("au$component"),this.component=void 0,this.composing=!1,this.view=void 0,this.Le=void 0,this.qe=e.props.reduce($g,{})}attaching(t,e,n){const{component:i,view:s}=this;return void 0===s||this.Le!==i?(this.Le=i,this.composing=!0,this.compose(void 0,i,t,n)):this.compose(s,i,t,n)}detaching(t,e,n){return this.oe(this.view,t,n)}componentChanged(t,e,n){const{$controller:i}=this;if(!i.isActive)return;if(this.Le===t)return;this.Le=t,this.composing=!0,n|=i.flags;const s=Ze(this.oe(this.view,null,n),(()=>this.compose(void 0,t,null,n)));s instanceof Promise&&s.catch((t=>{throw t}))}compose(t,e,n,i){return Ze(void 0===t?Ze(e,(t=>this.Ue(t,i))):t,(t=>this.ne(this.view=t,n,i)))}oe(t,e,n){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,n)}ne(t,e,n){const{$controller:i}=this;return Ze(null==t?void 0:t.activate(null!=e?e:t,i,n,i.scope),(()=>{this.composing=!1}))}Ue(t,e){const n=this._e(t,e);if(n)return n.setLocation(this.$controller.location),n.lockScope(this.$controller.scope),n}_e(t,e){if(!t)return;const n=this.Oe.controller.container;if("object"==typeof t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(n);if("create"in t)return t.create();if("template"in t)return this.r.getViewFactory(Ch.getOrCreate(t),n).create()}if(Ml(t)){const e=n.find(jh,t);if(null==e)throw new Error(`AUR0809:${t}`);t=e.Type}return function(t,e,n,i){if(Ml(e))return function(t,e,n,i){const s=[],r=[],o=[],a=t.document.createElement(e);let l=!1;return n&&Object.keys(n).forEach((t=>{const e=n[t];Sd(e)?(l=!0,s.push(e)):a.setAttribute(t,e)})),l&&(a.className="au",r.push(s)),i&&Tg(t,a,i,r,o),new Eg(a,r,o)}(t,e,n,i);if(jh.isType(e))return function(t,e,n,i){const s=jh.getDefinition(e),r=[],o=[r],a=[],l=[],c=s.bindables,h=t.document.createElement(s.name);return h.className="au",a.includes(e)||a.push(e),r.push(new Od(s,void 0,l,null,!1,void 0)),n&&Object.keys(n).forEach((t=>{const e=n[t];Sd(e)?l.push(e):void 0===c[t]?l.push(new Nd(e,t)):l.push(new Id(e,t))})),i&&Tg(t,h,i,o,a),new Eg(h,o,a)}(t,e,n,i);throw new Error("Invalid Tag or Type.")}(this.p,t,this.qe,this.$controller.host.childNodes).createView(n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Ig.inject=[mc,kd,Ou,pu],vl([Nl],Ig.prototype,"component",void 0),vl([Nl({mode:Os.fromView})],Ig.prototype,"composing",void 0),xh({name:"au-render",template:null,containerless:!0,capture:!0})(Ig);class Og{constructor(t,e,n,i,s,r,o){this.c=t,this.parent=e,this.host=n,this.l=i,this.p=s,this.scopeBehavior="auto",this.Fe=void 0,this.r=t.get(pu),this.$e=r,this.Ve=o}static get inject(){return[dn,Iu,Yu,td,mc,kd,mn(Rg)]}get pending(){return this.Me}get composition(){return this.Fe}attaching(t,e,n){return this.Me=Ze(this.queue(new Lg(this.view,this.viewModel,this.model,void 0),t),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)}))}detaching(t){const e=this.Fe,n=this.Me;return this.Ve.invalidate(),this.Fe=this.Me=void 0,Ze(n,(()=>null==e?void 0:e.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Fe?this.Me=Ze(this.Me,(()=>Ze(this.queue(new Lg(this.view,this.viewModel,this.model,t),void 0),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)})))):this.Fe.update(this.model)}queue(t,e){const n=this.Ve,i=this.Fe;return Ze(n.create(t),(t=>n.isCurrent(t)?Ze(this.compose(t),(s=>n.isCurrent(t)?Ze(s.activate(e),(()=>n.isCurrent(t)?(this.Fe=s,Ze(null==i?void 0:i.deactivate(e),(()=>t))):Ze(s.controller.deactivate(s.controller,this.$controller,4),(()=>(s.controller.dispose(),t))))):(s.controller.dispose(),t))):t))}compose(t){let e,n,i;const{view:s,viewModel:r,model:o}=t.change,{c:a,host:l,$controller:c,l:h}=this,u=this.getDef(r),d=a.createChild(),p=null==h?l.parentNode:h.parentNode;if(null!==u){if(u.containerless)throw new Error("AUR0806");null==h?(n=l,i=()=>{}):(n=p.insertBefore(this.p.document.createElement(u.name),h),i=()=>{n.remove()}),e=this.getVm(d,r,n)}else n=null==h?l:h,e=this.getVm(d,r,n);const f=()=>{if(null!==u){const s=bu.$el(d,e,n,{projections:this.$e.projections},u);return new Ug(s,(t=>s.activate(null!=t?t:s,c,2,c.scope.parentScope)),(t=>Ze(s.deactivate(null!=t?t:s,c,4),i)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}{const i=Ch.create({name:jh.generateName(),template:s}),r=this.r.getViewFactory(i,d),o=bu.$view(r,c),a="auto"===this.scopeBehavior?ji.fromParent(this.parent.scope,e):ji.create(e);return rd(n)?o.setLocation(n):o.setHost(n),new Ug(o,(t=>o.activate(null!=t?t:o,c,2,a)),(t=>o.deactivate(null!=t?t:o,c,4)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}};return"activate"in e?Ze(e.activate(o),(()=>f())):f()}getVm(t,e,n){if(null==e)return new Pg;if("object"==typeof e)return e;const i=this.p,s=rd(n);t.registerResolver(i.Element,t.registerResolver(Yu,new Vn("ElementResolver",s?null:n))),t.registerResolver(td,new Vn("IRenderLocation",s?n:null));const r=t.invoke(e);return t.registerResolver(e,new Vn("au-compose.viewModel",r)),r}getDef(t){const e=Ll(t)?t:null==t?void 0:t.constructor;return jh.isType(e)?jh.getDefinition(e):null}}vl([Nl],Og.prototype,"view",void 0),vl([Nl],Og.prototype,"viewModel",void 0),vl([Nl],Og.prototype,"model",void 0),vl([Nl({set:t=>{if("scoped"===t||"auto"===t)return t;throw new Error("AUR0805")}})],Og.prototype,"scopeBehavior",void 0),xh("au-compose")(Og);class Pg{}class Rg{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return Ze(t.load(),(t=>new jg(++this.id,t)))}invalidate(){this.id++}}class Lg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}load(){return Rl(this.view)||Rl(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new Mg(t,e,this.model,this.src))):new Mg(this.view,this.viewModel,this.model,this.src)}}class Mg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}}class jg{constructor(t,e){this.id=t,this.change=e}}class Ug{constructor(t,e,n,i,s){this.controller=t,this.start=e,this.stop=n,this.update=i,this.context=s,this.state=0}activate(t){if(0!==this.state)throw new Error(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw new Error("AUR0808");default:this.state=-1}}}class Ng{constructor(t,e,n,i){var s,r;let o;this.je=null,this.Ne=null;const a=e.auSlot,l=null===(r=null===(s=n.instruction)||void 0===s?void 0:s.projections)||void 0===r?void 0:r[a.name];null==l?(o=i.getViewFactory(a.fallback,n.controller.container),this.We=!1):(o=i.getViewFactory(l,n.parent.controller.container),this.We=!0),this.Oe=n,this.view=o.create().setLocation(t)}static get inject(){return[td,kd,Ou,pu]}binding(t,e,n){var i;let s;this.je=this.$controller.scope.parentScope,this.We&&(s=this.Oe.controller.scope.parentScope,(this.Ne=ji.fromParent(s,s.bindingContext)).overrideContext.$host=null!==(i=this.expose)&&void 0!==i?i:this.je.bindingContext)}attaching(t,e,n){return this.view.activate(t,this.$controller,n,this.We?this.Ne:this.je)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}exposeChanged(t){this.We&&null!=this.Ne&&(this.Ne.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}vl([Nl],Ng.prototype,"expose",void 0),xh({name:"au-slot",template:null,containerless:!0})(Ng);const Bg=cn.createInterface("ISanitizer",(t=>t.singleton(class{sanitize(){throw new Error('"sanitize" method not implemented')}})));let Fg=class{constructor(t){this.He=t}toView(t){return null==t?null:this.He.sanitize(t)}};Fg=vl([ml(0,Bg)],Fg),Ki("sanitize")(Fg);let Vg=class{constructor(t){this.ze=t}toView(t,e){return this.ze.getViewComponentForObject(t,e)}};Vg=vl([ml(0,uu)],Vg),Ki("view")(Vg);const Dg=Tf,zg=Sf,qg=Cf,Hg=Af,Zg=$f,Wg=If,Kg=Ef,_g=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return Fn.singleton(qd,this).register(t)}compile(t,e,n){var i,s,r,o;const a=Ch.getOrCreate(t);if(null===a.template||void 0===a.template)return a;if(!1===a.needsCompile)return a;null!=n||(n=nf);const l=new Jp(t,e,n,null,null,void 0),c=Ml(a.template)||!t.enhance?l.ni.createTemplate(a.template):a.template,h="TEMPLATE"===c.nodeName&&null!=c.content,u=h?c.content:c,d=e.get(function(t){function e(t,n,i){cn.inject(e)(t,n,i)}return e.$isResolver=!0,e.resolve=function(e,n){return n.root===n?n.getAll(t,!1):n.has(t,!1)?n.getAll(t,!1).concat(n.root.getAll(t,!1)):n.root.getAll(t,!1)},e}(gf)),p=d.length;let f=0;if(p>0)for(;p>f;)null===(s=(i=d[f]).compiling)||void 0===s||s.call(i,c),++f;if(c.hasAttribute(df))throw new Error("AUR0701");return this.ri(u,l),this.oi(u,l),Ch.create({...t,name:t.name||yf(),dependencies:(null!==(r=t.dependencies)&&void 0!==r?r:Hn).concat(null!==(o=l.deps)&&void 0!==o?o:Hn),instructions:l.rows,surrogates:h?this.li(c,l):Hn,template:c,hasSlots:l.hasSlot,needsCompile:!1})}compileSpread(t,e,n,i){var s;const r=new Jp(t,n,nf,null,null,void 0),o=[],a=r.hi(i.nodeName.toLowerCase()),l=null!==a,c=r.ep,h=e.length;let u,d,p,f,g,v,m,b,y,w,x=0,k=null,S=null;for(;h>x;++x)if(u=e[x],y=u.target,w=u.rawValue,S=r.ai(u),null!==S&&(1&S.type)>0)rf.node=i,rf.attr=u,rf.bindable=null,rf.def=null,o.push(S.build(rf));else if(k=r.ui(y),null===k)if(null===S){if(m=c.parse(w,1),l&&(f=cf.from(a,!1),g=f.attrs[y],void 0!==g)){m=c.parse(w,1),o.push(new zd(null==m?new Id(w,g.property):new Cd(m,g.property)));continue}if(null!=m)o.push(new Cd(m,null!==(s=r.m.map(i,y))&&void 0!==s?s:Re(y)));else switch(y){case"class":o.push(new Bd(w));break;case"style":o.push(new Fd(w));break;default:o.push(new Nd(w,y))}}else{if(l&&(f=cf.from(a,!1),g=f.attrs[y],void 0!==g)){rf.node=i,rf.attr=u,rf.bindable=g,rf.def=a,o.push(new zd(S.build(rf)));continue}rf.node=i,rf.attr=u,rf.bindable=null,rf.def=null,o.push(S.build(rf))}else{if(k.isTemplateController)throw new Error(`AUR0703:${y}`);f=cf.from(k,!0),b=!1===k.noMultiBindings&&null===S&&tf(w),b?p=this.fi(i,w,k,r):(v=f.primary,null===S?(m=c.parse(w,1),p=[null===m?new Id(w,v.property):new Cd(m,v.property)]):(rf.node=i,rf.attr=u,rf.bindable=v,rf.def=k,p=[S.build(rf)])),(null!=d?d:d=[]).push(new Pd(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(y)?y:void 0,p))}return ef(),null!=d?d.concat(o):o}li(t,e){var n;const i=[],s=t.attributes,r=e.ep;let o,a,l,c,h,u,d,p,f,g,v,m,b=s.length,y=0,w=null,x=null;for(;b>y;++y){if(o=s[y],a=o.name,l=o.value,c=e.di.parse(a,l),v=c.target,m=c.rawValue,of[v])throw new Error(`AUR0702:${a}`);if(x=e.ai(c),null!==x&&(1&x.type)>0)rf.node=t,rf.attr=c,rf.bindable=null,rf.def=null,i.push(x.build(rf));else if(w=e.ui(v),null===w)if(null===x)if(f=r.parse(m,1),null!=f)t.removeAttribute(a),--y,--b,i.push(new Cd(f,null!==(n=e.m.map(t,v))&&void 0!==n?n:Re(v)));else switch(a){case"class":i.push(new Bd(m));break;case"style":i.push(new Fd(m));break;default:i.push(new Nd(m,a))}else rf.node=t,rf.attr=c,rf.bindable=null,rf.def=null,i.push(x.build(rf));else{if(w.isTemplateController)throw new Error(`AUR0703:${v}`);d=cf.from(w,!0),g=!1===w.noMultiBindings&&null===x&&tf(m),g?u=this.fi(t,m,w,e):(p=d.primary,null===x?(f=r.parse(m,1),u=[null===f?new Id(m,p.property):new Cd(f,p.property)]):(rf.node=t,rf.attr=c,rf.bindable=p,rf.def=w,u=[x.build(rf)])),t.removeAttribute(a),--y,--b,(null!=h?h:h=[]).push(new Pd(this.resolveResources?w:w.name,null!=w.aliases&&w.aliases.includes(v)?v:void 0,u))}}return ef(),null!=h?h.concat(i):i}oi(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.mi(t,e):this.vi(t,e);case 3:return this.gi(t,e);case 11:{let n=t.firstChild;for(;null!==n;)n=this.oi(n,e);break}}return t.nextSibling}mi(t,e){const n=t.attributes,i=n.length,s=[],r=e.ep;let o,a,l,c,h,u,d,p,f=!1,g=0;for(;i>g;++g)if(o=n[g],l=o.name,c=o.value,"to-binding-context"!==l){if(a=e.di.parse(l,c),u=a.target,d=a.rawValue,h=e.ai(a),null!==h)switch(h.name){case"to-view":case"bind":s.push(new Md(r.parse(d,8),Re(u)));continue;default:throw new Error(`AUR0704:${a.command}`)}p=r.parse(d,1),s.push(new Md(null===p?new fs(d):p,Re(u)))}else f=!0;return e.rows.push([new Ld(s,f)]),this.pi(t).nextSibling}vi(t,e){var n,i,s,r,o,a,l,c,h,u;const d=t.nextSibling,p=(null!==(n=t.getAttribute("as-element"))&&void 0!==n?n:t.nodeName).toLowerCase(),f=e.hi(p),g=null!==f,v=g&&null!=f.shadowOptions,m=!!(null==f?void 0:f.capture),b=m?[]:Hn,y=e.ep,w=this.debug?Wn:()=>{t.removeAttribute(S),--z,--D};let x,k,S,C,A,E,T,$,I,O,P,R,L,M,j,U,N,B,F,V=t.attributes,D=V.length,z=0,q=null,H=!1,Z=null,W=!0,K=!1;if("slot"===p){if(null==e.root.def.shadowOptions)throw new Error(`AUR0717:${e.root.def.name}`);e.root.hasSlot=!0}if(g&&(W=null===(i=f.processContent)||void 0===i?void 0:i.call(f.Type,t,e.p),V=t.attributes,D=V.length),e.root.def.enhance&&t.classList.contains("au"))throw new Error("AUR0705");for(;D>z;++z){switch(k=V[z],S=k.name,C=k.value,S){case"as-element":case"containerless":w(),K||(K="containerless"===S);continue}if(A=e.di.parse(S,C),Z=e.ai(A),N=A.target,B=A.rawValue,m){if(null!=Z&&1&Z.type){w(),b.push(A);continue}if("au-slot"!==N&&(j=cf.from(f,!1),null==j.attrs[N]&&!(null===(s=e.ui(N))||void 0===s?void 0:s.isTemplateController))){w(),b.push(A);continue}}if(null!==Z&&1&Z.type)rf.node=t,rf.attr=A,rf.bindable=null,rf.def=null,(null!=E?E:E=[]).push(Z.build(rf)),w();else if(q=e.ui(N),null===q)if(null!==Z)w(),g&&(j=cf.from(f,!1),$=j.attrs[N],void 0!==$)?(rf.node=t,rf.attr=A,rf.bindable=$,rf.def=f,(null!=T?T:T=[]).push(Z.build(rf))):(rf.node=t,rf.attr=A,rf.bindable=null,rf.def=null,(null!=E?E:E=[]).push(Z.build(rf)));else{if(g&&(j=cf.from(f,!1),$=j.attrs[N],void 0!==$)){L=y.parse(B,1),(null!=T?T:T=[]).push(null==L?new Id(B,$.property):new Cd(L,$.property)),w();continue}L=y.parse(B,1),null!=L&&(w(),(null!=E?E:E=[]).push(new Cd(L,null!==(r=e.m.map(t,N))&&void 0!==r?r:Re(N))))}else j=cf.from(q,!0),H=!1===q.noMultiBindings&&null===Z&&tf(B),H?O=this.fi(t,B,q,e):(U=j.primary,null===Z?(L=y.parse(B,1),O=[null===L?new Id(B,U.property):new Cd(L,U.property)]):(rf.node=t,rf.attr=A,rf.bindable=U,rf.def=q,O=[Z.build(rf)])),w(),q.isTemplateController?(null!=P?P:P=[]).push(new Rd(sf,this.resolveResources?q:q.name,void 0,O)):(null!=I?I:I=[]).push(new Pd(this.resolveResources?q:q.name,null!=q.aliases&&q.aliases.includes(N)?N:void 0,O))}if(ef(),this.wi(t)&&null!=E&&E.length>1&&this.bi(t,E),g&&(M=new Od(this.resolveResources?f:f.name,void 0,null!=T?T:Hn,null,K,b),p===xf)){const n=t.getAttribute("name")||wf,i=e.h("template"),s=e.xi();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?t.removeChild(r):i.content.appendChild(r),r=t.firstChild;this.oi(i.content,s),M.auSlot={name:n,fallback:Ch.create({name:yf(),template:i,instructions:s.rows,needsCompile:!1})},t=this.yi(t,e)}if(null==E&&null==M&&null==I||(x=Hn.concat(null!=M?M:Hn,null!=I?I:Hn,null!=E?E:Hn),this.pi(t)),null!=P){let n;D=P.length-1,z=D,R=P[z],this.yi(t,e),"TEMPLATE"===t.nodeName?n=t:(n=e.h("template"),n.content.appendChild(t));const i=n,s=e.xi(null==x?[]:[x]);let r,a,h,u,d,m,b,y,w=0,k=0,S=t.firstChild,C=!1;if(!1!==W)for(;null!==S;)if(a=1===S.nodeType?S.getAttribute(xf):null,null!==a&&S.removeAttribute(xf),g)r=S.nextSibling,v||(C=3===S.nodeType&&""===S.textContent.trim(),C||(null!==(o=(l=null!=u?u:u={})[c=a||wf])&&void 0!==o?o:l[c]=[]).push(S),t.removeChild(S)),S=r;else{if(null!==a)throw a=a||wf,new Error(`AUR0706:${p}[${a}]`);S=S.nextSibling}if(null!=u){for(a in h={},u){for(n=e.h("template"),d=u[a],w=0,k=d.length;k>w;++w)m=d[w],"TEMPLATE"===m.nodeName?m.attributes.length>0?n.content.appendChild(m):n.content.appendChild(m.content):n.content.appendChild(m);y=e.xi(),this.oi(n.content,y),h[a]=Ch.create({name:yf(),template:n,instructions:y.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=h}if(g&&(K||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!K&&!1!==W,F)if("TEMPLATE"===t.nodeName)this.oi(t.content,s);else for(S=t.firstChild;null!==S;)S=this.oi(S,s);for(R.def=Ch.create({name:yf(),template:i,instructions:s.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});z-- >0;)R=P[z],n=e.h("template"),b=e.h("au-m"),b.classList.add("au"),n.content.appendChild(b),R.def=Ch.create({name:yf(),template:n,needsCompile:!1,instructions:[[P[z+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([R])}else{null!=x&&e.rows.push(x);let n,i,s,r,o,l,c,d=t.firstChild,m=null,b=!1,y=0,w=0;if(!1!==W)for(;null!==d;)if(i=1===d.nodeType?d.getAttribute(xf):null,null!==i&&d.removeAttribute(xf),g)n=d.nextSibling,v||(b=3===d.nodeType&&""===d.textContent.trim(),b||(null!==(a=(h=null!=s?s:s={})[u=i||wf])&&void 0!==a?a:h[u]=[]).push(d),t.removeChild(d)),d=n;else{if(null!==i)throw i=i||wf,new Error(`AUR0706:${p}[${i}]`);d=d.nextSibling}if(null!=s){for(i in m={},s){for(l=e.h("template"),r=s[i],y=0,w=r.length;w>y;++y)o=r[y],"TEMPLATE"===o.nodeName?o.attributes.length>0?l.content.appendChild(o):l.content.appendChild(o.content):l.content.appendChild(o);c=e.xi(),this.oi(l.content,c),m[i]=Ch.create({name:yf(),template:l,instructions:c.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=m}if(g&&(K||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!K&&!1!==W,F&&t.childNodes.length>0)for(d=t.firstChild;null!==d;)d=this.oi(d,e)}return d}gi(t,e){let n="",i=t;for(;null!==i&&3===i.nodeType;)n+=i.textContent,i=i.nextSibling;const s=e.ep.parse(n,1);if(null===s)return i;const r=t.parentNode;for(r.insertBefore(this.pi(e.h("au-m")),t),e.rows.push([new jd(s,!!e.def.isStrictBinding)]),t.textContent="",i=t.nextSibling;null!==i&&3===i.nodeType;)r.removeChild(i),i=t.nextSibling;return t.nextSibling}fi(t,e,n,i){const s=cf.from(n,!0),r=e.length,o=[];let a,l,c,h,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){l=e.slice(p,g);break}if(void 0===l&&(l=e.slice(p)),h=i.di.parse(a,l),u=i.ai(h),d=s.attrs[h.target],null==d)throw new Error(`AUR0707:${n.name}.${h.target}`);for(null===u?(c=i.ep.parse(l,1),o.push(null===c?new Id(l,d.property):new Cd(c,d.property))):(rf.node=t,rf.attr=h,rf.bindable=d,rf.def=n,o.push(u.build(rf)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,l=void 0}return ef(),o}ri(t,e){var n,i;const s=t,r=je(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===s.childElementCount)throw new Error("AUR0708");const a=new Set,l=[];for(const t of r){if(t.parentNode!==s)throw new Error("AUR0709");const n=pf(t,a),i=class{},r=t.content,o=je(r.querySelectorAll("bindable")),c=Vl.for(i),h=new Set,u=new Set;for(const t of o){if(t.parentNode!==r)throw new Error("AUR0710");const e=t.getAttribute("property");if(null===e)throw new Error("AUR0711");const n=t.getAttribute("attribute");if(null!==n&&u.has(n)||h.has(e))throw new Error(`AUR0712:${e}+${n}`);null!==n&&u.add(n),h.add(e),c.add({property:e,attribute:null!=n?n:void 0,mode:ff(t)}),t.getAttributeNames().filter((t=>!uf.includes(t))).length,r.removeChild(t)}l.push(i),e.ki(jh.define({name:n,template:t},i)),s.removeChild(t)}let c=0;const h=l.length;for(;h>c;++c)jh.getDefinition(l[c]).dependencies.push(...null!==(n=e.def.dependencies)&&void 0!==n?n:Hn,...null!==(i=e.deps)&&void 0!==i?i:Hn)}wi(t){return"INPUT"===t.nodeName&&1===af[t.type]}bi(t,e){if("INPUT"===t.nodeName){const t=e;let n,i,s,r=0;for(let e=0;e<t.length&&r<3;e++)switch(s=t[e],s.to){case"model":case"value":case"matcher":n=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==n&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}pi(t){return t.classList.add("au"),t}yi(t,e){const n=t.parentNode,i=e.h("au-m");return this.pi(n.insertBefore(i,t)),n.removeChild(t),i}},Yf],Qg=[pc,dc,vc],Gg=[Fp,jp,Np,Up,Bp,Vp,Dp,_p,zp,qp,Hp,Kp,Wp,Zp,Qp],Xg=[Dg,zg,qg,Hg,Zg,Wg,Kg,Fg,Vg,sg,rg,og,cg,fg,gg,vg,mg,bg,yg,wg,xg,Sg,Cg,Ag,Pf,Lf,tg,Ig,Og,ig,eg,ng,Ng],Yg=[np,ip,Jd,tp,ep,_d,Qd,Gd,Xd,Yd,hp,gp,up,dp,pp,fp,ap,vp],Jg=function t(e){return{optionsProvider:e,register(t){const n={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(n),t.register(Fn.instance(Is,n.coercingOptions),..._g,...Xg,...Qg,...Gg,...Yg)},customize:n=>t(null!=n?n:e)}}(Wn),tv=cn.createInterface("IAurelia");var ev;!function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(ev||(ev={}));const nv=cn.createInterface("IDialogService"),iv=cn.createInterface("IDialogController"),sv=cn.createInterface("IDialogDomRenderer"),rv=cn.createInterface("IDialogDom"),ov=cn.createInterface("IDialogGlobalSettings");class av{constructor(t,e){this.wasCancelled=t,this.dialog=e}static create(t,e){return new av(t,e)}}class lv{constructor(t,e){this.status=t,this.value=e}static create(t,e){return new lv(t,e)}}var cv;!function(t){t.Ok="ok",t.Error="error",t.Cancel="cancel",t.Abort="abort"}(cv||(cv={}));class hv{constructor(t,e){this.p=t,this.ctn=e,this.closed=new Promise(((t,e)=>{this.Pt=t,this.St=e}))}static get inject(){return[mc,dn]}activate(t){var e;const n=this.ctn.createChild(),{model:i,template:s,rejectOnCancel:r}=t,o=n.get(sv),a=null!==(e=t.host)&&void 0!==e?e:this.p.document.body,l=this.dom=o.render(a,t),c=n.has(Ju,!0)?n.get(Ju):null,h=l.contentHost;return this.settings=t,null!=c&&c.contains(a)||n.register(Fn.instance(Ju,a)),n.register(Fn.instance(Yu,h),Fn.instance(rv,l)),new Promise((e=>{var s,r;const o=Object.assign(this.cmp=this.getOrCreateVm(n,t,h),{$dialog:this});e(null===(r=null===(s=o.canActivate)||void 0===s?void 0:s.call(o,i))||void 0===r||r)})).then((e=>{var o;if(!0!==e){if(l.dispose(),r)throw dv(null,"Dialog activation rejected");return av.create(!0,this)}const a=this.cmp;return Ze(null===(o=a.activate)||void 0===o?void 0:o.call(a,i),(()=>{var e;const i=this.controller=bu.$el(n,a,h,null,Ch.create(null!==(e=this.getDefinition(a))&&void 0!==e?e:{name:jh.generateName(),template:s}));return Ze(i.activate(i,null,2),(()=>{var e;return l.overlay.addEventListener(null!==(e=t.mouseEvent)&&void 0!==e?e:"click",this),av.create(!1,this)}))}))}),(t=>{throw l.dispose(),t}))}deactivate(t,e){if(this.es)return this.es;let n=!0;const{controller:i,dom:s,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,l=lv.create(t,e),c=new Promise((c=>{var h,u;c(Ze(null===(u=null===(h=r.canDeactivate)||void 0===h?void 0:h.call(r,l))||void 0===u||u,(c=>{var h;if(!0!==c){if(n=!1,this.es=void 0,a)throw dv(null,"Dialog cancellation rejected");return lv.create("abort")}return Ze(null===(h=r.deactivate)||void 0===h?void 0:h.call(r,l),(()=>Ze(i.deactivate(i,null,4),(()=>(s.dispose(),s.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===t?this.St(dv(e,"Dialog cancelled with a rejection on cancel")):this.Pt(l),l)))))})))})).catch((t=>{throw this.es=void 0,t}));return this.es=n?c:void 0,c}ok(t){return this.deactivate("ok",t)}cancel(t){return this.deactivate("cancel",t)}error(t){const e=function(t){const e=new Error;return e.wasCancelled=!1,e.value=t,e}(t);return new Promise((t=>{var n,i;return t(Ze(null===(i=(n=this.cmp).deactivate)||void 0===i?void 0:i.call(n,lv.create("error",e)),(()=>Ze(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.St(e)})))))}))}handleEvent(t){this.settings.overlayDismiss&&!this.dom.contentHost.contains(t.target)&&this.cancel()}getOrCreateVm(t,e,n){const i=e.component;if(null==i)return new uv;if("object"==typeof i)return i;const s=this.p;return t.registerResolver(s.HTMLElement,t.registerResolver(s.Element,t.registerResolver(Yu,new Vn("ElementResolver",n)))),t.invoke(i)}getDefinition(t){const e=Ll(t)?t:null==t?void 0:t.constructor;return jh.isType(e)?jh.getDefinition(e):null}}class uv{}function dv(t,e){const n=new Error(e);return n.wasCancelled=!0,n.value=t,n}class pv{static from(...t){return Object.assign(new pv,...t).ls().os()}load(){const t=this,e=this.component,n=this.template,i=We(null==e?void 0:Ze(e(),(e=>{t.component=e})),Ll(n)?Ze(n(),(e=>{t.template=e})):void 0);return i instanceof Promise?i.then((()=>t)):t}ls(){if(null==this.component&&null==this.template)throw new Error("AUR0903");return this}os(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function fv(t,e){return this.then((n=>n.dialog.closed.then(t,e)),e)}const gv="position:absolute;width:100%;height:100%;top:0;left:0;";class vv{constructor(t){this.p=t,this.wrapperCss=`${gv} display:flex;`,this.overlayCss=gv,this.hostCss="position:relative;margin:auto;"}static register(t){Fn.singleton(sv,this).register(t)}render(t){const e=this.p.document,n=(t,n)=>{const i=e.createElement(t);return i.style.cssText=n,i},i=t.appendChild(n("au-dialog-container",this.wrapperCss)),s=i.appendChild(n("au-dialog-overlay",this.overlayCss)),r=i.appendChild(n("div",this.hostCss));return new mv(i,s,r)}}vv.inject=[mc];class mv{constructor(t,e,n){this.wrapper=t,this.overlay=e,this.contentHost=n}dispose(){this.wrapper.remove()}}function bv(t,e){return{settingsProvider:t,register:n=>n.register(...e,Jc.beforeCreate((()=>t(n.get(ov))))),customize:(t,n)=>bv(t,null!=n?n:e)}}bv((()=>{throw new Error("AUR0904")}),[class{static register(t){t.register(Fn.singleton(ov,this))}}]);const yv=bv(Wn,[class{constructor(t,e,n){this.ft=t,this.p=e,this.ss=n,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const t=this.dlgs;return t.length>0?t[t.length-1]:null}static get inject(){return[dn,mc,ov]}static register(t){t.register(Fn.singleton(nv,this),Jc.beforeDeactivate(nv,(t=>Ze(t.closeAll(),(t=>{if(t.length>0)throw new Error(`AUR0901:${t.length}`)})))))}open(t){return function(t){return t.whenClosed=fv,t}(new Promise((e=>{var n;const i=pv.from(this.ss,t),s=null!==(n=i.container)&&void 0!==n?n:this.ft.createChild();e(Ze(i.load(),(t=>{const e=s.invoke(hv);return s.register(Fn.instance(iv,e)),s.register(Fn.callback(hv,(()=>{throw new Error("AUR0902")}))),Ze(e.activate(t),(t=>{if(!t.wasCancelled){1===this.dlgs.push(e)&&this.p.window.addEventListener("keydown",this);const t=()=>this.remove(e);e.closed.then(t,t)}return t}))})))})))}closeAll(){return Promise.all(Array.from(this.dlgs).map((t=>t.settings.rejectOnCancel?t.cancel().then((()=>null)):t.cancel().then((e=>"cancel"===e.status?null:t))))).then((t=>t.filter((t=>!!t))))}remove(t){const e=this.dlgs,n=e.indexOf(t);n>-1&&this.dlgs.splice(n,1),0===e.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(t){const e=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(t);if(null==e)return;const n=this.top;if(null===n||0===n.settings.keyboard.length)return;const i=n.settings.keyboard;"Escape"===e&&i.includes(e)?n.cancel():"Enter"===e&&i.includes(e)&&n.ok()}},class{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(t){Fn.singleton(ov,this).register(t)}},vv]);cn.createInterface((t=>t.singleton(wv)));class wv{constructor(t,e,n){this.ctn=t,this.p=e,this.r=n}define(t,e,n){if(!t.includes("-"))throw new Error('Invalid web-components custom element name. It must include a "-"');let i;if(null==e)throw new Error("Invalid custom element definition");if(i="function"==typeof e?jh.isType(e)?jh.getDefinition(e):Ch.create(jh.generateName(),e):Ch.getOrCreate(e),i.containerless)throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");const s=(null==n?void 0:n.extends)?this.p.document.createElement(n.extends).constructor:HTMLElement,r=this.ctn,o=this.r,a=i.bindables,l=this.p;class c extends s{auInit(){if(this.auInited)return;this.auInited=!0;const t=r.createChild();t.registerResolver(l.HTMLElement,t.registerResolver(l.Element,t.registerResolver(Yu,new Vn("ElementProvider",this))));const e=o.compile(i,t,{projections:null}),n=t.invoke(e.Type),s=this.auCtrl=bu.$el(t,n,this,null,e);Xu(this,e.key,s)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null,0)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null,0)}adoptedCallback(){this.auInit()}attributeChangedCallback(t,e,n){this.auInit(),this.auCtrl.viewModel[t]=n}}c.observedAttributes=Object.keys(a);for(const t in a)Object.defineProperty(c.prototype,t,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[t]},set(e){this.auInited||this.auInit(),this.auCtrl.viewModel[t]=e}});return this.p.customElements.define(t,c,n),c}}wv.inject=[dn,mc,pu];const xv=gl.getOrCreate(globalThis);class kv extends class{constructor(t=cn.createContainer()){if(this.container=t,this.ir=!1,this.Ge=!1,this.Xe=!1,this.Ke=void 0,this.next=void 0,this.Ye=void 0,this.Ze=void 0,t.has(tv,!0))throw new Error("AUR0768");t.registerResolver(tv,new Vn("IAurelia",this)),t.registerResolver(Zu,this.Je=new Vn("IAppRoot"))}get isRunning(){return this.ir}get isStarting(){return this.Ge}get isStopping(){return this.Xe}get root(){if(null==this.Ke){if(null==this.next)throw new Error("AUR0767");return this.next}return this.Ke}register(...t){return this.container.register(...t),this}app(t){return this.next=new _u(t,this.Qe(t.host),this.container,this.Je),this}enhance(t,e){var n;const i=null!==(n=t.container)&&void 0!==n?n:this.container.createChild(),s=t.host,r=this.Qe(s),o=t.component;let a;Ll(o)?(i.registerResolver(r.HTMLElement,i.registerResolver(r.Element,i.registerResolver(Yu,new Vn("ElementResolver",s)))),a=i.invoke(o)):a=o,i.registerResolver(Ju,new Vn("IEventTarget",s)),e=null!=e?e:null;const l=bu.$el(i,a,s,null,Ch.create({name:jh.generateName(),template:s,enhance:!0}));return Ze(l.activate(l,e,2),(()=>l))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}Qe(t){let e;if(this.container.has(mc,!1))e=this.container.get(mc);else{if(null===t.ownerDocument.defaultView)throw new Error("AUR0769");e=new gl(t.ownerDocument.defaultView),this.container.register(Fn.instance(mc,e))}return e}start(t=this.next){if(null==t)throw new Error("AUR0770");return this.Ye instanceof Promise?this.Ye:this.Ye=Ze(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.Je.prepare(this.Ke=t),this.Ge=!0,Ze(t.activate(),(()=>{this.ir=!0,this.Ge=!1,this.Ye=void 0,this.ts(t,"au-started",t.host)})))))}stop(t=!1){if(this.Ze instanceof Promise)return this.Ze;if(!0===this.ir){const e=this.Ke;return this.ir=!1,this.Xe=!0,this.Ze=Ze(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.Ke=void 0,this.Je.dispose(),this.Xe=!1,this.ts(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.Xe)throw new Error("AUR0771");this.container.dispose()}ts(t,e,n){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});n.dispatchEvent(i)}}{constructor(t=function(){return cn.createContainer().register(Fn.instance(mc,xv),Jg)}()){super(t)}static start(t){return(new kv).start(t)}static app(t){return(new kv).app(t)}static enhance(t,e){return(new kv).enhance(t,e)}static register(...t){return(new kv).register(...t)}app(t){if(jh.isType(t)){const e=jh.getDefinition(t);let n=document.querySelector(e.name);return null===n&&(n=document.body),super.app({host:n,component:t})}return super.app(t)}}var Sv=function(t,e){return Sv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Sv(t,e)};function Cv(t,e){function n(){this.constructor=t}Sv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Av(t){return"function"==typeof t}var Ev=!1,Tv={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,Ev=t},get useDeprecatedSynchronousErrorHandling(){return Ev}};function $v(t){setTimeout((function(){throw t}),0)}var Iv={closed:!0,next:function(t){},error:function(t){if(Tv.useDeprecatedSynchronousErrorHandling)throw t;$v(t)},complete:function(){}},Ov=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function Pv(t){return null!==t&&"object"==typeof t}var Rv=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Lv=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,i=n._parentOrParents,s=n._ctorUnsubscribe,r=n._unsubscribe,o=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(var a=0;a<i.length;++a)i[a].remove(this);if(Av(r)){s&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof Rv?Mv(t.errors):[t]}}if(Ov(o)){a=-1;for(var l=o.length;++a<l;){var c=o[a];if(Pv(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof Rv?e=e.concat(Mv(t.errors)):e.push(t)}}}if(e)throw new Rv(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=n._parentOrParents;if(null===s)n._parentOrParents=this;else if(s instanceof t){if(s===this)return n;n._parentOrParents=[s,this]}else{if(-1!==s.indexOf(this))return n;s.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Mv(t){return t.reduce((function(t,e){return t.concat(e instanceof Rv?e.errors:e)}),[])}var jv=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Uv=function(t){function e(n,i,s){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=Iv;break;case 1:if(!n){r.destination=Iv;break}if("object"==typeof n){n instanceof e?(r.syncErrorThrowable=n.syncErrorThrowable,r.destination=n,n.add(r)):(r.syncErrorThrowable=!0,r.destination=new Nv(r,n));break}default:r.syncErrorThrowable=!0,r.destination=new Nv(r,n,i,s)}return r}return Cv(e,t),e.prototype[jv]=function(){return this},e.create=function(t,n,i){var s=new e(t,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Lv),Nv=function(t){function e(e,n,i,s){var r,o=t.call(this)||this;o._parentSubscriber=e;var a=o;return Av(n)?r=n:n&&(r=n.next,i=n.error,s=n.complete,n!==Iv&&(Av((a=Object.create(n)).unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=r,o._error=i,o._complete=s,o}return Cv(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Tv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=Tv.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):$v(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;$v(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};Tv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Tv.useDeprecatedSynchronousErrorHandling)throw t;$v(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!Tv.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return Tv.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):($v(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Uv),Bv=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Fv(t){return t}function Vv(t){return 0===t.length?Fv:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Dv=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,s=function(t,e,n){if(t){if(t instanceof Uv)return t;if(t[jv])return t[jv]()}return t||e||n?new Uv(t,e,n):new Uv(Iv)}(t,e,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Tv.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Tv.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Tv.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,i=e.destination,s=e.isStopped;if(n||s)return!1;t=i&&i instanceof Uv?i:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=zv(e))((function(e,i){var s;s=n.subscribe((function(e){try{t(e)}catch(t){i(t),s&&s.unsubscribe()}}),i,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Bv]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Vv(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=zv(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function zv(t){if(t||(t=Tv.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var qv=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Hv=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return Cv(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(Lv),Zv=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return Cv(e,t),e}(Uv),Wv=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Cv(e,t),e.prototype[jv]=function(){return new Zv(this)},e.prototype.lift=function(t){var e=new Kv(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new qv;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new qv;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new qv;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new qv;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new qv;return this.hasError?(t.error(this.thrownError),Lv.EMPTY):this.isStopped?(t.complete(),Lv.EMPTY):(this.observers.push(t),new Hv(this,t))},e.prototype.asObservable=function(){var t=new Dv;return t.source=this,t},e.create=function(t,e){return new Kv(t,e)},e}(Dv),Kv=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return Cv(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):Lv.EMPTY},e}(Wv),_v=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return Cv(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new qv;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(Wv);function Qv(t,e){if(!Xv(t))throw Error("Provided state is not of type StateHistory");return e>0?function(t,e){if(e<0||e>=t.future.length)return t;const{past:n,future:i,present:s}=t;return{past:[...n,s,...i.slice(0,e)],present:i[e],future:i.slice(e+1)}}(t,e-1):e<0?function(t,e){if(e<0||e>=t.past.length)return t;const{past:n,future:i,present:s}=t,r=n.slice(0,e),o=[...n.slice(e+1),s,...i];return{past:r,present:n[e],future:o}}(t,t.past.length+e):t}function Gv(t,e){return{...t,past:[...t.past,t.present],present:e,future:[]}}function Xv(t){return void 0!==t.present&&void 0!==t.future&&void 0!==t.past&&Array.isArray(t.future)&&Array.isArray(t.past)}function Yv(t,e){return function(n,i){e(n,i,t)}}const Jv="aurelia-store-state";var tm,em,nm;function im(t,e,n){const i=om.container.get(ad).localStorage;if(void 0!==i){const e=void 0!==(null==n?void 0:n.key)?n.key:Jv;i.setItem(e,JSON.stringify(t))}}function sm(t,e){const n=om.container.get(ad).localStorage;if(void 0===n)return t;const i=n.getItem(void 0===e?Jv:e);if(null===i||""===i)return t;try{return JSON.parse(i)}catch(t){}return t}function rm(t,e,n){var i;return(null===(i=t.logDefinitions)||void 0===i?void 0:i.hasOwnProperty(e))&&t.logDefinitions[e]&&Object.values(em).includes(t.logDefinitions[e])?t.logDefinitions[e]:n}!function(t){t.Before="before",t.After="after"}(tm||(tm={})),function(t){t.trace="trace",t.debug="debug",t.info="info",t.warn="warn",t.error="error"}(em||(em={})),function(t){t.StartEnd="startEnd",t.All="all"}(nm||(nm={}));const om={container:null};class am extends Error{constructor(t){super(`Tried to dispatch an unregistered action ${void 0!==t&&("string"==typeof t?t:t.name)}`)}}class lm extends Error{}class cm extends Error{}class hm extends Error{}let um=class{constructor(t,e,n,i){var s,r,o,a;this.initialState=t,this.logger=e,this.t=n,this.devToolsAvailable=!1,this.actions=new Map,this.middlewares=new Map,this.dispatchQueue=[],this.options=null!=i?i:{};const l=!0===(null===(r=null===(s=this.options)||void 0===s?void 0:s.history)||void 0===r?void 0:r.undoable);this._state=new _v(t),this.state=this._state.asObservable(),!0!==(null===(a=null===(o=this.options)||void 0===o?void 0:o.devToolsOptions)||void 0===a?void 0:a.disable)&&this.setupDevTools(),l&&this.registerHistoryMethods()}registerMiddleware(t,e,n){this.middlewares.set(t,{placement:e,settings:n})}unregisterMiddleware(t){this.middlewares.has(t)&&this.middlewares.delete(t)}isMiddlewareRegistered(t){return this.middlewares.has(t)}registerAction(t,e){if(0===e.length)throw new cm("The reducer is expected to have one or more parameters, where the first will be the present state");this.actions.set(e,{type:t})}unregisterAction(t){this.actions.has(t)&&this.actions.delete(t)}isActionRegistered(t){return"string"==typeof t?void 0!==Array.from(this.actions).find((e=>e[1].type===t)):this.actions.has(t)}resetToState(t){this._state.next(t)}async dispatch(t,...e){const n=this.lookupAction(t);return n?this.queueDispatch([{reducer:n,params:e}]):Promise.reject(new am(t))}pipe(t,...e){const n=[],i={dispatch:async()=>this.queueDispatch(n),pipe:(e,...s)=>{const r=this.lookupAction(e);if(!r)throw new am(t);return n.push({reducer:r,params:s}),i}};return i.pipe(t,...e)}lookupAction(t){if("string"==typeof t){const e=Array.from(this.actions).find((([e,n])=>n.type===t));if(e)return e[0]}else if(this.actions.has(t))return t}async queueDispatch(t){return new Promise(((e,n)=>{this.dispatchQueue.push({actions:t,resolve:e,reject:n}),1===this.dispatchQueue.length&&this.handleQueue()}))}async handleQueue(){if(this.dispatchQueue.length>0){const t=this.dispatchQueue[0];try{await this.internalDispatch(t.actions),t.resolve()}catch(e){t.reject(e)}this.dispatchQueue.shift(),this.handleQueue()}}async internalDispatch(t){var e;const n=t.find((t=>!this.actions.has(t.reducer)));if(n)throw new am(n.reducer);om.container.get(ad).performance.mark("dispatch-start");const i=t.map((t=>({type:this.actions.get(t.reducer).type,params:t.params,reducer:t.reducer}))),s={name:i.map((t=>t.type)).join("->"),params:i.reduce(((t,e)=>t.concat(e.params)),[]),pipedActions:i.map((t=>({name:t.type,params:t.params})))};this.options.logDispatchedActions&&this.logger[rm(this.options,"dispatchedActions",em.info)](`Dispatching: ${s.name}`);const r=await this.executeMiddlewares(this._state.getValue(),tm.Before,s);if(!1===r)return om.container.get(ad).performance.clearMarks(),void om.container.get(ad).performance.clearMeasures();let o=r;for(const t of i){if(o=await t.reducer(o,...t.params),!1===o)return om.container.get(ad).performance.clearMarks(),void om.container.get(ad).performance.clearMeasures();if(om.container.get(ad).performance.mark(`dispatch-after-reducer-${t.type}`),!o&&"object"!=typeof o)throw new hm("The reducer has to return a new state")}let a=await this.executeMiddlewares(o,tm.After,s);if(!1===a)return om.container.get(ad).performance.clearMarks(),void om.container.get(ad).performance.clearMeasures();if(Xv(a)&&(null===(e=this.options.history)||void 0===e?void 0:e.limit)&&(a=function(t,e){return Xv(t)&&(t.past.length>e&&(t.past=t.past.slice(t.past.length-e)),t.future.length>e&&(t.future=t.future.slice(0,e))),t}(a,this.options.history.limit)),this._state.next(a),om.container.get(ad).performance.mark("dispatch-end"),this.options.measurePerformance===nm.StartEnd){om.container.get(ad).performance.measure("startEndDispatchDuration","dispatch-start","dispatch-end");const t=om.container.get(ad).performance.getEntriesByName("startEndDispatchDuration");this.logger[rm(this.options,"performanceLog",em.info)](`Total duration ${t[0].duration} of dispatched action ${s.name}:`,t)}else if(this.options.measurePerformance===nm.All){const t=om.container.get(ad).performance.getEntriesByType("mark"),e=t[t.length-1].startTime-t[0].startTime;this.logger[rm(this.options,"performanceLog",em.info)](`Total duration ${e} of dispatched action ${s.name}:`,t)}om.container.get(ad).performance.clearMarks(),om.container.get(ad).performance.clearMeasures(),this.updateDevToolsState({type:s.name,params:s.params},a)}executeMiddlewares(t,e,n){return Array.from(this.middlewares).filter((t=>t[1].placement===e)).reduce((async(t,i,s)=>{try{const s=await i[0](await t,this._state.getValue(),i[1].settings,n);return!1!==s&&(s||await t)}catch(e){if(this.options.propagateError)throw e;return await t}finally{om.container.get(ad).performance.mark(`dispatch-${e}-${i[0].name}`)}}),t)}setupDevTools(){this.t.__REDUX_DEVTOOLS_EXTENSION__&&(this.logger[rm(this.options,"devToolsStatus",em.debug)]("DevTools are available"),this.devToolsAvailable=!0,this.devTools=this.t.__REDUX_DEVTOOLS_EXTENSION__.connect(this.options.devToolsOptions),this.devTools.init(this.initialState),this.devTools.subscribe((t=>{var e,n;if(this.logger[rm(this.options,"devToolsStatus",em.debug)](`DevTools sent change ${t.type}`),"ACTION"!==t.type||void 0===t.payload){if("DISPATCH"===t.type&&t.payload)switch(t.payload.type){case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return void this._state.next(JSON.parse(t.state));case"COMMIT":return void this.devTools.init(this._state.getValue());case"RESET":return this.devTools.init(this.initialState),void this.resetToState(this.initialState);case"ROLLBACK":{const e=JSON.parse(t.state);return this.resetToState(e),void this.devTools.init(e)}}}else{const i=Array.from(this.actions).find((function([e]){var n;return e.name===(null===(n=t.payload)||void 0===n?void 0:n.name)})),s=null!==(n=this.lookupAction(null===(e=t.payload)||void 0===e?void 0:e.name))&&void 0!==n?n:null==i?void 0:i[0];if(!s)throw new lm("Tried to remotely dispatch an unregistered action");if(!t.payload.args||t.payload.args.length<1)throw new lm("No action arguments provided");this.dispatch(s,...t.payload.args.slice(1).map((t=>JSON.parse(t)))).catch((()=>{throw new lm("Issue when trying to dispatch an action through devtools")}))}})))}updateDevToolsState(t,e){this.devToolsAvailable&&this.devTools&&this.devTools.send(t,e)}registerHistoryMethods(){this.registerAction("jump",Qv)}};um=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}([Yv(1,ei),Yv(2,ad)],um);const dm=t=>t.state;function pm(t){const e={selector:"function"==typeof t?t:dm,...t};function n(t,e){const n=e(t);return n instanceof Dv?n:t.state}function i(){const t="object"==typeof e.selector,n={[e.target||"state"]:e.selector||dm};return Object.entries({...t?e.selector:n}).map((([n,i])=>{var s,r;return{targets:e.target&&t?[e.target,n]:[n],selector:i,changeHandlers:{[null!==(s=e.onChanged)&&void 0!==s?s:""]:1,[`${null!==(r=e.target)&&void 0!==r?r:n}Changed`]:e.target?0:1,propertyChanged:0}}}))}return function(e){const s="object"==typeof t&&t.setup?e.prototype[t.setup]:e.prototype.binding,r="object"==typeof t&&t.teardown?e.prototype[t.teardown]:e.prototype.unbinding;e.prototype["object"==typeof t&&void 0!==t.setup?t.setup:"binding"]=function(){if("object"==typeof t&&"string"==typeof t.onChanged&&!(t.onChanged in this))throw new Error("Provided onChanged handler does not exist on target VM");const e=bu.getCached(this)?bu.getCached(this).container.get(um):om.container.get(um);if(this._stateSubscriptions=i().map((t=>n(e,t.selector).subscribe((e=>{const n=t.targets.length-1,i=t.targets.reduce(((t={},e)=>t[e]),this);Object.entries(t.changeHandlers).forEach((([s,r])=>{s in this&&this[s](...[t.targets[n],e,i].slice(r,3))})),t.targets.reduce(((t,i,s)=>(t[i]=s===n?e:t[i]||{},t[i])),this)})))),s)return s.apply(this,arguments)},e.prototype["object"==typeof t&&t.teardown?t.teardown:"unbinding"]=function(){if(this._stateSubscriptions&&Array.isArray(this._stateSubscriptions)&&this._stateSubscriptions.forEach((t=>{t instanceof Lv&&!1===t.closed&&t.unsubscribe()})),r)return r.apply(this,arguments)}}}const fm={withInitialState(t){return Reflect.set(this,"state",t),this},withOptions(t){return Reflect.set(this,"options",t),this},register(t){var e;om.container=t;const n=Reflect.get(this,"state"),i=Reflect.get(this,"options"),s=t.get(ei),r=t.get(ad);if(!n)throw new Error("initialState must be provided via withInitialState builder method");let o=n;return(null===(e=null==i?void 0:i.history)||void 0===e?void 0:e.undoable)&&!Xv(n)&&(o={past:[],present:n,future:[]}),Fn.instance(um,new um(o,s,r,i)).register(t),t}};function gm(t){return"object"==typeof t&&null!==t||"function"==typeof t}let vm=new WeakMap;function mm(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function bm(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function ym(t,e,n){let i=vm.get(t);if(void 0===i){if(!n)return;i=new Map,vm.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function wm(t,e,n){const i=ym(e,n,!1);return void 0!==i&&i.has(t)}function xm(t,e,n){if(wm(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&xm(t,i,n)}function km(t,e,n){const i=ym(e,n,!1);if(void 0!==i)return i.get(t)}function Sm(t,e,n){if(wm(t,e,n))return km(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?Sm(t,i,n):void 0}function Cm(t,e){const n=[],i=ym(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function Am(t,e){const n=Cm(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=Am(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}const Em={define:function(t,e,n,i){if(!gm(n))throw mm("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return function(t,e,n,i){ym(n,i,!0).set(t,e)}(t,e,n,bm(i))},has:function(t,e,n){if(!gm(e))throw mm("Metadata.has",[t,e,n],"target",e,"Object or Function");return xm(t,e,bm(n))},hasOwn:function(t,e,n){if(!gm(e))throw mm("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return wm(t,e,bm(n))},get:function(t,e,n){if(!gm(e))throw mm("Metadata.get",[t,e,n],"target",e,"Object or Function");return Sm(t,e,bm(n))},getOwn:function(t,e,n){if(!gm(e))throw mm("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return km(t,e,bm(n))},getKeys:function(t,e){if(!gm(t))throw mm("Metadata.getKeys",[t,e],"target",t,"Object or Function");return Am(t,bm(e))},getOwnKeys:function(t,e){if(!gm(t))throw mm("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return Cm(t,bm(e))},delete:function(t,e,n){if(!gm(e))throw mm("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=ym(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,bm(n))}};class Tm{constructor(t,e,n){this.path=t,this.caseSensitive=e,this.handler=n}}class $m{constructor(t,e){this.route=t,this.paramNames=e}}class Im{constructor(t,e){this.endpoint=t,this.params=e}}class Om{constructor(t,e,n,i){var s;this.chars=t,this.states=e,this.skippedStates=n,this.result=i,this.head=e[e.length-1],this.endpoint=null===(s=this.head)||void 0===s?void 0:s.endpoint}advance(t){const{chars:e,states:n,skippedStates:i,result:s}=this;let r=null,o=0;const a=n[n.length-1];function l(c,h){if(c.isMatch(t)&&(1==++o?r=c:s.add(new Om(e.concat(t),n.concat(c),null===h?i:i.concat(h),s))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw new Error(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw new Error("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)l(e,c)}}if(a.isDynamic&&l(a,null),null!==a.nextStates)for(const t of a.nextStates)l(t,null);null!==r&&(n.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&s.remove(this)}finalize(){!function t(e,n){const i=n.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const n of i)if(n.isOptional&&null!==n.endpoint){if(e.push(n),null!==n.nextStates)for(const i of n.nextStates)t(e,i);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:n}=this,i={};for(const t of n.paramNames)i[t]=void 0;for(let n=0,s=t.length;n<s;++n){const s=t[n];if(s.isDynamic){const t=s.segment.name;void 0===i[t]?i[t]=e[n]:i[t]+=e[n]}}return i}compareTo(t){const e=this.states,n=t.states;for(let t=0,i=0,s=Math.max(e.length,n.length);t<s;++t){let s=e[t];if(void 0===s)return 1;let r=n[i];if(void 0===r)return-1;let o=s.segment,a=r.segment;if(null===o){if(null===a){++i;continue}if(void 0===(s=e[++t]))return 1;o=s.segment}else if(null===a){if(void 0===(r=n[++i]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,s=t.skippedStates,r=i.length,o=s.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=i[t],n=s[t];if(e.length<n.length)return 1;if(e.length>n.length)return-1}return 0}}function Pm(t){return null!==t.head.endpoint}function Rm(t,e){return t.compareTo(e)}class Lm{constructor(t){this.candidates=[],this.candidates=[new Om([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(Pm);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(Rm),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const n of e)n.advance(t)}}class Mm{constructor(t,e,n){switch(this.prevState=t,this.segment=e,this.value=n,this.nextStates=null,this.endpoint=null,null==e?void 0:e.kind){case 2:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let n,i=this.nextStates;return null===i?(n=void 0,i=this.nextStates=[]):n=null===t?i.find((t=>t.value===e)):i.find((e=>{var n;return null===(n=e.segment)||void 0===n?void 0:n.equals(t)})),void 0===n&&i.push(n=new Mm(this,t,e)),n}setEndpoint(t){if(null!==this.endpoint)throw new Error(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(null==e?void 0:e.kind){case 2:return!this.value.includes(t);case 1:return!0;case 3:case void 0:return this.value.includes(t)}}}function jm(t){return t.length>0}var Um;!function(t){t[t.star=1]="star",t[t.dynamic=2]="dynamic",t[t.static=3]="static"}(Um||(Um={}));class Nm{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 3}appendTo(t){const{value:e,value:{length:n}}=this;if(this.caseSensitive)for(let i=0;i<n;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<n;++i){const n=e.charAt(i);t=t.append(this,n.toUpperCase()+n.toLowerCase())}return t}equals(t){return 3===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class Bm{constructor(t,e){this.name=t,this.optional=e}get kind(){return 2}appendTo(t){return t.append(this,"/")}equals(t){return 2===t.kind&&t.optional===this.optional&&t.name===this.name}}class Fm{constructor(t){this.name=t}get kind(){return 1}appendTo(t){return t.append(this,"")}equals(t){return 1===t.kind&&t.name===this.name}}const Vm=Object.prototype.hasOwnProperty,Dm=Reflect.defineProperty,zm=t=>"function"==typeof t,qm=t=>"string"==typeof t;function Hm(t,e,n){return Dm(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function Zm(t,e,n,i=!1){!i&&Vm.call(t,e)||Hm(t,e,n)}const Wm=()=>Object.create(null),Km=Em.getOwn,_m=Em.hasOwn,Qm=Em.define,Gm=Je.annotation.keyFor,Xm=Je.resource.keyFor,Ym=Je.resource.appendTo;function Jm(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Fn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class tb{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Vm.call(t,e)&&(this[e]=t[e])}static create(t,e){return new tb(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class eb{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new eb(null,t,null==e?nb.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new eb(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new eb(t,e,nb.create(e),!1)}}class nb{constructor(t){this.bindingContext=t}static create(t){return new nb(t)}}const ib=cn.createInterface("ISignaler",(t=>t.singleton(sb)));class sb{constructor(){this.signals=Wm()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var rb;!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(rb||(rb={}));class ob{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;qm(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===lb;return new ob(e,De(hb(e,"name"),n),Ve(hb(e,"aliases"),i.aliases,e.aliases),ub.keyFrom(n),en("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Fn.singleton(n,e).register(t);break;case 2:Fn.instance(n,new ab(t,e)).register(t)}Fn.aliasTo(n,e).register(t),Jm(i,ub,n,t)}}class ab{constructor(t,e){this.ctn=t,this.Type=e,this.deps=cn.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class lb{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{Dm(lb.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const cb=Xm("binding-behavior"),hb=(t,e)=>Km(Gm(e),t),ub=Object.freeze({name:cb,keyFrom:t=>`${cb}:${t}`,isType:t=>zm(t)&&_m(cb,t),define(t,e){const n=ob.create(t,e);return Qm(cb,n,n.Type),Qm(cb,n,n),Ym(e,cb),n.Type},getDefinition(t){const e=Km(cb,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){Qm(Gm(e),n,t)},getAnnotation:hb});class db{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return qm(t)?(n=t,i={name:n}):(n=t.name,i=t),new db(e,De(fb(e,"name"),n),Ve(fb(e,"aliases"),i.aliases,e.aliases),gb.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Fn.singleton(n,e).register(t),Fn.aliasTo(n,e).register(t),Jm(i,gb,n,t)}}const pb=Xm("value-converter"),fb=(t,e)=>Km(Gm(e),t),gb=Object.freeze({name:pb,keyFrom:t=>`${pb}:${t}`,isType:t=>zm(t)&&_m(pb,t),define(t,e){const n=db.create(t,e);return Qm(pb,n,n.Type),Qm(pb,n,n),Ym(e,pb),n.Type},getDefinition(t){const e=Km(pb,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){Qm(Gm(e),n,t)},getAnnotation:fb});var vb;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(vb||(vb={}));class mb{constructor(){this.text=""}static unparse(t){const e=new mb;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",qm(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class bb{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class yb{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=ub.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof ab)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(zm(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return mb.unparse(this)}}class wb{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=gb.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(ib);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(ib);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return mb.unparse(this)}}class xb{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return mb.unparse(this)}}class kb{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return mb.unparse(this)}}class Sb{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return mb.unparse(this)}}Sb.$this=new Sb(0),Sb.$parent=new Sb(1);class Cb{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=tb.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=tb.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return mb.unparse(this)}}class Ab{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return mb.unparse(this)}}class Eb{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return mb.unparse(this)}}class Tb{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=tb.get(e,this.name,this.ancestor,t),o=Zb(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return mb.unparse(this)}}class $b{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=Zb(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return mb.unparse(this)}}class Ib{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(zm(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return mb.unparse(this)}}class Ob{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!zm(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(Ie(s)||Ie(r))return(s||0)+(r||0);if(Oe(s)||Oe(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return mb.unparse(this)}}class Pb{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return mb.unparse(this)}}class Rb{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return mb.unparse(this)}}Rb.$undefined=new Rb(void 0),Rb.$null=new Rb(null),Rb.$true=new Rb(!0),Rb.$false=new Rb(!1),Rb.$empty=new Rb("");class Lb{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return mb.unparse(this)}}Lb.$empty=new Lb(Hn);class Mb{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return mb.unparse(this)}}Mb.$empty=new Mb(Hn,Hn);class jb{constructor(t,e=Hn){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return mb.unparse(this)}}jb.$empty=new jb([""]);class Ub{constructor(t,e,n,i=Hn){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!zm(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return mb.unparse(this)}}class Nb{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return mb.unparse(this)}}class Bb{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return mb.unparse(this)}}class Fb{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return mb.unparse(this)}}const Vb=Object.prototype.toString;class Db{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(Vb.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${Vb.call(e)}`)}}iterate(t,e,n){switch(Vb.call(e)){case"[object Array]":return Wb(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;Wb(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;Wb(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;Wb(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${Vb.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return mb.unparse(this)}}class zb{constructor(t,e=Hn){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return mb.unparse(this)}}class qb{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,eb.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return mb.unparse(this)}}class Hb{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,eb.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return mb.unparse(this)}}function Zb(t,e,n){const i=null==e?null:e[n];if(zm(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function Wb(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}var Kb,_b,Qb,Gb,Xb,Yb;function Jb(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function ty(t){return null==t?ey:ey(t)}function ey(t){const e=t.prototype;Dm(e,"subs",{get:iy}),Zm(e,"subscribe",sy),Zm(e,"unsubscribe",ry)}cn.createInterface("ICoercionConfiguration"),function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(Kb||(Kb={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(_b||(_b={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(Qb||(Qb={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(Gb||(Gb={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(Xb||(Xb={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(Yb||(Yb={}));class ny{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function iy(){return Hm(this,"subs",new ny)}function sy(t){return this.subs.add(t)}function ry(t){return this.subs.remove(t)}function oy(t){return null==t?ay:ay(t)}function ay(t){const e=t.prototype;Dm(e,"queue",{get:cy})}class ly{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(hy)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function cy(){return ly.instance}function hy(t,e,n){n.delete(t),t.flush()}ly.instance=new ly;class uy{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&$e(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){vy=this.h,this.h=this.v,this.subs.notify(this.v,vy,this.f)}}class dy{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){vy=this.h,this.h=this.v,this.subs.notify(this.v,vy,this.f)}}function py(t){const e=t.prototype;Zm(e,"subscribe",fy,!0),Zm(e,"unsubscribe",gy,!0),oy(t),ty(t)}function fy(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function gy(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let vy;py(uy),py(dy);const my=new WeakMap;function by(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function yy(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function wy(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function xy(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,b,y,w,x,k,S,C=0,A=0;for(;;){if(i-n<=10)return void wy(t,e,n,i,s);C=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[C],h=e[C],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,b=n+1,y=i-1,t[C]=t[b],e[C]=e[b],t[b]=v,e[b]=m;t:for(A=b+1;A<y;A++)if(w=t[A],x=e[A],k=s(w,v),k<0)t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,b++;else if(k>0){do{if(y--,y==A)break t;S=t[y],k=s(S,v)}while(k>0);t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,k<0&&(w=t[A],x=e[A],t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,b++)}i-y<b-n?(xy(t,e,y,i,s),i=b):(xy(t,e,n,b,s),n=y)}}const ky=Array.prototype,Sy=ky.push,Cy=ky.unshift,Ay=ky.pop,Ey=ky.shift,Ty=ky.splice,$y=ky.reverse,Iy=ky.sort,Oy=["push","unshift","pop","shift","splice","reverse","sort"],Py={push:function(...t){const e=my.get(this);if(void 0===e)return Sy.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=my.get(this);if(void 0===e)return Cy.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;Cy.apply(e.indexMap,i);const r=Cy.apply(this,t);return e.notify(),r},pop:function(){const t=my.get(this);if(void 0===t)return Ay.call(this);const e=t.indexMap,n=Ay.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),Ay.call(e),t.notify(),n},shift:function(){const t=my.get(this);if(void 0===t)return Ey.call(this);const e=t.indexMap,n=Ey.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),Ey.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=my.get(this);if(void 0===i)return Ty.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;Ty.call(a,e,n,...i)}else Ty.apply(a,t);const h=Ty.apply(this,t);return i.notify(),h},reverse:function(){const t=my.get(this);if(void 0===t)return $y.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=my.get(this);if(void 0===e)return Iy.call(this,t),this;const n=this.length;if(n<2)return this;xy(this,e.indexMap,0,n,yy);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&zm(t)||(t=by),xy(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of Oy)Dm(Py[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Ry=!1;class Ly{constructor(t){this.type=18,Ry||(Ry=!0,function(){for(const t of Oy)!0!==ky[t].observing&&Hm(ky,t,Py[t])}()),this.indexObservers={},this.collection=t,this.indexMap=Jb(t.length),this.lenObs=void 0,my.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=Jb(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new uy(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new My(this,t)}}class My{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function jy(t){let e=my.get(t);return void 0===e&&(e=new Ly(t)),e}ty(Ly),ty(My);const Uy=new WeakMap,Ny=Set.prototype,By=Ny.add,Fy=Ny.clear,Vy=Ny.delete,Dy=["add","clear","delete"],zy={add:function(t){const e=Uy.get(this);if(void 0===e)return By.call(this,t),this;const n=this.size;return By.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=Uy.get(this);if(void 0===t)return Fy.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Fy.call(this),e.length=0,t.notify()}},delete:function(t){const e=Uy.get(this);if(void 0===e)return Vy.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Vy.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},qy={writable:!0,enumerable:!1,configurable:!0};for(const t of Dy)Dm(zy[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Hy=!1;class Zy{constructor(t){this.type=34,Hy||(Hy=!0,function(){for(const t of Dy)!0!==Ny[t].observing&&Dm(Ny,t,{...qy,value:zy[t]})}()),this.collection=t,this.indexMap=Jb(t.size),this.lenObs=void 0,Uy.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Jb(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new dy(this)}}function Wy(t){let e=Uy.get(t);return void 0===e&&(e=new Zy(t)),e}ty(Zy);const Ky=new WeakMap,_y=Map.prototype,Qy=_y.set,Gy=_y.clear,Xy=_y.delete,Yy=["set","clear","delete"],Jy={set:function(t,e){const n=Ky.get(this);if(void 0===n)return Qy.call(this,t,e),this;const i=this.get(t),s=this.size;if(Qy.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=Ky.get(this);if(void 0===t)return Gy.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Gy.call(this),e.length=0,t.notify()}},delete:function(t){const e=Ky.get(this);if(void 0===e)return Xy.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Xy.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},tw={writable:!0,enumerable:!1,configurable:!0};for(const t of Yy)Dm(Jy[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ew=!1;class nw{constructor(t){this.type=66,ew||(ew=!0,function(){for(const t of Yy)!0!==_y[t].observing&&Dm(_y,t,{...tw,value:Jy[t]})}()),this.collection=t,this.indexMap=Jb(t.size),this.lenObs=void 0,Ky.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Jb(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new dy(this)}}function iw(t){let e=Ky.get(t);return void 0===e&&(e=new nw(t)),e}function sw(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function rw(){return Hm(this,"obs",new hw(this))}function ow(t){let e;if(t instanceof Array)e=jy(t);else if(t instanceof Set)e=Wy(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=iw(t)}this.obs.add(e)}function aw(t){this.obs.add(t)}function lw(){throw new Error("AUR2011:handleChange")}function cw(){throw new Error("AUR2012:handleCollectionChange")}ty(nw);class hw{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(dw,this),this.count=this.o.size}clearAll(){this.o.forEach(uw,this),this.o.clear(),this.count=0}}function uw(t,e){e.unsubscribe(this)}function dw(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function pw(t){const e=t.prototype;return Zm(e,"observe",sw,!0),Zm(e,"observeCollection",ow,!0),Zm(e,"subscribeTo",aw,!0),Dm(e,"obs",{get:rw}),Zm(e,"handleChange",lw),Zm(e,"handleCollectionChange",cw),t}function fw(t){return null==t?pw:pw(t)}pw(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}}),cn.createInterface("IExpressionParser",(t=>t.singleton(gw)));class gw{constructor(){this.u=Wm(),this.A=Wm(),this.U=Wm()}parse(t,e){let n;switch(e){case 16:return new bb(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return Rb.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return $w.ip=t,$w.length=t.length,$w.index=0,$w.O=t.charCodeAt(0),Iw($w,0,61,void 0===e?8:e)}}var vw,mw,bw,yw;function ww(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(vw||(vw={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(mw||(mw={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(bw||(bw={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(yw||(yw={}));const xw=Rb.$false,kw=Rb.$true,Sw=Rb.$null,Cw=Rb.$undefined,Aw=Sb.$this,Ew=Sb.$parent;var Tw;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(Tw||(Tw={}));const $w=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function Iw(t,e,n,i){if(16===i)return new bb(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),Pw(t);const i=Iw(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(ww(Rw(t)));break;default:s+=String.fromCharCode(t.O)}Rw(t)}return n.length?(e.push(s),new zb(e,n)):null}(t);if(Pw(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=Bw[63&t.$];Pw(t),s=new Pb(n,Iw(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(Pw(t),e++,!Uw(t,16393)){if(524288&t.$){const t=511&e;s=0===t?Aw:1===t?Ew:new Sb(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new Fb(t.L):(s=new Cb(t.L,511&e),e=1024),t.R=!0,Pw(t);break;case 3076:t.R=!1,Pw(t),s=Aw,e=512;break;case 671751:Pw(t),s=Iw(t,0,62,i),Nw(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new qb(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(Pw(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return Nw(t,1835022),n;function o(){""!==i?(e.push(new Hb(new Ab(Aw,i),new Eb(Aw,new Rb(r++)),void 0)),i=""):r++}}(t):function(t,e,n){Pw(t);const i=new Array;for(;1835022!==t.$;)if(Uw(t,1572876)){if(i.push(Cw),1835022===t.$)break}else{if(i.push(Iw(t,e,62,-3&n)),!Uw(t,1572876))break;if(1835022===t.$)break}return Nw(t,1835022),2&n?new Nb(i):(t.R=!1,new Lb(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(Pw(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)Pw(t),Nw(t,1572879),i.push(Iw(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;Pw(t),Uw(t,1572879)?i.push(Iw(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(Iw(t,0,450,-3&e)))}}1835018!==t.$&&Nw(t,1572876)}return Nw(t,1835018),2&e?new Bb(n,i):(t.R=!1,new Mb(n,i))}(t,i),e=0;break;case 540714:s=new jb([t.L]),t.R=!1,Pw(t),e=0;break;case 540715:s=Ow(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new Rb(t.L),t.R=!1,Pw(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=Bw[63&t.$],t.R=!1,Pw(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);Pw(t);const n=e,i=Iw(t,0,61,0);return new Db(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,Pw(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,Pw(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new Cb(r,s.ancestor):new Ab(s,r);continue;case 671757:t.R=!0,Pw(t),e=4096,s=new Eb(s,Iw(t,0,62,i)),Nw(t,1835022);break;case 671751:for(t.R=!1,Pw(t);1835019!==t.$&&(n.push(Iw(t,0,62,i)),Uw(t,1572876)););Nw(t,1835019),s=1024&e?new Tb(r,n,s.ancestor):2048&e?new $b(s,r,n):new Ib(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new Ub(o,o,s),Pw(t);break;case 540715:s=Ow(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;Pw(t),s=new Ob(Bw[63&r],s,Iw(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(Uw(t,1572880)){const n=Iw(t,e,62,i);Nw(t,1572879),s=new kb(s,n,Iw(t,e,62,i)),t.R=!1}if(62<n)return s;if(Uw(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new xb(s,Iw(t,e,62,i))}if(61<n)return s;for(;Uw(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;Pw(t);const r=new Array;for(;Uw(t,1572879);)r.push(Iw(t,e,62,i));s=new wb(s,n,r)}for(;Uw(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;Pw(t);const r=new Array;for(;Uw(t,1572879);)r.push(Iw(t,e,62,i));s=new yb(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function Ow(t,e,n,i,s){const r=[t.L];Nw(t,540715);const o=[Iw(t,e,62,n)];for(;540714!==(t.$=jw(t));)r.push(t.L),Nw(t,540715),o.push(Iw(t,e,62,n));return r.push(t.L),t.R=!1,s?(Pw(t),new Ub(r,r,i,o)):(Pw(t),new jb(r,o))}function Pw(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=Ww[t.O](t)))return;t.$=1572864}function Rw(t){return t.O=t.ip.charCodeAt(++t.index)}function Lw(t,e){let n=t.O;if(!1===e){do{n=Rw(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=Rw(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=Rw(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function Mw(t){let e=!0,n="";for(;96!==Rw(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(ww(Rw(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return Rw(t),t.L=n,e?540714:540715}function jw(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,Mw(t)}function Uw(t,e){return t.$===e&&(Pw(t),!0)}function Nw(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);Pw(t)}const Bw=[xw,kw,Sw,Cw,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Fw=Wm();Fw.true=2049,Fw.null=2050,Fw.false=2048,Fw.undefined=2051,Fw.$this=3076,Fw.$parent=3078,Fw.in=1640799,Fw.instanceof=1640800,Fw.typeof=34851,Fw.void=34852,Fw.of=1051180;const Vw=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Dw=[48,58];function zw(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function qw(t){return e=>(Rw(e),t)}const Hw=t=>{throw new Error(`AUR0168:${t.ip}`)};Hw.notMapped=!0,zw(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const Zw=new Uint8Array(65535);zw(Zw,null,Vw,1),zw(Zw,null,Dw,1);const Ww=new Array(65535);Ww.fill(Hw,0,65535),zw(Ww,null,[0,33,127,161],(t=>(Rw(t),null))),zw(Ww,null,Vw,(function(t){for(;Zw[Rw(t)];);const e=Fw[t.L=t.P];return void 0===e?1024:e})),zw(Ww,null,Dw,(t=>Lw(t,!1))),Ww[34]=Ww[39]=t=>function(t){const e=t.O;Rw(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),Rw(t),n=ww(t.O),Rw(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);Rw(t)}const r=t.ip.slice(s,t.index);Rw(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),Ww[96]=t=>Mw(t),Ww[33]=t=>61!==Rw(t)?32809:61!==Rw(t)?1638680:(Rw(t),1638682),Ww[61]=t=>61!==Rw(t)?1048616:61!==Rw(t)?1638679:(Rw(t),1638681),Ww[38]=t=>38!==Rw(t)?1572883:(Rw(t),1638614),Ww[124]=t=>124!==Rw(t)?1572884:(Rw(t),1638549),Ww[46]=t=>Rw(t)<=57&&t.O>=48?Lw(t,!0):16393,Ww[60]=t=>61!==Rw(t)?1638747:(Rw(t),1638749),Ww[62]=t=>61!==Rw(t)?1638748:(Rw(t),1638750),Ww[37]=qw(1638886),Ww[40]=qw(671751),Ww[41]=qw(1835019),Ww[42]=qw(1638885),Ww[43]=qw(623009),Ww[44]=qw(1572876),Ww[45]=qw(623010),Ww[47]=qw(1638887),Ww[58]=qw(1572879),Ww[63]=qw(1572880),Ww[91]=qw(671757),Ww[93]=qw(1835022),Ww[123]=qw(131080),Ww[125]=qw(1835018);let Kw=null;const _w=[];let Qw=!1;function Gw(){return Kw}function Xw(t){if(null==t)throw new Error("AUR0206");if(null==Kw)return Kw=t,_w[0]=Kw,void(Qw=!0);if(Kw===t)throw new Error("AUR0207");_w.push(t),Kw=t,Qw=!0}function Yw(t){if(null==t)throw new Error("AUR0208");if(Kw!==t)throw new Error("AUR0209");_w.pop(),Kw=_w.length>0?_w[_w.length-1]:null,Qw=null!=Kw}Object.freeze({get current(){return Kw},get connecting(){return Qw},enter:Xw,exit:Yw,pause:function(){Qw=!1},resume:function(){Qw=!0}});const Jw=Reflect.get,tx=Object.prototype.toString,ex=new WeakMap;function nx(t){switch(tx.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const ix="__raw__";function sx(t){return nx(t)?rx(t):t}function rx(t){var e;return null!==(e=ex.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?hx:t instanceof Map||t instanceof Set?Lx:cx,n=new Proxy(t,e);return ex.set(t,n),n}(t)}function ox(t){var e;return null!==(e=t.__raw__)&&void 0!==e?e:t}function ax(t){return nx(t)&&t.__raw__||t}function lx(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const cx={get(t,e,n){if(e===ix)return t;const i=Gw();return!Qw||lx(e)||null==i?Jw(t,e,n):(i.observe(t,e),sx(Jw(t,e,n)))}},hx={get(t,e,n){if(e===ix)return t;const i=Gw();if(!Qw||lx(e)||null==i)return Jw(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return ux;case"includes":return fx;case"indexOf":return gx;case"lastIndexOf":return vx;case"every":return dx;case"filter":return px;case"find":return bx;case"findIndex":return mx;case"flat":return yx;case"flatMap":return wx;case"join":return xx;case"push":return Sx;case"pop":return kx;case"reduce":return Px;case"reduceRight":return Rx;case"reverse":return Tx;case"shift":return Cx;case"unshift":return Ax;case"slice":return Ox;case"splice":return Ex;case"some":return $x;case"sort":return Ix;case"keys":return Dx;case"values":case Symbol.iterator:return zx;case"entries":return qx}return i.observe(t,e),sx(Jw(t,e,n))},ownKeys(t){var e;return null===(e=Gw())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function ux(t,e){var n;const i=ox(this),s=i.map(((n,i)=>ax(t.call(e,sx(n),i,this))));return null===(n=Gw())||void 0===n||n.observeCollection(i),sx(s)}function dx(t,e){var n;const i=ox(this),s=i.every(((n,i)=>t.call(e,sx(n),i,this)));return null===(n=Gw())||void 0===n||n.observeCollection(i),s}function px(t,e){var n;const i=ox(this),s=i.filter(((n,i)=>ax(t.call(e,sx(n),i,this))));return null===(n=Gw())||void 0===n||n.observeCollection(i),sx(s)}function fx(t){var e;const n=ox(this),i=n.includes(ax(t));return null===(e=Gw())||void 0===e||e.observeCollection(n),i}function gx(t){var e;const n=ox(this),i=n.indexOf(ax(t));return null===(e=Gw())||void 0===e||e.observeCollection(n),i}function vx(t){var e;const n=ox(this),i=n.lastIndexOf(ax(t));return null===(e=Gw())||void 0===e||e.observeCollection(n),i}function mx(t,e){var n;const i=ox(this),s=i.findIndex(((n,i)=>ax(t.call(e,sx(n),i,this))));return null===(n=Gw())||void 0===n||n.observeCollection(i),s}function bx(t,e){var n;const i=ox(this),s=i.find(((e,n)=>t(sx(e),n,this)),e);return null===(n=Gw())||void 0===n||n.observeCollection(i),sx(s)}function yx(){var t;const e=ox(this);return null===(t=Gw())||void 0===t||t.observeCollection(e),sx(e.flat())}function wx(t,e){var n;const i=ox(this);return null===(n=Gw())||void 0===n||n.observeCollection(i),rx(i.flatMap(((n,i)=>sx(t.call(e,sx(n),i,this)))))}function xx(t){var e;const n=ox(this);return null===(e=Gw())||void 0===e||e.observeCollection(n),n.join(t)}function kx(){return sx(ox(this).pop())}function Sx(...t){return ox(this).push(...t)}function Cx(){return sx(ox(this).shift())}function Ax(...t){return ox(this).unshift(...t)}function Ex(...t){return sx(ox(this).splice(...t))}function Tx(...t){var e;const n=ox(this),i=n.reverse();return null===(e=Gw())||void 0===e||e.observeCollection(n),sx(i)}function $x(t,e){var n;const i=ox(this),s=i.some(((n,i)=>ax(t.call(e,sx(n),i,this))));return null===(n=Gw())||void 0===n||n.observeCollection(i),s}function Ix(t){var e;const n=ox(this),i=n.sort(t);return null===(e=Gw())||void 0===e||e.observeCollection(n),sx(i)}function Ox(t,e){var n;const i=ox(this);return null===(n=Gw())||void 0===n||n.observeCollection(i),rx(i.slice(t,e))}function Px(t,e){var n;const i=ox(this),s=i.reduce(((e,n,i)=>t(e,sx(n),i,this)),e);return null===(n=Gw())||void 0===n||n.observeCollection(i),sx(s)}function Rx(t,e){var n;const i=ox(this),s=i.reduceRight(((e,n,i)=>t(e,sx(n),i,this)),e);return null===(n=Gw())||void 0===n||n.observeCollection(i),sx(s)}const Lx={get(t,e,n){if(e===ix)return t;const i=Gw();if(!Qw||lx(e)||null==i)return Jw(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Fx;case"delete":return Vx;case"forEach":return Mx;case"add":if(t instanceof Set)return Bx;break;case"get":if(t instanceof Map)return Ux;break;case"set":if(t instanceof Map)return Nx;break;case"has":return jx;case"keys":return Dx;case"values":return zx;case"entries":return qx;case Symbol.iterator:return t instanceof Map?qx:zx}return sx(Jw(t,e,n))}};function Mx(t,e){var n;const i=ox(this);return null===(n=Gw())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,sx(n),sx(i),this)}))}function jx(t){var e;const n=ox(this);return null===(e=Gw())||void 0===e||e.observeCollection(n),n.has(ax(t))}function Ux(t){var e;const n=ox(this);return null===(e=Gw())||void 0===e||e.observeCollection(n),sx(n.get(ax(t)))}function Nx(t,e){return sx(ox(this).set(ax(t),ax(e)))}function Bx(t){return sx(ox(this).add(ax(t)))}function Fx(){return sx(ox(this).clear())}function Vx(t){return sx(ox(this).delete(ax(t)))}function Dx(){var t;const e=ox(this);null===(t=Gw())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:sx(e),done:i}},[Symbol.iterator](){return this}}}function zx(){var t;const e=ox(this);null===(t=Gw())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:sx(e),done:i}},[Symbol.iterator](){return this}}}function qx(){var t;const e=ox(this);null===(t=Gw())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[sx(e[0]),sx(e[1])],done:i}},[Symbol.iterator](){return this}}}Object.freeze({getProxy:rx,getRaw:ox,wrap:sx,unwrap:ax,rawKey:ix});class Hx{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new Hx(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,Dm(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!zm(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){Zx=this.ov,this.ov=this.v,this.subs.notify(this.v,Zx,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return Xw(this),this.v=ax(this.get.call(this.up?sx(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,Yw(this)}}}let Zx;fw(Hx),ty(Hx),oy(Hx);const Wx=cn.createInterface("IDirtyChecker",(t=>t.singleton(Qx))),Kx={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},_x={persistent:!0};class Qx{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(Kx.disabled)return;if(++this.j<Kx.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(Kx.throw)throw new Error(`AUR0222:${e}`);return new Gx(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,_x))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}Qx.inject=[Kn],oy(Qx);class Gx{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}ty(Gx);class Xx{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}let Yx;class Jx{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){Yx=this.ov,this.ov=this.v,this.subs.notify(this.v,Yx,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Dm(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(Dm(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class tk{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=zm(n);const s=t[e];this.cb=zm(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){Yx=this.ov,this.ov=this.v,this.subs.notify(this.v,Yx,this.f)}}ty(Jx),ty(tk),oy(Jx),oy(tk);const ek=new class{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}},nk=cn.createInterface("IObserverLocator",(t=>t.singleton(rk))),ik=cn.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(ei).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new sk)))));class sk{handles(){return!1}getObserver(){return ek}getAccessor(){return ek}}class rk{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):ek}getArrayObserver(t){return jy(t)}getMapObserver(t){return iw(t)}getSetObserver(t){return Wy(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new Xx(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return jy(t).getLengthObserver();break;case"size":if(t instanceof Map)return iw(t).getLengthObserver();if(t instanceof Set)return Wy(t).getLengthObserver();break;default:if(t instanceof Array&&$e(e))return jy(t).getIndexObserver(Number(e))}let o=ak(t,e);if(void 0===o){let n=ok(t);for(;null!==n&&(o=ak(n,e),void 0===o);)n=ok(n)}if(void 0!==o&&!Vm.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?Hx.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new Jx(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(Dm(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}rk.inject=[Wx,ik];const ok=Object.getPrototypeOf,ak=Object.getOwnPropertyDescriptor;cn.createInterface("IObservation",(t=>t.singleton(lk)));class lk{constructor(t){this.oL=t}static get inject(){return[nk]}run(t){const e=new ck(this.oL,t);return e.run(),e}}class ck{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Xw(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,Yw(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}fw(ck);class hk{constructor(t,e,n,i={}){this.router=t,this.name=e,this.connectedCE=n,this.options=i,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}get activeContent(){var t;return null!==(t=this.getNextContent())&&void 0!==t?t:this.getContent()}get connectedScope(){var t;return null===(t=this.activeContent)||void 0===t?void 0:t.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){var t,e;return null!==(e=null===(t=this.connectedCE)||void 0===t?void 0:t.$controller)&&void 0!==e?e:null}get isViewport(){return this instanceof Nk}get isViewportScope(){return this instanceof Pk}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){var n;return this.getContent().delete(),null===(n=this.getNextContent())||void 0===n||n.delete(),!0}canUnload(t){return!0}canLoad(t){return!0}unload(t){}load(t){}}class uk{constructor(t,e,n,i,s=Fk.create(""),r=Lk.create({instruction:"",fullStateInstruction:""})){var o,a;this.router=t,this.endpoint=e,this.instruction=s,this.navigation=r,this.completed=!1,this.connectedScope=new Hk(t,i,n,this),null!==this.router.rootScope&&(null!==(a=null===(o=this.endpoint.connectedScope)||void 0===o?void 0:o.parent)&&void 0!==a?a:this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){var t;null===(t=this.connectedScope.parent)||void 0===t||t.removeChild(this.connectedScope)}}class dk{constructor(t=null,e="",n=[],i="",s={}){this.match=t,this.matching=e,this.instructions=n,this.remaining=i,this.params=s}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.length>0}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}function pk(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function fk(t,e){return function(n,i){e(n,i,t)}}class gk{static parse(t,e,n,i){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!gk.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const s=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===s.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);i=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),n=!0);const{instructions:o,remaining:a}=gk.parse(t,e,r,!1);s[s.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:n,remaining:r}=gk.parse(t,e,!0,i);s.push(...n),e=r}else if(e.startsWith(t.groupEnd)){n&&(e=e.slice(t.groupEnd.length));let i=0;const r=e.length;for(;i<r;i++){if(e.slice(i,i+t.sibling.length)===t.sibling)return{instructions:s,remaining:e};if(e.slice(i,i+t.groupEnd.length)!==t.groupEnd){if(s.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(i);break}}if(i>=r)return{instructions:s,remaining:e}}else if(e.startsWith(t.sibling)&&!gk.isAdd(t,e)){if(!n)return{instructions:s,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:n,remaining:i}=gk.parseOne(t,e);s.push(n),e=i}return{instructions:s,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const n=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let i,s,r,o,a,l=!0;const c=[t.add,t.clear];for(const s of c)if(e===s){i=e,e="",n.shift(),n.shift(),o=t.viewport;break}if(void 0===i)for(const s of c)if(e.startsWith(`${s}${t.viewport}`)){i=s,e=e.slice(`${s}${t.viewport}`.length),n.shift(),n.shift(),o=t.viewport;break}if(void 0===i&&(({token:o,pos:a}=gk.findNextToken(e,n)),i=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",n.shift(),o===t.parameters&&(({token:o,pos:a}=gk.findNextToken(e,[t.parametersEnd])),s=e.slice(0,a),e=e.slice(a+o.length),({token:o}=gk.findNextToken(e,n)),e=e.slice(o.length)),n.shift()),o===t.viewport&&(({token:o,pos:a}=gk.findNextToken(e,n)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),n.shift(),o===t.noScope&&(l=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(null!=i?i:""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);return{instruction:Fk.create(i,r,s,l),remaining:e}}static findNextToken(t,e){const n={};for(const i of e)t.indexOf(i)>-1&&(n[i]=t.indexOf(i));const i=Math.min(...Object.values(n));for(const t in n)if(n[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}}class vk{constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",n="top-down",i=" > ",s=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=n,this.componentTitleSeparator=i,this.useComponentNames=s,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new vk((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return yk.for(t).title}apply(t={}){var e,n,i,s,r,o;t="string"==typeof t?{appTitle:t}:t,this.appTitle=null!==(e=t.appTitle)&&void 0!==e?e:this.appTitle,this.appTitleSeparator=null!==(n=t.appTitleSeparator)&&void 0!==n?n:this.appTitleSeparator,this.componentTitleOrder=null!==(i=t.componentTitleOrder)&&void 0!==i?i:this.componentTitleOrder,this.componentTitleSeparator=null!==(s=t.componentTitleSeparator)&&void 0!==s?s:this.componentTitleSeparator,this.useComponentNames=null!==(r=t.useComponentNames)&&void 0!==r?r:this.useComponentNames,this.componentPrefix=null!==(o=t.componentPrefix)&&void 0!==o?o:this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class mk{constructor(t="@",e="+",n="/",i="(",s=")",r="!",o="(",a=")",l=",",c="=",h="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=n,this.groupStart=i,this.groupEnd=s,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=l,this.parameterKeySeparator=c,this.add=h,this.clear=u,this.action=d}static create(t={}){return new mk(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return yk.for(t).separators}apply(t={}){var e,n,i,s,r,o,a,l,c,h,u,d,p;this.viewport=null!==(e=t.viewport)&&void 0!==e?e:this.viewport,this.sibling=null!==(n=t.sibling)&&void 0!==n?n:this.sibling,this.scope=null!==(i=t.scope)&&void 0!==i?i:this.scope,this.groupStart=null!==(s=t.groupStart)&&void 0!==s?s:this.groupStart,this.groupEnd=null!==(r=t.groupEnd)&&void 0!==r?r:this.groupEnd,this.noScope=null!==(o=t.noScope)&&void 0!==o?o:this.noScope,this.parameters=null!==(a=t.parameters)&&void 0!==a?a:this.parameters,this.parametersEnd=null!==(l=t.parametersEnd)&&void 0!==l?l:this.parametersEnd,this.parameterSeparator=null!==(c=t.parameterSeparator)&&void 0!==c?c:this.parameterSeparator,this.parameterKeySeparator=null!==(h=t.parameterKeySeparator)&&void 0!==h?h:this.parameterKeySeparator,this.add=null!==(u=t.add)&&void 0!==u?u:this.add,this.clear=null!==(d=t.clear)&&void 0!==d?d:this.clear,this.action=null!==(p=t.action)&&void 0!==p?p:this.action}}class bk{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new bk(t.loadActive,t.viewportNavigating)}static for(t){return yk.for(t).indicators}apply(t={}){var e,n;this.loadActive=null!==(e=t.loadActive)&&void 0!==e?e:this.loadActive,this.viewportNavigating=null!==(n=t.viewportNavigating)&&void 0!==n?n:this.viewportNavigating}}class yk{constructor(t=mk.create(),e=bk.create(),n=!0,i=null,s=!0,r=0,o=!0,a=!0,l=!0,c=vk.create(),h=["guardedUnload","swapped","completed"],u="attach-next-detach-current"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=n,this.basePath=i,this.useHref=s,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=l,this.title=c,this.navigationSyncStates=h,this.swapOrder=u,this.registrationHooks=[]}static create(t={}){return new yk(mk.create(t.separators),bk.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,vk.create(t.title),t.navigationSyncStates,t.swapOrder)}static for(t){return t instanceof IS?t.options:(t=t instanceof nS?t.configuration:t.get(ES)).options}apply(t){var e,n,i,s,r,o,a,l,c;t=null!=t?t:{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=null!==(e=t.useUrlFragmentHash)&&void 0!==e?e:this.useUrlFragmentHash,this.basePath=null!==(n=t.basePath)&&void 0!==n?n:this.basePath,this.useHref=null!==(i=t.useHref)&&void 0!==i?i:this.useHref,this.statefulHistoryLength=null!==(s=t.statefulHistoryLength)&&void 0!==s?s:this.statefulHistoryLength,this.useDirectRouting=null!==(r=t.useDirectRouting)&&void 0!==r?r:this.useDirectRouting,this.useConfiguredRoutes=null!==(o=t.useConfiguredRoutes)&&void 0!==o?o:this.useConfiguredRoutes,this.additiveInstructionDefault=null!==(a=t.additiveInstructionDefault)&&void 0!==a?a:this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=null!==(l=t.navigationSyncStates)&&void 0!==l?l:this.navigationSyncStates,this.swapOrder=null!==(c=t.swapOrder)&&void 0!==c?c:this.swapOrder,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}var wk;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(wk||(wk={}));class xk{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new xk;return e.set(t),e}static parse(t,e,n=!1){if(null==e||0===e.length)return[];const i=mk.for(t),s=i.parameterSeparator,r=i.parameterKeySeparator;if("string"==typeof e){const t=[],i=e.split(s);for(const e of i){let i,s;[i,s]=e.split(r),void 0===s?(s=n?decodeURIComponent(i):i,i=void 0):n&&(i=decodeURIComponent(i),s=decodeURIComponent(s)),t.push({key:i,value:s})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,n=!1){if(!Array.isArray(e)||0===e.length)return"";const i=mk.for(t);return e.map((t=>{const e=void 0!==t.key&&n?encodeURIComponent(t.key):t.key,s=n?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==s?e+i.parameterKeySeparator+s:s})).join(i.parameterSeparator)}static contains(t,e){return Object.keys(e).every((n=>e[n]===t[n]))}parameters(t){return xk.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const n=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==n.length?1===n.length?n[0]:n:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=null!=e?e:[];const n=this.parameters(t),i={};for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const[s]=n.splice(e,1);i[t]=s.value}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const[s]=n.splice(e,1);i[t]=s.value}}for(const t of n.filter((t=>void 0!==t.key)))i[t.key]=t.value;let s=e.length;for(const t of n.filter((t=>void 0===t.key)))i[s++]=t.value;return i}toSortedParameters(t,e){e=e||[];const n=this.parameters(t),i=[];for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const t={...n.splice(e,1)[0]};t.key=void 0,i.push(t)}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const t={...n.splice(e,1)[0]};i.push(t)}else i.push({value:void 0})}const s=n.filter((t=>void 0!==t.key));return s.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),i.push(...s),i.push(...n.filter((t=>void 0===t.key))),i}same(t,e,n){const i=null!==n?n.parameters:[],s=this.toSpecifiedParameters(t,i),r=e.toSpecifiedParameters(t,i);return Object.keys(s).every((t=>s[t]===r[t]))&&Object.keys(r).every((t=>r[t]===s[t]))}}class kk{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new kk;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return jh.isType(t.Type)}static isType(t){return jh.isType(t)}static isInstance(t){return function(t){return _t(t)&&jh.isType(t.constructor)}(t)}static isAppelation(t){return kk.isName(t)||kk.isType(t)||kk.isInstance(t)}static getName(t){return kk.isName(t)?t:kk.isType(t)?jh.getDefinition(t).name:kk.getName(t.constructor)}static getType(t){return kk.isName(t)?null:kk.isType(t)?t:t.constructor}static getInstance(t){return kk.isName(t)||kk.isType(t)?null:t}set(t){let e=null,n=null,i=null,s=null,r=null;t instanceof Promise?s=t:kk.isName(t)?e=kk.getName(t):kk.isType(t)?(e=this.getNewName(t),n=kk.getType(t)):kk.isInstance(t)?(e=this.getNewName(kk.getType(t)),n=kk.getType(t),i=kk.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=n,this.instance=i,this.promise=s,this.func=r}resolve(){if(null!==this.func&&this.set(this.func()),this.promise instanceof Promise)return this.promise.then((t=>{if(kk.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const n=e[0];this.set(t[n])}))}get none(){return!this.isName()&&!this.isType()&&!this.isInstance()}isName(){return!!this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t){if(null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(jh.keyFrom(this.name),!0)){const e=t.getResolver(jh.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const n=e.getFactory(t);if(n)return n.Type}}}return null}toInstance(t){if(null!==this.instance)return this.instance;if(null!=t){const e=this.isType()?t.get(this.type):t.get(jh.keyFrom(this.name));return!this.isType()||e instanceof this.type||console.warn("Failed to instantiate",this.type,e),null!=e?e:null}return null}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?kk.getName(t):this.name}}function Sk(t,e){const n=[];let i=t.findIndex(e);for(;i>=0;)n.push(t.splice(i,1)[0]),i=t.findIndex(e);return n}function Ck(t,e=!1){return t.filter(((t,n,i)=>(e||null!=t)&&i.indexOf(t)===n))}class Ak{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class Ek{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return null==e?void 0:e[0];let s=!1;null===t&&(t=new Tk,s=!0);const r=new Tk(e.shift());return Ek.connect(t,r,null!==(i=null==t?void 0:t.runParallel)&&void 0!==i&&i||s),e.length>0&&Ek.add(r,!1,...e),s?(Ek.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):r}static runParallel(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return[];let s=!1;return null===t?(t=new Tk,s=!0):t=Ek.connect(t,new Tk,!0),Ek.add(t,!0,...e),s&&Ek.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?null!==(i=t.result)&&void 0!==i?i:[]:t}static step(t){if(t instanceof Promise)return Ek.runners.get(t)}static cancel(t){const e=Ek.step(t);void 0!==e&&e.cancel()}static add(t,e,...n){let i=new Tk(n.shift(),e);null!==t&&(i=Ek.connect(t,i,e));const s=i;for(;n.length>0;)i=Ek.connect(i,new Tk(n.shift(),e),!1);return s}static connect(t,e,n){if(n){const n=t.child;t.child=e,e.parent=t,e.next=n,null!==n&&(n.parent=null,n.previous=e)}else{const n=t.next;t.next=e,e.previous=t,e.next=n,null!==n&&(n.previous=e,n.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)Ek.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const n=t.value;Ek.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,Ek.settlePromise(t),t.isDone=!0,t.isDoing=!1;const n=t.nextToDo();null===n||t.isExited?(t.root.doneAll||t.isExited)&&Ek.settlePromise(t.root):Ek.process(n)})).catch((t=>{throw t}))})(t,n)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?Ek.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&Ek.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new Ak,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){var n,i,s,r;if(null!==(i=null===(n=t.finally)||void 0===n?void 0:n.isPending)&&void 0!==i&&i)switch(t.promise=null,e){case"resolve":null===(s=t.finally)||void 0===s||s.resolve(t.result);break;case"reject":null===(r=t.finally)||void 0===r||r.reject(t.result)}}}Ek.runners=new WeakMap,Ek.roots={};class Tk{constructor(t,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+Tk.id++}get isParallelParent(){var t,e;return null!==(e=null===(t=this.child)||void 0===t?void 0:t.runParallel)&&void 0!==e&&e}get result(){var t,e;if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:null===(e=null===(t=this.child)||void 0===t?void 0:t.tail)||void 0===e?void 0:e.result}let n=this.value;for(;n instanceof Tk;)n=n.result;return n}get asValue(){return this.result}get previousValue(){var t,e,n,i;return this.runParallel?null===(n=null===(e=null===(t=this.head.parent)||void 0===t?void 0:t.parent)||void 0===e?void 0:e.previous)||void 0===n?void 0:n.result:null===(i=this.previous)||void 0===i?void 0:i.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){var e,n;return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,null===(e=this.child)||void 0===e||e.cancel(!1),null===(n=this.next)||void 0===n||n.cancel(!1),!0)}exit(t=!0){var e,n;return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,null===(e=this.child)||void 0===e||e.exit(!1),null===(n=this.next)||void 0===n||n.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){var t;let e=this.next;for(;null!==e;){if(!e.isDoing&&!e.isDone)return e;e=e.next}const n=null!==(t=this.head.parent)&&void 0!==t?t:null;return null!==n&&n.done?n.nextOrUp():null}get path(){var t,e;return`${null!==(e=null===(t=this.head.parent)||void 0===t?void 0:t.path)&&void 0!==e?e:""}/${this.name}`}get tree(){let t="",e=this.head,n=e.parent,i="";for(;null!==n;)i=`${n.path}${i}`,n=n.head.parent;do{if(t+=`${i}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){var t,e,n,i;let s=`${this.path}\n`;return s+=null!==(e=null===(t=this.child)||void 0===t?void 0:t.report)&&void 0!==e?e:"",s+=null!==(i=null===(n=this.next)||void 0===n?void 0:n.report)&&void 0!==i?i:"",s}}Tk.id=0;class $k{constructor(t,e,n,i,s,r,o,a){this.path=t,this.id=e,this.redirectTo=n,this.instructions=i,this.caseSensitive=s,this.title=r,this.reloadBehavior=o,this.data=a}static isConfigured(t){return Em.hasOwn($k.resourceKey,t)||"parameters"in t||"title"in t}static configure(t,e){const n=$k.create(t,e);return Em.define($k.resourceKey,n,e),e}static getConfiguration(t){var e;const n=null!==(e=Em.getOwn($k.resourceKey,t))&&void 0!==e?e:{};return Array.isArray(t.parameters)&&(n.parameters=t.parameters),"title"in t&&(n.title=t.title),n instanceof $k?n:$k.create(n,t)}static create(t,e=null){var n,i,s,r,o,a,l,c,h;null!==e&&(t=$k.transferTypeToComponent(t,e)),jh.isType(t)?t=$k.getConfiguration(t):null===e&&(t={...t});const u=$k.transferIndividualIntoInstructions(t);$k.validateRouteConfiguration(u);let d=u.path;return Array.isArray(d)&&(d=d.join(",")),new $k(null!==(n=u.path)&&void 0!==n?n:"",null!==(s=null!==(i=u.id)&&void 0!==i?i:d)&&void 0!==s?s:null,null!==(r=u.redirectTo)&&void 0!==r?r:null,null!==(o=u.instructions)&&void 0!==o?o:null,null!==(a=u.caseSensitive)&&void 0!==a&&a,null!==(l=u.title)&&void 0!==l?l:null,null!==(c=u.reloadBehavior)&&void 0!==c?c:null,null!==(h=u.data)&&void 0!==h?h:null)}static transferTypeToComponent(t,e){var n;if(jh.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const i=null!==(n={...t})&&void 0!==n?n:{};if("component"in i||"instructions"in i)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in i||(i.component=e),"path"in i||"redirectTo"in i||(i.path=jh.getDefinition(e).name),i}static transferIndividualIntoInstructions(t){var e,n,i,s;if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(null!==(e=t.component)&&void 0!==e?e:null)||null!==(null!==(n=t.viewport)&&void 0!==n?n:null)||null!==(null!==(i=t.parameters)&&void 0!==i?i:null)||null!==(null!==(s=t.children)&&void 0!==s?s:null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}$k.resourceKey=Je.resource.keyFor("route");const Ik={name:Je.resource.keyFor("routes"),isConfigured:t=>Em.hasOwn(Ik.name,t)||"routes"in t,configure(t,e){const n=t.map((t=>$k.create(t)));return Em.define(Ik.name,n,e),e},getConfiguration(t){const e=t,n=[],i=Em.getOwn(Ik.name,t);return Array.isArray(i)&&n.push(...i),Array.isArray(e.routes)&&n.push(...e.routes),n.map((t=>t instanceof $k?t:$k.create(t)))}};class Ok extends uk{}class Pk extends hk{constructor(t,e,n,i,s,r=null,o={catches:[],source:null}){super(t,e,n),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new Ok(t,this,i,s)),this.catches.length>0&&(this.instruction=Fk.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){var t;return null!==(t=this.options.source)&&void 0!==t?t:null}get catches(){var t;let e=null!==(t=this.options.catches)&&void 0!==t?t:[];return"string"==typeof e&&(e=e.split(",")),e}get default(){if(this.catches.length>0)return this.catches[0]}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.instruction)||void 0===t?void 0:t.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`vs:${this.name}[${s}->${r}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new Ok(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){Ek.run(null,(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){var n;const i=this.contents.findIndex((e=>e.navigation===t.navigation));let s=this.contents[i];if(this.remove){const t=new Ok(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(i,1,t),s.delete(),s=t}s.completed=!0;let r=0;for(let t=0,e=i;t<e&&null!==(n=this.contents[0].navigation.completed)&&void 0!==n&&n;t++)r++;this.contents.splice(0,r),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation));if(this.contents.splice(n,1),this.add){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===Fk.clear(this.router)||t===Fk.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&Sk(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){if(null!==this.rootComponentType){const t=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;return Ik.getConfiguration(t)}return null}}class Rk{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class Lk extends class{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}{constructor(t={instruction:"",fullStateInstruction:""}){var e,n,i,s,r,o;super(t),this.navigation=new Rk,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=null!==(e=t.fromBrowser)&&void 0!==e?e:this.fromBrowser,this.origin=null!==(n=t.origin)&&void 0!==n?n:this.origin,this.replacing=null!==(i=t.replacing)&&void 0!==i?i:this.replacing,this.refreshing=null!==(s=t.refreshing)&&void 0!==s?s:this.refreshing,this.untracked=null!==(r=t.untracked)&&void 0!==r?r:this.untracked,this.historyMovement=null!==(o=t.historyMovement)&&void 0!==o?o:this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){var t,e,n;return null!==(t=this.navigation.back)&&void 0!==t&&t||null!==(e=this.navigation.forward)&&void 0!==e&&e||null!==(n=this.navigation.refresh)&&void 0!==n&&n}static create(t={instruction:"",fullStateInstruction:""}){return new Lk(t)}}class Mk{constructor(){this.map=new Map}set(t,e){const n=this.map.get(t);n instanceof Ak&&n.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof Ak&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new Ak;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof Ak?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof Ak)}clone(){const t=new Mk;return t.map=new Map(this.map),t}}class jk extends uk{constructor(t,e,n,i,s=Fk.create(""),r=Lk.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,n,i,s,r),this.router=t,this.instruction=s,this.navigation=r,this.contentStates=new Mk,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==(null==o?void 0:o.container)||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){var t,e;return this.instruction.route instanceof dk&&null!==(null===(t=this.instruction.route.match)||void 0===t?void 0:t.reloadBehavior)?null===(e=this.instruction.route.match)||void 0===e?void 0:e.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){var e,n;return this.instruction.sameComponent(this.router,t.instruction,!0)&&(null!==(e=this.navigation.query)&&void 0!==e?e:"")===(null!==(n=t.navigation.query)&&void 0!==n?n:"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return bu.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(n){if(""===(null!=e?e:""))throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`);this.instruction.parameters.set([this.instruction.component.name]),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(t){throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`)}}this.contentStates.set("created",void 0),this.contentStates.has("loaded")||!this.instruction.component.instance||this.fromCache&&this.fromHistory||(this.contentController(t).parent=t.controller)}}canLoad(){var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const i=this.instruction.component.instance;if(null==i)return!0;this.contentStates.set("checkedLoad",void 0);const s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"canLoad").map((t=>e=>{const n=t(i,o,this.instruction,this.navigation);return"boolean"==typeof n?(!1===n&&e.exit(),n):"string"==typeof n?(e.exit(),[Fk.create(n,this.endpoint)]):n}));if(0!==a.length){const t=Ek.run(null,...a);if(!0!==t)return!1!==t&&("string"==typeof t?[Fk.create(t,this.endpoint)]:t)}if(null==i.canLoad)return!0;const l=i.canLoad(o,this.instruction,this.navigation);return"boolean"==typeof l?l:"string"==typeof l?[Fk.create(l,this.endpoint)]:l}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=Lk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"canUnload").map((n=>i=>{const s=n(e,this.instruction,t);return"boolean"==typeof s?(!1===s&&i.exit(),s):s}));if(0!==n.length){const t=Ek.run(null,...n);if(!0!==t)return!1!==t&&t}if(!e.canUnload)return!0;const i=e.canUnload(this.instruction,t);if("boolean"!=typeof i&&!(i instanceof Promise))throw new Error(`Method 'canUnload' in component "${this.instruction.component.name}" needs to return true or false or a Promise resolving to true or false.`);return i}load(t){return Ek.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const i=this.instruction.component.instance,s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"load").map((t=>()=>t(i,o,this.instruction,this.navigation)));return 0!==a.length?(null!=i.load&&a.push((()=>i.load(o,this.instruction,this.navigation))),Ek.run(null,...a)):null!=i.load?i.load(o,this.instruction,this.navigation):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=Lk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"unload").map((n=>()=>n(e,this.instruction,t)));return 0!==n.length?(null!=e.unload&&n.push((()=>e.unload(this.instruction,t))),Ek.run(null,...n)):null!=e.unload?e.unload(this.instruction,t):void 0}activateComponent(t,e,n,i,s,r,o){return Ek.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(n)),(()=>{if(this.contentStates.has("activating")||this.contentStates.has("activated"))return;this.contentStates.set("activating",void 0);const t=this.contentController(s);return t.activate(null!=e?e:t,n,i,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,n,i,s,r=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return Ek.run(t,(()=>{if(r&&null!==s.element){const t=Array.from(s.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}this.contentStates.delete("activated"),this.contentStates.delete("activating");const t=this.contentController(s);return t.deactivate(null!=e?e:t,n,i)}))}disposeComponent(t,e,n=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance){if(!n)return this.contentStates.delete("created"),this.contentController(t).dispose();e.push(this)}}freeContent(t,e,n,i,s=!1){return Ek.run(t,(()=>this.unload(n)),(t=>this.deactivateComponent(t,null,e.controller,0,e,s)),(()=>this.disposeComponent(e,i,s)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t)}toComponentInstance(t){return this.instruction.component.none?null:this.instruction.component.toInstance(t)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}getLifecycleHooks(t,e){var n;return(null!==(n=t.$controller.lifecycleHooks[e])&&void 0!==n?n:[]).map((t=>t.instance[e].bind(t.instance)))}}class Uk{constructor(t=!0,e=[],n="",i="",s=!1,r=!1,o=!1,a=!1,l=!1){this.scope=t,this.usedBy=e,this.fallback=i,this.noLink=s,this.noTitle=r,this.stateful=o,this.forceDescription=a,this.noHistory=l,this.default=void 0,this.default=n}static create(t){const e=new Uk;return void 0!==t&&e.apply(t),e}apply(t){var e,n,i,s,r,o,a,l,c;this.scope=null!==(e=t.scope)&&void 0!==e?e:this.scope,this.usedBy=null!==(n="string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)&&void 0!==n?n:this.usedBy,this.default=null!==(i=t.default)&&void 0!==i?i:this.default,this.fallback=null!==(s=t.fallback)&&void 0!==s?s:this.fallback,this.noLink=null!==(r=t.noLink)&&void 0!==r?r:this.noLink,this.noTitle=null!==(o=t.noTitle)&&void 0!==o?o:this.noTitle,this.stateful=null!==(a=t.stateful)&&void 0!==a?a:this.stateful,this.forceDescription=null!==(l=t.forceDescription)&&void 0!==l?l:this.forceDescription,this.noHistory=null!==(c=t.noHistory)&&void 0!==c?c:this.noHistory}}class Nk extends hk{constructor(t,e,n,i,s,r){super(t,e,n),this.contents=[],this.forceRemove=!1,this.options=new Uk,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new jk(t,this,i,s)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){var t;if(1===this.contents.length)return this.contents[0];let e;for(let n=0,i=this.contents.length;n<i&&null!==(t=this.contents[n].completed)&&void 0!==t&&t;n++)e=this.contents[n];return e}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let n=0,i=this.contents.length;n<i&&!(this.contents[n].navigation.timestamp>t);n++)e=this.contents[n];return e}get parentViewport(){let t=this.connectedScope;for(;null!=(null==t?void 0:t.parent);)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.getContent())||void 0===t?void 0:t.instruction.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`v:${this.name}[${s}->${r}]`}setNextContent(t,e){var n;t.endpoint.set(this),this.clear=t.isClear(this.router);const i=this.contents[this.contents.length-1],s=new jk(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,null!==(n=this.connectedCE)&&void 0!==n?n:null);if(this.contents.push(s),s.fromHistory=!(null===s.componentInstance||!e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>s.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(s),1,t),s.fromCache=!0):this.cache.push(s)}return null!==s.componentInstance&&i.componentInstance===s.componentInstance?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):!i.equalComponent(s)||e.navigation.refresh||"refresh"===i.reloadBehavior?this.transitionAction="swap":"disallow"===i.reloadBehavior?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):"reload"===i.reloadBehavior?(i.reload=!0,s.instruction.component.set(i.componentInstance),s.contentStates=i.contentStates.clone(),s.reload=i.reload,this.transitionAction="reload"):this.options.stateful&&i.equalParameters(s)||i.equalParameters(s)?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){var n,i,s,r,o;e=null!=e?e:{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),null!=this.connectionResolve&&this.connectionResolve());const a=(null!==(i=null===(n=this.scope.parent)||void 0===n?void 0:n.endpoint.getRoutes())&&void 0!==i?i:[]).filter((t=>""===t.path)).length>0;if(null===this.getContent().componentInstance&&null==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance)&&(this.options.default||a)){const t=Fk.parse(this.router,null!==(r=this.options.default)&&void 0!==r?r:"");if(0===t.length&&a){const e=null===(o=this.scope.parent)||void 0===o?void 0:o.findInstructions([Fk.create("")],!1,this.router.configuration.options.useConfiguredRoutes);(null==e?void 0:e.foundConfiguration)&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&Ek.run(t,(t=>{var e,n;if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),Ek.run(t,...e)}return!0}))}async transition(t){var e,n,i,s;const r=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let o=this.parentViewport;null!==o&&"reload"!==o.transitionAction&&"swap"!==o.transitionAction&&(o=null);const a=[e=>{if(this.isActiveNavigation(t))return this.canUnload(e)},e=>{this.isActiveNavigation(t)&&(e.previousValue?this.router.isRestrictedNavigation&&this.getNextContent().createComponent(this.connectedCE,this.options.fallback):t.cancel()),t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==o?t.waitForEndpointState(o,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(e)},e=>{if(this.isActiveNavigation(t)){const n=e.previousValue;if("boolean"!=typeof n)return Ek.run(e,(()=>this.router.load(n,{append:!0})),(e=>this.cancelContentChange(t,e)));if(!n)return e.cancel(),void t.cancel()}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],l=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==o?t.waitForEndpointState(o,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],c=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":c.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":c.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":c.push((e=>Ek.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":c.push((e=>Ek.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}c.push((()=>t.addEndpointState(this,"swapped"))),null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!0),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!0);const h=Ek.run(null,(e=>t.setEndpointStep(this,e.root)),...a,...l,...c,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{var e,n,i,s;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!1),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!1)}));h instanceof Promise&&h.catch((t=>{}))}canUnload(t){return Ek.run(t,(t=>this.getContent().connectedScope.canUnload(t)),(t=>{var e,n;return!!t.previousValue&&this.getContent().canUnload(null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null)}))}canLoad(t){return!!this.clear||Ek.run(t,(()=>this.waitForConnected()),(()=>(this.getNextContent().createComponent(this.connectedCE,this.options.fallback),this.getNextContent().canLoad())))}load(t){if(!this.clear)return this.getNextContent().load(t)}addContent(t,e){return this.activate(t,null,this.connectedController,0,e)}removeContent(t,e){var n;if(this.isEmpty)return;const i=this.router.statefulHistory||null!==(n=this.options.stateful)&&void 0!==n&&n;return Ek.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController,i?0:16)),(()=>i?this.dispose():void 0))}activate(t,e,n,i,s){if(null!==this.activeContent.componentInstance)return Ek.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,n,i,this.connectedCE,(()=>null==s?void 0:s.addEndpointState(this,"bound")),null==s?void 0:s.waitForSyncState("bound"))))}deactivate(t,e,n,i){var s;const r=this.getContent();if(null!=(null==r?void 0:r.componentInstance)&&!r.reload&&r.componentInstance!==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance))return r.deactivateComponent(t,e,n,i,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t){return Ek.run(t,(t=>this.getContent().connectedScope.unload(t)),(()=>{var t,e;return null!=this.getContent().componentInstance?this.getContent().unload(null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.navigation)&&void 0!==e?e:null):void 0}))}dispose(){var t;null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===(null===(t=this.getNextContent())||void 0===t?void 0:t.componentInstance)||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){var n,i,s,r,o;const a=this.contents.findIndex((e=>e.navigation===t.navigation));let l=this.contents[a];const c=this.contents[a-1];if(this.clear){const t=new jk(this.router,this,this.owningScope,this.scope.hasScope,void 0,l.navigation);this.contents.splice(a,1,t),l.delete(),l=t}else l.reload=!1;c.delete(),l.completed=!0,this.transitionAction="",l.contentStates.delete("checkedUnload"),l.contentStates.delete("checkedLoad"),this.previousViewportState=null;const h=this.router.configuration.options.indicators.viewportNavigating;null===(i=null===(n=this.connectedCE)||void 0===n?void 0:n.setActivity)||void 0===i||i.call(n,h,!1),null===(r=null===(s=this.connectedCE)||void 0===s?void 0:s.setActivity)||void 0===r||r.call(s,t.navigation.navigation,!1);let u=0;for(let t=0,e=a;t<e&&null!==(o=this.contents[0].navigation.completed)&&void 0!==o&&o;t++)u++;this.contents.splice(0,u),Sk(this.coordinators,(e=>e===t))}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation)),i=this.contents[n],s=this.contents[n-1];return Ek.run(e,(t=>{if(null!=i)return i.freeContent(t,this.connectedCE,i.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)}),(()=>{var e,n,r,o;this.previousViewportState&&Object.assign(this,this.previousViewportState),null==i||i.delete(),null!==i&&this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="",null==s||s.contentStates.delete("checkedUnload"),null==s||s.contentStates.delete("checkedLoad");const a=this.router.configuration.options.indicators.viewportNavigating;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,a,!1),null===(o=null===(r=this.connectedCE)||void 0===r?void 0:r.setActivity)||void 0===o||o.call(r,t.navigation.navigation,!1),t.removeEndpoint(this),Sk(this.coordinators,(e=>e===t))}),(()=>null==e?void 0:e.exit()))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const n=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==n)return Ek.run(t,(t=>(this.forceRemove=!0,n.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,Sk(this.historyCache,(t=>t===n))}))}getRoutes(){let t=this.getComponentType();if(null===t)return null;t=t.constructor===t.constructor.constructor?t:t.constructor;const e=Ik.getConfiguration(t);return Array.isArray(e)?e:null}getTitle(t){var e,n;if(this.options.noTitle)return"";const i=this.getComponentType();if(null===i)return"";let s="";const r=i.title;if(void 0!==r)if("string"==typeof r)s=r;else{const e=this.getComponentInstance();s=r.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=null!==(e=this.getContentInstruction().component.name)&&void 0!==e?e:"";const i=null!==(n=this.router.configuration.options.title.componentPrefix)&&void 0!==n?n:"";t.startsWith(i)&&(t=t.slice(i.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){var t;let e=null!==(t=this.getContentInstruction().component.type)&&void 0!==t?t:null;return null===e&&(e=jh.for(this.connectedCE.element).container.componentType),null!=e?e:null}getComponentInstance(){var t;return null!==(t=this.getContentInstruction().component.instance)&&void 0!==t?t:null}getContentInstruction(){var t,e,n;return null!==(n=null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.instruction)&&void 0!==e?e:this.getContent().instruction)&&void 0!==n?n:null}clearState(){this.options=Uk.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new jk(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class Bk{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof Nk?"Viewport":this.instance instanceof Pk?"ViewportScope":null}static create(t){const e=new Bk;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof hk}static getName(t){return Bk.isName(t)?t:t?t.name:null}static getInstance(t){return Bk.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class Fk{constructor(t,e,n){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.component=kk.create(t),this.endpoint=Bk.create(e),this.parameters=xk.create(n)}static create(t,e,n,i=!0,s=null){const r=new Fk(t,e,n);return r.ownsScope=i,r.nextScopeInstructions=s,r}static createClear(t,e){return Fk.create(Fk.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const n=[];for(const i of e)if("string"==typeof i)n.push(...Fk.parse(t,i));else if(i instanceof Fk)n.push(i);else if(i instanceof Promise)n.push(Fk.create(i));else if(kk.isAppelation(i))n.push(Fk.create(i));else if(kk.isDefinition(i))n.push(Fk.create(i.Type));else if("component"in i){const e=i,s=Fk.create(e.component,e.viewport,e.parameters);void 0!==e.children&&null!==e.children&&(s.nextScopeInstructions=Fk.from(t,e.children)),n.push(s)}else if("object"==typeof i&&null!==i){const t=jh.define(i);n.push(Fk.create(t))}else n.push(Fk.create(i));return n}static clear(t){return mk.for(t).clear}static add(t){return mk.for(t).add}static parse(t,e){const n=mk.for(t);let i="";const s=/^[./]+/.exec(e);Array.isArray(s)&&s.length>0&&(i=s[0],e=e.slice(i.length));const r=gk.parse(n,e,!0,!0).instructions;for(const t of r)t.scopeModifier=i;return r}static stringify(t,e,n=!1,i=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,n,i))).filter((t=>t.length>0)).join(mk.for(t).sibling)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>Fk.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const n of t)e.push(n),n.hasNextScopeInstructions&&e.push(...Fk.flat(n.nextScopeInstructions));return e}static clone(t,e=!1,n=!1){return t.map((t=>t.clone(e,n)))}static contains(t,e,n,i){return n.every((n=>n.isIn(t,e,i)))}get viewport(){return this.endpoint.instance instanceof Nk||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof Pk||null===this.endpoint.endpointType?this.endpoint:null}get previous(){var t,e;return null===(e=null===(t=this.endpoint.instance)||void 0===t?void 0:t.getContent())||void 0===e?void 0:e.instruction}isAdd(t){return this.component.name===mk.for(t).add}isClear(t){return this.component.name===mk.for(t).clear}isAddAll(t){var e,n;return this.isAdd(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}isClearAll(t){var e,n;return this.isClear(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}get hasNextScopeInstructions(){var t,e;return(null!==(e=null===(t=this.nextScopeInstructions)||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0}typeParameters(t){var e,n;return this.parameters.toSpecifiedParameters(t,null!==(n=null===(e=this.component.type)||void 0===e?void 0:e.parameters)&&void 0!==n?n:[])}sameComponent(t,e,n=!1,i=!1){return!(n&&!this.sameParameters(t,e,i))&&this.component.same(e.component,i)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,n=!1){return!!this.component.same(e.component,n)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,n=!1){var i,s,r,o,a;const l=mk.for(t);let c=e,h=!1;if(n){const t=null!==(s=null===(i=this.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==(r=null==t?void 0:t.options.noLink)&&void 0!==r&&r)return"";this.needsEndpointDescribed||null!==(o=null==t?void 0:t.options.forceDescription)&&void 0!==o&&o&&null==(null===(a=this.viewportScope)||void 0===a?void 0:a.instance)||(c=!0),(null==t?void 0:t.options.fallback)===this.component.name&&(h=!0),(null==t?void 0:t.options.default)===this.component.name&&(h=!0)}const u=this.nextScopeInstructions;let d=this.scopeModifier;if(null!==this.route){if(!this.routeStart)return Array.isArray(u)?Fk.stringify(t,u,e,n):"";const i=this.route.matching;d+=i.endsWith(l.scope)?i.slice(0,-l.scope.length):i}else d+=this.stringifyShallow(t,c,h);if(Array.isArray(u)&&u.length>0){const i=Fk.stringify(t,u,e,n);i.length>0&&(d+=l.scope,d+=1===u.length?i:`${l.groupStart}${i}${l.groupEnd}`)}return d}clone(t=!1,e=!1,n=!1){var i,s,r,o,a,l;const c=Fk.create(null!==(r=null!==(s=null!==(i=this.component.func)&&void 0!==i?i:this.component.promise)&&void 0!==s?s:this.component.type)&&void 0!==r?r:this.component.name,this.endpoint.name,null!==this.parameters.typedParameters?this.parameters.typedParameters:void 0);return t&&(c.component.set(null!==(a=null!==(o=this.component.instance)&&void 0!==o?o:this.component.type)&&void 0!==a?a:this.component.name),c.endpoint.set(null!==(l=this.endpoint.instance)&&void 0!==l?l:this.endpoint.name)),c.component.name=this.component.name,c.needsEndpointDescribed=this.needsEndpointDescribed,c.route=this.route,c.routeStart=this.routeStart,c.default=this.default,e&&(c.scopeModifier=this.scopeModifier),c.scope=t?this.scope:null,this.hasNextScopeInstructions&&!n&&(c.nextScopeInstructions=Fk.clone(this.nextScopeInstructions,t,e)),c}isIn(t,e,n){const i=e.filter((e=>{var n,i;if(!e.sameComponent(t,this))return!1;const s=null!==(n=e.component.type)&&void 0!==n?n:this.component.type,r=null!==(i=this.component.type)&&void 0!==i?i:e.component.type,o=e.parameters.toSpecifiedParameters(t,null==s?void 0:s.parameters),a=this.parameters.toSpecifiedParameters(t,null==r?void 0:r.parameters);return!!xk.contains(o,a)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===i.length||n&&this.hasNextScopeInstructions&&!i.some((e=>{var i;return Fk.contains(t,null!==(i=e.nextScopeInstructions)&&void 0!==i?i:[],this.nextScopeInstructions,n)})))}getTitle(t){var e;if(null!==this.route){const n=null===(e=this.route.match)||void 0===e?void 0:e.title;if(null!=n)return this.routeStart?"string"==typeof n?n:n(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){var t,e,n;return{component:null!==(t=this.component.name)&&void 0!==t?t:void 0,viewport:null!==(e=this.endpoint.name)&&void 0!==e?e:void 0,parameters:null!==(n=this.parameters.parametersRecord)&&void 0!==n?n:void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,n=!1){var i;const s=mk.for(t);let r=n?"":null!==(i=this.component.name)&&void 0!==i?i:"";const o=this.component.type?this.component.type.parameters:null,a=xk.stringify(t,this.parameters.toSortedParameters(t,o));return a.length>0&&(r+=n?a:`${s.parameters}${a}${s.parametersEnd}`),null==this.endpoint.name||e||(r+=`${s.viewport}${this.endpoint.name}`),this.ownsScope||(r+=s.noScope),r||""}}class Vk{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new Vk(Vk.eventName,t)}}Vk.eventName="au:router:navigation-navigate";let Dk=class{constructor(t,e){this.ea=t,this.container=e,this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=Lk.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.lastNavigationIndex=-1}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){var e,n,i,s;t instanceof Lk||(t=Lk.create(t));const r=new Rk;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?r.refresh=!0:(r.first=!0,r.new=!0,this.lastNavigationIndex=0,this.navigations=[Lk.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||null!==(e=t.replacing)&&void 0!==e&&e||null!==(n=t.refreshing)&&void 0!==n&&n?null!==(i=t.refreshing)&&void 0!==i&&i||r.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):null!==(s=t.replacing)&&void 0!==s&&s?(r.replace=!0,r.new=!0,t.index=this.lastNavigationIndex):(r.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?r.forward=!0:t.historyMovement<0&&(r.back=!0)),t.navigation=r,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new Ak,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){var n,i,s,r,o,a,l;if(null!==(n=t.untracked)&&void 0!==n&&n)null!==(i=t.fromBrowser)&&void 0!==i&&i&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(null!==(s=t.replacing)&&void 0!==s&&s)0===(null!==(r=t.historyMovement)&&void 0!==r?r:0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const n=t.index;if(e&&(this.navigations=this.navigations.slice(0,n)),this.navigations[n]=t,(null!==(o=this.options.statefulHistoryLength)&&void 0!==o?o:0)>0){const t=this.navigations.length-(null!==(a=this.options.statefulHistoryLength)&&void 0!==a?a:0);for(const e of this.navigations.slice(n))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,n))}await this.saveState(t.index,!(null!==(l=t.fromBrowser)&&void 0!==l&&l))}}async cancel(t){var e,n,i;null!=this.options.store&&((null===(e=t.navigation)||void 0===e?void 0:e.new)?null!==(n=t.fromBrowser)&&void 0!==n&&n&&await this.options.store.popNavigatorState():0!==(null!==(i=t.historyMovement)&&void 0!==i?i:0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const n=this.navigations[e];return this.navigate(n)}getState(){var t,e;const n=null!=this.options.store?{...this.options.store.state}:{};return{navigations:null!==(t=null==n?void 0:n.navigations)&&void 0!==t?t:[],navigationIndex:null!==(e=null==n?void 0:n.navigationIndex)&&void 0!==e?e:-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>Lk.create(t))),this.lastNavigationIndex=e}async saveState(t,e){var n,i,s,r,o;for(let t=0;t<this.navigations.length;t++)this.navigations[t]=Lk.create(this.navigations[t].toStoredNavigation());if((null!==(n=this.options.statefulHistoryLength)&&void 0!==n?n:0)>0){const t=this.navigations.length-(null!==(i=this.options.statefulHistoryLength)&&void 0!==i?i:0);for(let e=0;e<t;e++){const n=this.navigations[e];"string"==typeof n.instruction&&"string"==typeof n.fullStateInstruction||await this.serializeNavigation(n,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const a={navigations:(null!==(s=this.navigations)&&void 0!==s?s:[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?null===(o=null===(r=this.options)||void 0===r?void 0:r.store)||void 0===o?void 0:o.pushNavigatorState(a):this.options.store.replaceNavigatorState(a)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(Vk.eventName,Vk.create(t))}toStoreableNavigation(t){const e=t instanceof Lk?t.toStoredNavigation():t;return e.instruction=Fk.stringify(this.container,e.instruction),e.fullStateInstruction=Fk.stringify(this.container,e.fullStateInstruction),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let n=[];for(const t of e)"string"!=typeof t.instruction&&n.push(...Fk.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&n.push(...Fk.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));n=Ck(n);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=Fk.stringify(this.container,t.fullStateInstruction)),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=Fk.stringify(this.container,t.instruction)),i=i.filter(((t,e,n)=>null!=t.component.instance&&n.indexOf(t)===e));const s=[];for(const t of i)await this.freeInstructionComponents(t,n,s)}freeInstructionComponents(t,e,n){var i,s;const r=t.component.instance,o=null!==(s=null===(i=t.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==r&&null!==o&&!n.some((t=>t===r))){if(!e.some((t=>t===r)))return Ek.run(null,(t=>o.freeContent(t,r)),(()=>{n.push(r)}));if(t.hasNextScopeInstructions)for(const i of t.nextScopeInstructions)return this.freeInstructionComponents(i,e,n)}}};Dk=pk([fk(0,bi),fk(1,dn)],Dk);class zk extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){Sk(this,(e=>e===t))}}class qk{static matchEndpoints(t,e,n,i=!1){const s=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!n.some((e=>t===e.endpoint.instance)))),o=new zk(...e.slice());let a=null;for(qk.matchKnownEndpoints(t.router,"ViewportScope",o,r,s,!1),i||qk.matchKnownEndpoints(t.router,"Viewport",o,r,s,!1),qk.matchViewportScopeSegment(t.router,t,o,r,s);null!==(a=o.next());)a.needsEndpointDescribed=!0;return qk.matchViewportConfiguration(o,r,s),i||qk.matchSpecifiedViewport(o,r,s,!1),qk.matchLastViewport(o,r,s),i&&qk.matchSpecifiedViewport(o,r,s,!1),{matchedInstructions:s,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,n,i,s,r=!1){let o;for(;null!==(o=n.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(qk.matchEndpoint(o,o.endpoint.instance,r),s.push(o),Sk(i,(t=>t===o.endpoint.instance)),n.removeCurrent())}static matchViewportScopeSegment(t,e,n,i,s){let r;for(;null!==(r=n.next());)for(let o of i)if(o instanceof Pk&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let n=i.find((t=>t instanceof Pk&&t.name===o.name));if(void 0===n||r.isAdd(t)){const t=o.addSourceItem();n=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=n}qk.matchEndpoint(r,o,!1),s.push(r),Sk(i,(t=>t===r.endpoint.instance)),n.removeCurrent();break}}static matchViewportConfiguration(t,e,n){let i;for(;null!==(i=t.next());)for(const s of e)if(s instanceof Nk&&(null==s?void 0:s.wantComponent(i.component.name))){qk.matchEndpoint(i,s,!0),n.push(i),Sk(e,(t=>t===i.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,n,i){var s;let r;for(;null!==(r=t.next());){let o=r.endpoint.instance;if(null==o){const t=r.endpoint.name;if(0===(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0))continue;for(const n of e)if(n instanceof Nk&&t===n.name){o=n;break}}(null==o?void 0:o.acceptComponent(r.component.name))&&(qk.matchEndpoint(r,o,i),n.push(r),Sk(e,(t=>t===r.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,n){let i;for(;null!==(i=t.next());){const s=[];for(const t of e)t instanceof Nk&&t.acceptComponent(i.component.name)&&s.push(t);if(1===s.length){const r=s[0];qk.matchEndpoint(i,r,!0),n.push(i),Sk(e,(t=>t===i.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,n){t.endpoint.set(e),n&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof Nk?e.scope:e.scope.scope)}))}}class Hk{constructor(t,e,n,i){this.router=t,this.hasScope=e,this.owningScope=n,this.endpointContent=i,this.id=-1,this.parent=null,this.children=[],this.path=null,this.id=++Hk.lastId,this.owningScope=null!=n?n:this}static for(t){var e;if(null==t)return null;if(t instanceof Hk||t instanceof Nk||t instanceof Pk)return t.scope;let n;if("res"in t)n=t;else if("container"in t)n=t.container;else if("$controller"in t)n=t.$controller.container;else{const e=jh.for(t,{searchParents:!0});n=null==e?void 0:e.container}if(null==n)return null;const i=n.has(nS.closestEndpointKey,!0)?n.get(nS.closestEndpointKey):null;return null!==(e=null==i?void 0:i.scope)&&void 0!==e?e:null}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof Nk}get isViewportScope(){return this.endpoint instanceof Pk}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const n=t.indexOf(e);t.splice(n,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const n=e.indexOf(t);e.splice(n,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,n,i=""){var s,r,o,a;const l=this.router,c=l.configuration.options,h=t.filter((t=>null==t.route));if(h.length>0){const e=this.findInstructions(h,c.useDirectRouting,c.useConfiguredRoutes);!h.some((t=>!t.component.none))||e.foundConfiguration||e.foundInstructions||l.unknownRoute(Fk.stringify(l,h)),t=[...t.filter((t=>null!=t.route)),...e.instructions],t.some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(i=(null!=i?i:"")+e.matching)}const u=t.filter((t=>t.component.isFunction()||t.component.isPromise()));u.length>0&&await Promise.all(u.map((t=>t.component.resolve()))),c.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let d=[];({clearEndpoints:d,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(l))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;const p=[];let f=[],{matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(t,f),m=100;do{m--||l.unresolvedInstructionsError(e,v);const c=[],h=g.map((t=>t.endpoint.instance));g.push(...d.filter((t=>!h.includes(t))).map((t=>Fk.createClear(l,t))));const u=await Yk.invokeBeforeNavigation(g,e);if(!1===u)return l.cancelNavigation(e,n),[];if(!0!==u&&u!==g){const t=Fk.flat(g);v=v.filter((e=>!t.includes(e))),g=u}for(const t of g){const o=t.endpoint.instance;if(null!==o){const a=o.setNextContent(t,e);"skip"!==a&&(c.push(o),n.addEndpoint(o));const h=[o];if("swap"===a&&h.push(...o.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),Sk(d,(t=>h.includes(t))),Sk(g,(e=>e!==t&&e.isClear(l)&&h.includes(e.endpoint.instance))),!t.isClear(l)&&(null===(r=null===(s=t.scope)||void 0===s?void 0:s.parent)||void 0===r?void 0:r.isViewportScope)&&(Sk(d,(e=>e===t.scope.parent.endpoint)),Sk(g,(e=>e!==t&&e.isClear(l)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==a&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=o.scope,e.endpoint.instance=null;"skip"!==a||t.hasNextScopeInstructions||p.push(...await o.scope.processInstructions([],e,n,i))}}const b=g.filter((t=>{var e;return"skip"===(null===(e=t.endpoint.instance)||void 0===e?void 0:e.transitionAction)})),y=b.filter((t=>t.hasNextScopeInstructions));if((0===b.length||0===y.length)&&(l.isRestrictedNavigation||n.finalEndpoint(),n.run(),n.hasAllEndpoints)){const t=n.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(n.cancelled)return l.cancelNavigation(e,n),[];for(const t of c)p.every((e=>e!==t))&&p.push(t);if(f.push(...g.splice(0)),v.length>0&&({matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(v,f)),!l.isRestrictedNavigation&&(g.length>0||v.length>0)&&n.running){const t=n.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===g.length&&0===v.length){const s=[];for(const r of t){if(!r.hasNextScopeInstructions)continue;const t=null!==(a=null===(o=r.endpoint.instance)||void 0===o?void 0:o.scope)&&void 0!==a?a:r.endpoint.scope;s.push(t.processInstructions(r.nextScopeInstructions,e,n,i))}p.push(...(await Promise.all(s)).flat())}if(e.useFullStateInstruction&&(n.appendedInstructions=n.appendedInstructions.filter((t=>!t.default))),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v)),0===g.length&&0===v.length){const t=f.map((t=>{var e,n;return null===(n=(null===(e=t.endpoint.instance)||void 0===e?void 0:e.connectedCE).pendingPromise)||void 0===n?void 0:n.promise})).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v))):g=d.map((t=>Fk.createClear(l,t)))}const w=g.filter((t=>t.component.isFunction()||t.component.isPromise()));w.length>0&&await Promise.all(w.map((t=>t.component.resolve())))}while(g.length>0||v.length>0);return p}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.router.configuration.options.useConfiguredRoutes&&this.router.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.router.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const n=Fk.create(Fk.clear(e));return n.scope=this,[n,...t]}return t}getClearAllEndpoints(t){const e=this.router;let n=[];return t.some((t=>{var n;return(null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e)}))&&(n=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>{var n;return!((null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e))}))),{clearEndpoints:n,instructions:t}}findInstructions(t,e,n){var i,s;const r=this.router;let o=new dk;if(n&&!Fk.containsSiblings(r,t)){let n=t.filter((t=>t.isClear(r)||t.isClearAll(r)));const a=t.filter((t=>!t.isClear(r)&&!t.isClearAll(r)));if(a.length>0)for(const l of a){const c=this.findMatchingRoute(Fk.stringify(r,a));if(null!==(i=null==c?void 0:c.foundConfiguration)&&void 0!==i&&i)o=c,o.instructions=[...n,...o.instructions],n=[];else{if(!e)throw new Error(`No route found for: ${Fk.stringify(r,t)}!`);o.instructions=[...n,...o.instructions,l],n=[],o.remaining=Fk.stringify(r,null!==(s=l.nextScopeInstructions)&&void 0!==s?s:[])}}else o.instructions=[...n]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${Fk.stringify(r,t)}!`);o.instructions.push(...t)}o.instructions=o.instructions.filter((t=>""!==t.component.name));for(const t of o.instructions)null===t.scope&&(t.scope=this);return o}matchEndpoints(t,e,n=!1){const i=[],s=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)===this})),r=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)!==this})),{matchedInstructions:o,remainingInstructions:a}=qk.matchEndpoints(this,s,e,n);return i.push(...o),r.push(...a),{matchedInstructions:i,remainingInstructions:r}}addEndpoint(t,e,n,i={}){var s,r,o,a;let l=null!==(r=null===(s=this.getOwnedScopes().find((n=>n.type===t&&n.endpoint.name===e)))||void 0===s?void 0:s.endpoint)&&void 0!==r?r:null;return null!=n&&null!=(null==l?void 0:l.connectedCE)&&l.connectedCE!==n&&(l=null!==(a=null===(o=this.getOwnedScopes(!0).find((i=>i.type===t&&i.endpoint.name===e&&i.endpoint.connectedCE===n)))||void 0===o?void 0:o.endpoint)&&void 0!==a?a:null),null==l&&(l="Viewport"===t?new Nk(this.router,e,n,this.scope,!!i.scope,i):new Pk(this.router,e,n,this.scope,!0,null,i),this.addChild(l.connectedScope)),null!=n&&l.setConnectedCE(n,i),l}removeEndpoint(t,e,n){return!(null===(null!=n?n:null)&&!e.removeEndpoint(t,n)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const n of e.slice())e.push(...n.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const n of e.slice())e.push(...n.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const n of e.slice())if(n.passThroughScope){const i=e.indexOf(n);e.splice(i,1,...n.getOwnedRoutingScopes(t))}return Ck(e)}getRoutingInstructions(t){var e;const n=Ck(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),i=[];for(const s of n){const n=s.instruction.clone(!0,!1,!1);""!==(null!==(e=n.component.name)&&void 0!==e?e:"")&&(n.nextScopeInstructions=s.connectedScope.getRoutingInstructions(t),i.push(n))}return i}canUnload(t){return Ek.run(t,(t=>Ek.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.canUnload(e):e=>t.canUnload(e))))),(t=>t.previousValue.every((t=>t))))}unload(t){return Ek.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.unload(e):e=>t.unload(e))))}matchScope(t,e=!1){const n=[];for(const i of t)i.scope===this?n.push(i):e&&i.hasNextScopeInstructions&&n.push(...this.matchScope(i.nextScopeInstructions,e));return n}findMatchingRoute(t){if(this.isViewportScope&&!this.passThroughScope)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());if(this.isViewport)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());for(const e of this.enabledChildren){const n=e.findMatchingRoute(t);if(null!==n)return n}return null}findMatchingRouteInRoutes(t,e){var n,i,s;if(!Array.isArray(e))return null;e=e.map((t=>this.ensureProperRoute(t)));const r=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const n of e)r.push({...t,path:n,handler:t}),""!==n&&r.push({...t,path:`${n}/*remainingPath`,handler:t})}const o=new dk;(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const a=e.find((e=>e.id===t));let l={params:{},endpoint:{}};if(null!=a)l.endpoint={route:{handler:a}};else{const e=new class{constructor(){this.rootState=new Mm(null,null,""),this.cache=new Map}add(t){if(t instanceof Array)for(const e of t)this.$add(e);else this.$add(t);this.cache.clear()}$add(t){const e=t.path,n=new Tm(t.path,!0===t.caseSensitive,t.handler),i=""===e?[""]:e.split("/").filter(jm),s=[];let r=this.rootState;for(const t of i)switch(r=r.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),n=e?t.slice(1,-1):t.slice(1);s.push(n),r=new Bm(n,e).appendTo(r);break}case"*":{const e=t.slice(1);s.push(e),r=new Fm(e).appendTo(r);break}default:r=new Nm(t,n.caseSensitive).appendTo(r)}const o=new $m(n,s);r.setEndpoint(o)}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new Lm(this.rootState);for(let n=0,i=t.length;n<i;++n){const i=t.charAt(n);if(e.advance(i),e.isEmpty)return null}const n=e.getSolution();if(null===n)return null;const{endpoint:i}=n,s=n.getParams();return new Im(i,s)}};e.add(r),l=e.recognize(t)}if(null!=l){o.match=l.endpoint.route.handler,o.matching=t;const r={...l.params};if(null!=r.remainingPath&&(o.remaining=r.remainingPath,Reflect.deleteProperty(r,"remainingPath"),o.matching=o.matching.slice(0,o.matching.indexOf(o.remaining))),o.params=r,null!=(null===(n=o.match)||void 0===n?void 0:n.redirectTo)){let t=null===(i=o.match)||void 0===i?void 0:i.redirectTo;return(null!==(s=o.remaining)&&void 0!==s?s:"").length>0&&(t+=`/${o.remaining}`),this.findMatchingRouteInRoutes(t,e)}}if(o.foundConfiguration){o.instructions=Fk.clone(o.match.instructions,!1,!0);const t=o.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(o.params),e.route=o,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}o.instructions.length>0&&(o.instructions[0].routeStart=!0);const e=Fk.parse(this.router,o.remaining);if(e.length>0){let t=o.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return o}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=Fk.from(this.router,t.instructions)),t}}Hk.lastId=0;class Zk{constructor(t,e,n=0){this.taskQueue=t,this.item=e,this.cost=n,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class Wk{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{var e;null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=null!==(e=this.processing.cost)&&void 0!==e?e:0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const n=Array.isArray(t),i=n?t:[t],s=i.map(((t,n)=>Array.isArray(e)?e[n]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of i)r.push(t instanceof Zk?t:this.createQueueTask(t,s.shift()));return this.pending.push(...r),this.dequeue(),n?r:r[0]}createQueueTask(t,e){return new Zk(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,n){e(n),this.processing=null,this.dequeue()}}let Kk=class{constructor(t,e,n,i,s){this.platform=t,this.window=e,this.history=n,this.location=i,this.ea=s,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls=new Wk}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){var t,e;const{pathname:n,search:i,hash:s}=this.location,r=null!==(t=this.options.useUrlFragmentHash)&&void 0!==t&&t?s.slice(1):`${n}${i}`,o=null!==(e=this.options.useUrlFragmentHash)&&void 0!==e&&e?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new _k(n,i.slice(1),o,r)}async go(t,e=!1){const n=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const i=n,s=e;this.forwardState({eventTask:i,suppressPopstate:s}),t.resolve()},e=>{const n=this.history,i=t;n.go(i),e.resolve()}],[0,1]),n.wait()}async pushNavigatorState(t){const{title:e,path:n}=t.navigations[t.navigationIndex],i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((s=>{const r=this.history,o=t,a=e||"",l=`${i}${n}`;try{r.pushState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,l),this.setTitle(a)}s.resolve()}),1).wait()}async replaceNavigatorState(t,e,n){const i=t.navigations[t.navigationIndex];null!=e||(e=i.title),null!=n||(n=i.path);const s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((i=>{const r=this.history,o=t,a=e||"",l=`${s}${n}`;try{r.replaceState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,l),this.setTitle(a)}i.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const n=t;await this.popState(n),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:n}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async i=>{n||this.notifySubscribers(t),null!==e&&await e.execute(),i.resolve()}),1)}notifySubscribers(t){this.ea.publish(Qk.eventName,Qk.create(this.viewerState,t,this.history.state))}async popState(t){var e,n;await this.go(-1,!0);const i=this.history.state,s=null===(e=null==i?void 0:i.navigations)||void 0===e?void 0:e[null!==(n=null==i?void 0:i.navigationIndex)&&void 0!==n?n:0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(i)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,n){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${n}`)}}};Kk=pk([fk(0,mc),fk(1,ad),fk(2,cd),fk(3,ld),fk(4,bi)],Kk);class _k{constructor(t,e,n,i){this.path=t,this.query=e,this.hash=n,this.instruction=i}}class Qk{constructor(t,e,n,i){this.eventName=t,this.viewerState=e,this.event=n,this.state=i}static create(t,e,n){return new Qk(Qk.eventName,t,e,n)}}Qk.eventName="au:router:navigation-state-change";class Gk{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class Xk{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,n){const i=new Xk(t,e);return n.syncStates.forEach((t=>i.addSyncState(t))),i}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new Ak;this.syncStates.set(t,e)}addEndpoint(t){let e=this.entities.find((e=>e.endpoint===t));return void 0!==e||(e=new Gk(t),this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this)),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&Sk(this.entities,(t=>t===e))}setEndpointStep(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t)),n.step=e}addEndpointState(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t));const i=n.states.get(e);i instanceof Ak&&i.resolve(),n.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const n=this.syncStates.get(t);if(void 0!==n){if(null!==e){const i=this.entities.find((t=>t.endpoint===e));if(null===(null==i?void 0:i.syncPromise)&&n.isPending)return i.syncingState=t,i.syncPromise=new Ak,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),i.syncPromise.promise}return n.isPending?n.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let n=this.entities.find((e=>e.endpoint===t));if(null==n&&(n=this.addEndpoint(t)),n.hasReachedState(e))return;let i=n.states.get(e);return null==i&&(i=new Ak,n.states.set(e,i)),i.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0}cancel(){this.cancelled=!0,this.entities.forEach((t=>{var e,n;const i=t.endpoint.cancelContentChange(this,null!==(n=null===(e=t.step)||void 0===e?void 0:e.current)&&void 0!==n?n:null);i instanceof Promise&&i.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{var t;null===(t=this.navigation.process)||void 0===t||t.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,n){let i=[...this.appendedInstructions];t=[...t],e=[...e],n=[...n];const s=i.filter((t=>!t.default)),r=i.filter((t=>t.default));for(i=s.length>0?[...s]:[...r];i.length>0;){const s=i.shift();Sk(this.appendedInstructions,(t=>t===s));const r=e.some((t=>t.sameEndpoint(s,!0))),o=t.find((t=>t.sameEndpoint(s,!0))),a=n.find((t=>t.sameEndpoint(s,!0)));s.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&Sk(t,(t=>t===o)),void 0!==a&&Sk(n,(t=>t===a)),null!==s.endpoint.instance?t.push(s):n.push(s))}return{matchedInstructions:t,earlierMatchedInstructions:e,remainingInstructions:n}}checkSyncState(t){var e;const n=this.syncStates.get(t);if(void 0!==n&&this.hasAllEndpoints&&n.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const n of this.entities)n.syncingState===t&&(null===(e=n.syncPromise)||void 0===e||e.resolve(),n.syncPromise=null,n.syncingState=null);n.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class Yk{constructor(t,e,n){var i,s;this.hook=t,this.id=n,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of null!==(i=e.include)&&void 0!==i?i:[])this.includeTargets.push(new Jk(t));for(const t of null!==(s=e.exclude)&&void 0!==s?s:[])this.excludeTargets.push(new Jk(t))}static add(t,e){const n=new Yk(t,null!=e?e:{},++this.lastIdentity);return this.hooks[n.type].push(n),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const n=this.hooks[e].findIndex((e=>e.id===t));n>=0&&this.hooks[e].splice(n,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,n){let i=n;for(const s of this.hooks[t])if(!s.wantsMatch||s.matches(n))if(i=await s.invoke(e,n),"boolean"==typeof i){if(!i)return!1}else n=i;return i}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}Yk.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},Yk.lastIdentity=0;class Jk{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(kk.isType(t))this.componentType=t,this.componentName=kk.getName(t);else{const e=t;null!=e.component&&(this.componentType=kk.isType(e.component)?kk.getType(e.component):null,this.componentName=kk.getName(e.component)),null!=e.viewport&&(this.viewport=Bk.isInstance(e.viewport)?e.viewport:null,this.viewportName=Bk.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(Fk.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class tS{static async getTitle(t,e,n){let i=await Yk.invokeTransformTitle(t,e);if("string"!=typeof i){const t=tS.stringifyTitles(i,e,n);i=n.appTitle,i=i.replace(/\${componentTitles}/g,t),i=i.replace(/\${appTitleSeparator}/g,""!==t?n.appTitleSeparator:"")}return i=await Yk.invokeTransformTitle(i,e),i}static stringifyTitles(t,e,n){const i=t.map((t=>tS.stringifyTitle(t,e,n))).filter((t=>{var e;return(null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0)>0}));return i.join(" + ")}static stringifyTitle(t,e,n){const i=t.nextScopeInstructions;let s=tS.resolveTitle(t,e,n);if(Array.isArray(i)&&i.length>0){let t=tS.stringifyTitles(i,e,n);t.length>0&&(1!==i.length&&(t=`[ ${t} ]`),s=s.length>0?"top-down"===n.componentTitleOrder?s+n.componentTitleSeparator+t:t+n.componentTitleSeparator+s:t)}return s}static resolveTitle(t,e,n){let i=t.getTitle(e);return null!=n.transformTitle&&(i=n.transformTitle(i,t,e)),i}}const eS=cn.createInterface("IRouter",(t=>t.singleton(nS)));class nS{constructor(t,e,n,i,s,r){this.container=t,this.ea=e,this.navigator=n,this.viewer=i,this.store=s,this.configuration=r,this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.handleNavigatorNavigateEvent=t=>{this.processNavigation(t.navigation).catch((t=>{throw t}))},this.handleNavigatorStateChangeEvent=t=>{var e;if(null!=(null===(e=t.state)||void 0===e?void 0:e.navigationIndex)){const e=Lk.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{var e;this.loadedFirst=!0;const n=this.configuration.options,i=Xk.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(i),i.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(aS.eventName,aS.create(t));let s="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await Yk.invokeTransformFromUrl(t.instruction,i.navigation);const r=n.basePath;null!==r&&"string"==typeof s&&s.startsWith(r)&&!n.useUrlFragmentHash&&(s=s.slice(r.length)),"/"===s&&(s=""),"string"==typeof s&&(s=""===s?[new Fk("")]:Fk.parse(this,s)),null!==(e=t.scope)&&void 0!==e||(t.scope=this.rootScope.scope);const o=await t.scope.processInstructions(s,t,i);return Ek.run(null,(()=>(i.finalEndpoint(),i.waitForSyncState("completed"))),(()=>(i.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&o.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(var t;this.coordinators.length>0&&this.coordinators[0].completed;){const e=this.coordinators.shift();await this.navigator.finalize(e.navigation,!1),this.ea.publish(hS.eventName,hS.create(e.navigation)),this.ea.publish(lS.eventName,lS.create(e.navigation)),null===(t=e.navigation.process)||void 0===t||t.resolve(!0)}}))}}static get inject(){return[dn,bi,Dk,Kk,Kk,ES]}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw new Error("Router has already been started");this.isActive=!0;const t=this.container.get(Zu);this.rootScope=new Pk(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const n=new URL(t.host.baseURI);e.basePath=n.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.navigatorStateChangeEventSubscription=this.ea.subscribe(Qk.eventName,this.handleNavigatorStateChangeEvent),this.navigatorNavigateEventSubscription=this.ea.subscribe(Vk.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(sS.eventName,sS.create())}stop(){if(!this.isActive)throw new Error("Router has not been started");this.ea.publish(rS.eventName,rS.create()),this.navigator.stop(),this.viewer.stop(),this.navigatorStateChangeEventSubscription.dispose(),this.navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,n=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,n}getEndpoint(t,e){var n;return null!==(n=this.allEndpoints(t).find((t=>t.name===e)))&&void 0!==n?n:null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,e,n,i,s){const r=n.container,o=(r.has(nS.closestEndpointKey,!0)?r.get(nS.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=o.addEndpoint(e,i,n,s),Fn.instance(nS.closestEndpointKey,t).register(r)),t}disconnectEndpoint(t,e,n){if(!e.connectedScope.parent.removeEndpoint(t,e,n))throw new Error("Failed to remove endpoint: "+e.name)}async load(t,e){var n,i,s;e=null!=e?e:{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let r=null;if(({instructions:t,scope:r}=this.applyLoadOptions(t,e)),null!==(n=e.append)&&void 0!==n&&n&&(!this.loadedFirst||this.isNavigating))return t=Fk.from(this,t),this.appendInstructions(t,r),Promise.resolve();const o=Lk.create({instruction:t,fullStateInstruction:"",scope:r,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:null!==(i=e.replacing)&&void 0!==i&&i||e.replace,repeating:e.append,fromBrowser:null!==(s=e.fromBrowser)&&void 0!==s&&s,origin:e.origin,completed:!1});return this.navigator.navigate(o)}applyLoadOptions(t,e,n=!0){var i,s,r;"origin"in(e=null!=e?e:{})&&!("context"in e)&&(e.context=e.origin);let o=null!==(s=Hk.for(null!==(i=e.context)&&void 0!==i?i:null))&&void 0!==s?s:null;if("string"==typeof t){if(t.startsWith("/"))o=null;else{if(t.startsWith("."))for(t.startsWith("./")&&(t=t.slice(2));t.startsWith("../");)o=null!==(r=null==o?void 0:o.parent)&&void 0!==r?r:o,t=t.slice(3);null!=(null==o?void 0:o.path)&&(t=`${o.path}/${t}`,o=null)}if(!n){t=Fk.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}}else{t=Fk.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}return{instructions:t,scope:o}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw new Error(`Parameter instructions to checkActivate can not be a string ('${t}')!`);e=null!=e?e:{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>{var e;return null!==(e=t.scope)&&void 0!==e?e:t.scope=this.rootScope.scope}));const n=Ck(t.map((t=>t.scope)));for(const e of n){const n=e.matchScope(t,!1),i=e.matchScope(this.activeComponents,!0);if(!Fk.contains(this,i,n,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(uS.eventName,uS.create(t)),this.ea.publish(lS.eventName,lS.create(t)),function(t){const e=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return e.remainingInstructions=t,console.log(e,e.remainingInstructions),e}(e)}cancelNavigation(t,e){e.cancel(),this.ea.publish(cS.eventName,cS.create(t)),this.ea.publish(lS.eventName,lS.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const n of t)null===n.scope&&(n.scope=e);let n=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){n=this.coordinators[t];break}if(null===n){if(this.loadedFirst)throw Error("Failed to append routing instructions to coordinator");this.appendedInstructions.push(...t)}null==n||n.enqueueAppendedInstructions(t)}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.configuration.options.useConfiguredRoutes&&this.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}async updateNavigation(t){var e,n,i,s,r,o,a;this.rootScope.scope.reparentRoutingInstructions();const l=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:c}=this.rootScope.scope.matchEndpoints(l,[],!0),h=100;for(;c.length>0;){if(0==h--)throw new Error("Failed to find viewport when updating viewer paths.");c=c.map((t=>{var e;const{matchedInstructions:n}=t.endpoint.instance.scope.matchEndpoints(null!==(e=t.nextScopeInstructions)&&void 0!==e?e:[],[],!0);return n})).flat()}t.timestamp>=(null!==(n=null===(e=this.activeNavigation)||void 0===e?void 0:e.timestamp)&&void 0!==n?n:0)&&(this.activeNavigation=t,this.activeComponents=l);let u=await Yk.invokeTransformToUrl(l,t);if("string"!=typeof u&&(u=Fk.stringify(this,u,!1,!0)),u=await Yk.invokeTransformToUrl(u,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[n,i]of Object.entries(t.parameters)){n=encodeURIComponent(n),Array.isArray(i)||(i=[i]);for(const t of i)e.append(n,encodeURIComponent(t))}t.query=e.toString()}let d=`${this.configuration.options.basePath}/`;(null===d||""!==u&&"/"===u[0]||this.configuration.options.useUrlFragmentHash)&&(d="");const p=(null!==(s=null===(i=t.query)||void 0===i?void 0:i.length)&&void 0!==s?s:0)>0?"?"+t.query:"",f=(null!==(o=null===(r=t.fragment)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>0?"#"+t.fragment:"";t.path=d+u+p+f;const g=[Fk.create(Fk.clear(this))];if(g.push(...Fk.clone(l,this.statefulHistory)),t.fullStateInstruction=g,null===(null!==(a=t.title)&&void 0!==a?a:null)){const e=await tS.getTitle(l,t,this.configuration.options.title);null!==e&&(t.title=e)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[n,i]=t.split("#");t=n,e.fragment=i}return t}extractQuery(t,e){var n;if("string"==typeof t&&null==e.query){const[n,i]=t.split("?");t=n,e.query=i}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(null!==(n=e.parameters)&&void 0!==n||(e.parameters={}),new URLSearchParams(e.query).forEach(((t,n)=>{n=decodeURIComponent(n),t=decodeURIComponent(t),n in e.parameters?(Array.isArray(e.parameters[n])||(e.parameters[n]=[e.parameters[n]]),e.parameters[n].push(t)):e.parameters[n]=t}))),t}}nS.closestEndpointKey=Je.annotation.keyFor("closest-endpoint");class iS{constructor(t){this.eventName=t}}class sS extends iS{static create(){return new sS(this.eventName)}}sS.eventName="au:router:router-start";class rS extends iS{static create(){return new rS(this.eventName)}}rS.eventName="au:router:router-stop";class oS{constructor(t,e){this.eventName=t,this.navigation=e}}class aS extends oS{static create(t){return new aS(this.eventName,t)}}aS.eventName="au:router:navigation-start";class lS extends oS{static create(t){return new lS(this.eventName,t)}}lS.eventName="au:router:navigation-end";class cS extends oS{static create(t){return new cS(this.eventName,t)}}cS.eventName="au:router:navigation-cancel";class hS extends oS{static create(t){return new hS(this.eventName,t)}}hS.eventName="au:router:navigation-complete";class uS extends oS{static create(t){return new uS(this.eventName,t)}}uS.eventName="au:router:navigation-error";const dS=cn.createInterface("ILinkHandler",(t=>t.singleton(pS)));let pS=class{constructor(t,e){this.window=t,this.router=e}handleEvent(t){this.handleClick(t)}handleClick(t){var e,n;if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const i=t.currentTarget;if(i.hasAttribute("external"))return;const s=null!==(e=i.getAttribute("target"))&&void 0!==e?e:"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const r=mh.for(i,"load"),o=void 0!==r?r.viewModel.value:null,a=this.router.configuration.options.useHref&&i.hasAttribute("href")?i.getAttribute("href"):null;if(!(null!==o&&0!==o.length||null!==a&&0!==a.length))return;t.preventDefault();let l=null!==(n=null!=o?o:a)&&void 0!==n?n:"";"string"==typeof l&&l.startsWith("#")&&(l=l.slice(1),l.startsWith("/")||(l=`/${l}`)),this.router.load(l,{origin:i}).catch((t=>{throw t}))}};var fS;function gS(t,e,n,i,s=!1){var r;if(s)return""===e;if(n)return e;const o=null!==(r=i.getAttribute(t))&&void 0!==r?r:"";return o.length>0?o:e}function vS(t,e){if(!t.isActive)return new Promise((t=>{const n=e.subscribe(sS.eventName,(()=>{t(),n.dispose()}))}))}function mS(t,e,n,i){var s,r;let o=null===(r=null===(s=mh.for(n,"considered-active"))||void 0===s?void 0:s.viewModel)||void 0===r?void 0:r.value;void 0===o&&(o=i);const a=t.applyLoadOptions(o,{context:e}),l=Fk.from(t,a.instructions);for(const t of l)null===t.scope&&(t.scope=a.scope);return l}function bS(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return null!=e||(e=t),e}pS=pk([fk(0,ad),fk(1,eS)],pS),function(t){t.default="default",t.disallow="disallow",t.reload="reload",t.refresh="refresh"}(fS||(fS={}));const yS=jh.createInjectable();let wS=class{constructor(t,e,n,i,s,r){this.router=t,this.element=e,this.container=n,this.ea=i,this.parentViewport=s,this.instruction=r,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1}hydrated(t){this.controller=t,this.container=t.container;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new Ak)),Ek.run(null,(()=>vS(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e,n){return this.isBound=!0,Ek.run(null,(()=>vS(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{var t;null!=(null===(t=this.endpoint)||void 0===t?void 0:t.activeResolve)&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{var e;if(null!==this.endpoint&&null===this.endpoint.getNextContent())return null===(e=this.endpoint.activate(null,t,this.controller,n,void 0))||void 0===e?void 0:e.asValue}))}detaching(t,e,n){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e,n)}unbinding(t,e,n){if(null!==this.endpoint)return this.disconnect(null)}dispose(){var t;null===(t=this.endpoint)||void 0===t||t.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,n=gS("name",this.name,t,e),i={};i.scope=!gS("no-scope",this.noScope,!1,e,!0),i.usedBy=gS("used-by",this.usedBy,t,e),i.default=gS("default",this.default,t,e),i.fallback=gS("fallback",this.fallback,t,e),i.noLink=gS("no-link",this.noLink,t,e,!0),i.noTitle=gS("no-title",this.noTitle,t,e,!0),i.noHistory=gS("no-history",this.noHistory,t,e,!0),i.stateful=gS("stateful",this.stateful,t,e,!0),Object.keys(i).forEach((t=>{void 0===i[t]&&delete i[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,n,i);const s=this.parentViewport;null!=s&&(Sk(s.pendingChildren,(t=>t===this)),0===s.pendingChildren.length&&null!==s.pendingPromise&&(s.pendingPromise.resolve(),s.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const n=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const i in t)this.element.classList.toggle(`${n}-${i}`,e&&t[i])}};pk([Nl],wS.prototype,"name",void 0),pk([Nl],wS.prototype,"usedBy",void 0),pk([Nl],wS.prototype,"default",void 0),pk([Nl],wS.prototype,"fallback",void 0),pk([Nl],wS.prototype,"noScope",void 0),pk([Nl],wS.prototype,"noLink",void 0),pk([Nl],wS.prototype,"noTitle",void 0),pk([Nl],wS.prototype,"noHistory",void 0),pk([Nl],wS.prototype,"stateful",void 0),wS=pk([xh({name:"au-viewport",injectable:yS}),fk(0,eS),fk(1,Yu),fk(2,dn),fk(3,bi),fk(4,yS),fk(5,kd)],wS);const xS=jh.createInjectable();let kS=class{constructor(t,e,n,i,s){this.router=t,this.element=e,this.container=n,this.parent=i,this.parentController=s,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e,n){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e,n){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let n=this.getAttribute("catches",this.catches);void 0!==n&&(e.catches=n),n=this.getAttribute("collection",this.collection,!0),void 0!==n&&(e.collection=n),e.source=this.source||null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,n=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(n)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};pk([Nl],kS.prototype,"name",void 0),pk([Nl],kS.prototype,"catches",void 0),pk([Nl],kS.prototype,"collection",void 0),pk([Nl],kS.prototype,"source",void 0),kS=pk([xh({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:xS}),fk(0,eS),fk(1,Yu),fk(2,dn),fk(3,xS),fk(4,Iu)],kS);let SS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.hasHref=null,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(lS.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#${t}`),this.element.setAttribute("href",t)}}updateActive(){const t=mh.for(this.element,"load").parent,e=mS(this.router,t,this.element,this.value);bS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}};pk([Nl({mode:Kb.toView})],SS.prototype,"value",void 0),SS=pk([uh("load"),fk(0,Yu),fk(1,eS),fk(2,dS),fk(3,bi)],SS);let CS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(lS.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){var t;this.element.removeEventListener("click",this.linkHandler),null===(t=this.routerNavigationSubscription)||void 0===t||t.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=mh.for(this.element,"href").parent,e=mS(this.router,t,this.element,this.value);bS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){var t;const e=this.$controller.parent.children;return null!==(t=null==e?void 0:e.some((t=>1===t.vmKind&&t.viewModel instanceof SS)))&&void 0!==t&&t}};pk([Nl({mode:Kb.toView})],CS.prototype,"value",void 0),CS=pk([uh({name:"href",noMultiBindings:!0}),fk(0,Yu),fk(1,eS),fk(2,dS),fk(3,bi)],CS);let AS=class{};pk([Nl({mode:Kb.toView})],AS.prototype,"value",void 0),AS=pk([uh("considered-active")],AS);const ES=cn.createInterface("IRouterConfiguration",(t=>t.singleton(IS))),TS=[eS],$S=[wS,kS,SS,CS,AS];class IS{static register(t){const e=t.get(ES);return e.options=IS.options,e.options.setRouterConfiguration(e),IS.options=yk.create(),t.register(...TS,...$S,Jc.beforeActivate(eS,IS.configurationCall),Jc.afterActivate(eS,(t=>t.initialLoad())),Jc.afterDeactivate(eS,(t=>t.stop())))}static customize(t){return void 0===t?(IS.options=yk.create(),IS.configurationCall=t=>{t.start()}):t instanceof Function?IS.configurationCall=t:(IS.options=yk.create(),IS.options.apply(t)),IS}static createContainer(){return this.register(cn.createContainer())}static for(t){return t instanceof nS?t.configuration:t.get(ES)}apply(t,e=!1){e&&(this.options=yk.create()),this.options.apply(t)}addHook(t,e){return Yk.add(t,e)}removeHook(t){return Yk.remove(t)}removeAllHooks(){return Yk.removeAll()}}function OS(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function PS(t,e){return function(n,i){e(n,i,t)}}function RS(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}IS.options=yk.create(),IS.configurationCall=t=>{t.start()},Object.create,Object.create;var LS=n(3379),MS=n.n(LS),jS=n(7795),US=n.n(jS),NS=n(569),BS=n.n(NS),FS=n(3565),VS=n.n(FS),DS=n(9216),zS=n.n(DS),qS=n(4589),HS=n.n(qS),ZS=n(1138),WS={};WS.styleTagTransform=HS(),WS.setAttributes=VS(),WS.insert=BS().bind(null,"head"),WS.domAPI=US(),WS.insertStyleElement=zS(),MS()(ZS.Z,WS),ZS.Z&&ZS.Z.locals&&ZS.Z.locals;var KS=n(6767),_S={};_S.styleTagTransform=HS(),_S.setAttributes=VS(),_S.insert=BS().bind(null,"head"),_S.domAPI=US(),_S.insertStyleElement=zS(),MS()(KS.Z,_S),KS.Z&&KS.Z.locals&&KS.Z.locals;const QS="character-type-selector",GS='<div class="container">\r\n    <span>Magus</span> <radio-button group="character-type" state="${model == \'magus\' ? \'selected\' : \'unselected\'}" value="magus"></radio-button>\r\n    <span>Companion</span> <radio-button group="character-type" state="${model == \'companion\' ? \'selected\' : \'unselected\'}" value="companion"></radio-button>\r\n</div>',XS=GS,YS=[];let JS;function tC(t){JS||(JS=jh.define({name:QS,template:GS,dependencies:YS})),t.register(JS)}const eC={character:{type:"magus",physicalStatus:{fatigue:0,lightWounds:0,mediumWounds:0,heavyWounds:0,totalPenaly:0},description:{name:"",description:""},abilities:[],personalityTraits:[],characteristics:{communication:{value:0,specialisation:"",agingPoints:0},dexterity:{value:0,specialisation:"",agingPoints:0},intelligence:{value:0,specialisation:"",agingPoints:0},perception:{value:0,specialisation:"",agingPoints:0},presence:{value:0,specialisation:"",agingPoints:0},quickness:{value:0,specialisation:"",agingPoints:0},stamina:{value:0,specialisation:"",agingPoints:0},strength:{value:0,specialisation:"",agingPoints:0}},flaws:[],virtues:[],arts:{creo:{level:0,xp:0,puissant:!1},muto:{level:0,xp:0,puissant:!1},rego:{level:0,xp:0,puissant:!1},intellego:{level:0,xp:0,puissant:!1},perdo:{level:0,xp:0,puissant:!1},animal:{level:0,xp:0,puissant:!1},auram:{level:0,xp:0,puissant:!1},aquam:{level:0,xp:0,puissant:!1},ignem:{level:0,xp:0,puissant:!1},terram:{level:0,xp:0,puissant:!1},herbam:{level:0,xp:0,puissant:!1},mentem:{level:0,xp:0,puissant:!1},corpus:{level:0,xp:0,puissant:!1},imaginem:{level:0,xp:0,puissant:!1},vim:{level:0,xp:0,puissant:!1}},spells:[],spellWishlist:[],ageing:{age:25,apparentAge:25,birthYear:1195,currentYear:1220,decrepitudeLevel:0,decrepitudePoints:0,longevityModifier:0,ageingRollModifier:0,livingConditionModifier:0},confidence:{score:3},warping:{warpingPoints:0,warpingLevel:0,ongoingEffects:[]},activeMagic:[],xpEntries:[],notes:"",background:"",lab:{art1:{name:"",rating:0},art2:{name:"",rating:0},art3:{name:"",rating:0},art4:{name:"",rating:0},specialisation1:{name:"",rating:0},specialisation2:{name:"",rating:0},auraBonus:0,description:"",effectiveSafety:0,flaws:[],virtues:[],intelligenceBonus:0,labBaseQuality:0,livingConditionsModifier:0,magicTheory:0,occupiedSize:0,refinement:0,size:0,availableModifiers:[{name:"GQ"},{name:"Safety"},{name:"Health"},{name:"Aesthetics"},{name:"Upkeep"},{name:"Warping"}],researchProjects:[],inventiveGeniusVirtue:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1},spellcastingStats:{arts:"",aura:0,ceremonial:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1,positiveCycle:!1,focus:!1,largeGestures:!1,loudVoice:!1,similarFomulaicSpellBonus:0,spontaneousCastingTotal:0,staminaSpecialisation:!1,talismanBonus:0},sigil:"",belongings:{carried:"",inSanctum:"",vis:[]},talisman:{description:"",investedVis:0,spentVis:0,bonuses:[],effects:[]},magicItems:[],quests:[],npcs:[]}};function nC(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if("object"==typeof t){if("function"==typeof t[Symbol.iterator]){const e=[];if(t.length>0)for(const n of t)e.push(nC(n));return e}{const e=Object.keys(t),n={};if(e.length>0)for(const i of e)n[i]=nC(t[i]);return n}}return t}function iC(t){return Gv(t,nC(eC))}async function sC(t,e){const n=await e.text();return Gv(t,JSON.parse(n))}function rC(t,e){const n=nC(t.present);return n.character=e,Gv(t,n)}function oC(t,e){console.log("Saving characteristics",e);const n=nC(t.present);return n.character.characteristics=e,BC(n),QC(n),Gv(t,n)}function aC(t,e){console.log("Saving abilities",e);const n=nC(t.present);return n.character.abilities=MC(e),QC(n),BC(n),Gv(t,n)}function lC(t,e){console.log("Saving personality traits",e);const n=nC(t.present);return n.character.personalityTraits=MC(e),Gv(t,n)}function cC(t,e){console.log("Saving virtues",e);const n=nC(t.present);return n.character.virtues=MC(e),jC(n),BC(n),WC(n),Gv(t,n)}function hC(t,e){console.log("Saving flaws",e);const n=nC(t.present);return n.character.flaws=MC(e),BC(n),WC(n),Gv(t,n)}function uC(t,e){console.log("Saving description",e);const n=nC(t.present);return n.character.description=e,Gv(t,n)}function dC(t,e){console.log("Saving physical status",e);const n=nC(t.present);return n.character.physicalStatus=e,function(t){t.character.physicalStatus.totalPenaly=function(t){let e=t.character.physicalStatus;return-e.lightWounds+-3*e.mediumWounds+-5*e.heavyWounds}(t)+function(t){let e=t.character.physicalStatus.fatigue;return e<=1?0:2===e?-1:3===e?-3:4===e?-5:0}(t)}(n),BC(n),Gv(t,n)}function pC(t,e){console.log("Saving arts",e);const n=nC(t.present);return n.character.arts=e,BC(n),QC(n),Gv(t,n)}function fC(t,e){console.log("Saving spells",e);const n=nC(t.present);return n.character.spells=MC(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),LC(n),BC(n),Gv(t,n)}function gC(t,e){console.log("Saving spell wishlist",e);const n=nC(t.present);return n.character.spellWishlist=MC(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),LC(n),Gv(t,n)}function vC(t,e){console.log("Saving ageing",e);const n=nC(t.present);return n.character.ageing=e,jC(n),function(t){for(t.character.xpEntries||(t.character.xpEntries=[ZC(t.character.ageing.currentYear,"Spring"),ZC(t.character.ageing.currentYear,"Summer"),ZC(t.character.ageing.currentYear,"Fall"),ZC(t.character.ageing.currentYear,"Winter")]),t.character.xpEntries=t.character.xpEntries.filter((e=>e.year<t.character.ageing.currentYear+3)),0==t.character.xpEntries.length&&(t.character.xpEntries=[ZC(t.character.ageing.currentYear,"Spring"),ZC(t.character.ageing.currentYear,"Summer"),ZC(t.character.ageing.currentYear,"Fall"),ZC(t.character.ageing.currentYear,"Winter")]);t.character.xpEntries[t.character.xpEntries.length-1].year<t.character.ageing.currentYear+3;){let e=t.character.xpEntries[t.character.xpEntries.length-1].year+1;t.character.xpEntries.push(ZC(e,"Spring")),t.character.xpEntries.push(ZC(e,"Summer")),t.character.xpEntries.push(ZC(e,"Fall")),t.character.xpEntries.push(ZC(e,"Winter"))}t.character.xpEntries.forEach((e=>e.planningMode=e.year>=t.character.ageing.currentYear))}(n),Gv(t,n)}function mC(t,e){console.log("Saving confidence",e);const n=nC(t.present);return n.character.confidence=e,Gv(t,n)}function bC(t,e){console.log("Saving warping",e);const n=nC(t.present);return n.character.warping=e,n.character.warping.ongoingEffects=MC(e.ongoingEffects),function(t){t.character.warping.warpingLevel=NC(t.character.warping.warpingPoints,0)}(n),Gv(t,n)}function yC(t,e){console.log("Saving active magic",e);const n=nC(t.present);return n.character.activeMagic=MC(e),function(t){t.character.activeMagic.forEach((t=>t.penetration=t.active?t.penetration:0))}(n),Gv(t,n)}function wC(t,e){console.log("Saving xp entries",e);const n=nC(t.present);return n.character.xpEntries=e,Gv(t,n)}function xC(t,e){console.log("Saving notes",e);const n=nC(t.present);return n.character.notes=e,Gv(t,n)}function kC(t,e){console.log("Saving lab",e);const n=nC(t.present);return n.character.lab=e,n.character.lab.virtues=MC(n.character.lab.virtues),n.character.lab.flaws=MC(n.character.lab.flaws),n.character.lab.availableModifiers=n.character.lab.availableModifiers.filter((t=>""!=t.name)),n.character.lab.researchProjects=MC(n.character.lab.researchProjects),WC(n),Gv(t,n)}function SC(t,e){console.log("Importing character");const n=nC(t.present);return n.character=JSON.parse(e),Gv(t,n)}function CC(t,e){console.log("Saving spellcasting stats",e);const n=nC(t.present);return n.character.spellcastingStats=e,BC(n),Gv(t,n)}function AC(t,e){console.log("Saving character type",e);const n=nC(t.present);return n.character.type=e,BC(n),Gv(t,n)}function EC(t,e){console.log("Saving background",e);const n=nC(t.present);return n.character.background=e,Gv(t,n)}function TC(t,e){console.log("Saving sigil",e);const n=nC(t.present);return n.character.sigil=e,Gv(t,n)}function $C(t,e){console.log("Saving belongings",e);const n=nC(t.present);return n.character.belongings=e,n.character.belongings.vis=MC(e.vis),Gv(t,n)}function IC(t,e){console.log("Saving talisman",e);const n=nC(t.present);return n.character.talisman=e,n.character.talisman.effects=MC(e.effects),n.character.talisman.bonuses=MC(e.bonuses),Gv(t,n)}function OC(t,e){console.log("Saving magic items",e);const n=nC(t.present);return n.character.magicItems=MC(e),n.character.magicItems.forEach((t=>t.effects=MC(t.effects))),Gv(t,n)}function PC(t,e){console.log("Saving quests",e);const n=nC(t.present);return n.character.quests=MC(e).sort(((t,e)=>t.priority-e.priority)),Gv(t,n)}function RC(t,e){console.log("Saving npcs",e);const n=nC(t.present);return n.character.npcs=MC(e),Gv(t,n)}function LC(t){let e=t.character.spellWishlist.filter((t=>!t.onWishlist)),n=t.character.spells.filter((t=>t.onWishlist));t.character.spellWishlist=t.character.spellWishlist.filter((t=>t.onWishlist)).concat(n),t.character.spells=t.character.spells.filter((t=>!t.onWishlist)).concat(e)}function MC(t){return t.filter((t=>""!=t.name)).sort(((t,e)=>t.name.localeCompare(e.name)))}function jC(t){UC(t),function(t){t.character.ageing.decrepitudeLevel=NC(t.character.ageing.decrepitudePoints,0)}(t),function(t){t.character.ageing.age=t.character.ageing.currentYear-t.character.ageing.birthYear}(t)}function UC(t){let e=t.character.virtues.findIndex((t=>t.name.indexOf("Strong Faerie Blood")>=0))>=0?3:t.character.virtues.findIndex((t=>t.name.indexOf("Faerie Blood")>=0))>=0?1:0;t.character.ageing.ageingRollModifier=t.character.ageing.livingConditionModifier+t.character.ageing.longevityModifier+t.character.lab.livingConditionsModifier+e-Math.ceil(t.character.ageing.age/10)}function NC(t,e){let n=5*(e+1);return n>t?e:NC(t-n,e+1)}function BC(t){var e;(null===(e=null==t?void 0:t.character)||void 0===e?void 0:e.arts)&&(t.character.spellcastingStats.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.spontaneousCastingTotal=function(t){let e=t.character.spellcastingStats;return FC(t)+DC(t,e.arts,"",e.focus)+e.talismanBonus+e.similarFomulaicSpellBonus+(e.ceremonial?VC(t,"Ceremonial"):0)}(t),t.character.spells.forEach((e=>e.castingTotal=function(t,e){return FC(t)+DC(t,e.arts,e.prerequisites,e.focus)+e.attunementBonus+e.masteryLevel+(e.ritual?VC(t,"Ritual"):0)}(t,e))))}function FC(t){let e=t.character.spellcastingStats,n=e.cyclicMagicVirtue?3:0,i=e.cyclicMagicFlaw?-3:0;return t.character.characteristics.stamina.value+t.character.physicalStatus.totalPenaly+e.aura+(e.positiveCycle?n:i)+(e.staminaSpecialisation?1:0)+(e.largeGestures?1:0)+(e.loudVoice?1:0)}function VC(t,e){var n,i;let s=t.character.abilities.find((t=>"Artes Liberales"==t.name)),r=t.character.abilities.find((t=>"Philosophiae"==t.name)),o=(null==s?void 0:s.specialisation)==e?1:0,a=(null==r?void 0:r.specialisation)==e?1:0,l=(null==s?void 0:s.puissant)?3:0,c=(null==r?void 0:r.puissant)?3:0;return(null!==(n=null==s?void 0:s.level)&&void 0!==n?n:0)+o+l+(null!==(i=null==r?void 0:r.level)&&void 0!==i?i:0)+a+c}function DC(t,e,n,i){let s=zC(t,e),r=qC(t,e);if(null===s||null==r)return 0;let o=zC(t,n),a=qC(t,n),l=Math.min(s,null!=o?o:1e3),c=Math.min(r,null!=a?a:1e3);return l+c+(i?Math.min(l,c):0)}function zC(t,e){let n=t.character.arts;return e.indexOf("Cr")>=0?HC(n.creo):e.indexOf("In")>=0?HC(n.intellego):e.indexOf("Mu")>=0?HC(n.muto):e.indexOf("Pe")>=0?HC(n.perdo):e.indexOf("Re")>=0?HC(n.rego):null}function qC(t,e){let n=t.character.arts;return e.indexOf("An")>=0?HC(n.animal):e.indexOf("Aq")>=0?HC(n.aquam):e.indexOf("Au")>=0?HC(n.auram):e.indexOf("Co")>=0?HC(n.corpus):e.indexOf("He")>=0?HC(n.herbam):e.indexOf("Ig")>=0?HC(n.ignem):e.indexOf("Im")>=0?HC(n.imaginem):e.indexOf("Me")>=0?HC(n.mentem):e.indexOf("Te")>=0?HC(n.terram):e.indexOf("Vi")>=0?HC(n.vim):null}function HC(t){return t.level+(t.puissant?3:0)}function ZC(t,e){return{year:t,xp:"",correspondence:"",description:"",plans:"",areaLore:"",season:e,planningMode:!0}}function WC(t){KC(t.character.lab.virtues,t.character.lab.availableModifiers),KC(t.character.lab.flaws,t.character.lab.availableModifiers),function(t){var e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v;let m=t.character.lab,b=_C(m),y=m.virtues.concat(m.flaws).reduce(((t,e)=>t+e.cost),0);m.occupiedSize=m.size+y-m.refinement;let w=null!==(n=null===(e=b.find((t=>"Safety"==t.name)))||void 0===e?void 0:e.rating)&&void 0!==n?n:0,x=null!==(s=null===(i=b.find((t=>"Health"==t.name)))||void 0===i?void 0:i.rating)&&void 0!==s?s:0;m.livingConditionsModifier=x>=0?Math.floor(x/2):Math.ceil(x/2),m.effectiveSafety=w-Math.max(0,m.occupiedSize)+m.refinement,m.specialisation1.rating=null!==(o=null===(r=b.find((t=>t.name==m.specialisation1.name)))||void 0===r?void 0:r.rating)&&void 0!==o?o:0,m.specialisation2.rating=null!==(l=null===(a=b.find((t=>t.name==m.specialisation2.name)))||void 0===a?void 0:a.rating)&&void 0!==l?l:0,m.art1.rating=null!==(h=null===(c=b.find((t=>t.name==m.art1.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0,m.art2.rating=null!==(d=null===(u=b.find((t=>t.name==m.art2.name)))||void 0===u?void 0:u.rating)&&void 0!==d?d:0,m.art3.rating=null!==(f=null===(p=b.find((t=>t.name==m.art3.name)))||void 0===p?void 0:p.rating)&&void 0!==f?f:0,m.art4.rating=null!==(v=null===(g=b.find((t=>t.name==m.art4.name)))||void 0===g?void 0:g.rating)&&void 0!==v?v:0,t.character.lab.inventiveGeniusVirtue=t.character.virtues.findIndex((t=>"Inventive Genius"==t.name))>=0,t.character.lab.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.lab.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0}(t),QC(t),UC(t)}function KC(t,e){t.forEach((t=>{let n=t.modifiers.filter((t=>0!=t.rating));t.modifiers=e.map((t=>({name:t.name,rating:0}))),n.forEach((e=>{let n=t.modifiers.findIndex((t=>t.name==e.name));n>=0&&(t.modifiers[n].rating=e.rating)})),t.category.length>1&&("outfitting".startsWith(t.category.toLocaleLowerCase())&&(t.category="Outfitting"),"stucture".startsWith(t.category.toLocaleLowerCase())&&(t.category="Structure"),"supernatural".startsWith(t.category.toLocaleLowerCase())&&(t.category="Supernatural"))}))}function _C(t){return t.availableModifiers.map((e=>({name:e.name,rating:t.virtues.concat(t.flaws).reduce(((t,n)=>t.concat(n.modifiers.filter((t=>t.name==e.name)))),[]).reduce(((t,e)=>t+e.rating),0)})))}function QC(t){let e=t.character.lab,n=e.inventiveGeniusVirtue?3:0,i=e.inventiveGeniusVirtue?6:0,s=e.cyclicMagicVirtue?3:0,r=e.cyclicMagicFlaw?-3:0;e.researchProjects.forEach((o=>{var a,l,c,h;let u=null!==(l=null===(a=t.character.abilities.find((t=>"Magic Theory"==t.name)))||void 0===a?void 0:a.level)&&void 0!==l?l:0,d=null!==(h=null===(c=_C(e).find((t=>"GQ"==t.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0;o.artModifier=DC(t,o.arts,o.prerequisites,o.focus),o.labTotal=e.auraBonus+e.labBaseQuality+d+o.artModifier+o.labAssistantBonus+u+Math.max(o.experiment?i:0,o.newWork?n:0)+(o.positiveCycle?s:r)+(o.magicTheorySpecialisation?1:0)+t.character.characteristics.intelligence.value+(o.intelligenceSpecialisation?1:0)+(o.nocturnal?2:0)+o.materialBonus+o.shapeBonus+o.similarResearchBonus+(o.talisman?5:0),o.surplusLabTotal=o.labTotal-o.level}))}let GC=class{constructor(t,e,n,i){this.store=t,this.pluckModel=e,this.saveAction=n,this.ea=i,this.model=void 0,this.modelState=void 0,this.active=!1,this.interacting=!1,this.stopInteraction=function(t,e=300){let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(this,i)}),e)}}((()=>{this.interacting=!1}),1e3)}stateChanged(t,e){if(t.present){let e=this.pluckModel(eC);this.modelState=this.pluckModel(t.present),void 0===this.modelState&&(this.modelState=e),this.hasChanges()&&(this.model=nC(this.modelState))}}bound(){this.active=!0,this.checkForChanges(),this.ea.subscribe("ui-interaction",(()=>{this.interacting=!0,this.stopInteraction()}))}unbound(){this.active=!1}checkForChanges(){this.active&&(this.hasChanges()&&this.saveChanges(),setTimeout((()=>{this.checkForChanges()}),2e3))}saveChanges(){this.interacting||this.store.dispatch(this.saveAction,nC(this.model))}hasChanges(){return JSON.stringify(this.modelState)!==JSON.stringify(this.model)}};GC=OS([pm(),RS("design:paramtypes",[um,Function,Function,Object])],GC);let XC=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.type}),AC,e)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"character-type"==t.group&&(this.model=t.value)}))}};XC=OS([xh(t),PS(1,bi),RS("design:paramtypes",[um,Object])],XC);var YC=n(3845),JC={};JC.styleTagTransform=HS(),JC.setAttributes=VS(),JC.insert=BS().bind(null,"head"),JC.domAPI=US(),JC.insertStyleElement=zS(),MS()(YC.Z,JC),YC.Z&&YC.Z.locals&&YC.Z.locals;const tA="description-block",eA='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',nA=eA,iA=[];let sA;function rA(t){sA||(sA=jh.define({name:tA,template:eA,dependencies:iA})),t.register(sA)}let oA=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),uC,e)}};oA=OS([xh(s),PS(1,bi),RS("design:paramtypes",[um,Object])],oA);const aA="virtues-list",lA='<list title="VIRTUES" items.two-way="model" has-additional-info.bind="true"></list>',cA=lA,hA=[];let uA;function dA(t){uA||(uA=jh.define({name:aA,template:lA,dependencies:hA})),t.register(uA)}let pA=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.virtues}),cC,e)}};pA=OS([xh(o),PS(1,bi),RS("design:paramtypes",[um,Object])],pA);const fA="flaws-list",gA='<list title="FLAWS" items.two-way="model" has-additional-info.bind="true"></list>',vA=gA,mA=[];let bA;function yA(t){bA||(bA=jh.define({name:fA,template:gA,dependencies:mA})),t.register(bA)}let wA=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.flaws}),hC,e)}};wA=OS([xh(l),PS(1,bi),RS("design:paramtypes",[um,Object])],wA);var xA=n(5555),kA={};kA.styleTagTransform=HS(),kA.setAttributes=VS(),kA.insert=BS().bind(null,"head"),kA.domAPI=US(),kA.insertStyleElement=zS(),MS()(xA.Z,kA),xA.Z&&xA.Z.locals&&xA.Z.locals;const SA="personality-traits-list",CA='<title text="PERSONALITY"></title>\r\n<div class="container">\r\n    <div repeat.for="trait of model">\r\n        <text-field value.two-way="trait.name"></text-field>\r\n        <primary-stat mode="secondary" size="s" value.two-way="trait.rating" prefix-plus.bind="true"></primary-stat>\r\n    </div>\r\n    <input type="text" class="add-item-input" placeholder="Add trait" keyup.delegate="keyPressed($event)" value.two-way="newTraitText">\r\n</div>\r\n<footer></footer>',AA=CA,EA=[];let TA;function $A(t){TA||(TA=jh.define({name:SA,template:CA,dependencies:EA})),t.register(TA)}let IA=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.personalityTraits}),lC,e),this.newTraitText="",this.keyPressed=t=>{"Enter"==t.key&&this.newTraitText&&(this.model.push({name:this.newTraitText,rating:0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newTraitText="")}}};IA=OS([xh(h),PS(1,bi),RS("design:paramtypes",[um,Object])],IA);var OA=n(2410),PA={};PA.styleTagTransform=HS(),PA.setAttributes=VS(),PA.insert=BS().bind(null,"head"),PA.domAPI=US(),PA.insertStyleElement=zS(),MS()(OA.Z,PA),OA.Z&&OA.Z.locals&&OA.Z.locals;const RA="warping-block",LA='<title text="WARPING"></title>\r\n<div class="container">\r\n    <div class="warping-level">\r\n        <primary-stat header="WPs" mode="secondary" value.two-way="model.warpingPoints" min="0" max="999" size="s" title="Warping Points"></primary-stat>\r\n        <primary-stat header="Level" mode="secondary" readonly.bind="true" value.two-way="model.warpingLevel" min="0" size="m" title="Warping Level"></primary-stat>\r\n    </div>\r\n    <div class="warping-effect grid" repeat.for="effect of model.ongoingEffects">\r\n        <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n        <primary-stat mode="secondary" value.two-way="effect.warpingPointsPerYear" min="1" size="s" title="Warping Points Per Year"></primary-stat>\r\n        <span class="text">/year</span>\r\n    </div>\r\n    <input class="add-effect-input" type="text" placeholder="Add ongoing effect" keyup.delegate="keyPressed($event)" value.two-way="newEffectText">\r\n</div>\r\n<footer></footer>',MA=LA,jA=[];let UA;function NA(t){UA||(UA=jh.define({name:RA,template:LA,dependencies:jA})),t.register(UA)}let BA=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.warping}),bC,e),this.newEffectText="",this.keyPressed=t=>{"Enter"==t.key&&this.newEffectText&&(this.model.ongoingEffects.push({name:this.newEffectText,warpingPointsPerYear:1}),this.model.ongoingEffects.sort(((t,e)=>t.name.localeCompare(e.name))),this.newEffectText="")}}};BA=OS([xh(d),PS(1,bi),RS("design:paramtypes",[um,Object])],BA);const FA="description",VA='\r\n\r\n\r\n\r\n\r\n\r\n<description-block></description-block>\r\n<virtues-list></virtues-list>\r\n<flaws-list></flaws-list>\r\n<personality-traits-list></personality-traits-list>\r\n<warping-block></warping-block>\r\n\r\n<div style="clear: both;"></div>',DA=VA,zA=[r,a,c,u,p];let qA;function HA(t){qA||(qA=jh.define({name:FA,template:VA,dependencies:zA})),t.register(qA)}let ZA=class{};ZA=OS([xh(f)],ZA);var WA=n(927),KA={};KA.styleTagTransform=HS(),KA.setAttributes=VS(),KA.insert=BS().bind(null,"head"),KA.domAPI=US(),KA.insertStyleElement=zS(),MS()(WA.Z,KA),WA.Z&&WA.Z.locals&&WA.Z.locals;const _A="abilities-block",QA='<title text="ABILITIES"></title>\r\n<div class="container">\r\n    <div class="ability ${item.level === 0 ? \'untrained\' : \'\'}" repeat.for="item of model">\r\n        <checkbox size="xs" mode="angled" value.two-way="item.puissant" title="Puissant ability"></checkbox>\r\n        <text-field class="name" value.two-way="item.name"></text-field>\r\n        <text-field class="specialisation" value.two-way="item.specialisation" placeholder="Specialisation"></text-field>\r\n        <primary-stat class="level" mode="secondary" value.two-way="item.level" min="0" size="s" title="Ability level"></primary-stat>\r\n        <primary-stat class="xp" mode="secondary" value.two-way="item.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n        <span class="puissant-label"><span class="numbers text" if.bind="item.puissant">+2</span></span>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add item" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',GA=QA,XA=[];let YA;function JA(t){YA||(YA=jh.define({name:_A,template:QA,dependencies:XA})),t.register(YA)}let tE=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.abilities}),aC,e),this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.model.push({name:this.newItemText,specialisation:"",level:0,xp:0,puissant:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};tE=OS([xh(v),PS(1,bi),RS("design:paramtypes",[um,Object])],tE);var eE=n(3292),nE={};nE.styleTagTransform=HS(),nE.setAttributes=VS(),nE.insert=BS().bind(null,"head"),nE.domAPI=US(),nE.insertStyleElement=zS(),MS()(eE.Z,nE),eE.Z&&eE.Z.locals&&eE.Z.locals;const iE="characteristics-block",sE='<title text="CHARACTERISTICS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.strength.specialisation"></text-field>\r\n        <span class="text left-col">STR</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.strength.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.strength.value"></primary-stat>\r\n\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.dexterity.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.dexterity.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">DEX</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.dexterity.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.stamina.specialisation"></text-field>\r\n        <span class="text left-col">STA</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.stamina.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.stamina.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.quickness.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.quickness.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">QUI</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.quickness.specialisation"></text-field>\r\n    </div>\r\n    <br/>\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.intelligence.specialisation"></text-field>\r\n        <span class="text left-col">INT</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.intelligence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.intelligence.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.presence.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.presence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">PRE</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.presence.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.perception.specialisation"></text-field>\r\n        <span class="text left-col">PER</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.perception.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.perception.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.communication.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.communication.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">COM</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.communication.specialisation"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',rE=sE,oE=[];let aE;function lE(t){aE||(aE=jh.define({name:iE,template:sE,dependencies:oE})),t.register(aE)}let cE=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.characteristics}),oC,e)}};cE=OS([xh(b),PS(1,bi),RS("design:paramtypes",[um,Object])],cE);var hE=n(1459),uE={};uE.styleTagTransform=HS(),uE.setAttributes=VS(),uE.insert=BS().bind(null,"head"),uE.domAPI=US(),uE.insertStyleElement=zS(),MS()(hE.Z,uE),hE.Z&&hE.Z.locals&&hE.Z.locals;const dE="fatigue-block",pE='<title text="FATIGUE"></title>\r\n<div class="container grid text">\r\n    <span>Fresh (-0)</span><span class="right"></span><radio-button group="fatigue" state="${model.fatigue == 0 ? \'selected\' : \'unselected\'}" value="0"></radio-button>\r\n    <span>Winded (-0)</span><span class="right">2m</span><radio-button group="fatigue" state="${model.fatigue == 1 ? \'selected\' : \'unselected\'}" value="1"></radio-button>\r\n    <span>Weary (-1)</span><span class="right">10m</span><radio-button group="fatigue" state="${model.fatigue == 2 ? \'selected\' : \'unselected\'}" value="2"></radio-button>\r\n    <span>Tired (-3)</span><span class="right">30m</span><radio-button group="fatigue" state="${model.fatigue == 3 ? \'selected\' : \'unselected\'}" value="3"></radio-button>\r\n    <span>Dazed (-5)</span><span class="right">1h</span><radio-button group="fatigue" state="${model.fatigue == 4 ? \'selected\' : \'unselected\'}" value="4"></radio-button>\r\n    <span>Unconscious</span><span class="right">2h</span><radio-button group="fatigue" state="${model.fatigue == 5 ? \'selected\' : \'unselected\'}" value="5"></radio-button>\r\n</div>\r\n<footer></footer>',fE=pE,gE=[];let vE;function mE(t){vE||(vE=jh.define({name:dE,template:pE,dependencies:gE})),t.register(vE)}let bE=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),dC,e)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"fatigue"==t.group&&(this.model.fatigue=Number.parseInt(t.value))}))}};bE=OS([xh(w),PS(1,bi),RS("design:paramtypes",[um,Object])],bE);var yE=n(6903),wE={};wE.styleTagTransform=HS(),wE.setAttributes=VS(),wE.insert=BS().bind(null,"head"),wE.domAPI=US(),wE.insertStyleElement=zS(),MS()(yE.Z,wE),yE.Z&&yE.Z.locals&&yE.Z.locals;const xE="damage-block",kE='<title text="WOUNDS"></title>\r\n<div class="container text">\r\n    <span class="wound-type">Light</span><primary-stat value.two-way="model.lightWounds" min="0" size="s"></primary-stat>\r\n    <span class="wound-type">Medium</span><primary-stat value.two-way="model.mediumWounds" min="0" size="s"></primary-stat>\r\n    <span class="wound-type">Heavy</span><primary-stat value.two-way="model.heavyWounds" min="0" size="s"></primary-stat>\r\n</div>\r\n<footer></footer>',SE=kE,CE=[];let AE;function EE(t){AE||(AE=jh.define({name:xE,template:kE,dependencies:CE})),t.register(AE)}let TE=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),dC,e)}};TE=OS([xh(k),PS(1,bi),RS("design:paramtypes",[um,Object])],TE);var $E=n(4397),IE={};IE.styleTagTransform=HS(),IE.setAttributes=VS(),IE.insert=BS().bind(null,"head"),IE.domAPI=US(),IE.insertStyleElement=zS(),MS()($E.Z,IE),$E.Z&&$E.Z.locals&&$E.Z.locals;const OE="confidence-block",PE='<primary-stat\r\n    header="Confidence Points"\r\n    size="l"\r\n    min="0"\r\n    value.two-way="model.score"\r\n    mode="primary-angled">\r\n</primary-stat>',RE=PE,LE=[];let ME;function jE(t){ME||(ME=jh.define({name:OE,template:PE,dependencies:LE})),t.register(ME)}let UE=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.confidence}),mC,e)}};UE=OS([xh(C),PS(1,bi),RS("design:paramtypes",[um,Object])],UE);var NE=n(7804),BE={};BE.styleTagTransform=HS(),BE.setAttributes=VS(),BE.insert=BS().bind(null,"head"),BE.domAPI=US(),BE.insertStyleElement=zS(),MS()(NE.Z,BE),NE.Z&&NE.Z.locals&&NE.Z.locals;const FE="active-magic-list",VE='<title text="ACTIVE MAGIC"></title>\r\n<div class="container">\r\n    <div class="active-magic grid" repeat.for="magic of model">\r\n        <checkbox size="s" mode="angled" value.two-way="magic.active" title="Active"></checkbox>\r\n        <text-field class="name" value.two-way="magic.name" placeholder="Name"></text-field>\r\n        <primary-stat header="Pen." show-header.bind="$first" mode="secondary" value.two-way="magic.penetration" min="0" size="s" title="Penetration" readonly.bind="!magic.active" color-mode="${magic.active ? \'color\' : \'monochrome\'}"></primary-stat>\r\n        <stat-info-button source.bind="magic" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <input class="add-magic-input" type="text" placeholder="Add active magic" keyup.delegate="keyPressed($event)" value.two-way="newMagicText">\r\n</div>\r\n<footer></footer>',DE=VE,zE=[];let qE;function HE(t){qE||(qE=jh.define({name:FE,template:VE,dependencies:zE})),t.register(qE)}let ZE=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.activeMagic}),yC,e),this.newMagicText="",this.keyPressed=t=>{this.model||(this.model=[]),"Enter"==t.key&&this.newMagicText&&(this.model.push({name:this.newMagicText,penetration:0,active:!0,additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newMagicText="")}}};ZE=OS([xh(E),PS(1,bi),RS("design:paramtypes",[um,Object])],ZE);var WE=n(5889),KE={};KE.styleTagTransform=HS(),KE.setAttributes=VS(),KE.insert=BS().bind(null,"head"),KE.domAPI=US(),KE.insertStyleElement=zS(),MS()(WE.Z,KE),WE.Z&&WE.Z.locals&&WE.Z.locals;const _E="physical-penalty-block",QE='<primary-stat\r\n    header="Physical Penalty"\r\n    size="l"\r\n    value="${model.totalPenaly}"\r\n    readonly.bind="true"\r\n    mode="primary-angled">\r\n</primary-stat>',GE=QE,XE=[];let YE;function JE(t){YE||(YE=jh.define({name:_E,template:QE,dependencies:XE})),t.register(YE)}let tT=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),dC,e)}};tT=OS([xh($),PS(1,bi),RS("design:paramtypes",[um,Object])],tT);const eT="stats",nT='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<abilities-block></abilities-block>\r\n<characteristics-block></characteristics-block>\r\n<fatigue-block></fatigue-block>\r\n<damage-block></damage-block>\r\n<confidence-block></confidence-block>\r\n<physical-penalty-block></physical-penalty-block>\r\n<active-magic-list></active-magic-list>\r\n\r\n<div style="clear: both;"></div>',iT=nT,sT=[m,y,x,S,A,T,I];let rT;function oT(t){rT||(rT=jh.define({name:eT,template:nT,dependencies:sT})),t.register(rT)}let aT=class{};aT=OS([xh(O)],aT);var lT=n(5185),cT={};cT.styleTagTransform=HS(),cT.setAttributes=VS(),cT.insert=BS().bind(null,"head"),cT.domAPI=US(),cT.insertStyleElement=zS(),MS()(lT.Z,cT),lT.Z&&lT.Z.locals&&lT.Z.locals;const hT="arts-block",uT='<title text="ARTS"></title>\r\n<div class="container grid">\r\n    <checkbox size="xs" mode="angled" value.two-way="model.creo.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.creo.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.creo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.creo.level === 0 ? \'untrained\' : \'\'}">Creo</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.animal.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.animal.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.animal.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span  class="name text ${model.animal.level === 0 ? \'untrained\' : \'\'}">Animal</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.ignem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.ignem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.ignem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.ignem.level === 0 ? \'untrained\' : \'\'}">Ignem</span>\r\n\r\n   \r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.intellego.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.intellego.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.intellego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.intellego.level === 0 ? \'untrained\' : \'\'}">Intellego</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.aquam.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.aquam.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.aquam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.aquam.level === 0 ? \'untrained\' : \'\'}">Aquam</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.imaginem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.imaginem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.imaginem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.imaginem.level === 0 ? \'untrained\' : \'\'}">Imaginem</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.muto.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.muto.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.muto.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.muto.level === 0 ? \'untrained\' : \'\'}">Muto</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.auram.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.auram.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.auram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.auram.level === 0 ? \'untrained\' : \'\'}">Auram</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.mentem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.mentem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.mentem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.mentem.level === 0 ? \'untrained\' : \'\'}">Mentem</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.perdo.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.perdo.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.perdo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.perdo.level === 0 ? \'untrained\' : \'\'}">Perdo</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.corpus.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.corpus.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.corpus.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.corpus.level === 0 ? \'untrained\' : \'\'}">Corpus</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.terram.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.terram.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.terram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.terram.level === 0 ? \'untrained\' : \'\'}">Terram</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.rego.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.rego.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.rego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.rego.level === 0 ? \'untrained\' : \'\'}">Rego</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.herbam.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.herbam.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.herbam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.herbam.level === 0 ? \'untrained\' : \'\'}">Herbam</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.vim.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.vim.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.vim.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.vim.level === 0 ? \'untrained\' : \'\'}">Vim</span>\r\n</div>\r\n<footer></footer>',dT=uT,pT=[];let fT;function gT(t){fT||(fT=jh.define({name:hT,template:uT,dependencies:pT})),t.register(fT)}let vT=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.arts}),pC,e)}};vT=OS([xh(R),PS(1,bi),RS("design:paramtypes",[um,Object])],vT);var mT=n(2244),bT={};bT.styleTagTransform=HS(),bT.setAttributes=VS(),bT.insert=BS().bind(null,"head"),bT.domAPI=US(),bT.insertStyleElement=zS(),MS()(mT.Z,bT),mT.Z&&mT.Z.locals&&mT.Z.locals;const yT="spellcasting-modifiers-block",wT='<title text="SPELLCASTING STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Aura</span>\r\n        <span class="text">Stamina Specialisation</span>\r\n        <span class="text" if.bind="showGoodCycle">Good Cycle</span>\r\n        <span class="text">Loud Voice</span>\r\n        <span class="text">Large Gestures</span>\r\n\r\n        <span class="text">Arts</span>\r\n        <span class="text">Ceremonial</span>\r\n        <span class="text">Talisman Bonus</span>\r\n        <span class="text">Similar Spell</span>\r\n        <span class="text">Focus</span>\r\n        <span class="text">Casting Total</span>\r\n\r\n        <span if.bind="!showGoodCycle"></span>\r\n\r\n        <primary-stat value.two-way="model.aura" mode="secondary" prefix-plus.bind="true"></primary-stat></primary-stat>\r\n        <checkbox value.two-way="model.staminaSpecialisation" mode="angled"></checkbox>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="model.positiveCycle" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.loudVoice" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.largeGestures" mode="angled"></checkbox>\r\n\r\n        <text-field class="arts" value.two-way="model.arts" placeholder="Arts"></text-field>\r\n        <checkbox value.two-way="model.ceremonial" mode="angled" color-mode="monochrome"></checkbox>\r\n        <primary-stat value.two-way="model.talismanBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.similarFomulaicSpellBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n        <checkbox value.two-way="model.focus" mode="angled" color-mode="monochrome"></checkbox>\r\n        <primary-stat value.two-way="model.spontaneousCastingTotal" mode="primary-angled" readonly.bind="true" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',xT=wT,kT=[];let ST;function CT(t){ST||(ST=jh.define({name:yT,template:wT,dependencies:kT})),t.register(ST)}let AT=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellcastingStats}),CC,e)}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};AT=OS([xh(M),PS(1,bi),RS("design:paramtypes",[um,Object])],AT);var ET=n(7624),TT={};TT.styleTagTransform=HS(),TT.setAttributes=VS(),TT.insert=BS().bind(null,"head"),TT.domAPI=US(),TT.insertStyleElement=zS(),MS()(ET.Z,TT),ET.Z&&ET.Z.locals&&ET.Z.locals;const $T="spell-list",IT='<title text="SPELLS"></title>\r\n<div class="container">\r\n    <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n        <span class="form-header"></span>\r\n        <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n        <checkbox size="xs" value.two-way="spell.focus" title="Focus"></checkbox>\r\n        <checkbox size="xs" value.two-way="spell.ritual" title="Ritual"></checkbox>\r\n        <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n        <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n        <span class="casting-total-label numbers text">+${spell.castingTotal}</span>\r\n        <primary-stat class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></primary-stat>\r\n        <primary-stat class="attunement-bonus" mode="secondary" value.two-way="spell.attunementBonus" min="0" size="xs" color-mode="monochrome" title="Attunement bonus"></primary-stat>\r\n        <text-field class="attunement" value.two-way="spell.attunement" placeholder="Attunement"></text-field>\r\n        <text-field class="masteries" value.two-way="spell.masteries" placeholder="Masteries"></text-field>\r\n        <primary-stat class="mastery-level" mode="secondary" value.two-way="spell.masteryLevel" min="0" size="s" color-mode="monochrome" title="Mastery level"></primary-stat>\r\n        <primary-stat class="xp" mode="secondary" value.two-way="spell.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n        <text-field class="range" value.two-way="spell.range" placeholder="Range"></text-field>\r\n        <text-field class="duration" value.two-way="spell.duration" placeholder="Duration"></text-field>\r\n        <text-field class="target" value.two-way="spell.target" placeholder="Target"></text-field>\r\n        <text-field class="sigil" value.two-way="spell.sigil" placeholder="Sigil" title="${spell.sigil}"></text-field>\r\n        <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n        <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n        <stat-info-button source.bind="spell" property="additionalInfo"></stat-info-button>\r\n        <cross-button click.delegate="unlearnSpell(spell)" title="Unlearn spell" mode="angled"></cross-button>\r\n    </div>\r\n    <add-item-input placeholder="Add spell" on-item-added.bind="spellAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',OT=IT,PT=[];let RT;function LT(t){RT||(RT=jh.define({name:$T,template:IT,dependencies:PT})),t.register(RT)}let MT=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spells}),fC,e),this.spellAdded=t=>{this.model.push({name:t,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,additionalInfo:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0,onWishlist:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.unlearnSpell=t=>{t.onWishlist=!0}}};MT=OS([xh(U),PS(1,bi),RS("design:paramtypes",[um,Object])],MT);var jT=n(6073),UT={};UT.styleTagTransform=HS(),UT.setAttributes=VS(),UT.insert=BS().bind(null,"head"),UT.domAPI=US(),UT.insertStyleElement=zS(),MS()(jT.Z,UT),jT.Z&&jT.Z.locals&&jT.Z.locals;const NT="spell-wishlist",BT='<title text="SPELL WISHLIST"></title>\r\n<div class="container">\r\n    <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n        <span class="form-header"></span>\r\n        <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n        <checkbox size="xs" value.two-way="spell.focus" title="Focus"></checkbox>\r\n        <checkbox size="xs" value.two-way="spell.ritual" title="Ritual"></checkbox>\r\n        <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n        <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n        <primary-stat class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></primary-stat>\r\n        <primary-stat class="attunement-bonus" mode="secondary" value.two-way="spell.attunementBonus" min="0" size="xs" color-mode="monochrome" title="Attunement bonus"></primary-stat>\r\n        <text-field class="attunement" value.two-way="spell.attunement" placeholder="Attunement"></text-field>\r\n        <text-field class="masteries" value.two-way="spell.masteries" placeholder="Masteries"></text-field>\r\n        <text-field class="range" value.two-way="spell.range" placeholder="Range"></text-field>\r\n        <text-field class="duration" value.two-way="spell.duration" placeholder="Duration"></text-field>\r\n        <text-field class="target" value.two-way="spell.target" placeholder="Target"></text-field>\r\n        <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n        <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n        <stat-info-button source.bind="spell" property="additionalInfo"></stat-info-button>\r\n        <cross-button click.delegate="learnSpell(spell)" title="Learn spell"></cross-button>\r\n    </div>\r\n    <add-item-input placeholder="Add spell" on-item-added.bind="spellAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',FT=BT,VT=[];let DT;function zT(t){DT||(DT=jh.define({name:NT,template:BT,dependencies:VT})),t.register(DT)}let qT=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellWishlist}),gC,e),this.spellAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,additionalInfo:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0,onWishlist:!0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.learnSpell=t=>{t.onWishlist=!1}}};qT=OS([xh(B),PS(1,bi),RS("design:paramtypes",[um,Object])],qT);var HT=n(7266),ZT={};ZT.styleTagTransform=HS(),ZT.setAttributes=VS(),ZT.insert=BS().bind(null,"head"),ZT.domAPI=US(),ZT.insertStyleElement=zS(),MS()(HT.Z,ZT),HT.Z&&HT.Z.locals&&HT.Z.locals;const WT="sigil",KT='<div class="container" drop.delegate="onDrop($event)" active-drag.class="dragging" dragenter.delegate="dragging = true" dragleave.delegate="dragging = false">\r\n    <div class="sigil-image-placeholder" if.bind="!model"></div>\r\n    <img class="sigil-image" if.bind="model" src="${model}"/>\r\n</div>',_T=KT,QT=[];let GT;function XT(t){GT||(GT=jh.define({name:WT,template:KT,dependencies:QT})),t.register(GT)}let YT=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.sigil}),TC,e),this.dragging=!1,this.onDrop=t=>{if(1!=t.dataTransfer.items.length)return;let e=t.dataTransfer.items[0];if("file"==e.kind&&e.type.startsWith("image")){var n=new FileReader;n.onload=()=>{this.model=n.result,this.dragging=!1},n.readAsDataURL(e.getAsFile())}}}};YT=OS([xh(V),PS(1,bi),RS("design:paramtypes",[um,Object])],YT);const JT="magic",t$='\r\n\r\n\r\n\r\n\r\n\r\n<arts-block></arts-block>\r\n<spellcasting-modifiers-block></spellcasting-modifiers-block>\r\n<spell-list></spell-list>\r\n<spell-wishlist></spell-wishlist>\r\n<sigil></sigil>\r\n\r\n<div style="clear: both;"></div>',e$=t$,n$=[L,j,N,F,D];let i$;function s$(t){i$||(i$=jh.define({name:JT,template:t$,dependencies:n$})),t.register(i$)}let r$=class{};r$=OS([xh(z)],r$);var o$=n(8412),a$={};a$.styleTagTransform=HS(),a$.setAttributes=VS(),a$.insert=BS().bind(null,"head"),a$.domAPI=US(),a$.insertStyleElement=zS(),MS()(o$.Z,a$),o$.Z&&o$.Z.locals&&o$.Z.locals;const l$="lab-stats",c$='<title text="LAB STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Size</span>\r\n        <span class="text">Refinement</span>\r\n        <span class="text">Occupied Size</span>\r\n        <span class="text">Effective Safety</span>\r\n        <span class="text">Living Conditions Modifier</span>\r\n        <span class="text">Specialisation 1</span>\r\n        <span class="text">Specialisation 2</span>\r\n        <span class="text">Art 1 (Any)</span>\r\n        <span class="text">Art 2 (Any)</span>\r\n        <span class="text">Art 3 (Form)</span>\r\n        <span class="text">Art 4 (Form)</span>\r\n\r\n        <primary-stat value.two-way="model.size" mode="primary-angled" min="-3"></primary-stat>\r\n        <primary-stat value.two-way="model.refinement" mode="primary-angled" min="0"></primary-stat>\r\n        <primary-stat value.two-way="model.occupiedSize" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.effectiveSafety" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.livingConditionsModifier" mode="secondary-angled" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.specialisation1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.specialisation2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art3.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art4.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art3.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art4.name" placeholder="Modifier"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',h$=c$,u$=[];let d$;function p$(t){d$||(d$=jh.define({name:l$,template:c$,dependencies:u$})),t.register(d$)}let f$=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),kC,e)}};f$=OS([xh(H),PS(1,bi),RS("design:paramtypes",[um,Object])],f$);var g$=n(4467),v$={};v$.styleTagTransform=HS(),v$.setAttributes=VS(),v$.insert=BS().bind(null,"head"),v$.domAPI=US(),v$.insertStyleElement=zS(),MS()(g$.Z,v$),g$.Z&&g$.Z.locals&&g$.Z.locals;const m$="research-projects",b$='<title text="RESEARCH PROJECTS"></title>\r\n<div class="container">\r\n    <primary-stat class="aura-bonus" mode="secondary" value.two-way="model.auraBonus" size="s" title="Aura Bonus" prefix-plus.bind="true"></primary-stat>\r\n\r\n    <div class="project grid" repeat.for="project of model.researchProjects">\r\n        <text-field class="name" value.two-way="project.name" placeholder="Name"></text-field>\r\n        <text-field class="arts" value.two-way="project.arts" placeholder="Arts"></text-field>\r\n        <text-field class="prerequisites" value.two-way="project.prerequisites" placeholder="Prereq"></text-field>\r\n        <primary-stat class="level" mode="secondary" value.two-way="project.level" min="1" size="m" title="Level"></primary-stat>\r\n\r\n        <checkbox value.two-way="project.focus" title="Focus"></checkbox>\r\n        <primary-stat class="specialisation-bonus" mode="secondary" value.two-way="project.specialisationBonus" min="0" size="s" title="Lab Specialisation Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <checkbox value.two-way="project.intelligenceSpecialisation" title="Intelligence Specialisation"></checkbox>\r\n        <checkbox value.two-way="project.magicTheorySpecialisation" title="Magic Theory Specialisation"></checkbox>\r\n        <checkbox value.two-way="project.talisman" title="Talisman"></checkbox>\r\n        <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="project.newWork" title="New Invention"></checkbox>\r\n        <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="project.experiment" title="Experiment"></checkbox>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="project.positiveCycle" title="Good Cycle"></checkbox>\r\n        <checkbox value.two-way="project.nocturnal" title="Nocturnal - An “owl,” the maga’s daily cycle is the opposite of most folk — she\r\n        works at night and sleeps during the day. This has the advantage that the night\r\n        is quieter and presents fewer distractions — gain +2 to the Lab Total for\r\n        the season. Due to lack of sunlight and daylight living, however, she suffers a –1\r\n        penalty to her Living Conditions modifier for any year in which she has taken at\r\n        least one Nocturnal season. She also has trouble functioning during the daytime;\r\n        when dawn breaks, she loses a Long-Term Fatigue level and gains one extra botch\r\n        die on all activities for the day. She will likely not appreciate being woken up in\r\n        daylight hours. This routine is commonly taken by characters with the Nocturnal\r\n        Personality Flaw."></checkbox>\r\n        <primary-stat class="similar-research-bonus" mode="secondary" value.two-way="project.similarResearchBonus" min="0" size="s" title="Similar Research Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <text-field class="material" value.two-way="project.material" placeholder="Material"></text-field>\r\n        <primary-stat class="material-bonus" mode="secondary" value.two-way="project.materialBonus" min="0" size="s" title="Material Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <text-field class="shape" value.two-way="project.shape" placeholder="Shape"></text-field>\r\n        <primary-stat class="shape-bonus" mode="secondary" value.two-way="project.shapeBonus" min="0" size="s" title="Shape Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat class="lab-assistant-bonus" mode="secondary" value.two-way="project.labAssistantBonus" min="0" size="s" title="Lab Assistant Bonus" prefix-plus.bind="true"></primary-stat>\r\n        \r\n        <primary-stat class="total" mode="primary" readonly.bind="true" value.two-way="project.labTotal" min="0" size="m" title="Lab Total"></primary-stat>\r\n        <primary-stat class="surplus" mode="secondary" readonly.bind="true" value.two-way="project.surplusLabTotal" min="0" size="s" title="Surplus Lab Total"></primary-stat>\r\n        <primary-stat class="accumulated-total" mode="secondary" value.two-way="project.accumulatedLabTotal" min="0" size="s" title="Accumulated Lab Total"></primary-stat>\r\n        \r\n        <stat-info-button source.bind="project" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add project" keyup.delegate="keyPressed($event)" value.two-way="newProjectText">\r\n</div>\r\n<footer></footer>',y$=b$,w$=[];let x$;function k$(t){x$||(x$=jh.define({name:m$,template:b$,dependencies:w$})),t.register(x$)}let S$=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),kC,e),this.newProjectText="",this.keyPressed=t=>{"Enter"==t.key&&this.newProjectText&&(this.model.researchProjects.push({name:this.newProjectText,accumulatedLabTotal:0,surplusLabTotal:0,artModifier:0,arts:"",prerequisites:"",focus:!1,labTotal:0,labAssistantBonus:0,magicTheorySpecialisation:!1,intelligenceSpecialisation:!0,material:"",materialBonus:0,shape:"",shapeBonus:0,similarResearchBonus:0,specialisationBonus:0,talisman:!1,level:1,experiment:!1,newWork:!0,nocturnal:!1,positiveCycle:!1,additionalInfo:""}),this.newProjectText="")}}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};S$=OS([xh(W),PS(1,bi),RS("design:paramtypes",[um,Object])],S$);var C$=n(6964),A$={};A$.styleTagTransform=HS(),A$.setAttributes=VS(),A$.insert=BS().bind(null,"head"),A$.domAPI=US(),A$.insertStyleElement=zS(),MS()(C$.Z,A$),C$.Z&&C$.Z.locals&&C$.Z.locals;const E$="lab-modifications-list",T$='<title text="LAB MODIFICATIONS"></title>\r\n<div class="container">\r\n    <input class="add-item-input add-modifier-input" type="text" keyup.delegate="keyPressed($event, \'modifier\')" value.two-way="newModifierText" title="Add Modifier Column">\r\n    \r\n    <div class="block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n\r\n        <label class="text title">VIRTUES</label>\r\n        <div class="virtue grid" repeat.for="virtue of model.virtues">\r\n            <text-field class="name" value.two-way="virtue.name" placeholder="Name"></text-field>\r\n            <text-field class="category" value.two-way="virtue.category" placeholder="Category"></text-field>\r\n            <text-field class="description" value.two-way="virtue.description" placeholder="Description"></text-field>\r\n            <primary-stat class="cost" mode="secondary" value.two-way="virtue.cost" min="0" size="s" title="Cost"></primary-stat>\r\n            <primary-stat class="modifier" fade-zero.bind="true" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of virtue.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></primary-stat>\r\n        </div>\r\n        <input class="add-item-input" type="text" placeholder="Add virtue" keyup.delegate="keyPressed($event, \'virtue\')" value.two-way="newVirtueText">\r\n    </div>\r\n\r\n    <div class="block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n\r\n        <label class="text title">FLAWS</label>\r\n        <div class="flaw grid" repeat.for="flaw of model.flaws">\r\n            <text-field class="name" value.two-way="flaw.name" placeholder="Name"></text-field>\r\n            <text-field class="category" value.two-way="flaw.category" placeholder="Category"></text-field>\r\n            <text-field class="description" value.two-way="flaw.description" placeholder="Description"></text-field>\r\n            <primary-stat class="cost" mode="secondary" value.two-way="flaw.cost" max="0" size="s" title="Cost"></primary-stat>\r\n            <primary-stat class="modifier" fade-zero.bind="true" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of flaw.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></primary-stat>\r\n        </div>\r\n        <input class="add-item-input" type="text" placeholder="Add flaw" keyup.delegate="keyPressed($event, \'flaw\')" value.two-way="newFlawText">\r\n    </div>\r\n\r\n    <div class="modifier-totals">\r\n        <span class="numbers modifier-total" repeat.for="total of totals" class="modifier-title text">${total}</span>\r\n    </div>\r\n</div>\r\n<footer></footer>',$$=T$,I$=[];let O$;function P$(t){O$||(O$=jh.define({name:E$,template:T$,dependencies:I$})),t.register(O$)}let R$=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),kC,e),this.newVirtueText="",this.newFlawText="",this.newModifierText="",this.keyPressed=(t,e)=>{"Enter"==t.key&&("virtue"==e&&this.newVirtueText&&(this.model.virtues.push({name:this.newVirtueText,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Virtue"}),this.model.virtues.sort(((t,e)=>t.name.localeCompare(e.name))),this.newVirtueText=""),"flaw"==e&&this.newFlawText&&(this.model.flaws.push({name:this.newFlawText,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Flaw"}),this.model.flaws.sort(((t,e)=>t.name.localeCompare(e.name))),this.newFlawText=""),"modifier"==e&&this.newModifierText&&(this.model.availableModifiers.push({name:this.newModifierText}),this.newModifierText=""))}}get totals(){return this.model?_C(this.model).map((t=>t.rating)):[]}};R$=OS([xh(_),PS(1,bi),RS("design:paramtypes",[um,Object])],R$);var L$=n(2820),M$={};M$.styleTagTransform=HS(),M$.setAttributes=VS(),M$.insert=BS().bind(null,"head"),M$.domAPI=US(),M$.insertStyleElement=zS(),MS()(L$.Z,M$),L$.Z&&L$.Z.locals&&L$.Z.locals;const j$="lab-description-block",U$='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',N$=U$,B$=[];let F$;function V$(t){F$||(F$=jh.define({name:j$,template:U$,dependencies:B$})),t.register(F$)}let D$=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),kC,e)}};D$=OS([xh(G),PS(1,bi),RS("design:paramtypes",[um,Object])],D$);const z$="lab",q$='\r\n\r\n\r\n\r\n\r\n<lab-stats></lab-stats>\r\n<research-projects></research-projects>\r\n<lab-modifications-list></lab-modifications-list>\r\n<lab-description-block></lab-description-block>\r\n\r\n<div style="clear: both;"></div>',H$=q$,Z$=[Z,K,Q,X];let W$;function K$(t){W$||(W$=jh.define({name:z$,template:q$,dependencies:Z$})),t.register(W$)}let _$=class{};_$=OS([xh(Y)],_$);var Q$=n(8985),G$={};G$.styleTagTransform=HS(),G$.setAttributes=VS(),G$.insert=BS().bind(null,"head"),G$.domAPI=US(),G$.insertStyleElement=zS(),MS()(Q$.Z,G$),Q$.Z&&Q$.Z.locals&&Q$.Z.locals;const X$="carried-belongings-block",Y$='<text-box title="CARRIED" text.two-way="model.carried"></text-box>',J$=Y$,tI=[];let eI;function nI(t){eI||(eI=jh.define({name:X$,template:Y$,dependencies:tI})),t.register(eI)}let iI=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),$C,e)}};iI=OS([xh(tt),PS(1,bi),RS("design:paramtypes",[um,Object])],iI);var sI=n(5204),rI={};rI.styleTagTransform=HS(),rI.setAttributes=VS(),rI.insert=BS().bind(null,"head"),rI.domAPI=US(),rI.insertStyleElement=zS(),MS()(sI.Z,rI),sI.Z&&sI.Z.locals&&sI.Z.locals;const oI="sanctum-belongings-block",aI='<text-box title="SANCTUM" text.two-way="model.inSanctum"></text-box>',lI=aI,cI=[];let hI;function uI(t){hI||(hI=jh.define({name:oI,template:aI,dependencies:cI})),t.register(hI)}let dI=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),$C,e)}};dI=OS([xh(nt),PS(1,bi),RS("design:paramtypes",[um,Object])],dI);var pI=n(1860),fI={};fI.styleTagTransform=HS(),fI.setAttributes=VS(),fI.insert=BS().bind(null,"head"),fI.domAPI=US(),fI.insertStyleElement=zS(),MS()(pI.Z,fI),pI.Z&&pI.Z.locals&&pI.Z.locals;const gI="vis-block",vI='<title text="VIS"></title>\r\n<div class="container">\r\n    <div class="vis grid" repeat.for="vis of model.vis">\r\n        <text-field class="name" value.two-way="vis.name"></text-field>\r\n        <primary-stat class="lab-vis" mode="secondary" value.two-way="vis.amountInLab" min="0" size="s" title="In lab"></primary-stat>\r\n        <primary-stat class="personal-vis" mode="secondary" value.two-way="vis.amountOnPerson" min="0" size="s" title="On person"></primary-stat>\r\n        <text-field class="income" value.two-way="vis.income" placeholder="Income" title="${vis.income}"></text-field>\r\n        <text-field class="notes" value.two-way="vis.notes" placeholder="Notes" title="${vis.notes}"></text-field>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add vis type" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',mI=vI,bI=[];let yI;function wI(t){yI||(yI=jh.define({name:gI,template:vI,dependencies:bI})),t.register(yI)}let xI=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),$C,e),this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.model||(this.model={carried:"",inSanctum:"",vis:[]}),this.model.vis||(this.model.vis=[]),this.model.vis.push({name:this.newItemText,amountInLab:0,amountOnPerson:0,income:"",notes:""}),this.model.vis.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};xI=OS([xh(st),PS(1,bi),RS("design:paramtypes",[um,Object])],xI);const kI="belongings",SI='\r\n\r\n\r\n\r\n<carried-belongings-block></carried-belongings-block>\r\n<sanctum-belongings-block></sanctum-belongings-block>\r\n<vis-block></vis-block>\r\n\r\n<div style="clear: both;"></div>',CI=SI,AI=[et,it,rt];let EI;function TI(t){EI||(EI=jh.define({name:kI,template:SI,dependencies:AI})),t.register(EI)}let $I=class{};$I=OS([xh(ot)],$I);var II=n(3349),OI={};OI.styleTagTransform=HS(),OI.setAttributes=VS(),OI.insert=BS().bind(null,"head"),OI.domAPI=US(),OI.insertStyleElement=zS(),MS()(II.Z,OI),II.Z&&II.Z.locals&&II.Z.locals;const PI="notes-block",RI='<text-box title="NOTES" text.two-way="model"></text-box>',LI=RI,MI=[];let jI;function UI(t){jI||(jI=jh.define({name:PI,template:RI,dependencies:MI})),t.register(jI)}let NI=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.notes}),xC,e)}};NI=OS([xh(lt),PS(1,bi),RS("design:paramtypes",[um,Object])],NI);var BI=n(3260),FI={};FI.styleTagTransform=HS(),FI.setAttributes=VS(),FI.insert=BS().bind(null,"head"),FI.domAPI=US(),FI.insertStyleElement=zS(),MS()(BI.Z,FI),BI.Z&&BI.Z.locals&&BI.Z.locals;const VI="background-block",DI='<text-box title="BACKGROUND" text.two-way="model"></text-box>',zI=DI,qI=[];let HI;function ZI(t){HI||(HI=jh.define({name:VI,template:DI,dependencies:qI})),t.register(HI)}let WI=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.background}),EC,e)}};WI=OS([xh(ht),PS(1,bi),RS("design:paramtypes",[um,Object])],WI);var KI=n(7600),_I={};_I.styleTagTransform=HS(),_I.setAttributes=VS(),_I.insert=BS().bind(null,"head"),_I.domAPI=US(),_I.insertStyleElement=zS(),MS()(KI.Z,_I),KI.Z&&KI.Z.locals&&KI.Z.locals;const QI="quest-list",GI='<title text="QUESTS"></title>\r\n<div class="container">\r\n    <div class="quest grid" repeat.for="quest of model">\r\n        <checkbox mode="angled" size="xs" value.two-way="quest.focused" title="Focused"></checkbox>\r\n        <primary-stat class="priority" mode="secondary" value.two-way="quest.priority" min="1" size="xs" title="Priority"></primary-stat>\r\n        <text-field class="name" value.two-way="quest.name" placeholder="Name" title="${quest.name}"></text-field>\r\n        <stat-info-button source.bind="quest" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <add-item-input placeholder="Add quest" on-item-added.bind="questAdded">\r\n</div>\r\n<footer></footer>',XI=GI,YI=[];let JI;function tO(t){JI||(JI=jh.define({name:QI,template:GI,dependencies:YI})),t.register(JI)}let eO=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.quests}),PC,e),this.questAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,focused:!1,priority:0,additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))).sort(((t,e)=>t.priority-e.priority))}}};eO=OS([xh(dt),PS(1,bi),RS("design:paramtypes",[um,Object])],eO);var nO=n(280),iO={};iO.styleTagTransform=HS(),iO.setAttributes=VS(),iO.insert=BS().bind(null,"head"),iO.domAPI=US(),iO.insertStyleElement=zS(),MS()(nO.Z,iO),nO.Z&&nO.Z.locals&&nO.Z.locals;const sO="npc-list",rO='<title text="Persons of Interest"></title>\r\n<div class="container">\r\n    <div class="npc grid" repeat.for="npc of model">\r\n        <text-field class="name" value.two-way="npc.name" placeholder="Name" title="${npc.name}"></text-field>\r\n        <text-field class="description" value.two-way="npc.description" placeholder="Description" title="${npc.description}"></text-field>\r\n        <stat-info-button source.bind="npc" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <add-item-input placeholder="Add person" on-item-added.bind="npcAdded">\r\n</div>\r\n<footer></footer>',oO=rO,aO=[];let lO;function cO(t){lO||(lO=jh.define({name:sO,template:rO,dependencies:aO})),t.register(lO)}let hO=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.npcs}),RC,e),this.npcAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};hO=OS([xh(ft),PS(1,bi),RS("design:paramtypes",[um,Object])],hO);const uO="notes",dO='\r\n\r\n\r\n\r\n\r\n<notes-block></notes-block>\r\n<background-block></background-block>\r\n<quest-list></quest-list>\r\n<npc-list></npc-list>\r\n\r\n<div style="clear: both;"></div>',pO=dO,fO=[ct,ut,pt,gt];let gO;function vO(t){gO||(gO=jh.define({name:uO,template:dO,dependencies:fO})),t.register(gO)}let mO=class{};mO=OS([xh(vt)],mO);var bO=n(8840),yO={};yO.styleTagTransform=HS(),yO.setAttributes=VS(),yO.insert=BS().bind(null,"head"),yO.domAPI=US(),yO.insertStyleElement=zS(),MS()(bO.Z,yO),bO.Z&&bO.Z.locals&&bO.Z.locals;const wO="xp-list",xO='<title text="XP ENTRIES"></title>\r\n<div class="container">\r\n    <div class="xp-entry grid" repeat.for="entry of planningEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n        <text-field class="plans" value.two-way="entry.plans" placeholder="Plans"></text-field>\r\n    </div>\r\n\r\n    <div class="separator"></div>\r\n    <div class="center-button-box">\r\n        <cross-button click.delegate="deletePreviousEntries()" title="Delete previous entries" mode="angled"></cross-button>\r\n    </div>\r\n\r\n    <div class="past-xp-entry grid" repeat.for="entry of pastEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>',kO=xO,SO=[];let CO;function AO(t){CO||(CO=jh.define({name:wO,template:xO,dependencies:SO})),t.register(CO)}let EO=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.xpEntries}),wC,e),this.deletePreviousEntries=()=>{let t=this.state.present.character.ageing.currentYear;this.model=this.model.filter((e=>e.year>=t))}}get planningEntries(){return this.model?this.model.filter((t=>t.planningMode)):[]}get pastEntries(){return this.model?this.model.filter((t=>!t.planningMode)):[]}};EO=OS([xh(bt),PS(1,bi),RS("design:paramtypes",[um,Object])],EO);var TO=n(2012),$O={};$O.styleTagTransform=HS(),$O.setAttributes=VS(),$O.insert=BS().bind(null,"head"),$O.domAPI=US(),$O.insertStyleElement=zS(),MS()(TO.Z,$O),TO.Z&&TO.Z.locals&&TO.Z.locals;const IO="age-block",OO='<div class="container grid">\r\n    <primary-stat class="small-text" mode="secondary-angled" size="m" value.two-way="model.birthYear" min="0" max="2000" title="Birth Year"></primary-stat>\r\n    <div>\r\n        <primary-stat mode="secondary" size="s" value.two-way="model.age" readonly.bind="true" min="0" title="Age"></primary-stat>\r\n        <primary-stat mode="secondary" size="s" value.two-way="model.apparentAge" min="0" title="Apparent Age"></primary-stat>\r\n    </div>\r\n    <primary-stat class="small-text" mode="secondary-angled" size="m" value.two-way="model.currentYear" min="0" max="2000" title="Current Year"></primary-stat>\r\n\r\n    <primary-stat mode="secondary" size="s" value.two-way="model.livingConditionModifier" prefix-plus.bind="true" title="Living condition modifier"></primary-stat>\r\n    <primary-stat mode="primary" value.two-way="model.ageingRollModifier" prefix-plus.bind="true" title="Ageing roll bonus" readonly.bind="true"></primary-stat>\r\n    <primary-stat mode="secondary" size="s" value.two-way="model.longevityModifier" min="0" prefix-plus.bind="true" title="Longevity ritual modifier"></primary-stat>\r\n\r\n    <checkbox class="left" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 1" title="Decrepitude level 1"></checkbox>\r\n    <primary-stat mode="primary" value.two-way="model.decrepitudePoints" min="0" title="Decrepitude points"></primary-stat>\r\n    <checkbox class="right" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 5" title="Decrepitude level 5"></checkbox>\r\n\r\n    <checkbox class="right top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 2" title="Decrepitude level 2"></checkbox>\r\n    <checkbox class="bottom" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 3" title="Decrepitude level 3"></checkbox>\r\n    <checkbox class="left top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 4" title="Decrepitude level 4"></checkbox>\r\n</div>',PO=OO,RO=[];let LO;function MO(t){LO||(LO=jh.define({name:IO,template:OO,dependencies:RO})),t.register(LO)}let jO=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.ageing}),vC,e)}};jO=OS([xh(wt),PS(1,bi),RS("design:paramtypes",[um,Object])],jO);const UO="progression",NO='\r\n\r\n\r\n<age-block></age-block>\r\n<xp-list></xp-list>\r\n\r\n<div style="clear: both;"></div>',BO=NO,FO=[yt,xt];let VO;function DO(t){VO||(VO=jh.define({name:UO,template:NO,dependencies:FO})),t.register(VO)}let zO=class{};zO=OS([xh(kt)],zO);var qO=n(6019),HO={};HO.styleTagTransform=HS(),HO.setAttributes=VS(),HO.insert=BS().bind(null,"head"),HO.domAPI=US(),HO.insertStyleElement=zS(),MS()(qO.Z,HO),qO.Z&&qO.Z.locals&&qO.Z.locals;const ZO="talisman-block",WO='<title text="TALISMAN"></title>\r\n<div class="container">\r\n    <primary-stat class="invested-vis" mode="primary" value.two-way="model.investedVis" min="0" size="m" title="Invested vis"></primary-stat>\r\n    <primary-stat class="spent-vis" mode="secondary" value.two-way="model.spentVis" min="0" max.bind="model.investedVis" size="s" title="Spent vis"></primary-stat>\r\n    <text-field class="description" value.two-way="model.description" placeholder="Description" title="${model.description}"></text-field>\r\n\r\n    <div class="bonuses">\r\n        <span class="title text">Bonuses</span>\r\n        <div class="bonus grid" repeat.for="bonus of model.bonuses">\r\n            <checkbox mode="angled" size="xs" value.two-way="bonus.instilled" title="Instilled"></checkbox>\r\n            <text-field class="name" value.two-way="bonus.name" placeholder="Name" title="${bonus.name}"></text-field>\r\n            <primary-stat class="bonus-modifier" mode="secondary" value.two-way="bonus.bonus" min="1" size="s" title="Bonus" prefix-plus.bind="true"></primary-stat>\r\n            <text-field class="source" value.two-way="bonus.source" placeholder="Source"></text-field>\r\n            <text-field class="notes" value.two-way="bonus.notes" placeholder="Notes" title="${bonus.notes}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="bonusAdded" placeholder="Add bonus"></add-item-input>\r\n    </div>\r\n\r\n    <div class="effects">\r\n        <span class="title text">Effects</span>\r\n        <div class="effect grid" repeat.for="effect of model.effects">\r\n            <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n            <primary-stat class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></primary-stat>\r\n            <primary-stat class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></primary-stat>\r\n            <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n            <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n            <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n            <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n            <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="effectAdded" placeholder="Add effect"></add-item-input>\r\n    </div>\r\n</div>\r\n<footer></footer>',KO=WO,_O=[];let QO;function GO(t){QO||(QO=jh.define({name:ZO,template:WO,dependencies:_O})),t.register(QO)}let XO=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.talisman}),IC,e),this.bonusAdded=t=>{this.model.bonuses.push({name:t,bonus:1,instilled:!1,source:"",notes:""}),this.model.bonuses.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=t=>{this.model.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),this.model.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};XO=OS([xh(Ct),PS(1,bi),RS("design:paramtypes",[um,Object])],XO);var YO=n(4769),JO={};JO.styleTagTransform=HS(),JO.setAttributes=VS(),JO.insert=BS().bind(null,"head"),JO.domAPI=US(),JO.insertStyleElement=zS(),MS()(YO.Z,JO),YO.Z&&YO.Z.locals&&YO.Z.locals;const tP="magic-items-block",eP='<title text="MAGIC ITEMS"></title>\r\n<div class="container">\r\n    <div class="magic-item grid" repeat.for="magicItem of model">\r\n        <text-field class="name" value.two-way="magicItem.name" placeholder="Name"></text-field>\r\n        <primary-stat class="invested-vis" mode="primary" value.two-way="magicItem.investedVis" min="0" size="m" title="Invested vis"></primary-stat>\r\n        <primary-stat class="spent-vis" mode="secondary" value.two-way="magicItem.spentVis" min="0" max.bind="magicItem.investedVis" size="s" title="Spent vis"></primary-stat>\r\n        <text-field class="description" value.two-way="magicItem.description" placeholder="Description" title="${magicItem.description}"></text-field>\r\n        <span></span>\r\n\r\n        <div class="effects">\r\n            <span class="title text">Effects</span>\r\n            <div class="effect grid" repeat.for="effect of magicItem.effects">\r\n                <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n                <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n                <primary-stat class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></primary-stat>\r\n                <primary-stat class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></primary-stat>\r\n                <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n                <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n                <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n                <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n                <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n            </div>\r\n            <add-item-input on-item-added.bind="effectAdded" parent.bind="magicItem" placeholder="Add effect"></add-item-input>\r\n        </div>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add items"></add-item-input>\r\n</div>\r\n<footer></footer>',nP=eP,iP=[];let sP;function rP(t){sP||(sP=jh.define({name:tP,template:eP,dependencies:iP})),t.register(sP)}let oP=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.magicItems}),OC,e),this.itemAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",investedVis:0,spentVis:0,effects:[]}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=(t,e)=>{e.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),e.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};oP=OS([xh(Et),PS(1,bi),RS("design:paramtypes",[um,Object])],oP);const aP="enchantments",lP='\r\n\r\n\r\n<talisman-block></talisman-block>\r\n<magic-items-block></magic-items-block>\r\n\r\n<div style="clear: both;"></div>',cP=lP,hP=[At,Tt];let uP;function dP(t){uP||(uP=jh.define({name:aP,template:lP,dependencies:hP})),t.register(uP)}let pP=class{};pP=OS([xh($t)],pP);const fP="my-app",gP='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<page-header></page-header>\r\n\r\n<div class="page-view">\r\n    <au-viewport name="main" default="description"></au-viewport>\r\n</div>\r\n\r\n<rune-edge></rune-edge>\r\n\r\n<button click.delegate="undo()" disabled.bind="state.past.length == 0">Undo</button>\r\n<button click.delegate="redo()" disabled.bind="state.future.length == 0">Redo</button>\r\n<button click.delegate="save()">Save As</button>\r\n<button click.delegate="load()">Load</button>\r\n<button click.delegate="newCharacter()">Create New Character</button>\r\n<character-type-selector></character-type-selector>\r\n\r\n<input type=\'file\' accept=\'.json\' files.bind="selectedFiles" ref="fileInput" style="display: none;"><br>',vP=gP,mP=[e,g,P,q,J,at,mt,St,It];let bP;function yP(t){bP||(bP=jh.define({name:fP,template:gP,dependencies:mP})),t.register(bP)}let wP=class{constructor(t){this.store=t,this.middlewareRegistered=!1,this.isStandalone=window.matchMedia("(display-mode: standalone)").matches,this.undo=()=>{this.store.dispatch(Qv,-1)},this.redo=()=>{this.store.dispatch(Qv,1)},this.save=async()=>{if(this.isStandalone){const t={suggestedName:"character sheet.ars",types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};this.fileHandle=await window.showSaveFilePicker(t),await this.saveFile(this.state),this.middlewareRegistered||(this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),tm.After),this.isInitialized=!0)}else!function(t,e){const n=document.createElement("a"),i=e.split(".").pop();n.href=URL.createObjectURL(new Blob([t],{type:`text/${"txt"===i?"plain":i}`})),n.download=e,n.click(),n.remove()}(JSON.stringify(this.state.present,null,4),"character sheet.ars")},this.load=async()=>{if(this.isStandalone){const t={types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};let[e]=await window.showOpenFilePicker(t);this.fileHandle=e,this.isInitialized=!1,this.middlewareRegistered||this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),tm.After),this.store.dispatch(sC,await this.fileHandle.getFile())}else this.fileInput.click(),this.fileInput.onchange=this.fileInputChanged},this.newCharacter=async()=>{this.isStandalone&&(this.fileHandle=null),await this.store.dispatch(iC),this.isStandalone&&await this.save()},this.fileInputChanged=()=>{this.theFile.text().then((t=>this.store.dispatch(SC,t)))},this.isInitialized=!1,this.fileStorageMiddlewareFactory=()=>(this.middlewareRegistered=!0,(t,e,n)=>{this.isInitialized?(console.log("Saving file to disk"),this.saveFile(t)):this.isInitialized=!0}),this.saveFile=async t=>{if(this.fileHandle){var e=await this.fileHandle.createWritable();await e.write(JSON.stringify(t.present,null,4)),await e.close()}else console.log("Could not save - file handle not set")},this.store.registerAction("createNewCharacter",iC),this.store.registerAction("loadCharacter",rC),this.store.registerAction("loadCharacterFromFile",sC),this.store.registerAction("importCharacter",SC),this.store.registerAction("updateCharacteristics",oC),this.store.registerAction("updateAbilities",aC),this.store.registerAction("updateVirtues",cC),this.store.registerAction("updateFlaws",hC),this.store.registerAction("updateDescription",uC),this.store.registerAction("updatePhysicalStatus",dC),this.store.registerAction("updateArts",pC),this.store.registerAction("updateSpells",fC),this.store.registerAction("updateSpellWishlist",gC),this.store.registerAction("updatePersonalityTraits",lC),this.store.registerAction("updateAgeing",vC),this.store.registerAction("updateConfidence",mC),this.store.registerAction("updateWarping",bC),this.store.registerAction("updateActiveMagic",yC),this.store.registerAction("updateXpEntries",wC),this.store.registerAction("updateNotes",xC),this.store.registerAction("updateLab",kC),this.store.registerAction("updateSpellcastingStats",CC),this.store.registerAction("updateCharacterType",AC),this.store.registerAction("updateBackground",EC),this.store.registerAction("updateSigil",TC),this.store.registerAction("updateBelongings",$C),this.store.registerAction("updateTalisman",IC),this.store.registerAction("updateMagicItems",OC),this.store.registerAction("updateQuests",PC),this.store.registerAction("updateNpcs",RC),this.isStandalone?this.registerFileLaunchHandler():(this.store.registerAction("rehydrateFromLocalStorage",sm),t.registerMiddleware(im,tm.After,{key:"character-sheets"}),t.dispatch(sm,"character-sheets"))}registerFileLaunchHandler(){let t=window.launchQueue;t&&t.setConsumer((async t=>{const[e]=t.files;if(e){this.fileHandle=e;const t=await e.getFile();t&&(this.store.dispatch(sC,t),this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),tm.After))}}))}get theFile(){return this.selectedFiles&&this.selectedFiles.length>0?this.selectedFiles[0]:null}};wP=OS([xh(Ot),pm(),RS("design:paramtypes",[um])],wP);var xP=n(288),kP={};kP.styleTagTransform=HS(),kP.setAttributes=VS(),kP.insert=BS().bind(null,"head"),kP.domAPI=US(),kP.insertStyleElement=zS(),MS()(xP.Z,kP),xP.Z&&xP.Z.locals&&xP.Z.locals;const SP="checkbox",CP="<div class=\"container ${value ? 'checked' : 'unchecked'} ${readonly ? 'readonly' : ''} ${colorMode} ${size} ${mode}\" pointerup.delegate=\"toggle()\">\r\n</div>",AP=CP,EP=[];let TP;function $P(t){TP||(TP=jh.define({name:SP,template:CP,dependencies:EP})),t.register(TP)}class IP{constructor(){this.colorMode="color"}}OS([Nl,RS("design:type",String)],IP.prototype,"colorMode",void 0);let OP=class extends IP{constructor(){super(...arguments),this.value=!1,this.size="m",this.mode="regular",this.readonly=!1,this.toggle=()=>{this.readonly||(this.value=!this.value)}}};OS([Nl,RS("design:type",Boolean)],OP.prototype,"value",void 0),OS([Nl,RS("design:type",String)],OP.prototype,"size",void 0),OS([Nl,RS("design:type",String)],OP.prototype,"mode",void 0),OS([Nl,RS("design:type",Boolean)],OP.prototype,"readonly",void 0),OP=OS([xh(Pt)],OP);var PP=n(2001),RP={};RP.styleTagTransform=HS(),RP.setAttributes=VS(),RP.insert=BS().bind(null,"head"),RP.domAPI=US(),RP.insertStyleElement=zS(),MS()(PP.Z,RP),PP.Z&&PP.Z.locals&&PP.Z.locals;const LP="list",MP='<title text.bind="title"></title>\r\n<div class="container">\r\n    <div repeat.for="item of items">\r\n        <text-field class="list-entry" value.two-way="item.name" title="${item.name}"></text-field>\r\n        <stat-info-button if.bind="hasAdditionalInfo" source.bind="item" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <input type="text" class="add-item-input" placeholder="Add item" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',jP=MP,UP=[];let NP;function BP(t){NP||(NP=jh.define({name:LP,template:MP,dependencies:UP})),t.register(NP)}let FP=class{constructor(){this.items=[],this.hasAdditionalInfo=!1,this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.items.push({name:this.newItemText,additionalInfo:""}),this.items.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};OS([Nl,RS("design:type",String)],FP.prototype,"title",void 0),OS([Nl,RS("design:type",Array)],FP.prototype,"items",void 0),OS([Nl,RS("design:type",Boolean)],FP.prototype,"hasAdditionalInfo",void 0),FP=OS([xh(Rt)],FP);var VP=n(8908),DP={};DP.styleTagTransform=HS(),DP.setAttributes=VS(),DP.insert=BS().bind(null,"head"),DP.domAPI=US(),DP.insertStyleElement=zS(),MS()(VP.Z,DP),VP.Z&&VP.Z.locals&&VP.Z.locals;const zP="primary-stat",qP='<span if.bind="showHeader && header" class="header ${mode} ${size}">${header}</span>\r\n<div class="container ${active === true ? \'active\' : \'\'} ${readonly ? \'readonly\' : \'\'} ${fadeZero && value == 0 ? \'fade\' : \'\'} ${mode} ${colorMode} ${size}"\r\n     pointerdown.delegate="press()"\r\n     ref="containerElement">\r\n    <span class="content numbers">${getValuePrefix()+value}</div>\r\n</div>\r\n<div class="overlay" if.bind="active"  pointerup.delegate="release()" pointermove.delegate="move($event)"></div>',HP=qP,ZP=[];let WP;function KP(t){WP||(WP=jh.define({name:zP,template:qP,dependencies:ZP})),t.register(WP)}let _P=class extends IP{constructor(t){super(),this.ea=t,this.max=99,this.min=-99,this.mode="primary-angled",this.size="m",this.prefixPlus=!1,this.readonly=!1,this.header="",this.showHeader=!0,this.fadeZero=!1,this.active=!1,this.delta=0,this.press=()=>{this.readonly||(this.active=!0,this.originalValue=this.value,this.delta=0,window.addEventListener("pointerout",this.checkPointerOutsideWindow))},this.checkPointerOutsideWindow=t=>{(t.clientY<=0||t.clientX<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(window.removeEventListener("pointerout",this.checkPointerOutsideWindow),this.release())},this.release=()=>{this.readonly||(this.active=!1)},this.move=t=>{if(!this.active||this.readonly)return;this.delta+=t.movementY;let e=Math.round(this.originalValue-this.delta/10);this.value=Math.max(this.min,Math.min(this.max,e)),this.ea.publish("ui-interaction")},this.getValuePrefix=()=>this.prefixPlus&&this.value>0?"+":""}};OS([Nl,RS("design:type",Number)],_P.prototype,"value",void 0),OS([Nl,RS("design:type",Number)],_P.prototype,"max",void 0),OS([Nl,RS("design:type",Number)],_P.prototype,"min",void 0),OS([Nl,RS("design:type",String)],_P.prototype,"mode",void 0),OS([Nl,RS("design:type",String)],_P.prototype,"size",void 0),OS([Nl,RS("design:type",Boolean)],_P.prototype,"prefixPlus",void 0),OS([Nl,RS("design:type",Boolean)],_P.prototype,"readonly",void 0),OS([Nl,RS("design:type",String)],_P.prototype,"header",void 0),OS([Nl,RS("design:type",Boolean)],_P.prototype,"showHeader",void 0),OS([Nl,RS("design:type",Boolean)],_P.prototype,"fadeZero",void 0),_P=OS([xh(Lt),PS(0,bi),RS("design:paramtypes",[Object])],_P);var QP=n(9909),GP={};GP.styleTagTransform=HS(),GP.setAttributes=VS(),GP.insert=BS().bind(null,"head"),GP.domAPI=US(),GP.insertStyleElement=zS(),MS()(QP.Z,GP),QP.Z&&QP.Z.locals&&QP.Z.locals;const XP="radio-button",YP='<div class="container ${state} ${colorMode}"\r\n     pointerup.delegate="select()"\r\n     ref="element">\r\n</div>',JP=YP,tR=[];let eR;function nR(t){eR||(eR=jh.define({name:XP,template:YP,dependencies:tR})),t.register(eR)}let iR=class extends IP{constructor(t){super(),this.ea=t,this.state="unselected",this.select=()=>{this.group?this.ea.publish("radio-button-selected",{group:this.group,source:this.element,value:this.value}):this.state="selected"}}bound(){this.ea.subscribe("radio-button-selected",(t=>{this.group==t.group&&(this.state=t.source===this.element?"selected":"unselected")}))}};OS([Nl,RS("design:type",String)],iR.prototype,"state",void 0),OS([Nl,RS("design:type",String)],iR.prototype,"group",void 0),OS([Nl,RS("design:type",String)],iR.prototype,"value",void 0),iR=OS([xh(Mt),PS(0,bi),RS("design:paramtypes",[Object])],iR);var sR=n(835),rR={};rR.styleTagTransform=HS(),rR.setAttributes=VS(),rR.insert=BS().bind(null,"head"),rR.domAPI=US(),rR.insertStyleElement=zS(),MS()(sR.Z,rR),sR.Z&&sR.Z.locals&&sR.Z.locals;const oR="text-box",aR='<title text.bind="title" if.bind="showBorders"></title>\r\n<div class="container">\r\n    <textarea value.bind="text" cols="32" rows="8" keydown.delegate="onChange()" autocomplete="chrome-off"></textarea>\r\n</div>\r\n<footer if.bind="showBorders"></footer>',lR=aR,cR=[];let hR;function uR(t){hR||(hR=jh.define({name:oR,template:aR,dependencies:cR})),t.register(hR)}let dR=class{constructor(t){this.ea=t,this.showBorders=!0,this.onChange=()=>{this.ea.publish("ui-interaction")}}};OS([Nl,RS("design:type",String)],dR.prototype,"title",void 0),OS([Nl,RS("design:type",String)],dR.prototype,"text",void 0),OS([Nl,RS("design:type",Boolean)],dR.prototype,"showBorders",void 0),dR=OS([xh(jt),PS(0,bi),RS("design:paramtypes",[Object])],dR);var pR=n(6140),fR={};fR.styleTagTransform=HS(),fR.setAttributes=VS(),fR.insert=BS().bind(null,"head"),fR.domAPI=US(),fR.insertStyleElement=zS(),MS()(pR.Z,fR),pR.Z&&pR.Z.locals&&pR.Z.locals;const gR="footer",vR='<div class="grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',mR=vR,bR=[];let yR;function wR(t){yR||(yR=jh.define({name:gR,template:vR,dependencies:bR})),t.register(yR)}let xR=class{};xR=OS([xh(Ut)],xR);var kR=n(1939),SR={};SR.styleTagTransform=HS(),SR.setAttributes=VS(),SR.insert=BS().bind(null,"head"),SR.domAPI=US(),SR.insertStyleElement=zS(),MS()(kR.Z,SR),kR.Z&&kR.Z.locals&&kR.Z.locals;const CR="title",AR='<div class="title grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n    <span class="text">${text}</span>\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',ER=AR,TR=[];let $R;function IR(t){$R||($R=jh.define({name:CR,template:AR,dependencies:TR})),t.register($R)}let OR=class{};OS([Nl,RS("design:type",String)],OR.prototype,"text",void 0),OR=OS([xh(Nt)],OR);var PR=n(1525),RR={};RR.styleTagTransform=HS(),RR.setAttributes=VS(),RR.insert=BS().bind(null,"head"),RR.domAPI=US(),RR.insertStyleElement=zS(),MS()(PR.Z,RR),PR.Z&&PR.Z.locals&&PR.Z.locals;const LR="rune-edge",MR='<div class="container">\r\n</div>',jR=MR,UR=[];let NR;function BR(t){NR||(NR=jh.define({name:LR,template:MR,dependencies:UR})),t.register(NR)}let FR=class{};FR=OS([xh(Bt)],FR);var VR=n(6392),DR={};DR.styleTagTransform=HS(),DR.setAttributes=VS(),DR.insert=BS().bind(null,"head"),DR.domAPI=US(),DR.insertStyleElement=zS(),MS()(VR.Z,DR),VR.Z&&VR.Z.locals&&VR.Z.locals;const zR="name-block",qR='<text-field placeholder="Name" value.two-way="model.name"></text-field>',HR=qR,ZR=[];let WR;function KR(t){WR||(WR=jh.define({name:zR,template:qR,dependencies:ZR})),t.register(WR)}let _R=class extends GC{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),uC,e)}};_R=OS([xh(Ft),kh,PS(1,bi),RS("design:paramtypes",[um,Object])],_R);const QR="page-header",GR='\r\n\r\n<div class="grid">\r\n    <div class="left-page-links">\r\n        <a class="page-link active" href="/description">Description</a>\r\n        <a class="page-link" href="/stats">Stats</a>\r\n        <a class="page-link" href="/magic" if.bind="state.present.character.type == \'magus\'">Magic</a>\r\n        <a class="page-link" href="/progression">Progression</a>\r\n    </div>\r\n    <div></div>\r\n    <div class="right-page-links">\r\n        <a class="page-link" href="/lab" if.bind="state.present.character.type == \'magus\'">Lab</a>\r\n        <a class="page-link" href="/belongings">Belongings</a>\r\n        <a class="page-link" href="/enchantments" if.bind="state.present.character.type == \'magus\'">Enchantments</a>\r\n        <a class="page-link" href="/notes">Notes</a>\r\n    </div>\r\n\r\n    <rune-edge></rune-edge>\r\n    <div class="name-box">\r\n        <name-block></name-block>\r\n    </div>\r\n    <rune-edge></rune-edge>\r\n</div>',XR=GR,YR=[Vt];let JR;function tL(t){JR||(JR=jh.define({name:QR,template:GR,dependencies:YR})),t.register(JR)}let eL=class{};eL=OS([xh(Dt),pm()],eL);var nL=n(4280),iL={};iL.styleTagTransform=HS(),iL.setAttributes=VS(),iL.insert=BS().bind(null,"head"),iL.domAPI=US(),iL.insertStyleElement=zS(),MS()(nL.Z,iL),nL.Z&&nL.Z.locals&&nL.Z.locals;const sL="text-field",rL='<input type="text" class.bind="class" value.bind="value" placeholder.bind="placeholder" title.bind="title" keydown.delegate="onChange()">\r\n',oL=rL,aL=[];let lL;function cL(t){lL||(lL=jh.define({name:sL,template:rL,dependencies:aL})),t.register(lL)}let hL=class{constructor(t){this.ea=t,this.placeholder="",this.title="",this.class="",this.onChange=()=>{this.ea.publish("ui-interaction")}}};OS([Nl,RS("design:type",String)],hL.prototype,"value",void 0),OS([Nl,RS("design:type",String)],hL.prototype,"placeholder",void 0),OS([Nl,RS("design:type",String)],hL.prototype,"title",void 0),OS([Nl,RS("design:type",String)],hL.prototype,"class",void 0),hL=OS([xh(zt),kh,PS(0,bi),RS("design:paramtypes",[Object])],hL);var uL=n(2661),dL={};dL.styleTagTransform=HS(),dL.setAttributes=VS(),dL.insert=BS().bind(null,"head"),dL.domAPI=US(),dL.insertStyleElement=zS(),MS()(uL.Z,dL),uL.Z&&uL.Z.locals&&uL.Z.locals;const pL="add-item-input",fL='<input class="add-item-input-field" type="text" placeholder.bind="placeholder" keyup.delegate="keyPressed($event)" value.two-way="newItemString">',gL=fL,vL=[];let mL;function bL(t){mL||(mL=jh.define({name:pL,template:fL,dependencies:vL})),t.register(mL)}let yL=class{constructor(){this.newItemString="",this.keyPressed=t=>{this.onItemAdded&&"Enter"==t.key&&this.newItemString&&(this.parent?this.onItemAdded(this.newItemString,this.parent):this.onItemAdded(this.newItemString),this.newItemString="")}}};OS([Nl,RS("design:type",String)],yL.prototype,"placeholder",void 0),OS([Nl,RS("design:type",Function)],yL.prototype,"onItemAdded",void 0),OS([Nl,RS("design:type",Object)],yL.prototype,"parent",void 0),yL=OS([xh(qt),kh],yL);var wL=n(3055),xL={};xL.styleTagTransform=HS(),xL.setAttributes=VS(),xL.insert=BS().bind(null,"head"),xL.domAPI=US(),xL.insertStyleElement=zS(),MS()(wL.Z,xL),wL.Z&&wL.Z.locals&&wL.Z.locals;const kL="dialog-box",SL='<div class="dialog-container ${size}">\r\n    <div class="inner-container">\r\n        <title text.bind="title"></title>\r\n        <au-slot></au-slot>\r\n        <footer></footer>\r\n    </div>\r\n</div>\r\n',CL=SL,AL=[];let EL;function TL(t){EL||(EL=jh.define({name:kL,template:SL,dependencies:AL})),t.register(EL)}let $L=class{constructor(t){this.host=t,this.size="m"}attaching(){return document.body.classList.add("disable-scrolling"),this.host.animate([{transform:"scale(0.8)",opacity:"0"},{transform:"scale(1)",opacity:"1"}],{duration:200}).finished}detaching(){return document.body.classList.remove("disable-scrolling"),this.host.animate([{transform:"scale(1)",opacity:"1"},{transform:"scale(0.8)",opacity:"0"}],{duration:200}).finished}};OS([Nl,RS("design:type",String)],$L.prototype,"title",void 0),OS([Nl,RS("design:type",String)],$L.prototype,"size",void 0),$L=OS([xh(Ht),gn(Element),RS("design:paramtypes",[Element])],$L);var IL=n(2495),OL={};OL.styleTagTransform=HS(),OL.setAttributes=VS(),OL.insert=BS().bind(null,"head"),OL.domAPI=US(),OL.insertStyleElement=zS(),MS()(IL.Z,OL),IL.Z&&IL.Z.locals&&IL.Z.locals;const PL="text-dialog",RL='<dialog-box title="${model.title}" size="m">\r\n    <text-box class="text-dialog-input" text.two-way="model.value" show-borders.bind="false"></text-box>\r\n</dialog-box>',LL=RL,ML=[];let jL;function UL(t){jL||(jL=jh.define({name:PL,template:RL,dependencies:ML})),t.register(jL)}var NL;let BL=NL=class{activate(t){this.model=t}static open(t,e){let n=sM.get(nv),i=nC(t);n.open({component:()=>NL,overlayDismiss:!0,model:i}).whenClosed((n=>{t.value=i.value,e()}))}};BL=NL=OS([xh(Zt),kh],BL);var FL=n(1247),VL={};VL.styleTagTransform=HS(),VL.setAttributes=VS(),VL.insert=BS().bind(null,"head"),VL.domAPI=US(),VL.insertStyleElement=zS(),MS()(FL.Z,VL),FL.Z&&FL.Z.locals&&FL.Z.locals;const DL="stat-info-button",zL='<div class="button ${isActive ? \'active\' : \'\'}" click.delegate="activate()" title="Additional information">\r\n</div>',qL=zL,HL=[];let ZL;function WL(t){ZL||(ZL=jh.define({name:DL,template:zL,dependencies:HL})),t.register(ZL)}let KL=class{constructor(){this.activate=()=>{let t=this.source[this.property],e={value:null!=t?t:"",title:"INFORMATION"};BL.open(e,(()=>{this.source[this.property]=e.value}))}}get isActive(){let t=this.source[this.property];return null!=t&&t.length>0}};OS([Nl,RS("design:type",Object)],KL.prototype,"source",void 0),OS([Nl,RS("design:type",String)],KL.prototype,"property",void 0),KL=OS([xh(Wt)],KL);var _L=n(1187),QL={};QL.styleTagTransform=HS(),QL.setAttributes=VS(),QL.insert=BS().bind(null,"head"),QL.domAPI=US(),QL.insertStyleElement=zS(),MS()(_L.Z,QL),_L.Z&&_L.Z.locals&&_L.Z.locals;const GL="cross-button",XL='<div class="button-container ${mode}">\r\n\r\n</div>',YL=XL,JL=[];let tM;function eM(t){tM||(tM=jh.define({name:GL,template:XL,dependencies:JL})),t.register(tM)}let nM=class{constructor(){this.mode="standard"}};OS([Nl,RS("design:type",String)],nM.prototype,"mode",void 0),nM=OS([xh(Kt)],nM);let iM=kv.register(fm.withInitialState(eC).withOptions({history:{undoable:!0,limit:20}})).register(IS.customize({})).register(yv).register(OP,FP,_P,iR,dR,hL,yL,$L,BL,KL,nM).register(xR,OR,FR,eL).app(wP);const sM=iM.container;iM.start(),window.addEventListener("dragover",(function(t){t.preventDefault()}),!1),window.addEventListener("drop",(function(t){t.preventDefault()}),!1),!(window.location.href.indexOf("localhost")>=0)&&"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sheet-maker/service-worker.js").then((t=>{console.log("SW registered: ",t)})).catch((t=>{console.log("SW registration failed: ",t)}))}))})()})();