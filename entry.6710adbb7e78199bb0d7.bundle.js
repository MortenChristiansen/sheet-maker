/*! For license information please see entry.6710adbb7e78199bb0d7.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={2661:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".add-item-input-field {\r\n    margin-top: 15px;\r\n    width: 250px;\r\n    border-bottom-style: dashed !important;\r\n    display: block;\r\n}",""]);const a=o},288:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8390),n.b),h=new URL(n(3208),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"checkbox {\r\n    display: inline-block;\r\n}\r\n\r\ncheckbox > .container:not(.readonly) {\r\n    cursor: pointer;\r\n}\r\n\r\ncheckbox .container {\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\ncheckbox .container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncheckbox .container.s {\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n\r\ncheckbox .container.xs {\r\n    width: 13px;\r\n    height: 13px;\r\n}\r\n\r\ncheckbox .container.checked {\r\n    background-image: url("+d+");\r\n}\r\n\r\ncheckbox .container.unchecked {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},1187:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7786),n.b),h=o()(s()),u=l()(c);h.push([t.id,"cross-button {\r\n    display: inline-block;\r\n}\r\n\r\ncross-button .button-container {\r\n    width: 30px;\r\n    height: 30px;\r\n    background-size: contain;\r\n    background-image: url("+u+");\r\n}\r\n\r\ncross-button .button-container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncross-button .button-container:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}\r\n\r\ncross-button .button-container.angled:hover {\r\n    cursor: pointer;\r\n    transform: rotate(45deg) scale(1.1);\r\n}",""]);const d=h},3055:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(5404),n.b),h=new URL(n(3320),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"dialog-box {\r\n    display: block;\r\n}\r\n\r\ndialog-box .dialog-container {\r\n    padding: 20px;\r\n    filter: drop-shadow(8px 8px 10px rgba(0, 0, 0, 0.571));\r\n}\r\n\r\ndialog-box  .inner-container {\r\n    margin: 10px 20px;\r\n}\r\n\r\ndialog-box .dialog-container.m {\r\n    width: 1083px;\r\n    height: 763px;\r\n    background-image: url("+d+");\r\n}\r\n\r\ndialog-box .dialog-container.s {\r\n    width: 614px;\r\n    height: 418px;\r\n    background-image: url("+p+");\r\n}\r\n\r\n/* Fixes rendering error for the built in dialog UI, which does not work with scrolling */\r\nau-dialog-overlay {\r\n    position: fixed !important;\r\n}\r\nau-dialog-container {\r\n    position: fixed !important;\r\n    z-index: 3;\r\n}\r\n",""]);const f=u},2001:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nlist > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\n\r\nlist .list-entry {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},9909:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(164),n.b),h=new URL(n(2),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"radio-button {\r\n    display: inline-block;\r\n    cursor: pointer;\r\n}\r\n\r\nradio-button .container {\r\n    background-size: contain;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nradio-button .container.selected {\r\n    background-image: url("+d+");\r\n}\r\n\r\nradio-button .container.unselected {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},6286:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".project-details {\r\n    display: grid;\r\n    grid-template-columns: 200px auto 200px auto;\r\n    grid-auto-rows: 1fr;\r\n    margin-bottom: 348px;\r\n}\r\n\r\n.project-details > * {\r\n    align-self: center;\r\n    justify-content: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\n.project-details stat-box .container {\r\n    margin-left: unset;\r\n    margin-right: unset;\r\n}\r\n\r\n.project-details input[type=text] {\r\n    margin-right: 20px;\r\n}",""]);const a=o},4235:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".spell-details {\r\n    display: grid;\r\n    grid-template-columns: 200px auto;\r\n    grid-auto-rows: 1fr;\r\n    margin-bottom: 80px;\r\n}\r\n\r\n.spell-details > * {\r\n    align-self: center;\r\n    justify-content: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\n.spell-details stat-box .container {\r\n    margin-left: unset;\r\n    margin-right: unset;\r\n}\r\n",""]);const a=o},1365:(t,e,n)=>{n.d(e,{Z:()=>b});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8801),n.b),h=new URL(n(9462),n.b),u=new URL(n(3473),n.b),d=new URL(n(2867),n.b),p=o()(s()),f=l()(c),g=l()(h),v=l()(u),m=l()(d);p.push([t.id,"stat-box {\r\n    display: inline-block;\r\n}\r\n\r\nstat-box .container.fade {\r\n    opacity: 0.4;\r\n}\r\n\r\nstat-box .container {\r\n    width: 60px;\r\n    height: 60px;\r\n    background-size: contain;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nstat-box .header {\r\n    display: inline-block;\r\n    text-align: center;\r\n    width: 60px;\r\n    font-size: 13px;\r\n    color: #446;\r\n    line-height: 120%;\r\n}\r\n\r\nstat-box > .container:not(.readonly) {\r\n    cursor: -webkit-grab;\r\n    cursor: grab;\r\n}\r\n\r\nstat-box .container.l {\r\n    width: 90px;\r\n    height: 90px;\r\n    font-size: 30px;\r\n}\r\n\r\nstat-box .header.l {\r\n    width: 90px;\r\n    font-size: 15px;\r\n}\r\n\r\nstat-box .container.s {\r\n    width: 45px;\r\n    height: 45px;\r\n    font-size: 13px;\r\n}\r\n\r\nstat-box .header.s {\r\n    width: 45px;\r\n    font-size: 10px;\r\n}\r\n\r\nstat-box .container.xs {\r\n    width: 36px;\r\n    height: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nstat-box .header.xs {\r\n    width: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nstat-box .container.primary {\r\n    background-image: url("+f+");\r\n}\r\n\r\nstat-box .container.primary-angled {\r\n    background-image: url("+g+");\r\n}\r\n\r\nstat-box .container.secondary {\r\n    background-image: url("+v+");\r\n    width: 44px;\r\n    height: 44px;\r\n}\r\nstat-box .container.secondary.s {\r\n    width: 33px;\r\n    height: 33px;\r\n}\r\nstat-box .container.secondary.xs {\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nstat-box .header.secondary {\r\n    width: 44px;\r\n}\r\nstat-box .header.secondary.s {\r\n    width: 33px;\r\n}\r\nstat-box .header.secondary.xs {\r\n    width: 24px;\r\n}\r\n\r\nstat-box .container.secondary-angled {\r\n    background-image: url("+m+");\r\n}\r\n\r\nstat-box .container.active {\r\n    cursor: -webkit-grabbing;\r\n    cursor: grabbing;\r\n}\r\n\r\nstat-box .container .content {\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\nstat-box .overlay {\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 1;\r\n}",""]);const b=p},1247:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7552),n.b),h=o()(s()),u=l()(c);h.push([t.id,"stat-info-button {\r\n    display: inline-block;\r\n    width: 25px;\r\n    height: 25px;\r\n}\r\n\r\nstat-info-button:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}\r\n\r\nstat-info-button .button {\r\n    opacity: 0.5;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-image: url("+u+");\r\n    background-size: contain;\r\n}\r\n\r\nstat-info-button .button.active {\r\n    opacity: 1;\r\n}",""]);const d=h},8831:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(5815),n.b),h=o()(s()),u=l()(c);h.push([t.id,"symbol {\r\n    display: inline-block;\r\n}\r\n\r\n.symbol-container {\r\n    width: 30px;\r\n    height: 30px;\r\n    background-size: contain;\r\n\r\n    transform: scale(1);\r\n    transition-duration: 0.1s;\r\n    transition-property: transform;\r\n}\r\n\r\n.symbol-container.three-dots {\r\n    background-image: url("+u+");\r\n}\r\n\r\n.symbol-container:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}",""]);const d=h},835:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box {\r\n    display: block;\r\n    width: 300px;\r\n}\r\n\r\ntext-box > .container {\r\n    margin: 0 10px 0 10px;\r\n}\r\n\r\ntext-box textarea {\r\n    font-family: 'Estonia', cursive;\r\n    font-size: 30px;\r\n    background-color: transparent;\r\n    font-weight: bold;\r\n    padding: 5px;\r\n\r\n    width: 100%;\r\n    border: none;\r\n    overflow: auto;\r\n    outline: none;\r\n    box-shadow: none;\r\n\r\n    resize: none;\r\n}",""]);const a=o},2495:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box.text-dialog-input textarea {\r\n    height: 230px;\r\n    width: 405px;\r\n    padding: 7px;\r\n}\r\n\r\ntext-box.text-dialog-input .container {\r\n    margin: 0;\r\n}\r\n\r\n.dialog-container.m text-box.text-dialog-input textarea {\r\n    height: 653px;\r\n    width: 1028px;\r\n}",""]);const a=o},4280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-field .input {\r\n    text-overflow: ellipsis;\r\n    display: inline-block;\r\n}",""]);const a=o},6140:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"footer {\r\n    display: block;\r\n}\r\n\r\nfooter .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1) scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block; \r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n}",""]);const f=u},6392:(t,e,n)=>{n.d(e,{Z:()=>$});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(5903),n.b),h=new URL(n(3011),n.b),u=new URL(n(9420),n.b),d=new URL(n(429),n.b),p=new URL(n(9614),n.b),f=new URL(n(1636),n.b),g=new URL(n(2690),n.b),v=new URL(n(3126),n.b),m=new URL(n(977),n.b),b=o()(s()),w=l()(c),y=l()(h),x=l()(u),k=l()(d),S=l()(p),A=l()(f),C=l()(g),E=l()(v),T=l()(m);b.push([t.id,"page-header {\r\n    display: block;\r\n    position: relative;\r\n    z-index: 1;\r\n}\r\n\r\npage-header .page-links {\r\n    height: 161px;\r\n    left: 50px;\r\n    bottom: -110px;\r\n    position: absolute;\r\n    width: 100%;\r\n}\r\n\r\npage-header .page-link {\r\n    width: 206px;\r\n    height: 100px;\r\n    display: inline-block;\r\n    margin-right: -15px;\r\n\r\n    transform: translateY(0);\r\n    transition-duration: 0.3s;\r\n    transition-property: transform;\r\n}\r\n\r\npage-header .page-link.active {\r\n    transform: translateY(-20px);\r\n    cursor: default;\r\n}\r\n\r\npage-header .page-link:not(.active):hover {\r\n    transform: translateY(-20px);\r\n}\r\n\r\npage-header .magic {\r\n    background-image: url("+w+");\r\n}\r\npage-header .stats {\r\n    background-image: url("+y+");\r\n}\r\npage-header .lab {\r\n    background-image: url("+x+");\r\n}\r\npage-header .notes {\r\n    background-image: url("+k+");\r\n}\r\npage-header .enchantments {\r\n    background-image: url("+S+");\r\n}\r\npage-header .description {\r\n    background-image: url("+A+");\r\n}\r\npage-header .belongings {\r\n    background-image: url("+C+");\r\n}\r\npage-header .progression {\r\n    background-image: url("+E+");\r\n}\r\npage-header .settings {\r\n    background-image: url("+T+");\r\n}\r\n",""]);const $=b},1525:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7283),n.b),h=o()(s()),u=l()(c);h.push([t.id,"rune-edge {\r\n    display: block;\r\n    width: 100%;\r\n    height: 20px;\r\n    background-size: contain;\r\n    background-repeat: repeat-x;\r\n    background-image: url("+u+");\r\n    margin: 45px 0;\r\n}",""]);const d=h},1939:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"title {\r\n    display: block;\r\n    height: auto;\r\n}\r\n\r\ntitle .text {\r\n    font-size: 18px;\r\n    color: darkred;\r\n    padding: 0 4px;\r\n    display: inline-block;\r\n}\r\n\r\ntitle .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1);\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto auto auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n    \r\n}",""]);const f=u},1138:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(9811),n.b),h=new URL(n(7210),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"html {\n  height: 100%;\n}\n\n.message {\n  background-color: red;\n}\n\nbody {\n  font-family: 'Eagle Lake', cursive;\n  font-size: 20px;\n  color: darkred;\n  filter: drop-shadow(8px 8px 10px rgba(0, 0, 0, 0.571));\n  margin: 0;\n  height: 100%;\n\n  /* https://heropatterns.com/ */\n  background-color: #300606;\n  background-image: url("+d+");\n}\n\nmy-app {\n  display: grid;\n  grid-template-columns: 1fr 2200px 1fr;\n  grid-template-rows: 1fr 1100px 1fr;\n  width: 100%;\n  height: 100%;\n}\n\npage-header {\n  grid-column: 2;\n  grid-column-end: 2;\n  grid-row: 1;\n  grid-row-end: 1;\n}\n\n.main-paper {\n  background-image:  url("+p+");\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 100%;\n  width: 100%;\n  height: 100%;\n  grid-column: 2;\n  grid-column-end: 2;\n  grid-row: 2;\n  grid-row-end: 2;\n  position: relative;\n  z-index: 2;\n  pointer-events: none;\n}\n\n.page-view {\n  pointer-events: all;\n  margin: 40px;\n}\n\n\n.buttons {\n  grid-column: 2;\n  grid-column-end: 2;\n  grid-row: 3;\n  grid-row-end: 3;\n\n  margin-left: 30px;\n}\n\n.numbers {\n  font-family: 'MedievalSharp', cursive;\n}\n\n/*\nfont-family: 'Amatic SC', cursive;\nfont-family: 'Eagle Lake', cursive;\nfont-family: 'Estonia', cursive;\nfont-family: 'Fleur De Leah', cursive;\nfont-family: 'IM Fell DW Pica SC', serif;\nfont-family: 'IM Fell English SC', serif;\nfont-family: 'MedievalSharp', cursive;\n*/\n\n.monochrome {\n  filter: grayscale(100%);\n}\n\n.text {\n    font-size: 16px;\n    color: #446;\n}\n\ninput[type=\"text\"] {\n  border: none;\n  border-bottom: 2px solid #cbc1ad;\n  background: none;\n  padding: 0px 6px;\n  font-family: 'Estonia', cursive;\n  font-size: 30px;\n  font-weight: bold;\n  text-indent: 5px;\n}\n\ninput[type=\"text\"]:focus {\n  outline: none;\n}\n\ninput[type=\"text\"].specialisation {\n  text-align: center;\n  width: 150px;\n  color: #568;\n}\n\n::-moz-placeholder {\n  color: #aaa;\n  opacity: 1; /* Firefox */\n}\n\n::placeholder {\n  color: #aaa;\n  opacity: 1; /* Firefox */\n}\n\n@-webkit-keyframes fadeIn {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@keyframes fadeIn {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@-webkit-keyframes fadeOut {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@keyframes fadeOut {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n.disable-scrolling {\n  overflow: hidden;\n}\n\n/* Buttons */\n\nbutton {\n  background-color: #446;\n  color: #bbb;\n  padding: 8px 16px;\n  border-radius: 5px;\n  font-family: 'Eagle Lake', cursive;\n  border: none;\n}\n\nbutton:hover {\n  background-color: rgb(87, 87, 140);\n}\n\nbutton:disabled {\n  background-color: rgb(39, 39, 53);\n}\n\n/* Scrollbars */\n\n/* width */\n::-webkit-scrollbar {\n  width: 10px;\n}\n\n/* Track */\n::-webkit-scrollbar-track {\n  box-shadow: inset 0 0 5px grey;\n  border-radius: 10px;\n}\n\n/* Handle */\n::-webkit-scrollbar-thumb {\n  background: darkred;\n  border-radius: 10px;\n}\n",""]);const f=u},927:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"abilities-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 1534px;\r\n    float: left;\r\n}\r\n\r\nabilities-block > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nabilities-block .ability {\r\n    display: inline-block;\r\n}\r\n\r\nabilities-block .puissant-label {\r\n    display: inline-block;\r\n    width: 40px;\r\n}\r\n\r\nabilities-block .ability > * {\r\n    display: inline-block;\r\n}\r\n\r\nabilities-block .ability .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .name {\r\n    opacity: 0.4;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability .specialisation {\r\n    width: 150px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .specialisation {\r\n    opacity: 0;\r\n}\r\n\r\nabilities-block .add-item-input-field {\r\n    width: 200px;\r\n}",""]);const a=o},7804:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"active-magic-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nactive-magic-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nactive-magic-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nactive-magic-list > .container > .grid > * {\r\n    align-self: end;\r\n    margin: 1px 2px;\r\n}\r\nactive-magic-list > .container > .grid > checkbox {\r\n    margin-bottom: 10px;\r\n}\r\nactive-magic-list > .container > .grid > stat-info-button {\r\n    margin-bottom: 6px;\r\n    margin-left: 6px;\r\n}",""]);const a=o},2012:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"age-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nage-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-template-rows: auto auto auto 60px;\r\n}\r\n\r\nage-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 4px;\r\n}\r\n\r\nage-block > .grid > .left {\r\n    justify-self: left;\r\n}\r\n\r\nage-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nage-block > .grid > .bottom {\r\n    align-self: end;\r\n}\r\n\r\nage-block > .grid > .top {\r\n    align-self: baseline;\r\n}\r\n\r\nage-block .small-text {\r\n    font-size: 14px;\r\n}",""]);const a=o},5185:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"arts-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\narts-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto 40px auto auto auto  10px auto auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\narts-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\narts-block .untrained {\r\n    opacity: 0.4;\r\n}",""]);const a=o},3260:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"background-block {\r\n    display: block;\r\n    width: 630px;\r\n    float: left;\r\n    margin: 0 20px 20px 0;\r\n}\r\n\r\nbackground-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nbackground-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},8985:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"carried-belongings-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 630px;\r\n    float: left;\r\n}\r\n\r\ncarried-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\ncarried-belongings-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},6767:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"character-type-selector {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    height: -webkit-fit-content;\r\n    height: -moz-fit-content;\r\n    height: fit-content;\r\n    color: #446;\r\n    margin: 20px;\r\n}\r\n\r\ncharacter-type-selector .container > * {\r\n    vertical-align: middle;\r\n}",""]);const a=o},3292:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"characteristics-block {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    color: #446;\r\n    margin: 0 20px 20px 0;\r\n    float: left;\r\n}\r\n\r\ncharacteristics-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ncharacteristics-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr;\r\n}\r\n\r\ncharacteristics-block .grid > * {\r\n    align-self: center;\r\n}\r\n\r\ncharacteristics-block .grid .text.left-col {\r\n    justify-self: right;\r\n}\r\n\r\ncharacteristics-block .grid .text{\r\n    justify-self: left;\r\n    margin-left: 3px;\r\n    margin-right: 3px;\r\n}\r\n\r\n\r\ncharacteristics-block .grid stat-box {\r\n    margin: 1px;\r\n}\r\n\r\ncharacteristics-block footer {\r\n    margin-top: 5px;\r\n}\r\n\r\ncharacteristics-block .specialisation {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},4397:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"confidence-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},6903:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"damage-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 280px;\r\n    float: left;\r\n}\r\n\r\ndamage-block > .container {\r\n    padding: 10px 30px;\r\n    text-align: center;\r\n}\r\n\r\ndamage-block .wound-type:nth-child(1) {\r\n    display: inline-block;\r\n    margin-left: 0;\r\n}\r\n",""]);const a=o},3845:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"description-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},912:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"familiar-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nfamiliar-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nfamiliar-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto ;\r\n    grid-template-rows: 1fr;\r\n}\r\n\r\nfamiliar-block > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nfamiliar-block > .grid > .arts {\r\n    width: 50px;\r\n    text-align: center;\r\n}\r\n\r\nfamiliar-block > .container > .description {\r\n    width: 700px;\r\n}\r\n\r\nfamiliar-block .block {\r\n    text-align: center;\r\n}\r\n\r\nfamiliar-block .effect .usages, familiar-block .effect .range, familiar-block .effect .duration, familiar-block .effect .target, familiar-block .effect .arts {\r\n    width: 150px;\r\n}\r\n\r\nfamiliar-block .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},1459:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"fatigue-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 280px;\r\n    float: left;\r\n}\r\n\r\nfatigue-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nfatigue-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\nfatigue-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nfatigue-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nfatigue-block radio-button {\r\n    margin-left: 5px;\r\n}",""]);const a=o},2820:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-description-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\nlab-description-block text-box {\r\n    width: 100%;\r\n}\r\n\r\nlab-description-block text-box textarea {\r\n    height: 198px;\r\n}",""]);const a=o},6964:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,'lab-modifications-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    min-width: 845px;\r\n    float: left;\r\n}\r\n\r\nlab-modifications-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-modifications-list > .container > .items > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nlab-modifications-list > .container > .items > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-modifications-list .add-item-input-field {\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .container > .title {\r\n    display: block;\r\n    margin-top: 30px;\r\n}\r\n\r\nlab-modifications-list .grid > .name {\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .grid > .category {\r\n    width: 100px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .grid > .description {\r\n    width: 400px;\r\n}\r\n\r\nlab-modifications-list .items {\r\n    overflow-y: auto;\r\n    height: 124px;\r\n}\r\n\r\nlab-modifications-list .add-item-input-field.add-modifier-input {\r\n    position: absolute;\r\n    right: 45px;\r\n    top: -25px;\r\n    width: 60px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .modifier {\r\n    margin: 0 4px;\r\n}\r\n\r\nlab-modifications-list .modifier-titles {\r\n    position: absolute;\r\n    right: 13px;\r\n    top: 5px;\r\n}\r\n\r\nlab-modifications-list .modifier-title {\r\n    font-size: 9px;\r\n    display: inline-block;\r\n    width: 35px;\r\n    text-align: center;\r\n    font-family: "Eagle Lake", cursive;\r\n    border-bottom: none;\r\n    padding: 0;\r\n    font-weight: unset;\r\n    text-overflow: ellipsis;\r\n    text-indent: 0;\r\n}\r\n\r\n\r\nlab-modifications-list .modifier-totals {\r\n    position: absolute;\r\n    right: 8px;\r\n    bottom: 10px;\r\n}\r\n\r\nlab-modifications-list .modifier-total {\r\n    font-size: 16px;\r\n    display: inline-block;\r\n    width: 29px;\r\n    margin: 6px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .block {\r\n    margin-top: 5px;\r\n    position: relative;\r\n}\r\n\r\nlab-modifications-list .last-block .modifier-titles  {\r\n    top: -65px;\r\n}',""]);const a=o},8412:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-stats {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nlab-stats > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-stats > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 110px 110px 110px 110px 110px 110px 110px 110px 110px 110px 110px 110px;\r\n    grid-auto-rows: auto auto auto;\r\n}\r\n\r\nlab-stats > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n}\r\n\r\nlab-stats > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nlab-stats .modifier-selector {\r\n    text-align: center;\r\n    width: 90px;\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},4769:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"magic-items-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 2061px;\r\n    float: left;\r\n}\r\n\r\nmagic-items-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nmagic-items-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content auto;\r\n    grid-template-columns: min-content min-content min-content min-content auto;\r\n    grid-auto-rows: auto auto;\r\n}\r\n\r\nmagic-items-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nmagic-items-block .magic-item > .effects {\r\n    grid-column-start: 1;\r\n    grid-column-end: 6;\r\n}\r\n\r\nmagic-items-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\nmagic-items-block .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nmagic-items-block .effect .usages, magic-items-block .effect .range, magic-items-block .effect .duration, magic-items-block .effect .target, magic-items-block .effect .arts {\r\n    width: 150px;\r\n}\r\n\r\nmagic-items-block .magic-item {\r\n    border-left: 3px solid darkred;\r\n    margin-bottom: 20px;\r\n    padding: 0 10px;\r\n}",""]);const a=o},1589:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"name-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},3349:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"notes-block {\r\n    display: block;\r\n    width: 630px;\r\n    float: left;\r\n    margin: 0 20px 20px 0;\r\n}\r\n\r\nnotes-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nnotes-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"npc-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nnpc-list > .container {\r\n    padding: 10px;\r\n    position: relative;\r\n}\r\n\r\nnpc-list .npcs {\r\n    overflow-y: auto;\r\n    height: 369px;\r\n}\r\n\r\nnpc-list > .container > .npcs > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nnpc-list > .container > .npcs > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nnpc-list .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nnpc-list .description {\r\n    width: 500px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nnpc-list .add-item-input-field {\r\n    width: 200px;\r\n}",""]);const a=o},5555:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"personality-traits-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\npersonality-traits-list > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\npersonality-traits-list stat-box {\r\n    margin-left: 10px;;\r\n}",""]);const a=o},5889:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"physical-penalty-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},7600:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"quest-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nquest-list > .container {\r\n    padding: 10px;\r\n    position: relative;\r\n}\r\n\r\nquest-list .quests {\r\n    overflow-y: auto;\r\n    height: 369px;\r\n}\r\n\r\nquest-list > .container > .quests > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nquest-list > .container > .quests > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nquest-list .name {\r\n    width: 650px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nquest-list .priority {\r\n    margin-left: 10px !important;\r\n}\r\n\r\nquest-list .add-item-input-field {\r\n    width: 600px;\r\n}",""]);const a=o},4467:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"research-projects {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 2035px;\r\n    float: left;\r\n}\r\n\r\nresearch-projects > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nresearch-projects .projects {\r\n    height: 142px;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n}\r\n\r\nresearch-projects .block {\r\n    text-align: center;\r\n}\r\n\r\nresearch-projects > .container > .projects > .grid {\r\n    display: inline-grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content min-content min-content min-content min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n    margin-right: 20px;\r\n}\r\n\r\nresearch-projects > .container > .projects > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\n\r\nresearch-projects .arts, research-projects .prerequisites {\r\n    width: 50px;\r\n    text-align: center;\r\n}\r\n\r\nresearch-projects .material, research-projects .shape {\r\n    width: 150px;\r\n    text-align: center;\r\n}\r\n",""]);const a=o},5204:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"sanctum-belongings-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 630px;\r\n    float: left;\r\n}\r\n\r\nsanctum-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nsanctum-belongings-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},7266:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(9462),n.b),h=new URL(n(3082),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"sigil {\r\n    display: block;\r\n    height: auto;\r\n    float: left;\r\n    text-align: center;\r\n}\r\n\r\nsigil > .container {\r\n    width: 130px;\r\n    height: 130px;\r\n    background-size: contain;\r\n    background-image: url("+d+");\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nsigil > .container .sigil-image-placeholder {\r\n    width: 70px;\r\n    height: 35px;\r\n    background-size: contain;\r\n    background-image: url("+p+");\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container .sigil-image {\r\n    width: 70px;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container.active-drag {\r\n    opacity: 0.6;\r\n}",""]);const f=u},7624:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-list > .container {\r\n    padding: 10px;\r\n    padding-right: 0;\r\n}\r\n\r\nspell-list .spells {\r\n    height: 582px;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    padding-left: 25px;\r\n}\r\n\r\nspell-list > .container > .spells > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-list > .container > .spells > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-list .add-item-input-field {\r\n    width: 300px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].range,\r\nspell-list  > .container > .spells > .grid input[type=text].duration,\r\nspell-list  > .container > .spells > .grid input[type=text].target {\r\n    width: 50px;\r\n}\r\n\r\nspell-list .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-list .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-list .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-list .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-list .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-list .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-list .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-list .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-list .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-list .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-list .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-list .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #aaa;\r\n}\r\n\r\nspell-list .co-form ~ .co-form .form-header::before,\r\nspell-list .an-form ~ .an-form .form-header::before,\r\nspell-list .au-form ~ .au-form .form-header::before,\r\nspell-list .aq-form ~ .aq-form .form-header::before,\r\nspell-list .he-form ~ .he-form .form-header::before,\r\nspell-list .vi-form ~ .vi-form .form-header::before,\r\nspell-list .te-form ~ .te-form .form-header::before,\r\nspell-list .ig-form ~ .ig-form .form-header::before,\r\nspell-list .me-form ~ .me-form .form-header::before,\r\nspell-list .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}\r\n",""]);const a=o},6073:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-wishlist {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-wishlist .spells {\r\n    height: 582px;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    padding-left: 25px;\r\n}\r\n\r\nspell-wishlist > .container {\r\n    padding: 10px;\r\n    padding-right: 0;\r\n}\r\n\r\nspell-wishlist > .container > .spells > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-wishlist > .container > .spells > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-wishlist .add-item-input-field {\r\n    width: 300px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-wishlist .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-wishlist .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-wishlist .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-wishlist .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-wishlist .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-wishlist .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-wishlist .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-wishlist .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-wishlist .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-wishlist .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-wishlist .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-wishlist .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #aaa;\r\n}\r\n\r\nspell-wishlist .co-form ~ .co-form .form-header::before,\r\nspell-wishlist .an-form ~ .an-form .form-header::before,\r\nspell-wishlist .au-form ~ .au-form .form-header::before,\r\nspell-wishlist .aq-form ~ .aq-form .form-header::before,\r\nspell-wishlist .he-form ~ .he-form .form-header::before,\r\nspell-wishlist .vi-form ~ .vi-form .form-header::before,\r\nspell-wishlist .te-form ~ .te-form .form-header::before,\r\nspell-wishlist .ig-form ~ .ig-form .form-header::before,\r\nspell-wishlist .me-form ~ .me-form .form-header::before,\r\nspell-wishlist .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}",""]);const a=o},2244:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spellcasting-modifiers-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 1000px;\r\n    float: left;\r\n}\r\n\r\nspellcasting-modifiers-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid .arts {\r\n    width: 60px;\r\n    text-align: center;\r\n}",""]);const a=o},6019:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"talisman-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 2062px;\r\n    float: left;\r\n}\r\n\r\ntalisman-block .effects .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .container > .description {\r\n    width: 800px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .effects.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid > *, talisman-block > .container .effects.grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\ntalisman-block .bonuses, talisman-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\ntalisman-block .bonuses .name {\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .effect .notes {\r\n    width: 400px;\r\n}\r\n\r\ntalisman-block .effect .usages, talisman-block .effect .range, talisman-block .effect .duration, talisman-block .effect .target, talisman-block .effect .arts {\r\n    width: 150px;\r\n}",""]);const a=o},1860:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"vis-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nvis-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nvis-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nvis-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nvis-block .add-item-input-field {\r\n    width: 100px;\r\n}\r\n\r\nvis-block .name {\r\n    width: 100px;\r\n}\r\n\r\nvis-block .income, vis-block .notes {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},2410:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"warping-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n    width: 420px;\r\n}\r\n\r\nwarping-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nwarping-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nwarping-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nwarping-block .warping-level {\r\n    text-align: center;\r\n}",""]);const a=o},8840:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"xp-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nxp-list > .container {\r\n    padding: 10px 30px;\r\n    height: 934px;\r\n    overflow-y: auto;\r\n}\r\n\r\nxp-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 70px 100px auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nxp-list > .container > .grid.past-xp-entry {\r\n    grid-template-columns: 70px 100px auto auto auto auto;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n}\r\n\r\nxp-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nxp-list .description, xp-list .plans {\r\n    width: 400px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nxp-list .xp {\r\n    width: 440px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nxp-list .correspondence, xp-list .area-lore  {\r\n    width: 150px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nxp-list .separator {\r\n    height: 40px;\r\n}\r\n\r\nxp-list .center-button-box {\r\n    text-align: center;\r\n}",""]);const a=o},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,s,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},1667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:t=>{t.exports=function(t){return t[1]}},3379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],h=r[c]||0,u="".concat(c," ").concat(h);r[c]=h+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=s(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var r=i(t=t||[],s=s||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=n(r[o]);e[a].references--}for(var l=i(t,s),c=0;c<r.length;c++){var h=n(r[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=l}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},9811:t=>{t.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 56 28%27 width=%2756%27 height=%2728%27%3E%3Cpath fill=%27%23000000%27 fill-opacity=%270.59%27 d=%27M56 26v2h-7.75c2.3-1.27 4.94-2 7.75-2zm-26 2a2 2 0 1 0-4 0h-4.09A25.98 25.98 0 0 0 0 16v-2c.67 0 1.34.02 2 .07V14a2 2 0 0 0-2-2v-2a4 4 0 0 1 3.98 3.6 28.09 28.09 0 0 1 2.8-3.86A8 8 0 0 0 0 6V4a9.99 9.99 0 0 1 8.17 4.23c.94-.95 1.96-1.83 3.03-2.63A13.98 13.98 0 0 0 0 0h7.75c2 1.1 3.73 2.63 5.1 4.45 1.12-.72 2.3-1.37 3.53-1.93A20.1 20.1 0 0 0 14.28 0h2.7c.45.56.88 1.14 1.29 1.74 1.3-.48 2.63-.87 4-1.15-.11-.2-.23-.4-.36-.59H26v.07a28.4 28.4 0 0 1 4 0V0h4.09l-.37.59c1.38.28 2.72.67 4.01 1.15.4-.6.84-1.18 1.3-1.74h2.69a20.1 20.1 0 0 0-2.1 2.52c1.23.56 2.41 1.2 3.54 1.93A16.08 16.08 0 0 1 48.25 0H56c-4.58 0-8.65 2.2-11.2 5.6 1.07.8 2.09 1.68 3.03 2.63A9.99 9.99 0 0 1 56 4v2a8 8 0 0 0-6.77 3.74c1.03 1.2 1.97 2.5 2.79 3.86A4 4 0 0 1 56 10v2a2 2 0 0 0-2 2.07 28.4 28.4 0 0 1 2-.07v2c-9.2 0-17.3 4.78-21.91 12H30zM7.75 28H0v-2c2.81 0 5.46.73 7.75 2zM56 20v2c-5.6 0-10.65 2.3-14.28 6h-2.7c4.04-4.89 10.15-8 16.98-8zm-39.03 8h-2.69C10.65 24.3 5.6 22 0 22v-2c6.83 0 12.94 3.11 16.97 8zm15.01-.4a28.09 28.09 0 0 1 2.8-3.86 8 8 0 0 0-13.55 0c1.03 1.2 1.97 2.5 2.79 3.86a4 4 0 0 1 7.96 0zm14.29-11.86c1.3-.48 2.63-.87 4-1.15a25.99 25.99 0 0 0-44.55 0c1.38.28 2.72.67 4.01 1.15a21.98 21.98 0 0 1 36.54 0zm-5.43 2.71c1.13-.72 2.3-1.37 3.54-1.93a19.98 19.98 0 0 0-32.76 0c1.23.56 2.41 1.2 3.54 1.93a15.98 15.98 0 0 1 25.68 0zm-4.67 3.78c.94-.95 1.96-1.83 3.03-2.63a13.98 13.98 0 0 0-22.4 0c1.07.8 2.09 1.68 3.03 2.63a9.99 9.99 0 0 1 16.34 0z%27%3E%3C/path%3E%3C/svg%3E"},8390:(t,e,n)=>{t.exports=n.p+"3747d62d05f8f09fb741.png"},3208:(t,e,n)=>{t.exports=n.p+"b037ca7f505f5c048bae.png"},164:(t,e,n)=>{t.exports=n.p+"5c3d1b2ce7bb3793be6e.png"},2:(t,e,n)=>{t.exports=n.p+"2b9f9a8912419b0f4b69.png"},2867:(t,e,n)=>{t.exports=n.p+"fe3a2cf273f4367e50c9.png"},3473:(t,e,n)=>{t.exports=n.p+"60e08010af0453fec957.png"},9462:(t,e,n)=>{t.exports=n.p+"c945e6443b532c587958.png"},8801:(t,e,n)=>{t.exports=n.p+"8a70e34efeda3124235b.png"},2690:(t,e,n)=>{t.exports=n.p+"655dfafec0c29f96b457.png"},1636:(t,e,n)=>{t.exports=n.p+"23490230891f2ec2ff67.png"},9614:(t,e,n)=>{t.exports=n.p+"c803e3dc1beea0f5f1bd.png"},9420:(t,e,n)=>{t.exports=n.p+"9a4458cec57a5f2e20be.png"},5903:(t,e,n)=>{t.exports=n.p+"bfee95e80e68772d2294.png"},429:(t,e,n)=>{t.exports=n.p+"b005e768cef6d6b3f86a.png"},3126:(t,e,n)=>{t.exports=n.p+"b10651e4e1c12543ab81.png"},977:(t,e,n)=>{t.exports=n.p+"700215e7aecd99dc76fa.png"},3011:(t,e,n)=>{t.exports=n.p+"3c63a168bc70cd2daa99.png"},7786:(t,e,n)=>{t.exports=n.p+"ec23475cb092652acfea.png"},3082:(t,e,n)=>{t.exports=n.p+"dd674023209c7164b31e.png"},3320:(t,e,n)=>{t.exports=n.p+"60e9cbcdcaf1332fd7e6.png"},5404:(t,e,n)=>{t.exports=n.p+"15fc2188c91a64ee7eec.png"},7283:(t,e,n)=>{t.exports=n.p+"33cbb501e4e522021025.png"},7552:(t,e,n)=>{t.exports=n.p+"6b7b936e3906da3a44fa.png"},1668:(t,e,n)=>{t.exports=n.p+"92bd8516e50642f8233a.png"},3356:(t,e,n)=>{t.exports=n.p+"5bd76dab3a9d835f39f2.png"},7210:(t,e,n)=>{t.exports=n.p+"08d49720c6fb4a0489a6.png"},5815:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAOFElEQVR4nO2debTVVRXHvzjrc0o7UGopDolK4ZSKijwVKZcRzrrQzJEQy0ZNM2tbmkMuo2ywdGkKqGlphjhh+RQTTEyRLE1T0TD0UDk+BBRbW/Zb3QXv3fs702+6+7PWW++P9zvn7N99+55hTweKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoijh9NPPcEUIZksAIwAMkZ9NAKwLYD0AbwN4DcB8AI8DmA1gGoBZBLu0bO9SFKpYAsGsAeAYAOMA7ODRxcsArgPwM4J9MomQFUIVa5lSHQrgYgCbRuryNgDfINjZkfqrHG2tWASzJoDLZKaKzbsAJgL4GsHaYt80f9pWsQiG90tTAeyReKgFAMYT7I2JxykVbalYBLM6gLsA7JXjsL8A8AWCXZzjmIWxUju8ZC9cmrNSMWMBTCeYjXIetxDabsYimAMB3FygCM8B2I9gny5QhuS0lWLJZv1vEU9/vvC+a0SdT43tthSeUgKlYt4P4G6C2a4EsiShbWYsghkgVvIBJRCnh3kAhhPsP8ohTjzaYsYimFUB3FAypWI2BjCFYNYpgSxRaZel8JICToFZ2QbAJIKp1epRe8UimBMBfL4EojTj02yhL6947tR6j0UwowHcVJEv0CIA2xPsEyWQJZjaKhbBjBBn8KqRu54sVvT/iD9wAwBbAxgmM8/6AX3PYBcTwb4bUd5CWKXqL9CEsxIo1a0APtPLP346gCsk9OY4AN8FsKFH/0MBHALg15HkLYxazlgEYyQ+KjY7EeyfM4w/QJRjT4/x2SK/DcG+nUD+3Kjr5n14gj7/mEWp8J5i2ZcAfALA/R7jcPTqKI92paKuipXCoj3Z5WGC7QZwmOzFXDklgfy5UlfF2iJyf28C+K1rI4KdL/stV/YlmI0jv0Ou1FWx1o3c3ziC/Zdn2ytEMV05IJ74+aOK1ZorCHaSb2OCfYMdzh5NRwbIXDh1VayFkfrh2KkvRegn06Z/OXwyhUpDXRVrUaR+TiJYn2Vsef7p0WYgwawdYexCqKtixciKuZNgfZaw3vCxpPcrYTRGZuqqWHMj9HFRhD568HXzrBdRhlypq2I9E6GP6RH66GGgZ7u1IsqQK3VVrIcj9BFzttjRs90rEWXIlVoqFsE+5WnxbmRYHFlMfwC7eTb32fSXgjoH+t0V2D6WW+UoACt7tHuOYHXGKiG/CxSJ3SqHh3Qg6WanezaPdSIthDorFsdOvRHYB8dY7RTQ/nsAPuDZ9qaAcQuntopFsK9zkkJgN+tI/t/u7uObgwKs9hyTdadn21JQ92SKSz2Nk42wDeoeghmbtQHBsAP5VwFjXlj16oC1T1glmOsBHBGpOw6dOZVgX+hjLP48vyLGVd8v7Rz2ExLsO2GiFks7KNYg+WfFiu9/C8A1AH4J4KGeEGKC2VqKuHUG9M3KtDvB/imSrIXRFin2BHM+gDMSdL1IityuBuCDEfo7m2DPjdBP4bRLJjRHcaaoj7C6FBmJoVS/AXBehH5KQTsVBdmFEyJKmvLGS9/eEidfC3wswpWkC93zOtHRXcLITFaqkRJpWhvaRrGwTLlmdKKDIw22L4E4EOv6KIJ9tQSyRKUda5COLYm7hE+QB9RRqdDGVZPXEpfP3gUMz6HOpxDs1QWMnRttWTVZNslsHb8l56H58DCk7kqFdttjNdKF7rc70XGDzNp7JZ69XxG/Idd5D40TqwR6l87/Sx79HMDmkbtmK/1PAZxLsP+N3HepUcUSpATRaeLrC6lxxbwuGdDfD8igrjSqWMshuXwnADjWwyzxCIArAVwtYTttiypWEwiG3TWfBPAxAB8F0F+SLNaUWelFcXCzkfO+upR5VBRFURRFURRFURRFURRFUQJIbnknmI9I9AD/3gQAp0stlZ/XGh59Xf72qtQQZQfuv6XW1d+rflNDu5FEsQhmFfG3nczxRxG6ZEV7CMA0Thol2L9E6FNJSHTFIpih4ogdlFDuRyV9fhLBLk44juJJVMUimJMA/CTBrVt9weWyzyDYkDoJSgKiKRbBnCxBbUUwlcNcCHZBOykJwXAG9k6y3dhUSib1k60Dp5MtkAvNeZ/6RJ7Rq1EUi2AOBHBzjL4CmCdZL7MLliMpBNMB4GAAXBRuP8nGzgpng88E8IDE3z+W6tLNYMUimM1YQKklVTR8yhxNsF0lkCUqBLORxM2fFCHCtYcXJKGEq+jcG/PkHaRYBMNZPreXLLuYlauTYB8pgSzBEAwr0ZlcPgnAGgmHWiC3/V9CsME3e3grFsHwBv3HkgBaNubLxd0vlVC2zBDM0fLPNjkOy/f+HNhXDbCseCkWwXxI9lQh9TlTc7vsuSp3cbcse1cVuBLMk1n/ad8OnBNWCWZXALNKrlTM/lIKu1IQzGjZsxa5veBLOLtkAvHCacYimH0ATKnQVRzPsyspxp4hNQSzslRZ9i3fnQL2cAz1qYSTecaSstS3Vux+lw8DOLoEcjSFYNaTz7ZMSsUMlvxIZzIplqz5UyXtKQVvSrIoO6u/w07niGOcmEjmmJwvaWZl5AiC+aKrXC2XQqkEPFX2LClg88AIgn2oYUxW+EMATACwUYQxNyPYGFfNRYdgtpU9VZnraLA/dmeCnZO1QZYZ69CESsV8rlGpsKwazFKCvVESRe+JMMaICH2k4vwKFGdh19FEMTFloqliyWx1TkKBJxLs9X2Pbzke61MA/ho4jvPNEnkgJbxHlVG2XmB/5DezPtxqxtoTwDaxJRTYRjK+1UNSy+qEwLG2Dmyfiq9WrMzB6eLCa0krxTrEceCZMsNsB+B4ALdJVOjysAFu/6zHWILlfu91lKWRrQLaJoFghshnVCXYpXRhFnlblaYe6vDSrEQHNQTe8fJ1FcFsIAp6sMx+MwB8nWCfd/xAuUjacMc2PXR4tkvJhIR7K45iuBbAhnLajFn363CC+XarAiitFCvrXcYvs72ot2hOiQG6XH5CmBnQtlSKRTAjA69G6YslorDUUzNewsSP41pdEa8jPrXVNqbVUvi+jAP9IIeKdSHX2JYtEePMyP3xHTzX8YpAsKc3XkTAoTAEe7mcsB+MNN4YUdg+aaVYCzMOlMelja9leCZF26jI3irWbLVQynoPItgxBNvntS6y9eCtRJ+ncAd45tu12eOtlsJXMwbwPRNB2FaExCLZHOTLyrGOzz8osxEbUefKJervyP9loctKwT5TCcXZIIKTezeJQu2VVoo1X3IBW8EvmXop7B/QthSV9sQu6HJ3Is9Ih/URG+VVipLvQSSYcXK4CvmyNj1pt1oKs/rsYtx+1YotAto+noN8WRji+FlNDg246w2CfTZCjftNm/2xlWJlDfTKw7I9OKBtWWLgXc0lExPJwfw+sH3TqNZYipXSl9jDLp7t2Ah7X3xxvHAJjnxTbH6peDaw3w2b/THWUjg6JNowI8M8291cokA/F9cSp2YtSShLqHG2qSsqlmKt/N7SnQiC4WVwgGfvP0ollwdN9yXLETMmrTdSlkBoFd3w3lE2a3bx8QSzXxyxVsA3dv0PBDsrkUw+uHgA5ieWJTSqomlWdZZ4LBef3mSC2dLh+ZaIhfezHk3Z1uMc+ZiYtR26fyuVKASzM4B9A7tpmlqXRbFcXCl8UphGMDGn2eM8zRkTSljuyOXSyxiRsysgdwaF+m3RaqnOolgPOA7I8TozCCb0G8EfAhtev+XRlJMuzwodPwEu2S7DxaAaDckEmhzp6uKmW4wsinWZRC+4sL7MXBPkNlNn5EO4KqPlv5F5Er5TxpSv5xye5QqIX441cEMm0MGRupzW7I8tFUvuLPbZq/STdnMI5ihJkMiE7NOmeAQaLpAAQtdYr7xwPeldLO6XIAhmmMzisTKB7ifYpoeLzFMtwbAj9MgAYXi/c784UufKzNITdbCaZN9uK5vK4R5Z2nMlpb4s7psVIJixcuGmK3zV73kE+5TjeIMlTt3FP5mFI1sVu3NRrHUBPAwg6qkvEhy2fGjZC68RzMDASJBZEvYyqbeCJ5JFM1i+mJxdtUeYxL3CM9/HOZOq2UOuKfbbSySnS7GvlCwRw+zFValFSjCPRNg8LxY/4pPinN9Mwo8HZohYCYGVaQ/JQWiK86mDYMbIyaJoeBkdRbBl8QNmgmDGS53WKsJXEWcqA+BRbcZe65JflpARVVMq4RoHb0aZmOliwvFyRHahe3onOtjvtUNBL34HwV5U0NhBdKF7cSc6lpS4VkNvcEzYSLEQZMJ5xmqAj8F3J3yZvlgktTirDC+FVSnC22PCedGlkbdiyWZ5dMTMjywsXZYhYp/McczoSDjMMbIJLzO8j93Hx4QTFJPThe4lnei4VvxaqZfFV9hqTLBTEo+TC13ofqkTHWx7O6ikIrKdcV+XCjONBGfisnJ1ofuWTnSwT3HnBIVY3xXbDZfZfjRy34XShe7HOtGxitQFKxOzRamcDLKNxHZyriTfwPGSOxeyh+ONIlt3f0iwodVmSg3BXMBlB0oiI5uSxjYmvfqQrNIJwfSXkw/Xf9hRjHh9pXAtlpPH85I/dwfXxapC7dBYEAzbhy4osPoMx9ifSrBXxugs15eQWKC1GwLeOJjtDZ/iqXVEQo2ulNqpqeBIlTniu31MEmY46mIe5xzGGrNKtZnaAgkzOk1MKrGuNoGsBuMI9vY8PkdVrJIiCsZRCWMkQ8nXP7tUEkrOznNlUMWqALKF2FUqLA6RDJtBGe6F5KXuxOVrvOaBKlZFkQjbzSWGbUuJcthKfrPJ5zyJ+tC7tBVFURRFURRFURRFURRFURRFURRFURRFURRFURRFURRFqSQA/geGDEyPNc77PgAAAABJRU5ErkJggg=="}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/sheet-maker/",n.b=document.baseURI||self.location.href,n.nc=void 0;var i={};(()=>{n.d(i,{n:()=>dU});var t={};n.r(t),n.d(t,{default:()=>sA,dependencies:()=>rA,name:()=>nA,register:()=>aA,template:()=>iA});var e={};n.r(e),n.d(e,{DescriptionBlock:()=>dC});var s={};n.r(s),n.d(s,{default:()=>gC,dependencies:()=>vC,name:()=>pC,register:()=>bC,template:()=>fC});var r={};n.r(r),n.d(r,{VirtuesList:()=>wC});var o={};n.r(o),n.d(o,{default:()=>kC,dependencies:()=>SC,name:()=>yC,register:()=>CC,template:()=>xC});var a={};n.r(a),n.d(a,{FlawsList:()=>EC});var l={};n.r(l),n.d(l,{default:()=>OC,dependencies:()=>PC,name:()=>IC,register:()=>MC,template:()=>RC});var c={};n.r(c),n.d(c,{PersonalityTraitsList:()=>UC});var h={};n.r(h),n.d(h,{default:()=>VC,dependencies:()=>DC,name:()=>jC,register:()=>ZC,template:()=>FC});var u={};n.r(u),n.d(u,{WarpingBlock:()=>qC});var d={};n.r(d),n.d(d,{default:()=>_C,dependencies:()=>GC,name:()=>WC,register:()=>YC,template:()=>QC});var p={};n.r(p),n.d(p,{NameBlock:()=>JC});var f={};n.r(f),n.d(f,{default:()=>nE,dependencies:()=>iE,name:()=>tE,register:()=>rE,template:()=>eE});var g={};n.r(g),n.d(g,{Description:()=>oE});var v={};n.r(v),n.d(v,{default:()=>uE,dependencies:()=>dE,name:()=>cE,register:()=>fE,template:()=>hE});var m={};n.r(m),n.d(m,{AbilitiesBlock:()=>gE});var b={};n.r(b),n.d(b,{default:()=>yE,dependencies:()=>xE,name:()=>bE,register:()=>SE,template:()=>wE});var w={};n.r(w),n.d(w,{CharacteristicsBlock:()=>AE});var y={};n.r(y),n.d(y,{default:()=>IE,dependencies:()=>RE,name:()=>TE,register:()=>PE,template:()=>$E});var x={};n.r(x),n.d(x,{FatigueBlock:()=>LE});var k={};n.r(k),n.d(k,{default:()=>jE,dependencies:()=>FE,name:()=>BE,register:()=>DE,template:()=>NE});var S={};n.r(S),n.d(S,{DamageBlock:()=>zE});var A={};n.r(A),n.d(A,{default:()=>WE,dependencies:()=>QE,name:()=>HE,register:()=>GE,template:()=>KE});var C={};n.r(C),n.d(C,{ConfidenceBlock:()=>XE});var E={};n.r(E),n.d(E,{default:()=>nT,dependencies:()=>iT,name:()=>tT,register:()=>rT,template:()=>eT});var T={};n.r(T),n.d(T,{ActiveMagicList:()=>oT});var $={};n.r($),n.d($,{default:()=>uT,dependencies:()=>dT,name:()=>cT,register:()=>fT,template:()=>hT});var I={};n.r(I),n.d(I,{PhysicalPenaltyBlock:()=>gT});var R={};n.r(R),n.d(R,{default:()=>bT,dependencies:()=>wT,name:()=>vT,register:()=>xT,template:()=>mT});var O={};n.r(O),n.d(O,{Stats:()=>kT});var P={};n.r(P),n.d(P,{default:()=>TT,dependencies:()=>$T,name:()=>CT,register:()=>RT,template:()=>ET});var L={};n.r(L),n.d(L,{ArtsBlock:()=>OT});var M={};n.r(M),n.d(M,{default:()=>BT,dependencies:()=>NT,name:()=>MT,register:()=>FT,template:()=>UT});var U={};n.r(U),n.d(U,{SpellcastingModifiersBlock:()=>VT});var B={};n.r(B),n.d(B,{default:()=>HT,dependencies:()=>KT,name:()=>ZT,register:()=>QT,template:()=>qT});var N={};n.r(N),n.d(N,{default:()=>JT,dependencies:()=>t$,name:()=>XT,register:()=>n$,template:()=>YT});var j={};n.r(j),n.d(j,{SpellList:()=>r$});var F={};n.r(F),n.d(F,{default:()=>h$,dependencies:()=>u$,name:()=>l$,register:()=>p$,template:()=>c$});var V={};n.r(V),n.d(V,{SpellWishlist:()=>f$});var D={};n.r(D),n.d(D,{default:()=>w$,dependencies:()=>y$,name:()=>m$,register:()=>k$,template:()=>b$});var z={};n.r(z),n.d(z,{Sigil:()=>S$});var Z={};n.r(Z),n.d(Z,{default:()=>E$,dependencies:()=>T$,name:()=>A$,register:()=>I$,template:()=>C$});var q={};n.r(q),n.d(q,{Magic:()=>R$});var H={};n.r(H),n.d(H,{default:()=>U$,dependencies:()=>B$,name:()=>L$,register:()=>j$,template:()=>M$});var K={};n.r(K),n.d(K,{LabStats:()=>F$});var W={};n.r(W),n.d(W,{default:()=>q$,dependencies:()=>H$,name:()=>z$,register:()=>W$,template:()=>Z$});var Q={};n.r(Q),n.d(Q,{default:()=>Y$,dependencies:()=>J$,name:()=>G$,register:()=>eI,template:()=>X$});var _={};n.r(_),n.d(_,{ResearchProjects:()=>sI});var G={};n.r(G),n.d(G,{default:()=>cI,dependencies:()=>hI,name:()=>aI,register:()=>dI,template:()=>lI});var X={};n.r(X),n.d(X,{LabModificationsList:()=>pI});var Y={};n.r(Y),n.d(Y,{default:()=>bI,dependencies:()=>wI,name:()=>vI,register:()=>xI,template:()=>mI});var J={};n.r(J),n.d(J,{LabDescriptionBlock:()=>kI});var tt={};n.r(tt),n.d(tt,{default:()=>CI,dependencies:()=>EI,name:()=>SI,register:()=>$I,template:()=>AI});var et={};n.r(et),n.d(et,{Lab:()=>II});var nt={};n.r(nt),n.d(nt,{default:()=>MI,dependencies:()=>UI,name:()=>PI,register:()=>NI,template:()=>LI});var it={};n.r(it),n.d(it,{CarriedBelongingsBlock:()=>jI});var st={};n.r(st),n.d(st,{default:()=>ZI,dependencies:()=>qI,name:()=>DI,register:()=>KI,template:()=>zI});var rt={};n.r(rt),n.d(rt,{SanctumBelongingsBlock:()=>WI});var ot={};n.r(ot),n.d(ot,{default:()=>YI,dependencies:()=>JI,name:()=>GI,register:()=>eR,template:()=>XI});var at={};n.r(at),n.d(at,{VisBlock:()=>nR});var lt={};n.r(lt),n.d(lt,{default:()=>rR,dependencies:()=>oR,name:()=>iR,register:()=>lR,template:()=>sR});var ct={};n.r(ct),n.d(ct,{Belongings:()=>cR});var ht={};n.r(ht),n.d(ht,{default:()=>fR,dependencies:()=>gR,name:()=>dR,register:()=>mR,template:()=>pR});var ut={};n.r(ut),n.d(ut,{NotesBlock:()=>bR});var dt={};n.r(dt),n.d(dt,{default:()=>SR,dependencies:()=>AR,name:()=>xR,register:()=>ER,template:()=>kR});var pt={};n.r(pt),n.d(pt,{BackgroundBlock:()=>TR});var ft={};n.r(ft),n.d(ft,{default:()=>PR,dependencies:()=>LR,name:()=>RR,register:()=>UR,template:()=>OR});var gt={};n.r(gt),n.d(gt,{QuestList:()=>BR});var vt={};n.r(vt),n.d(vt,{default:()=>DR,dependencies:()=>zR,name:()=>FR,register:()=>qR,template:()=>VR});var mt={};n.r(mt),n.d(mt,{NpcList:()=>HR});var bt={};n.r(bt),n.d(bt,{default:()=>QR,dependencies:()=>_R,name:()=>KR,register:()=>XR,template:()=>WR});var wt={};n.r(wt),n.d(wt,{Notes:()=>YR});var yt={};n.r(yt),n.d(yt,{default:()=>iO,dependencies:()=>sO,name:()=>eO,register:()=>oO,template:()=>nO});var xt={};n.r(xt),n.d(xt,{XpList:()=>aO});var kt={};n.r(kt),n.d(kt,{default:()=>dO,dependencies:()=>pO,name:()=>hO,register:()=>gO,template:()=>uO});var St={};n.r(St),n.d(St,{AgeBlock:()=>vO});var At={};n.r(At),n.d(At,{default:()=>wO,dependencies:()=>yO,name:()=>mO,register:()=>kO,template:()=>bO});var Ct={};n.r(Ct),n.d(Ct,{Progression:()=>SO});var Et={};n.r(Et),n.d(Et,{default:()=>$O,dependencies:()=>IO,name:()=>EO,register:()=>OO,template:()=>TO});var Tt={};n.r(Tt),n.d(Tt,{TalismanBlock:()=>PO});var $t={};n.r($t),n.d($t,{default:()=>NO,dependencies:()=>jO,name:()=>UO,register:()=>VO,template:()=>BO});var It={};n.r(It),n.d(It,{MagicItemsBlock:()=>DO});var Rt={};n.r(Rt),n.d(Rt,{default:()=>KO,dependencies:()=>WO,name:()=>qO,register:()=>_O,template:()=>HO});var Ot={};n.r(Ot),n.d(Ot,{FamiliarBlock:()=>GO});var Pt={};n.r(Pt),n.d(Pt,{default:()=>JO,dependencies:()=>tP,name:()=>XO,register:()=>nP,template:()=>YO});var Lt={};n.r(Lt),n.d(Lt,{Enchantments:()=>iP});var Mt={};n.r(Mt),n.d(Mt,{default:()=>lP,dependencies:()=>cP,name:()=>oP,register:()=>uP,template:()=>aP});var Ut={};n.r(Ut),n.d(Ut,{CharacterTypeSelector:()=>dP});var Bt={};n.r(Bt),n.d(Bt,{default:()=>gP,dependencies:()=>vP,name:()=>pP,register:()=>bP,template:()=>fP});var Nt={};n.r(Nt),n.d(Nt,{Settings:()=>wP});var jt={};n.r(jt),n.d(jt,{default:()=>kP,dependencies:()=>SP,name:()=>yP,register:()=>CP,template:()=>xP});var Ft={};n.r(Ft),n.d(Ft,{default:()=>OP,dependencies:()=>PP,name:()=>IP,register:()=>MP,template:()=>RP});var Vt={};n.r(Vt),n.d(Vt,{default:()=>DP,dependencies:()=>zP,name:()=>FP,register:()=>qP,template:()=>VP});var Dt={};n.r(Dt),n.d(Dt,{default:()=>GP,dependencies:()=>XP,name:()=>QP,register:()=>JP,template:()=>_P});var zt={};n.r(zt),n.d(zt,{default:()=>rL,dependencies:()=>oL,name:()=>iL,register:()=>lL,template:()=>sL});var Zt={};n.r(Zt),n.d(Zt,{default:()=>fL,dependencies:()=>gL,name:()=>dL,register:()=>mL,template:()=>pL});var qt={};n.r(qt),n.d(qt,{default:()=>SL,dependencies:()=>AL,name:()=>xL,register:()=>EL,template:()=>kL});var Ht={};n.r(Ht),n.d(Ht,{default:()=>PL,dependencies:()=>LL,name:()=>RL,register:()=>UL,template:()=>OL});var Kt={};n.r(Kt),n.d(Kt,{default:()=>DL,dependencies:()=>zL,name:()=>FL,register:()=>qL,template:()=>VL});var Wt={};n.r(Wt),n.d(Wt,{default:()=>GL,dependencies:()=>XL,name:()=>QL,register:()=>JL,template:()=>_L});var Qt={};n.r(Qt),n.d(Qt,{default:()=>rM,dependencies:()=>oM,name:()=>iM,register:()=>lM,template:()=>sM});var _t={};n.r(_t),n.d(_t,{default:()=>fM,dependencies:()=>gM,name:()=>dM,register:()=>mM,template:()=>pM});var Gt={};n.r(Gt),n.d(Gt,{default:()=>SM,dependencies:()=>AM,name:()=>xM,register:()=>EM,template:()=>kM});var Xt={};n.r(Xt),n.d(Xt,{default:()=>PM,dependencies:()=>LM,name:()=>RM,register:()=>UM,template:()=>OM});var Yt={};n.r(Yt),n.d(Yt,{default:()=>zM,dependencies:()=>ZM,name:()=>VM,register:()=>HM,template:()=>DM});var Jt={};n.r(Jt),n.d(Jt,{default:()=>XM,dependencies:()=>YM,name:()=>_M,register:()=>tU,template:()=>GM});var te={};function ee(t){return"object"==typeof t&&null!==t||"function"==typeof t}function ne(t){return null==t}n.r(te),n.d(te,{default:()=>oU,dependencies:()=>aU,name:()=>sU,register:()=>cU,template:()=>rU});let ie=new WeakMap;function se(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function re(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function oe(t,e,n){let i=ie.get(t);if(void 0===i){if(!n)return;i=new Map,ie.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function ae(t,e,n){const i=oe(e,n,!1);return void 0!==i&&i.has(t)}function le(t,e,n){if(ae(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&le(t,i,n)}function ce(t,e,n){const i=oe(e,n,!1);if(void 0!==i)return i.get(t)}function he(t,e,n){if(ae(t,e,n))return ce(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?he(t,i,n):void 0}function ue(t,e,n,i){oe(n,i,!0).set(t,e)}function de(t,e){const n=[],i=oe(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function pe(t,e){const n=de(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=pe(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}function fe(t,e){return function(n,i){if(!ee(n))throw se("@metadata",[t,e,n,i],"target",n,"Object or Function");ue(t,e,n,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(i))}}function ge(t,e,n,i){if(void 0!==n){if(!Array.isArray(t))throw se("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if(!ee(e))throw se("Metadata.decorate",[t,e,n,i],"target",e,"Object or Function");if(!ee(i)&&!ne(i))throw se("Metadata.decorate",[t,e,n,i],"attributes",i,"Object, Function, null, or undefined");return null===i&&(i=void 0),function(t,e,n,i){for(let s=t.length-1;s>=0;--s){const r=(0,t[s])(e,n,i);if(!ne(r)){if(!ee(r))throw se("DecorateProperty",[t,e,n,i],"decorated",r,"Object, Function, null, or undefined");i=r}}return i}(t,e,n=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(n),i)}if(!Array.isArray(t))throw se("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if("function"!=typeof e)throw se("Metadata.decorate",[t,e,n,i],"target",e,"Function");return function(t,e){for(let n=t.length-1;n>=0;--n){const i=(0,t[n])(e);if(!ne(i)){if("function"!=typeof i)throw se("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function ve(t,e,n,i){if(!ee(n))throw se("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return ue(t,e,n,re(i))}function me(t,e,n){if(!ee(e))throw se("Metadata.has",[t,e,n],"target",e,"Object or Function");return le(t,e,re(n))}function be(t,e,n){if(!ee(e))throw se("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return ae(t,e,re(n))}function we(t,e,n){if(!ee(e))throw se("Metadata.get",[t,e,n],"target",e,"Object or Function");return he(t,e,re(n))}function ye(t,e,n){if(!ee(e))throw se("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return ce(t,e,re(n))}function xe(t,e){if(!ee(t))throw se("Metadata.getKeys",[t,e],"target",t,"Object or Function");return pe(t,re(e))}function ke(t,e){if(!ee(t))throw se("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return de(t,re(e))}function Se(t,e,n){if(!ee(e))throw se("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=oe(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,re(n))}const Ae={define:ve,has:me,hasOwn:be,get:we,getOwn:ye,getKeys:xe,getOwnKeys:ke,delete:Se};function Ce(t,e,n,i,s){if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:s,value:n}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}const Ee="[[$au]]";function Te(t,e,n){Ce(t,Ee,ie,e,n),Ce(t,"metadata",fe,e,n),Ce(t,"decorate",ge,e,n),Ce(t,"defineMetadata",ve,e,n),Ce(t,"hasMetadata",me,e,n),Ce(t,"hasOwnMetadata",be,e,n),Ce(t,"getMetadata",we,e,n),Ce(t,"getOwnMetadata",ye,e,n),Ce(t,"getMetadataKeys",xe,e,n),Ce(t,"getOwnMetadataKeys",ke,e,n),Ce(t,"deleteMetadata",Se,e,n)}const $e=Ae.getOwn,Ie=Ae.hasOwn,Re=Ae.define,Oe=t=>"function"==typeof t,Pe=t=>"string"==typeof t,Le=()=>Object.create(null),Me={};function Ue(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=Me[t];if(void 0!==e)return e;const n=t.length;if(0===n)return Me[t]=!1;let i=0,s=0;for(;s<n;++s)if(i=t.charCodeAt(s),0===s&&48===i&&n>1||i<48||i>57)return Me[t]=!1;return Me[t]=!0}default:return!1}}function Be(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function Ne(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const je=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(Le(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function n(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const i=t.length;if(0===i)return t;let s,r=!1,o="",a="",l=0,c=t.charAt(0),h=n(c),u=0;for(;u<i;++u)s=l,a=c,l=h,c=t.charAt(u+1),h=n(c),0===l?o.length>0&&(r=!0):(!r&&o.length>0&&2===l&&(r=3===s||3===h),o+=e(a,r),r=!1);return o}}(),Fe=function(){const t=Le();function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=je(n,e)),i}}(),Ve=function(){const t=Le();return function(e){let n=t[e];return void 0===n&&(n=Fe(e),n.length>0&&(n=n[0].toUpperCase()+n.slice(1)),t[e]=n),n}}(),De=function(){const t=Le();function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=je(n,e)),i}}();function ze(t){const{length:e}=t,n=Array(e);let i=0;for(;i<e;++i)n[i]=t[i];return n}const Ze={};function qe(t){return void 0===Ze[t]&&(Ze[t]=0),++Ze[t]}function He(t,e){return t-e}function Ke(t,e,n){return{configurable:!0,enumerable:n.enumerable,get(){const t=n.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:n.enumerable}),t}}}function We(...t){const e=[];let n=0;const i=t.length;let s,r=0,o=0;for(;o<i;++o)if(s=t[o],void 0!==s){r=s.length;let t=0;for(;t<r;++t)e[n++]=s[t]}return e}function Qe(...t){const e=t.length;let n,i=0;for(;e>i;++i)if(n=t[i],void 0!==n)return n;throw new Error("No default value found")}const _e=function(){const t=Function.prototype,e=Object.getPrototypeOf,n=new WeakMap;let i,s=t,r=0;return function(o){if(i=n.get(o),void 0===i)for(n.set(o,i=[s=o]),r=0;(s=e(s))!==t;)i[++r]=s;return i}}();function Ge(...t){return Object.assign(Le(),...t)}const Xe=function(){const t=new WeakMap;let e=!1,n="",i=0;return function(s){return e=t.get(s),void 0===e&&(n=s.toString(),i=n.length,e=i>=29&&i<=100&&125===n.charCodeAt(i-1)&&n.charCodeAt(i-2)<=32&&93===n.charCodeAt(i-3)&&101===n.charCodeAt(i-4)&&100===n.charCodeAt(i-5)&&111===n.charCodeAt(i-6)&&99===n.charCodeAt(i-7)&&32===n.charCodeAt(i-8)&&101===n.charCodeAt(i-9)&&118===n.charCodeAt(i-10)&&105===n.charCodeAt(i-11)&&116===n.charCodeAt(i-12)&&97===n.charCodeAt(i-13)&&110===n.charCodeAt(i-14)&&88===n.charCodeAt(i-15),t.set(s,e)),e}}();function Ye(t,e){return t instanceof Promise?t.then(e):e(t)}function Je(...t){let e,n,i,s=0,r=t.length;for(;s<r;++s)e=t[s],(e=t[s])instanceof Promise&&(void 0===n?n=e:void 0===i?i=[n,e]:i.push(e));return void 0===i?n:Promise.all(i)}const tn="au:annotation",en=(t,e)=>void 0===e?`${tn}:${t}`:`${tn}:${t}:${e}`,nn=(t,e)=>{const n=$e(tn,t);void 0===n?Re(tn,[e],t):n.push(e)},sn=Object.freeze({name:"au:annotation",appendTo:nn,set(t,e,n){Re(en(e),n,t)},get:(t,e)=>$e(en(e),t),getKeys(t){let e=$e(tn,t);return void 0===e&&Re(tn,e=[],t),e},isKey:t=>t.startsWith(tn),keyFor:en}),rn="au:resource",on=Object.freeze({name:rn,appendTo(t,e){const n=$e(rn,t);void 0===n?Re(rn,[e],t):n.push(e)},has:t=>Ie(rn,t),getAll(t){const e=$e(rn,t);return void 0===e?Xn:e.map((e=>$e(e,t)))},getKeys(t){let e=$e(rn,t);return void 0===e&&Re(rn,e=[],t),e},isKey:t=>t.startsWith(rn),keyFor:(t,e)=>void 0===e?`${rn}:${t}`:`${rn}:${t}:${e}`}),an={annotation:sn,resource:on},ln=Object.prototype.hasOwnProperty;function cn(t,e,n,i){let s=$e(en(t),n);return void 0===s?(s=e[t],void 0===s?(s=n[t],void 0!==s&&ln.call(n,t)?s:i()):s):s}function hn(t,e,n){let i=$e(en(t),e);return void 0===i?(i=e[t],void 0!==i&&ln.call(e,t)?i:n()):i}function un(t,e,n){const i=e[t];return void 0===i?n():i}!function(t,e=!0,n=!1,i=!0,s=!0){if(function(t){return Ee in t}(t)){if(t[Ee]===ie)return;if(t[Ee]instanceof WeakMap)return void(ie=t[Ee]);throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const r=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`)}n&&Te(t,i,s)}else Te(t,i,s)}(Reflect,!1,!1);class dn{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,Hn(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:n,key:i}=this;return this.container=this.key=void 0,n.registerResolver(i,new Pn(i,t,e))}}function pn(t){const e=t.slice(),n=Object.keys(t),i=n.length;let s;for(let r=0;r<i;++r)s=n[r],Ue(s)||(e[s]=t[s]);return e}const fn={none(t){throw Error(`AUR0002:${t.toString()}`)},singleton:t=>new Pn(t,1,t),transient:t=>new Pn(t,2,t)};class gn{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){var e,n;return void 0===t||t===gn.DEFAULT?gn.DEFAULT:new gn(null!==(e=t.inheritParentResources)&&void 0!==e&&e,null!==(n=t.defaultResolver)&&void 0!==n?n:fn.singleton)}}gn.DEFAULT=gn.from({});const vn={createContainer:t=>new zn(null,gn.from(t)),getDesignParamtypes:t=>$e("design:paramtypes",t),getAnnotationParamtypes(t){const e=en("di:paramtypes");return $e(e,t)},getOrCreateAnnotationParamTypes:bn,getDependencies:mn,createInterface(t,e){const n=Oe(t)?t:e,i=Pe(t)?t:void 0,s=function(t,e,n){if(null==t||void 0!==new.target)throw new Error(`AUR0001:${s.friendlyName}`);bn(t)[n]=s};return s.$isInterface=!0,s.friendlyName=null==i?"(anonymous)":i,null!=n&&(s.register=function(t,e){return n(new dn(t,null!=e?e:s))}),s.toString=function(){return`InterfaceSymbol<${s.friendlyName}>`},s},inject:(...t)=>function(e,n,i){if("number"==typeof i){const n=bn(e),s=t[0];void 0!==s&&(n[i]=s)}else if(n){const i=bn(e.constructor),s=t[0];void 0!==s&&(i[n]=s)}else if(i){const e=bn(i.value);let n;for(let i=0;i<t.length;++i)n=t[i],void 0!==n&&(e[i]=n)}else{const n=bn(e);let i;for(let e=0;e<t.length;++e)i=t[e],void 0!==i&&(n[e]=i)}},transient:t=>(t.register=function(e){return Kn.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=Cn)=>(t.register=function(e){return Kn.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)};function mn(t){const e=en("di:dependencies");let n=$e(e,t);if(void 0===n){const i=t.inject;if(void 0===i){const e=vn.getDesignParamtypes(t),i=vn.getAnnotationParamtypes(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);n=Oe(e)&&e!==Function.prototype?pn(mn(e)):[]}else n=pn(i);else if(void 0===i)n=pn(e);else{n=pn(e);let t,s=i.length,r=0;for(;r<s;++r)t=i[r],void 0!==t&&(n[r]=t);const o=Object.keys(i);let a;for(r=0,s=o.length,r=0;r<s;++r)a=o[r],Ue(a)||(n[a]=i[a])}}else n=pn(i);Re(e,n,t),nn(t,e)}return n}function bn(t){const e=en("di:paramtypes");let n=$e(e,t);return void 0===n&&(Re(e,n=[],t),nn(t,e)),n}const wn=vn.createInterface("IContainer"),yn=wn;function xn(t){return function(e){const n=function(t,e,i){vn.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return t(e,n,i)},n}}const kn=vn.inject;function Sn(t){return vn.transient(t)}function An(t){return null==t?Sn:Sn(t)}const Cn={scoped:!1},En=function(t,e){e=!!e;const n=function(t,e,i){vn.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return((t,e,n,i)=>n.getAll(t,i))(t,0,i,e)},n},Tn=(xn(((t,e,n)=>()=>n.get(t))),xn(((t,e,n)=>n.has(t,!0)?n.get(t):void 0)));function $n(t,e,n){vn.inject($n)(t,e,n)}function In(t,e,n){return e.getFactory(t).construct(n)}var Rn,On;$n.$isResolver=!0,$n.resolve=()=>{},xn(((t,e,n)=>(...i)=>e.getFactory(t).construct(n,i))),xn(((t,e,n)=>{const i=In(t,e,n),s=new Wn(String(t),i);return n.registerResolver(t,s,!0),i})),xn(((t,e,n)=>In(t,e,n))),(On=Rn||(Rn={}))[On.instance=0]="instance",On[On.singleton=1]="singleton",On[On.transient=2]="transient",On[On.callback=3]="callback",On[On.array=4]="array",On[On.alias=5]="alias";class Pn{constructor(t,e,n){this.key=t,this.strategy=e,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`AUR0003:${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const n=t.getFactory(this.state);if(null===n)throw new Error(`AUR0004:${String(this.key)}`);return n.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`AUR0005:${this.strategy}`)}}getFactory(t){var e,n,i;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(i=null===(n=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===n?void 0:n.call(e,t))&&void 0!==i?i:null;default:return null}}}function Ln(t){return this.get(t)}function Mn(t,e){return e(t)}class Un{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let n;return n=void 0===e?new this.Type(...this.dependencies.map(Ln,t)):new this.Type(...this.dependencies.map(Ln,t),...e),null==this.transformers?n:this.transformers.reduce(Mn,n)}registerTransformer(t){var e;(null!==(e=this.transformers)&&void 0!==e?e:this.transformers=[]).push(t)}}const Bn={$isResolver:!0,resolve:(t,e)=>e};function Nn(t){return Oe(t.register)}function jn(t){return function(t){return Nn(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}function Fn(t){return void 0!==t.prototype}const Vn=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]);let Dn=0;class zn{constructor(t,e){this.parent=t,this.config=e,this.id=++Dn,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=Le()):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign(Le(),t.res,this.root.res):this.res=Le()),this.u.set(wn,Bn)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw new Error(`AUR0006:${t.map(String)}`);let e,n,i,s,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],ee(e))if(Nn(e))e.register(this);else if(an.resource.has(e)){const t=an.resource.getAll(e);if(1===t.length)t[0].register(this);else for(s=0,r=t.length;r>s;)t[s].register(this),++s}else if(Fn(e))Kn.singleton(e,e).register(this);else for(n=Object.keys(e),s=0,r=n.length;s<r;++s)i=e[n[s]],ee(i)&&(Nn(i)?i.register(this):this.register(i));return--this.t,this}registerResolver(t,e,n=!1){Qn(t);const i=this.u,s=i.get(t);if(null==s){if(i.set(t,e),function(t){return Pe(t)&&t.indexOf(":")>0}(t)){if(void 0!==this.res[t])throw new Error(`AUR0007:${t}`);this.res[t]=e}}else s instanceof Pn&&4===s.strategy?s.state.push(e):i.set(t,new Pn(t,4,[s,e]));return n&&this.i.set(t,e),e}registerTransformer(t,e){const n=this.getResolver(t);if(null==n)return!1;if(n.getFactory){const t=n.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(Qn(t),void 0!==t.resolve)return t;let n,i=this;for(;null!=i;){if(n=i.u.get(t),null!=n)return n;if(null==i.parent){const n=jn(t)?this:i;return e?this.R(t,n):null}i=i.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(Qn(t),t.$isResolver)return t.resolve(this,this);let e,n=this;for(;null!=n;){if(e=n.u.get(t),null!=e)return e.resolve(n,this);if(null==n.parent){const i=jn(t)?this:n;return e=this.R(t,i),e.resolve(n,this)}n=n.parent}throw new Error(`AUR0008:${String(t)}`)}getAll(t,e=!1){Qn(t);const n=this;let i,s=n;if(e){let e=Xn;for(;null!=s;)i=s.u.get(t),null!=i&&(e=e.concat(_n(i,s,n))),s=s.parent;return e}for(;null!=s;){if(i=s.u.get(t),null!=i)return _n(i,s,n);if(s=s.parent,null==s)return Xn}return Xn}invoke(t,e){if(Xe(t))throw Gn(t);return void 0===e?new t(...mn(t).map(Ln,this)):new t(...mn(t).map(Ln,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(Xe(t))throw Gn(t);this.h.set(t,e=new Un(t,mn(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===gn.DEFAULT?new zn(this,this.config):new zn(this,gn.from({...this.config,inheritParentResources:!1})):new zn(this,gn.from(null!=t?t:this.config))}disposeResolvers(){const t=this.u,e=this.i;let n,i;for([i,n]of e.entries())n.dispose(),t.delete(i);e.clear()}find(t,e){const n=t.keyFrom(e);let i=this.res[n];if(void 0===i&&(i=this.root.res[n],void 0===i))return null;if(null===i)return null;if(Oe(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const n=$e(t.name,e.Type);return void 0===n?null:n}return null}create(t,e){var n,i;const s=t.keyFrom(e);let r=this.res[s];return void 0===r?(r=this.root.res[s],void 0===r?null:null!==(n=r.resolve(this.root,this))&&void 0!==n?n:null):null!==(i=r.resolve(this,this))&&void 0!==i?i:null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}R(t,e){if(!Oe(t))throw new Error(`AUR0009:${t}`);if(Vn.has(t.name))throw new Error(`AUR0010:${t.name}`);if(Nn(t)){const n=t.register(e,t);if(!(n instanceof Object)||null==n.resolve){const n=e.u.get(t);if(null!=n)return n;throw new Error("AUR0011")}return n}if(an.resource.has(t)){const n=an.resource.getAll(t);if(1===n.length)n[0].register(e);else{const t=n.length;for(let i=0;i<t;++i)n[i].register(e)}const i=e.u.get(t);if(null!=i)return i;throw new Error("AUR0011")}if(t.$isInterface)throw new Error(`AUR0012:${t.friendlyName}`);{const n=this.config.defaultResolver(t,e);return e.u.set(t,n),n}}}class Zn{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const qn=new WeakMap;function Hn(t){return function(e,n,i){let s=qn.get(e);if(void 0===s&&qn.set(e,s=new WeakMap),s.has(i))return s.get(i);const r=t(e,n,i);return s.set(i,r),r}}const Kn={instance:(t,e)=>new Pn(t,0,e),singleton:(t,e)=>new Pn(t,1,e),transient:(t,e)=>new Pn(t,2,e),callback:(t,e)=>new Pn(t,3,e),cachedCallback:(t,e)=>new Pn(t,3,Hn(e)),aliasTo:(t,e)=>new Pn(e,5,t),defer:(t,...e)=>new Zn(t,e)};class Wn{constructor(t,e){this.C=null,this.$=t,void 0!==e&&(this.C=e)}get friendlyName(){return this.$}prepare(t){this.C=t}get $isResolver(){return!0}resolve(){if(null==this.C)throw new Error(`AUR0013:${this.$}`);return this.C}dispose(){this.C=null}}function Qn(t){if(null==t)throw new Error("AUR0014")}function _n(t,e,n){if(t instanceof Pn&&4===t.strategy){const i=t.state;let s=i.length;const r=new Array(s);for(;s--;)r[s]=i[s].resolve(e,n);return r}return[t.resolve(e,n)]}function Gn(t){return new Error(`AUR0015:${t.name}`)}const Xn=Object.freeze([]),Yn=Object.freeze({});function Jn(){}const ti=vn.createInterface("IPlatform");function ei(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function ni(t,e){return function(n,i){e(n,i,t)}}var ii,si;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(ii||(ii={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(si||(si={}));const ri=vn.createInterface("ILogConfig",(t=>t.instance(new di(0,3)))),oi=vn.createInterface("ISink"),ai=vn.createInterface("ILogEventFactory",(t=>t.singleton(vi))),li=vn.createInterface("ILogger",(t=>t.singleton(bi))),ci=vn.createInterface("ILogScope"),hi=Object.freeze({key:en("logger-sink-handles"),define(t,e){return Re(this.key,e.handles,t.prototype),t},getHandles(t){return Ae.get(this.key,t)}}),ui=Ge({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class di{constructor(t,e){this.colorOptions=t,this.level=e}}const pi=function(){const t=[Ge({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),Ge({TRC:ui.grey("TRC"),DBG:ui.grey("DBG"),INF:ui.white("INF"),WRN:ui.yellow("WRN"),ERR:ui.red("ERR"),FTL:ui.red("FTL"),QQQ:ui.grey("???")})];return function(e,n){return e<=0?t[n].TRC:e<=1?t[n].DBG:e<=2?t[n].INF:e<=3?t[n].WRN:e<=4?t[n].ERR:e<=5?t[n].FTL:t[n].QQQ}}();function fi(t,e){return 0===e?new Date(t).toISOString():ui.grey(new Date(t).toISOString())}class gi{constructor(t,e,n,i,s,r){this.severity=t,this.message=e,this.optionalParams=n,this.scope=i,this.colorOptions=s,this.timestamp=r}toString(){const{severity:t,message:e,scope:n,colorOptions:i,timestamp:s}=this;return 0===n.length?`${fi(s,i)} [${pi(t,i)}] ${e}`:`${fi(s,i)} [${pi(t,i)} ${function(t,e){return 0===e?t.join("."):t.map(ui.cyan).join(".")}(n,i)}] ${e}`}}let vi=class{constructor(t){this.config=t}createLogEvent(t,e,n,i){return new gi(e,n,i,t.scope,this.config.colorOptions,Date.now())}};vi=ei([ni(0,ri)],vi);let mi=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const n=t.optionalParams;if(void 0===n||0===n.length){const n=t.toString();switch(t.severity){case 0:case 1:return e.debug(n);case 2:return e.info(n);case 3:return e.warn(n);case 4:case 5:return e.error(n)}}else{let i=t.toString(),s=0;for(;i.includes("%s");)i=i.replace("%s",String(n[s++]));switch(t.severity){case 0:case 1:return e.debug(i,...n.slice(s));case 2:return e.info(i,...n.slice(s));case 3:return e.warn(i,...n.slice(s));case 4:case 5:return e.error(i,...n.slice(s))}}}}static register(e){Kn.singleton(oi,t).register(e)}};mi=ei([ni(0,ti)],mi);let bi=class t{constructor(t,e,n,i=[],s=null){var r,o,a,l,c,h;let u,d,p,f,g,v;if(this.config=t,this.factory=e,this.scope=i,this.scopedLoggers=Le(),null===s){this.root=this,this.parent=this,u=this.traceSinks=[],d=this.debugSinks=[],p=this.infoSinks=[],f=this.warnSinks=[],g=this.errorSinks=[],v=this.fatalSinks=[];for(const t of n){const e=hi.getHandles(t);(null===(r=null==e?void 0:e.includes(0))||void 0===r||r)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&d.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&p.push(t),(null===(l=null==e?void 0:e.includes(3))||void 0===l||l)&&f.push(t),(null===(c=null==e?void 0:e.includes(4))||void 0===c||c)&&g.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&v.push(t)}}else this.root=s.root,this.parent=s,u=this.traceSinks=s.traceSinks,d=this.debugSinks=s.debugSinks,p=this.infoSinks=s.infoSinks,f=this.warnSinks=s.warnSinks,g=this.errorSinks=s.errorSinks,v=this.fatalSinks=s.fatalSinks}trace(t,...e){this.config.level<=0&&this.emit(this.traceSinks,0,t,e)}debug(t,...e){this.config.level<=1&&this.emit(this.debugSinks,1,t,e)}info(t,...e){this.config.level<=2&&this.emit(this.infoSinks,2,t,e)}warn(t,...e){this.config.level<=3&&this.emit(this.warnSinks,3,t,e)}error(t,...e){this.config.level<=4&&this.emit(this.errorSinks,4,t,e)}fatal(t,...e){this.config.level<=5&&this.emit(this.fatalSinks,5,t,e)}scopeTo(e){const n=this.scopedLoggers;let i=n[e];return void 0===i&&(i=n[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),i}emit(t,e,n,i){const s=Oe(n)?n():n,r=this.factory.createLogEvent(this,e,s,i);for(let e=0,n=t.length;e<n;++e)t[e].handleEvent(r)}};function wi(t){return t}ei([Ke],bi.prototype,"trace",null),ei([Ke],bi.prototype,"debug",null),ei([Ke],bi.prototype,"info",null),ei([Ke],bi.prototype,"warn",null),ei([Ke],bi.prototype,"error",null),ei([Ke],bi.prototype,"fatal",null),bi=ei([ni(0,ri),ni(1,ai),ni(2,En(oi)),ni(3,Tn(ci)),ni(4,$n)],bi),Ge({create:({level:t=3,colorOptions:e=0,sinks:n=[]}={})=>Ge({register(i){i.register(Kn.instance(ri,new di(e,t)));for(const t of n)Oe(t)?i.register(Kn.singleton(oi,t)):i.register(t);return i}})}),vn.createInterface((t=>t.singleton(xi)));class yi{constructor(t){this.$transform=t,this.A=new Map,this.j=new Map}transform(t){if(t instanceof Promise)return this.I(t);if("object"==typeof t&&null!==t)return this.O(t);throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`)}I(t){if(this.A.has(t))return this.A.get(t);const e=t.then((t=>this.O(t)));return this.A.set(t,e),e.then((e=>{this.A.set(t,e)})),e}O(t){if(this.j.has(t))return this.j.get(t);const e=this.$transform(this.M(t));return this.j.set(t,e),e instanceof Promise&&e.then((e=>{this.j.set(t,e)})),e}M(t){let e,n,i,s;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;n=Oe(e.register),i=!1,s=Xn;break;case"function":n=Oe(e.register),i=void 0!==e.prototype,s=an.resource.getAll(e);break;default:continue}r.push(new Si(o,e,n,i,s))}return new ki(t,r)}}class xi{constructor(){this.transformers=new Map}load(t,e=wi){const n=this.transformers;let i=n.get(e);return void 0===i&&n.set(e,i=new yi(e)),i.transform(t)}dispose(){this.transformers.clear()}}class ki{constructor(t,e){this.raw=t,this.items=e}}class Si{constructor(t,e,n,i,s){this.key=t,this.value=e,this.isRegistry=n,this.isConstructable=i,this.definitions=s}}class Ai{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}const Ci=vn.createInterface("IEventAggregator",(t=>t.singleton(Ei)));class Ei{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw new Error(`Invalid channel name or instance: ${t}.`);if(Pe(t)){let n=this.eventLookup[t];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)n[i](e,t)}}else{const e=this.messageHandlers.slice();let n=e.length;for(;n-- >0;)e[n].handle(t)}}subscribe(t,e){if(!t)throw new Error(`Invalid channel name or type: ${t}.`);let n,i;return Pe(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),n=e,i=this.eventLookup[t]):(n=new Ai(t,e),i=this.messageHandlers),i.push(n),{dispose(){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const n=this.subscribe(t,(function(t,i){n.dispose(),e(t,i)}));return n}}const Ti=Object.prototype.hasOwnProperty,$i=Reflect.defineProperty,Ii=t=>"function"==typeof t,Ri=t=>"string"==typeof t;function Oi(t,e,n){return $i(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function Pi(t,e,n,i=!1){!i&&Ti.call(t,e)||Oi(t,e,n)}const Li=()=>Object.create(null),Mi=Ae.getOwn,Ui=Ae.hasOwn,Bi=Ae.define,Ni=an.annotation.keyFor,ji=an.resource.keyFor,Fi=an.resource.appendTo;function Vi(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Kn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class Di{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Ti.call(t,e)&&(this[e]=t[e])}static create(t,e){return new Di(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class zi{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new zi(null,t,null==e?Zi.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new zi(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new zi(t,e,Zi.create(e),!1)}}class Zi{constructor(t){this.bindingContext=t}static create(t){return new Zi(t)}}const qi=vn.createInterface("ISignaler",(t=>t.singleton(Hi)));class Hi{constructor(){this.signals=Li()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var Ki;function Wi(t){return function(e){return Ji.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(Ki||(Ki={}));class Qi{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;Ri(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===Gi;return new Qi(e,Qe(Yi(e,"name"),n),We(Yi(e,"aliases"),i.aliases,e.aliases),Ji.keyFrom(n),cn("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Kn.singleton(n,e).register(t);break;case 2:Kn.instance(n,new _i(t,e)).register(t)}Kn.aliasTo(n,e).register(t),Vi(i,Ji,n,t)}}class _i{constructor(t,e){this.ctn=t,this.Type=e,this.deps=vn.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class Gi{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{$i(Gi.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const Xi=ji("binding-behavior"),Yi=(t,e)=>Mi(Ni(e),t),Ji=Object.freeze({name:Xi,keyFrom:t=>`${Xi}:${t}`,isType:t=>Ii(t)&&Ui(Xi,t),define(t,e){const n=Qi.create(t,e);return Bi(Xi,n,n.Type),Bi(Xi,n,n),Fi(e,Xi),n.Type},getDefinition(t){const e=Mi(Xi,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){Bi(Ni(e),n,t)},getAnnotation:Yi});function ts(t){return function(e){return ss.define(t,e)}}class es{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return Ri(t)?(n=t,i={name:n}):(n=t.name,i=t),new es(e,Qe(is(e,"name"),n),We(is(e,"aliases"),i.aliases,e.aliases),ss.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Kn.singleton(n,e).register(t),Kn.aliasTo(n,e).register(t),Vi(i,ss,n,t)}}const ns=ji("value-converter"),is=(t,e)=>Mi(Ni(e),t),ss=Object.freeze({name:ns,keyFrom:t=>`${ns}:${t}`,isType:t=>Ii(t)&&Ui(ns,t),define(t,e){const n=es.create(t,e);return Bi(ns,n,n.Type),Bi(ns,n,n),Fi(e,ns),n.Type},getDefinition(t){const e=Mi(ns,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){Bi(Ni(e),n,t)},getAnnotation:is});var rs;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(rs||(rs={}));class os{constructor(){this.text=""}static unparse(t){const e=new os;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",Ri(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class as{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class ls{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=Ji.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof _i)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(Ii(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return os.unparse(this)}}class cs{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=ss.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(qi);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(qi);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return os.unparse(this)}}class hs{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return os.unparse(this)}}class us{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return os.unparse(this)}}class ds{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return os.unparse(this)}}ds.$this=new ds(0),ds.$parent=new ds(1);class ps{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=Di.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=Di.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return os.unparse(this)}}class fs{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return os.unparse(this)}}class gs{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return os.unparse(this)}}class vs{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=Di.get(e,this.name,this.ancestor,t),o=Ms(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return os.unparse(this)}}class ms{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=Ms(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return os.unparse(this)}}class bs{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(Ii(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return os.unparse(this)}}class ws{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!Ii(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(Be(s)||Be(r))return(s||0)+(r||0);if(Ne(s)||Ne(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return os.unparse(this)}}class ys{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return os.unparse(this)}}class xs{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return os.unparse(this)}}xs.$undefined=new xs(void 0),xs.$null=new xs(null),xs.$true=new xs(!0),xs.$false=new xs(!1),xs.$empty=new xs("");class ks{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return os.unparse(this)}}ks.$empty=new ks(Xn);class Ss{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return os.unparse(this)}}Ss.$empty=new Ss(Xn,Xn);class As{constructor(t,e=Xn){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return os.unparse(this)}}As.$empty=new As([""]);class Cs{constructor(t,e,n,i=Xn){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!Ii(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return os.unparse(this)}}class Es{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return os.unparse(this)}}class Ts{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return os.unparse(this)}}class $s{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return os.unparse(this)}}const Is=Object.prototype.toString;class Rs{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(Is.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${Is.call(e)}`)}}iterate(t,e,n){switch(Is.call(e)){case"[object Array]":return Us(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;Us(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;Us(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;Us(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${Is.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return os.unparse(this)}}class Os{constructor(t,e=Xn){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return os.unparse(this)}}class Ps{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,zi.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return os.unparse(this)}}class Ls{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,zi.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return os.unparse(this)}}function Ms(t,e,n){const i=null==e?null:e[n];if(Ii(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function Us(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}const Bs=vn.createInterface("ICoercionConfiguration");var Ns,js,Fs,Vs,Ds,zs;function Zs(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function qs(t){return null==t?Hs:Hs(t)}function Hs(t){const e=t.prototype;$i(e,"subs",{get:Ws}),Pi(e,"subscribe",Qs),Pi(e,"unsubscribe",_s)}!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(Ns||(Ns={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(js||(js={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(Fs||(Fs={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(Vs||(Vs={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(Ds||(Ds={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(zs||(zs={}));class Ks{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function Ws(){return Oi(this,"subs",new Ks)}function Qs(t){return this.subs.add(t)}function _s(t){return this.subs.remove(t)}function Gs(t){return null==t?Xs:Xs(t)}function Xs(t){const e=t.prototype;$i(e,"queue",{get:Js})}class Ys{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(tr)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function Js(){return Ys.instance}function tr(t,e,n){n.delete(t),t.flush()}Ys.instance=new Ys;class er{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&Ue(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){or=this.h,this.h=this.v,this.subs.notify(this.v,or,this.f)}}class nr{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){or=this.h,this.h=this.v,this.subs.notify(this.v,or,this.f)}}function ir(t){const e=t.prototype;Pi(e,"subscribe",sr,!0),Pi(e,"unsubscribe",rr,!0),Gs(t),qs(t)}function sr(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function rr(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let or;ir(er),ir(nr);const ar=new WeakMap;function lr(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function cr(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function hr(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function ur(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,b,w,y,x,k,S,A=0,C=0;for(;;){if(i-n<=10)return void hr(t,e,n,i,s);A=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[A],h=e[A],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,b=n+1,w=i-1,t[A]=t[b],e[A]=e[b],t[b]=v,e[b]=m;t:for(C=b+1;C<w;C++)if(y=t[C],x=e[C],k=s(y,v),k<0)t[C]=t[b],e[C]=e[b],t[b]=y,e[b]=x,b++;else if(k>0){do{if(w--,w==C)break t;S=t[w],k=s(S,v)}while(k>0);t[C]=t[w],e[C]=e[w],t[w]=y,e[w]=x,k<0&&(y=t[C],x=e[C],t[C]=t[b],e[C]=e[b],t[b]=y,e[b]=x,b++)}i-w<b-n?(ur(t,e,w,i,s),i=b):(ur(t,e,n,b,s),n=w)}}const dr=Array.prototype,pr=dr.push,fr=dr.unshift,gr=dr.pop,vr=dr.shift,mr=dr.splice,br=dr.reverse,wr=dr.sort,yr=["push","unshift","pop","shift","splice","reverse","sort"],xr={push:function(...t){const e=ar.get(this);if(void 0===e)return pr.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=ar.get(this);if(void 0===e)return fr.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;fr.apply(e.indexMap,i);const r=fr.apply(this,t);return e.notify(),r},pop:function(){const t=ar.get(this);if(void 0===t)return gr.call(this);const e=t.indexMap,n=gr.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),gr.call(e),t.notify(),n},shift:function(){const t=ar.get(this);if(void 0===t)return vr.call(this);const e=t.indexMap,n=vr.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),vr.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=ar.get(this);if(void 0===i)return mr.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;mr.call(a,e,n,...i)}else mr.apply(a,t);const h=mr.apply(this,t);return i.notify(),h},reverse:function(){const t=ar.get(this);if(void 0===t)return br.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=ar.get(this);if(void 0===e)return wr.call(this,t),this;const n=this.length;if(n<2)return this;ur(this,e.indexMap,0,n,cr);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&Ii(t)||(t=lr),ur(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of yr)$i(xr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let kr=!1;class Sr{constructor(t){this.type=18,kr||(kr=!0,function(){for(const t of yr)!0!==dr[t].observing&&Oi(dr,t,xr[t])}()),this.indexObservers={},this.collection=t,this.indexMap=Zs(t.length),this.lenObs=void 0,ar.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=Zs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new er(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new Ar(this,t)}}class Ar{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Cr(t){let e=ar.get(t);return void 0===e&&(e=new Sr(t)),e}qs(Sr),qs(Ar);const Er=new WeakMap,Tr=Set.prototype,$r=Tr.add,Ir=Tr.clear,Rr=Tr.delete,Or=["add","clear","delete"],Pr={add:function(t){const e=Er.get(this);if(void 0===e)return $r.call(this,t),this;const n=this.size;return $r.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=Er.get(this);if(void 0===t)return Ir.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Ir.call(this),e.length=0,t.notify()}},delete:function(t){const e=Er.get(this);if(void 0===e)return Rr.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Rr.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},Lr={writable:!0,enumerable:!1,configurable:!0};for(const t of Or)$i(Pr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Mr=!1;class Ur{constructor(t){this.type=34,Mr||(Mr=!0,function(){for(const t of Or)!0!==Tr[t].observing&&$i(Tr,t,{...Lr,value:Pr[t]})}()),this.collection=t,this.indexMap=Zs(t.size),this.lenObs=void 0,Er.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Zs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new nr(this)}}function Br(t){let e=Er.get(t);return void 0===e&&(e=new Ur(t)),e}qs(Ur);const Nr=new WeakMap,jr=Map.prototype,Fr=jr.set,Vr=jr.clear,Dr=jr.delete,zr=["set","clear","delete"],Zr={set:function(t,e){const n=Nr.get(this);if(void 0===n)return Fr.call(this,t,e),this;const i=this.get(t),s=this.size;if(Fr.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=Nr.get(this);if(void 0===t)return Vr.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Vr.call(this),e.length=0,t.notify()}},delete:function(t){const e=Nr.get(this);if(void 0===e)return Dr.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Dr.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},qr={writable:!0,enumerable:!1,configurable:!0};for(const t of zr)$i(Zr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Hr=!1;class Kr{constructor(t){this.type=66,Hr||(Hr=!0,function(){for(const t of zr)!0!==jr[t].observing&&$i(jr,t,{...qr,value:Zr[t]})}()),this.collection=t,this.indexMap=Zs(t.size),this.lenObs=void 0,Nr.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Zs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new nr(this)}}function Wr(t){let e=Nr.get(t);return void 0===e&&(e=new Kr(t)),e}function Qr(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function _r(){return Oi(this,"obs",new to(this))}function Gr(t){let e;if(t instanceof Array)e=Cr(t);else if(t instanceof Set)e=Br(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=Wr(t)}this.obs.add(e)}function Xr(t){this.obs.add(t)}function Yr(){throw new Error("AUR2011:handleChange")}function Jr(){throw new Error("AUR2012:handleCollectionChange")}qs(Kr);class to{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(no,this),this.count=this.o.size}clearAll(){this.o.forEach(eo,this),this.o.clear(),this.count=0}}function eo(t,e){e.unsubscribe(this)}function no(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function io(t){const e=t.prototype;return Pi(e,"observe",Qr,!0),Pi(e,"observeCollection",Gr,!0),Pi(e,"subscribeTo",Xr,!0),$i(e,"obs",{get:_r}),Pi(e,"handleChange",Yr),Pi(e,"handleCollectionChange",Jr),t}function so(t){return null==t?io:io(t)}io(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}});const ro=vn.createInterface("IExpressionParser",(t=>t.singleton(oo)));class oo{constructor(){this.u=Li(),this.A=Li(),this.U=Li()}parse(t,e){let n;switch(e){case 16:return new as(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return xs.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return yo.ip=t,yo.length=t.length,yo.index=0,yo.O=t.charCodeAt(0),xo(yo,0,61,void 0===e?8:e)}}var ao,lo,co,ho;function uo(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(ao||(ao={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(lo||(lo={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(co||(co={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(ho||(ho={}));const po=xs.$false,fo=xs.$true,go=xs.$null,vo=xs.$undefined,mo=ds.$this,bo=ds.$parent;var wo;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(wo||(wo={}));const yo=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function xo(t,e,n,i){if(16===i)return new as(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),So(t);const i=xo(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(uo(Ao(t)));break;default:s+=String.fromCharCode(t.O)}Ao(t)}return n.length?(e.push(s),new Os(e,n)):null}(t);if(So(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=Ro[63&t.$];So(t),s=new ys(n,xo(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(So(t),e++,!$o(t,16393)){if(524288&t.$){const t=511&e;s=0===t?mo:1===t?bo:new ds(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new $s(t.L):(s=new ps(t.L,511&e),e=1024),t.R=!0,So(t);break;case 3076:t.R=!1,So(t),s=mo,e=512;break;case 671751:So(t),s=xo(t,0,62,i),Io(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new Ps(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(So(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return Io(t,1835022),n;function o(){""!==i?(e.push(new Ls(new fs(mo,i),new gs(mo,new xs(r++)),void 0)),i=""):r++}}(t):function(t,e,n){So(t);const i=new Array;for(;1835022!==t.$;)if($o(t,1572876)){if(i.push(vo),1835022===t.$)break}else{if(i.push(xo(t,e,62,-3&n)),!$o(t,1572876))break;if(1835022===t.$)break}return Io(t,1835022),2&n?new Es(i):(t.R=!1,new ks(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(So(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)So(t),Io(t,1572879),i.push(xo(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;So(t),$o(t,1572879)?i.push(xo(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(xo(t,0,450,-3&e)))}}1835018!==t.$&&Io(t,1572876)}return Io(t,1835018),2&e?new Ts(n,i):(t.R=!1,new Ss(n,i))}(t,i),e=0;break;case 540714:s=new As([t.L]),t.R=!1,So(t),e=0;break;case 540715:s=ko(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new xs(t.L),t.R=!1,So(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=Ro[63&t.$],t.R=!1,So(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);So(t);const n=e,i=xo(t,0,61,0);return new Rs(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,So(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,So(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new ps(r,s.ancestor):new fs(s,r);continue;case 671757:t.R=!0,So(t),e=4096,s=new gs(s,xo(t,0,62,i)),Io(t,1835022);break;case 671751:for(t.R=!1,So(t);1835019!==t.$&&(n.push(xo(t,0,62,i)),$o(t,1572876)););Io(t,1835019),s=1024&e?new vs(r,n,s.ancestor):2048&e?new ms(s,r,n):new bs(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new Cs(o,o,s),So(t);break;case 540715:s=ko(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;So(t),s=new ws(Ro[63&r],s,xo(t,e,448&r,i)),t.R=!1}if(63<n)return s;if($o(t,1572880)){const n=xo(t,e,62,i);Io(t,1572879),s=new us(s,n,xo(t,e,62,i)),t.R=!1}if(62<n)return s;if($o(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new hs(s,xo(t,e,62,i))}if(61<n)return s;for(;$o(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;So(t);const r=new Array;for(;$o(t,1572879);)r.push(xo(t,e,62,i));s=new cs(s,n,r)}for(;$o(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;So(t);const r=new Array;for(;$o(t,1572879);)r.push(xo(t,e,62,i));s=new ls(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function ko(t,e,n,i,s){const r=[t.L];Io(t,540715);const o=[xo(t,e,62,n)];for(;540714!==(t.$=To(t));)r.push(t.L),Io(t,540715),o.push(xo(t,e,62,n));return r.push(t.L),t.R=!1,s?(So(t),new Cs(r,r,i,o)):(So(t),new As(r,o))}function So(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=jo[t.O](t)))return;t.$=1572864}function Ao(t){return t.O=t.ip.charCodeAt(++t.index)}function Co(t,e){let n=t.O;if(!1===e){do{n=Ao(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=Ao(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=Ao(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function Eo(t){let e=!0,n="";for(;96!==Ao(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(uo(Ao(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return Ao(t),t.L=n,e?540714:540715}function To(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,Eo(t)}function $o(t,e){return t.$===e&&(So(t),!0)}function Io(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);So(t)}const Ro=[po,fo,go,vo,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Oo=Li();Oo.true=2049,Oo.null=2050,Oo.false=2048,Oo.undefined=2051,Oo.$this=3076,Oo.$parent=3078,Oo.in=1640799,Oo.instanceof=1640800,Oo.typeof=34851,Oo.void=34852,Oo.of=1051180;const Po=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Lo=[48,58];function Mo(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function Uo(t){return e=>(Ao(e),t)}const Bo=t=>{throw new Error(`AUR0168:${t.ip}`)};Bo.notMapped=!0,Mo(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const No=new Uint8Array(65535);Mo(No,null,Po,1),Mo(No,null,Lo,1);const jo=new Array(65535);jo.fill(Bo,0,65535),Mo(jo,null,[0,33,127,161],(t=>(Ao(t),null))),Mo(jo,null,Po,(function(t){for(;No[Ao(t)];);const e=Oo[t.L=t.P];return void 0===e?1024:e})),Mo(jo,null,Lo,(t=>Co(t,!1))),jo[34]=jo[39]=t=>function(t){const e=t.O;Ao(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),Ao(t),n=uo(t.O),Ao(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);Ao(t)}const r=t.ip.slice(s,t.index);Ao(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),jo[96]=t=>Eo(t),jo[33]=t=>61!==Ao(t)?32809:61!==Ao(t)?1638680:(Ao(t),1638682),jo[61]=t=>61!==Ao(t)?1048616:61!==Ao(t)?1638679:(Ao(t),1638681),jo[38]=t=>38!==Ao(t)?1572883:(Ao(t),1638614),jo[124]=t=>124!==Ao(t)?1572884:(Ao(t),1638549),jo[46]=t=>Ao(t)<=57&&t.O>=48?Co(t,!0):16393,jo[60]=t=>61!==Ao(t)?1638747:(Ao(t),1638749),jo[62]=t=>61!==Ao(t)?1638748:(Ao(t),1638750),jo[37]=Uo(1638886),jo[40]=Uo(671751),jo[41]=Uo(1835019),jo[42]=Uo(1638885),jo[43]=Uo(623009),jo[44]=Uo(1572876),jo[45]=Uo(623010),jo[47]=Uo(1638887),jo[58]=Uo(1572879),jo[63]=Uo(1572880),jo[91]=Uo(671757),jo[93]=Uo(1835022),jo[123]=Uo(131080),jo[125]=Uo(1835018);let Fo=null;const Vo=[];let Do=!1;function zo(){return Fo}function Zo(t){if(null==t)throw new Error("AUR0206");if(null==Fo)return Fo=t,Vo[0]=Fo,void(Do=!0);if(Fo===t)throw new Error("AUR0207");Vo.push(t),Fo=t,Do=!0}function qo(t){if(null==t)throw new Error("AUR0208");if(Fo!==t)throw new Error("AUR0209");Vo.pop(),Fo=Vo.length>0?Vo[Vo.length-1]:null,Do=null!=Fo}const Ho=Object.freeze({get current(){return Fo},get connecting(){return Do},enter:Zo,exit:qo,pause:function(){Do=!1},resume:function(){Do=!0}}),Ko=Reflect.get,Wo=Object.prototype.toString,Qo=new WeakMap;function _o(t){switch(Wo.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Go="__raw__";function Xo(t){return _o(t)?Yo(t):t}function Yo(t){var e;return null!==(e=Qo.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?ia:t instanceof Map||t instanceof Set?Ea:na,n=new Proxy(t,e);return Qo.set(t,n),n}(t)}function Jo(t){var e;return null!==(e=t[Go])&&void 0!==e?e:t}function ta(t){return _o(t)&&t[Go]||t}function ea(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const na={get(t,e,n){if(e===Go)return t;const i=zo();return!Do||ea(e)||null==i?Ko(t,e,n):(i.observe(t,e),Xo(Ko(t,e,n)))}},ia={get(t,e,n){if(e===Go)return t;const i=zo();if(!Do||ea(e)||null==i)return Ko(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return sa;case"includes":return aa;case"indexOf":return la;case"lastIndexOf":return ca;case"every":return ra;case"filter":return oa;case"find":return ua;case"findIndex":return ha;case"flat":return da;case"flatMap":return pa;case"join":return fa;case"push":return va;case"pop":return ga;case"reduce":return Aa;case"reduceRight":return Ca;case"reverse":return ya;case"shift":return ma;case"unshift":return ba;case"slice":return Sa;case"splice":return wa;case"some":return xa;case"sort":return ka;case"keys":return Ma;case"values":case Symbol.iterator:return Ua;case"entries":return Ba}return i.observe(t,e),Xo(Ko(t,e,n))},ownKeys(t){var e;return null===(e=zo())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function sa(t,e){var n;const i=Jo(this),s=i.map(((n,i)=>ta(t.call(e,Xo(n),i,this))));return null===(n=zo())||void 0===n||n.observeCollection(i),Xo(s)}function ra(t,e){var n;const i=Jo(this),s=i.every(((n,i)=>t.call(e,Xo(n),i,this)));return null===(n=zo())||void 0===n||n.observeCollection(i),s}function oa(t,e){var n;const i=Jo(this),s=i.filter(((n,i)=>ta(t.call(e,Xo(n),i,this))));return null===(n=zo())||void 0===n||n.observeCollection(i),Xo(s)}function aa(t){var e;const n=Jo(this),i=n.includes(ta(t));return null===(e=zo())||void 0===e||e.observeCollection(n),i}function la(t){var e;const n=Jo(this),i=n.indexOf(ta(t));return null===(e=zo())||void 0===e||e.observeCollection(n),i}function ca(t){var e;const n=Jo(this),i=n.lastIndexOf(ta(t));return null===(e=zo())||void 0===e||e.observeCollection(n),i}function ha(t,e){var n;const i=Jo(this),s=i.findIndex(((n,i)=>ta(t.call(e,Xo(n),i,this))));return null===(n=zo())||void 0===n||n.observeCollection(i),s}function ua(t,e){var n;const i=Jo(this),s=i.find(((e,n)=>t(Xo(e),n,this)),e);return null===(n=zo())||void 0===n||n.observeCollection(i),Xo(s)}function da(){var t;const e=Jo(this);return null===(t=zo())||void 0===t||t.observeCollection(e),Xo(e.flat())}function pa(t,e){var n;const i=Jo(this);return null===(n=zo())||void 0===n||n.observeCollection(i),Yo(i.flatMap(((n,i)=>Xo(t.call(e,Xo(n),i,this)))))}function fa(t){var e;const n=Jo(this);return null===(e=zo())||void 0===e||e.observeCollection(n),n.join(t)}function ga(){return Xo(Jo(this).pop())}function va(...t){return Jo(this).push(...t)}function ma(){return Xo(Jo(this).shift())}function ba(...t){return Jo(this).unshift(...t)}function wa(...t){return Xo(Jo(this).splice(...t))}function ya(...t){var e;const n=Jo(this),i=n.reverse();return null===(e=zo())||void 0===e||e.observeCollection(n),Xo(i)}function xa(t,e){var n;const i=Jo(this),s=i.some(((n,i)=>ta(t.call(e,Xo(n),i,this))));return null===(n=zo())||void 0===n||n.observeCollection(i),s}function ka(t){var e;const n=Jo(this),i=n.sort(t);return null===(e=zo())||void 0===e||e.observeCollection(n),Xo(i)}function Sa(t,e){var n;const i=Jo(this);return null===(n=zo())||void 0===n||n.observeCollection(i),Yo(i.slice(t,e))}function Aa(t,e){var n;const i=Jo(this),s=i.reduce(((e,n,i)=>t(e,Xo(n),i,this)),e);return null===(n=zo())||void 0===n||n.observeCollection(i),Xo(s)}function Ca(t,e){var n;const i=Jo(this),s=i.reduceRight(((e,n,i)=>t(e,Xo(n),i,this)),e);return null===(n=zo())||void 0===n||n.observeCollection(i),Xo(s)}const Ea={get(t,e,n){if(e===Go)return t;const i=zo();if(!Do||ea(e)||null==i)return Ko(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Pa;case"delete":return La;case"forEach":return Ta;case"add":if(t instanceof Set)return Oa;break;case"get":if(t instanceof Map)return Ia;break;case"set":if(t instanceof Map)return Ra;break;case"has":return $a;case"keys":return Ma;case"values":return Ua;case"entries":return Ba;case Symbol.iterator:return t instanceof Map?Ba:Ua}return Xo(Ko(t,e,n))}};function Ta(t,e){var n;const i=Jo(this);return null===(n=zo())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,Xo(n),Xo(i),this)}))}function $a(t){var e;const n=Jo(this);return null===(e=zo())||void 0===e||e.observeCollection(n),n.has(ta(t))}function Ia(t){var e;const n=Jo(this);return null===(e=zo())||void 0===e||e.observeCollection(n),Xo(n.get(ta(t)))}function Ra(t,e){return Xo(Jo(this).set(ta(t),ta(e)))}function Oa(t){return Xo(Jo(this).add(ta(t)))}function Pa(){return Xo(Jo(this).clear())}function La(t){return Xo(Jo(this).delete(ta(t)))}function Ma(){var t;const e=Jo(this);null===(t=zo())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Xo(e),done:i}},[Symbol.iterator](){return this}}}function Ua(){var t;const e=Jo(this);null===(t=zo())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Xo(e),done:i}},[Symbol.iterator](){return this}}}function Ba(){var t;const e=Jo(this);null===(t=zo())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[Xo(e[0]),Xo(e[1])],done:i}},[Symbol.iterator](){return this}}}const Na=Object.freeze({getProxy:Yo,getRaw:Jo,wrap:Xo,unwrap:ta,rawKey:Go});class ja{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new ja(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,$i(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!Ii(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){Fa=this.ov,this.ov=this.v,this.subs.notify(this.v,Fa,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return Zo(this),this.v=ta(this.get.call(this.up?Xo(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,qo(this)}}}let Fa;so(ja),qs(ja),Gs(ja);const Va=vn.createInterface("IDirtyChecker",(t=>t.singleton(Za))),Da={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},za={persistent:!0};class Za{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(Da.disabled)return;if(++this.j<Da.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(Da.throw)throw new Error(`AUR0222:${e}`);return new qa(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,za))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}Za.inject=[ti],Gs(Za);class qa{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}qs(qa);class Ha{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Ka{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}}let Wa;class Qa{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){Wa=this.ov,this.ov=this.v,this.subs.notify(this.v,Wa,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],$i(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&($i(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class _a{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=Ii(n);const s=t[e];this.cb=Ii(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){Wa=this.ov,this.ov=this.v,this.subs.notify(this.v,Wa,this.f)}}qs(Qa),qs(_a),Gs(Qa),Gs(_a);const Ga=new Ka,Xa=vn.createInterface("IObserverLocator",(t=>t.singleton(tl))),Ya=vn.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(li).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new Ja)))));class Ja{handles(){return!1}getObserver(){return Ga}getAccessor(){return Ga}}class tl{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):Ga}getArrayObserver(t){return Cr(t)}getMapObserver(t){return Wr(t)}getSetObserver(t){return Br(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new Ha(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return Cr(t).getLengthObserver();break;case"size":if(t instanceof Map)return Wr(t).getLengthObserver();if(t instanceof Set)return Br(t).getLengthObserver();break;default:if(t instanceof Array&&Ue(e))return Cr(t).getIndexObserver(Number(e))}let o=nl(t,e);if(void 0===o){let n=el(t);for(;null!==n&&(o=nl(n,e),void 0===o);)n=el(n)}if(void 0!==o&&!Ti.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?ja.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new Qa(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?($i(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}tl.inject=[Va,Ya];const el=Object.getPrototypeOf,nl=Object.getOwnPropertyDescriptor;vn.createInterface("IObservation",(t=>t.singleton(il)));class il{constructor(t){this.oL=t}static get inject(){return[Xa]}run(t){const e=new sl(this.oL,t);return e.run(),e}}class sl{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Zo(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,qo(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}so(sl);const rl=new Map;function ol(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}class al{constructor(t,e={}){var n,i,s,r,o,a,l,c,h,u,d,p,f;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,this.decodeURI="decodeURI"in e?e.decodeURI:t.decodeURI,this.decodeURIComponent="decodeURIComponent"in e?e.decodeURIComponent:t.decodeURIComponent,this.encodeURI="encodeURI"in e?e.encodeURI:t.encodeURI,this.encodeURIComponent="encodeURIComponent"in e?e.encodeURIComponent:t.encodeURIComponent,this.Date="Date"in e?e.Date:t.Date,this.Reflect="Reflect"in e?e.Reflect:t.Reflect,this.clearInterval="clearInterval"in e?e.clearInterval:null!==(i=null===(n=t.clearInterval)||void 0===n?void 0:n.bind(t))&&void 0!==i?i:ol("clearInterval"),this.clearTimeout="clearTimeout"in e?e.clearTimeout:null!==(r=null===(s=t.clearTimeout)||void 0===s?void 0:s.bind(t))&&void 0!==r?r:ol("clearTimeout"),this.queueMicrotask="queueMicrotask"in e?e.queueMicrotask:null!==(a=null===(o=t.queueMicrotask)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:ol("queueMicrotask"),this.setInterval="setInterval"in e?e.setInterval:null!==(c=null===(l=t.setInterval)||void 0===l?void 0:l.bind(t))&&void 0!==c?c:ol("setInterval"),this.setTimeout="setTimeout"in e?e.setTimeout:null!==(u=null===(h=t.setTimeout)||void 0===h?void 0:h.bind(t))&&void 0!==u?u:ol("setTimeout"),this.console="console"in e?e.console:t.console,this.performanceNow="performanceNow"in e?e.performanceNow:null!==(f=null===(p=null===(d=t.performance)||void 0===d?void 0:d.now)||void 0===p?void 0:p.bind(t.performance))&&void 0!==f?f:ol("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new cl(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let n=rl.get(t);return void 0===n&&rl.set(t,n=new al(t,e)),n}static set(t,e){rl.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}function ll(t){return t.persistent}class cl{constructor(t,e,n){this.platform=t,this.$request=e,this.$cancel=n,this.t=void 0,this.i=0,this.processing=[],this.pending=[],this.delayed=[],this.flushRequested=!1,this.h=void 0,this.taskPool=[],this.u=0,this.T=0,this.$=0,this.I=()=>{this.flushRequested||(this.flushRequested=!0,this.T=this.platform.performanceNow(),this.$request())},this.M=new gl(t.console)}get isEmpty(){return 0===this.i&&0===this.processing.length&&0===this.pending.length&&0===this.delayed.length}get P(){return 0===this.i&&this.processing.every(ll)&&this.pending.every(ll)&&this.delayed.every(ll)}flush(t=this.platform.performanceNow()){if(this.flushRequested=!1,this.$=t,void 0===this.t){if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}let e;for(;this.processing.length>0;)if((e=this.processing.shift()).run(),1===e.status){if(!0===e.suspend)return this.t=e,void this.I();++this.i}if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}if((this.processing.length>0||this.delayed.length>0||this.i>0)&&this.I(),void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}}else this.I()}cancel(){this.flushRequested&&(this.$cancel(),this.flushRequested=!1)}async yield(){this.isEmpty||(void 0===this.h&&(this.h=yl()),await this.h)}queueTask(t,e){const{delay:n,preempt:i,persistent:s,reusable:r,suspend:o}={...vl,...e};if(i){if(n>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(s)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}0===this.processing.length&&this.I();const a=this.platform.performanceNow();let l;if(r){const e=this.taskPool,c=this.u-1;c>=0?(l=e[c],e[c]=void 0,this.u=c,l.reuse(a,n,i,s,o,t)):l=new fl(this.M,this,a,a+n,i,s,o,r,t)}else l=new fl(this.M,this,a,a+n,i,s,o,r,t);return i?this.processing[this.processing.length]=l:0===n?this.pending[this.pending.length]=l:this.delayed[this.delayed.length]=l,l}remove(t){let e=this.processing.indexOf(t);if(e>-1)this.processing.splice(e,1);else if(e=this.pending.indexOf(t),e>-1)this.pending.splice(e,1);else{if(e=this.delayed.indexOf(t),!(e>-1))throw new Error(`Task #${t.id} could not be found`);this.delayed.splice(e,1)}}returnToPool(t){this.taskPool[this.u++]=t}resetPersistentTask(t){t.reset(this.platform.performanceNow()),t.createdTime===t.queueTime?this.pending[this.pending.length]=t:this.delayed[this.delayed.length]=t}completeAsyncTask(t){var e;if(!0===t.suspend){if(this.t!==t)throw new Error(`Async task completion mismatch: suspenderTask=${null===(e=this.t)||void 0===e?void 0:e.id}, task=${t.id}`);this.t=void 0}else--this.i;if(void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class hl extends Error{constructor(t){super("Task was canceled."),this.task=t}}let ul=0;var dl,pl;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(dl||(dl={}));class fl{constructor(t,e,n,i,s,r,o,a,l){this.taskQueue=e,this.createdTime=n,this.queueTime=i,this.preempt=s,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=l,this.id=++ul,this.R=void 0,this.A=void 0,this.q=void 0,this.C=0,this.M=t}get result(){const t=this.q;if(void 0===t)switch(this.C){case 0:{const t=this.q=yl();return this.R=t.resolve,this.A=t.reject,t}case 1:throw new Error("Trying to await task from within task will cause a deadlock.");case 2:return this.q=Promise.resolve();case 3:return this.q=Promise.reject(new hl(this))}return t}get status(){return this.C}run(t=this.taskQueue.platform.performanceNow()){if(0!==this.C)throw new Error(`Cannot run task in ${this.C} state`);const{persistent:e,reusable:n,taskQueue:i,callback:s,R:r,A:o,createdTime:a}=this;let l;this.C=1;try{l=s(t-a),l instanceof Promise?l.then((t=>{this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),i.completeAsyncTask(this),void 0!==r&&r(t),!this.persistent&&n&&i.returnToPool(this)})).catch((t=>{if(this.persistent||this.dispose(),i.completeAsyncTask(this),void 0===o)throw t;o(t)})):(this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),void 0!==r&&r(l),!this.persistent&&n&&i.returnToPool(this))}catch(t){if(this.persistent||this.dispose(),void 0===o)throw t;o(t)}}cancel(){if(0===this.C){const t=this.taskQueue,e=this.reusable,n=this.A;return t.remove(this),t.isEmpty&&t.cancel(),this.C=3,this.dispose(),e&&t.returnToPool(this),void 0!==n&&n(new hl(this)),!0}return!(1!==this.C||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.C=0,this.R=void 0,this.A=void 0,this.q=void 0}reuse(t,e,n,i,s,r){this.createdTime=t,this.queueTime=t+e,this.preempt=n,this.persistent=i,this.suspend=s,this.callback=r,this.C=0}dispose(){this.callback=void 0,this.R=void 0,this.A=void 0,this.q=void 0}}class gl{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,n){if(e instanceof cl){const i=`processing=${e.processing.length} pending=${e.pending.length} delayed=${e.delayed.length} flushReq=${e.flushRequested} susTask=${!!e.t}`;this.console.log(`${t}[Q.${n}] ${i}`)}else{const i=e.id,s=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,l=e.persistent,c=e.suspend,h=function(t){switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}}(e.C),u=`id=${i} created=${s} queue=${r} preempt=${o} persistent=${l} reusable=${a} status=${h} suspend=${c}`;this.console.log(`${t}[T.${n}] ${u}`)}}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(pl||(pl={}));const vl={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let ml,bl;function wl(t,e){ml=t,bl=e}function yl(){const t=new Promise(wl);return t.resolve=ml,t.reject=bl,t}const xl=new Map;class kl extends al{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver,window,document,location,history,navigator,customElements".split(",").forEach((n=>{this[n]=n in e?e[n]:t[n]})),"fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((n=>{var i,s;this[n]=n in e?e[n]:null!==(s=null===(i=t[n])||void 0===i?void 0:i.bind(t))&&void 0!==s?s:function(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}(n)})),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new cl(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new cl(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let n=xl.get(t);return void 0===n&&xl.set(t,n=new kl(t,e)),n}static set(t,e){xl.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}function Sl(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function Al(t,e){return function(n,i){e(n,i,t)}}const Cl=Ae.getOwn,El=Ae.hasOwn,Tl=Ae.define,{annotation:$l,resource:Il}=an,Rl=$l.keyFor,Ol=Il.keyFor,Pl=Il.appendTo,Ll=$l.appendTo,Ml=$l.getKeys,Ul=()=>Object.create(null),Bl=Object.prototype.hasOwnProperty,Nl=Ul(),jl=(t,e,n)=>{if(!0===Nl[e])return!0;if(!Dl(e))return!1;const i=e.slice(0,5);return Nl[e]="aria-"===i||"data-"===i||n.isStandardSvgAttribute(t,e)},Fl=t=>t instanceof Promise,Vl=t=>"function"==typeof t,Dl=t=>"string"==typeof t,zl=Object.defineProperty,Zl=t=>{throw t};function ql(t,e){let n;function i(t,e){arguments.length>1&&(n.property=e),Tl(Kl,Ql.create(e,t,n),t.constructor,e),Ll(t.constructor,Wl.keyFrom(e))}return arguments.length>1?(n={},void i(t,e)):Dl(t)?(n={},i):(n=void 0===t?{}:t,i)}function Hl(t){return t.startsWith(Kl)}const Kl=Rl("bindable"),Wl=Object.freeze({name:Kl,keyFrom:t=>`${Kl}:${t}`,from(t,...e){const n={},i=Array.isArray;function s(e){n[e]=Ql.create(e,t)}function r(e,i){n[e]=i instanceof Ql?i:Ql.create(e,t,i)}return e.forEach((function(t){i(t)?t.forEach(s):t instanceof Ql?n[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>r(e,t[e])))})),n},for(t){let e;const n={add(i){let s,r;return Dl(i)?(s=i,r={property:s}):(s=i.property,r=i),e=Ql.create(s,t,r),El(Kl,t,s)||Ll(t,Wl.keyFrom(s)),Tl(Kl,e,t,s),n},mode:t=>(e.mode=t,n),callback:t=>(e.callback=t,n),attribute:t=>(e.attribute=t,n),primary:()=>(e.primary=!0,n),set:t=>(e.set=t,n)};return n},getAll(t){const e=Kl.length+1,n=[],i=_e(t);let s,r,o,a,l=i.length,c=0;for(;--l>=0;)for(o=i[l],s=Ml(o).filter(Hl),r=s.length,a=0;a<r;++a)n[c++]=Cl(Kl,o,s[a].slice(e));return n}});class Ql{constructor(t,e,n,i,s,r){this.attribute=t,this.callback=e,this.mode=n,this.primary=i,this.property=s,this.set=r}static create(t,e,n={}){return new Ql(Qe(n.attribute,De(t)),Qe(n.callback,`${t}Changed`),Qe(n.mode,Ns.toView),Qe(n.primary,!1),Qe(n.property,t),Qe(n.set,function(t,e,n={}){var i,s,r;const o=null!==(s=null!==(i=n.type)&&void 0!==i?i:Reflect.getMetadata("design:type",e,t))&&void 0!==s?s:null;if(null==o)return Jn;let a;switch(o){case Number:case Boolean:case String:case BigInt:a=o;break;default:{const t=o.coerce;a="function"==typeof t?t.bind(o):null!==(r=_l.for(o))&&void 0!==r?r:Jn;break}}return a===Jn?a:function(t,e){return function(n,i){var s;return(null==i?void 0:i.enableCoercion)?(null!=e?e:null===(s=null==i?void 0:i.coerceNullish)||void 0===s||!s)&&null==n?n:t(n,i):n}}(a,n.nullable)}(t,e,n)))}}const _l={key:Rl("coercer"),define(t,e){Tl(_l.key,t[e].bind(t),t)},for:t=>Cl(_l.key,t)};class Gl{constructor(t,e,n,i,s,r){this.set=i,this.$controller=s,this.t=r,this.v=void 0,this.ov=void 0,this.f=0;const o=t[n],a=t.propertyChanged,l=this.i=Vl(o),c=this.u=Vl(a),h=this.hs=i!==Jn;let u;this.o=t,this.k=e,this.cb=l?o:Jn,this.C=c?a:Jn,void 0!==this.cb||c||h?(this.iO=!0,u=t[e],this.v=h&&void 0!==u?i(u,this.t):u,this.A()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t,e){this.hs&&(t=this.set(t,this.t));const n=this.v;if(this.iO){if(Object.is(t,n))return;this.v=t,this.ov=n,this.f=e,(null==this.$controller||this.$controller.isBound)&&(this.i&&this.cb.call(this.o,t,n,e),this.u&&this.C.call(this.o,this.k,t,n,e)),this.queue.add(this)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.t):this.o[this.k],this.A()),this.subs.add(t)}flush(){Xl=this.ov,this.ov=this.v,this.subs.notify(this.v,Xl,this.f)}A(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t,0)}})}}let Xl;qs(Gl),Gs(Gl);class Yl{constructor(t,e,n,i){if(this.chars=t,this.repeat=e,this.isSymbol=n,this.isInverted=i,i)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.B;break;default:this.has=this.I}else switch(t.length){case 0:this.has=this.T;break;case 1:this.has=this.P;break;default:this.has=this.$}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}$(t){return this.chars.includes(t)}P(t){return this.chars===t}T(t){return!1}I(t){return!this.chars.includes(t)}B(t){return this.chars!==t}R(t){return!0}}class Jl{constructor(){this.parts=Xn,this.O="",this.L={},this.q={}}get pattern(){const t=this.O;return""===t?null:t}set pattern(t){null==t?(this.O="",this.parts=Xn):(this.O=t,this.parts=this.q[t])}append(t,e){const n=this.L;void 0===n[t]?n[t]=e:n[t]+=e}next(t){const e=this.L;let n;void 0!==e[t]&&(n=this.q,void 0===n[t]?n[t]=[e[t]]:n[t].push(e[t]),e[t]=void 0)}}class tc{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,n=e.length;let i=null,s=0;for(;s<n;++s)if(i=e[s],t.equals(i.charSpec))return i;return null}append(t,e){const n=this.patterns;n.includes(e)||n.push(e);let i=this.findChild(t);return null==i&&(i=new tc(t,e),this.nextStates.push(i),t.repeat&&i.nextStates.push(i)),i}findMatches(t,e){const n=[],i=this.nextStates,s=i.length;let r=0,o=null,a=0,l=0;for(;a<s;++a)if(o=i[a],o.charSpec.has(t))if(n.push(o),r=o.patterns.length,l=0,o.charSpec.isSymbol)for(;l<r;++l)e.next(o.patterns[l]);else for(;l<r;++l)e.append(o.patterns[l],t);return n}}class ec{constructor(t){this.text=t;const e=this.len=t.length,n=this.specs=[];let i=0;for(;e>i;++i)n.push(new Yl(t[i],!1,!1,!1))}eachChar(t){const e=this.len,n=this.specs;let i=0;for(;e>i;++i)t(n[i])}}class nc{constructor(t){this.text="PART",this.spec=new Yl(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class ic{constructor(t){this.text=t,this.spec=new Yl(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class sc{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const rc=vn.createInterface("ISyntaxInterpreter",(t=>t.singleton(oc)));class oc{constructor(){this.rootState=new tc(null),this.initialStates=[this.rootState]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let n,i,s,r,o,a,l,c,h=0;for(;e>h;){for(n=this.rootState,i=t[h],s=i.pattern,r=new sc,o=this.parse(i,r),a=o.length,l=t=>{n=n.append(t,s)},c=0;a>c;++c)o[c].eachChar(l);n.types=r,n.isEndpoint=!0,++h}}interpret(t){const e=new Jl,n=t.length;let i,s=this.initialStates,r=0;for(;r<n&&(s=this.getNextStates(s,t.charAt(r),e),0!==s.length);++r);return s=s.filter(ac),s.length>0&&(s.sort(lc),i=s[0],i.charSpec.isSymbol||e.next(i.pattern),e.pattern=i.pattern),e}getNextStates(t,e,n){const i=[];let s=null;const r=t.length;let o=0;for(;o<r;++o)s=t[o],i.push(...s.findMatches(e,n));return i}parse(t,e){const n=[],i=t.pattern,s=i.length,r=t.symbols;let o=0,a=0,l="";for(;o<s;)l=i.charAt(o),0!==r.length&&r.includes(l)?o!==a?(n.push(new ec(i.slice(a,o))),++e.statics,a=o):(n.push(new ic(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===l&&"PART"===i.slice(o,o+4)?(a=o+=4,n.push(new nc(r)),++e.dynamics):++o;return a!==o&&(n.push(new ec(i.slice(a,o))),++e.statics),n}}function ac(t){return t.isEndpoint}function lc(t,e){const n=t.types,i=e.types;return n.statics!==i.statics?i.statics-n.statics:n.dynamics!==i.dynamics?i.dynamics-n.dynamics:n.symbols!==i.symbols?i.symbols-n.symbols:0}class cc{constructor(t,e,n,i){this.rawName=t,this.rawValue=e,this.target=n,this.command=i}}const hc=vn.createInterface("IAttributePattern"),uc=vn.createInterface("IAttributeParser",(t=>t.singleton(dc)));class dc{constructor(t,e){this.U={},this._=t;const n=this.F={},i=e.reduce(((t,e)=>{const i=mc(e.constructor);return i.forEach((t=>n[t.pattern]=e)),t.concat(i)}),Xn);t.add(i)}parse(t,e){let n=this.U[t];null==n&&(n=this.U[t]=this._.interpret(t));const i=n.pattern;return null==i?new cc(t,e,t,null):this.F[i][i](t,e,n.parts)}}function pc(...t){return function(e){return bc.define(t,e)}}dc.inject=[rc,En(hc)];class fc{constructor(t){this.Type=t,this.name=void 0}register(t){Kn.singleton(hc,this.Type).register(t)}}const gc=Ol("attribute-pattern"),vc="attribute-pattern-definitions",mc=t=>an.annotation.get(t,vc),bc=Object.freeze({name:gc,definitionAnnotationKey:vc,define(t,e){const n=new fc(e);return Tl(gc,n,e),Pl(e,gc),an.annotation.set(e,vc,t),Ll(e,vc),e},getPatternDefinitions:mc});let wc=class{"PART.PART"(t,e,n){return new cc(t,e,n[0],n[1])}"PART.PART.PART"(t,e,n){return new cc(t,e,n[0],n[2])}};wc=Sl([pc({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],wc);let yc=class{ref(t,e,n){return new cc(t,e,"element","ref")}"PART.ref"(t,e,n){return new cc(t,e,n[0],"ref")}};yc=Sl([pc({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],yc);let xc=class{":PART"(t,e,n){return new cc(t,e,n[0],"bind")}};xc=Sl([pc({pattern:":PART",symbols:":"})],xc);let kc=class{"@PART"(t,e,n){return new cc(t,e,n[0],"trigger")}};kc=Sl([pc({pattern:"@PART",symbols:"@"})],kc);let Sc=class{"...$attrs"(t,e,n){return new cc(t,e,"","...$attrs")}};Sc=Sl([pc({pattern:"...$attrs",symbols:""})],Sc);const Ac=ti,Cc=vn.createInterface("ISVGAnalyzer",(t=>t.singleton(Ec)));class Ec{isStandardSvgAttribute(t,e){return!1}}const Tc=vn.createInterface("IAttrMapper",(t=>t.singleton($c)));class $c{constructor(t){this.svg=t,this.fns=[],this.N=Ul(),this.W=Ul(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[Cc]}useMapping(t){var e,n;let i,s,r,o;for(r in t)for(o in i=t[r],s=null!==(e=(n=this.N)[r])&&void 0!==e?e:n[r]=Ul(),i){if(void 0!==s[o])throw Ic(o,r);s[o]=i[o]}}useGlobalMapping(t){const e=this.W;for(const n in t){if(void 0!==e[n])throw Ic(n,"*");e[n]=t[n]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((n=>n(t,e)))}map(t,e){var n,i,s;return null!==(s=null!==(i=null===(n=this.N[t.nodeName])||void 0===n?void 0:n[e])&&void 0!==i?i:this.W[e])&&void 0!==s?s:jl(t,e,this.svg)?e:null}}function Ic(t,e){return new Error(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}class Rc{constructor(t,e,n,i,s){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=s,this.interceptor=this,this.isBound=!1,this.targetObserver=i.getAccessor(e,n)}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(e,"$event"),n}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.targetObserver.setValue((t=>this.interceptor.callSource(t)),t,this.target,this.targetProperty),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t,this.target,this.targetProperty),this.isBound=!1)}observe(t,e){}handleChange(t,e,n){}}class Oc{constructor(t,e,n){this.type=7,this.v=null,this.ov=null,this.H=!1,this.f=0,this.o=t,this.G=e,this.X=n}getValue(){return this.v}setValue(t,e){this.v=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H)switch(this.H=!1,this.ov=this.v,this.X){case"class":this.o.classList.toggle(this.G,!!this.v);break;case"style":{let t="",e=this.v;Dl(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.G,e,t);break}default:null==this.v?this.o.removeAttribute(this.X):this.o.setAttribute(this.X,String(this.v))}}handleMutation(t){let e=!1;for(let n=0,i=t.length;i>n;++n){const i=t[n];if("attributes"===i.type&&i.attributeName===this.G){e=!0;break}}if(e){let t;switch(this.X){case"class":t=this.o.classList.contains(this.G);break;case"style":t=this.o.style.getPropertyValue(this.G);break;default:throw new Error(`AUR0651:${this.X}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.H=!1,this.f=0,this.queue.add(this))}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.G),Pc(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&Lc(this.o,this)}flush(){Bc=this.ov,this.ov=this.v,this.subs.notify(this.v,Bc,this.f)}}qs(Oc),Gs(Oc);const Pc=(t,e,n)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(Mc)).observe(e,{attributes:!0}),e.$eMObs.add(n)},Lc=(t,e)=>{const n=t.$eMObs;return!(!n||!n.delete(e)||(0===n.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},Mc=t=>{t[0].target.$eMObs.forEach(Uc,t)};function Uc(t){t.handleMutation(this)}let Bc;class Nc{constructor(t){this.b=t}handleChange(t,e,n){const i=this.b;t!==i.sourceExpression.evaluate(n,i.$scope,i.locator,null)&&i.updateSource(t,n)}}const{oneTime:jc,toView:Fc,fromView:Vc}=Ns,Dc=Fc|jc,zc={reusable:!1,preempt:!0};class Zc{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.targetAttribute=n,this.targetProperty=i,this.mode=s,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=e,this.p=o.get(Ac),this.oL=r}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;n|=this.persistentFlags;const i=this.mode,s=this.interceptor,r=this.sourceExpression,o=this.$scope,a=this.locator,l=this.targetObserver,c=0==(2&n)&&(4&l.type)>0;let h,u=!1;(10082!==r.$kind||this.obs.count>1)&&(u=0==(i&jc),u&&this.obs.version++,t=r.evaluate(n,o,a,s),u&&this.obs.clear()),t!==this.value&&(this.value=t,c?(h=this.task,this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,s.updateTarget(t,n)}),zc),null==h||h.cancel()):s.updateTarget(t,n))}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);let s=this.targetObserver;s||(s=this.targetObserver=new Oc(this.target,this.targetProperty,this.targetAttribute)),i=this.sourceExpression;const r=this.mode,o=this.interceptor;let a=!1;r&Dc&&(a=(r&Fc)>0,o.updateTarget(this.value=i.evaluate(t,e,this.locator,a?o:null),t)),r&Vc&&s.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new Nc(o)),this.isBound=!0}$unbind(t){var e;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.obs.clearAll(),this.isBound=!1)}}so(Zc);const{toView:qc}=Ns,Hc={reusable:!1,preempt:!0};class Kc{constructor(t,e,n,i,s,r,o){this.interpolation=e,this.target=n,this.targetProperty=i,this.mode=s,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.oL=t,this.targetObserver=t.getAccessor(n,i);const a=e.expressions,l=this.partBindings=Array(a.length),c=a.length;let h=0;for(;c>h;++h)l[h]=new Wc(a[h],n,i,r,t,this)}updateTarget(t,e){const n=this.partBindings,i=this.interpolation.parts,s=n.length;let r="",o=0;if(1===s)r=i[0]+n[0].value+i[1];else for(r=i[0];s>o;++o)r+=n[o].value+i[o+1];const a=this.targetObserver;let l;0==(2&e)&&(4&a.type)>0?(l=this.task,this.task=this.taskQueue.queueTask((()=>{this.task=null,a.setValue(r,e,this.target,this.targetProperty)}),Hc),null==l||l.cancel(),l=null):a.setValue(r,e,this.target,this.targetProperty)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].$bind(t,e);this.updateTarget(void 0,t)}$unbind(t){var e;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].interceptor.$unbind(t);null===(e=this.task)||void 0===e||e.cancel(),this.task=null}}class Wc{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=i,this.owner=r,this.interceptor=this,this.mode=Ns.toView,this.value="",this.task=null,this.isBound=!1,this.oL=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.sourceExpression,s=this.obs;let r=!1;10082===i.$kind&&1===s.count||(r=(this.mode&qc)>0,r&&s.version++,t=i.evaluate(n,this.$scope,this.locator,r?this.interceptor:null),r&&s.clear()),t!=this.value&&(this.value=t,t instanceof Array&&this.observeCollection(t),this.owner.updateTarget(t,n))}handleCollectionChange(t,e){this.owner.updateTarget(void 0,e)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&qc)>0?this.interceptor:null),this.value instanceof Array&&this.observeCollection(this.value)}$unbind(t){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll())}}so(Wc);class Qc{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.locator=n,this.p=s,this.strict=r,this.interceptor=this,this.mode=Ns.toView,this.value="",this.task=null,this.isBound=!1,this.oL=i}updateTarget(t,e){var n,i;const s=this.target,r=this.p.Node,o=this.value;this.value=t,o instanceof r&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o)),t instanceof r?(s.textContent="",null===(i=s.parentNode)||void 0===i||i.insertBefore(t,s)):s.textContent=String(t)}handleChange(t,e,n){var i;if(!this.isBound)return;const s=this.sourceExpression,r=this.obs;let o=!1;if(10082===s.$kind&&1===r.count||(o=(this.mode&qc)>0,o&&r.version++,n|=this.strict?1:0,t=s.evaluate(n,this.$scope,this.locator,o?this.interceptor:null),o&&r.clear()),t===this.value)return null===(i=this.task)||void 0===i||i.cancel(),void(this.task=null);0==(2&n)?this.queueUpdate(t,n):this.updateTarget(t,n)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),t|=this.strict?1:0;const n=this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&qc)>0?this.interceptor:null);n instanceof Array&&this.observeCollection(n),this.updateTarget(n,t)}$unbind(t){var e;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),null===(e=this.task)||void 0===e||e.cancel(),this.task=null)}queueUpdate(t,e){const n=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(t,e)}),Hc),null==n||n.cancel()}}so(Qc);class _c{constructor(t,e,n,i,s=!1){this.sourceExpression=t,this.targetProperty=e,this.locator=i,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.target=null,this.oL=n,this.Y=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.target,s=this.targetProperty,r=i[s];this.obs.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),this.obs.clear(),t!==r&&(i[s]=t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.target=this.Y?e.bindingContext:e.overrideContext;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|t,e,this.locator,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),this.isBound=!1}}so(_c);const{oneTime:Gc,toView:Xc,fromView:Yc}=Ns,Jc=Xc|Gc,th={reusable:!1,preempt:!0};class eh{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.mode=i,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null,this.oL=s}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;const i=0==(2&(n|=this.persistentFlags))&&(4&this.targetObserver.type)>0,s=this.obs;let r=!1;(10082!==this.sourceExpression.$kind||s.count>1)&&(r=this.mode>Gc,r&&s.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),r&&s.clear()),i?(nh=this.task,this.task=this.taskQueue.queueTask((()=>{this.interceptor.updateTarget(t,n),this.task=null}),th),null==nh||nh.cancel(),nh=null):this.interceptor.updateTarget(t,n)}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}t|=1,this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);const s=this.oL,r=this.mode;let o=this.targetObserver;o||(o=r&Yc?s.getObserver(this.target,this.targetProperty):s.getAccessor(this.target,this.targetProperty),this.targetObserver=o),i=this.sourceExpression;const a=this.interceptor,l=(r&Xc)>0;r&Jc&&a.updateTarget(i.evaluate(t,e,this.locator,l?a:null),t),r&Yc&&(o.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new Nc(a)),l||a.updateSource(o.getValue(this.target,this.targetProperty),t)),this.isBound=!0}$unbind(t){this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,nh=this.task,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=nh&&(nh.cancel(),nh=this.task=null),this.obs.clearAll(),this.isBound=!1)}}so(eh);let nh=null;class ih{constructor(t,e,n){this.sourceExpression=t,this.target=e,this.locator=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(t,this.$scope,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,null)===this.target&&e.assign(t,this.$scope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const sh=vn.createInterface("IAppTask");class rh{constructor(t,e,n){this.c=void 0,this.slot=t,this.k=e,this.cb=n}register(t){return this.c=t.register(Kn.instance(sh,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const oh=Object.freeze({beforeCreate:ah("beforeCreate"),hydrating:ah("hydrating"),hydrated:ah("hydrated"),beforeActivate:ah("beforeActivate"),afterActivate:ah("afterActivate"),beforeDeactivate:ah("beforeDeactivate"),afterDeactivate:ah("afterDeactivate")});function ah(t){return function(e,n){return Vl(n)?new rh(t,e,n):new rh(t,null,e)}}function lh(t){return t.startsWith(ch)}const ch=Rl("children-observer"),hh=Object.freeze({name:ch,keyFrom:t=>`${ch}:${t}`,from(...t){const e={},n=Array.isArray;function i(t){e[t]=dh.create(t)}function s(t,n){e[t]=dh.create(t,n)}return t.forEach((function(t){n(t)?t.forEach(i):t instanceof dh?e[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>s(e,t)))})),e},getAll(t){const e=ch.length+1,n=[],i=_e(t);let s,r,o,a=i.length,l=0;for(;--a>=0;){o=i[a],s=Ml(o).filter(lh),r=s.length;for(let t=0;t<r;++t)n[l++]=Cl(ch,o,s[t].slice(e))}return n}}),uh={childList:!0};class dh{constructor(t,e,n,i,s,r){this.callback=t,this.property=e,this.options=n,this.query=i,this.filter=s,this.map=r}static create(t,e={}){var n;return new dh(Qe(e.callback,`${t}Changed`),Qe(e.property,t),null!==(n=e.options)&&void 0!==n?n:uh,e.query,e.filter,e.map)}}class ph{constructor(t,e,n,i,s=fh,r=gh,o=vh,a){this.controller=t,this.obj=e,this.propertyKey=n,this.query=s,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[i],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){var t;this.observing||(this.observing=!0,this.children=this.get(),(null!==(t=this.observer)&&void 0!==t?t:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.Z()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=Xn)}Z(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(t,e,n,i){var s;const r=e(t),o=r.length,a=[];let l,c,h,u=0;for(;u<o;++u)l=r[u],c=zh.for(l,mh),h=null!==(s=null==c?void 0:c.viewModel)&&void 0!==s?s:null,n(l,c,h)&&a.push(i(l,c,h));return a}(this.controller,this.query,this.filter,this.map)}}function fh(t){return t.host.childNodes}function gh(t,e,n){return!!n}function vh(t,e,n){return n}qs()(ph);const mh={optional:!0};function bh(t){return function(e){return Ah.define(t,e)}}function wh(t){return function(e){return Ah.define(Dl(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class yh{constructor(t,e,n,i,s,r,o,a,l,c){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.defaultBindingMode=s,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=l,this.dependencies=c}get type(){return 2}static create(t,e){let n,i;return Dl(t)?(n=t,i={name:n}):(n=t.name,i=t),new yh(e,Qe(Sh(e,"name"),n),We(Sh(e,"aliases"),i.aliases,e.aliases),Ah.keyFrom(n),Qe(Sh(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,Ns.toView),Qe(Sh(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Wl.from(e,...Wl.getAll(e),Sh(e,"bindables"),e.bindables,i.bindables),Qe(Sh(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),We(Th.getAnnotation(e),e.watches),We(Sh(e,"dependencies"),i.dependencies,e.dependencies))}register(t){const{Type:e,key:n,aliases:i}=this;Kn.transient(n,e).register(t),Kn.aliasTo(n,e).register(t),Vi(i,Ah,n,t)}}const xh=Ol("custom-attribute"),kh=t=>`${xh}:${t}`,Sh=(t,e)=>Cl(Rl(e),t),Ah=Object.freeze({name:xh,keyFrom:kh,isType:t=>Vl(t)&&El(xh,t),for(t,e){var n;return null!==(n=id(t,kh(e)))&&void 0!==n?n:void 0},define(t,e){const n=yh.create(t,e);return Tl(xh,n,n.Type),Tl(xh,n,n),Pl(e,xh),n.Type},getDefinition(t){const e=Cl(xh,t);if(void 0===e)throw new Error(`AUR0759:${t.name}`);return e},annotate(t,e,n){Tl(Rl(e),n,t)},getAnnotation:Sh}),Ch=Xn,Eh=Rl("watch"),Th=Object.freeze({name:Eh,add(t,e){let n=Cl(Eh,t);null==n&&Tl(Eh,n=[],t),n.push(e)},getAnnotation(t){var e;return null!==(e=Cl(Eh,t))&&void 0!==e?e:Ch}});function $h(t){return function(e){return zh.define(t,e)}}function Ih(t){if(void 0===t)return function(t){Vh(t,"containerless",!0)};Vh(t,"containerless",!0)}const Rh=new WeakMap;class Oh{constructor(t,e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v,m,b,w,y){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.cache=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=g,this.shadowOptions=v,this.hasSlots=m,this.enhance=b,this.watches=w,this.processContent=y}get type(){return 1}static create(t,e=null){if(null===e){const n=t;if(Dl(n))throw new Error(`AUR0761:${t}`);const i=un("name",n,Fh);return e=Vl(n.Type)?n.Type:zh.generateType(Ve(i)),new Oh(e,i,We(n.aliases),un("key",n,(()=>zh.keyFrom(i))),un("cache",n,Lh),un("capture",n,Uh),un("template",n,Mh),We(n.instructions),We(n.dependencies),un("injectable",n,Mh),un("needsCompile",n,Bh),We(n.surrogates),Wl.from(e,n.bindables),hh.from(n.childrenObservers),un("containerless",n,Uh),un("isStrictBinding",n,Uh),un("shadowOptions",n,Mh),un("hasSlots",n,Uh),un("enhance",n,Uh),un("watches",n,Nh),hn("processContent",e,Mh))}if(Dl(t))return new Oh(e,t,We(Dh(e,"aliases"),e.aliases),zh.keyFrom(t),hn("cache",e,Lh),hn("capture",e,Uh),hn("template",e,Mh),We(Dh(e,"instructions"),e.instructions),We(Dh(e,"dependencies"),e.dependencies),hn("injectable",e,Mh),hn("needsCompile",e,Bh),We(Dh(e,"surrogates"),e.surrogates),Wl.from(e,...Wl.getAll(e),Dh(e,"bindables"),e.bindables),hh.from(...hh.getAll(e),Dh(e,"childrenObservers"),e.childrenObservers),hn("containerless",e,Uh),hn("isStrictBinding",e,Uh),hn("shadowOptions",e,Mh),hn("hasSlots",e,Uh),hn("enhance",e,Uh),We(Th.getAnnotation(e),e.watches),hn("processContent",e,Mh));const n=un("name",t,Fh);return new Oh(e,n,We(Dh(e,"aliases"),t.aliases,e.aliases),zh.keyFrom(n),cn("cache",t,e,Lh),cn("capture",t,e,Uh),cn("template",t,e,Mh),We(Dh(e,"instructions"),t.instructions,e.instructions),We(Dh(e,"dependencies"),t.dependencies,e.dependencies),cn("injectable",t,e,Mh),cn("needsCompile",t,e,Bh),We(Dh(e,"surrogates"),t.surrogates,e.surrogates),Wl.from(e,...Wl.getAll(e),Dh(e,"bindables"),e.bindables,t.bindables),hh.from(...hh.getAll(e),Dh(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),cn("containerless",t,e,Uh),cn("isStrictBinding",t,e,Uh),cn("shadowOptions",t,e,Mh),cn("hasSlots",t,e,Uh),cn("enhance",t,e,Uh),We(t.watches,Th.getAnnotation(e),e.watches),cn("processContent",t,e,Mh))}static getOrCreate(t){if(t instanceof Oh)return t;if(Rh.has(t))return Rh.get(t);const e=Oh.create(t);return Rh.set(t,e),Tl(jh,e,e.Type),e}register(t){const{Type:e,key:n,aliases:i}=this;t.has(n,!1)||(Kn.transient(n,e).register(t),Kn.aliasTo(n,e).register(t),Vi(i,zh,n,t))}}const Ph={name:void 0,searchParents:!1,optional:!1},Lh=()=>0,Mh=()=>null,Uh=()=>!1,Bh=()=>!0,Nh=()=>Xn,jh=Ol("custom-element"),Fh=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),Vh=(t,e,n)=>{Tl(Rl(e),n,t)},Dh=(t,e)=>Cl(Rl(e),t),zh=Object.freeze({name:jh,keyFrom:t=>`${jh}:${t}`,isType:t=>Vl(t)&&El(jh,t),for(t,e=Ph){if(void 0===e.name&&!0!==e.searchParents){const n=id(t,jh);if(null===n){if(!0===e.optional)return null;throw new Error("AUR0762")}return n}if(void 0!==e.name){if(!0!==e.searchParents){const n=id(t,jh);if(null===n)throw new Error("AUR0763");return n.is(e.name)?n:void 0}let n=t,i=!1;for(;null!==n;){const t=id(n,jh);if(null!==t&&(i=!0,t.is(e.name)))return t;n=hd(n)}if(i)return;throw new Error("AUR0764")}let n=t;for(;null!==n;){const t=id(n,jh);if(null!==t)return t;n=hd(n)}throw new Error("AUR0765")},define(t,e){const n=Oh.create(t,e);return Tl(jh,n,n.Type),Tl(jh,n,n),Pl(n.Type,jh),n.Type},getDefinition(t){const e=Cl(jh,t);if(void 0===e)throw new Error(`AUR0760:${t.name}`);return e},annotate:Vh,getAnnotation:Dh,generateName:Fh,createInjectable(){const t=function(e,n,i){return vn.getOrCreateAnnotationParamTypes(e)[i]=t,e};return t.register=function(e){return{resolve:(e,n)=>n.has(t,!0)?n.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(n,i=e){const s=class{};return t.value=n,Reflect.defineProperty(s,"name",t),i!==e&&Object.assign(s.prototype,i),s}}()});Rl("processContent");class Zh{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.J={},this.tt=0,this.H=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H){this.H=!1;const t=this.value,e=this.J,n=qh(t);let i=this.tt;if(this.ov=t,n.length>0&&this.it(n),this.tt+=1,0===i)return;i-=1;for(const t in e)Bl.call(e,t)&&e[t]===i&&this.obj.classList.remove(t)}}it(t){const e=this.obj,n=t.length;let i,s=0;for(;s<n;s++)i=t[s],0!==i.length&&(this.J[i]=this.tt,e.classList.add(i))}}function qh(t){if(Dl(t))return Hh(t);if("object"!=typeof t)return Xn;if(t instanceof Array){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...qh(t[i]));return n}return Xn}const e=[];let n;for(n in t)Boolean(t[n])&&(n.includes(" ")?e.push(...Hh(n)):e.push(n));return e}function Hh(t){const e=t.match(/\S+/g);return null===e?Xn:e}vn.createInterface("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>Gh.supported(t.get(Ac))?t.get(Kh):t.get(Wh)))));class Kh{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new Gh(this.p,t,this.cache,e)}}Kh.inject=[Ac];class Wh{constructor(t){this.p=t}createStyles(t,e){return new Xh(this.p,t,e)}}Wh.inject=[Ac];const Qh=vn.createInterface("IShadowDOMStyles"),_h=vn.createInterface("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:Jn})));class Gh{constructor(t,e,n,i=null){this.sharedStyles=i,this.styleSheets=e.map((e=>{let i;return e instanceof t.CSSStyleSheet?i=e:(i=n.get(e),void 0===i&&(i=new t.CSSStyleSheet,i.replaceSync(e),n.set(e,i))),i}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class Xh{constructor(t,e,n=null){this.p=t,this.localStyles=e,this.sharedStyles=n}applyTo(t){const e=this.localStyles,n=this.p;for(let i=e.length-1;i>-1;--i){const s=n.document.createElement("style");s.innerHTML=e[i],t.prepend(s)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:Yh,exit:Jh}=Ho,{wrap:tu,unwrap:eu}=Na;class nu{constructor(t,e,n,i,s){this.obj=t,this.get=n,this.cb=i,this.useProxy=s,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.value,n=this.compute();Object.is(n,e)||this.cb.call(t,n,e,t)}compute(){this.running=!0,this.obs.version++;try{return Yh(this),this.value=eu(this.get.call(void 0,this.useProxy?tu(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,Jh(this)}}}class iu{constructor(t,e,n,i,s){this.scope=t,this.locator=e,this.oL=n,this.expression=i,this.callback=s,this.interceptor=this,this.isBound=!1,this.obj=t.bindingContext}handleChange(t){const e=this.expression,n=this.obj,i=this.value;10082===e.$kind&&1===this.obs.count||(this.obs.version++,t=e.evaluate(0,this.scope,this.locator,this),this.obs.clear()),Object.is(t,i)||(this.value=t,this.callback.call(n,t,i,n))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,this.locator,this),this.obs.clear())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.value=void 0)}}so(nu),so(iu);const su=vn.createInterface("ILifecycleHooks");class ru{constructor(t,e){this.definition=t,this.instance=e}}class ou{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const n=new Set;let i=e.prototype;for(;i!==Object.prototype;){for(const t of Object.getOwnPropertyNames(i))"constructor"!==t&&n.add(t);i=Object.getPrototypeOf(i)}return new ou(e,n)}register(t){Kn.singleton(su,this.Type).register(t)}}const au=new WeakMap,lu=Rl("lifecycle-hooks"),cu=Object.freeze({name:lu,define(t,e){const n=ou.create(t,e);return Tl(lu,n,e),Pl(e,lu),n.Type},resolve(t){let e=au.get(t);if(void 0===e){au.set(t,e=new hu);const n=t.root,i=n.id===t.id?t.getAll(su):t.has(su,!1)?n.getAll(su).concat(t.getAll(su)):n.getAll(su);let s,r,o,a,l;for(s of i)for(a of(r=Cl(lu,s.constructor),o=new ru(r,s),r.propertyNames))l=e[a],void 0===l?e[a]=[o]:l.push(o)}return e}});class hu{}const uu=vn.createInterface("IViewFactory");class du{constructor(t,e){this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=du.maxCacheSize:Dl(t)&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t){const e=this.cache;let n;return null!=e&&e.length>0?(n=e.pop(),n):(n=Cu.$view(this,t),n)}}du.maxCacheSize=65535;const pu=new WeakSet;function fu(t){return!pu.has(t)}function gu(t){return pu.add(t),Oh.create(t)}const vu=Ol("views"),mu=Object.freeze({name:vu,has:t=>Vl(t)&&(El(vu,t)||"$views"in t),get(t){if(Vl(t)&&"$views"in t){const e=t.$views.filter(fu).map(gu);for(const n of e)mu.add(t,n)}let e=Cl(vu,t);return void 0===e&&Tl(vu,e=[],t),e},add(t,e){const n=Oh.create(e);let i=Cl(vu,t);return void 0===i?Tl(vu,i=[n],t):i.push(n),i}}),bu=vn.createInterface("IViewLocator",(t=>t.singleton(wu)));class wu{constructor(){this.et=new WeakMap,this.st=new Map}getViewComponentForObject(t,e){if(t){const n=mu.has(t.constructor)?mu.get(t.constructor):[],i=Vl(e)?e(t,n):this.nt(n,e);return this.rt(t,n,i)}return null}rt(t,e,n){let i,s=this.et.get(t);if(void 0===s?(s={},this.et.set(t,s)):i=s[n],void 0===i){const r=this.ot(t,e,n);i=zh.define(zh.getDefinition(r),class extends r{constructor(){super(t)}}),s[n]=i}return i}ot(t,e,n){let i,s=this.st.get(t.constructor);if(void 0===s?(s={},this.st.set(t.constructor,s)):i=s[n],void 0===i){i=zh.define(this.lt(e,n),class{constructor(t){this.viewModel=t}define(t,e,n){const i=this.viewModel;if(t.scope=zi.fromParent(t.scope,i),void 0!==i.define)return i.define(t,e,n)}});const r=i.prototype;"hydrating"in t&&(r.hydrating=function(t){this.viewModel.hydrating(t)}),"hydrated"in t&&(r.hydrated=function(t){this.viewModel.hydrated(t)}),"created"in t&&(r.created=function(t){this.viewModel.created(t)}),"binding"in t&&(r.binding=function(t,e,n){return this.viewModel.binding(t,e,n)}),"bound"in t&&(r.bound=function(t,e,n){return this.viewModel.bound(t,e,n)}),"attaching"in t&&(r.attaching=function(t,e,n){return this.viewModel.attaching(t,e,n)}),"attached"in t&&(r.attached=function(t,e){return this.viewModel.attached(t,e)}),"detaching"in t&&(r.detaching=function(t,e,n){return this.viewModel.detaching(t,e,n)}),"unbinding"in t&&(r.unbinding=function(t,e,n){return this.viewModel.unbinding(t,e,n)}),"dispose"in t&&(r.dispose=function(){this.viewModel.dispose()}),s[n]=i}return i}nt(t,e){return e||(1===t.length?t[0].name:"default-view")}lt(t,e){const n=t.find((t=>t.name===e));if(void 0===n)throw new Error(`Could not find view: ${e}`);return n}}const yu=vn.createInterface("IRendering",(t=>t.singleton(xu)));class xu{constructor(t){this.ht=new WeakMap,this.ct=new WeakMap,this.ut=(this.ft=t.root).get(Ac),this.dt=new pd(this.ut,this.ut.document.createDocumentFragment())}get renderers(){return null==this.rs?this.rs=this.ft.getAll(Xd,!1).reduce(((t,e)=>(t[e.target]=e,t)),Ul()):this.rs}compile(t,e,n){if(!1!==t.needsCompile){const i=this.ht,s=e.get(Gd);let r=i.get(t);return null==r?i.set(t,r=s.compile(t,e,n)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new du(e,Oh.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new pd(this.ut,t.template);let e;const n=this.ct;if(n.has(t))e=n.get(t);else{const i=this.ut,s=i.document,r=t.template;let o;null===r?e=null:r instanceof i.Node?"TEMPLATE"===r.nodeName?e=s.adoptNode(r.content):(e=s.adoptNode(s.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=s.createElement("template"),Dl(r)&&(o.innerHTML=r),s.adoptNode(e=o.content)),n.set(t,e)}return null==e?this.dt:new pd(this.ut,e.cloneNode(!0))}render(t,e,n,i){const s=n.instructions,r=this.renderers,o=e.length;if(e.length!==s.length)throw new Error(`AUR0757:${o}<>${s.length}`);let a,l,c,h=0,u=0,d=0;if(o>0)for(;o>h;){for(a=s[h],c=e[h],u=0,d=a.length;d>u;)l=a[u],r[l.type].render(t,c,l),++u;++h}if(null!=i&&(a=n.surrogates,(d=a.length)>0))for(u=0;d>u;)l=a[u],r[l.type].render(t,i,l),++u}}var ku;xu.inject=[wn],function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(ku||(ku={}));const Su={optional:!0},Au=new WeakMap;class Cu{constructor(t,e,n,i,s,r,o){switch(this.container=t,this.vmKind=e,this.definition=n,this.viewFactory=i,this.viewModel=s,this.host=r,this.id=qe("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.vt=!1,this.gt=Xn,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.wt=0,this.bt=0,this.xt=0,this.location=o,this.r=t.root.get(yu),e){case 1:case 0:this.hooks=new Ou(s);break;case 2:this.hooks=Ou.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var t;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(t=this.parent.definition)||void 0===t?void 0:t.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(t){return Au.get(t)}static getCachedOrThrow(t){const e=Cu.getCached(t);if(void 0===e)throw new Error(`AUR0500:${t}`);return e}static $el(t,e,n,i,s,r=null){if(Au.has(e))return Au.get(e);s=null!=s?s:zh.getDefinition(e.constructor);const o=new Cu(t,0,s,null,e,n,r),a=t.get(Tn(Nu));return s.dependencies.length>0&&t.register(...s.dependencies),t.registerResolver(Nu,new Wn("IHydrationContext",new ju(o,i,a))),Au.set(e,o),null!=i&&!1===i.hydrate||o.hE(i,a),o}static $attr(t,e,n,i){if(Au.has(e))return Au.get(e);i=null!=i?i:Ah.getDefinition(e.constructor);const s=new Cu(t,1,i,null,e,n,null);return i.dependencies.length>0&&t.register(...i.dependencies),Au.set(e,s),s.yt(),s}static $view(t,e){const n=new Cu(t.container,2,null,t,null,null,null);return n.parent=null!=e?e:null,n.kt(),n}hE(t,e){const n=this.container,i=(this.flags,this.viewModel);let s=this.definition;if(this.scope=zi.create(i,null,!0),s.watches.length>0&&Ru(this,n,s,i),Tu(this,s,0,i),this.gt=function(t,e,n){const i=e.childrenObservers,s=Object.getOwnPropertyNames(i),r=s.length;if(r>0){const e=Eu(n),o=[];let a,l,c=0;for(;c<r;++c)a=s[c],null==e[a]&&(l=i[a],o[o.length]=e[a]=new ph(t,n,a,l.callback,l.query,l.filter,l.map,l.options));return o}return Xn}(this,s,i),this.hooks.hasDefine){const t=i.define(this,e,s);void 0!==t&&t!==s&&(s=Oh.getOrCreate(t))}this.lifecycleHooks=cu.resolve(n),s.register(n),null!==s.injectable&&n.registerResolver(s.injectable,new Wn("definition.injectable",i)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){void 0!==this.lifecycleHooks.hydrating&&this.lifecycleHooks.hydrating.forEach(Du,this),this.hooks.hasHydrating&&this.viewModel.hydrating(this);const e=this.Ct=this.r.compile(this.definition,this.container,t),{shadowOptions:n,isStrictBinding:i,hasSlots:s}=e,r=this.location;if(this.isStrictBinding=i,null!==(this.hostController=zh.for(this.host,Su))&&(this.host=this.container.root.get(Ac).document.createElement(this.definition.name)),sd(this.host,zh.name,this),sd(this.host,this.definition.key,this),null!==n||s){if(null!=r)throw new Error("AUR0501");sd(this.shadowRoot=this.host.attachShadow(null!=n?n:Pu),zh.name,this),sd(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=r?(sd(r,zh.name,this),sd(r,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.lifecycleHooks.hydrated&&this.lifecycleHooks.hydrated.forEach(zu,this),this.hooks.hasHydrated&&this.viewModel.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Ct,this.host),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(Vu,this),this.hooks.hasCreated&&this.viewModel.created(this)}yt(){const t=this.definition,e=this.viewModel;t.watches.length>0&&Ru(this,this.container,t,e),Tu(this,t,this.flags,e),e.$controller=this,this.lifecycleHooks=cu.resolve(this.container),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(Vu,this),this.hooks.hasCreated&&this.viewModel.created(this)}kt(){this.Ct=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Ct.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Ct)).findTargets(),this.Ct,void 0)}activate(t,e,n,i){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`AUR0502:${this.name}`);default:throw new Error(`AUR0503:${this.name} ${Uu(this.state)}`)}switch(this.parent=e,n|=2,this.vmKind){case 0:this.scope.parentScope=null!=i?i:null;break;case 1:this.scope=null!=i?i:null;break;case 2:if(null==i)throw new Error("AUR0504");this.hasLockedScope||(this.scope=i)}let s;return this.isStrictBinding&&(n|=1),this.$initiator=t,this.$flags=n,this.At(),2!==this.vmKind&&null!=this.lifecycleHooks.binding&&(s=Je(...this.lifecycleHooks.binding.map(Zu,this))),this.hooks.hasBinding&&(s=Je(s,this.viewModel.binding(this.$initiator,this.parent,this.$flags))),s instanceof Promise?(this.Rt(),s.then((()=>{this.bind()})).catch((t=>{this.St(t)})),this.$promise):(this.bind(),this.$promise)}bind(){let t,e=0,n=this.gt.length;if(n>0)for(;n>e;)this.gt[e].start(),++e;if(null!==this.bindings)for(e=0,n=this.bindings.length;n>e;)this.bindings[e].$bind(this.$flags,this.scope),++e;if(2!==this.vmKind&&null!=this.lifecycleHooks.bound&&(t=Je(...this.lifecycleHooks.bound.map(qu,this))),this.hooks.hasBound&&(t=Je(t,this.viewModel.bound(this.$initiator,this.parent,this.$flags))),t instanceof Promise)return this.Rt(),void t.then((()=>{this.isBound=!0,this.Et()})).catch((t=>{this.St(t)}));this.isBound=!0,this.Et()}Bt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Et(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Bt(this.host);break;case 3:this.hostController.Bt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(Qh,!1)?t.get(Qh):t.get(_h)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.lifecycleHooks.attaching&&(t=Je(...this.lifecycleHooks.attaching.map(Hu,this))),this.hooks.hasAttaching&&(t=Je(t,this.viewModel.attaching(this.$initiator,this.parent,this.$flags))),t instanceof Promise&&(this.Rt(),this.At(),t.then((()=>{this.It()})).catch((t=>{this.St(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.It()}deactivate(t,e,n){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`AUR0505:${this.name} ${Uu(this.state)}`)}this.$initiator=t,this.$flags=n,t===this&&this.Tt();let i,s=0;if(this.gt.length)for(;s<this.gt.length;++s)this.gt[s].stop();if(null!==this.children)for(s=0;s<this.children.length;++s)this.children[s].deactivate(t,this,n);if(2!==this.vmKind&&null!=this.lifecycleHooks.detaching&&(i=Je(...this.lifecycleHooks.detaching.map(Wu,this))),this.hooks.hasDetaching&&(i=Je(i,this.viewModel.detaching(this.$initiator,this.parent,this.$flags))),i instanceof Promise&&(this.Rt(),t.Tt(),i.then((()=>{t.Dt()})).catch((e=>{t.St(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Dt(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=4|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].$unbind(t);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}16==(16&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.Pt()}Rt(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Rt())}Pt(){void 0!==this.$promise&&(_u=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,_u(),_u=void 0)}St(t){void 0!==this.$promise&&(Gu=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,Gu(t),Gu=void 0),this.$initiator!==this&&this.parent.St(t)}At(){++this.wt,this.$initiator!==this&&this.parent.At()}It(){if(0==--this.wt){if(2!==this.vmKind&&null!=this.lifecycleHooks.attached&&(Xu=Je(...this.lifecycleHooks.attached.map(Ku,this))),this.hooks.hasAttached&&(Xu=Je(Xu,this.viewModel.attached(this.$initiator,this.$flags))),Xu instanceof Promise)return this.Rt(),Xu.then((()=>{this.state=2,this.Pt(),this.$initiator!==this&&this.parent.It()})).catch((t=>{this.St(t)})),void(Xu=void 0);Xu=void 0,this.state=2,this.Pt()}this.$initiator!==this&&this.parent.It()}Tt(){++this.bt}Dt(){if(0==--this.bt){this.$t(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),2!==e.vmKind&&null!=e.lifecycleHooks.unbinding&&(t=Je(...e.lifecycleHooks.unbinding.map(Qu,this))),e.hooks.hasUnbinding&&(e.debug&&e.logger.trace("unbinding()"),t=Je(t,e.viewModel.unbinding(e.$initiator,e.parent,e.$flags))),t instanceof Promise&&(this.Rt(),this.$t(),t.then((()=>{this.Ot()})).catch((t=>{this.St(t)}))),t=void 0,e=e.next;this.Ot()}}$t(){++this.xt}Ot(){if(0==--this.xt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return Ah.getDefinition(this.viewModel.constructor).name===t;case 0:return zh.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(sd(t,zh.name,this),sd(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(sd(t,zh.name,this),sd(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(sd(t,zh.name,this),sd(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(Fu),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(Au.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}}function Eu(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function Tu(t,e,n,i){const s=e.bindables,r=Object.getOwnPropertyNames(s),o=r.length;if(o>0){let e,n,a=0;const l=Eu(i),c=t.container,h=c.has(Bs,!0)?c.get(Bs):null;for(;a<o;++a)e=r[a],void 0===l[e]&&(n=s[e],l[e]=new Gl(i,e,n.callback,n.set,t,h))}}const $u=new Map,Iu=t=>{let e=$u.get(t);return null==e&&(e=new ps(t,0),$u.set(t,e)),e};function Ru(t,e,n,i){const s=e.get(Xa),r=e.get(ro),o=n.watches,a=0===t.vmKind?t.scope:zi.create(i,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if(({expression:c,callback:h}=o[d]),h=Vl(h)?h:Reflect.get(i,h),!Vl(h))throw new Error(`AUR0506:${String(h)}`);Vl(c)?t.addBinding(new nu(i,s,c,h,!0)):(u=Dl(c)?r.parse(c,8):Iu(c),t.addBinding(new iu(a,e,s,u,h)))}}class Ou{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}Ou.none=new Ou({});const Pu={mode:"open"};var Lu,Mu;function Uu(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(Lu||(Lu={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(Mu||(Mu={}));const Bu=vn.createInterface("IController"),Nu=vn.createInterface("IHydrationContext");class ju{constructor(t,e,n){this.instruction=e,this.parent=n,this.controller=t}}function Fu(t){t.dispose()}function Vu(t){t.instance.created(this.viewModel,this)}function Du(t){t.instance.hydrating(this.viewModel,this)}function zu(t){t.instance.hydrated(this.viewModel,this)}function Zu(t){return t.instance.binding(this.viewModel,this.$initiator,this.parent,this.$flags)}function qu(t){return t.instance.bound(this.viewModel,this.$initiator,this.parent,this.$flags)}function Hu(t){return t.instance.attaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Ku(t){return t.instance.attached(this.viewModel,this.$initiator,this.$flags)}function Wu(t){return t.instance.detaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Qu(t){return t.instance.unbinding(this.viewModel,this.$initiator,this.parent,this.$flags)}let _u,Gu,Xu;const Yu=vn.createInterface("IAppRoot"),Ju=vn.createInterface("IWorkTracker",(t=>t.singleton(td)));class td{constructor(t){this.Lt=0,this.qt=null,this.Pt=null,this.Ut=t.scopeTo("WorkTracker")}start(){this.Ut.trace(`start(stack:${this.Lt})`),++this.Lt}finish(){if(this.Ut.trace(`finish(stack:${this.Lt})`),0==--this.Lt){const t=this.Pt;null!==t&&(this.Pt=this.qt=null,t())}}wait(){if(this.Ut.trace(`wait(stack:${this.Lt})`),null===this.qt){if(0===this.Lt)return Promise.resolve();this.qt=new Promise((t=>{this.Pt=t}))}return this.qt}}td.inject=[li];class ed{constructor(t,e,n,i){this.config=t,this.platform=e,this.container=n,this.controller=void 0,this._t=void 0,this.host=t.host,this.work=n.get(Ju),i.prepare(this),n.registerResolver(e.HTMLElement,n.registerResolver(e.Element,n.registerResolver(rd,new Wn("ElementResolver",t.host)))),this._t=Ye(this.Ft("beforeCreate"),(()=>{const e=t.component,i=n.createChild();let s;s=zh.isType(e)?this.container.get(e):t.component;const r={hydrate:!1,projections:null},o=this.controller=Cu.$el(i,s,this.host,r);return o.hE(r,null),Ye(this.Ft("hydrating"),(()=>(o.hS(null),Ye(this.Ft("hydrated"),(()=>{o.hC(),this._t=void 0})))))}))}activate(){return Ye(this._t,(()=>Ye(this.Ft("beforeActivate"),(()=>Ye(this.controller.activate(this.controller,null,2,void 0),(()=>this.Ft("afterActivate")))))))}deactivate(){return Ye(this.Ft("beforeDeactivate"),(()=>Ye(this.controller.deactivate(this.controller,null,0),(()=>this.Ft("afterDeactivate")))))}Ft(t){return Je(...this.container.getAll(sh).reduce(((e,n)=>(n.slot===t&&e.push(n.run()),e)),[]))}dispose(){var t;null===(t=this.controller)||void 0===t||t.dispose()}}class nd{}function id(t,e){var n,i;return null!==(i=null===(n=t.$au)||void 0===n?void 0:n[e])&&void 0!==i?i:null}function sd(t,e,n){var i,s;(null!==(i=(s=t).$au)&&void 0!==i?i:s.$au=new nd)[e]=n}const rd=vn.createInterface("INode"),od=vn.createInterface("IEventTarget",(t=>t.cachedCallback((t=>t.has(Yu,!0)?t.get(Yu).host:t.get(Ac).document)))),ad=vn.createInterface("IRenderLocation");var ld;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(ld||(ld={}));const cd=new WeakMap;function hd(t){if(cd.has(t))return cd.get(t);let e=0,n=t.nextSibling;for(;null!==n;){if(8===n.nodeType)switch(n.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return n}n=n.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=zh.for(t);if(void 0===e)return null;if(2===e.mountTarget)return hd(e.host)}return t.parentNode}function ud(t){if(dd(t))return t;const e=t.ownerDocument.createComment("au-end"),n=t.ownerDocument.createComment("au-start");return null!==t.parentNode&&(t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(n,e)),e.$start=n,e}function dd(t){return"au-end"===t.textContent}class pd{constructor(t,e){this.platform=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const n=e.querySelectorAll(".au");let i,s=0,r=n.length,o=this.targets=Array(r);for(;r>s;)i=n[s],"AU-M"===i.nodeName?o[s]=ud(i):o[s]=i,++s;const a=e.childNodes,l=this.childNodes=Array(r=a.length);for(s=0;r>s;)l[s]=a[s],++s;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e,n=this.firstChild;const i=this.lastChild;for(;null!=n&&(e=n.nextSibling,t.appendChild(n),n!==i);)n=e}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let n,i=this.firstChild;for(;null!==i&&(n=i.nextSibling,t.appendChild(i),i!==e);)i=n}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,dd(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}const fd=vn.createInterface("IWindow",(t=>t.callback((t=>t.get(Ac).window)))),gd=vn.createInterface("ILocation",(t=>t.callback((t=>t.get(fd).location)))),vd=vn.createInterface("IHistory",(t=>t.callback((t=>t.get(fd).history)))),md={[Vs.capturing]:{capture:!0},[Vs.bubbling]:{capture:!1}};class bd{constructor(t,e,n){this.prevent=t,this.strategy=e,this.expAsHandler=n}}class wd{constructor(t,e,n,i,s,r,o){this.platform=t,this.targetEvent=e,this.sourceExpression=n,this.target=i,this.eventDelegator=s,this.locator=r,this.Vt=o,this.interceptor=this,this.isBound=!1,this.handler=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;let n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);if(delete e.$event,this.Vt.expAsHandler){if(!Vl(n))throw new Error(`Handler of "${this.targetEvent}" event is not a function.`);n=n(t)}return!0!==n&&this.Vt.prevent&&t.preventDefault(),n}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.Vt.strategy===Vs.none?this.target.addEventListener(this.targetEvent,this):this.handler=this.eventDelegator.addEventListener(this.locator.get(od),this.target,this.targetEvent,this,md[this.Vt.strategy]),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.Vt.strategy===Vs.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const yd={capture:!1};class xd{constructor(t,e,n=yd){this.Mt=t,this.jt=e,this.Vt=n,this.Nt=0,this.Wt=new Map,this.Ht=new Map}zt(){1==++this.Nt&&this.Mt.addEventListener(this.jt,this,this.Vt)}Gt(){0==--this.Nt&&this.Mt.removeEventListener(this.jt,this,this.Vt)}dispose(){this.Nt>0&&(this.Nt=0,this.Mt.removeEventListener(this.jt,this,this.Vt)),this.Wt.clear(),this.Ht.clear()}Xt(t){const e=!0===this.Vt.capture?this.Wt:this.Ht;let n=e.get(t);return void 0===n&&e.set(t,n=Ul()),n}handleEvent(t){const e=!0===this.Vt.capture?this.Wt:this.Ht,n=t.composedPath();!0===this.Vt.capture&&n.reverse();for(const i of n){const n=e.get(i);if(void 0===n)continue;const s=n[this.jt];if(void 0!==s&&(Vl(s)?s(t):s.handleEvent(t),!0===t.cancelBubble))return}}}class kd{constructor(t,e,n,i){this.Kt=t,this.Yt=e,this.jt=n,t.zt(),e[n]=i}dispose(){this.Kt.Gt(),this.Yt[this.jt]=void 0}}class Sd{constructor(t){this.config=t,this.target=null,this.handler=null}subscribe(t,e){let n;for(n of(this.target=t,this.handler=e,this.config.events))t.addEventListener(n,e)}dispose(){const{target:t,handler:e}=this;let n;if(null!==t&&null!==e)for(n of this.config.events)t.removeEventListener(n,e);this.target=this.handler=null}}const Ad=vn.createInterface("IEventDelegator",(t=>t.singleton(Cd)));class Cd{constructor(){this.Zt=Ul()}addEventListener(t,e,n,i,s){var r,o;const a=null!==(r=(o=this.Zt)[n])&&void 0!==r?r:o[n]=new Map;let l=a.get(t);return void 0===l&&a.set(t,l=new xd(t,n,s)),new kd(l,l.Xt(e),n,i)}dispose(){for(const t in this.Zt){const e=this.Zt[t];for(const t of e.values())t.dispose();e.clear()}}}vn.createInterface("IProjections");const Ed=vn.createInterface("IAuSlotsInfo");class Td{constructor(t){this.projectedSlots=t}}var $d;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}($d||($d={}));const Id=vn.createInterface("Instruction");function Rd(t){const e=t.type;return Dl(e)&&2===e.length}class Od{constructor(t,e){this.from=t,this.to=e}get type(){return"rf"}}class Pd{constructor(t,e,n){this.from=t,this.to=e,this.mode=n}get type(){return"rg"}}class Ld{constructor(t,e){this.from=t,this.to=e}get type(){return"rk"}}class Md{constructor(t,e){this.from=t,this.to=e}get type(){return"rh"}}class Ud{constructor(t,e){this.from=t,this.to=e}get type(){return"rj"}}class Bd{constructor(t,e){this.value=t,this.to=e}get type(){return"re"}}class Nd{constructor(t,e,n,i,s,r){this.res=t,this.alias=e,this.props=n,this.projections=i,this.containerless=s,this.captures=r,this.auSlot=null}get type(){return"ra"}}class jd{constructor(t,e,n){this.res=t,this.alias=e,this.props=n}get type(){return"rb"}}class Fd{constructor(t,e,n,i){this.def=t,this.res=e,this.alias=n,this.props=i}get type(){return"rc"}}class Vd{constructor(t,e){this.instructions=t,this.toBindingContext=e}get type(){return"rd"}}class Dd{constructor(t,e){this.from=t,this.to=e}get type(){return"ri"}}class zd{constructor(t,e){this.from=t,this.strict=e}get type(){return"ha"}}class Zd{constructor(t,e,n,i){this.from=t,this.to=e,this.preventDefault=n,this.strategy=i}get type(){return"hb"}}class qd{constructor(t,e){this.value=t,this.to=e}get type(){return"he"}}class Hd{constructor(t){this.value=t,this.type="hf"}}class Kd{constructor(t){this.value=t,this.type="hg"}}class Wd{constructor(t,e,n){this.attr=t,this.from=e,this.to=n}get type(){return"hc"}}class Qd{get type(){return"hs"}}class _d{constructor(t){this.instructions=t}get type(){return"hp"}}const Gd=vn.createInterface("ITemplateCompiler"),Xd=vn.createInterface("IRenderer");function Yd(t){return function(e){return e.register=function(t){Kn.singleton(Xd,this).register(t)},zl(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function Jd(t,e,n){return Dl(e)?t.parse(e,n):e}function tp(t){return null!=t.viewModel?t.viewModel:t}let ep=class{render(t,e,n){const i=tp(e);void 0!==i.$observers&&void 0!==i.$observers[n.to]?i.$observers[n.to].setValue(n.value,2):i[n.to]=n.value}};ep=Sl([Yd("re")],ep);let np=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[yu,Ac]}render(t,e,n){let i,s,r,o;const a=n.res,l=n.projections,c=t.container;if("string"==typeof a){if(i=c.find(zh,a),null==i)throw new Error(`AUR0752:${a}@${t.name}`)}else i=a;const h=n.containerless||i.containerless?ud(e):null,u=function(t,e,n,i,s,r){const o=e.container.createChild();return o.registerResolver(t.HTMLElement,o.registerResolver(t.Element,o.registerResolver(rd,new Wn("ElementResolver",n)))),o.registerResolver(Bu,new Wn(Ep,e)),o.registerResolver(Id,new Wn(Tp,i)),o.registerResolver(ad,null==s?Pp:new Op(s)),o.registerResolver(uu,Lp),o.registerResolver(Ed,null==r?Mp:new Wn($p,r)),o}(this.p,t,e,n,h,null==l?void 0:new Td(Object.keys(l)));s=i.Type,r=u.invoke(s),u.registerResolver(s,new Wn(i.key,r)),o=Cu.$el(u,r,e,n,i,h),sd(e,i.key,o);const d=this.r.renderers,p=n.props,f=p.length;let g,v=0;for(;f>v;)g=p[v],d[g.type].render(t,o,g),++v;t.addChild(o)}};np=Sl([Yd("ra")],np);let ip=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[yu,Ac]}render(t,e,n){let i,s=t.container;if("string"==typeof n.res){if(i=s.find(Ah,n.res),null==i)throw new Error(`AUR0753:${n.res}@${t.name}`)}else i=n.res;const r=Rp(this.p,i,t,e,n,void 0,void 0),o=Cu.$attr(r.ctn,r.vm,e,i);sd(e,i.key,o);const a=this.r.renderers,l=n.props,c=l.length;let h,u=0;for(;c>u;)h=l[u],a[h.type].render(t,o,h),++u;t.addChild(o)}};ip=Sl([Yd("rb")],ip);let sp=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[yu,Ac]}render(t,e,n){var i,s;let r,o=t.container;if("string"==typeof n.res){if(r=o.find(Ah,n.res),null==r)throw new Error(`AUR0754:${n.res}@${t.name}`)}else r=n.res;const a=this.r.getViewFactory(n.def,o),l=ud(e),c=Rp(this.p,r,t,e,n,a,l),h=Cu.$attr(c.ctn,c.vm,e,r);sd(l,r.key,h),null===(s=(i=c.vm).link)||void 0===s||s.call(i,t,h,e,n);const u=this.r.renderers,d=n.props,p=d.length;let f,g=0;for(;p>g;)f=d[g],u[f.type].render(t,h,f),++g;t.addChild(h)}};sp=Sl([Yd("rc")],sp);let rp=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){e.remove();const i=n.instructions,s=n.toBindingContext,r=t.container,o=i.length;let a,l,c,h=0;for(;o>h;)a=i[h],l=Jd(this.ep,a.from,8),c=new _c(l,a.to,this.oL,r,s),t.addBinding(38962===l.$kind?pp(c,l,r):c),++h}};rp.inject=[ro,Xa],rp=Sl([Yd("rd")],rp);let op=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=Jd(this.ep,n.from,12),s=new Rc(i,tp(e),n.to,this.oL,t.container);t.addBinding(38962===i.$kind?pp(s,i,t.container):s)}};op.inject=[ro,Xa],op=Sl([Yd("rh")],op);let ap=class{constructor(t){this.ep=t}render(t,e,n){const i=Jd(this.ep,n.from,8),s=new ih(i,function(t,e){if("element"===e)return t;switch(e){case"controller":return zh.for(t);case"view":throw new Error("AUR0750");case"view-model":return zh.for(t).viewModel;default:{const n=Ah.for(t,e);if(void 0!==n)return n.viewModel;const i=zh.for(t,{name:e});if(void 0===i)throw new Error(`AUR0751:${e}`);return i.viewModel}}}(e,n.to),t.container);t.addBinding(38962===i.$kind?pp(s,i,t.container):s)}};ap.inject=[ro],ap=Sl([Yd("rj")],ap);let lp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=Jd(this.ep,n.from,1),r=new Kc(this.oL,s,tp(e),n.to,Ns.toView,i,this.p.domWriteQueue),o=r.partBindings,a=o.length;let l,c=0;for(;a>c;++c)l=o[c],38962===l.sourceExpression.$kind&&(o[c]=pp(l,l.sourceExpression,i));t.addBinding(r)}};lp.inject=[ro,Xa,Ac],lp=Sl([Yd("rf")],lp);let cp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Jd(this.ep,n.from,8),s=new eh(i,tp(e),n.to,n.mode,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?pp(s,i,t.container):s)}};cp.inject=[ro,Xa,Ac],cp=Sl([Yd("rg")],cp);let hp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Jd(this.ep,n.from,2),s=new eh(i,tp(e),n.to,Ns.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.iterable.$kind?pp(s,i.iterable,t.container):s)}};hp.inject=[ro,Xa,Ac],hp=Sl([Yd("rk")],hp);let up=0;const dp=[];function pp(t,e,n){for(;e instanceof ls;)dp[up++]=e,e=e.expression;for(;up>0;){const e=dp[--up],i=n.get(e.behaviorKey);i instanceof _i&&(t=i.construct(t,e))}return dp.length=0,t}let fp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=e.nextSibling,r=e.parentNode,o=this.p.document,a=Jd(this.ep,n.from,1),l=a.parts,c=a.expressions,h=c.length;let u,d,p=0,f=l[0];for(""!==f&&r.insertBefore(o.createTextNode(f),s);h>p;++p)d=c[p],u=new Qc(d,r.insertBefore(o.createTextNode(""),s),i,this.oL,this.p,n.strict),t.addBinding(38962===d.$kind?pp(u,d,i):u),f=l[p+1],""!==f&&r.insertBefore(o.createTextNode(f),s);"AU-M"===e.nodeName&&e.remove()}};fp.inject=[ro,Xa,Ac],fp=Sl([Yd("ha")],fp);const gp=vn.createInterface("IListenerBehaviorOptions",(t=>t.singleton(vp)));class vp{constructor(){this.expAsHandler=!1}}let mp=class{constructor(t,e,n,i){this.ep=t,this.Jt=e,this.p=n,this.Qt=i}render(t,e,n){const i=Jd(this.ep,n.from,4),s=new wd(this.p,n.to,i,e,this.Jt,t.container,new bd(n.preventDefault,n.strategy,this.Qt.expAsHandler));t.addBinding(38962===i.$kind?pp(s,i,t.container):s)}};mp.inject=[ro,Ad,Ac,gp],mp=Sl([Yd("hb")],mp);let bp=class{render(t,e,n){e.setAttribute(n.to,n.value)}};bp=Sl([Yd("he")],bp);let wp=class{render(t,e,n){!function(t,e){const n=e.length;let i=0;for(let s=0;s<n;++s)32===e.charCodeAt(s)?(s!==i&&t.add(e.slice(i,s)),i=s+1):s+1===n&&t.add(e.slice(i))}(e.classList,n.value)}};wp=Sl([Yd("hf")],wp);let yp=class{render(t,e,n){e.style.cssText+=n.value}};yp=Sl([Yd("hg")],yp);let xp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=Jd(this.ep,n.from,8),s=new eh(i,e.style,n.to,Ns.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?pp(s,i,t.container):s)}};xp.inject=[ro,Xa,Ac],xp=Sl([Yd("hd")],xp);let kp=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=Jd(this.ep,n.from,8),s=new Zc(i,e,n.attr,n.to,Ns.toView,this.oL,t.container);t.addBinding(38962===i.$kind?pp(s,i,t.container):s)}};kp.inject=[ro,Xa],kp=Sl([Yd("hc")],kp);let Sp=class{constructor(t,e){this.ti=t,this.r=e}static get inject(){return[Gd,yu]}render(t,e,n){const i=t.container.get(Nu),s=this.r.renderers,r=t=>{let e=t,n=i;for(;null!=n&&e>0;)n=n.parent,--e;if(null==n)throw new Error("No scope context for spread binding.");return n},o=n=>{var i,a;const l=r(n),c=Cp(l),h=this.ti.compileSpread(l.controller.definition,null!==(a=null===(i=l.instruction)||void 0===i?void 0:i.captures)&&void 0!==a?a:Xn,l.controller.container,e);let u;for(u of h)switch(u.type){case"hs":o(n+1);break;case"hp":s[u.instructions.type].render(c,zh.for(e),u.instructions);break;default:s[u.type].render(c,e,u)}t.addBinding(c)};o(0)}};Sp=Sl([Yd("hs")],Sp);class Ap{constructor(t,e){this.ii=t,this.ei=e,this.interceptor=this,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}$bind(t,e){var n;if(this.isBound)return;this.isBound=!0;const i=this.$scope=null!==(n=this.ei.controller.scope.parentScope)&&void 0!==n?n:void 0;if(null==i)throw new Error("Invalid spreading. Context scope is null/undefined");this.ii.forEach((e=>e.$bind(t,i)))}$unbind(t){this.ii.forEach((e=>e.$unbind(t))),this.isBound=!1}addBinding(t){this.ii.push(t)}addChild(t){if(1!==t.vmKind)throw new Error("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}}const Cp=t=>new Ap([],t),Ep="IController",Tp="IInstruction",$p="IAuSlotsInfo";class Ip{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw new Error("AUR7055");if(!Dl(t.name)||0===t.name.length)throw new Error("AUR0756");return t}}function Rp(t,e,n,i,s,r,o,a){const l=n.container.createChild();return l.registerResolver(t.HTMLElement,l.registerResolver(t.Element,l.registerResolver(rd,new Wn("ElementResolver",i)))),n=n instanceof Cu?n:n.ctrl,l.registerResolver(Bu,new Wn(Ep,n)),l.registerResolver(Id,new Wn(Tp,s)),l.registerResolver(ad,null==o?Pp:new Wn("IRenderLocation",o)),l.registerResolver(uu,null==r?Lp:new Ip(r)),l.registerResolver(Ed,null==a?Mp:new Wn($p,a)),{vm:l.invoke(e.Type),ctn:l}}class Op{constructor(t){this.l=t}get name(){return"IRenderLocation"}get $isResolver(){return!0}resolve(){return this.l}}const Pp=new Op(null),Lp=new Ip(null),Mp=new Wn($p,new Td(Xn));var Up;function Bp(t){return function(e){return Dp.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(Up||(Up={}));class Np{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.type=s}static create(t,e){let n,i;return Dl(t)?(n=t,i={name:n}):(n=t.name,i=t),new Np(e,Qe(Vp(e,"name"),n),We(Vp(e,"aliases"),i.aliases,e.aliases),Fp(n),Qe(Vp(e,"type"),i.type,e.type,null))}register(t){const{Type:e,key:n,aliases:i}=this;Kn.singleton(n,e).register(t),Kn.aliasTo(n,e).register(t),Vi(i,Dp,n,t)}}const jp=Ol("binding-command"),Fp=t=>`${jp}:${t}`,Vp=(t,e)=>Cl(Rl(e),t),Dp=Object.freeze({name:jp,keyFrom:Fp,define(t,e){const n=Np.create(t,e);return Tl(jp,n,n.Type),Tl(jp,n,n),Pl(e,jp),n.Type},getAnnotation:Vp});let zp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"one-time"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:Fe(n):(""===i&&1===t.def.type&&(i=Fe(n)),n=t.bindable.property),new Pd(this.ep.parse(i,8),n,Ns.oneTime)}};zp.inject=[Tc,ro],zp=Sl([Bp("one-time")],zp);let Zp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"to-view"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:Fe(n):(""===i&&1===t.def.type&&(i=Fe(n)),n=t.bindable.property),new Pd(this.ep.parse(i,8),n,Ns.toView)}};Zp.inject=[Tc,ro],Zp=Sl([Bp("to-view")],Zp);let qp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"from-view"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:Fe(i):(""===s&&1===t.def.type&&(s=Fe(i)),i=t.bindable.property),new Pd(this.ep.parse(s,8),i,Ns.fromView)}};qp.inject=[Tc,ro],qp=Sl([Bp("from-view")],qp);let Hp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"two-way"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:Fe(i):(""===s&&1===t.def.type&&(s=Fe(i)),i=t.bindable.property),new Pd(this.ep.parse(s,8),i,Ns.twoWay)}};Hp.inject=[Tc,ro],Hp=Sl([Bp("two-way")],Hp);let Kp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"bind"}build(t){var e;const n=t.attr,i=t.bindable;let s,r,o=n.target,a=n.rawValue;return null==i?(r=this.m.isTwoWay(t.node,o)?Ns.twoWay:Ns.toView,o=null!==(e=this.m.map(t.node,o))&&void 0!==e?e:Fe(o)):(""===a&&1===t.def.type&&(a=Fe(o)),s=t.def.defaultBindingMode,r=i.mode===Ns.default||null==i.mode?null==s||s===Ns.default?Ns.toView:s:i.mode,o=i.property),new Pd(this.ep.parse(a,8),o,r)}};Kp.inject=[Tc,ro],Kp=Sl([Bp("bind")],Kp);let Wp=class{constructor(t){this.type=0,this.ep=t}get name(){return"call"}build(t){const e=null===t.bindable?Fe(t.attr.target):t.bindable.property;return new Md(this.ep.parse(t.attr.rawValue,12),e)}};Wp.inject=[ro],Wp=Sl([Bp("call")],Wp);let Qp=class{constructor(t){this.type=0,this.ep=t}get name(){return"for"}build(t){const e=null===t.bindable?Fe(t.attr.target):t.bindable.property;return new Ld(this.ep.parse(t.attr.rawValue,2),e)}};Qp.inject=[ro],Qp=Sl([Bp("for")],Qp);let _p=class{constructor(t){this.type=1,this.ep=t}get name(){return"trigger"}build(t){return new Zd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!0,Vs.none)}};_p.inject=[ro],_p=Sl([Bp("trigger")],_p);let Gp=class{constructor(t){this.type=1,this.ep=t}get name(){return"delegate"}build(t){return new Zd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Vs.bubbling)}};Gp.inject=[ro],Gp=Sl([Bp("delegate")],Gp);let Xp=class{constructor(t){this.type=1,this.ep=t}get name(){return"capture"}build(t){return new Zd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Vs.capturing)}};Xp.inject=[ro],Xp=Sl([Bp("capture")],Xp);let Yp=class{constructor(t){this.type=1,this.ep=t}get name(){return"attr"}build(t){return new Wd(t.attr.target,this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Yp.inject=[ro],Yp=Sl([Bp("attr")],Yp);let Jp=class{constructor(t){this.type=1,this.ep=t}get name(){return"style"}build(t){return new Wd("style",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Jp.inject=[ro],Jp=Sl([Bp("style")],Jp);let tf=class{constructor(t){this.type=1,this.ep=t}get name(){return"class"}build(t){return new Wd("class",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};tf.inject=[ro],tf=Sl([Bp("class")],tf);let ef=class{constructor(t){this.type=1,this.ep=t}get name(){return"ref"}build(t){return new Ud(this.ep.parse(t.attr.rawValue,8),t.attr.target)}};ef.inject=[ro],ef=Sl([Bp("ref")],ef);let nf=class{constructor(){this.type=1}get name(){return"...$attrs"}build(t){return new Qd}};nf=Sl([Bp("...$attrs")],nf);const sf=vn.createInterface("ITemplateElementFactory",(t=>t.singleton(of))),rf={};class of{constructor(t){this.p=t,this.si=t.document.createElement("template")}createTemplate(t){var e;if(Dl(t)){let e=rf[t];if(void 0===e){const n=this.si;n.innerHTML=t;const i=n.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.si=this.p.document.createElement("template"),e=n):(n.content.removeChild(i),e=i),rf[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.p.document.createElement("template");return e.content.appendChild(t),e}return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.cloneNode(!0)}}of.inject=[Ac];class af{constructor(t,e,n,i,s,r){this.hasSlot=!1,this.Ci=Ul();const o=null!==i;this.c=e,this.root=null===s?this:s,this.def=t,this.ci=n,this.parent=i,this.ni=o?i.ni:e.get(sf),this.di=o?i.di:e.get(uc),this.ep=o?i.ep:e.get(ro),this.m=o?i.m:e.get(Tc),this.Ut=o?i.Ut:e.get(li),this.p=o?i.p:e.get(Ac),this.localEls=o?i.localEls:new Set,this.rows=null!=r?r:[]}ki(t){var e,n;(null!==(e=(n=this.root).deps)&&void 0!==e?e:n.deps=[]).push(t),this.root.c.register(t)}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}hi(t){return this.c.find(zh,t)}ui(t){return this.c.find(Ah,t)}xi(t){return new af(this.def,this.c,this.ci,this,this.root,t)}ai(t){if(this.root!==this)return this.root.ai(t);const e=t.command;if(null===e)return null;let n=this.Ci[e];if(void 0===n){if(n=this.c.create(Dp,e),null===n)throw new Error(`AUR0713:${e}`);this.Ci[e]=n}return n}}function lf(t){const e=t.length;let n=0,i=0;for(;e>i;){if(n=t.charCodeAt(i),92===n)++i;else{if(58===n)return!0;if(36===n&&123===t.charCodeAt(i+1))return!1}++i}return!1}function cf(){df.node=df.attr=df.bindable=df.def=null}const hf={projections:null},uf={name:"unnamed"},df={node:null,attr:null,bindable:null,def:null},pf=Object.assign(Ul(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),ff={checkbox:1,radio:1},gf=new WeakMap;class vf{constructor(t,e,n){this.attrs=t,this.bindables=e,this.primary=n}static from(t,e){let n=gf.get(t);if(null==n){const i=t.bindables,s=Ul(),r=e?void 0===t.defaultBindingMode?Ns.default:t.defaultBindingMode:Ns.default;let o,a,l,c,h=!1;for(a in i){if(o=i[a],c=o.attribute,!0===o.primary){if(h)throw new Error(`AUR0714:${t.name}`);h=!0,l=o}else h||null!=l||(l=o);s[c]=Ql.create(a,t.Type,o)}null==o&&e&&(l=s.value=Ql.create("value",t.Type,{mode:r})),gf.set(t,n=new vf(s,i,l))}return n}}var mf;!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(mf||(mf={}));const bf=Object.freeze(["property","attribute","mode"]),wf="as-custom-element";function yf(t,e){const n=t.getAttribute(wf);if(null===n||""===n)throw new Error("AUR0715");if(e.has(n))throw new Error(`AUR0716:${n}`);return e.add(n),t.removeAttribute(wf),n}function xf(t){switch(t.getAttribute("mode")){case"oneTime":return Ns.oneTime;case"toView":return Ns.toView;case"fromView":return Ns.fromView;case"twoWay":return Ns.twoWay;default:return Ns.default}}const kf=vn.createInterface("ITemplateCompilerHooks"),Sf=new WeakMap,Af=Ol("compiler-hooks");Object.freeze({name:Af,define(t){let e=Sf.get(t);return void 0===e&&(Sf.set(t,e=new Cf(t)),Tl(Af,e,t),Pl(t,Af)),t}});class Cf{constructor(t){this.Type=t}get name(){return""}register(t){t.register(Kn.singleton(kf,this.Type))}}const Ef=zh.generateName,Tf="default",$f="au-slot";class If{constructor(t){this.mode=t,this.Ai=new Map}bind(t,e,n){this.Ai.set(n,n.mode),n.mode=this.mode}unbind(t,e,n){n.mode=this.Ai.get(n),this.Ai.delete(n)}}class Rf extends If{constructor(){super(Ns.oneTime)}}class Of extends If{constructor(){super(Ns.toView)}}class Pf extends If{constructor(){super(Ns.fromView)}}class Lf extends If{constructor(){super(Ns.twoWay)}}Wi("oneTime")(Rf),Wi("toView")(Of),Wi("fromView")(Pf),Wi("twoWay")(Lf);class Mf extends Gi{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(ti).taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(t,e,n)}updateSource(t,e){this.queueTask((()=>this.binding.updateSource(t,e)))}queueTask(t){const e=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,t())),this.opts),null==e||e.cancel()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.binding.$unbind(t)}}Wi("debounce")(Mf);class Uf{constructor(t){this.Yt=new Map,this.Ri=t}bind(t,e,n,...i){if(!("handleChange"in n))throw new Error("AUR0817");if(0===i.length)throw new Error("AUR0818");let s;for(s of(this.Yt.set(n,i),i))this.Ri.addSignalListener(s,n)}unbind(t,e,n){const i=this.Yt.get(n);let s;for(s of(this.Yt.delete(n),i))this.Ri.removeSignalListener(s,n)}}Uf.inject=[qi],Wi("signal")(Uf);class Bf extends Gi{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.p=t.locator.get(ti),this.Si=this.p.taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.Ei((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.p.performanceNow()),this.binding.handleChange(t,e,n)}updateSource(t,e){this.Ei((()=>this.binding.updateSource(t,e)))}Ei(t){const e=this.opts,n=this.p,i=this.lastCall+e.delay-n.performanceNow();if(i>0){const s=this.task;e.delay=i,this.task=this.Si.queueTask((()=>{this.lastCall=n.performanceNow(),this.task=null,e.delay=this.delay,t()}),e),null==s||s.cancel()}else this.lastCall=n.performanceNow(),t()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=this.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,super.$unbind(t)}}Wi("throttle")(Bf);const Nf=new class{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,n,i){null==t?n.removeAttribute(i):n.setAttribute(i,t)}};class jf{bind(t,e,n){n.targetObserver=Nf}unbind(t,e,n){}}function Ff(t){const e=t.composedPath()[0];if(this.target===e)return this.selfEventCallSource(t)}Wi("attr")(jf);class Vf{bind(t,e,n){if(!n.callSource||!n.targetEvent)throw new Error("AUR0801");n.selfEventCallSource=n.callSource,n.callSource=Ff}unbind(t,e,n){n.callSource=n.selfEventCallSource,n.selfEventCallSource=null}}Wi("self")(Vf);const Df=Ul();class zf{constructor(t){this.ns=t,this.type=6}static forNs(t){var e;return null!==(e=Df[t])&&void 0!==e?e:Df[t]=new zf(t)}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,n,i){null==t?n.removeAttributeNS(this.ns,i):n.setAttributeNS(this.ns,i,t)}}function Zf(t,e){return t===e}class qf{constructor(t,e,n,i){this.handler=n,this.type=7,this.v=void 0,this.ov=void 0,this.Bi=void 0,this.Ii=void 0,this.f=0,this.o=t,this.oL=i}getValue(){return this.v}setValue(t,e){const n=this.v;t!==n&&(this.v=t,this.ov=n,this.f=e,this.Ti(),this.Di(),this.queue.add(this))}handleCollectionChange(t,e){this.Di()}handleChange(t,e,n){this.Di()}Di(){const t=this.v,e=this.o,n=Bl.call(e,"model")?e.model:e.value,i="radio"===e.type,s=void 0!==e.matcher?e.matcher:Zf;if(i)e.checked=!!s(t,n);else if(!0===t)e.checked=!0;else{let i=!1;if(t instanceof Array)i=-1!==t.findIndex((t=>!!s(t,n)));else if(t instanceof Set){for(const e of t)if(s(e,n)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(s(t,n)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.o,n=Bl.call(e,"model")?e.model:e.value,i=e.checked,s=void 0!==e.matcher?e.matcher:Zf;if("checkbox"===e.type){if(t instanceof Array){const e=t.findIndex((t=>!!s(t,n)));return void(i&&-1===e?t.push(n):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===s(e,n)){r=e;break}return void(i&&r===e?t.add(n):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===s(t,n)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=n}this.v=t,this.queue.add(this)}start(){this.handler.subscribe(this.o,this),this.Ti()}stop(){var t,e;this.handler.dispose(),null===(t=this.Bi)||void 0===t||t.unsubscribe(this),this.Bi=void 0,null===(e=this.Ii)||void 0===e||e.unsubscribe(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.start()}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.stop()}flush(){Hf=this.ov,this.ov=this.v,this.subs.notify(this.v,Hf,this.f)}Ti(){var t,e,n,i,s,r,o;const a=this.o;null===(s=null!==(t=this.Ii)&&void 0!==t?t:this.Ii=null!==(n=null===(e=a.$observers)||void 0===e?void 0:e.model)&&void 0!==n?n:null===(i=a.$observers)||void 0===i?void 0:i.value)||void 0===s||s.subscribe(this),null===(r=this.Bi)||void 0===r||r.unsubscribe(this),this.Bi=void 0,"checkbox"===a.type&&(null===(o=this.Bi=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))||void 0===o||o.subscribe(this))}}let Hf;qs(qf),Gs(qf);const Kf={childList:!0,subtree:!0,characterData:!0};function Wf(t,e){return t===e}class Qf{constructor(t,e,n,i){this.type=7,this.v=void 0,this.ov=void 0,this.H=!1,this.Pi=void 0,this.$i=void 0,this.iO=!1,this.o=t,this.oL=i,this.handler=n}getValue(){return this.iO?this.v:this.o.multiple?function(t){const e=[];if(0===t.length)return e;const n=t.length;let i,s=0;for(;n>s;)i=t[s],i.selected&&(e[e.length]=Bl.call(i,"model")?i.model:i.value),++s;return e}(this.o.options):this.o.value}setValue(t,e){this.ov=this.v,this.v=t,this.H=t!==this.ov,this.Oi(t instanceof Array?t:null),0==(64&e)&&this.K()}K(){this.H&&(this.H=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var t;const e=this.v,n=this.o,i=Array.isArray(e),s=null!==(t=n.matcher)&&void 0!==t?t:Wf,r=n.options;let o=r.length;for(;o-- >0;){const t=r[o],n=Bl.call(t,"model")?t.model:t.value;t.selected=i?-1!==e.findIndex((t=>!!s(n,t))):!!s(n,e)}}syncValue(){const t=this.o,e=t.options,n=e.length,i=this.v;let s=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||Wf,a=[];for(;s<n;)r=e[s],r.selected&&a.push(Bl.call(r,"model")?r.model:r.value),++s;let l;for(s=0;s<i.length;)l=i[s],-1===a.findIndex((t=>!!o(l,t)))?i.splice(s,1):++s;for(s=0;s<a.length;)l=a[s],-1===i.findIndex((t=>!!o(l,t)))&&i.push(l),++s;return!1}let r,o=null;for(;s<n;){if(r=e[s],r.selected){o=Bl.call(r,"model")?r.model:r.value;break}++s}return this.ov=this.v,this.v=o,!0}Li(){(this.$i=new this.o.ownerDocument.defaultView.MutationObserver(this.qi.bind(this))).observe(this.o,Kf),this.Oi(this.v instanceof Array?this.v:null),this.iO=!0}Ui(){var t;this.$i.disconnect(),null===(t=this.Pi)||void 0===t||t.unsubscribe(this),this.$i=this.Pi=void 0,this.iO=!1}Oi(t){var e;if(null===(e=this.Pi)||void 0===e||e.unsubscribe(this),this.Pi=void 0,null!=t){if(!this.o.multiple)throw new Error("AUR0654");(this.Pi=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}qi(t){this.syncOptions(),this.syncValue()&&this.queue.add(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.Li())}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.handler.dispose(),this.Ui())}flush(){_f=this.ov,this.ov=this.v,this.subs.notify(this.v,_f,0)}}let _f,Gf;qs(Qf),Gs(Qf);class Xf{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.styles={},this.version=0,this.H=!1}getValue(){return this.obj.style.cssText}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}_i(t){const e=[],n=/url\([^)]+$/;let i,s,r,o,a=0,l="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),l+=t.substring(a,i),a=i+1,n.test(l)?l+=";":(s=l.indexOf(":"),r=l.substring(0,s).trim(),o=l.substring(s+1).trim(),e.push([r,o]),l="");return e}Fi(t){let e,n;const i=[];for(n in t)if(e=t[n],null!=e)if(Dl(e)){if(n.startsWith("--")){i.push([n,e]);continue}i.push([De(n),e])}else i.push(...this.Vi(e));return i}Mi(t){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...this.Vi(t[i]));return n}return Xn}Vi(t){return Dl(t)?this._i(t):t instanceof Array?this.Mi(t):t instanceof Object?this.Fi(t):Xn}K(){if(this.H){this.H=!1;const t=this.value,e=this.styles,n=this.Vi(t);let i,s,r,o,a=this.version;this.ov=t;let l=0;const c=n.length;for(;l<c;++l)s=n[l],r=s[0],o=s[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Bl.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let n="";null!=e&&Vl(e.indexOf)&&e.includes("!important")&&(n="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,n)}bind(t){this.value=this.ov=this.obj.style.cssText}}class Yf{constructor(t,e,n){this.handler=n,this.type=7,this.v="",this.ov="",this.H=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.H=!0,this.handler.config.readonly||0!=(64&e)||this.K(e))}K(t){var e;this.H&&(this.H=!1,this.o[this.k]=null!==(e=this.v)&&void 0!==e?e:this.handler.config.default,0==(2&t)&&this.queue.add(this))}handleEvent(){this.ov=this.v,this.v=this.o[this.k],this.ov!==this.v&&(this.H=!1,this.queue.add(this))}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.v=this.ov=this.o[this.k])}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.handler.dispose()}flush(){Gf=this.ov,this.ov=this.v,this.subs.notify(this.v,Gf,0)}}qs(Yf),Gs(Yf);const Jf="http://www.w3.org/1999/xlink",tg="http://www.w3.org/XML/1998/namespace",eg="http://www.w3.org/2000/xmlns/",ng=Object.assign(Ul(),{"xlink:actuate":["actuate",Jf],"xlink:arcrole":["arcrole",Jf],"xlink:href":["href",Jf],"xlink:role":["role",Jf],"xlink:show":["show",Jf],"xlink:title":["title",Jf],"xlink:type":["type",Jf],"xml:lang":["lang",tg],"xml:space":["space",tg],xmlns:["xmlns",eg],"xmlns:xlink":["xlink",eg]}),ig=new Ka;ig.type=6;class sg{constructor(t){var e;this.type=null!==(e=t.type)&&void 0!==e?e:Yf,this.events=t.events,this.readonly=t.readonly,this.default=t.default}}class rg{constructor(t,e,n,i){this.locator=t,this.platform=e,this.dirtyChecker=n,this.svgAnalyzer=i,this.allowDirtyCheck=!0,this.ji=Ul(),this.Ni=Ul(),this.Wi=Ul(),this.Hi=Ul();const s=["change","input"],r={events:s,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:s,default:0},checked:{type:qf,events:s},files:{events:s,readonly:!0}},SELECT:{value:{type:Qf,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){Kn.aliasTo(Ya,rg).register(t),Kn.singleton(Ya,rg).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,n){var i,s;const r=this.ji;let o;if(Dl(t))o=null!==(i=r[t])&&void 0!==i?i:r[t]=Ul(),null==o[e]?o[e]=new sg(n):og(t,e);else for(const n in t){o=null!==(s=r[n])&&void 0!==s?s:r[n]=Ul();const i=t[n];for(e in i)null==o[e]?o[e]=new sg(i[e]):og(n,e)}}useConfigGlobal(t,e){const n=this.Ni;if("object"==typeof t)for(const e in t)null==n[e]?n[e]=new sg(t[e]):og("*",e);else null==n[t]?n[t]=new sg(e):og("*",t)}getAccessor(t,e,n){var i;if(e in this.Hi||e in(null!==(i=this.Wi[t.tagName])&&void 0!==i?i:Yn))return this.getObserver(t,e,n);switch(e){case"src":case"href":case"role":return Nf;default:{const n=ng[e];return void 0!==n?zf.forNs(n[1]):jl(t,e,this.svgAnalyzer)?Nf:ig}}}overrideAccessor(t,e){var n,i,s,r;let o;if(Dl(t))o=null!==(n=(s=this.Wi)[t])&&void 0!==n?n:s[t]=Ul(),o[e]=!0;else for(const e in t)for(const n of t[e])o=null!==(i=(r=this.Wi)[e])&&void 0!==i?i:r[e]=Ul(),o[n]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Hi[e]=!0}getObserver(t,e,n){var i,s;switch(e){case"role":return Nf;case"class":return new Zh(t);case"css":case"style":return new Xf(t)}const r=null!==(s=null===(i=this.ji[t.tagName])||void 0===i?void 0:i[e])&&void 0!==s?s:this.Ni[e];if(null!=r)return new r.type(t,e,new Sd(r),n,this.locator);const o=ng[e];if(void 0!==o)return zf.forNs(o[1]);if(jl(t,e,this.svgAnalyzer))return Nf;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw new Error(`AUR0652:${String(e)}`)}return new Qa(t,e)}}function og(t,e){throw new Error(`AUR0653:${String(e)}@${t}`)}rg.inject=[yn,Ac,Va,Cc];class ag{constructor(t){this.oL=t}bind(t,e,n,...i){if(0===i.length)throw new Error("AUR0802");if(n.mode!==Ns.twoWay&&n.mode!==Ns.fromView)throw new Error("AUR0803");const s=this.oL.getObserver(n.target,n.targetProperty);if(!s.handler)throw new Error("AUR0804");n.targetObserver=s;const r=s.handler;s.originalHandler=r,s.handler=new Sd(new sg({default:r.config.default,events:i,readonly:r.config.readonly}))}unbind(t,e,n){n.targetObserver.handler.dispose(),n.targetObserver.handler=n.targetObserver.originalHandler,n.targetObserver.originalHandler=null}}ag.inject=[Xa],Wi("updateTrigger")(ag);class lg{constructor(t,e){this.zi=t,this.p=e,this.Gi=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Xi():this.Gi=!0}attached(){this.Gi&&(this.Gi=!1,this.Xi()),this.zi.addEventListener("focus",this),this.zi.addEventListener("blur",this)}afterDetachChildren(){const t=this.zi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Ki||(this.value=!1)}Xi(){const t=this.zi,e=this.Ki,n=this.value;n&&!e?t.focus():!n&&e&&t.blur()}get Ki(){return this.zi===this.p.document.activeElement}}lg.inject=[rd,Ac],Sl([ql({mode:Ns.twoWay})],lg.prototype,"value",void 0),bh("focus")(lg);let cg=class{constructor(t,e,n){this.el=t,this.p=e,this.Yi=!1,this.Zi=null,this.$val="",this.$prio="",this.update=()=>{this.Zi=null,Boolean(this.value)!==this.Ji&&(this.Ji===this.Qi?(this.Ji=!this.Qi,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Ji=this.Qi,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.Ji=this.Qi="hide"!==n.alias}binding(){this.Yi=!0,this.update()}detaching(){var t;this.Yi=!1,null===(t=this.Zi)||void 0===t||t.cancel(),this.Zi=null}valueChanged(){this.Yi&&null===this.Zi&&(this.Zi=this.p.domWriteQueue.queueTask(this.update))}};Sl([ql],cg.prototype,"value",void 0),cg=Sl([Al(0,rd),Al(1,Ac),Al(2,Id)],cg),function(...t){return function(e){const n=Ni("aliases"),i=Mi(n,e);void 0===i?Bi(n,t,e):i.push(...t)}}("hide")(cg),bh("show")(cg);class hg{constructor(t,e,n){this.id=qe("au$component"),this.strict=!1,this.p=n,this.te=n.document.createElement("div"),this.view=t.create(),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)cd.set(t,e);else{const n=t.childNodes;for(let t=0,i=n.length;t<i;++t)cd.set(n[t],e)}}(this.view.nodes,e)}attaching(t,e,n){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const i=this.te=this.ie();return this.view.setHost(i),this.ee(t,i,n)}detaching(t,e,n){return this.se(t,this.te,n)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.te,n=this.te=this.ie();if(e===n)return;this.view.setHost(n);const i=Ye(this.se(null,n,t.flags),(()=>this.ee(null,n,t.flags)));i instanceof Promise&&i.catch((t=>{throw t}))}ee(t,e,n){const{activating:i,callbackContext:s,view:r}=this;return r.setHost(e),Ye(null==i?void 0:i.call(s,e,r),(()=>this.ne(t,e,n)))}ne(t,e,n){const{$controller:i,view:s}=this;return null!==t?Ye(s.activate(null!=t?t:s,i,n,i.scope),(()=>this.re(e))):(s.nodes.appendTo(e),this.re(e))}re(t){const{activated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}se(t,e,n){const{deactivating:i,callbackContext:s,view:r}=this;return Ye(null==i?void 0:i.call(s,e,r),(()=>this.oe(t,e,n)))}oe(t,e,n){const{$controller:i,view:s}=this;return null!==t?Ye(s.deactivate(t,i,n),(()=>this.le(e))):(s.nodes.remove(),this.le(e))}le(t){const{deactivated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}ie(){const t=this.p,e=t.document;let n=this.target,i=this.renderContext;if(""===n){if(this.strict)throw new Error("AUR0811");return e.body}if(Dl(n)){let s=e;Dl(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(s=i),n=s.querySelector(n)}if(n instanceof t.Node)return n;if(null==n){if(this.strict)throw new Error("AUR0812");return e.body}return n}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}hg.inject=[uu,ad,Ac],Sl([ql({primary:!0})],hg.prototype,"target",void 0),Sl([ql({callback:"targetChanged"})],hg.prototype,"renderContext",void 0),Sl([ql()],hg.prototype,"strict",void 0),Sl([ql()],hg.prototype,"deactivating",void 0),Sl([ql()],hg.prototype,"activating",void 0),Sl([ql()],hg.prototype,"deactivated",void 0),Sl([ql()],hg.prototype,"activated",void 0),Sl([ql()],hg.prototype,"callbackContext",void 0),wh("portal")(hg);class ug extends class{constructor(t,e,n){this.fs=n,this.id=qe("au$component"),this.view=t.create().setLocation(e)}attaching(t,e,n){const{$controller:i}=this;return this.view.activate(t,i,n|this.fs,i.scope)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}{constructor(t,e){super(t,e,32)}}ug.inject=[uu,ad],wh("observe-shallow")(ug);class dg{constructor(t,e,n){this.ifFactory=t,this.location=e,this.work=n,this.id=qe("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.he=!1,this.ae=0}attaching(t,e,n){let i;const s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;return Ye(this.pending,(()=>{var e;o()&&(this.pending=void 0,i=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=i&&(i.setLocation(this.location),this.pending=Ye(i.activate(t,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e,n){return this.he=!0,Ye(this.pending,(()=>{var e;this.he=!1,this.pending=void 0,null===(e=this.view)||void 0===e||e.deactivate(t,this.$controller,n)}))}valueChanged(t,e,n){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;this.work.start();const i=this.view,s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;let a;return Ye(Ye(this.pending,(()=>this.pending=Ye(null==i?void 0:i.deactivate(i,s,n),(()=>{var e;if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=a))return a.setLocation(this.location),Ye(a.activate(a,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var t,e;null===(t=this.ifView)||void 0===t||t.dispose(),null===(e=this.elseView)||void 0===e||e.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}dg.inject=[uu,ad,Ju],Sl([ql],dg.prototype,"value",void 0),Sl([ql({set:t=>""===t||!!t&&"false"!==t})],dg.prototype,"cache",void 0),wh("if")(dg);class pg{constructor(t){this.factory=t,this.id=qe("au$component")}link(t,e,n,i){const s=t.children,r=s[s.length-1];if(r instanceof dg)r.elseFactory=this.factory;else{if(!(r.viewModel instanceof dg))throw new Error("AUR0810");r.viewModel.elseFactory=this.factory}}}function fg(t){t.dispose()}pg.inject=[uu],wh({name:"else"})(pg);const gg=[38962,36913];class vg{constructor(t,e,n){this.l=t,this.ce=e,this.f=n,this.id=qe("au$component"),this.views=[],this.key=void 0,this.ue=void 0,this.fe=!1,this.de=!1,this.me=null,this.ve=void 0,this.ge=!1}binding(t,e,n){const i=this.ce.bindings,s=i.length;let r,o,a=0;for(;s>a;++a)if(r=i[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.sourceExpression,this.pe=r;let t=o.iterable;for(;null!=t&&gg.includes(t.$kind);)t=t.expression,this.fe=!0;this.me=t;break}this.we(n);const l=o.declaration;(this.ge=90137===l.$kind||106521===l.$kind)||(this.local=l.evaluate(n,this.$controller.scope,r.locator,null))}attaching(t,e,n){return this.be(n),this.xe(t,n)}detaching(t,e,n){return this.we(n),this.ye(t,n)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.we(t),this.be(t);const n=Ye(this.ye(null,t),(()=>this.xe(null,t)));n instanceof Promise&&n.catch(Zl)}handleCollectionChange(t,e){const{$controller:n}=this;if(n.isActive){if(this.fe){if(this.de)return;return this.de=!0,this.items=this.forOf.iterable.evaluate(e,n.scope,this.pe.locator,null),void(this.de=!1)}if(e|=n.flags,this.be(e),void 0===t){const t=Ye(this.ye(null,e),(()=>this.xe(null,e)));t instanceof Promise&&t.catch(Zl)}else{const n=this.views.length,i=function(t){let e=0,n=0,i=0;const s=function(t){const e=t.slice();return e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t),r=s.length;for(;i<r;++i){for(;s.deletedItems[n]<=i-e;)++n,--e;-2===s[i]?++e:s[i]+=e}return s}(t);if(i.deletedItems.length>0){i.deletedItems.sort(He);const t=Ye(this.ke(i,e),(()=>this.Ce(n,i,e)));t instanceof Promise&&t.catch(Zl)}else this.Ce(n,i,e)}}}we(t){var e;const n=this.$controller.scope;let i=this.Ae,s=this.fe;s&&(i=this.Ae=null!==(e=this.me.evaluate(t,n,this.pe.locator,null))&&void 0!==e?e:null,s=this.fe=!Object.is(this.items,i));const r=this.ue;if(4&t)void 0!==r&&r.unsubscribe(this);else if(this.$controller.isActive){const t=this.ue=function(t){let e;return t instanceof Array?e=Cr(t):t instanceof Map?e=Wr(t):t instanceof Set&&(e=Br(t)),e}(s?i:this.items);r!==t&&r&&r.unsubscribe(this),t&&t.subscribe(this)}}be(t){const e=this.items;if(e instanceof Array)return void(this.ve=e);if(void 0===this.forOf)return;const n=[];this.forOf.iterate(t,e,((t,e,i)=>{n[e]=i})),this.ve=n}xe(t,e){let n,i,s,r;const{$controller:o,f:a,local:l,l:c,items:h}=this,u=o.scope,d=this.forOf,p=d.count(e,h),f=this.views=Array(p);if(d.iterate(e,h,((h,g,v)=>{s=f[g]=a.create().setLocation(c),s.nodes.unlink(),this.ge?d.declaration.assign(e,r=zi.fromParent(u,Di.create()),this.pe.locator,v):r=zi.fromParent(u,Di.create(l,v)),yg(r.overrideContext,g,p),i=s.activate(null!=t?t:s,o,e,r),i instanceof Promise&&(null!=n?n:n=[]).push(i)})),void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ye(t,e){let n,i,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),i=s.deactivate(null!=t?t:s,a,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ke(t,e){let n,i,s;const{$controller:r,views:o}=this,a=t.deletedItems,l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),i=s.deactivate(s,r,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);c=0;let h=0;for(;l>c;++c)h=a[c]-c,o.splice(h,1);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}Ce(t,e,n){var i;let s,r,o,a,l=0;const{$controller:c,f:h,local:u,ve:d,l:p,views:f}=this,g=e.length;for(;g>l;++l)-2===e[l]&&(o=h.create(),f.splice(l,0,o));if(f.length!==g)throw new Error(`AUR0814:${f.length}!=${g}`);const v=c.scope,m=e.length;!function(t,e){const n=t.slice(),i=e.length;let s=0,r=0;for(;s<i;)r=e[s],-2!==r&&(t[s]=n[r]),++s}(f,e);const b=function(t){const e=t.length;e>mg&&(mg=e,bg=new Int32Array(e),wg=new Int32Array(e));let n=0,i=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=bg[n],s=t[o],-2!==s&&s<i){wg[r]=o,bg[++n]=r;continue}for(a=0,l=n;a<l;)c=a+l>>1,s=t[bg[c]],-2!==s&&s<i?a=c+1:l=c;s=t[bg[a]],(i<s||-2===s)&&(a>0&&(wg[r]=bg[a-1]),bg[a]=r)}r=++n;const h=new Int32Array(r);for(i=bg[n-1];n-- >0;)h[n]=i,i=wg[i];for(;r-- >0;)bg[r]=0;return h}(e),w=b.length;let y,x=w-1;for(l=m-1;l>=0;--l)o=f[l],y=f[l+1],o.nodes.link(null!==(i=null==y?void 0:y.nodes)&&void 0!==i?i:p),-2===e[l]?(this.ge?this.forOf.declaration.assign(n,a=zi.fromParent(v,Di.create()),this.pe.locator,d[l]):a=zi.fromParent(v,Di.create(u,d[l])),yg(a.overrideContext,l,m),o.setLocation(p),r=o.activate(o,c,n,a),r instanceof Promise&&(null!=s?s:s=[]).push(r)):x<0||1===w||l!==b[x]?(yg(o.scope.overrideContext,l,m),o.nodes.insertBefore(o.location)):(t!==m&&yg(o.scope.overrideContext,l,m),--x);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(fg),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}vg.inject=[ad,Bu,uu],Sl([ql],vg.prototype,"items",void 0),wh("repeat")(vg);let mg=16,bg=new Int32Array(mg),wg=new Int32Array(mg);function yg(t,e,n){const i=0===e,s=e===n-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=s,t.$middle=!i&&!s,t.$even=r,t.$odd=!r,t.$length=n}class xg{constructor(t,e){this.id=qe("au$component"),this.id=qe("au$component"),this.view=t.create().setLocation(e)}valueChanged(t,e,n){const i=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(i.isActive&&null!=s)for(r=zi.fromParent(i.scope,void 0===t?{}:t),a=s.length;a>o;++o)s[o].$bind(2,r)}attaching(t,e,n){const{$controller:i,value:s}=this,r=zi.fromParent(i.scope,void 0===s?{}:s);return this.view.activate(t,i,n,r)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}xg.inject=[uu,ad],Sl([ql],xg.prototype,"value",void 0),wh("with")(xg);let kg=class{constructor(t,e){this.f=t,this.l=e,this.id=qe("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return this.queue((()=>i.activate(t,s,n,s.scope))),this.queue((()=>this.swap(t,n,this.value))),this.promise}detaching(t,e,n){return this.queue((()=>this.view.deactivate(t,this.$controller,n))),this.promise}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}valueChanged(t,e,n){this.$controller.isActive&&this.queue((()=>this.swap(null,n,this.value)))}caseChanged(t,e){this.queue((()=>this.Re(t,e)))}Re(t,e){const n=t.isMatch(this.value,e),i=this.activeCases,s=i.length;if(!n)return s>0&&i[0].id===t.id?this.Se(null,e):void 0;if(s>0&&i[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,n=e.indexOf(t);for(let t=n,i=e.length;t<i&&o;t++){const n=e[t];r.push(n),o=n.fallThrough}}else r.push(t);return Ye(this.Se(null,e,r),(()=>(this.activeCases=r,this.Ee(null,e))))}swap(t,e,n){const i=[];let s=!1;for(const t of this.cases)if((s||t.isMatch(n,e))&&(i.push(t),s=t.fallThrough),i.length>0&&!s)break;const r=this.defaultCase;return 0===i.length&&void 0!==r&&i.push(r),Ye(this.activeCases.length>0?this.Se(t,e,i):void 0,(()=>{if(this.activeCases=i,0!==i.length)return this.Ee(t,e)}))}Ee(t,e){const n=this.$controller;if(!n.isActive)return;const i=this.activeCases,s=i.length;if(0===s)return;const r=n.scope;return 1===s?i[0].activate(t,e,r):Je(...i.map((n=>n.activate(t,e,r))))}Se(t,e,n=[]){const i=this.activeCases,s=i.length;if(0!==s){if(1===s){const s=i[0];return n.includes(s)?void 0:(i.length=0,s.deactivate(t,e))}return Ye(Je(...i.reduce(((i,s)=>(n.includes(s)||i.push(s.deactivate(t,e)),i)),[])),(()=>{i.length=0}))}}queue(t){const e=this.promise;let n;n=this.promise=Ye(Ye(e,t),(()=>{this.promise===n&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};Sl([ql],kg.prototype,"value",void 0),kg=Sl([wh("switch"),Al(0,uu),Al(1,ad)],kg);let Sg=class{constructor(t,e,n,i){this.f=t,this.Be=e,this.l=n,this.id=qe("au$component"),this.fallThrough=!1,this.view=void 0,this.Ie=i.config.level<=1,this.Ut=i.scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,n,i){const s=t.parent,r=null==s?void 0:s.viewModel;if(!(r instanceof kg))throw new Error("AUR0815");this.$switch=r,this.linkToSwitch(r)}detaching(t,e,n){return this.deactivate(t,n)}isMatch(t,e){this.Ut.debug("isMatch()");const n=this.value;return Array.isArray(n)?(void 0===this.ue&&(this.ue=this.Te(e,n)),n.includes(t)):n===t}valueChanged(t,e,n){var i;Array.isArray(t)?(null===(i=this.ue)||void 0===i||i.unsubscribe(this),this.ue=this.Te(n,t)):void 0!==this.ue&&this.ue.unsubscribe(this),this.$switch.caseChanged(this,n)}handleCollectionChange(t,e){this.$switch.caseChanged(this,e)}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(null!=t?t:i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(null!=t?t:n,this.$controller,e)}dispose(){var t,e;null===(t=this.ue)||void 0===t||t.unsubscribe(this),null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Te(t,e){const n=this.Be.getArrayObserver(e);return n.subscribe(this),n}accept(t){var e;return!0===this.$controller.accept(t)||(null===(e=this.view)||void 0===e?void 0:e.accept(t))}};Sg.inject=[uu,Xa,ad,li],Sl([ql],Sg.prototype,"value",void 0),Sl([ql({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:Ns.oneTime})],Sg.prototype,"fallThrough",void 0),Sg=Sl([wh("case")],Sg);let Ag=class extends Sg{linkToSwitch(t){if(void 0!==t.defaultCase)throw new Error("AUR0816");t.defaultCase=this}};Ag=Sl([wh("default-case")],Ag);let Cg=class{constructor(t,e,n,i){this.f=t,this.l=e,this.p=n,this.id=qe("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=i.scopeTo("promise.resolve")}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return Ye(i.activate(t,s,n,this.viewScope=zi.fromParent(s.scope,{})),(()=>this.swap(t,n)))}valueChanged(t,e,n){this.$controller.isActive&&this.swap(null,n)}swap(t,e){var n,i;const s=this.value;if(!(s instanceof Promise))return void this.logger.warn(`The value '${String(s)}' is not a promise. No change will be done.`);const r=this.p.domWriteQueue,o=this.fulfilled,a=this.rejected,l=this.pending,c=this.viewScope;let h;const u={reusable:!1},d=()=>{Je(h=(this.preSettledTask=r.queueTask((()=>Je(null==o?void 0:o.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==l?void 0:l.activate(t,e,c))),u)).result.catch((t=>{if(!(t instanceof hl))throw t})),s.then((n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>Je(null==l?void 0:l.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==o?void 0:o.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())}),(n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>Je(null==l?void 0:l.deactivate(t,e),null==o?void 0:o.deactivate(t,e),null==a?void 0:a.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())})))};1===(null===(n=this.postSettledTask)||void 0===n?void 0:n.status)?this.postSettlePromise.then(d):(null===(i=this.postSettledTask)||void 0===i||i.cancel(),d())}detaching(t,e,n){var i,s;return null===(i=this.preSettledTask)||void 0===i||i.cancel(),null===(s=this.postSettledTask)||void 0===s||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};Sl([ql],Cg.prototype,"value",void 0),Cg=Sl([wh("promise"),Al(0,uu),Al(1,ad),Al(2,Ac),Al(3,li)],Cg);let Eg=class{constructor(t,e){this.f=t,this.l=e,this.id=qe("au$component"),this.view=void 0}link(t,e,n,i){Ig(t).pending=this}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};Sl([ql({mode:Ns.toView})],Eg.prototype,"value",void 0),Eg=Sl([wh("pending"),Al(0,uu),Al(1,ad)],Eg);let Tg=class{constructor(t,e){this.f=t,this.l=e,this.id=qe("au$component"),this.view=void 0}link(t,e,n,i){Ig(t).fulfilled=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};Sl([ql({mode:Ns.fromView})],Tg.prototype,"value",void 0),Tg=Sl([wh("then"),Al(0,uu),Al(1,ad)],Tg);let $g=class{constructor(t,e){this.f=t,this.l=e,this.id=qe("au$component"),this.view=void 0}link(t,e,n,i){Ig(t).rejected=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};function Ig(t){const e=t.parent,n=null==e?void 0:e.viewModel;if(n instanceof Cg)return n;throw new Error("AUR0813")}Sl([ql({mode:Ns.fromView})],$g.prototype,"value",void 0),$g=Sl([wh("catch"),Al(0,uu),Al(1,ad)],$g);let Rg=class{"promise.resolve"(t,e,n){return new cc(t,e,"promise","bind")}};Rg=Sl([pc({pattern:"promise.resolve",symbols:""})],Rg);let Og=class{then(t,e,n){return new cc(t,e,"then","from-view")}};Og=Sl([pc({pattern:"then",symbols:""})],Og);let Pg=class{catch(t,e,n){return new cc(t,e,"catch","from-view")}};Pg=Sl([pc({pattern:"catch",symbols:""})],Pg);class Lg{constructor(t,e,n){this.node=t,this.instructions=e,this.De=n,this.Pe=void 0}get definition(){return void 0===this.Pe&&(this.Pe=Oh.create({name:zh.generateName(),template:this.node,needsCompile:Dl(this.node),instructions:this.instructions,dependencies:this.De})),this.Pe}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return t.root.get(yu).getViewFactory(this.definition,t.createChild().register(...this.De))}mergeInto(t,e,n){t.appendChild(this.node),e.push(...this.instructions),n.push(...this.De)}}function Mg(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const o=n[r];switch(typeof o){case"string":e.appendChild(t.document.createTextNode(o));break;case"object":o instanceof t.Node?e.appendChild(o):"mergeInto"in o&&o.mergeInto(e,i,s)}}}function Ug(t,e){const n=e.to;return void 0!==n&&"subject"!==n&&"composing"!==n&&(t[n]=e),t}class Bg{constructor(t,e,n,i){this.p=t,this.$e=e,this.Oe=n,this.r=i,this.id=qe("au$component"),this.component=void 0,this.composing=!1,this.view=void 0,this.Le=void 0,this.qe=e.props.reduce(Ug,{})}attaching(t,e,n){const{component:i,view:s}=this;return void 0===s||this.Le!==i?(this.Le=i,this.composing=!0,this.compose(void 0,i,t,n)):this.compose(s,i,t,n)}detaching(t,e,n){return this.oe(this.view,t,n)}componentChanged(t,e,n){const{$controller:i}=this;if(!i.isActive)return;if(this.Le===t)return;this.Le=t,this.composing=!0,n|=i.flags;const s=Ye(this.oe(this.view,null,n),(()=>this.compose(void 0,t,null,n)));s instanceof Promise&&s.catch((t=>{throw t}))}compose(t,e,n,i){return Ye(void 0===t?Ye(e,(t=>this.Ue(t,i))):t,(t=>this.ne(this.view=t,n,i)))}oe(t,e,n){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,n)}ne(t,e,n){const{$controller:i}=this;return Ye(null==t?void 0:t.activate(null!=e?e:t,i,n,i.scope),(()=>{this.composing=!1}))}Ue(t,e){const n=this._e(t,e);if(n)return n.setLocation(this.$controller.location),n.lockScope(this.$controller.scope),n}_e(t,e){if(!t)return;const n=this.Oe.controller.container;if("object"==typeof t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(n);if("create"in t)return t.create();if("template"in t)return this.r.getViewFactory(Oh.getOrCreate(t),n).create()}if(Dl(t)){const e=n.find(zh,t);if(null==e)throw new Error(`AUR0809:${t}`);t=e.Type}return function(t,e,n,i){if(Dl(e))return function(t,e,n,i){const s=[],r=[],o=[],a=t.document.createElement(e);let l=!1;return n&&Object.keys(n).forEach((t=>{const e=n[t];Rd(e)?(l=!0,s.push(e)):a.setAttribute(t,e)})),l&&(a.className="au",r.push(s)),i&&Mg(t,a,i,r,o),new Lg(a,r,o)}(t,e,n,i);if(zh.isType(e))return function(t,e,n,i){const s=zh.getDefinition(e),r=[],o=[r],a=[],l=[],c=s.bindables,h=t.document.createElement(s.name);return h.className="au",a.includes(e)||a.push(e),r.push(new Nd(s,void 0,l,null,!1,void 0)),n&&Object.keys(n).forEach((t=>{const e=n[t];Rd(e)?l.push(e):void 0===c[t]?l.push(new qd(e,t)):l.push(new Bd(e,t))})),i&&Mg(t,h,i,o,a),new Lg(h,o,a)}(t,e,n,i);throw new Error("Invalid Tag or Type.")}(this.p,t,this.qe,this.$controller.host.childNodes).createView(n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Bg.inject=[Ac,Id,Nu,yu],Sl([ql],Bg.prototype,"component",void 0),Sl([ql({mode:Ns.fromView})],Bg.prototype,"composing",void 0),$h({name:"au-render",template:null,containerless:!0,capture:!0})(Bg);class Ng{constructor(t,e,n,i,s,r,o){this.c=t,this.parent=e,this.host=n,this.l=i,this.p=s,this.scopeBehavior="auto",this.Fe=void 0,this.r=t.get(yu),this.$e=r,this.Ve=o}static get inject(){return[wn,Bu,rd,ad,Ac,Id,An(Fg)]}get pending(){return this.Me}get composition(){return this.Fe}attaching(t,e,n){return this.Me=Ye(this.queue(new Vg(this.view,this.viewModel,this.model,void 0),t),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)}))}detaching(t){const e=this.Fe,n=this.Me;return this.Ve.invalidate(),this.Fe=this.Me=void 0,Ye(n,(()=>null==e?void 0:e.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Fe?this.Me=Ye(this.Me,(()=>Ye(this.queue(new Vg(this.view,this.viewModel,this.model,t),void 0),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)})))):this.Fe.update(this.model)}queue(t,e){const n=this.Ve,i=this.Fe;return Ye(n.create(t),(t=>n.isCurrent(t)?Ye(this.compose(t),(s=>n.isCurrent(t)?Ye(s.activate(e),(()=>n.isCurrent(t)?(this.Fe=s,Ye(null==i?void 0:i.deactivate(e),(()=>t))):Ye(s.controller.deactivate(s.controller,this.$controller,4),(()=>(s.controller.dispose(),t))))):(s.controller.dispose(),t))):t))}compose(t){let e,n,i;const{view:s,viewModel:r,model:o}=t.change,{c:a,host:l,$controller:c,l:h}=this,u=this.getDef(r),d=a.createChild(),p=null==h?l.parentNode:h.parentNode;if(null!==u){if(u.containerless)throw new Error("AUR0806");null==h?(n=l,i=()=>{}):(n=p.insertBefore(this.p.document.createElement(u.name),h),i=()=>{n.remove()}),e=this.getVm(d,r,n)}else n=null==h?l:h,e=this.getVm(d,r,n);const f=()=>{if(null!==u){const s=Cu.$el(d,e,n,{projections:this.$e.projections},u);return new Zg(s,(t=>s.activate(null!=t?t:s,c,2,c.scope.parentScope)),(t=>Ye(s.deactivate(null!=t?t:s,c,4),i)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}{const i=Oh.create({name:zh.generateName(),template:s}),r=this.r.getViewFactory(i,d),o=Cu.$view(r,c),a="auto"===this.scopeBehavior?zi.fromParent(this.parent.scope,e):zi.create(e);return dd(n)?o.setLocation(n):o.setHost(n),new Zg(o,(t=>o.activate(null!=t?t:o,c,2,a)),(t=>o.deactivate(null!=t?t:o,c,4)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}};return"activate"in e?Ye(e.activate(o),(()=>f())):f()}getVm(t,e,n){if(null==e)return new jg;if("object"==typeof e)return e;const i=this.p,s=dd(n);t.registerResolver(i.Element,t.registerResolver(rd,new Wn("ElementResolver",s?null:n))),t.registerResolver(ad,new Wn("IRenderLocation",s?n:null));const r=t.invoke(e);return t.registerResolver(e,new Wn("au-compose.viewModel",r)),r}getDef(t){const e=Vl(t)?t:null==t?void 0:t.constructor;return zh.isType(e)?zh.getDefinition(e):null}}Sl([ql],Ng.prototype,"view",void 0),Sl([ql],Ng.prototype,"viewModel",void 0),Sl([ql],Ng.prototype,"model",void 0),Sl([ql({set:t=>{if("scoped"===t||"auto"===t)return t;throw new Error("AUR0805")}})],Ng.prototype,"scopeBehavior",void 0),$h("au-compose")(Ng);class jg{}class Fg{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return Ye(t.load(),(t=>new zg(++this.id,t)))}invalidate(){this.id++}}class Vg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}load(){return Fl(this.view)||Fl(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new Dg(t,e,this.model,this.src))):new Dg(this.view,this.viewModel,this.model,this.src)}}class Dg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}}class zg{constructor(t,e){this.id=t,this.change=e}}class Zg{constructor(t,e,n,i,s){this.controller=t,this.start=e,this.stop=n,this.update=i,this.context=s,this.state=0}activate(t){if(0!==this.state)throw new Error(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw new Error("AUR0808");default:this.state=-1}}}class qg{constructor(t,e,n,i){var s,r;let o;this.je=null,this.Ne=null;const a=e.auSlot,l=null===(r=null===(s=n.instruction)||void 0===s?void 0:s.projections)||void 0===r?void 0:r[a.name];null==l?(o=i.getViewFactory(a.fallback,n.controller.container),this.We=!1):(o=i.getViewFactory(l,n.parent.controller.container),this.We=!0),this.Oe=n,this.view=o.create().setLocation(t)}static get inject(){return[ad,Id,Nu,yu]}binding(t,e,n){var i;let s;this.je=this.$controller.scope.parentScope,this.We&&(s=this.Oe.controller.scope.parentScope,(this.Ne=zi.fromParent(s,s.bindingContext)).overrideContext.$host=null!==(i=this.expose)&&void 0!==i?i:this.je.bindingContext)}attaching(t,e,n){return this.view.activate(t,this.$controller,n,this.We?this.Ne:this.je)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}exposeChanged(t){this.We&&null!=this.Ne&&(this.Ne.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Sl([ql],qg.prototype,"expose",void 0),$h({name:"au-slot",template:null,containerless:!0})(qg);const Hg=vn.createInterface("ISanitizer",(t=>t.singleton(class{sanitize(){throw new Error('"sanitize" method not implemented')}})));let Kg=class{constructor(t){this.He=t}toView(t){return null==t?null:this.He.sanitize(t)}};Kg=Sl([Al(0,Hg)],Kg),ts("sanitize")(Kg);let Wg=class{constructor(t){this.ze=t}toView(t,e){return this.ze.getViewComponentForObject(t,e)}};Wg=Sl([Al(0,bu)],Wg),ts("view")(Wg);const Qg=Mf,_g=Rf,Gg=Of,Xg=Pf,Yg=Uf,Jg=Bf,tv=Lf,ev=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return Kn.singleton(Gd,this).register(t)}compile(t,e,n){var i,s,r,o;const a=Oh.getOrCreate(t);if(null===a.template||void 0===a.template)return a;if(!1===a.needsCompile)return a;null!=n||(n=hf);const l=new af(t,e,n,null,null,void 0),c=Dl(a.template)||!t.enhance?l.ni.createTemplate(a.template):a.template,h="TEMPLATE"===c.nodeName&&null!=c.content,u=h?c.content:c,d=e.get(function(t){function e(t,n,i){vn.inject(e)(t,n,i)}return e.$isResolver=!0,e.resolve=function(e,n){return n.root===n?n.getAll(t,!1):n.has(t,!1)?n.getAll(t,!1).concat(n.root.getAll(t,!1)):n.root.getAll(t,!1)},e}(kf)),p=d.length;let f=0;if(p>0)for(;p>f;)null===(s=(i=d[f]).compiling)||void 0===s||s.call(i,c),++f;if(c.hasAttribute(wf))throw new Error("AUR0701");return this.ri(u,l),this.oi(u,l),Oh.create({...t,name:t.name||Ef(),dependencies:(null!==(r=t.dependencies)&&void 0!==r?r:Xn).concat(null!==(o=l.deps)&&void 0!==o?o:Xn),instructions:l.rows,surrogates:h?this.li(c,l):Xn,template:c,hasSlots:l.hasSlot,needsCompile:!1})}compileSpread(t,e,n,i){var s;const r=new af(t,n,hf,null,null,void 0),o=[],a=r.hi(i.nodeName.toLowerCase()),l=null!==a,c=r.ep,h=e.length;let u,d,p,f,g,v,m,b,w,y,x=0,k=null,S=null;for(;h>x;++x)if(u=e[x],w=u.target,y=u.rawValue,S=r.ai(u),null!==S&&(1&S.type)>0)df.node=i,df.attr=u,df.bindable=null,df.def=null,o.push(S.build(df));else if(k=r.ui(w),null===k)if(null===S){if(m=c.parse(y,1),l&&(f=vf.from(a,!1),g=f.attrs[w],void 0!==g)){m=c.parse(y,1),o.push(new _d(null==m?new Bd(y,g.property):new Od(m,g.property)));continue}if(null!=m)o.push(new Od(m,null!==(s=r.m.map(i,w))&&void 0!==s?s:Fe(w)));else switch(w){case"class":o.push(new Hd(y));break;case"style":o.push(new Kd(y));break;default:o.push(new qd(y,w))}}else{if(l&&(f=vf.from(a,!1),g=f.attrs[w],void 0!==g)){df.node=i,df.attr=u,df.bindable=g,df.def=a,o.push(new _d(S.build(df)));continue}df.node=i,df.attr=u,df.bindable=null,df.def=null,o.push(S.build(df))}else{if(k.isTemplateController)throw new Error(`AUR0703:${w}`);f=vf.from(k,!0),b=!1===k.noMultiBindings&&null===S&&lf(y),b?p=this.fi(i,y,k,r):(v=f.primary,null===S?(m=c.parse(y,1),p=[null===m?new Bd(y,v.property):new Od(m,v.property)]):(df.node=i,df.attr=u,df.bindable=v,df.def=k,p=[S.build(df)])),(null!=d?d:d=[]).push(new jd(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(w)?w:void 0,p))}return cf(),null!=d?d.concat(o):o}li(t,e){var n;const i=[],s=t.attributes,r=e.ep;let o,a,l,c,h,u,d,p,f,g,v,m,b=s.length,w=0,y=null,x=null;for(;b>w;++w){if(o=s[w],a=o.name,l=o.value,c=e.di.parse(a,l),v=c.target,m=c.rawValue,pf[v])throw new Error(`AUR0702:${a}`);if(x=e.ai(c),null!==x&&(1&x.type)>0)df.node=t,df.attr=c,df.bindable=null,df.def=null,i.push(x.build(df));else if(y=e.ui(v),null===y)if(null===x)if(f=r.parse(m,1),null!=f)t.removeAttribute(a),--w,--b,i.push(new Od(f,null!==(n=e.m.map(t,v))&&void 0!==n?n:Fe(v)));else switch(a){case"class":i.push(new Hd(m));break;case"style":i.push(new Kd(m));break;default:i.push(new qd(m,a))}else df.node=t,df.attr=c,df.bindable=null,df.def=null,i.push(x.build(df));else{if(y.isTemplateController)throw new Error(`AUR0703:${v}`);d=vf.from(y,!0),g=!1===y.noMultiBindings&&null===x&&lf(m),g?u=this.fi(t,m,y,e):(p=d.primary,null===x?(f=r.parse(m,1),u=[null===f?new Bd(m,p.property):new Od(f,p.property)]):(df.node=t,df.attr=c,df.bindable=p,df.def=y,u=[x.build(df)])),t.removeAttribute(a),--w,--b,(null!=h?h:h=[]).push(new jd(this.resolveResources?y:y.name,null!=y.aliases&&y.aliases.includes(v)?v:void 0,u))}}return cf(),null!=h?h.concat(i):i}oi(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.mi(t,e):this.vi(t,e);case 3:return this.gi(t,e);case 11:{let n=t.firstChild;for(;null!==n;)n=this.oi(n,e);break}}return t.nextSibling}mi(t,e){const n=t.attributes,i=n.length,s=[],r=e.ep;let o,a,l,c,h,u,d,p,f=!1,g=0;for(;i>g;++g)if(o=n[g],l=o.name,c=o.value,"to-binding-context"!==l){if(a=e.di.parse(l,c),u=a.target,d=a.rawValue,h=e.ai(a),null!==h)switch(h.name){case"to-view":case"bind":s.push(new Dd(r.parse(d,8),Fe(u)));continue;default:throw new Error(`AUR0704:${a.command}`)}p=r.parse(d,1),s.push(new Dd(null===p?new xs(d):p,Fe(u)))}else f=!0;return e.rows.push([new Vd(s,f)]),this.pi(t).nextSibling}vi(t,e){var n,i,s,r,o,a,l,c,h,u;const d=t.nextSibling,p=(null!==(n=t.getAttribute("as-element"))&&void 0!==n?n:t.nodeName).toLowerCase(),f=e.hi(p),g=null!==f,v=g&&null!=f.shadowOptions,m=!!(null==f?void 0:f.capture),b=m?[]:Xn,w=e.ep,y=this.debug?Jn:()=>{t.removeAttribute(S),--z,--D};let x,k,S,A,C,E,T,$,I,R,O,P,L,M,U,B,N,j,F,V=t.attributes,D=V.length,z=0,Z=null,q=!1,H=null,K=!0,W=!1;if("slot"===p){if(null==e.root.def.shadowOptions)throw new Error(`AUR0717:${e.root.def.name}`);e.root.hasSlot=!0}if(g&&(K=null===(i=f.processContent)||void 0===i?void 0:i.call(f.Type,t,e.p),V=t.attributes,D=V.length),e.root.def.enhance&&t.classList.contains("au"))throw new Error("AUR0705");for(;D>z;++z){switch(k=V[z],S=k.name,A=k.value,S){case"as-element":case"containerless":y(),W||(W="containerless"===S);continue}if(C=e.di.parse(S,A),H=e.ai(C),N=C.target,j=C.rawValue,m){if(null!=H&&1&H.type){y(),b.push(C);continue}if("au-slot"!==N&&(U=vf.from(f,!1),null==U.attrs[N]&&!(null===(s=e.ui(N))||void 0===s?void 0:s.isTemplateController))){y(),b.push(C);continue}}if(null!==H&&1&H.type)df.node=t,df.attr=C,df.bindable=null,df.def=null,(null!=E?E:E=[]).push(H.build(df)),y();else if(Z=e.ui(N),null===Z)if(null!==H)y(),g&&(U=vf.from(f,!1),$=U.attrs[N],void 0!==$)?(df.node=t,df.attr=C,df.bindable=$,df.def=f,(null!=T?T:T=[]).push(H.build(df))):(df.node=t,df.attr=C,df.bindable=null,df.def=null,(null!=E?E:E=[]).push(H.build(df)));else{if(g&&(U=vf.from(f,!1),$=U.attrs[N],void 0!==$)){L=w.parse(j,1),(null!=T?T:T=[]).push(null==L?new Bd(j,$.property):new Od(L,$.property)),y();continue}L=w.parse(j,1),null!=L&&(y(),(null!=E?E:E=[]).push(new Od(L,null!==(r=e.m.map(t,N))&&void 0!==r?r:Fe(N))))}else U=vf.from(Z,!0),q=!1===Z.noMultiBindings&&null===H&&lf(j),q?R=this.fi(t,j,Z,e):(B=U.primary,null===H?(L=w.parse(j,1),R=[null===L?new Bd(j,B.property):new Od(L,B.property)]):(df.node=t,df.attr=C,df.bindable=B,df.def=Z,R=[H.build(df)])),y(),Z.isTemplateController?(null!=O?O:O=[]).push(new Fd(uf,this.resolveResources?Z:Z.name,void 0,R)):(null!=I?I:I=[]).push(new jd(this.resolveResources?Z:Z.name,null!=Z.aliases&&Z.aliases.includes(N)?N:void 0,R))}if(cf(),this.wi(t)&&null!=E&&E.length>1&&this.bi(t,E),g&&(M=new Nd(this.resolveResources?f:f.name,void 0,null!=T?T:Xn,null,W,b),p===$f)){const n=t.getAttribute("name")||Tf,i=e.h("template"),s=e.xi();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?t.removeChild(r):i.content.appendChild(r),r=t.firstChild;this.oi(i.content,s),M.auSlot={name:n,fallback:Oh.create({name:Ef(),template:i,instructions:s.rows,needsCompile:!1})},t=this.yi(t,e)}if(null==E&&null==M&&null==I||(x=Xn.concat(null!=M?M:Xn,null!=I?I:Xn,null!=E?E:Xn),this.pi(t)),null!=O){let n;D=O.length-1,z=D,P=O[z],this.yi(t,e),"TEMPLATE"===t.nodeName?n=t:(n=e.h("template"),n.content.appendChild(t));const i=n,s=e.xi(null==x?[]:[x]);let r,a,h,u,d,m,b,w,y=0,k=0,S=t.firstChild,A=!1;if(!1!==K)for(;null!==S;)if(a=1===S.nodeType?S.getAttribute($f):null,null!==a&&S.removeAttribute($f),g)r=S.nextSibling,v||(A=3===S.nodeType&&""===S.textContent.trim(),A||(null!==(o=(l=null!=u?u:u={})[c=a||Tf])&&void 0!==o?o:l[c]=[]).push(S),t.removeChild(S)),S=r;else{if(null!==a)throw a=a||Tf,new Error(`AUR0706:${p}[${a}]`);S=S.nextSibling}if(null!=u){for(a in h={},u){for(n=e.h("template"),d=u[a],y=0,k=d.length;k>y;++y)m=d[y],"TEMPLATE"===m.nodeName?m.attributes.length>0?n.content.appendChild(m):n.content.appendChild(m.content):n.content.appendChild(m);w=e.xi(),this.oi(n.content,w),h[a]=Oh.create({name:Ef(),template:n,instructions:w.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=h}if(g&&(W||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!W&&!1!==K,F)if("TEMPLATE"===t.nodeName)this.oi(t.content,s);else for(S=t.firstChild;null!==S;)S=this.oi(S,s);for(P.def=Oh.create({name:Ef(),template:i,instructions:s.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});z-- >0;)P=O[z],n=e.h("template"),b=e.h("au-m"),b.classList.add("au"),n.content.appendChild(b),P.def=Oh.create({name:Ef(),template:n,needsCompile:!1,instructions:[[O[z+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([P])}else{null!=x&&e.rows.push(x);let n,i,s,r,o,l,c,d=t.firstChild,m=null,b=!1,w=0,y=0;if(!1!==K)for(;null!==d;)if(i=1===d.nodeType?d.getAttribute($f):null,null!==i&&d.removeAttribute($f),g)n=d.nextSibling,v||(b=3===d.nodeType&&""===d.textContent.trim(),b||(null!==(a=(h=null!=s?s:s={})[u=i||Tf])&&void 0!==a?a:h[u]=[]).push(d),t.removeChild(d)),d=n;else{if(null!==i)throw i=i||Tf,new Error(`AUR0706:${p}[${i}]`);d=d.nextSibling}if(null!=s){for(i in m={},s){for(l=e.h("template"),r=s[i],w=0,y=r.length;y>w;++w)o=r[w],"TEMPLATE"===o.nodeName?o.attributes.length>0?l.content.appendChild(o):l.content.appendChild(o.content):l.content.appendChild(o);c=e.xi(),this.oi(l.content,c),m[i]=Oh.create({name:Ef(),template:l,instructions:c.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=m}if(g&&(W||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!W&&!1!==K,F&&t.childNodes.length>0)for(d=t.firstChild;null!==d;)d=this.oi(d,e)}return d}gi(t,e){let n="",i=t;for(;null!==i&&3===i.nodeType;)n+=i.textContent,i=i.nextSibling;const s=e.ep.parse(n,1);if(null===s)return i;const r=t.parentNode;for(r.insertBefore(this.pi(e.h("au-m")),t),e.rows.push([new zd(s,!!e.def.isStrictBinding)]),t.textContent="",i=t.nextSibling;null!==i&&3===i.nodeType;)r.removeChild(i),i=t.nextSibling;return t.nextSibling}fi(t,e,n,i){const s=vf.from(n,!0),r=e.length,o=[];let a,l,c,h,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){l=e.slice(p,g);break}if(void 0===l&&(l=e.slice(p)),h=i.di.parse(a,l),u=i.ai(h),d=s.attrs[h.target],null==d)throw new Error(`AUR0707:${n.name}.${h.target}`);for(null===u?(c=i.ep.parse(l,1),o.push(null===c?new Bd(l,d.property):new Od(c,d.property))):(df.node=t,df.attr=h,df.bindable=d,df.def=n,o.push(u.build(df)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,l=void 0}return cf(),o}ri(t,e){var n,i;const s=t,r=ze(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===s.childElementCount)throw new Error("AUR0708");const a=new Set,l=[];for(const t of r){if(t.parentNode!==s)throw new Error("AUR0709");const n=yf(t,a),i=class{},r=t.content,o=ze(r.querySelectorAll("bindable")),c=Wl.for(i),h=new Set,u=new Set;for(const t of o){if(t.parentNode!==r)throw new Error("AUR0710");const e=t.getAttribute("property");if(null===e)throw new Error("AUR0711");const n=t.getAttribute("attribute");if(null!==n&&u.has(n)||h.has(e))throw new Error(`AUR0712:${e}+${n}`);null!==n&&u.add(n),h.add(e),c.add({property:e,attribute:null!=n?n:void 0,mode:xf(t)}),t.getAttributeNames().filter((t=>!bf.includes(t))).length,r.removeChild(t)}l.push(i),e.ki(zh.define({name:n,template:t},i)),s.removeChild(t)}let c=0;const h=l.length;for(;h>c;++c)zh.getDefinition(l[c]).dependencies.push(...null!==(n=e.def.dependencies)&&void 0!==n?n:Xn,...null!==(i=e.deps)&&void 0!==i?i:Xn)}wi(t){return"INPUT"===t.nodeName&&1===ff[t.type]}bi(t,e){if("INPUT"===t.nodeName){const t=e;let n,i,s,r=0;for(let e=0;e<t.length&&r<3;e++)switch(s=t[e],s.to){case"model":case"value":case"matcher":n=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==n&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}pi(t){return t.classList.add("au"),t}yi(t,e){const n=t.parentNode,i=e.h("au-m");return this.pi(n.insertBefore(i,t)),n.removeChild(t),i}},rg],nv=[yc,wc,Sc],iv=[Kp,zp,qp,Zp,Hp,Wp,Qp,ef,_p,Gp,Xp,tf,Jp,Yp,nf],sv=[Qg,_g,Gg,Xg,Yg,Jg,tv,Kg,Wg,ug,dg,pg,vg,xg,kg,Sg,Ag,Cg,Eg,Tg,$g,Rg,Og,Pg,jf,Vf,ag,Bg,Ng,hg,lg,cg,qg],rv=[cp,hp,op,ap,lp,ep,np,ip,sp,rp,mp,kp,bp,wp,yp,xp,fp,Sp],ov=function t(e){return{optionsProvider:e,register(t){const n={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(n),t.register(Kn.instance(Bs,n.coercingOptions),...ev,...sv,...nv,...iv,...rv)},customize:n=>t(null!=n?n:e)}}(Jn),av=vn.createInterface("IAurelia");var lv;!function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(lv||(lv={}));const cv=vn.createInterface("IDialogService"),hv=vn.createInterface("IDialogController"),uv=vn.createInterface("IDialogDomRenderer"),dv=vn.createInterface("IDialogDom"),pv=vn.createInterface("IDialogGlobalSettings");class fv{constructor(t,e){this.wasCancelled=t,this.dialog=e}static create(t,e){return new fv(t,e)}}class gv{constructor(t,e){this.status=t,this.value=e}static create(t,e){return new gv(t,e)}}var vv;!function(t){t.Ok="ok",t.Error="error",t.Cancel="cancel",t.Abort="abort"}(vv||(vv={}));class mv{constructor(t,e){this.p=t,this.ctn=e,this.closed=new Promise(((t,e)=>{this.Pt=t,this.St=e}))}static get inject(){return[Ac,wn]}activate(t){var e;const n=this.ctn.createChild(),{model:i,template:s,rejectOnCancel:r}=t,o=n.get(uv),a=null!==(e=t.host)&&void 0!==e?e:this.p.document.body,l=this.dom=o.render(a,t),c=n.has(od,!0)?n.get(od):null,h=l.contentHost;return this.settings=t,null!=c&&c.contains(a)||n.register(Kn.instance(od,a)),n.register(Kn.instance(rd,h),Kn.instance(dv,l)),new Promise((e=>{var s,r;const o=Object.assign(this.cmp=this.getOrCreateVm(n,t,h),{$dialog:this});e(null===(r=null===(s=o.canActivate)||void 0===s?void 0:s.call(o,i))||void 0===r||r)})).then((e=>{var o;if(!0!==e){if(l.dispose(),r)throw wv(null,"Dialog activation rejected");return fv.create(!0,this)}const a=this.cmp;return Ye(null===(o=a.activate)||void 0===o?void 0:o.call(a,i),(()=>{var e;const i=this.controller=Cu.$el(n,a,h,null,Oh.create(null!==(e=this.getDefinition(a))&&void 0!==e?e:{name:zh.generateName(),template:s}));return Ye(i.activate(i,null,2),(()=>{var e;return l.overlay.addEventListener(null!==(e=t.mouseEvent)&&void 0!==e?e:"click",this),fv.create(!1,this)}))}))}),(t=>{throw l.dispose(),t}))}deactivate(t,e){if(this.es)return this.es;let n=!0;const{controller:i,dom:s,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,l=gv.create(t,e),c=new Promise((c=>{var h,u;c(Ye(null===(u=null===(h=r.canDeactivate)||void 0===h?void 0:h.call(r,l))||void 0===u||u,(c=>{var h;if(!0!==c){if(n=!1,this.es=void 0,a)throw wv(null,"Dialog cancellation rejected");return gv.create("abort")}return Ye(null===(h=r.deactivate)||void 0===h?void 0:h.call(r,l),(()=>Ye(i.deactivate(i,null,4),(()=>(s.dispose(),s.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===t?this.St(wv(e,"Dialog cancelled with a rejection on cancel")):this.Pt(l),l)))))})))})).catch((t=>{throw this.es=void 0,t}));return this.es=n?c:void 0,c}ok(t){return this.deactivate("ok",t)}cancel(t){return this.deactivate("cancel",t)}error(t){const e=function(t){const e=new Error;return e.wasCancelled=!1,e.value=t,e}(t);return new Promise((t=>{var n,i;return t(Ye(null===(i=(n=this.cmp).deactivate)||void 0===i?void 0:i.call(n,gv.create("error",e)),(()=>Ye(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.St(e)})))))}))}handleEvent(t){this.settings.overlayDismiss&&!this.dom.contentHost.contains(t.target)&&this.cancel()}getOrCreateVm(t,e,n){const i=e.component;if(null==i)return new bv;if("object"==typeof i)return i;const s=this.p;return t.registerResolver(s.HTMLElement,t.registerResolver(s.Element,t.registerResolver(rd,new Wn("ElementResolver",n)))),t.invoke(i)}getDefinition(t){const e=Vl(t)?t:null==t?void 0:t.constructor;return zh.isType(e)?zh.getDefinition(e):null}}class bv{}function wv(t,e){const n=new Error(e);return n.wasCancelled=!0,n.value=t,n}class yv{static from(...t){return Object.assign(new yv,...t).ls().os()}load(){const t=this,e=this.component,n=this.template,i=Je(null==e?void 0:Ye(e(),(e=>{t.component=e})),Vl(n)?Ye(n(),(e=>{t.template=e})):void 0);return i instanceof Promise?i.then((()=>t)):t}ls(){if(null==this.component&&null==this.template)throw new Error("AUR0903");return this}os(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function xv(t,e){return this.then((n=>n.dialog.closed.then(t,e)),e)}const kv="position:absolute;width:100%;height:100%;top:0;left:0;";class Sv{constructor(t){this.p=t,this.wrapperCss=`${kv} display:flex;`,this.overlayCss=kv,this.hostCss="position:relative;margin:auto;"}static register(t){Kn.singleton(uv,this).register(t)}render(t){const e=this.p.document,n=(t,n)=>{const i=e.createElement(t);return i.style.cssText=n,i},i=t.appendChild(n("au-dialog-container",this.wrapperCss)),s=i.appendChild(n("au-dialog-overlay",this.overlayCss)),r=i.appendChild(n("div",this.hostCss));return new Av(i,s,r)}}Sv.inject=[Ac];class Av{constructor(t,e,n){this.wrapper=t,this.overlay=e,this.contentHost=n}dispose(){this.wrapper.remove()}}function Cv(t,e){return{settingsProvider:t,register:n=>n.register(...e,oh.beforeCreate((()=>t(n.get(pv))))),customize:(t,n)=>Cv(t,null!=n?n:e)}}Cv((()=>{throw new Error("AUR0904")}),[class{static register(t){t.register(Kn.singleton(pv,this))}}]);const Ev=Cv(Jn,[class{constructor(t,e,n){this.ft=t,this.p=e,this.ss=n,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const t=this.dlgs;return t.length>0?t[t.length-1]:null}static get inject(){return[wn,Ac,pv]}static register(t){t.register(Kn.singleton(cv,this),oh.beforeDeactivate(cv,(t=>Ye(t.closeAll(),(t=>{if(t.length>0)throw new Error(`AUR0901:${t.length}`)})))))}open(t){return function(t){return t.whenClosed=xv,t}(new Promise((e=>{var n;const i=yv.from(this.ss,t),s=null!==(n=i.container)&&void 0!==n?n:this.ft.createChild();e(Ye(i.load(),(t=>{const e=s.invoke(mv);return s.register(Kn.instance(hv,e)),s.register(Kn.callback(mv,(()=>{throw new Error("AUR0902")}))),Ye(e.activate(t),(t=>{if(!t.wasCancelled){1===this.dlgs.push(e)&&this.p.window.addEventListener("keydown",this);const t=()=>this.remove(e);e.closed.then(t,t)}return t}))})))})))}closeAll(){return Promise.all(Array.from(this.dlgs).map((t=>t.settings.rejectOnCancel?t.cancel().then((()=>null)):t.cancel().then((e=>"cancel"===e.status?null:t))))).then((t=>t.filter((t=>!!t))))}remove(t){const e=this.dlgs,n=e.indexOf(t);n>-1&&this.dlgs.splice(n,1),0===e.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(t){const e=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(t);if(null==e)return;const n=this.top;if(null===n||0===n.settings.keyboard.length)return;const i=n.settings.keyboard;"Escape"===e&&i.includes(e)?n.cancel():"Enter"===e&&i.includes(e)&&n.ok()}},class{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(t){Kn.singleton(pv,this).register(t)}},Sv]);vn.createInterface((t=>t.singleton(Tv)));class Tv{constructor(t,e,n){this.ctn=t,this.p=e,this.r=n}define(t,e,n){if(!t.includes("-"))throw new Error('Invalid web-components custom element name. It must include a "-"');let i;if(null==e)throw new Error("Invalid custom element definition");if(i="function"==typeof e?zh.isType(e)?zh.getDefinition(e):Oh.create(zh.generateName(),e):Oh.getOrCreate(e),i.containerless)throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");const s=(null==n?void 0:n.extends)?this.p.document.createElement(n.extends).constructor:HTMLElement,r=this.ctn,o=this.r,a=i.bindables,l=this.p;class c extends s{auInit(){if(this.auInited)return;this.auInited=!0;const t=r.createChild();t.registerResolver(l.HTMLElement,t.registerResolver(l.Element,t.registerResolver(rd,new Wn("ElementProvider",this))));const e=o.compile(i,t,{projections:null}),n=t.invoke(e.Type),s=this.auCtrl=Cu.$el(t,n,this,null,e);sd(this,e.key,s)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null,0)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null,0)}adoptedCallback(){this.auInit()}attributeChangedCallback(t,e,n){this.auInit(),this.auCtrl.viewModel[t]=n}}c.observedAttributes=Object.keys(a);for(const t in a)Object.defineProperty(c.prototype,t,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[t]},set(e){this.auInited||this.auInit(),this.auCtrl.viewModel[t]=e}});return this.p.customElements.define(t,c,n),c}}Tv.inject=[wn,Ac,yu];const $v=kl.getOrCreate(globalThis);class Iv extends class{constructor(t=vn.createContainer()){if(this.container=t,this.ir=!1,this.Ge=!1,this.Xe=!1,this.Ke=void 0,this.next=void 0,this.Ye=void 0,this.Ze=void 0,t.has(av,!0))throw new Error("AUR0768");t.registerResolver(av,new Wn("IAurelia",this)),t.registerResolver(Yu,this.Je=new Wn("IAppRoot"))}get isRunning(){return this.ir}get isStarting(){return this.Ge}get isStopping(){return this.Xe}get root(){if(null==this.Ke){if(null==this.next)throw new Error("AUR0767");return this.next}return this.Ke}register(...t){return this.container.register(...t),this}app(t){return this.next=new ed(t,this.Qe(t.host),this.container,this.Je),this}enhance(t,e){var n;const i=null!==(n=t.container)&&void 0!==n?n:this.container.createChild(),s=t.host,r=this.Qe(s),o=t.component;let a;Vl(o)?(i.registerResolver(r.HTMLElement,i.registerResolver(r.Element,i.registerResolver(rd,new Wn("ElementResolver",s)))),a=i.invoke(o)):a=o,i.registerResolver(od,new Wn("IEventTarget",s)),e=null!=e?e:null;const l=Cu.$el(i,a,s,null,Oh.create({name:zh.generateName(),template:s,enhance:!0}));return Ye(l.activate(l,e,2),(()=>l))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}Qe(t){let e;if(this.container.has(Ac,!1))e=this.container.get(Ac);else{if(null===t.ownerDocument.defaultView)throw new Error("AUR0769");e=new kl(t.ownerDocument.defaultView),this.container.register(Kn.instance(Ac,e))}return e}start(t=this.next){if(null==t)throw new Error("AUR0770");return this.Ye instanceof Promise?this.Ye:this.Ye=Ye(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.Je.prepare(this.Ke=t),this.Ge=!0,Ye(t.activate(),(()=>{this.ir=!0,this.Ge=!1,this.Ye=void 0,this.ts(t,"au-started",t.host)})))))}stop(t=!1){if(this.Ze instanceof Promise)return this.Ze;if(!0===this.ir){const e=this.Ke;return this.ir=!1,this.Xe=!0,this.Ze=Ye(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.Ke=void 0,this.Je.dispose(),this.Xe=!1,this.ts(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.Xe)throw new Error("AUR0771");this.container.dispose()}ts(t,e,n){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});n.dispatchEvent(i)}}{constructor(t=function(){return vn.createContainer().register(Kn.instance(Ac,$v),ov)}()){super(t)}static start(t){return(new Iv).start(t)}static app(t){return(new Iv).app(t)}static enhance(t,e){return(new Iv).enhance(t,e)}static register(...t){return(new Iv).register(...t)}app(t){if(zh.isType(t)){const e=zh.getDefinition(t);let n=document.querySelector(e.name);return null===n&&(n=document.body),super.app({host:n,component:t})}return super.app(t)}}var Rv=function(t,e){return Rv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Rv(t,e)};function Ov(t,e){function n(){this.constructor=t}Rv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Pv(t){return"function"==typeof t}var Lv=!1,Mv={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,Lv=t},get useDeprecatedSynchronousErrorHandling(){return Lv}};function Uv(t){setTimeout((function(){throw t}),0)}var Bv={closed:!0,next:function(t){},error:function(t){if(Mv.useDeprecatedSynchronousErrorHandling)throw t;Uv(t)},complete:function(){}},Nv=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function jv(t){return null!==t&&"object"==typeof t}var Fv=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Vv=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,i=n._parentOrParents,s=n._ctorUnsubscribe,r=n._unsubscribe,o=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(var a=0;a<i.length;++a)i[a].remove(this);if(Pv(r)){s&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof Fv?Dv(t.errors):[t]}}if(Nv(o)){a=-1;for(var l=o.length;++a<l;){var c=o[a];if(jv(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof Fv?e=e.concat(Dv(t.errors)):e.push(t)}}}if(e)throw new Fv(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=n._parentOrParents;if(null===s)n._parentOrParents=this;else if(s instanceof t){if(s===this)return n;n._parentOrParents=[s,this]}else{if(-1!==s.indexOf(this))return n;s.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Dv(t){return t.reduce((function(t,e){return t.concat(e instanceof Fv?e.errors:e)}),[])}var zv=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Zv=function(t){function e(n,i,s){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=Bv;break;case 1:if(!n){r.destination=Bv;break}if("object"==typeof n){n instanceof e?(r.syncErrorThrowable=n.syncErrorThrowable,r.destination=n,n.add(r)):(r.syncErrorThrowable=!0,r.destination=new qv(r,n));break}default:r.syncErrorThrowable=!0,r.destination=new qv(r,n,i,s)}return r}return Ov(e,t),e.prototype[zv]=function(){return this},e.create=function(t,n,i){var s=new e(t,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Vv),qv=function(t){function e(e,n,i,s){var r,o=t.call(this)||this;o._parentSubscriber=e;var a=o;return Pv(n)?r=n:n&&(r=n.next,i=n.error,s=n.complete,n!==Bv&&(Pv((a=Object.create(n)).unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=r,o._error=i,o._complete=s,o}return Ov(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Mv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=Mv.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Uv(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Uv(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};Mv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Mv.useDeprecatedSynchronousErrorHandling)throw t;Uv(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!Mv.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return Mv.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Uv(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Zv),Hv=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Kv(t){return t}function Wv(t){return 0===t.length?Kv:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Qv=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,s=function(t,e,n){if(t){if(t instanceof Zv)return t;if(t[zv])return t[zv]()}return t||e||n?new Zv(t,e,n):new Zv(Bv)}(t,e,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Mv.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Mv.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Mv.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,i=e.destination,s=e.isStopped;if(n||s)return!1;t=i&&i instanceof Zv?i:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=_v(e))((function(e,i){var s;s=n.subscribe((function(e){try{t(e)}catch(t){i(t),s&&s.unsubscribe()}}),i,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Hv]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Wv(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=_v(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function _v(t){if(t||(t=Mv.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var Gv=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Xv=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return Ov(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(Vv),Yv=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return Ov(e,t),e}(Zv),Jv=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Ov(e,t),e.prototype[zv]=function(){return new Yv(this)},e.prototype.lift=function(t){var e=new tm(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new Gv;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new Gv;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Gv;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new Gv;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new Gv;return this.hasError?(t.error(this.thrownError),Vv.EMPTY):this.isStopped?(t.complete(),Vv.EMPTY):(this.observers.push(t),new Xv(this,t))},e.prototype.asObservable=function(){var t=new Qv;return t.source=this,t},e.create=function(t,e){return new tm(t,e)},e}(Qv),tm=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return Ov(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):Vv.EMPTY},e}(Jv),em=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return Ov(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Gv;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(Jv);function nm(t,e){if(!sm(t))throw Error("Provided state is not of type StateHistory");return e>0?function(t,e){if(e<0||e>=t.future.length)return t;const{past:n,future:i,present:s}=t;return{past:[...n,s,...i.slice(0,e)],present:i[e],future:i.slice(e+1)}}(t,e-1):e<0?function(t,e){if(e<0||e>=t.past.length)return t;const{past:n,future:i,present:s}=t,r=n.slice(0,e),o=[...n.slice(e+1),s,...i];return{past:r,present:n[e],future:o}}(t,t.past.length+e):t}function im(t,e){return{...t,past:[...t.past,t.present],present:e,future:[]}}function sm(t){return void 0!==t.present&&void 0!==t.future&&void 0!==t.past&&Array.isArray(t.future)&&Array.isArray(t.past)}function rm(t,e){return function(n,i){e(n,i,t)}}const om="aurelia-store-state";var am,lm,cm;function hm(t,e,n){const i=pm.container.get(fd).localStorage;if(void 0!==i){const e=void 0!==(null==n?void 0:n.key)?n.key:om;i.setItem(e,JSON.stringify(t))}}function um(t,e){const n=pm.container.get(fd).localStorage;if(void 0===n)return t;const i=n.getItem(void 0===e?om:e);if(null===i||""===i)return t;try{return JSON.parse(i)}catch(t){}return t}function dm(t,e,n){var i;return(null===(i=t.logDefinitions)||void 0===i?void 0:i.hasOwnProperty(e))&&t.logDefinitions[e]&&Object.values(lm).includes(t.logDefinitions[e])?t.logDefinitions[e]:n}!function(t){t.Before="before",t.After="after"}(am||(am={})),function(t){t.trace="trace",t.debug="debug",t.info="info",t.warn="warn",t.error="error"}(lm||(lm={})),function(t){t.StartEnd="startEnd",t.All="all"}(cm||(cm={}));const pm={container:null};class fm extends Error{constructor(t){super(`Tried to dispatch an unregistered action ${void 0!==t&&("string"==typeof t?t:t.name)}`)}}class gm extends Error{}class vm extends Error{}class mm extends Error{}let bm=class{constructor(t,e,n,i){var s,r,o,a;this.initialState=t,this.logger=e,this.t=n,this.devToolsAvailable=!1,this.actions=new Map,this.middlewares=new Map,this.dispatchQueue=[],this.options=null!=i?i:{};const l=!0===(null===(r=null===(s=this.options)||void 0===s?void 0:s.history)||void 0===r?void 0:r.undoable);this._state=new em(t),this.state=this._state.asObservable(),!0!==(null===(a=null===(o=this.options)||void 0===o?void 0:o.devToolsOptions)||void 0===a?void 0:a.disable)&&this.setupDevTools(),l&&this.registerHistoryMethods()}registerMiddleware(t,e,n){this.middlewares.set(t,{placement:e,settings:n})}unregisterMiddleware(t){this.middlewares.has(t)&&this.middlewares.delete(t)}isMiddlewareRegistered(t){return this.middlewares.has(t)}registerAction(t,e){if(0===e.length)throw new vm("The reducer is expected to have one or more parameters, where the first will be the present state");this.actions.set(e,{type:t})}unregisterAction(t){this.actions.has(t)&&this.actions.delete(t)}isActionRegistered(t){return"string"==typeof t?void 0!==Array.from(this.actions).find((e=>e[1].type===t)):this.actions.has(t)}resetToState(t){this._state.next(t)}async dispatch(t,...e){const n=this.lookupAction(t);return n?this.queueDispatch([{reducer:n,params:e}]):Promise.reject(new fm(t))}pipe(t,...e){const n=[],i={dispatch:async()=>this.queueDispatch(n),pipe:(e,...s)=>{const r=this.lookupAction(e);if(!r)throw new fm(t);return n.push({reducer:r,params:s}),i}};return i.pipe(t,...e)}lookupAction(t){if("string"==typeof t){const e=Array.from(this.actions).find((([e,n])=>n.type===t));if(e)return e[0]}else if(this.actions.has(t))return t}async queueDispatch(t){return new Promise(((e,n)=>{this.dispatchQueue.push({actions:t,resolve:e,reject:n}),1===this.dispatchQueue.length&&this.handleQueue()}))}async handleQueue(){if(this.dispatchQueue.length>0){const t=this.dispatchQueue[0];try{await this.internalDispatch(t.actions),t.resolve()}catch(e){t.reject(e)}this.dispatchQueue.shift(),this.handleQueue()}}async internalDispatch(t){var e;const n=t.find((t=>!this.actions.has(t.reducer)));if(n)throw new fm(n.reducer);pm.container.get(fd).performance.mark("dispatch-start");const i=t.map((t=>({type:this.actions.get(t.reducer).type,params:t.params,reducer:t.reducer}))),s={name:i.map((t=>t.type)).join("->"),params:i.reduce(((t,e)=>t.concat(e.params)),[]),pipedActions:i.map((t=>({name:t.type,params:t.params})))};this.options.logDispatchedActions&&this.logger[dm(this.options,"dispatchedActions",lm.info)](`Dispatching: ${s.name}`);const r=await this.executeMiddlewares(this._state.getValue(),am.Before,s);if(!1===r)return pm.container.get(fd).performance.clearMarks(),void pm.container.get(fd).performance.clearMeasures();let o=r;for(const t of i){if(o=await t.reducer(o,...t.params),!1===o)return pm.container.get(fd).performance.clearMarks(),void pm.container.get(fd).performance.clearMeasures();if(pm.container.get(fd).performance.mark(`dispatch-after-reducer-${t.type}`),!o&&"object"!=typeof o)throw new mm("The reducer has to return a new state")}let a=await this.executeMiddlewares(o,am.After,s);if(!1===a)return pm.container.get(fd).performance.clearMarks(),void pm.container.get(fd).performance.clearMeasures();if(sm(a)&&(null===(e=this.options.history)||void 0===e?void 0:e.limit)&&(a=function(t,e){return sm(t)&&(t.past.length>e&&(t.past=t.past.slice(t.past.length-e)),t.future.length>e&&(t.future=t.future.slice(0,e))),t}(a,this.options.history.limit)),this._state.next(a),pm.container.get(fd).performance.mark("dispatch-end"),this.options.measurePerformance===cm.StartEnd){pm.container.get(fd).performance.measure("startEndDispatchDuration","dispatch-start","dispatch-end");const t=pm.container.get(fd).performance.getEntriesByName("startEndDispatchDuration");this.logger[dm(this.options,"performanceLog",lm.info)](`Total duration ${t[0].duration} of dispatched action ${s.name}:`,t)}else if(this.options.measurePerformance===cm.All){const t=pm.container.get(fd).performance.getEntriesByType("mark"),e=t[t.length-1].startTime-t[0].startTime;this.logger[dm(this.options,"performanceLog",lm.info)](`Total duration ${e} of dispatched action ${s.name}:`,t)}pm.container.get(fd).performance.clearMarks(),pm.container.get(fd).performance.clearMeasures(),this.updateDevToolsState({type:s.name,params:s.params},a)}executeMiddlewares(t,e,n){return Array.from(this.middlewares).filter((t=>t[1].placement===e)).reduce((async(t,i,s)=>{try{const s=await i[0](await t,this._state.getValue(),i[1].settings,n);return!1!==s&&(s||await t)}catch(e){if(this.options.propagateError)throw e;return await t}finally{pm.container.get(fd).performance.mark(`dispatch-${e}-${i[0].name}`)}}),t)}setupDevTools(){this.t.__REDUX_DEVTOOLS_EXTENSION__&&(this.logger[dm(this.options,"devToolsStatus",lm.debug)]("DevTools are available"),this.devToolsAvailable=!0,this.devTools=this.t.__REDUX_DEVTOOLS_EXTENSION__.connect(this.options.devToolsOptions),this.devTools.init(this.initialState),this.devTools.subscribe((t=>{var e,n;if(this.logger[dm(this.options,"devToolsStatus",lm.debug)](`DevTools sent change ${t.type}`),"ACTION"!==t.type||void 0===t.payload){if("DISPATCH"===t.type&&t.payload)switch(t.payload.type){case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return void this._state.next(JSON.parse(t.state));case"COMMIT":return void this.devTools.init(this._state.getValue());case"RESET":return this.devTools.init(this.initialState),void this.resetToState(this.initialState);case"ROLLBACK":{const e=JSON.parse(t.state);return this.resetToState(e),void this.devTools.init(e)}}}else{const i=Array.from(this.actions).find((function([e]){var n;return e.name===(null===(n=t.payload)||void 0===n?void 0:n.name)})),s=null!==(n=this.lookupAction(null===(e=t.payload)||void 0===e?void 0:e.name))&&void 0!==n?n:null==i?void 0:i[0];if(!s)throw new gm("Tried to remotely dispatch an unregistered action");if(!t.payload.args||t.payload.args.length<1)throw new gm("No action arguments provided");this.dispatch(s,...t.payload.args.slice(1).map((t=>JSON.parse(t)))).catch((()=>{throw new gm("Issue when trying to dispatch an action through devtools")}))}})))}updateDevToolsState(t,e){this.devToolsAvailable&&this.devTools&&this.devTools.send(t,e)}registerHistoryMethods(){this.registerAction("jump",nm)}};bm=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}([rm(1,li),rm(2,fd)],bm);const wm=t=>t.state;function ym(t){const e={selector:"function"==typeof t?t:wm,...t};function n(t,e){const n=e(t);return n instanceof Qv?n:t.state}function i(){const t="object"==typeof e.selector,n={[e.target||"state"]:e.selector||wm};return Object.entries({...t?e.selector:n}).map((([n,i])=>{var s,r;return{targets:e.target&&t?[e.target,n]:[n],selector:i,changeHandlers:{[null!==(s=e.onChanged)&&void 0!==s?s:""]:1,[`${null!==(r=e.target)&&void 0!==r?r:n}Changed`]:e.target?0:1,propertyChanged:0}}}))}return function(e){const s="object"==typeof t&&t.setup?e.prototype[t.setup]:e.prototype.binding,r="object"==typeof t&&t.teardown?e.prototype[t.teardown]:e.prototype.unbinding;e.prototype["object"==typeof t&&void 0!==t.setup?t.setup:"binding"]=function(){if("object"==typeof t&&"string"==typeof t.onChanged&&!(t.onChanged in this))throw new Error("Provided onChanged handler does not exist on target VM");const e=Cu.getCached(this)?Cu.getCached(this).container.get(bm):pm.container.get(bm);if(this._stateSubscriptions=i().map((t=>n(e,t.selector).subscribe((e=>{const n=t.targets.length-1,i=t.targets.reduce(((t={},e)=>t[e]),this);Object.entries(t.changeHandlers).forEach((([s,r])=>{s in this&&this[s](...[t.targets[n],e,i].slice(r,3))})),t.targets.reduce(((t,i,s)=>(t[i]=s===n?e:t[i]||{},t[i])),this)})))),s)return s.apply(this,arguments)},e.prototype["object"==typeof t&&t.teardown?t.teardown:"unbinding"]=function(){if(this._stateSubscriptions&&Array.isArray(this._stateSubscriptions)&&this._stateSubscriptions.forEach((t=>{t instanceof Vv&&!1===t.closed&&t.unsubscribe()})),r)return r.apply(this,arguments)}}}const xm={withInitialState(t){return Reflect.set(this,"state",t),this},withOptions(t){return Reflect.set(this,"options",t),this},register(t){var e;pm.container=t;const n=Reflect.get(this,"state"),i=Reflect.get(this,"options"),s=t.get(li),r=t.get(fd);if(!n)throw new Error("initialState must be provided via withInitialState builder method");let o=n;return(null===(e=null==i?void 0:i.history)||void 0===e?void 0:e.undoable)&&!sm(n)&&(o={past:[],present:n,future:[]}),Kn.instance(bm,new bm(o,s,r,i)).register(t),t}};function km(t){return"object"==typeof t&&null!==t||"function"==typeof t}let Sm=new WeakMap;function Am(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function Cm(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function Em(t,e,n){let i=Sm.get(t);if(void 0===i){if(!n)return;i=new Map,Sm.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function Tm(t,e,n){const i=Em(e,n,!1);return void 0!==i&&i.has(t)}function $m(t,e,n){if(Tm(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&$m(t,i,n)}function Im(t,e,n){const i=Em(e,n,!1);if(void 0!==i)return i.get(t)}function Rm(t,e,n){if(Tm(t,e,n))return Im(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?Rm(t,i,n):void 0}function Om(t,e){const n=[],i=Em(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function Pm(t,e){const n=Om(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=Pm(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}const Lm={define:function(t,e,n,i){if(!km(n))throw Am("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return function(t,e,n,i){Em(n,i,!0).set(t,e)}(t,e,n,Cm(i))},has:function(t,e,n){if(!km(e))throw Am("Metadata.has",[t,e,n],"target",e,"Object or Function");return $m(t,e,Cm(n))},hasOwn:function(t,e,n){if(!km(e))throw Am("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return Tm(t,e,Cm(n))},get:function(t,e,n){if(!km(e))throw Am("Metadata.get",[t,e,n],"target",e,"Object or Function");return Rm(t,e,Cm(n))},getOwn:function(t,e,n){if(!km(e))throw Am("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return Im(t,e,Cm(n))},getKeys:function(t,e){if(!km(t))throw Am("Metadata.getKeys",[t,e],"target",t,"Object or Function");return Pm(t,Cm(e))},getOwnKeys:function(t,e){if(!km(t))throw Am("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return Om(t,Cm(e))},delete:function(t,e,n){if(!km(e))throw Am("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=Em(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,Cm(n))}};class Mm{constructor(t,e,n){this.path=t,this.caseSensitive=e,this.handler=n}}class Um{constructor(t,e){this.route=t,this.paramNames=e}}class Bm{constructor(t,e){this.endpoint=t,this.params=e}}class Nm{constructor(t,e,n,i){var s;this.chars=t,this.states=e,this.skippedStates=n,this.result=i,this.head=e[e.length-1],this.endpoint=null===(s=this.head)||void 0===s?void 0:s.endpoint}advance(t){const{chars:e,states:n,skippedStates:i,result:s}=this;let r=null,o=0;const a=n[n.length-1];function l(c,h){if(c.isMatch(t)&&(1==++o?r=c:s.add(new Nm(e.concat(t),n.concat(c),null===h?i:i.concat(h),s))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw new Error(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw new Error("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)l(e,c)}}if(a.isDynamic&&l(a,null),null!==a.nextStates)for(const t of a.nextStates)l(t,null);null!==r&&(n.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&s.remove(this)}finalize(){!function t(e,n){const i=n.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const n of i)if(n.isOptional&&null!==n.endpoint){if(e.push(n),null!==n.nextStates)for(const i of n.nextStates)t(e,i);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:n}=this,i={};for(const t of n.paramNames)i[t]=void 0;for(let n=0,s=t.length;n<s;++n){const s=t[n];if(s.isDynamic){const t=s.segment.name;void 0===i[t]?i[t]=e[n]:i[t]+=e[n]}}return i}compareTo(t){const e=this.states,n=t.states;for(let t=0,i=0,s=Math.max(e.length,n.length);t<s;++t){let s=e[t];if(void 0===s)return 1;let r=n[i];if(void 0===r)return-1;let o=s.segment,a=r.segment;if(null===o){if(null===a){++i;continue}if(void 0===(s=e[++t]))return 1;o=s.segment}else if(null===a){if(void 0===(r=n[++i]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,s=t.skippedStates,r=i.length,o=s.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=i[t],n=s[t];if(e.length<n.length)return 1;if(e.length>n.length)return-1}return 0}}function jm(t){return null!==t.head.endpoint}function Fm(t,e){return t.compareTo(e)}class Vm{constructor(t){this.candidates=[],this.candidates=[new Nm([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(jm);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(Fm),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const n of e)n.advance(t)}}class Dm{constructor(t,e,n){switch(this.prevState=t,this.segment=e,this.value=n,this.nextStates=null,this.endpoint=null,null==e?void 0:e.kind){case 2:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let n,i=this.nextStates;return null===i?(n=void 0,i=this.nextStates=[]):n=null===t?i.find((t=>t.value===e)):i.find((e=>{var n;return null===(n=e.segment)||void 0===n?void 0:n.equals(t)})),void 0===n&&i.push(n=new Dm(this,t,e)),n}setEndpoint(t){if(null!==this.endpoint)throw new Error(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(null==e?void 0:e.kind){case 2:return!this.value.includes(t);case 1:return!0;case 3:case void 0:return this.value.includes(t)}}}function zm(t){return t.length>0}var Zm;!function(t){t[t.star=1]="star",t[t.dynamic=2]="dynamic",t[t.static=3]="static"}(Zm||(Zm={}));class qm{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 3}appendTo(t){const{value:e,value:{length:n}}=this;if(this.caseSensitive)for(let i=0;i<n;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<n;++i){const n=e.charAt(i);t=t.append(this,n.toUpperCase()+n.toLowerCase())}return t}equals(t){return 3===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class Hm{constructor(t,e){this.name=t,this.optional=e}get kind(){return 2}appendTo(t){return t.append(this,"/")}equals(t){return 2===t.kind&&t.optional===this.optional&&t.name===this.name}}class Km{constructor(t){this.name=t}get kind(){return 1}appendTo(t){return t.append(this,"")}equals(t){return 1===t.kind&&t.name===this.name}}const Wm=Object.prototype.hasOwnProperty,Qm=Reflect.defineProperty,_m=t=>"function"==typeof t,Gm=t=>"string"==typeof t;function Xm(t,e,n){return Qm(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function Ym(t,e,n,i=!1){!i&&Wm.call(t,e)||Xm(t,e,n)}const Jm=()=>Object.create(null),tb=Lm.getOwn,eb=Lm.hasOwn,nb=Lm.define,ib=an.annotation.keyFor,sb=an.resource.keyFor,rb=an.resource.appendTo;function ob(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Kn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class ab{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Wm.call(t,e)&&(this[e]=t[e])}static create(t,e){return new ab(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class lb{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new lb(null,t,null==e?cb.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new lb(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new lb(t,e,cb.create(e),!1)}}class cb{constructor(t){this.bindingContext=t}static create(t){return new cb(t)}}const hb=vn.createInterface("ISignaler",(t=>t.singleton(ub)));class ub{constructor(){this.signals=Jm()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var db;!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(db||(db={}));class pb{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;Gm(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===gb;return new pb(e,Qe(mb(e,"name"),n),We(mb(e,"aliases"),i.aliases,e.aliases),bb.keyFrom(n),cn("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Kn.singleton(n,e).register(t);break;case 2:Kn.instance(n,new fb(t,e)).register(t)}Kn.aliasTo(n,e).register(t),ob(i,bb,n,t)}}class fb{constructor(t,e){this.ctn=t,this.Type=e,this.deps=vn.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class gb{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{Qm(gb.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const vb=sb("binding-behavior"),mb=(t,e)=>tb(ib(e),t),bb=Object.freeze({name:vb,keyFrom:t=>`${vb}:${t}`,isType:t=>_m(t)&&eb(vb,t),define(t,e){const n=pb.create(t,e);return nb(vb,n,n.Type),nb(vb,n,n),rb(e,vb),n.Type},getDefinition(t){const e=tb(vb,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){nb(ib(e),n,t)},getAnnotation:mb});class wb{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return Gm(t)?(n=t,i={name:n}):(n=t.name,i=t),new wb(e,Qe(xb(e,"name"),n),We(xb(e,"aliases"),i.aliases,e.aliases),kb.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Kn.singleton(n,e).register(t),Kn.aliasTo(n,e).register(t),ob(i,kb,n,t)}}const yb=sb("value-converter"),xb=(t,e)=>tb(ib(e),t),kb=Object.freeze({name:yb,keyFrom:t=>`${yb}:${t}`,isType:t=>_m(t)&&eb(yb,t),define(t,e){const n=wb.create(t,e);return nb(yb,n,n.Type),nb(yb,n,n),rb(e,yb),n.Type},getDefinition(t){const e=tb(yb,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){nb(ib(e),n,t)},getAnnotation:xb});var Sb;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(Sb||(Sb={}));class Ab{constructor(){this.text=""}static unparse(t){const e=new Ab;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",Gm(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class Cb{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class Eb{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=bb.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof fb)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(_m(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return Ab.unparse(this)}}class Tb{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=kb.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(hb);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(hb);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return Ab.unparse(this)}}class $b{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return Ab.unparse(this)}}class Ib{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return Ab.unparse(this)}}class Rb{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return Ab.unparse(this)}}Rb.$this=new Rb(0),Rb.$parent=new Rb(1);class Ob{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=ab.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=ab.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return Ab.unparse(this)}}class Pb{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return Ab.unparse(this)}}class Lb{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return Ab.unparse(this)}}class Mb{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=ab.get(e,this.name,this.ancestor,t),o=Yb(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return Ab.unparse(this)}}class Ub{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=Yb(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return Ab.unparse(this)}}class Bb{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(_m(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return Ab.unparse(this)}}class Nb{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!_m(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(Be(s)||Be(r))return(s||0)+(r||0);if(Ne(s)||Ne(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return Ab.unparse(this)}}class jb{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return Ab.unparse(this)}}class Fb{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return Ab.unparse(this)}}Fb.$undefined=new Fb(void 0),Fb.$null=new Fb(null),Fb.$true=new Fb(!0),Fb.$false=new Fb(!1),Fb.$empty=new Fb("");class Vb{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return Ab.unparse(this)}}Vb.$empty=new Vb(Xn);class Db{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return Ab.unparse(this)}}Db.$empty=new Db(Xn,Xn);class zb{constructor(t,e=Xn){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return Ab.unparse(this)}}zb.$empty=new zb([""]);class Zb{constructor(t,e,n,i=Xn){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!_m(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return Ab.unparse(this)}}class qb{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return Ab.unparse(this)}}class Hb{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return Ab.unparse(this)}}class Kb{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return Ab.unparse(this)}}const Wb=Object.prototype.toString;class Qb{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(Wb.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${Wb.call(e)}`)}}iterate(t,e,n){switch(Wb.call(e)){case"[object Array]":return Jb(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;Jb(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;Jb(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;Jb(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${Wb.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return Ab.unparse(this)}}class _b{constructor(t,e=Xn){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return Ab.unparse(this)}}class Gb{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,lb.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return Ab.unparse(this)}}class Xb{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,lb.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return Ab.unparse(this)}}function Yb(t,e,n){const i=null==e?null:e[n];if(_m(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function Jb(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}var tw,ew,nw,iw,sw,rw;function ow(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function aw(t){return null==t?lw:lw(t)}function lw(t){const e=t.prototype;Qm(e,"subs",{get:hw}),Ym(e,"subscribe",uw),Ym(e,"unsubscribe",dw)}vn.createInterface("ICoercionConfiguration"),function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(tw||(tw={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(ew||(ew={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(nw||(nw={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(iw||(iw={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(sw||(sw={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(rw||(rw={}));class cw{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function hw(){return Xm(this,"subs",new cw)}function uw(t){return this.subs.add(t)}function dw(t){return this.subs.remove(t)}function pw(t){return null==t?fw:fw(t)}function fw(t){const e=t.prototype;Qm(e,"queue",{get:vw})}class gw{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(mw)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function vw(){return gw.instance}function mw(t,e,n){n.delete(t),t.flush()}gw.instance=new gw;class bw{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&Ue(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){Sw=this.h,this.h=this.v,this.subs.notify(this.v,Sw,this.f)}}class ww{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){Sw=this.h,this.h=this.v,this.subs.notify(this.v,Sw,this.f)}}function yw(t){const e=t.prototype;Ym(e,"subscribe",xw,!0),Ym(e,"unsubscribe",kw,!0),pw(t),aw(t)}function xw(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function kw(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let Sw;yw(bw),yw(ww);const Aw=new WeakMap;function Cw(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Ew(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function Tw(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function $w(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,b,w,y,x,k,S,A=0,C=0;for(;;){if(i-n<=10)return void Tw(t,e,n,i,s);A=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[A],h=e[A],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,b=n+1,w=i-1,t[A]=t[b],e[A]=e[b],t[b]=v,e[b]=m;t:for(C=b+1;C<w;C++)if(y=t[C],x=e[C],k=s(y,v),k<0)t[C]=t[b],e[C]=e[b],t[b]=y,e[b]=x,b++;else if(k>0){do{if(w--,w==C)break t;S=t[w],k=s(S,v)}while(k>0);t[C]=t[w],e[C]=e[w],t[w]=y,e[w]=x,k<0&&(y=t[C],x=e[C],t[C]=t[b],e[C]=e[b],t[b]=y,e[b]=x,b++)}i-w<b-n?($w(t,e,w,i,s),i=b):($w(t,e,n,b,s),n=w)}}const Iw=Array.prototype,Rw=Iw.push,Ow=Iw.unshift,Pw=Iw.pop,Lw=Iw.shift,Mw=Iw.splice,Uw=Iw.reverse,Bw=Iw.sort,Nw=["push","unshift","pop","shift","splice","reverse","sort"],jw={push:function(...t){const e=Aw.get(this);if(void 0===e)return Rw.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=Aw.get(this);if(void 0===e)return Ow.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;Ow.apply(e.indexMap,i);const r=Ow.apply(this,t);return e.notify(),r},pop:function(){const t=Aw.get(this);if(void 0===t)return Pw.call(this);const e=t.indexMap,n=Pw.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),Pw.call(e),t.notify(),n},shift:function(){const t=Aw.get(this);if(void 0===t)return Lw.call(this);const e=t.indexMap,n=Lw.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),Lw.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=Aw.get(this);if(void 0===i)return Mw.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;Mw.call(a,e,n,...i)}else Mw.apply(a,t);const h=Mw.apply(this,t);return i.notify(),h},reverse:function(){const t=Aw.get(this);if(void 0===t)return Uw.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=Aw.get(this);if(void 0===e)return Bw.call(this,t),this;const n=this.length;if(n<2)return this;$w(this,e.indexMap,0,n,Ew);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&_m(t)||(t=Cw),$w(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of Nw)Qm(jw[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Fw=!1;class Vw{constructor(t){this.type=18,Fw||(Fw=!0,function(){for(const t of Nw)!0!==Iw[t].observing&&Xm(Iw,t,jw[t])}()),this.indexObservers={},this.collection=t,this.indexMap=ow(t.length),this.lenObs=void 0,Aw.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=ow(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new bw(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new Dw(this,t)}}class Dw{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function zw(t){let e=Aw.get(t);return void 0===e&&(e=new Vw(t)),e}aw(Vw),aw(Dw);const Zw=new WeakMap,qw=Set.prototype,Hw=qw.add,Kw=qw.clear,Ww=qw.delete,Qw=["add","clear","delete"],_w={add:function(t){const e=Zw.get(this);if(void 0===e)return Hw.call(this,t),this;const n=this.size;return Hw.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=Zw.get(this);if(void 0===t)return Kw.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Kw.call(this),e.length=0,t.notify()}},delete:function(t){const e=Zw.get(this);if(void 0===e)return Ww.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Ww.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},Gw={writable:!0,enumerable:!1,configurable:!0};for(const t of Qw)Qm(_w[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Xw=!1;class Yw{constructor(t){this.type=34,Xw||(Xw=!0,function(){for(const t of Qw)!0!==qw[t].observing&&Qm(qw,t,{...Gw,value:_w[t]})}()),this.collection=t,this.indexMap=ow(t.size),this.lenObs=void 0,Zw.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=ow(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new ww(this)}}function Jw(t){let e=Zw.get(t);return void 0===e&&(e=new Yw(t)),e}aw(Yw);const ty=new WeakMap,ey=Map.prototype,ny=ey.set,iy=ey.clear,sy=ey.delete,ry=["set","clear","delete"],oy={set:function(t,e){const n=ty.get(this);if(void 0===n)return ny.call(this,t,e),this;const i=this.get(t),s=this.size;if(ny.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=ty.get(this);if(void 0===t)return iy.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;iy.call(this),e.length=0,t.notify()}},delete:function(t){const e=ty.get(this);if(void 0===e)return sy.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=sy.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},ay={writable:!0,enumerable:!1,configurable:!0};for(const t of ry)Qm(oy[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ly=!1;class cy{constructor(t){this.type=66,ly||(ly=!0,function(){for(const t of ry)!0!==ey[t].observing&&Qm(ey,t,{...ay,value:oy[t]})}()),this.collection=t,this.indexMap=ow(t.size),this.lenObs=void 0,ty.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=ow(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new ww(this)}}function hy(t){let e=ty.get(t);return void 0===e&&(e=new cy(t)),e}function uy(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function dy(){return Xm(this,"obs",new my(this))}function py(t){let e;if(t instanceof Array)e=zw(t);else if(t instanceof Set)e=Jw(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=hy(t)}this.obs.add(e)}function fy(t){this.obs.add(t)}function gy(){throw new Error("AUR2011:handleChange")}function vy(){throw new Error("AUR2012:handleCollectionChange")}aw(cy);class my{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(wy,this),this.count=this.o.size}clearAll(){this.o.forEach(by,this),this.o.clear(),this.count=0}}function by(t,e){e.unsubscribe(this)}function wy(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function yy(t){const e=t.prototype;return Ym(e,"observe",uy,!0),Ym(e,"observeCollection",py,!0),Ym(e,"subscribeTo",fy,!0),Qm(e,"obs",{get:dy}),Ym(e,"handleChange",gy),Ym(e,"handleCollectionChange",vy),t}function xy(t){return null==t?yy:yy(t)}yy(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}}),vn.createInterface("IExpressionParser",(t=>t.singleton(ky)));class ky{constructor(){this.u=Jm(),this.A=Jm(),this.U=Jm()}parse(t,e){let n;switch(e){case 16:return new Cb(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return Fb.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return Uy.ip=t,Uy.length=t.length,Uy.index=0,Uy.O=t.charCodeAt(0),By(Uy,0,61,void 0===e?8:e)}}var Sy,Ay,Cy,Ey;function Ty(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(Sy||(Sy={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(Ay||(Ay={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(Cy||(Cy={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(Ey||(Ey={}));const $y=Fb.$false,Iy=Fb.$true,Ry=Fb.$null,Oy=Fb.$undefined,Py=Rb.$this,Ly=Rb.$parent;var My;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(My||(My={}));const Uy=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function By(t,e,n,i){if(16===i)return new Cb(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),jy(t);const i=By(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(Ty(Fy(t)));break;default:s+=String.fromCharCode(t.O)}Fy(t)}return n.length?(e.push(s),new _b(e,n)):null}(t);if(jy(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=Hy[63&t.$];jy(t),s=new jb(n,By(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(jy(t),e++,!Zy(t,16393)){if(524288&t.$){const t=511&e;s=0===t?Py:1===t?Ly:new Rb(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new Kb(t.L):(s=new Ob(t.L,511&e),e=1024),t.R=!0,jy(t);break;case 3076:t.R=!1,jy(t),s=Py,e=512;break;case 671751:jy(t),s=By(t,0,62,i),qy(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new Gb(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(jy(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return qy(t,1835022),n;function o(){""!==i?(e.push(new Xb(new Pb(Py,i),new Lb(Py,new Fb(r++)),void 0)),i=""):r++}}(t):function(t,e,n){jy(t);const i=new Array;for(;1835022!==t.$;)if(Zy(t,1572876)){if(i.push(Oy),1835022===t.$)break}else{if(i.push(By(t,e,62,-3&n)),!Zy(t,1572876))break;if(1835022===t.$)break}return qy(t,1835022),2&n?new qb(i):(t.R=!1,new Vb(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(jy(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)jy(t),qy(t,1572879),i.push(By(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;jy(t),Zy(t,1572879)?i.push(By(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(By(t,0,450,-3&e)))}}1835018!==t.$&&qy(t,1572876)}return qy(t,1835018),2&e?new Hb(n,i):(t.R=!1,new Db(n,i))}(t,i),e=0;break;case 540714:s=new zb([t.L]),t.R=!1,jy(t),e=0;break;case 540715:s=Ny(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new Fb(t.L),t.R=!1,jy(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=Hy[63&t.$],t.R=!1,jy(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);jy(t);const n=e,i=By(t,0,61,0);return new Qb(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,jy(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,jy(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new Ob(r,s.ancestor):new Pb(s,r);continue;case 671757:t.R=!0,jy(t),e=4096,s=new Lb(s,By(t,0,62,i)),qy(t,1835022);break;case 671751:for(t.R=!1,jy(t);1835019!==t.$&&(n.push(By(t,0,62,i)),Zy(t,1572876)););qy(t,1835019),s=1024&e?new Mb(r,n,s.ancestor):2048&e?new Ub(s,r,n):new Bb(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new Zb(o,o,s),jy(t);break;case 540715:s=Ny(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;jy(t),s=new Nb(Hy[63&r],s,By(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(Zy(t,1572880)){const n=By(t,e,62,i);qy(t,1572879),s=new Ib(s,n,By(t,e,62,i)),t.R=!1}if(62<n)return s;if(Zy(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new $b(s,By(t,e,62,i))}if(61<n)return s;for(;Zy(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;jy(t);const r=new Array;for(;Zy(t,1572879);)r.push(By(t,e,62,i));s=new Tb(s,n,r)}for(;Zy(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;jy(t);const r=new Array;for(;Zy(t,1572879);)r.push(By(t,e,62,i));s=new Eb(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function Ny(t,e,n,i,s){const r=[t.L];qy(t,540715);const o=[By(t,e,62,n)];for(;540714!==(t.$=zy(t));)r.push(t.L),qy(t,540715),o.push(By(t,e,62,n));return r.push(t.L),t.R=!1,s?(jy(t),new Zb(r,r,i,o)):(jy(t),new zb(r,o))}function jy(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=Jy[t.O](t)))return;t.$=1572864}function Fy(t){return t.O=t.ip.charCodeAt(++t.index)}function Vy(t,e){let n=t.O;if(!1===e){do{n=Fy(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=Fy(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=Fy(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function Dy(t){let e=!0,n="";for(;96!==Fy(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(Ty(Fy(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return Fy(t),t.L=n,e?540714:540715}function zy(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,Dy(t)}function Zy(t,e){return t.$===e&&(jy(t),!0)}function qy(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);jy(t)}const Hy=[$y,Iy,Ry,Oy,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Ky=Jm();Ky.true=2049,Ky.null=2050,Ky.false=2048,Ky.undefined=2051,Ky.$this=3076,Ky.$parent=3078,Ky.in=1640799,Ky.instanceof=1640800,Ky.typeof=34851,Ky.void=34852,Ky.of=1051180;const Wy=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Qy=[48,58];function _y(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function Gy(t){return e=>(Fy(e),t)}const Xy=t=>{throw new Error(`AUR0168:${t.ip}`)};Xy.notMapped=!0,_y(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const Yy=new Uint8Array(65535);_y(Yy,null,Wy,1),_y(Yy,null,Qy,1);const Jy=new Array(65535);Jy.fill(Xy,0,65535),_y(Jy,null,[0,33,127,161],(t=>(Fy(t),null))),_y(Jy,null,Wy,(function(t){for(;Yy[Fy(t)];);const e=Ky[t.L=t.P];return void 0===e?1024:e})),_y(Jy,null,Qy,(t=>Vy(t,!1))),Jy[34]=Jy[39]=t=>function(t){const e=t.O;Fy(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),Fy(t),n=Ty(t.O),Fy(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);Fy(t)}const r=t.ip.slice(s,t.index);Fy(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),Jy[96]=t=>Dy(t),Jy[33]=t=>61!==Fy(t)?32809:61!==Fy(t)?1638680:(Fy(t),1638682),Jy[61]=t=>61!==Fy(t)?1048616:61!==Fy(t)?1638679:(Fy(t),1638681),Jy[38]=t=>38!==Fy(t)?1572883:(Fy(t),1638614),Jy[124]=t=>124!==Fy(t)?1572884:(Fy(t),1638549),Jy[46]=t=>Fy(t)<=57&&t.O>=48?Vy(t,!0):16393,Jy[60]=t=>61!==Fy(t)?1638747:(Fy(t),1638749),Jy[62]=t=>61!==Fy(t)?1638748:(Fy(t),1638750),Jy[37]=Gy(1638886),Jy[40]=Gy(671751),Jy[41]=Gy(1835019),Jy[42]=Gy(1638885),Jy[43]=Gy(623009),Jy[44]=Gy(1572876),Jy[45]=Gy(623010),Jy[47]=Gy(1638887),Jy[58]=Gy(1572879),Jy[63]=Gy(1572880),Jy[91]=Gy(671757),Jy[93]=Gy(1835022),Jy[123]=Gy(131080),Jy[125]=Gy(1835018);let tx=null;const ex=[];let nx=!1;function ix(){return tx}function sx(t){if(null==t)throw new Error("AUR0206");if(null==tx)return tx=t,ex[0]=tx,void(nx=!0);if(tx===t)throw new Error("AUR0207");ex.push(t),tx=t,nx=!0}function rx(t){if(null==t)throw new Error("AUR0208");if(tx!==t)throw new Error("AUR0209");ex.pop(),tx=ex.length>0?ex[ex.length-1]:null,nx=null!=tx}Object.freeze({get current(){return tx},get connecting(){return nx},enter:sx,exit:rx,pause:function(){nx=!1},resume:function(){nx=!0}});const ox=Reflect.get,ax=Object.prototype.toString,lx=new WeakMap;function cx(t){switch(ax.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const hx="__raw__";function ux(t){return cx(t)?dx(t):t}function dx(t){var e;return null!==(e=lx.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?mx:t instanceof Map||t instanceof Set?Vx:vx,n=new Proxy(t,e);return lx.set(t,n),n}(t)}function px(t){var e;return null!==(e=t.__raw__)&&void 0!==e?e:t}function fx(t){return cx(t)&&t.__raw__||t}function gx(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const vx={get(t,e,n){if(e===hx)return t;const i=ix();return!nx||gx(e)||null==i?ox(t,e,n):(i.observe(t,e),ux(ox(t,e,n)))}},mx={get(t,e,n){if(e===hx)return t;const i=ix();if(!nx||gx(e)||null==i)return ox(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return bx;case"includes":return xx;case"indexOf":return kx;case"lastIndexOf":return Sx;case"every":return wx;case"filter":return yx;case"find":return Cx;case"findIndex":return Ax;case"flat":return Ex;case"flatMap":return Tx;case"join":return $x;case"push":return Rx;case"pop":return Ix;case"reduce":return jx;case"reduceRight":return Fx;case"reverse":return Mx;case"shift":return Ox;case"unshift":return Px;case"slice":return Nx;case"splice":return Lx;case"some":return Ux;case"sort":return Bx;case"keys":return Qx;case"values":case Symbol.iterator:return _x;case"entries":return Gx}return i.observe(t,e),ux(ox(t,e,n))},ownKeys(t){var e;return null===(e=ix())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function bx(t,e){var n;const i=px(this),s=i.map(((n,i)=>fx(t.call(e,ux(n),i,this))));return null===(n=ix())||void 0===n||n.observeCollection(i),ux(s)}function wx(t,e){var n;const i=px(this),s=i.every(((n,i)=>t.call(e,ux(n),i,this)));return null===(n=ix())||void 0===n||n.observeCollection(i),s}function yx(t,e){var n;const i=px(this),s=i.filter(((n,i)=>fx(t.call(e,ux(n),i,this))));return null===(n=ix())||void 0===n||n.observeCollection(i),ux(s)}function xx(t){var e;const n=px(this),i=n.includes(fx(t));return null===(e=ix())||void 0===e||e.observeCollection(n),i}function kx(t){var e;const n=px(this),i=n.indexOf(fx(t));return null===(e=ix())||void 0===e||e.observeCollection(n),i}function Sx(t){var e;const n=px(this),i=n.lastIndexOf(fx(t));return null===(e=ix())||void 0===e||e.observeCollection(n),i}function Ax(t,e){var n;const i=px(this),s=i.findIndex(((n,i)=>fx(t.call(e,ux(n),i,this))));return null===(n=ix())||void 0===n||n.observeCollection(i),s}function Cx(t,e){var n;const i=px(this),s=i.find(((e,n)=>t(ux(e),n,this)),e);return null===(n=ix())||void 0===n||n.observeCollection(i),ux(s)}function Ex(){var t;const e=px(this);return null===(t=ix())||void 0===t||t.observeCollection(e),ux(e.flat())}function Tx(t,e){var n;const i=px(this);return null===(n=ix())||void 0===n||n.observeCollection(i),dx(i.flatMap(((n,i)=>ux(t.call(e,ux(n),i,this)))))}function $x(t){var e;const n=px(this);return null===(e=ix())||void 0===e||e.observeCollection(n),n.join(t)}function Ix(){return ux(px(this).pop())}function Rx(...t){return px(this).push(...t)}function Ox(){return ux(px(this).shift())}function Px(...t){return px(this).unshift(...t)}function Lx(...t){return ux(px(this).splice(...t))}function Mx(...t){var e;const n=px(this),i=n.reverse();return null===(e=ix())||void 0===e||e.observeCollection(n),ux(i)}function Ux(t,e){var n;const i=px(this),s=i.some(((n,i)=>fx(t.call(e,ux(n),i,this))));return null===(n=ix())||void 0===n||n.observeCollection(i),s}function Bx(t){var e;const n=px(this),i=n.sort(t);return null===(e=ix())||void 0===e||e.observeCollection(n),ux(i)}function Nx(t,e){var n;const i=px(this);return null===(n=ix())||void 0===n||n.observeCollection(i),dx(i.slice(t,e))}function jx(t,e){var n;const i=px(this),s=i.reduce(((e,n,i)=>t(e,ux(n),i,this)),e);return null===(n=ix())||void 0===n||n.observeCollection(i),ux(s)}function Fx(t,e){var n;const i=px(this),s=i.reduceRight(((e,n,i)=>t(e,ux(n),i,this)),e);return null===(n=ix())||void 0===n||n.observeCollection(i),ux(s)}const Vx={get(t,e,n){if(e===hx)return t;const i=ix();if(!nx||gx(e)||null==i)return ox(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Kx;case"delete":return Wx;case"forEach":return Dx;case"add":if(t instanceof Set)return Hx;break;case"get":if(t instanceof Map)return Zx;break;case"set":if(t instanceof Map)return qx;break;case"has":return zx;case"keys":return Qx;case"values":return _x;case"entries":return Gx;case Symbol.iterator:return t instanceof Map?Gx:_x}return ux(ox(t,e,n))}};function Dx(t,e){var n;const i=px(this);return null===(n=ix())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,ux(n),ux(i),this)}))}function zx(t){var e;const n=px(this);return null===(e=ix())||void 0===e||e.observeCollection(n),n.has(fx(t))}function Zx(t){var e;const n=px(this);return null===(e=ix())||void 0===e||e.observeCollection(n),ux(n.get(fx(t)))}function qx(t,e){return ux(px(this).set(fx(t),fx(e)))}function Hx(t){return ux(px(this).add(fx(t)))}function Kx(){return ux(px(this).clear())}function Wx(t){return ux(px(this).delete(fx(t)))}function Qx(){var t;const e=px(this);null===(t=ix())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:ux(e),done:i}},[Symbol.iterator](){return this}}}function _x(){var t;const e=px(this);null===(t=ix())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:ux(e),done:i}},[Symbol.iterator](){return this}}}function Gx(){var t;const e=px(this);null===(t=ix())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[ux(e[0]),ux(e[1])],done:i}},[Symbol.iterator](){return this}}}Object.freeze({getProxy:dx,getRaw:px,wrap:ux,unwrap:fx,rawKey:hx});class Xx{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new Xx(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,Qm(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!_m(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){Yx=this.ov,this.ov=this.v,this.subs.notify(this.v,Yx,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return sx(this),this.v=fx(this.get.call(this.up?ux(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,rx(this)}}}let Yx;xy(Xx),aw(Xx),pw(Xx);const Jx=vn.createInterface("IDirtyChecker",(t=>t.singleton(nk))),tk={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},ek={persistent:!0};class nk{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(tk.disabled)return;if(++this.j<tk.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(tk.throw)throw new Error(`AUR0222:${e}`);return new ik(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,ek))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}nk.inject=[ti],pw(nk);class ik{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}aw(ik);class sk{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}let rk;class ok{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){rk=this.ov,this.ov=this.v,this.subs.notify(this.v,rk,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Qm(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(Qm(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class ak{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=_m(n);const s=t[e];this.cb=_m(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){rk=this.ov,this.ov=this.v,this.subs.notify(this.v,rk,this.f)}}aw(ok),aw(ak),pw(ok),pw(ak);const lk=new class{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}},ck=vn.createInterface("IObserverLocator",(t=>t.singleton(dk))),hk=vn.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(li).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new uk)))));class uk{handles(){return!1}getObserver(){return lk}getAccessor(){return lk}}class dk{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):lk}getArrayObserver(t){return zw(t)}getMapObserver(t){return hy(t)}getSetObserver(t){return Jw(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new sk(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return zw(t).getLengthObserver();break;case"size":if(t instanceof Map)return hy(t).getLengthObserver();if(t instanceof Set)return Jw(t).getLengthObserver();break;default:if(t instanceof Array&&Ue(e))return zw(t).getIndexObserver(Number(e))}let o=fk(t,e);if(void 0===o){let n=pk(t);for(;null!==n&&(o=fk(n,e),void 0===o);)n=pk(n)}if(void 0!==o&&!Wm.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?Xx.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new ok(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(Qm(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}dk.inject=[Jx,hk];const pk=Object.getPrototypeOf,fk=Object.getOwnPropertyDescriptor;vn.createInterface("IObservation",(t=>t.singleton(gk)));class gk{constructor(t){this.oL=t}static get inject(){return[ck]}run(t){const e=new vk(this.oL,t);return e.run(),e}}class vk{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{sx(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,rx(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}xy(vk);class mk{constructor(t,e,n,i={}){this.router=t,this.name=e,this.connectedCE=n,this.options=i,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}get activeContent(){var t;return null!==(t=this.getNextContent())&&void 0!==t?t:this.getContent()}get connectedScope(){var t;return null===(t=this.activeContent)||void 0===t?void 0:t.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){var t,e;return null!==(e=null===(t=this.connectedCE)||void 0===t?void 0:t.$controller)&&void 0!==e?e:null}get isViewport(){return this instanceof qk}get isViewportScope(){return this instanceof jk}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){var n;return this.getContent().delete(),null===(n=this.getNextContent())||void 0===n||n.delete(),!0}canUnload(t){return!0}canLoad(t){return!0}unload(t){}load(t){}}class bk{constructor(t,e,n,i,s=Kk.create(""),r=Vk.create({instruction:"",fullStateInstruction:""})){var o,a;this.router=t,this.endpoint=e,this.instruction=s,this.navigation=r,this.completed=!1,this.connectedScope=new Xk(t,i,n,this),null!==this.router.rootScope&&(null!==(a=null===(o=this.endpoint.connectedScope)||void 0===o?void 0:o.parent)&&void 0!==a?a:this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){var t;null===(t=this.connectedScope.parent)||void 0===t||t.removeChild(this.connectedScope)}}class wk{constructor(t=null,e="",n=[],i="",s={}){this.match=t,this.matching=e,this.instructions=n,this.remaining=i,this.params=s}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.length>0}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}function yk(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function xk(t,e){return function(n,i){e(n,i,t)}}class kk{static parse(t,e,n,i){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!kk.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const s=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===s.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);i=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),n=!0);const{instructions:o,remaining:a}=kk.parse(t,e,r,!1);s[s.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:n,remaining:r}=kk.parse(t,e,!0,i);s.push(...n),e=r}else if(e.startsWith(t.groupEnd)){n&&(e=e.slice(t.groupEnd.length));let i=0;const r=e.length;for(;i<r;i++){if(e.slice(i,i+t.sibling.length)===t.sibling)return{instructions:s,remaining:e};if(e.slice(i,i+t.groupEnd.length)!==t.groupEnd){if(s.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(i);break}}if(i>=r)return{instructions:s,remaining:e}}else if(e.startsWith(t.sibling)&&!kk.isAdd(t,e)){if(!n)return{instructions:s,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:n,remaining:i}=kk.parseOne(t,e);s.push(n),e=i}return{instructions:s,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const n=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let i,s,r,o,a,l=!0;const c=[t.add,t.clear];for(const s of c)if(e===s){i=e,e="",n.shift(),n.shift(),o=t.viewport;break}if(void 0===i)for(const s of c)if(e.startsWith(`${s}${t.viewport}`)){i=s,e=e.slice(`${s}${t.viewport}`.length),n.shift(),n.shift(),o=t.viewport;break}if(void 0===i&&(({token:o,pos:a}=kk.findNextToken(e,n)),i=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",n.shift(),o===t.parameters&&(({token:o,pos:a}=kk.findNextToken(e,[t.parametersEnd])),s=e.slice(0,a),e=e.slice(a+o.length),({token:o}=kk.findNextToken(e,n)),e=e.slice(o.length)),n.shift()),o===t.viewport&&(({token:o,pos:a}=kk.findNextToken(e,n)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),n.shift(),o===t.noScope&&(l=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(null!=i?i:""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);return{instruction:Kk.create(i,r,s,l),remaining:e}}static findNextToken(t,e){const n={};for(const i of e)t.indexOf(i)>-1&&(n[i]=t.indexOf(i));const i=Math.min(...Object.values(n));for(const t in n)if(n[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}}class Sk{constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",n="top-down",i=" > ",s=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=n,this.componentTitleSeparator=i,this.useComponentNames=s,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new Sk((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return Ek.for(t).title}apply(t={}){var e,n,i,s,r,o;t="string"==typeof t?{appTitle:t}:t,this.appTitle=null!==(e=t.appTitle)&&void 0!==e?e:this.appTitle,this.appTitleSeparator=null!==(n=t.appTitleSeparator)&&void 0!==n?n:this.appTitleSeparator,this.componentTitleOrder=null!==(i=t.componentTitleOrder)&&void 0!==i?i:this.componentTitleOrder,this.componentTitleSeparator=null!==(s=t.componentTitleSeparator)&&void 0!==s?s:this.componentTitleSeparator,this.useComponentNames=null!==(r=t.useComponentNames)&&void 0!==r?r:this.useComponentNames,this.componentPrefix=null!==(o=t.componentPrefix)&&void 0!==o?o:this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class Ak{constructor(t="@",e="+",n="/",i="(",s=")",r="!",o="(",a=")",l=",",c="=",h="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=n,this.groupStart=i,this.groupEnd=s,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=l,this.parameterKeySeparator=c,this.add=h,this.clear=u,this.action=d}static create(t={}){return new Ak(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return Ek.for(t).separators}apply(t={}){var e,n,i,s,r,o,a,l,c,h,u,d,p;this.viewport=null!==(e=t.viewport)&&void 0!==e?e:this.viewport,this.sibling=null!==(n=t.sibling)&&void 0!==n?n:this.sibling,this.scope=null!==(i=t.scope)&&void 0!==i?i:this.scope,this.groupStart=null!==(s=t.groupStart)&&void 0!==s?s:this.groupStart,this.groupEnd=null!==(r=t.groupEnd)&&void 0!==r?r:this.groupEnd,this.noScope=null!==(o=t.noScope)&&void 0!==o?o:this.noScope,this.parameters=null!==(a=t.parameters)&&void 0!==a?a:this.parameters,this.parametersEnd=null!==(l=t.parametersEnd)&&void 0!==l?l:this.parametersEnd,this.parameterSeparator=null!==(c=t.parameterSeparator)&&void 0!==c?c:this.parameterSeparator,this.parameterKeySeparator=null!==(h=t.parameterKeySeparator)&&void 0!==h?h:this.parameterKeySeparator,this.add=null!==(u=t.add)&&void 0!==u?u:this.add,this.clear=null!==(d=t.clear)&&void 0!==d?d:this.clear,this.action=null!==(p=t.action)&&void 0!==p?p:this.action}}class Ck{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new Ck(t.loadActive,t.viewportNavigating)}static for(t){return Ek.for(t).indicators}apply(t={}){var e,n;this.loadActive=null!==(e=t.loadActive)&&void 0!==e?e:this.loadActive,this.viewportNavigating=null!==(n=t.viewportNavigating)&&void 0!==n?n:this.viewportNavigating}}class Ek{constructor(t=Ak.create(),e=Ck.create(),n=!0,i=null,s=!0,r=0,o=!0,a=!0,l=!0,c=Sk.create(),h=["guardedUnload","swapped","completed"],u="attach-next-detach-current"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=n,this.basePath=i,this.useHref=s,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=l,this.title=c,this.navigationSyncStates=h,this.swapOrder=u,this.registrationHooks=[]}static create(t={}){return new Ek(Ak.create(t.separators),Ck.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,Sk.create(t.title),t.navigationSyncStates,t.swapOrder)}static for(t){return t instanceof BS?t.options:(t=t instanceof cS?t.configuration:t.get(LS)).options}apply(t){var e,n,i,s,r,o,a,l,c;t=null!=t?t:{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=null!==(e=t.useUrlFragmentHash)&&void 0!==e?e:this.useUrlFragmentHash,this.basePath=null!==(n=t.basePath)&&void 0!==n?n:this.basePath,this.useHref=null!==(i=t.useHref)&&void 0!==i?i:this.useHref,this.statefulHistoryLength=null!==(s=t.statefulHistoryLength)&&void 0!==s?s:this.statefulHistoryLength,this.useDirectRouting=null!==(r=t.useDirectRouting)&&void 0!==r?r:this.useDirectRouting,this.useConfiguredRoutes=null!==(o=t.useConfiguredRoutes)&&void 0!==o?o:this.useConfiguredRoutes,this.additiveInstructionDefault=null!==(a=t.additiveInstructionDefault)&&void 0!==a?a:this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=null!==(l=t.navigationSyncStates)&&void 0!==l?l:this.navigationSyncStates,this.swapOrder=null!==(c=t.swapOrder)&&void 0!==c?c:this.swapOrder,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}var Tk;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(Tk||(Tk={}));class $k{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new $k;return e.set(t),e}static parse(t,e,n=!1){if(null==e||0===e.length)return[];const i=Ak.for(t),s=i.parameterSeparator,r=i.parameterKeySeparator;if("string"==typeof e){const t=[],i=e.split(s);for(const e of i){let i,s;[i,s]=e.split(r),void 0===s?(s=n?decodeURIComponent(i):i,i=void 0):n&&(i=decodeURIComponent(i),s=decodeURIComponent(s)),t.push({key:i,value:s})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,n=!1){if(!Array.isArray(e)||0===e.length)return"";const i=Ak.for(t);return e.map((t=>{const e=void 0!==t.key&&n?encodeURIComponent(t.key):t.key,s=n?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==s?e+i.parameterKeySeparator+s:s})).join(i.parameterSeparator)}static contains(t,e){return Object.keys(e).every((n=>e[n]===t[n]))}parameters(t){return $k.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const n=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==n.length?1===n.length?n[0]:n:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=null!=e?e:[];const n=this.parameters(t),i={};for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const[s]=n.splice(e,1);i[t]=s.value}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const[s]=n.splice(e,1);i[t]=s.value}}for(const t of n.filter((t=>void 0!==t.key)))i[t.key]=t.value;let s=e.length;for(const t of n.filter((t=>void 0===t.key)))i[s++]=t.value;return i}toSortedParameters(t,e){e=e||[];const n=this.parameters(t),i=[];for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const t={...n.splice(e,1)[0]};t.key=void 0,i.push(t)}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const t={...n.splice(e,1)[0]};i.push(t)}else i.push({value:void 0})}const s=n.filter((t=>void 0!==t.key));return s.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),i.push(...s),i.push(...n.filter((t=>void 0===t.key))),i}same(t,e,n){const i=null!==n?n.parameters:[],s=this.toSpecifiedParameters(t,i),r=e.toSpecifiedParameters(t,i);return Object.keys(s).every((t=>s[t]===r[t]))&&Object.keys(r).every((t=>r[t]===s[t]))}}class Ik{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new Ik;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return zh.isType(t.Type)}static isType(t){return zh.isType(t)}static isInstance(t){return function(t){return ee(t)&&zh.isType(t.constructor)}(t)}static isAppelation(t){return Ik.isName(t)||Ik.isType(t)||Ik.isInstance(t)}static getName(t){return Ik.isName(t)?t:Ik.isType(t)?zh.getDefinition(t).name:Ik.getName(t.constructor)}static getType(t){return Ik.isName(t)?null:Ik.isType(t)?t:t.constructor}static getInstance(t){return Ik.isName(t)||Ik.isType(t)?null:t}set(t){let e=null,n=null,i=null,s=null,r=null;t instanceof Promise?s=t:Ik.isName(t)?e=Ik.getName(t):Ik.isType(t)?(e=this.getNewName(t),n=Ik.getType(t)):Ik.isInstance(t)?(e=this.getNewName(Ik.getType(t)),n=Ik.getType(t),i=Ik.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=n,this.instance=i,this.promise=s,this.func=r}resolve(){if(null!==this.func&&this.set(this.func()),this.promise instanceof Promise)return this.promise.then((t=>{if(Ik.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const n=e[0];this.set(t[n])}))}get none(){return!this.isName()&&!this.isType()&&!this.isInstance()}isName(){return!!this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t){if(null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(zh.keyFrom(this.name),!0)){const e=t.getResolver(zh.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const n=e.getFactory(t);if(n)return n.Type}}}return null}toInstance(t){if(null!==this.instance)return this.instance;if(null!=t){const e=this.isType()?t.get(this.type):t.get(zh.keyFrom(this.name));return!this.isType()||e instanceof this.type||console.warn("Failed to instantiate",this.type,e),null!=e?e:null}return null}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?Ik.getName(t):this.name}}function Rk(t,e){const n=[];let i=t.findIndex(e);for(;i>=0;)n.push(t.splice(i,1)[0]),i=t.findIndex(e);return n}function Ok(t,e=!1){return t.filter(((t,n,i)=>(e||null!=t)&&i.indexOf(t)===n))}class Pk{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class Lk{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return null==e?void 0:e[0];let s=!1;null===t&&(t=new Mk,s=!0);const r=new Mk(e.shift());return Lk.connect(t,r,null!==(i=null==t?void 0:t.runParallel)&&void 0!==i&&i||s),e.length>0&&Lk.add(r,!1,...e),s?(Lk.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):r}static runParallel(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return[];let s=!1;return null===t?(t=new Mk,s=!0):t=Lk.connect(t,new Mk,!0),Lk.add(t,!0,...e),s&&Lk.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?null!==(i=t.result)&&void 0!==i?i:[]:t}static step(t){if(t instanceof Promise)return Lk.runners.get(t)}static cancel(t){const e=Lk.step(t);void 0!==e&&e.cancel()}static add(t,e,...n){let i=new Mk(n.shift(),e);null!==t&&(i=Lk.connect(t,i,e));const s=i;for(;n.length>0;)i=Lk.connect(i,new Mk(n.shift(),e),!1);return s}static connect(t,e,n){if(n){const n=t.child;t.child=e,e.parent=t,e.next=n,null!==n&&(n.parent=null,n.previous=e)}else{const n=t.next;t.next=e,e.previous=t,e.next=n,null!==n&&(n.previous=e,n.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)Lk.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const n=t.value;Lk.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,Lk.settlePromise(t),t.isDone=!0,t.isDoing=!1;const n=t.nextToDo();null===n||t.isExited?(t.root.doneAll||t.isExited)&&Lk.settlePromise(t.root):Lk.process(n)})).catch((t=>{throw t}))})(t,n)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?Lk.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&Lk.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new Pk,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){var n,i,s,r;if(null!==(i=null===(n=t.finally)||void 0===n?void 0:n.isPending)&&void 0!==i&&i)switch(t.promise=null,e){case"resolve":null===(s=t.finally)||void 0===s||s.resolve(t.result);break;case"reject":null===(r=t.finally)||void 0===r||r.reject(t.result)}}}Lk.runners=new WeakMap,Lk.roots={};class Mk{constructor(t,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+Mk.id++}get isParallelParent(){var t,e;return null!==(e=null===(t=this.child)||void 0===t?void 0:t.runParallel)&&void 0!==e&&e}get result(){var t,e;if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:null===(e=null===(t=this.child)||void 0===t?void 0:t.tail)||void 0===e?void 0:e.result}let n=this.value;for(;n instanceof Mk;)n=n.result;return n}get asValue(){return this.result}get previousValue(){var t,e,n,i;return this.runParallel?null===(n=null===(e=null===(t=this.head.parent)||void 0===t?void 0:t.parent)||void 0===e?void 0:e.previous)||void 0===n?void 0:n.result:null===(i=this.previous)||void 0===i?void 0:i.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){var e,n;return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,null===(e=this.child)||void 0===e||e.cancel(!1),null===(n=this.next)||void 0===n||n.cancel(!1),!0)}exit(t=!0){var e,n;return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,null===(e=this.child)||void 0===e||e.exit(!1),null===(n=this.next)||void 0===n||n.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){var t;let e=this.next;for(;null!==e;){if(!e.isDoing&&!e.isDone)return e;e=e.next}const n=null!==(t=this.head.parent)&&void 0!==t?t:null;return null!==n&&n.done?n.nextOrUp():null}get path(){var t,e;return`${null!==(e=null===(t=this.head.parent)||void 0===t?void 0:t.path)&&void 0!==e?e:""}/${this.name}`}get tree(){let t="",e=this.head,n=e.parent,i="";for(;null!==n;)i=`${n.path}${i}`,n=n.head.parent;do{if(t+=`${i}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){var t,e,n,i;let s=`${this.path}\n`;return s+=null!==(e=null===(t=this.child)||void 0===t?void 0:t.report)&&void 0!==e?e:"",s+=null!==(i=null===(n=this.next)||void 0===n?void 0:n.report)&&void 0!==i?i:"",s}}Mk.id=0;class Uk{constructor(t,e,n,i,s,r,o,a){this.path=t,this.id=e,this.redirectTo=n,this.instructions=i,this.caseSensitive=s,this.title=r,this.reloadBehavior=o,this.data=a}static isConfigured(t){return Lm.hasOwn(Uk.resourceKey,t)||"parameters"in t||"title"in t}static configure(t,e){const n=Uk.create(t,e);return Lm.define(Uk.resourceKey,n,e),e}static getConfiguration(t){var e;const n=null!==(e=Lm.getOwn(Uk.resourceKey,t))&&void 0!==e?e:{};return Array.isArray(t.parameters)&&(n.parameters=t.parameters),"title"in t&&(n.title=t.title),n instanceof Uk?n:Uk.create(n,t)}static create(t,e=null){var n,i,s,r,o,a,l,c,h;null!==e&&(t=Uk.transferTypeToComponent(t,e)),zh.isType(t)?t=Uk.getConfiguration(t):null===e&&(t={...t});const u=Uk.transferIndividualIntoInstructions(t);Uk.validateRouteConfiguration(u);let d=u.path;return Array.isArray(d)&&(d=d.join(",")),new Uk(null!==(n=u.path)&&void 0!==n?n:"",null!==(s=null!==(i=u.id)&&void 0!==i?i:d)&&void 0!==s?s:null,null!==(r=u.redirectTo)&&void 0!==r?r:null,null!==(o=u.instructions)&&void 0!==o?o:null,null!==(a=u.caseSensitive)&&void 0!==a&&a,null!==(l=u.title)&&void 0!==l?l:null,null!==(c=u.reloadBehavior)&&void 0!==c?c:null,null!==(h=u.data)&&void 0!==h?h:null)}static transferTypeToComponent(t,e){var n;if(zh.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const i=null!==(n={...t})&&void 0!==n?n:{};if("component"in i||"instructions"in i)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in i||(i.component=e),"path"in i||"redirectTo"in i||(i.path=zh.getDefinition(e).name),i}static transferIndividualIntoInstructions(t){var e,n,i,s;if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(null!==(e=t.component)&&void 0!==e?e:null)||null!==(null!==(n=t.viewport)&&void 0!==n?n:null)||null!==(null!==(i=t.parameters)&&void 0!==i?i:null)||null!==(null!==(s=t.children)&&void 0!==s?s:null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}Uk.resourceKey=an.resource.keyFor("route");const Bk={name:an.resource.keyFor("routes"),isConfigured:t=>Lm.hasOwn(Bk.name,t)||"routes"in t,configure(t,e){const n=t.map((t=>Uk.create(t)));return Lm.define(Bk.name,n,e),e},getConfiguration(t){const e=t,n=[],i=Lm.getOwn(Bk.name,t);return Array.isArray(i)&&n.push(...i),Array.isArray(e.routes)&&n.push(...e.routes),n.map((t=>t instanceof Uk?t:Uk.create(t)))}};class Nk extends bk{}class jk extends mk{constructor(t,e,n,i,s,r=null,o={catches:[],source:null}){super(t,e,n),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new Nk(t,this,i,s)),this.catches.length>0&&(this.instruction=Kk.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){var t;return null!==(t=this.options.source)&&void 0!==t?t:null}get catches(){var t;let e=null!==(t=this.options.catches)&&void 0!==t?t:[];return"string"==typeof e&&(e=e.split(",")),e}get default(){if(this.catches.length>0)return this.catches[0]}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.instruction)||void 0===t?void 0:t.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`vs:${this.name}[${s}->${r}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new Nk(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){Lk.run(null,(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){var n;const i=this.contents.findIndex((e=>e.navigation===t.navigation));let s=this.contents[i];if(this.remove){const t=new Nk(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(i,1,t),s.delete(),s=t}s.completed=!0;let r=0;for(let t=0,e=i;t<e&&null!==(n=this.contents[0].navigation.completed)&&void 0!==n&&n;t++)r++;this.contents.splice(0,r),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation));if(this.contents.splice(n,1),this.add){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===Kk.clear(this.router)||t===Kk.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&Rk(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){if(null!==this.rootComponentType){const t=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;return Bk.getConfiguration(t)}return null}}class Fk{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class Vk extends class{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}{constructor(t={instruction:"",fullStateInstruction:""}){var e,n,i,s,r,o;super(t),this.navigation=new Fk,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=null!==(e=t.fromBrowser)&&void 0!==e?e:this.fromBrowser,this.origin=null!==(n=t.origin)&&void 0!==n?n:this.origin,this.replacing=null!==(i=t.replacing)&&void 0!==i?i:this.replacing,this.refreshing=null!==(s=t.refreshing)&&void 0!==s?s:this.refreshing,this.untracked=null!==(r=t.untracked)&&void 0!==r?r:this.untracked,this.historyMovement=null!==(o=t.historyMovement)&&void 0!==o?o:this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){var t,e,n;return null!==(t=this.navigation.back)&&void 0!==t&&t||null!==(e=this.navigation.forward)&&void 0!==e&&e||null!==(n=this.navigation.refresh)&&void 0!==n&&n}static create(t={instruction:"",fullStateInstruction:""}){return new Vk(t)}}class Dk{constructor(){this.map=new Map}set(t,e){const n=this.map.get(t);n instanceof Pk&&n.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof Pk&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new Pk;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof Pk?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof Pk)}clone(){const t=new Dk;return t.map=new Map(this.map),t}}class zk extends bk{constructor(t,e,n,i,s=Kk.create(""),r=Vk.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,n,i,s,r),this.router=t,this.instruction=s,this.navigation=r,this.contentStates=new Dk,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==(null==o?void 0:o.container)||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){var t,e;return this.instruction.route instanceof wk&&null!==(null===(t=this.instruction.route.match)||void 0===t?void 0:t.reloadBehavior)?null===(e=this.instruction.route.match)||void 0===e?void 0:e.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){var e,n;return this.instruction.sameComponent(this.router,t.instruction,!0)&&(null!==(e=this.navigation.query)&&void 0!==e?e:"")===(null!==(n=t.navigation.query)&&void 0!==n?n:"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return Cu.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(n){if(""===(null!=e?e:""))throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`);this.instruction.parameters.set([this.instruction.component.name]),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(t){throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`)}}this.contentStates.set("created",void 0),this.contentStates.has("loaded")||!this.instruction.component.instance||this.fromCache&&this.fromHistory||(this.contentController(t).parent=t.controller)}}canLoad(){var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const i=this.instruction.component.instance;if(null==i)return!0;this.contentStates.set("checkedLoad",void 0);const s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"canLoad").map((t=>e=>{const n=t(i,o,this.instruction,this.navigation);return"boolean"==typeof n?(!1===n&&e.exit(),n):"string"==typeof n?(e.exit(),[Kk.create(n,this.endpoint)]):n}));if(0!==a.length){const t=Lk.run(null,...a);if(!0!==t)return!1!==t&&("string"==typeof t?[Kk.create(t,this.endpoint)]:t)}if(null==i.canLoad)return!0;const l=i.canLoad(o,this.instruction,this.navigation);return"boolean"==typeof l?l:"string"==typeof l?[Kk.create(l,this.endpoint)]:l}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=Vk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"canUnload").map((n=>i=>{const s=n(e,this.instruction,t);return"boolean"==typeof s?(!1===s&&i.exit(),s):s}));if(0!==n.length){const t=Lk.run(null,...n);if(!0!==t)return!1!==t&&t}if(!e.canUnload)return!0;const i=e.canUnload(this.instruction,t);if("boolean"!=typeof i&&!(i instanceof Promise))throw new Error(`Method 'canUnload' in component "${this.instruction.component.name}" needs to return true or false or a Promise resolving to true or false.`);return i}load(t){return Lk.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const i=this.instruction.component.instance,s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"load").map((t=>()=>t(i,o,this.instruction,this.navigation)));return 0!==a.length?(null!=i.load&&a.push((()=>i.load(o,this.instruction,this.navigation))),Lk.run(null,...a)):null!=i.load?i.load(o,this.instruction,this.navigation):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=Vk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"unload").map((n=>()=>n(e,this.instruction,t)));return 0!==n.length?(null!=e.unload&&n.push((()=>e.unload(this.instruction,t))),Lk.run(null,...n)):null!=e.unload?e.unload(this.instruction,t):void 0}activateComponent(t,e,n,i,s,r,o){return Lk.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(n)),(()=>{if(this.contentStates.has("activating")||this.contentStates.has("activated"))return;this.contentStates.set("activating",void 0);const t=this.contentController(s);return t.activate(null!=e?e:t,n,i,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,n,i,s,r=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return Lk.run(t,(()=>{if(r&&null!==s.element){const t=Array.from(s.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}this.contentStates.delete("activated"),this.contentStates.delete("activating");const t=this.contentController(s);return t.deactivate(null!=e?e:t,n,i)}))}disposeComponent(t,e,n=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance){if(!n)return this.contentStates.delete("created"),this.contentController(t).dispose();e.push(this)}}freeContent(t,e,n,i,s=!1){return Lk.run(t,(()=>this.unload(n)),(t=>this.deactivateComponent(t,null,e.controller,0,e,s)),(()=>this.disposeComponent(e,i,s)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t)}toComponentInstance(t){return this.instruction.component.none?null:this.instruction.component.toInstance(t)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}getLifecycleHooks(t,e){var n;return(null!==(n=t.$controller.lifecycleHooks[e])&&void 0!==n?n:[]).map((t=>t.instance[e].bind(t.instance)))}}class Zk{constructor(t=!0,e=[],n="",i="",s=!1,r=!1,o=!1,a=!1,l=!1){this.scope=t,this.usedBy=e,this.fallback=i,this.noLink=s,this.noTitle=r,this.stateful=o,this.forceDescription=a,this.noHistory=l,this.default=void 0,this.default=n}static create(t){const e=new Zk;return void 0!==t&&e.apply(t),e}apply(t){var e,n,i,s,r,o,a,l,c;this.scope=null!==(e=t.scope)&&void 0!==e?e:this.scope,this.usedBy=null!==(n="string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)&&void 0!==n?n:this.usedBy,this.default=null!==(i=t.default)&&void 0!==i?i:this.default,this.fallback=null!==(s=t.fallback)&&void 0!==s?s:this.fallback,this.noLink=null!==(r=t.noLink)&&void 0!==r?r:this.noLink,this.noTitle=null!==(o=t.noTitle)&&void 0!==o?o:this.noTitle,this.stateful=null!==(a=t.stateful)&&void 0!==a?a:this.stateful,this.forceDescription=null!==(l=t.forceDescription)&&void 0!==l?l:this.forceDescription,this.noHistory=null!==(c=t.noHistory)&&void 0!==c?c:this.noHistory}}class qk extends mk{constructor(t,e,n,i,s,r){super(t,e,n),this.contents=[],this.forceRemove=!1,this.options=new Zk,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new zk(t,this,i,s)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){var t;if(1===this.contents.length)return this.contents[0];let e;for(let n=0,i=this.contents.length;n<i&&null!==(t=this.contents[n].completed)&&void 0!==t&&t;n++)e=this.contents[n];return e}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let n=0,i=this.contents.length;n<i&&!(this.contents[n].navigation.timestamp>t);n++)e=this.contents[n];return e}get parentViewport(){let t=this.connectedScope;for(;null!=(null==t?void 0:t.parent);)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.getContent())||void 0===t?void 0:t.instruction.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`v:${this.name}[${s}->${r}]`}setNextContent(t,e){var n;t.endpoint.set(this),this.clear=t.isClear(this.router);const i=this.contents[this.contents.length-1],s=new zk(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,null!==(n=this.connectedCE)&&void 0!==n?n:null);if(this.contents.push(s),s.fromHistory=!(null===s.componentInstance||!e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>s.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(s),1,t),s.fromCache=!0):this.cache.push(s)}return null!==s.componentInstance&&i.componentInstance===s.componentInstance?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):!i.equalComponent(s)||e.navigation.refresh||"refresh"===i.reloadBehavior?this.transitionAction="swap":"disallow"===i.reloadBehavior?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):"reload"===i.reloadBehavior?(i.reload=!0,s.instruction.component.set(i.componentInstance),s.contentStates=i.contentStates.clone(),s.reload=i.reload,this.transitionAction="reload"):this.options.stateful&&i.equalParameters(s)||i.equalParameters(s)?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){var n,i,s,r,o;e=null!=e?e:{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),null!=this.connectionResolve&&this.connectionResolve());const a=(null!==(i=null===(n=this.scope.parent)||void 0===n?void 0:n.endpoint.getRoutes())&&void 0!==i?i:[]).filter((t=>""===t.path)).length>0;if(null===this.getContent().componentInstance&&null==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance)&&(this.options.default||a)){const t=Kk.parse(this.router,null!==(r=this.options.default)&&void 0!==r?r:"");if(0===t.length&&a){const e=null===(o=this.scope.parent)||void 0===o?void 0:o.findInstructions([Kk.create("")],!1,this.router.configuration.options.useConfiguredRoutes);(null==e?void 0:e.foundConfiguration)&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&Lk.run(t,(t=>{var e,n;if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),Lk.run(t,...e)}return!0}))}async transition(t){var e,n,i,s;const r=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let o=this.parentViewport;null!==o&&"reload"!==o.transitionAction&&"swap"!==o.transitionAction&&(o=null);const a=[e=>{if(this.isActiveNavigation(t))return this.canUnload(e)},e=>{this.isActiveNavigation(t)&&(e.previousValue?this.router.isRestrictedNavigation&&this.getNextContent().createComponent(this.connectedCE,this.options.fallback):t.cancel()),t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==o?t.waitForEndpointState(o,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(e)},e=>{if(this.isActiveNavigation(t)){const n=e.previousValue;if("boolean"!=typeof n)return Lk.run(e,(()=>this.router.load(n,{append:!0})),(e=>this.cancelContentChange(t,e)));if(!n)return e.cancel(),void t.cancel()}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],l=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==o?t.waitForEndpointState(o,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],c=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":c.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":c.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":c.push((e=>Lk.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":c.push((e=>Lk.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}c.push((()=>t.addEndpointState(this,"swapped"))),null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!0),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!0);const h=Lk.run(null,(e=>t.setEndpointStep(this,e.root)),...a,...l,...c,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{var e,n,i,s;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!1),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!1)}));h instanceof Promise&&h.catch((t=>{}))}canUnload(t){return Lk.run(t,(t=>this.getContent().connectedScope.canUnload(t)),(t=>{var e,n;return!!t.previousValue&&this.getContent().canUnload(null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null)}))}canLoad(t){return!!this.clear||Lk.run(t,(()=>this.waitForConnected()),(()=>(this.getNextContent().createComponent(this.connectedCE,this.options.fallback),this.getNextContent().canLoad())))}load(t){if(!this.clear)return this.getNextContent().load(t)}addContent(t,e){return this.activate(t,null,this.connectedController,0,e)}removeContent(t,e){var n;if(this.isEmpty)return;const i=this.router.statefulHistory||null!==(n=this.options.stateful)&&void 0!==n&&n;return Lk.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController,i?0:16)),(()=>i?this.dispose():void 0))}activate(t,e,n,i,s){if(null!==this.activeContent.componentInstance)return Lk.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,n,i,this.connectedCE,(()=>null==s?void 0:s.addEndpointState(this,"bound")),null==s?void 0:s.waitForSyncState("bound"))))}deactivate(t,e,n,i){var s;const r=this.getContent();if(null!=(null==r?void 0:r.componentInstance)&&!r.reload&&r.componentInstance!==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance))return r.deactivateComponent(t,e,n,i,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t){return Lk.run(t,(t=>this.getContent().connectedScope.unload(t)),(()=>{var t,e;return null!=this.getContent().componentInstance?this.getContent().unload(null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.navigation)&&void 0!==e?e:null):void 0}))}dispose(){var t;null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===(null===(t=this.getNextContent())||void 0===t?void 0:t.componentInstance)||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){var n,i,s,r,o;const a=this.contents.findIndex((e=>e.navigation===t.navigation));let l=this.contents[a];const c=this.contents[a-1];if(this.clear){const t=new zk(this.router,this,this.owningScope,this.scope.hasScope,void 0,l.navigation);this.contents.splice(a,1,t),l.delete(),l=t}else l.reload=!1;c.delete(),l.completed=!0,this.transitionAction="",l.contentStates.delete("checkedUnload"),l.contentStates.delete("checkedLoad"),this.previousViewportState=null;const h=this.router.configuration.options.indicators.viewportNavigating;null===(i=null===(n=this.connectedCE)||void 0===n?void 0:n.setActivity)||void 0===i||i.call(n,h,!1),null===(r=null===(s=this.connectedCE)||void 0===s?void 0:s.setActivity)||void 0===r||r.call(s,t.navigation.navigation,!1);let u=0;for(let t=0,e=a;t<e&&null!==(o=this.contents[0].navigation.completed)&&void 0!==o&&o;t++)u++;this.contents.splice(0,u),Rk(this.coordinators,(e=>e===t))}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation)),i=this.contents[n],s=this.contents[n-1];return Lk.run(e,(t=>{if(null!=i)return i.freeContent(t,this.connectedCE,i.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)}),(()=>{var e,n,r,o;this.previousViewportState&&Object.assign(this,this.previousViewportState),null==i||i.delete(),null!==i&&this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="",null==s||s.contentStates.delete("checkedUnload"),null==s||s.contentStates.delete("checkedLoad");const a=this.router.configuration.options.indicators.viewportNavigating;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,a,!1),null===(o=null===(r=this.connectedCE)||void 0===r?void 0:r.setActivity)||void 0===o||o.call(r,t.navigation.navigation,!1),t.removeEndpoint(this),Rk(this.coordinators,(e=>e===t))}),(()=>null==e?void 0:e.exit()))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const n=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==n)return Lk.run(t,(t=>(this.forceRemove=!0,n.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,Rk(this.historyCache,(t=>t===n))}))}getRoutes(){let t=this.getComponentType();if(null===t)return null;t=t.constructor===t.constructor.constructor?t:t.constructor;const e=Bk.getConfiguration(t);return Array.isArray(e)?e:null}getTitle(t){var e,n;if(this.options.noTitle)return"";const i=this.getComponentType();if(null===i)return"";let s="";const r=i.title;if(void 0!==r)if("string"==typeof r)s=r;else{const e=this.getComponentInstance();s=r.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=null!==(e=this.getContentInstruction().component.name)&&void 0!==e?e:"";const i=null!==(n=this.router.configuration.options.title.componentPrefix)&&void 0!==n?n:"";t.startsWith(i)&&(t=t.slice(i.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){var t;let e=null!==(t=this.getContentInstruction().component.type)&&void 0!==t?t:null;return null===e&&(e=zh.for(this.connectedCE.element).container.componentType),null!=e?e:null}getComponentInstance(){var t;return null!==(t=this.getContentInstruction().component.instance)&&void 0!==t?t:null}getContentInstruction(){var t,e,n;return null!==(n=null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.instruction)&&void 0!==e?e:this.getContent().instruction)&&void 0!==n?n:null}clearState(){this.options=Zk.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new zk(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class Hk{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof qk?"Viewport":this.instance instanceof jk?"ViewportScope":null}static create(t){const e=new Hk;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof mk}static getName(t){return Hk.isName(t)?t:t?t.name:null}static getInstance(t){return Hk.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class Kk{constructor(t,e,n){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.component=Ik.create(t),this.endpoint=Hk.create(e),this.parameters=$k.create(n)}static create(t,e,n,i=!0,s=null){const r=new Kk(t,e,n);return r.ownsScope=i,r.nextScopeInstructions=s,r}static createClear(t,e){return Kk.create(Kk.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const n=[];for(const i of e)if("string"==typeof i)n.push(...Kk.parse(t,i));else if(i instanceof Kk)n.push(i);else if(i instanceof Promise)n.push(Kk.create(i));else if(Ik.isAppelation(i))n.push(Kk.create(i));else if(Ik.isDefinition(i))n.push(Kk.create(i.Type));else if("component"in i){const e=i,s=Kk.create(e.component,e.viewport,e.parameters);void 0!==e.children&&null!==e.children&&(s.nextScopeInstructions=Kk.from(t,e.children)),n.push(s)}else if("object"==typeof i&&null!==i){const t=zh.define(i);n.push(Kk.create(t))}else n.push(Kk.create(i));return n}static clear(t){return Ak.for(t).clear}static add(t){return Ak.for(t).add}static parse(t,e){const n=Ak.for(t);let i="";const s=/^[./]+/.exec(e);Array.isArray(s)&&s.length>0&&(i=s[0],e=e.slice(i.length));const r=kk.parse(n,e,!0,!0).instructions;for(const t of r)t.scopeModifier=i;return r}static stringify(t,e,n=!1,i=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,n,i))).filter((t=>t.length>0)).join(Ak.for(t).sibling)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>Kk.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const n of t)e.push(n),n.hasNextScopeInstructions&&e.push(...Kk.flat(n.nextScopeInstructions));return e}static clone(t,e=!1,n=!1){return t.map((t=>t.clone(e,n)))}static contains(t,e,n,i){return n.every((n=>n.isIn(t,e,i)))}get viewport(){return this.endpoint.instance instanceof qk||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof jk||null===this.endpoint.endpointType?this.endpoint:null}get previous(){var t,e;return null===(e=null===(t=this.endpoint.instance)||void 0===t?void 0:t.getContent())||void 0===e?void 0:e.instruction}isAdd(t){return this.component.name===Ak.for(t).add}isClear(t){return this.component.name===Ak.for(t).clear}isAddAll(t){var e,n;return this.isAdd(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}isClearAll(t){var e,n;return this.isClear(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}get hasNextScopeInstructions(){var t,e;return(null!==(e=null===(t=this.nextScopeInstructions)||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0}typeParameters(t){var e,n;return this.parameters.toSpecifiedParameters(t,null!==(n=null===(e=this.component.type)||void 0===e?void 0:e.parameters)&&void 0!==n?n:[])}sameComponent(t,e,n=!1,i=!1){return!(n&&!this.sameParameters(t,e,i))&&this.component.same(e.component,i)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,n=!1){return!!this.component.same(e.component,n)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,n=!1){var i,s,r,o,a;const l=Ak.for(t);let c=e,h=!1;if(n){const t=null!==(s=null===(i=this.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==(r=null==t?void 0:t.options.noLink)&&void 0!==r&&r)return"";this.needsEndpointDescribed||null!==(o=null==t?void 0:t.options.forceDescription)&&void 0!==o&&o&&null==(null===(a=this.viewportScope)||void 0===a?void 0:a.instance)||(c=!0),(null==t?void 0:t.options.fallback)===this.component.name&&(h=!0),(null==t?void 0:t.options.default)===this.component.name&&(h=!0)}const u=this.nextScopeInstructions;let d=this.scopeModifier;if(null!==this.route){if(!this.routeStart)return Array.isArray(u)?Kk.stringify(t,u,e,n):"";const i=this.route.matching;d+=i.endsWith(l.scope)?i.slice(0,-l.scope.length):i}else d+=this.stringifyShallow(t,c,h);if(Array.isArray(u)&&u.length>0){const i=Kk.stringify(t,u,e,n);i.length>0&&(d+=l.scope,d+=1===u.length?i:`${l.groupStart}${i}${l.groupEnd}`)}return d}clone(t=!1,e=!1,n=!1){var i,s,r,o,a,l;const c=Kk.create(null!==(r=null!==(s=null!==(i=this.component.func)&&void 0!==i?i:this.component.promise)&&void 0!==s?s:this.component.type)&&void 0!==r?r:this.component.name,this.endpoint.name,null!==this.parameters.typedParameters?this.parameters.typedParameters:void 0);return t&&(c.component.set(null!==(a=null!==(o=this.component.instance)&&void 0!==o?o:this.component.type)&&void 0!==a?a:this.component.name),c.endpoint.set(null!==(l=this.endpoint.instance)&&void 0!==l?l:this.endpoint.name)),c.component.name=this.component.name,c.needsEndpointDescribed=this.needsEndpointDescribed,c.route=this.route,c.routeStart=this.routeStart,c.default=this.default,e&&(c.scopeModifier=this.scopeModifier),c.scope=t?this.scope:null,this.hasNextScopeInstructions&&!n&&(c.nextScopeInstructions=Kk.clone(this.nextScopeInstructions,t,e)),c}isIn(t,e,n){const i=e.filter((e=>{var n,i;if(!e.sameComponent(t,this))return!1;const s=null!==(n=e.component.type)&&void 0!==n?n:this.component.type,r=null!==(i=this.component.type)&&void 0!==i?i:e.component.type,o=e.parameters.toSpecifiedParameters(t,null==s?void 0:s.parameters),a=this.parameters.toSpecifiedParameters(t,null==r?void 0:r.parameters);return!!$k.contains(o,a)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===i.length||n&&this.hasNextScopeInstructions&&!i.some((e=>{var i;return Kk.contains(t,null!==(i=e.nextScopeInstructions)&&void 0!==i?i:[],this.nextScopeInstructions,n)})))}getTitle(t){var e;if(null!==this.route){const n=null===(e=this.route.match)||void 0===e?void 0:e.title;if(null!=n)return this.routeStart?"string"==typeof n?n:n(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){var t,e,n;return{component:null!==(t=this.component.name)&&void 0!==t?t:void 0,viewport:null!==(e=this.endpoint.name)&&void 0!==e?e:void 0,parameters:null!==(n=this.parameters.parametersRecord)&&void 0!==n?n:void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,n=!1){var i;const s=Ak.for(t);let r=n?"":null!==(i=this.component.name)&&void 0!==i?i:"";const o=this.component.type?this.component.type.parameters:null,a=$k.stringify(t,this.parameters.toSortedParameters(t,o));return a.length>0&&(r+=n?a:`${s.parameters}${a}${s.parametersEnd}`),null==this.endpoint.name||e||(r+=`${s.viewport}${this.endpoint.name}`),this.ownsScope||(r+=s.noScope),r||""}}class Wk{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new Wk(Wk.eventName,t)}}Wk.eventName="au:router:navigation-navigate";let Qk=class{constructor(t,e){this.ea=t,this.container=e,this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=Vk.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.lastNavigationIndex=-1}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){var e,n,i,s;t instanceof Vk||(t=Vk.create(t));const r=new Fk;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?r.refresh=!0:(r.first=!0,r.new=!0,this.lastNavigationIndex=0,this.navigations=[Vk.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||null!==(e=t.replacing)&&void 0!==e&&e||null!==(n=t.refreshing)&&void 0!==n&&n?null!==(i=t.refreshing)&&void 0!==i&&i||r.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):null!==(s=t.replacing)&&void 0!==s&&s?(r.replace=!0,r.new=!0,t.index=this.lastNavigationIndex):(r.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?r.forward=!0:t.historyMovement<0&&(r.back=!0)),t.navigation=r,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new Pk,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){var n,i,s,r,o,a,l;if(null!==(n=t.untracked)&&void 0!==n&&n)null!==(i=t.fromBrowser)&&void 0!==i&&i&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(null!==(s=t.replacing)&&void 0!==s&&s)0===(null!==(r=t.historyMovement)&&void 0!==r?r:0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const n=t.index;if(e&&(this.navigations=this.navigations.slice(0,n)),this.navigations[n]=t,(null!==(o=this.options.statefulHistoryLength)&&void 0!==o?o:0)>0){const t=this.navigations.length-(null!==(a=this.options.statefulHistoryLength)&&void 0!==a?a:0);for(const e of this.navigations.slice(n))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,n))}await this.saveState(t.index,!(null!==(l=t.fromBrowser)&&void 0!==l&&l))}}async cancel(t){var e,n,i;null!=this.options.store&&((null===(e=t.navigation)||void 0===e?void 0:e.new)?null!==(n=t.fromBrowser)&&void 0!==n&&n&&await this.options.store.popNavigatorState():0!==(null!==(i=t.historyMovement)&&void 0!==i?i:0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const n=this.navigations[e];return this.navigate(n)}getState(){var t,e;const n=null!=this.options.store?{...this.options.store.state}:{};return{navigations:null!==(t=null==n?void 0:n.navigations)&&void 0!==t?t:[],navigationIndex:null!==(e=null==n?void 0:n.navigationIndex)&&void 0!==e?e:-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>Vk.create(t))),this.lastNavigationIndex=e}async saveState(t,e){var n,i,s,r,o;for(let t=0;t<this.navigations.length;t++)this.navigations[t]=Vk.create(this.navigations[t].toStoredNavigation());if((null!==(n=this.options.statefulHistoryLength)&&void 0!==n?n:0)>0){const t=this.navigations.length-(null!==(i=this.options.statefulHistoryLength)&&void 0!==i?i:0);for(let e=0;e<t;e++){const n=this.navigations[e];"string"==typeof n.instruction&&"string"==typeof n.fullStateInstruction||await this.serializeNavigation(n,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const a={navigations:(null!==(s=this.navigations)&&void 0!==s?s:[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?null===(o=null===(r=this.options)||void 0===r?void 0:r.store)||void 0===o?void 0:o.pushNavigatorState(a):this.options.store.replaceNavigatorState(a)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(Wk.eventName,Wk.create(t))}toStoreableNavigation(t){const e=t instanceof Vk?t.toStoredNavigation():t;return e.instruction=Kk.stringify(this.container,e.instruction),e.fullStateInstruction=Kk.stringify(this.container,e.fullStateInstruction),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let n=[];for(const t of e)"string"!=typeof t.instruction&&n.push(...Kk.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&n.push(...Kk.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));n=Ok(n);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=Kk.stringify(this.container,t.fullStateInstruction)),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=Kk.stringify(this.container,t.instruction)),i=i.filter(((t,e,n)=>null!=t.component.instance&&n.indexOf(t)===e));const s=[];for(const t of i)await this.freeInstructionComponents(t,n,s)}freeInstructionComponents(t,e,n){var i,s;const r=t.component.instance,o=null!==(s=null===(i=t.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==r&&null!==o&&!n.some((t=>t===r))){if(!e.some((t=>t===r)))return Lk.run(null,(t=>o.freeContent(t,r)),(()=>{n.push(r)}));if(t.hasNextScopeInstructions)for(const i of t.nextScopeInstructions)return this.freeInstructionComponents(i,e,n)}}};Qk=yk([xk(0,Ci),xk(1,wn)],Qk);class _k extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){Rk(this,(e=>e===t))}}class Gk{static matchEndpoints(t,e,n,i=!1){const s=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!n.some((e=>t===e.endpoint.instance)))),o=new _k(...e.slice());let a=null;for(Gk.matchKnownEndpoints(t.router,"ViewportScope",o,r,s,!1),i||Gk.matchKnownEndpoints(t.router,"Viewport",o,r,s,!1),Gk.matchViewportScopeSegment(t.router,t,o,r,s);null!==(a=o.next());)a.needsEndpointDescribed=!0;return Gk.matchViewportConfiguration(o,r,s),i||Gk.matchSpecifiedViewport(o,r,s,!1),Gk.matchLastViewport(o,r,s),i&&Gk.matchSpecifiedViewport(o,r,s,!1),{matchedInstructions:s,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,n,i,s,r=!1){let o;for(;null!==(o=n.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(Gk.matchEndpoint(o,o.endpoint.instance,r),s.push(o),Rk(i,(t=>t===o.endpoint.instance)),n.removeCurrent())}static matchViewportScopeSegment(t,e,n,i,s){let r;for(;null!==(r=n.next());)for(let o of i)if(o instanceof jk&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let n=i.find((t=>t instanceof jk&&t.name===o.name));if(void 0===n||r.isAdd(t)){const t=o.addSourceItem();n=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=n}Gk.matchEndpoint(r,o,!1),s.push(r),Rk(i,(t=>t===r.endpoint.instance)),n.removeCurrent();break}}static matchViewportConfiguration(t,e,n){let i;for(;null!==(i=t.next());)for(const s of e)if(s instanceof qk&&(null==s?void 0:s.wantComponent(i.component.name))){Gk.matchEndpoint(i,s,!0),n.push(i),Rk(e,(t=>t===i.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,n,i){var s;let r;for(;null!==(r=t.next());){let o=r.endpoint.instance;if(null==o){const t=r.endpoint.name;if(0===(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0))continue;for(const n of e)if(n instanceof qk&&t===n.name){o=n;break}}(null==o?void 0:o.acceptComponent(r.component.name))&&(Gk.matchEndpoint(r,o,i),n.push(r),Rk(e,(t=>t===r.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,n){let i;for(;null!==(i=t.next());){const s=[];for(const t of e)t instanceof qk&&t.acceptComponent(i.component.name)&&s.push(t);if(1===s.length){const r=s[0];Gk.matchEndpoint(i,r,!0),n.push(i),Rk(e,(t=>t===i.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,n){t.endpoint.set(e),n&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof qk?e.scope:e.scope.scope)}))}}class Xk{constructor(t,e,n,i){this.router=t,this.hasScope=e,this.owningScope=n,this.endpointContent=i,this.id=-1,this.parent=null,this.children=[],this.path=null,this.id=++Xk.lastId,this.owningScope=null!=n?n:this}static for(t){var e;if(null==t)return null;if(t instanceof Xk||t instanceof qk||t instanceof jk)return t.scope;let n;if("res"in t)n=t;else if("container"in t)n=t.container;else if("$controller"in t)n=t.$controller.container;else{const e=zh.for(t,{searchParents:!0});n=null==e?void 0:e.container}if(null==n)return null;const i=n.has(cS.closestEndpointKey,!0)?n.get(cS.closestEndpointKey):null;return null!==(e=null==i?void 0:i.scope)&&void 0!==e?e:null}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof qk}get isViewportScope(){return this.endpoint instanceof jk}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const n=t.indexOf(e);t.splice(n,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const n=e.indexOf(t);e.splice(n,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,n,i=""){var s,r,o,a;const l=this.router,c=l.configuration.options,h=t.filter((t=>null==t.route));if(h.length>0){const e=this.findInstructions(h,c.useDirectRouting,c.useConfiguredRoutes);!h.some((t=>!t.component.none))||e.foundConfiguration||e.foundInstructions||l.unknownRoute(Kk.stringify(l,h)),t=[...t.filter((t=>null!=t.route)),...e.instructions],t.some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(i=(null!=i?i:"")+e.matching)}const u=t.filter((t=>t.component.isFunction()||t.component.isPromise()));u.length>0&&await Promise.all(u.map((t=>t.component.resolve()))),c.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let d=[];({clearEndpoints:d,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(l))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;const p=[];let f=[],{matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(t,f),m=100;do{m--||l.unresolvedInstructionsError(e,v);const c=[],h=g.map((t=>t.endpoint.instance));g.push(...d.filter((t=>!h.includes(t))).map((t=>Kk.createClear(l,t))));const u=await rS.invokeBeforeNavigation(g,e);if(!1===u)return l.cancelNavigation(e,n),[];if(!0!==u&&u!==g){const t=Kk.flat(g);v=v.filter((e=>!t.includes(e))),g=u}for(const t of g){const o=t.endpoint.instance;if(null!==o){const a=o.setNextContent(t,e);"skip"!==a&&(c.push(o),n.addEndpoint(o));const h=[o];if("swap"===a&&h.push(...o.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),Rk(d,(t=>h.includes(t))),Rk(g,(e=>e!==t&&e.isClear(l)&&h.includes(e.endpoint.instance))),!t.isClear(l)&&(null===(r=null===(s=t.scope)||void 0===s?void 0:s.parent)||void 0===r?void 0:r.isViewportScope)&&(Rk(d,(e=>e===t.scope.parent.endpoint)),Rk(g,(e=>e!==t&&e.isClear(l)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==a&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=o.scope,e.endpoint.instance=null;"skip"!==a||t.hasNextScopeInstructions||p.push(...await o.scope.processInstructions([],e,n,i))}}const b=g.filter((t=>{var e;return"skip"===(null===(e=t.endpoint.instance)||void 0===e?void 0:e.transitionAction)})),w=b.filter((t=>t.hasNextScopeInstructions));if((0===b.length||0===w.length)&&(l.isRestrictedNavigation||n.finalEndpoint(),n.run(),n.hasAllEndpoints)){const t=n.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(n.cancelled)return l.cancelNavigation(e,n),[];for(const t of c)p.every((e=>e!==t))&&p.push(t);if(f.push(...g.splice(0)),v.length>0&&({matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(v,f)),!l.isRestrictedNavigation&&(g.length>0||v.length>0)&&n.running){const t=n.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===g.length&&0===v.length){const s=[];for(const r of t){if(!r.hasNextScopeInstructions)continue;const t=null!==(a=null===(o=r.endpoint.instance)||void 0===o?void 0:o.scope)&&void 0!==a?a:r.endpoint.scope;s.push(t.processInstructions(r.nextScopeInstructions,e,n,i))}p.push(...(await Promise.all(s)).flat())}if(e.useFullStateInstruction&&(n.appendedInstructions=n.appendedInstructions.filter((t=>!t.default))),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v)),0===g.length&&0===v.length){const t=f.map((t=>{var e,n;return null===(n=(null===(e=t.endpoint.instance)||void 0===e?void 0:e.connectedCE).pendingPromise)||void 0===n?void 0:n.promise})).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v))):g=d.map((t=>Kk.createClear(l,t)))}const y=g.filter((t=>t.component.isFunction()||t.component.isPromise()));y.length>0&&await Promise.all(y.map((t=>t.component.resolve())))}while(g.length>0||v.length>0);return p}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.router.configuration.options.useConfiguredRoutes&&this.router.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.router.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const n=Kk.create(Kk.clear(e));return n.scope=this,[n,...t]}return t}getClearAllEndpoints(t){const e=this.router;let n=[];return t.some((t=>{var n;return(null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e)}))&&(n=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>{var n;return!((null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e))}))),{clearEndpoints:n,instructions:t}}findInstructions(t,e,n){var i,s;const r=this.router;let o=new wk;if(n&&!Kk.containsSiblings(r,t)){let n=t.filter((t=>t.isClear(r)||t.isClearAll(r)));const a=t.filter((t=>!t.isClear(r)&&!t.isClearAll(r)));if(a.length>0)for(const l of a){const c=this.findMatchingRoute(Kk.stringify(r,a));if(null!==(i=null==c?void 0:c.foundConfiguration)&&void 0!==i&&i)o=c,o.instructions=[...n,...o.instructions],n=[];else{if(!e)throw new Error(`No route found for: ${Kk.stringify(r,t)}!`);o.instructions=[...n,...o.instructions,l],n=[],o.remaining=Kk.stringify(r,null!==(s=l.nextScopeInstructions)&&void 0!==s?s:[])}}else o.instructions=[...n]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${Kk.stringify(r,t)}!`);o.instructions.push(...t)}o.instructions=o.instructions.filter((t=>""!==t.component.name));for(const t of o.instructions)null===t.scope&&(t.scope=this);return o}matchEndpoints(t,e,n=!1){const i=[],s=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)===this})),r=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)!==this})),{matchedInstructions:o,remainingInstructions:a}=Gk.matchEndpoints(this,s,e,n);return i.push(...o),r.push(...a),{matchedInstructions:i,remainingInstructions:r}}addEndpoint(t,e,n,i={}){var s,r,o,a;let l=null!==(r=null===(s=this.getOwnedScopes().find((n=>n.type===t&&n.endpoint.name===e)))||void 0===s?void 0:s.endpoint)&&void 0!==r?r:null;return null!=n&&null!=(null==l?void 0:l.connectedCE)&&l.connectedCE!==n&&(l=null!==(a=null===(o=this.getOwnedScopes(!0).find((i=>i.type===t&&i.endpoint.name===e&&i.endpoint.connectedCE===n)))||void 0===o?void 0:o.endpoint)&&void 0!==a?a:null),null==l&&(l="Viewport"===t?new qk(this.router,e,n,this.scope,!!i.scope,i):new jk(this.router,e,n,this.scope,!0,null,i),this.addChild(l.connectedScope)),null!=n&&l.setConnectedCE(n,i),l}removeEndpoint(t,e,n){return!(null===(null!=n?n:null)&&!e.removeEndpoint(t,n)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const n of e.slice())e.push(...n.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const n of e.slice())e.push(...n.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const n of e.slice())if(n.passThroughScope){const i=e.indexOf(n);e.splice(i,1,...n.getOwnedRoutingScopes(t))}return Ok(e)}getRoutingInstructions(t){var e;const n=Ok(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),i=[];for(const s of n){const n=s.instruction.clone(!0,!1,!1);""!==(null!==(e=n.component.name)&&void 0!==e?e:"")&&(n.nextScopeInstructions=s.connectedScope.getRoutingInstructions(t),i.push(n))}return i}canUnload(t){return Lk.run(t,(t=>Lk.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.canUnload(e):e=>t.canUnload(e))))),(t=>t.previousValue.every((t=>t))))}unload(t){return Lk.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.unload(e):e=>t.unload(e))))}matchScope(t,e=!1){const n=[];for(const i of t)i.scope===this?n.push(i):e&&i.hasNextScopeInstructions&&n.push(...this.matchScope(i.nextScopeInstructions,e));return n}findMatchingRoute(t){if(this.isViewportScope&&!this.passThroughScope)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());if(this.isViewport)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());for(const e of this.enabledChildren){const n=e.findMatchingRoute(t);if(null!==n)return n}return null}findMatchingRouteInRoutes(t,e){var n,i,s;if(!Array.isArray(e))return null;e=e.map((t=>this.ensureProperRoute(t)));const r=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const n of e)r.push({...t,path:n,handler:t}),""!==n&&r.push({...t,path:`${n}/*remainingPath`,handler:t})}const o=new wk;(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const a=e.find((e=>e.id===t));let l={params:{},endpoint:{}};if(null!=a)l.endpoint={route:{handler:a}};else{const e=new class{constructor(){this.rootState=new Dm(null,null,""),this.cache=new Map}add(t){if(t instanceof Array)for(const e of t)this.$add(e);else this.$add(t);this.cache.clear()}$add(t){const e=t.path,n=new Mm(t.path,!0===t.caseSensitive,t.handler),i=""===e?[""]:e.split("/").filter(zm),s=[];let r=this.rootState;for(const t of i)switch(r=r.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),n=e?t.slice(1,-1):t.slice(1);s.push(n),r=new Hm(n,e).appendTo(r);break}case"*":{const e=t.slice(1);s.push(e),r=new Km(e).appendTo(r);break}default:r=new qm(t,n.caseSensitive).appendTo(r)}const o=new Um(n,s);r.setEndpoint(o)}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new Vm(this.rootState);for(let n=0,i=t.length;n<i;++n){const i=t.charAt(n);if(e.advance(i),e.isEmpty)return null}const n=e.getSolution();if(null===n)return null;const{endpoint:i}=n,s=n.getParams();return new Bm(i,s)}};e.add(r),l=e.recognize(t)}if(null!=l){o.match=l.endpoint.route.handler,o.matching=t;const r={...l.params};if(null!=r.remainingPath&&(o.remaining=r.remainingPath,Reflect.deleteProperty(r,"remainingPath"),o.matching=o.matching.slice(0,o.matching.indexOf(o.remaining))),o.params=r,null!=(null===(n=o.match)||void 0===n?void 0:n.redirectTo)){let t=null===(i=o.match)||void 0===i?void 0:i.redirectTo;return(null!==(s=o.remaining)&&void 0!==s?s:"").length>0&&(t+=`/${o.remaining}`),this.findMatchingRouteInRoutes(t,e)}}if(o.foundConfiguration){o.instructions=Kk.clone(o.match.instructions,!1,!0);const t=o.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(o.params),e.route=o,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}o.instructions.length>0&&(o.instructions[0].routeStart=!0);const e=Kk.parse(this.router,o.remaining);if(e.length>0){let t=o.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return o}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=Kk.from(this.router,t.instructions)),t}}Xk.lastId=0;class Yk{constructor(t,e,n=0){this.taskQueue=t,this.item=e,this.cost=n,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class Jk{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{var e;null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=null!==(e=this.processing.cost)&&void 0!==e?e:0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const n=Array.isArray(t),i=n?t:[t],s=i.map(((t,n)=>Array.isArray(e)?e[n]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of i)r.push(t instanceof Yk?t:this.createQueueTask(t,s.shift()));return this.pending.push(...r),this.dequeue(),n?r:r[0]}createQueueTask(t,e){return new Yk(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,n){e(n),this.processing=null,this.dequeue()}}let tS=class{constructor(t,e,n,i,s){this.platform=t,this.window=e,this.history=n,this.location=i,this.ea=s,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls=new Jk}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){var t,e;const{pathname:n,search:i,hash:s}=this.location,r=null!==(t=this.options.useUrlFragmentHash)&&void 0!==t&&t?s.slice(1):`${n}${i}`,o=null!==(e=this.options.useUrlFragmentHash)&&void 0!==e&&e?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new eS(n,i.slice(1),o,r)}async go(t,e=!1){const n=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const i=n,s=e;this.forwardState({eventTask:i,suppressPopstate:s}),t.resolve()},e=>{const n=this.history,i=t;n.go(i),e.resolve()}],[0,1]),n.wait()}async pushNavigatorState(t){const{title:e,path:n}=t.navigations[t.navigationIndex],i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((s=>{const r=this.history,o=t,a=e||"",l=`${i}${n}`;try{r.pushState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,l),this.setTitle(a)}s.resolve()}),1).wait()}async replaceNavigatorState(t,e,n){const i=t.navigations[t.navigationIndex];null!=e||(e=i.title),null!=n||(n=i.path);const s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((i=>{const r=this.history,o=t,a=e||"",l=`${s}${n}`;try{r.replaceState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,l),this.setTitle(a)}i.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const n=t;await this.popState(n),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:n}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async i=>{n||this.notifySubscribers(t),null!==e&&await e.execute(),i.resolve()}),1)}notifySubscribers(t){this.ea.publish(nS.eventName,nS.create(this.viewerState,t,this.history.state))}async popState(t){var e,n;await this.go(-1,!0);const i=this.history.state,s=null===(e=null==i?void 0:i.navigations)||void 0===e?void 0:e[null!==(n=null==i?void 0:i.navigationIndex)&&void 0!==n?n:0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(i)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,n){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${n}`)}}};tS=yk([xk(0,Ac),xk(1,fd),xk(2,vd),xk(3,gd),xk(4,Ci)],tS);class eS{constructor(t,e,n,i){this.path=t,this.query=e,this.hash=n,this.instruction=i}}class nS{constructor(t,e,n,i){this.eventName=t,this.viewerState=e,this.event=n,this.state=i}static create(t,e,n){return new nS(nS.eventName,t,e,n)}}nS.eventName="au:router:navigation-state-change";class iS{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class sS{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,n){const i=new sS(t,e);return n.syncStates.forEach((t=>i.addSyncState(t))),i}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new Pk;this.syncStates.set(t,e)}addEndpoint(t){let e=this.entities.find((e=>e.endpoint===t));return void 0!==e||(e=new iS(t),this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this)),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&Rk(this.entities,(t=>t===e))}setEndpointStep(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t)),n.step=e}addEndpointState(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t));const i=n.states.get(e);i instanceof Pk&&i.resolve(),n.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const n=this.syncStates.get(t);if(void 0!==n){if(null!==e){const i=this.entities.find((t=>t.endpoint===e));if(null===(null==i?void 0:i.syncPromise)&&n.isPending)return i.syncingState=t,i.syncPromise=new Pk,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),i.syncPromise.promise}return n.isPending?n.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let n=this.entities.find((e=>e.endpoint===t));if(null==n&&(n=this.addEndpoint(t)),n.hasReachedState(e))return;let i=n.states.get(e);return null==i&&(i=new Pk,n.states.set(e,i)),i.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0}cancel(){this.cancelled=!0,this.entities.forEach((t=>{var e,n;const i=t.endpoint.cancelContentChange(this,null!==(n=null===(e=t.step)||void 0===e?void 0:e.current)&&void 0!==n?n:null);i instanceof Promise&&i.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{var t;null===(t=this.navigation.process)||void 0===t||t.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,n){let i=[...this.appendedInstructions];t=[...t],e=[...e],n=[...n];const s=i.filter((t=>!t.default)),r=i.filter((t=>t.default));for(i=s.length>0?[...s]:[...r];i.length>0;){const s=i.shift();Rk(this.appendedInstructions,(t=>t===s));const r=e.some((t=>t.sameEndpoint(s,!0))),o=t.find((t=>t.sameEndpoint(s,!0))),a=n.find((t=>t.sameEndpoint(s,!0)));s.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&Rk(t,(t=>t===o)),void 0!==a&&Rk(n,(t=>t===a)),null!==s.endpoint.instance?t.push(s):n.push(s))}return{matchedInstructions:t,earlierMatchedInstructions:e,remainingInstructions:n}}checkSyncState(t){var e;const n=this.syncStates.get(t);if(void 0!==n&&this.hasAllEndpoints&&n.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const n of this.entities)n.syncingState===t&&(null===(e=n.syncPromise)||void 0===e||e.resolve(),n.syncPromise=null,n.syncingState=null);n.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class rS{constructor(t,e,n){var i,s;this.hook=t,this.id=n,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of null!==(i=e.include)&&void 0!==i?i:[])this.includeTargets.push(new oS(t));for(const t of null!==(s=e.exclude)&&void 0!==s?s:[])this.excludeTargets.push(new oS(t))}static add(t,e){const n=new rS(t,null!=e?e:{},++this.lastIdentity);return this.hooks[n.type].push(n),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const n=this.hooks[e].findIndex((e=>e.id===t));n>=0&&this.hooks[e].splice(n,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,n){let i=n;for(const s of this.hooks[t])if(!s.wantsMatch||s.matches(n))if(i=await s.invoke(e,n),"boolean"==typeof i){if(!i)return!1}else n=i;return i}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}rS.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},rS.lastIdentity=0;class oS{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(Ik.isType(t))this.componentType=t,this.componentName=Ik.getName(t);else{const e=t;null!=e.component&&(this.componentType=Ik.isType(e.component)?Ik.getType(e.component):null,this.componentName=Ik.getName(e.component)),null!=e.viewport&&(this.viewport=Hk.isInstance(e.viewport)?e.viewport:null,this.viewportName=Hk.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(Kk.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class aS{static async getTitle(t,e,n){let i=await rS.invokeTransformTitle(t,e);if("string"!=typeof i){const t=aS.stringifyTitles(i,e,n);i=n.appTitle,i=i.replace(/\${componentTitles}/g,t),i=i.replace(/\${appTitleSeparator}/g,""!==t?n.appTitleSeparator:"")}return i=await rS.invokeTransformTitle(i,e),i}static stringifyTitles(t,e,n){const i=t.map((t=>aS.stringifyTitle(t,e,n))).filter((t=>{var e;return(null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0)>0}));return i.join(" + ")}static stringifyTitle(t,e,n){const i=t.nextScopeInstructions;let s=aS.resolveTitle(t,e,n);if(Array.isArray(i)&&i.length>0){let t=aS.stringifyTitles(i,e,n);t.length>0&&(1!==i.length&&(t=`[ ${t} ]`),s=s.length>0?"top-down"===n.componentTitleOrder?s+n.componentTitleSeparator+t:t+n.componentTitleSeparator+s:t)}return s}static resolveTitle(t,e,n){let i=t.getTitle(e);return null!=n.transformTitle&&(i=n.transformTitle(i,t,e)),i}}const lS=vn.createInterface("IRouter",(t=>t.singleton(cS)));class cS{constructor(t,e,n,i,s,r){this.container=t,this.ea=e,this.navigator=n,this.viewer=i,this.store=s,this.configuration=r,this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.handleNavigatorNavigateEvent=t=>{this.processNavigation(t.navigation).catch((t=>{throw t}))},this.handleNavigatorStateChangeEvent=t=>{var e;if(null!=(null===(e=t.state)||void 0===e?void 0:e.navigationIndex)){const e=Vk.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{var e;this.loadedFirst=!0;const n=this.configuration.options,i=sS.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(i),i.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(fS.eventName,fS.create(t));let s="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await rS.invokeTransformFromUrl(t.instruction,i.navigation);const r=n.basePath;null!==r&&"string"==typeof s&&s.startsWith(r)&&!n.useUrlFragmentHash&&(s=s.slice(r.length)),"/"===s&&(s=""),"string"==typeof s&&(s=""===s?[new Kk("")]:Kk.parse(this,s)),null!==(e=t.scope)&&void 0!==e||(t.scope=this.rootScope.scope);const o=await t.scope.processInstructions(s,t,i);return Lk.run(null,(()=>(i.finalEndpoint(),i.waitForSyncState("completed"))),(()=>(i.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&o.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(var t;this.coordinators.length>0&&this.coordinators[0].completed;){const e=this.coordinators.shift();await this.navigator.finalize(e.navigation,!1),this.ea.publish(mS.eventName,mS.create(e.navigation)),this.ea.publish(gS.eventName,gS.create(e.navigation)),null===(t=e.navigation.process)||void 0===t||t.resolve(!0)}}))}}static get inject(){return[wn,Ci,Qk,tS,tS,LS]}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw new Error("Router has already been started");this.isActive=!0;const t=this.container.get(Yu);this.rootScope=new jk(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const n=new URL(t.host.baseURI);e.basePath=n.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.navigatorStateChangeEventSubscription=this.ea.subscribe(nS.eventName,this.handleNavigatorStateChangeEvent),this.navigatorNavigateEventSubscription=this.ea.subscribe(Wk.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(uS.eventName,uS.create())}stop(){if(!this.isActive)throw new Error("Router has not been started");this.ea.publish(dS.eventName,dS.create()),this.navigator.stop(),this.viewer.stop(),this.navigatorStateChangeEventSubscription.dispose(),this.navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,n=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,n}getEndpoint(t,e){var n;return null!==(n=this.allEndpoints(t).find((t=>t.name===e)))&&void 0!==n?n:null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,e,n,i,s){const r=n.container,o=(r.has(cS.closestEndpointKey,!0)?r.get(cS.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=o.addEndpoint(e,i,n,s),Kn.instance(cS.closestEndpointKey,t).register(r)),t}disconnectEndpoint(t,e,n){if(!e.connectedScope.parent.removeEndpoint(t,e,n))throw new Error("Failed to remove endpoint: "+e.name)}async load(t,e){var n,i,s;e=null!=e?e:{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let r=null;if(({instructions:t,scope:r}=this.applyLoadOptions(t,e)),null!==(n=e.append)&&void 0!==n&&n&&(!this.loadedFirst||this.isNavigating))return t=Kk.from(this,t),this.appendInstructions(t,r),Promise.resolve();const o=Vk.create({instruction:t,fullStateInstruction:"",scope:r,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:null!==(i=e.replacing)&&void 0!==i&&i||e.replace,repeating:e.append,fromBrowser:null!==(s=e.fromBrowser)&&void 0!==s&&s,origin:e.origin,completed:!1});return this.navigator.navigate(o)}applyLoadOptions(t,e,n=!0){var i,s,r;"origin"in(e=null!=e?e:{})&&!("context"in e)&&(e.context=e.origin);let o=null!==(s=Xk.for(null!==(i=e.context)&&void 0!==i?i:null))&&void 0!==s?s:null;if("string"==typeof t){if(t.startsWith("/"))o=null;else{if(t.startsWith("."))for(t.startsWith("./")&&(t=t.slice(2));t.startsWith("../");)o=null!==(r=null==o?void 0:o.parent)&&void 0!==r?r:o,t=t.slice(3);null!=(null==o?void 0:o.path)&&(t=`${o.path}/${t}`,o=null)}if(!n){t=Kk.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}}else{t=Kk.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}return{instructions:t,scope:o}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw new Error(`Parameter instructions to checkActivate can not be a string ('${t}')!`);e=null!=e?e:{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>{var e;return null!==(e=t.scope)&&void 0!==e?e:t.scope=this.rootScope.scope}));const n=Ok(t.map((t=>t.scope)));for(const e of n){const n=e.matchScope(t,!1),i=e.matchScope(this.activeComponents,!0);if(!Kk.contains(this,i,n,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(bS.eventName,bS.create(t)),this.ea.publish(gS.eventName,gS.create(t)),function(t){const e=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return e.remainingInstructions=t,console.log(e,e.remainingInstructions),e}(e)}cancelNavigation(t,e){e.cancel(),this.ea.publish(vS.eventName,vS.create(t)),this.ea.publish(gS.eventName,gS.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const n of t)null===n.scope&&(n.scope=e);let n=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){n=this.coordinators[t];break}if(null===n){if(this.loadedFirst)throw Error("Failed to append routing instructions to coordinator");this.appendedInstructions.push(...t)}null==n||n.enqueueAppendedInstructions(t)}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.configuration.options.useConfiguredRoutes&&this.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}async updateNavigation(t){var e,n,i,s,r,o,a;this.rootScope.scope.reparentRoutingInstructions();const l=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:c}=this.rootScope.scope.matchEndpoints(l,[],!0),h=100;for(;c.length>0;){if(0==h--)throw new Error("Failed to find viewport when updating viewer paths.");c=c.map((t=>{var e;const{matchedInstructions:n}=t.endpoint.instance.scope.matchEndpoints(null!==(e=t.nextScopeInstructions)&&void 0!==e?e:[],[],!0);return n})).flat()}t.timestamp>=(null!==(n=null===(e=this.activeNavigation)||void 0===e?void 0:e.timestamp)&&void 0!==n?n:0)&&(this.activeNavigation=t,this.activeComponents=l);let u=await rS.invokeTransformToUrl(l,t);if("string"!=typeof u&&(u=Kk.stringify(this,u,!1,!0)),u=await rS.invokeTransformToUrl(u,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[n,i]of Object.entries(t.parameters)){n=encodeURIComponent(n),Array.isArray(i)||(i=[i]);for(const t of i)e.append(n,encodeURIComponent(t))}t.query=e.toString()}let d=`${this.configuration.options.basePath}/`;(null===d||""!==u&&"/"===u[0]||this.configuration.options.useUrlFragmentHash)&&(d="");const p=(null!==(s=null===(i=t.query)||void 0===i?void 0:i.length)&&void 0!==s?s:0)>0?"?"+t.query:"",f=(null!==(o=null===(r=t.fragment)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>0?"#"+t.fragment:"";t.path=d+u+p+f;const g=[Kk.create(Kk.clear(this))];if(g.push(...Kk.clone(l,this.statefulHistory)),t.fullStateInstruction=g,null===(null!==(a=t.title)&&void 0!==a?a:null)){const e=await aS.getTitle(l,t,this.configuration.options.title);null!==e&&(t.title=e)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[n,i]=t.split("#");t=n,e.fragment=i}return t}extractQuery(t,e){var n;if("string"==typeof t&&null==e.query){const[n,i]=t.split("?");t=n,e.query=i}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(null!==(n=e.parameters)&&void 0!==n||(e.parameters={}),new URLSearchParams(e.query).forEach(((t,n)=>{n=decodeURIComponent(n),t=decodeURIComponent(t),n in e.parameters?(Array.isArray(e.parameters[n])||(e.parameters[n]=[e.parameters[n]]),e.parameters[n].push(t)):e.parameters[n]=t}))),t}}cS.closestEndpointKey=an.annotation.keyFor("closest-endpoint");class hS{constructor(t){this.eventName=t}}class uS extends hS{static create(){return new uS(this.eventName)}}uS.eventName="au:router:router-start";class dS extends hS{static create(){return new dS(this.eventName)}}dS.eventName="au:router:router-stop";class pS{constructor(t,e){this.eventName=t,this.navigation=e}}class fS extends pS{static create(t){return new fS(this.eventName,t)}}fS.eventName="au:router:navigation-start";class gS extends pS{static create(t){return new gS(this.eventName,t)}}gS.eventName="au:router:navigation-end";class vS extends pS{static create(t){return new vS(this.eventName,t)}}vS.eventName="au:router:navigation-cancel";class mS extends pS{static create(t){return new mS(this.eventName,t)}}mS.eventName="au:router:navigation-complete";class bS extends pS{static create(t){return new bS(this.eventName,t)}}bS.eventName="au:router:navigation-error";const wS=vn.createInterface("ILinkHandler",(t=>t.singleton(yS)));let yS=class{constructor(t,e){this.window=t,this.router=e}handleEvent(t){this.handleClick(t)}handleClick(t){var e,n;if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const i=t.currentTarget;if(i.hasAttribute("external"))return;const s=null!==(e=i.getAttribute("target"))&&void 0!==e?e:"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const r=Ah.for(i,"load"),o=void 0!==r?r.viewModel.value:null,a=this.router.configuration.options.useHref&&i.hasAttribute("href")?i.getAttribute("href"):null;if(!(null!==o&&0!==o.length||null!==a&&0!==a.length))return;t.preventDefault();let l=null!==(n=null!=o?o:a)&&void 0!==n?n:"";"string"==typeof l&&l.startsWith("#")&&(l=l.slice(1),l.startsWith("/")||(l=`/${l}`)),this.router.load(l,{origin:i}).catch((t=>{throw t}))}};var xS;function kS(t,e,n,i,s=!1){var r;if(s)return""===e;if(n)return e;const o=null!==(r=i.getAttribute(t))&&void 0!==r?r:"";return o.length>0?o:e}function SS(t,e){if(!t.isActive)return new Promise((t=>{const n=e.subscribe(uS.eventName,(()=>{t(),n.dispose()}))}))}function AS(t,e,n,i){var s,r;let o=null===(r=null===(s=Ah.for(n,"considered-active"))||void 0===s?void 0:s.viewModel)||void 0===r?void 0:r.value;void 0===o&&(o=i);const a=t.applyLoadOptions(o,{context:e}),l=Kk.from(t,a.instructions);for(const t of l)null===t.scope&&(t.scope=a.scope);return l}function CS(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return null!=e||(e=t),e}yS=yk([xk(0,fd),xk(1,lS)],yS),function(t){t.default="default",t.disallow="disallow",t.reload="reload",t.refresh="refresh"}(xS||(xS={}));const ES=zh.createInjectable();let TS=class{constructor(t,e,n,i,s,r){this.router=t,this.element=e,this.container=n,this.ea=i,this.parentViewport=s,this.instruction=r,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1}hydrated(t){this.controller=t,this.container=t.container;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new Pk)),Lk.run(null,(()=>SS(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e,n){return this.isBound=!0,Lk.run(null,(()=>SS(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{var t;null!=(null===(t=this.endpoint)||void 0===t?void 0:t.activeResolve)&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{var e;if(null!==this.endpoint&&null===this.endpoint.getNextContent())return null===(e=this.endpoint.activate(null,t,this.controller,n,void 0))||void 0===e?void 0:e.asValue}))}detaching(t,e,n){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e,n)}unbinding(t,e,n){if(null!==this.endpoint)return this.disconnect(null)}dispose(){var t;null===(t=this.endpoint)||void 0===t||t.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,n=kS("name",this.name,t,e),i={};i.scope=!kS("no-scope",this.noScope,!1,e,!0),i.usedBy=kS("used-by",this.usedBy,t,e),i.default=kS("default",this.default,t,e),i.fallback=kS("fallback",this.fallback,t,e),i.noLink=kS("no-link",this.noLink,t,e,!0),i.noTitle=kS("no-title",this.noTitle,t,e,!0),i.noHistory=kS("no-history",this.noHistory,t,e,!0),i.stateful=kS("stateful",this.stateful,t,e,!0),Object.keys(i).forEach((t=>{void 0===i[t]&&delete i[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,n,i);const s=this.parentViewport;null!=s&&(Rk(s.pendingChildren,(t=>t===this)),0===s.pendingChildren.length&&null!==s.pendingPromise&&(s.pendingPromise.resolve(),s.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const n=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const i in t)this.element.classList.toggle(`${n}-${i}`,e&&t[i])}};yk([ql],TS.prototype,"name",void 0),yk([ql],TS.prototype,"usedBy",void 0),yk([ql],TS.prototype,"default",void 0),yk([ql],TS.prototype,"fallback",void 0),yk([ql],TS.prototype,"noScope",void 0),yk([ql],TS.prototype,"noLink",void 0),yk([ql],TS.prototype,"noTitle",void 0),yk([ql],TS.prototype,"noHistory",void 0),yk([ql],TS.prototype,"stateful",void 0),TS=yk([$h({name:"au-viewport",injectable:ES}),xk(0,lS),xk(1,rd),xk(2,wn),xk(3,Ci),xk(4,ES),xk(5,Id)],TS);const $S=zh.createInjectable();let IS=class{constructor(t,e,n,i,s){this.router=t,this.element=e,this.container=n,this.parent=i,this.parentController=s,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e,n){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e,n){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let n=this.getAttribute("catches",this.catches);void 0!==n&&(e.catches=n),n=this.getAttribute("collection",this.collection,!0),void 0!==n&&(e.collection=n),e.source=this.source||null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,n=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(n)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};yk([ql],IS.prototype,"name",void 0),yk([ql],IS.prototype,"catches",void 0),yk([ql],IS.prototype,"collection",void 0),yk([ql],IS.prototype,"source",void 0),IS=yk([$h({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:$S}),xk(0,lS),xk(1,rd),xk(2,wn),xk(3,$S),xk(4,Bu)],IS);let RS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.hasHref=null,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(gS.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#${t}`),this.element.setAttribute("href",t)}}updateActive(){const t=Ah.for(this.element,"load").parent,e=AS(this.router,t,this.element,this.value);CS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}};yk([ql({mode:tw.toView})],RS.prototype,"value",void 0),RS=yk([bh("load"),xk(0,rd),xk(1,lS),xk(2,wS),xk(3,Ci)],RS);let OS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(gS.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){var t;this.element.removeEventListener("click",this.linkHandler),null===(t=this.routerNavigationSubscription)||void 0===t||t.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=Ah.for(this.element,"href").parent,e=AS(this.router,t,this.element,this.value);CS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){var t;const e=this.$controller.parent.children;return null!==(t=null==e?void 0:e.some((t=>1===t.vmKind&&t.viewModel instanceof RS)))&&void 0!==t&&t}};yk([ql({mode:tw.toView})],OS.prototype,"value",void 0),OS=yk([bh({name:"href",noMultiBindings:!0}),xk(0,rd),xk(1,lS),xk(2,wS),xk(3,Ci)],OS);let PS=class{};yk([ql({mode:tw.toView})],PS.prototype,"value",void 0),PS=yk([bh("considered-active")],PS);const LS=vn.createInterface("IRouterConfiguration",(t=>t.singleton(BS))),MS=[lS],US=[TS,IS,RS,OS,PS];class BS{static register(t){const e=t.get(LS);return e.options=BS.options,e.options.setRouterConfiguration(e),BS.options=Ek.create(),t.register(...MS,...US,oh.beforeActivate(lS,BS.configurationCall),oh.afterActivate(lS,(t=>t.initialLoad())),oh.afterDeactivate(lS,(t=>t.stop())))}static customize(t){return void 0===t?(BS.options=Ek.create(),BS.configurationCall=t=>{t.start()}):t instanceof Function?BS.configurationCall=t:(BS.options=Ek.create(),BS.options.apply(t)),BS}static createContainer(){return this.register(vn.createContainer())}static for(t){return t instanceof cS?t.configuration:t.get(LS)}apply(t,e=!1){e&&(this.options=Ek.create()),this.options.apply(t)}addHook(t,e){return rS.add(t,e)}removeHook(t){return rS.remove(t)}removeAllHooks(){return rS.removeAll()}}function NS(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function jS(t,e){return function(n,i){e(n,i,t)}}function FS(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}BS.options=Ek.create(),BS.configurationCall=t=>{t.start()},Object.create,Object.create;var VS=n(3379),DS=n.n(VS),zS=n(7795),ZS=n.n(zS),qS=n(569),HS=n.n(qS),KS=n(3565),WS=n.n(KS),QS=n(9216),_S=n.n(QS),GS=n(4589),XS=n.n(GS),YS=n(1138),JS={};JS.styleTagTransform=XS(),JS.setAttributes=WS(),JS.insert=HS().bind(null,"head"),JS.domAPI=ZS(),JS.insertStyleElement=_S(),DS()(YS.Z,JS),YS.Z&&YS.Z.locals&&YS.Z.locals;var tA=n(3845),eA={};eA.styleTagTransform=XS(),eA.setAttributes=WS(),eA.insert=HS().bind(null,"head"),eA.domAPI=ZS(),eA.insertStyleElement=_S(),DS()(tA.Z,eA),tA.Z&&tA.Z.locals&&tA.Z.locals;const nA="description-block",iA='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',sA=iA,rA=[];let oA;function aA(t){oA||(oA=zh.define({name:nA,template:iA,dependencies:rA})),t.register(oA)}const lA={character:{type:"magus",physicalStatus:{fatigue:0,wounds:{lightWounds:0,mediumWounds:0,heavyWounds:0},totalPenalty:0},description:{name:"",description:""},abilities:[],personalityTraits:[],characteristics:{communication:{value:0,specialisation:"",agingPoints:0},dexterity:{value:0,specialisation:"",agingPoints:0},intelligence:{value:0,specialisation:"",agingPoints:0},perception:{value:0,specialisation:"",agingPoints:0},presence:{value:0,specialisation:"",agingPoints:0},quickness:{value:0,specialisation:"",agingPoints:0},stamina:{value:0,specialisation:"",agingPoints:0},strength:{value:0,specialisation:"",agingPoints:0}},flaws:[],virtues:[],arts:{creo:{level:0,xp:0,puissant:!1},muto:{level:0,xp:0,puissant:!1},rego:{level:0,xp:0,puissant:!1},intellego:{level:0,xp:0,puissant:!1},perdo:{level:0,xp:0,puissant:!1},animal:{level:0,xp:0,puissant:!1},auram:{level:0,xp:0,puissant:!1},aquam:{level:0,xp:0,puissant:!1},ignem:{level:0,xp:0,puissant:!1},terram:{level:0,xp:0,puissant:!1},herbam:{level:0,xp:0,puissant:!1},mentem:{level:0,xp:0,puissant:!1},corpus:{level:0,xp:0,puissant:!1},imaginem:{level:0,xp:0,puissant:!1},vim:{level:0,xp:0,puissant:!1}},spells:[],spellWishlist:[],ageing:{age:25,apparentAge:25,birthYear:1195,currentYear:1220,decrepitudeLevel:0,decrepitudePoints:0,longevityModifier:0,ageingRollModifier:0,livingConditionModifier:0},confidence:{score:3},warping:{warpingPoints:0,warpingLevel:0,ongoingEffects:[]},activeMagic:[],xpEntries:[],notes:"",background:"",lab:{art1:{name:"",rating:0},art2:{name:"",rating:0},art3:{name:"",rating:0},art4:{name:"",rating:0},specialisation1:{name:"",rating:0},specialisation2:{name:"",rating:0},auraBonus:0,description:"",effectiveSafety:0,flaws:[],virtues:[],intelligenceBonus:0,labBaseQuality:0,livingConditionsModifier:0,magicTheory:0,occupiedSize:0,refinement:0,size:0,availableModifiers:[{name:"GQ"},{name:"Safety"},{name:"Health"},{name:"Aesthetics"},{name:"Upkeep"},{name:"Warping"}],researchProjects:[],inventiveGeniusVirtue:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1},spellcastingStats:{arts:"",aura:0,ceremonial:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1,positiveCycle:!1,focus:!1,largeGestures:!1,loudVoice:!1,similarFomulaicSpellBonus:0,spontaneousCastingTotal:0,staminaSpecialisation:!1,talismanBonus:0},sigil:"",belongings:{carried:"",inSanctum:"",vis:[]},talisman:{description:"",investedVis:0,spentVis:0,bonuses:[],effects:[]},magicItems:[],quests:[],npcs:[],familiar:{name:"",arts:"",bronzeBondLevel:0,silverBondLevel:0,goldBondLevel:0,description:"",isSpirit:!1,additionalInfo:"",effects:[]}}};function cA(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if("object"==typeof t){if("function"==typeof t[Symbol.iterator]){const e=[];if(t.length>0)for(const n of t)e.push(cA(n));return e}{const e=Object.keys(t),n={};if(e.length>0)for(const i of e)n[i]=cA(t[i]);return n}}return t}const hA={name:""};function uA(t){return im(t,cA(lA))}async function dA(t,e){const n=await e.text();return im(t,JSON.parse(n))}function pA(t,e){const n=cA(t.present);return n.character=e,im(t,n)}function fA(t,e){console.log("Saving characteristics",e);const n=cA(t.present);return n.character.characteristics=e,XA(n),lC(n),im(t,n)}function gA(t,e){console.log("Saving abilities",e);const n=cA(t.present);return n.character.abilities=KA(e),lC(n),XA(n),im(t,n)}function vA(t,e){console.log("Saving personality traits",e);const n=cA(t.present);return n.character.personalityTraits=KA(e),im(t,n)}function mA(t,e){console.log("Saving virtues",e);const n=cA(t.present);return n.character.virtues=KA(e),function(t){t.character.abilities.forEach((e=>{e.puissant=t.character.virtues.findIndex((t=>t.name==`Puissant ${e.name}`))>=0})),t.character.arts.animal.puissant=t.character.virtues.findIndex((t=>"Puissant Animal"==t.name))>=0,t.character.arts.aquam.puissant=t.character.virtues.findIndex((t=>"Puissant Aquam"==t.name))>=0,t.character.arts.auram.puissant=t.character.virtues.findIndex((t=>"Puissant Auram"==t.name))>=0,t.character.arts.corpus.puissant=t.character.virtues.findIndex((t=>"Puissant Corpus"==t.name))>=0,t.character.arts.creo.puissant=t.character.virtues.findIndex((t=>"Puissant Creo"==t.name))>=0,t.character.arts.herbam.puissant=t.character.virtues.findIndex((t=>"Puissant Herbam"==t.name))>=0,t.character.arts.ignem.puissant=t.character.virtues.findIndex((t=>"Puissant Ignem"==t.name))>=0,t.character.arts.imaginem.puissant=t.character.virtues.findIndex((t=>"Puissant Imaginem"==t.name))>=0,t.character.arts.intellego.puissant=t.character.virtues.findIndex((t=>"Puissant Intellego"==t.name))>=0,t.character.arts.mentem.puissant=t.character.virtues.findIndex((t=>"Puissant Mentem"==t.name))>=0,t.character.arts.muto.puissant=t.character.virtues.findIndex((t=>"Puissant Muto"==t.name))>=0,t.character.arts.perdo.puissant=t.character.virtues.findIndex((t=>"Puissant Perdo"==t.name))>=0,t.character.arts.rego.puissant=t.character.virtues.findIndex((t=>"Puissant Rego"==t.name))>=0,t.character.arts.terram.puissant=t.character.virtues.findIndex((t=>"Puissant Terram"==t.name))>=0,t.character.arts.vim.puissant=t.character.virtues.findIndex((t=>"Puissant Vim"==t.name))>=0}(n),QA(n),XA(n),rC(n),im(t,n)}function bA(t,e){console.log("Saving flaws",e);const n=cA(t.present);return n.character.flaws=KA(e),XA(n),rC(n),im(t,n)}function wA(t,e){console.log("Saving description",e);const n=cA(t.present);return n.character.description=e,im(t,n)}function yA(t,e){console.log("Saving fatigue",e);const n=cA(t.present);return n.character.physicalStatus.fatigue=e,WA(n),XA(n),im(t,n)}function xA(t,e){console.log("Saving wounds",e);const n=cA(t.present);return n.character.physicalStatus.wounds=e,WA(n),XA(n),im(t,n)}function kA(t,e){console.log("Saving arts",e);const n=cA(t.present);return n.character.arts=e,XA(n),lC(n),im(t,n)}function SA(t,e){console.log("Saving spells",e);const n=cA(t.present);return n.character.spells=KA(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),HA(n),XA(n),im(t,n)}function AA(t,e){console.log("Saving spell wishlist",e);const n=cA(t.present);return n.character.spellWishlist=KA(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),HA(n),im(t,n)}function CA(t,e){console.log("Saving ageing",e);const n=cA(t.present);return n.character.ageing=e,QA(n),function(t){for(t.character.xpEntries||(t.character.xpEntries=[sC(t.character.ageing.currentYear,"Spring"),sC(t.character.ageing.currentYear,"Summer"),sC(t.character.ageing.currentYear,"Fall"),sC(t.character.ageing.currentYear,"Winter")]),t.character.xpEntries=t.character.xpEntries.filter((e=>e.year<t.character.ageing.currentYear+3)),0==t.character.xpEntries.length&&(t.character.xpEntries=[sC(t.character.ageing.currentYear,"Spring"),sC(t.character.ageing.currentYear,"Summer"),sC(t.character.ageing.currentYear,"Fall"),sC(t.character.ageing.currentYear,"Winter")]);t.character.xpEntries[t.character.xpEntries.length-1].year<t.character.ageing.currentYear+3;){let e=t.character.xpEntries[t.character.xpEntries.length-1].year+1;t.character.xpEntries.push(sC(e,"Spring")),t.character.xpEntries.push(sC(e,"Summer")),t.character.xpEntries.push(sC(e,"Fall")),t.character.xpEntries.push(sC(e,"Winter"))}t.character.xpEntries.forEach((e=>e.planningMode=e.year>=t.character.ageing.currentYear))}(n),im(t,n)}function EA(t,e){console.log("Saving confidence",e);const n=cA(t.present);return n.character.confidence=e,im(t,n)}function TA(t,e){console.log("Saving warping",e);const n=cA(t.present);return n.character.warping=e,n.character.warping.ongoingEffects=KA(e.ongoingEffects),function(t){t.character.warping.warpingLevel=GA(t.character.warping.warpingPoints,0)}(n),im(t,n)}function $A(t,e){console.log("Saving active magic",e);const n=cA(t.present);return n.character.activeMagic=KA(e),function(t){t.character.activeMagic.forEach((t=>t.penetration=t.active?t.penetration:0))}(n),im(t,n)}function IA(t,e){console.log("Saving xp entries",e);const n=cA(t.present);return n.character.xpEntries=e,im(t,n)}function RA(t,e){console.log("Saving notes",e);const n=cA(t.present);return n.character.notes=e,im(t,n)}function OA(t,e){console.log("Saving lab",e);const n=cA(t.present);return n.character.lab=e,n.character.lab.virtues=KA(n.character.lab.virtues),n.character.lab.flaws=KA(n.character.lab.flaws),n.character.lab.availableModifiers=n.character.lab.availableModifiers.filter((t=>""!=t.name)),n.character.lab.researchProjects=KA(n.character.lab.researchProjects),rC(n),im(t,n)}function PA(t,e){console.log("Importing character");const n=cA(t.present);return n.character=JSON.parse(e),im(t,n)}function LA(t,e){console.log("Saving spellcasting stats",e);const n=cA(t.present);return n.character.spellcastingStats=e,XA(n),im(t,n)}function MA(t,e){console.log("Saving character type",e);const n=cA(t.present);return n.character.type=e,XA(n),im(t,n)}function UA(t,e){console.log("Saving background",e);const n=cA(t.present);return n.character.background=e,im(t,n)}function BA(t,e){console.log("Saving sigil",e);const n=cA(t.present);return n.character.sigil=e,im(t,n)}function NA(t,e){console.log("Saving carried belongings",e);const n=cA(t.present);return n.character.belongings.carried=e,im(t,n)}function jA(t,e){console.log("Saving sanctum belongings",e);const n=cA(t.present);return n.character.belongings.inSanctum=e,im(t,n)}function FA(t,e){console.log("Saving vis",e);const n=cA(t.present);return n.character.belongings.vis=KA(e),im(t,n)}function VA(t,e){console.log("Saving talisman",e);const n=cA(t.present);return n.character.talisman=e,n.character.talisman.effects=KA(e.effects),n.character.talisman.bonuses=KA(e.bonuses),im(t,n)}function DA(t,e){console.log("Saving magic items",e);const n=cA(t.present);return n.character.magicItems=KA(e),n.character.magicItems.forEach((t=>t.effects=KA(t.effects))),im(t,n)}function zA(t,e){console.log("Saving quests",e);const n=cA(t.present);return n.character.quests=KA(e).sort(((t,e)=>t.priority-e.priority)),im(t,n)}function ZA(t,e){console.log("Saving npcs",e);const n=cA(t.present);return n.character.npcs=KA(e),im(t,n)}function qA(t,e){console.log("Saving familiar",e);const n=cA(t.present);return n.character.familiar=e,n.character.familiar.effects=KA(e.effects),_A(n),XA(n),im(t,n)}function HA(t){let e=t.character.spellWishlist.filter((t=>!t.onWishlist)),n=t.character.spells.filter((t=>t.onWishlist));t.character.spellWishlist=t.character.spellWishlist.filter((t=>t.onWishlist)).concat(n),t.character.spells=t.character.spells.filter((t=>!t.onWishlist)).concat(e)}function KA(t){return t.filter((t=>""!=t.name)).sort(((t,e)=>t.name.localeCompare(e.name)))}function WA(t){t.character.physicalStatus.totalPenalty=function(t){let e=t.character.physicalStatus.wounds;return-e.lightWounds+-3*e.mediumWounds+-5*e.heavyWounds}(t)+function(t){let e=t.character.physicalStatus.fatigue;return e<=1?0:2===e?-1:3===e?-3:4===e?-5:0}(t)}function QA(t){_A(t),function(t){t.character.ageing.decrepitudeLevel=GA(t.character.ageing.decrepitudePoints,0)}(t),function(t){t.character.ageing.age=t.character.ageing.currentYear-t.character.ageing.birthYear}(t)}function _A(t){let e=t.character.virtues.findIndex((t=>t.name.indexOf("Strong Faerie Blood")>=0))>=0?3:t.character.virtues.findIndex((t=>t.name.indexOf("Faerie Blood")>=0))>=0?1:0;t.character.ageing.ageingRollModifier=t.character.familiar.bronzeBondLevel+t.character.ageing.livingConditionModifier+t.character.ageing.longevityModifier+t.character.lab.livingConditionsModifier+e-Math.ceil(t.character.ageing.age/10)}function GA(t,e){let n=5*(e+1);return n>t?e:GA(t-n,e+1)}function XA(t){var e;(null===(e=null==t?void 0:t.character)||void 0===e?void 0:e.arts)&&(t.character.spellcastingStats.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.spontaneousCastingTotal=function(t){let e=t.character.spellcastingStats;return YA(t)+tC(t,e.arts,"",e.focus)+e.talismanBonus+e.similarFomulaicSpellBonus+(e.ceremonial?JA(t,"Ceremonial"):0)}(t),t.character.spells.forEach((e=>e.castingTotal=function(t,e){return YA(t)+tC(t,e.arts,e.prerequisites,e.focus)+e.attunementBonus+e.masteryLevel+(e.ritual?JA(t,"Ritual"):0)}(t,e))))}function YA(t){let e=t.character.spellcastingStats,n=e.cyclicMagicVirtue?3:0,i=e.cyclicMagicFlaw?-3:0,s=t.character.familiar.isSpirit?t.character.familiar.bronzeBondLevel:0;return t.character.characteristics.stamina.value+t.character.physicalStatus.totalPenalty+s+e.aura+(e.positiveCycle?n:i)+(e.staminaSpecialisation?1:0)+(e.largeGestures?1:0)+(e.loudVoice?1:0)}function JA(t,e){var n,i;let s=t.character.abilities.find((t=>"Artes Liberales"==t.name)),r=t.character.abilities.find((t=>"Philosophiae"==t.name)),o=(null==s?void 0:s.specialisation)==e?1:0,a=(null==r?void 0:r.specialisation)==e?1:0,l=(null==s?void 0:s.puissant)?3:0,c=(null==r?void 0:r.puissant)?3:0;return(null!==(n=null==s?void 0:s.level)&&void 0!==n?n:0)+o+l+(null!==(i=null==r?void 0:r.level)&&void 0!==i?i:0)+a+c}function tC(t,e,n,i){let s=eC(t,e),r=nC(t,e);if(null===s||null==r)return 0;let o=eC(t,n),a=nC(t,n),l=Math.min(s,null!=o?o:1e3),c=Math.min(r,null!=a?a:1e3);return l+c+(i?Math.min(l,c):0)}function eC(t,e){let n=t.character.arts;return e.indexOf("Cr")>=0?iC(n.creo):e.indexOf("In")>=0?iC(n.intellego):e.indexOf("Mu")>=0?iC(n.muto):e.indexOf("Pe")>=0?iC(n.perdo):e.indexOf("Re")>=0?iC(n.rego):null}function nC(t,e){let n=t.character.arts;return e.indexOf("An")>=0?iC(n.animal):e.indexOf("Aq")>=0?iC(n.aquam):e.indexOf("Au")>=0?iC(n.auram):e.indexOf("Co")>=0?iC(n.corpus):e.indexOf("He")>=0?iC(n.herbam):e.indexOf("Ig")>=0?iC(n.ignem):e.indexOf("Im")>=0?iC(n.imaginem):e.indexOf("Me")>=0?iC(n.mentem):e.indexOf("Te")>=0?iC(n.terram):e.indexOf("Vi")>=0?iC(n.vim):null}function iC(t){return t.level+(t.puissant?3:0)}function sC(t,e){return{year:t,xp:"",correspondence:"",description:"",plans:"",areaLore:"",season:e,planningMode:!0}}function rC(t){oC(t.character.lab.virtues,t.character.lab.availableModifiers),oC(t.character.lab.flaws,t.character.lab.availableModifiers),function(t){var e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v;let m=t.character.lab,b=aC(m),w=m.virtues.concat(m.flaws).reduce(((t,e)=>t+e.cost),0);m.occupiedSize=m.size+w-m.refinement;let y=null!==(n=null===(e=b.find((t=>"Safety"==t.name)))||void 0===e?void 0:e.rating)&&void 0!==n?n:0,x=null!==(s=null===(i=b.find((t=>"Health"==t.name)))||void 0===i?void 0:i.rating)&&void 0!==s?s:0;m.livingConditionsModifier=x>=0?Math.floor(x/2):Math.ceil(x/2),m.effectiveSafety=y-Math.max(0,m.occupiedSize)+m.refinement,m.specialisation1.rating=null!==(o=null===(r=b.find((t=>t.name==m.specialisation1.name)))||void 0===r?void 0:r.rating)&&void 0!==o?o:0,m.specialisation2.rating=null!==(l=null===(a=b.find((t=>t.name==m.specialisation2.name)))||void 0===a?void 0:a.rating)&&void 0!==l?l:0,m.art1.rating=null!==(h=null===(c=b.find((t=>t.name==m.art1.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0,m.art2.rating=null!==(d=null===(u=b.find((t=>t.name==m.art2.name)))||void 0===u?void 0:u.rating)&&void 0!==d?d:0,m.art3.rating=null!==(f=null===(p=b.find((t=>t.name==m.art3.name)))||void 0===p?void 0:p.rating)&&void 0!==f?f:0,m.art4.rating=null!==(v=null===(g=b.find((t=>t.name==m.art4.name)))||void 0===g?void 0:g.rating)&&void 0!==v?v:0,t.character.lab.inventiveGeniusVirtue=t.character.virtues.findIndex((t=>"Inventive Genius"==t.name))>=0,t.character.lab.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.lab.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0}(t),lC(t),_A(t)}function oC(t,e){t.forEach((t=>{let n=t.modifiers.filter((t=>0!=t.rating));t.modifiers=e.map((t=>({name:t.name,rating:0}))),n.forEach((e=>{let n=t.modifiers.findIndex((t=>t.name==e.name));n>=0&&(t.modifiers[n].rating=e.rating)})),t.category.length>1&&("outfitting".startsWith(t.category.toLocaleLowerCase())&&(t.category="Outfitting"),"stucture".startsWith(t.category.toLocaleLowerCase())&&(t.category="Structure"),"supernatural".startsWith(t.category.toLocaleLowerCase())&&(t.category="Supernatural"))}))}function aC(t){return t.availableModifiers.map((e=>({name:e.name,rating:t.virtues.concat(t.flaws).reduce(((t,n)=>t.concat(n.modifiers.filter((t=>t.name==e.name)))),[]).reduce(((t,e)=>t+e.rating),0)})))}function lC(t){let e=t.character.lab,n=e.inventiveGeniusVirtue?3:0,i=e.inventiveGeniusVirtue?6:0,s=e.cyclicMagicVirtue?3:0,r=e.cyclicMagicFlaw?-3:0;e.researchProjects.forEach((o=>{var a,l,c,h;let u=null!==(l=null===(a=t.character.abilities.find((t=>"Magic Theory"==t.name)))||void 0===a?void 0:a.level)&&void 0!==l?l:0,d=null!==(h=null===(c=aC(e).find((t=>"GQ"==t.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0;o.artModifier=tC(t,o.arts,o.prerequisites,o.focus),o.labTotal=e.auraBonus+e.labBaseQuality+d+o.artModifier+o.labAssistantBonus+u+Math.max(o.experiment?i:0,o.newWork?n:0)+(o.positiveCycle?s:r)+(o.magicTheorySpecialisation?1:0)+t.character.characteristics.intelligence.value+(o.intelligenceSpecialisation?1:0)+(o.nocturnal?2:0)+o.materialBonus+o.shapeBonus+o.similarResearchBonus+(o.talisman?5:0),o.surplusLabTotal=o.labTotal-o.level}))}let cC=class{constructor(){this.active=!1,this.interacting=!1,this.stopInteraction=function(t,e=300){let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(this,i)}),e)}}((()=>{this.interacting=!1}),1e3),this.store=dU.get(bm),this.ea=dU.get(Ci)}bound(){this.active=!0,this.checkForChanges(),this.ea.subscribe("ui-interaction",(()=>{this.interacting=!0,this.stopInteraction()}))}unbound(){this.active=!1}checkForChanges(){this.active&&(this.hasChanges()&&this.saveChanges(),setTimeout((()=>{this.checkForChanges()}),2e3))}saveChanges(){}hasChanges(){return!1}};cC=NS([ym(),FS("design:paramtypes",[])],cC);class hC extends cC{constructor(t,e){super(),this.pluckModel=t,this.saveAction=e,this.model=void 0,this.modelState=void 0}stateChanged(t,e){t.present&&(this.modelState=this.pluckModel(t.present),void 0===this.modelState&&(this.modelState=this.pluckModel(lA)),this.hasChanges()&&(this.model=cA(this.modelState)))}saveChanges(){this.interacting||this.store.dispatch(this.saveAction,cA(this.model))}hasChanges(){return JSON.stringify(this.modelState)!==JSON.stringify(this.model)}}class uC extends cC{constructor(t,e,n,i){super(),this.pluckModel=t,this.pluckSubModel=e,this.updateSubModel=n,this.saveAction=i,this.model=void 0,this.modelState=void 0}stateChanged(t,e){if(t.present){let e=this.pluckSubModel(this.pluckModel(t.present));if(JSON.stringify(this.modelState)===JSON.stringify(e))return;this.modelState=this.pluckSubModel(this.pluckModel(t.present)),void 0===this.modelState&&(this.modelState=this.pluckSubModel(this.pluckModel(lA))),void 0===this.model&&(this.model=this.pluckModel(t.present)),this.hasChanges()&&this.updateSubModel(this.model,cA(this.modelState))}}saveChanges(){this.interacting||this.store.dispatch(this.saveAction,cA(this.pluckSubModel(this.model)))}hasChanges(){return JSON.stringify(this.modelState)!==JSON.stringify(this.pluckSubModel(this.model))}}let dC=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),wA)}};dC=NS([$h(t),FS("design:paramtypes",[])],dC);const pC="virtues-list",fC='<list title="VIRTUES" items.two-way="model" has-additional-info.bind="true"></list>',gC=fC,vC=[];let mC;function bC(t){mC||(mC=zh.define({name:pC,template:fC,dependencies:vC})),t.register(mC)}let wC=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.virtues}),mA)}};wC=NS([$h(s),FS("design:paramtypes",[])],wC);const yC="flaws-list",xC='<list title="FLAWS" items.two-way="model" has-additional-info.bind="true"></list>',kC=xC,SC=[];let AC;function CC(t){AC||(AC=zh.define({name:yC,template:xC,dependencies:SC})),t.register(AC)}let EC=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.flaws}),bA)}};EC=NS([$h(o),FS("design:paramtypes",[])],EC);var TC=n(5555),$C={};$C.styleTagTransform=XS(),$C.setAttributes=WS(),$C.insert=HS().bind(null,"head"),$C.domAPI=ZS(),$C.insertStyleElement=_S(),DS()(TC.Z,$C),TC.Z&&TC.Z.locals&&TC.Z.locals;const IC="personality-traits-list",RC='<title text="PERSONALITY"></title>\r\n<div class="container">\r\n    <div repeat.for="trait of model">\r\n        <text-field value.two-way="trait.name"></text-field>\r\n        <stat-box mode="secondary" size="s" value.two-way="trait.rating" prefix-plus.bind="true"></stat-box>\r\n    </div>\r\n    <add-item-input placeholder="Add trait" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',OC=RC,PC=[];let LC;function MC(t){LC||(LC=zh.define({name:IC,template:RC,dependencies:PC})),t.register(LC)}let UC=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.personalityTraits}),vA),this.itemAdded=t=>{this.model.push({name:t,rating:0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};UC=NS([$h(l),FS("design:paramtypes",[])],UC);var BC=n(2410),NC={};NC.styleTagTransform=XS(),NC.setAttributes=WS(),NC.insert=HS().bind(null,"head"),NC.domAPI=ZS(),NC.insertStyleElement=_S(),DS()(BC.Z,NC),BC.Z&&BC.Z.locals&&BC.Z.locals;const jC="warping-block",FC='<title text="WARPING"></title>\r\n<div class="container">\r\n    <div class="warping-level">\r\n        <stat-box header="WPs" mode="secondary" value.two-way="model.warpingPoints" min="0" max="999" size="s" title="Warping Points"></stat-box>\r\n        <stat-box header="Level" mode="secondary" readonly.bind="true" value.two-way="model.warpingLevel" min="0" size="m" title="Warping Level"></stat-box>\r\n    </div>\r\n    <div class="warping-effect grid" repeat.for="effect of model.ongoingEffects">\r\n        <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n        <stat-box mode="secondary" value.two-way="effect.warpingPointsPerYear" min="1" size="s" title="Warping Points Per Year"></stat-box>\r\n        <span class="text">/year</span>\r\n    </div>\r\n    <add-item-input placeholder="Add ongoing effect" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',VC=FC,DC=[];let zC;function ZC(t){zC||(zC=zh.define({name:jC,template:FC,dependencies:DC})),t.register(zC)}let qC=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.warping}),TA),this.itemAdded=t=>{this.model.ongoingEffects.push({name:t,warpingPointsPerYear:1}),this.model.ongoingEffects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};qC=NS([$h(h),FS("design:paramtypes",[])],qC);var HC=n(1589),KC={};KC.styleTagTransform=XS(),KC.setAttributes=WS(),KC.insert=HS().bind(null,"head"),KC.domAPI=ZS(),KC.insertStyleElement=_S(),DS()(HC.Z,KC),HC.Z&&HC.Z.locals&&HC.Z.locals;const WC="name-block",QC='<title text="NAME"></title>\r\n<text-field placeholder="Name" value.two-way="model.name"></text-field>\r\n<footer></footer>',_C=QC,GC=[];let XC;function YC(t){XC||(XC=zh.define({name:WC,template:QC,dependencies:GC})),t.register(XC)}let JC=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),wA)}};JC=NS([$h(d),FS("design:paramtypes",[])],JC);const tE="description",eE='\r\n\r\n\r\n\r\n\r\n\r\n\r\n<description-block></description-block>\r\n<virtues-list></virtues-list>\r\n<flaws-list></flaws-list>\r\n<personality-traits-list></personality-traits-list>\r\n<warping-block></warping-block>\r\n<name-block></name-block>\r\n\r\n<div style="clear: both;"></div>',nE=eE,iE=[e,r,a,c,u,p];let sE;function rE(t){sE||(sE=zh.define({name:tE,template:eE,dependencies:iE})),t.register(sE)}let oE=class{};oE=NS([$h(f)],oE);var aE=n(927),lE={};lE.styleTagTransform=XS(),lE.setAttributes=WS(),lE.insert=HS().bind(null,"head"),lE.domAPI=ZS(),lE.insertStyleElement=_S(),DS()(aE.Z,lE),aE.Z&&aE.Z.locals&&aE.Z.locals;const cE="abilities-block",hE='<title text="ABILITIES"></title>\r\n<div class="container">\r\n    <div class="ability ${item.level === 0 ? \'untrained\' : \'\'}" repeat.for="item of model">\r\n        <text-field class="name" value.two-way="item.name"></text-field>\r\n        <text-field class="specialisation" value.two-way="item.specialisation" placeholder="Specialisation"></text-field>\r\n        <stat-box class="level" mode="secondary" value.two-way="item.level" min="0" size="s" title="Ability level"></stat-box>\r\n        <stat-box class="xp" mode="secondary" value.two-way="item.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n        <span class="puissant-label"><span class="numbers text" if.bind="item.puissant">+2</span></span>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add ability"></add-item-input>\r\n</div>\r\n<footer></footer>',uE=hE,dE=[];let pE;function fE(t){pE||(pE=zh.define({name:cE,template:hE,dependencies:dE})),t.register(pE)}let gE=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.abilities}),gA),this.itemAdded=t=>{this.model.push({name:t,specialisation:"",level:0,xp:0,puissant:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};gE=NS([$h(v),FS("design:paramtypes",[])],gE);var vE=n(3292),mE={};mE.styleTagTransform=XS(),mE.setAttributes=WS(),mE.insert=HS().bind(null,"head"),mE.domAPI=ZS(),mE.insertStyleElement=_S(),DS()(vE.Z,mE),vE.Z&&vE.Z.locals&&vE.Z.locals;const bE="characteristics-block",wE='<title text="CHARACTERISTICS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.strength.specialisation"></text-field>\r\n        <span class="text left-col">STR</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.strength.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.strength.value"></stat-box>\r\n\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.dexterity.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.dexterity.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">DEX</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.dexterity.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.stamina.specialisation"></text-field>\r\n        <span class="text left-col">STA</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.stamina.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.stamina.value"></stat-box>\r\n        \r\n        <stat-box prefix-plus.bind="true" value.two-way="model.quickness.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.quickness.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">QUI</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.quickness.specialisation"></text-field>\r\n    </div>\r\n    <br/>\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.intelligence.specialisation"></text-field>\r\n        <span class="text left-col">INT</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.intelligence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.intelligence.value"></stat-box>\r\n        \r\n        <stat-box prefix-plus.bind="true" value.two-way="model.presence.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.presence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">PRE</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.presence.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.perception.specialisation"></text-field>\r\n        <span class="text left-col">PER</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.perception.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.perception.value"></stat-box>\r\n        \r\n        <stat-box prefix-plus.bind="true" value.two-way="model.communication.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.communication.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">COM</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.communication.specialisation"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',yE=wE,xE=[];let kE;function SE(t){kE||(kE=zh.define({name:bE,template:wE,dependencies:xE})),t.register(kE)}let AE=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.characteristics}),fA)}};AE=NS([$h(b),FS("design:paramtypes",[])],AE);var CE=n(1459),EE={};EE.styleTagTransform=XS(),EE.setAttributes=WS(),EE.insert=HS().bind(null,"head"),EE.domAPI=ZS(),EE.insertStyleElement=_S(),DS()(CE.Z,EE),CE.Z&&CE.Z.locals&&CE.Z.locals;const TE="fatigue-block",$E='<title text="FATIGUE"></title>\r\n<div class="container grid text">\r\n    <span>Fresh (-0)</span><span class="right"></span><radio-button group="fatigue" state="${model.fatigue == 0 ? \'selected\' : \'unselected\'}" value="0"></radio-button>\r\n    <span>Winded (-0)</span><span class="right">2m</span><radio-button group="fatigue" state="${model.fatigue == 1 ? \'selected\' : \'unselected\'}" value="1"></radio-button>\r\n    <span>Weary (-1)</span><span class="right">10m</span><radio-button group="fatigue" state="${model.fatigue == 2 ? \'selected\' : \'unselected\'}" value="2"></radio-button>\r\n    <span>Tired (-3)</span><span class="right">30m</span><radio-button group="fatigue" state="${model.fatigue == 3 ? \'selected\' : \'unselected\'}" value="3"></radio-button>\r\n    <span>Dazed (-5)</span><span class="right">1h</span><radio-button group="fatigue" state="${model.fatigue == 4 ? \'selected\' : \'unselected\'}" value="4"></radio-button>\r\n    <span>Unconscious</span><span class="right">2h</span><radio-button group="fatigue" state="${model.fatigue == 5 ? \'selected\' : \'unselected\'}" value="5"></radio-button>\r\n</div>\r\n<footer></footer>',IE=$E,RE=[];let OE;function PE(t){OE||(OE=zh.define({name:TE,template:$E,dependencies:RE})),t.register(OE)}let LE=class extends uC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),(t=>t.fatigue),((t,e)=>t.fatigue=e),yA)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"fatigue"==t.group&&(this.model.fatigue=Number.parseInt(t.value))}))}};LE=NS([$h(y),FS("design:paramtypes",[])],LE);var ME=n(6903),UE={};UE.styleTagTransform=XS(),UE.setAttributes=WS(),UE.insert=HS().bind(null,"head"),UE.domAPI=ZS(),UE.insertStyleElement=_S(),DS()(ME.Z,UE),ME.Z&&ME.Z.locals&&ME.Z.locals;const BE="damage-block",NE='<title text="WOUNDS"></title>\r\n<div class="container text">\r\n    <stat-box header="Light" value.two-way="model.wounds.lightWounds" min="0" size="s"></stat-box>\r\n    <stat-box header="Medium" value.two-way="model.wounds.mediumWounds" min="0" size="s"></stat-box>\r\n    <stat-box header="Heavy" value.two-way="model.wounds.heavyWounds" min="0" size="s"></stat-box>\r\n</div>\r\n<footer></footer>',jE=NE,FE=[];let VE;function DE(t){VE||(VE=zh.define({name:BE,template:NE,dependencies:FE})),t.register(VE)}let zE=class extends uC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),(t=>t.wounds),((t,e)=>t.wounds=e),xA)}};zE=NS([$h(k),FS("design:paramtypes",[])],zE);var ZE=n(4397),qE={};qE.styleTagTransform=XS(),qE.setAttributes=WS(),qE.insert=HS().bind(null,"head"),qE.domAPI=ZS(),qE.insertStyleElement=_S(),DS()(ZE.Z,qE),ZE.Z&&ZE.Z.locals&&ZE.Z.locals;const HE="confidence-block",KE='<stat-box\r\n    header="Confidence Points"\r\n    size="l"\r\n    min="0"\r\n    value.two-way="model.score"\r\n    mode="primary-angled">\r\n</stat-box>',WE=KE,QE=[];let _E;function GE(t){_E||(_E=zh.define({name:HE,template:KE,dependencies:QE})),t.register(_E)}let XE=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.confidence}),EA)}};XE=NS([$h(A),FS("design:paramtypes",[])],XE);var YE=n(7804),JE={};JE.styleTagTransform=XS(),JE.setAttributes=WS(),JE.insert=HS().bind(null,"head"),JE.domAPI=ZS(),JE.insertStyleElement=_S(),DS()(YE.Z,JE),YE.Z&&YE.Z.locals&&YE.Z.locals;const tT="active-magic-list",eT='<title text="ACTIVE MAGIC"></title>\r\n<div class="container">\r\n    <div class="active-magic grid" repeat.for="magic of model">\r\n        <checkbox size="s" mode="angled" value.two-way="magic.active" title="Active"></checkbox>\r\n        <text-field class="name" value.two-way="magic.name" placeholder="Name"></text-field>\r\n        <stat-box header="Pen." show-header.bind="$first" mode="secondary" value.two-way="magic.penetration" min="0" size="s" title="Penetration" readonly.bind="!magic.active" color-mode="${magic.active ? \'color\' : \'monochrome\'}"></stat-box>\r\n        <stat-info-button source.bind="magic" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <add-item-input class="add-magic-input" placeholder="Add active magic" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',nT=eT,iT=[];let sT;function rT(t){sT||(sT=zh.define({name:tT,template:eT,dependencies:iT})),t.register(sT)}let oT=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.activeMagic}),$A),this.itemAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,penetration:0,active:!0,additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};oT=NS([$h(E),FS("design:paramtypes",[])],oT);var aT=n(5889),lT={};lT.styleTagTransform=XS(),lT.setAttributes=WS(),lT.insert=HS().bind(null,"head"),lT.domAPI=ZS(),lT.insertStyleElement=_S(),DS()(aT.Z,lT),aT.Z&&aT.Z.locals&&aT.Z.locals;const cT="physical-penalty-block",hT='<stat-box\r\n    header="Physical Penalty"\r\n    size="l"\r\n    value="${model.totalPenalty}"\r\n    readonly.bind="true"\r\n    mode="primary-angled">\r\n</stat-box>',uT=hT,dT=[];let pT;function fT(t){pT||(pT=zh.define({name:cT,template:hT,dependencies:dT})),t.register(pT)}let gT=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),null)}};gT=NS([$h($),FS("design:paramtypes",[])],gT);const vT="stats",mT='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<characteristics-block></characteristics-block>\r\n<fatigue-block></fatigue-block>\r\n<damage-block></damage-block>\r\n<confidence-block></confidence-block>\r\n<physical-penalty-block></physical-penalty-block>\r\n<active-magic-list></active-magic-list>\r\n<abilities-block></abilities-block>\r\n\r\n<div style="clear: both;"></div>',bT=mT,wT=[m,w,x,S,C,T,I];let yT;function xT(t){yT||(yT=zh.define({name:vT,template:mT,dependencies:wT})),t.register(yT)}let kT=class{};kT=NS([$h(R)],kT);var ST=n(5185),AT={};AT.styleTagTransform=XS(),AT.setAttributes=WS(),AT.insert=HS().bind(null,"head"),AT.domAPI=ZS(),AT.insertStyleElement=_S(),DS()(ST.Z,AT),ST.Z&&ST.Z.locals&&ST.Z.locals;const CT="arts-block",ET='<title text="ARTS"></title>\r\n<div class="container grid">\r\n    <stat-box class="level" mode="${model.creo.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.creo.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.creo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.creo.level === 0 ? \'untrained\' : \'\'}">Creo</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.animal.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.animal.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.animal.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span  class="name text ${model.animal.level === 0 ? \'untrained\' : \'\'}">Animal</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.ignem.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.ignem.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.ignem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.ignem.level === 0 ? \'untrained\' : \'\'}">Ignem</span>\r\n\r\n   \r\n\r\n    <stat-box class="level" mode="${model.intellego.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.intellego.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.intellego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.intellego.level === 0 ? \'untrained\' : \'\'}">Intellego</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.aquam.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.aquam.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.aquam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.aquam.level === 0 ? \'untrained\' : \'\'}">Aquam</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.imaginem.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.imaginem.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.imaginem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.imaginem.level === 0 ? \'untrained\' : \'\'}">Imaginem</span>\r\n\r\n\r\n\r\n    <stat-box class="level" mode="${model.muto.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.muto.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.muto.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.muto.level === 0 ? \'untrained\' : \'\'}">Muto</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.auram.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.auram.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.auram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.auram.level === 0 ? \'untrained\' : \'\'}">Auram</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.mentem.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.mentem.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.mentem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.mentem.level === 0 ? \'untrained\' : \'\'}">Mentem</span>\r\n\r\n\r\n\r\n    <stat-box class="level" mode="${model.perdo.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.perdo.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.perdo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.perdo.level === 0 ? \'untrained\' : \'\'}">Perdo</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.corpus.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.corpus.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.corpus.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.corpus.level === 0 ? \'untrained\' : \'\'}">Corpus</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.terram.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.terram.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.terram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.terram.level === 0 ? \'untrained\' : \'\'}">Terram</span>\r\n\r\n\r\n\r\n    <stat-box class="level" mode="${model.rego.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.rego.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.rego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.rego.level === 0 ? \'untrained\' : \'\'}">Rego</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.herbam.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.herbam.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.herbam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.herbam.level === 0 ? \'untrained\' : \'\'}">Herbam</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.vim.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.vim.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.vim.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.vim.level === 0 ? \'untrained\' : \'\'}">Vim</span>\r\n</div>\r\n<footer></footer>',TT=ET,$T=[];let IT;function RT(t){IT||(IT=zh.define({name:CT,template:ET,dependencies:$T})),t.register(IT)}let OT=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.arts}),kA)}};OT=NS([$h(P),FS("design:paramtypes",[])],OT);var PT=n(2244),LT={};LT.styleTagTransform=XS(),LT.setAttributes=WS(),LT.insert=HS().bind(null,"head"),LT.domAPI=ZS(),LT.insertStyleElement=_S(),DS()(PT.Z,LT),PT.Z&&PT.Z.locals&&PT.Z.locals;const MT="spellcasting-modifiers-block",UT='<title text="SPELLCASTING STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Aura Bonus</span>\r\n        <span class="text">Stamina Specialisation</span>\r\n        <span class="text" if.bind="showGoodCycle">Good Cycle</span>\r\n        <span class="text">Loud Voice</span>\r\n        <span class="text">Large Gestures</span>\r\n\r\n        <span class="text">Arts</span>\r\n        <span class="text">Ceremonial</span>\r\n        <span class="text">Talisman Bonus</span>\r\n        <span class="text">Similar Spell</span>\r\n        <span class="text">Focus</span>\r\n        <span class="text">Casting Total</span>\r\n\r\n        <span if.bind="!showGoodCycle"></span>\r\n\r\n        <stat-box value.two-way="model.aura" mode="secondary" prefix-plus.bind="true"></stat-box></stat-box>\r\n        <checkbox value.two-way="model.staminaSpecialisation" mode="angled"></checkbox>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="model.positiveCycle" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.loudVoice" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.largeGestures" mode="angled"></checkbox>\r\n\r\n        <text-field class="arts" value.two-way="model.arts" placeholder="Arts"></text-field>\r\n        <checkbox value.two-way="model.ceremonial" mode="angled" color-mode="monochrome"></checkbox>\r\n        <stat-box value.two-way="model.talismanBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></stat-box>\r\n        <stat-box value.two-way="model.similarFomulaicSpellBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></stat-box>\r\n        <checkbox value.two-way="model.focus" mode="angled" color-mode="monochrome"></checkbox>\r\n        <stat-box value.two-way="model.spontaneousCastingTotal" mode="primary-angled" readonly.bind="true" prefix-plus.bind="true" color-mode="monochrome"></stat-box>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',BT=UT,NT=[];let jT;function FT(t){jT||(jT=zh.define({name:MT,template:UT,dependencies:NT})),t.register(jT)}let VT=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellcastingStats}),LA)}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};VT=NS([$h(M),FS("design:paramtypes",[])],VT);var DT=n(7624),zT={};zT.styleTagTransform=XS(),zT.setAttributes=WS(),zT.insert=HS().bind(null,"head"),zT.domAPI=ZS(),zT.insertStyleElement=_S(),DS()(DT.Z,zT),DT.Z&&DT.Z.locals&&DT.Z.locals;const ZT="spell-list",qT='<title text="SPELLS"></title>\r\n<div class="container">\r\n    <div class="spells">\r\n        <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n            <span class="form-header"></span>\r\n            <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n            <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n            <span class="casting-total-label numbers text">+${spell.castingTotal}</span>\r\n            <stat-box class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></stat-box>\r\n            <stat-box class="mastery-level" mode="secondary" value.two-way="spell.masteryLevel" min="0" size="s" color-mode="monochrome" title="Mastery level"></stat-box>\r\n            <text-field class="range" value.two-way="spell.range" placeholder="Range"></text-field>\r\n            <text-field class="duration" value.two-way="spell.duration" placeholder="Duration"></text-field>\r\n            <text-field class="target" value.two-way="spell.target" placeholder="Target"></text-field>\r\n            <text-field class="sigil" value.two-way="spell.sigil" placeholder="Sigil" title="${spell.sigil}"></text-field>\r\n            <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n            <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n            <stat-info-button source.bind="spell" property="additionalInfo"></stat-info-button>\r\n            <symbol click.delegate="editDetails(spell)" title="Edit details"></symbol>\r\n            <cross-button click.delegate="unlearnSpell(spell)" title="Unlearn spell" mode="angled"></cross-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add spell" on-item-added.bind="spellAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',HT=qT,KT=[];let WT;function QT(t){WT||(WT=zh.define({name:ZT,template:qT,dependencies:KT})),t.register(WT)}var _T=n(4235),GT={};GT.styleTagTransform=XS(),GT.setAttributes=WS(),GT.insert=HS().bind(null,"head"),GT.domAPI=ZS(),GT.insertStyleElement=_S(),DS()(_T.Z,GT),_T.Z&&_T.Z.locals&&_T.Z.locals;const XT="spell-details-dialog",YT='<dialog-box title="${model.name}" size="s">\r\n    <div class="spell-details">\r\n        <span class="text">Focus</span>\r\n        <checkbox size="xs" value.two-way="model.focus"></checkbox>\r\n\r\n        <span class="text">Ritual Spell</span>\r\n        <checkbox size="xs" value.two-way="model.ritual"></checkbox>\r\n\r\n        <span class="text">Attunement Bonus</span>\r\n        <stat-box class="attunement-bonus" mode="secondary" value.two-way="model.attunementBonus" min="0" size="xs" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Attunement Type</span>\r\n        <text-field class="attunement" value.two-way="model.attunement"></text-field>\r\n\r\n        <span class="text">Masteries</span>\r\n        <text-field class="masteries" value.two-way="model.masteries"></text-field>\r\n\r\n        <span class="text">Mastery XP</span>\r\n        <stat-box class="xp" mode="secondary" value.two-way="model.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    </div>\r\n</dialog-box>',JT=YT,t$=[];let e$;function n$(t){e$||(e$=zh.define({name:XT,template:YT,dependencies:t$})),t.register(e$)}var i$;let s$=i$=class{activate(t){this.model=t}static open(t,e){let n=dU.get(cv),i=cA(t);n.open({component:()=>i$,overlayDismiss:!0,model:i}).whenClosed((n=>{t.focus=i.focus,t.ritual=i.ritual,t.attunement=i.attunement,t.attunementBonus=i.attunementBonus,t.masteries=i.masteries,t.xp=i.xp,e&&e()}))}};s$=i$=NS([$h(N),Ih],s$);let r$=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spells}),SA),this.spellAdded=t=>{this.model.push({name:t,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,additionalInfo:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0,onWishlist:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.editDetails=t=>{s$.open(t)},this.unlearnSpell=t=>{t.onWishlist=!0}}};r$=NS([$h(B),FS("design:paramtypes",[])],r$);var o$=n(6073),a$={};a$.styleTagTransform=XS(),a$.setAttributes=WS(),a$.insert=HS().bind(null,"head"),a$.domAPI=ZS(),a$.insertStyleElement=_S(),DS()(o$.Z,a$),o$.Z&&o$.Z.locals&&o$.Z.locals;const l$="spell-wishlist",c$='<title text="SPELL WISHLIST"></title>\r\n<div class="container">\r\n    <div class="spells">\r\n        <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n            <span class="form-header"></span>\r\n            <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n            <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n            <stat-box class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></stat-box>\r\n            <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n            <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n            <stat-info-button source.bind="spell" property="additionalInfo"></stat-info-button>\r\n            <cross-button click.delegate="learnSpell(spell)" title="Learn spell"></cross-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add spell" on-item-added.bind="spellAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',h$=c$,u$=[];let d$;function p$(t){d$||(d$=zh.define({name:l$,template:c$,dependencies:u$})),t.register(d$)}let f$=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellWishlist}),AA),this.spellAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,additionalInfo:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0,onWishlist:!0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.learnSpell=t=>{t.onWishlist=!1}}};f$=NS([$h(F),FS("design:paramtypes",[])],f$);var g$=n(7266),v$={};v$.styleTagTransform=XS(),v$.setAttributes=WS(),v$.insert=HS().bind(null,"head"),v$.domAPI=ZS(),v$.insertStyleElement=_S(),DS()(g$.Z,v$),g$.Z&&g$.Z.locals&&g$.Z.locals;const m$="sigil",b$='<span class="text title">Sigil</span>\r\n<div class="container" drop.delegate="onDrop($event)" active-drag.class="dragging" dragenter.delegate="dragging = true" dragleave.delegate="dragging = false">\r\n    <div class="sigil-image-placeholder" if.bind="!model"></div>\r\n    <img class="sigil-image" if.bind="model" src="${model}"/>\r\n</div>',w$=b$,y$=[];let x$;function k$(t){x$||(x$=zh.define({name:m$,template:b$,dependencies:y$})),t.register(x$)}let S$=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.sigil}),BA),this.dragging=!1,this.onDrop=t=>{if(1!=t.dataTransfer.items.length)return;let e=t.dataTransfer.items[0];if("file"==e.kind&&e.type.startsWith("image")){var n=new FileReader;n.onload=()=>{this.model=n.result,this.dragging=!1},n.readAsDataURL(e.getAsFile())}}}};S$=NS([$h(D),FS("design:paramtypes",[])],S$);const A$="magic",C$='\r\n\r\n\r\n\r\n\r\n\r\n<arts-block></arts-block>\r\n<spellcasting-modifiers-block></spellcasting-modifiers-block>\r\n<sigil></sigil>\r\n<div style="clear: both;"></div>\r\n<spell-list></spell-list>\r\n<spell-wishlist></spell-wishlist>\r\n\r\n<div style="clear: both;"></div>',E$=C$,T$=[L,U,j,V,z];let $$;function I$(t){$$||($$=zh.define({name:A$,template:C$,dependencies:T$})),t.register($$)}let R$=class{};R$=NS([$h(Z)],R$);var O$=n(8412),P$={};P$.styleTagTransform=XS(),P$.setAttributes=WS(),P$.insert=HS().bind(null,"head"),P$.domAPI=ZS(),P$.insertStyleElement=_S(),DS()(O$.Z,P$),O$.Z&&O$.Z.locals&&O$.Z.locals;const L$="lab-stats",M$='<title text="LAB STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Aura Bonus</span>\r\n        <span class="text">Size</span>\r\n        <span class="text">Refinement</span>\r\n        <span class="text">Occupied Size</span>\r\n        <span class="text">Effective Safety</span>\r\n        <span class="text">Living Conditions Modifier</span>\r\n        <span class="text">Specialisation 1</span>\r\n        <span class="text">Specialisation 2</span>\r\n        <span class="text">Art 1 (Any)</span>\r\n        <span class="text">Art 2 (Any)</span>\r\n        <span class="text">Art 3 (Form)</span>\r\n        <span class="text">Art 4 (Form)</span>\r\n\r\n        <stat-box value.two-way="model.auraBonus" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.size" mode="primary-angled" min="-3"></stat-box>\r\n        <stat-box value.two-way="model.refinement" mode="primary-angled" min="0"></stat-box>\r\n        <stat-box value.two-way="model.occupiedSize" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></stat-box>\r\n        <stat-box value.two-way="model.effectiveSafety" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></stat-box>\r\n        <stat-box value.two-way="model.livingConditionsModifier" mode="secondary-angled" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.specialisation1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.specialisation2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art3.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art4.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art3.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art4.name" placeholder="Modifier"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',U$=M$,B$=[];let N$;function j$(t){N$||(N$=zh.define({name:L$,template:M$,dependencies:B$})),t.register(N$)}let F$=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),OA)}};F$=NS([$h(H),FS("design:paramtypes",[])],F$);var V$=n(4467),D$={};D$.styleTagTransform=XS(),D$.setAttributes=WS(),D$.insert=HS().bind(null,"head"),D$.domAPI=ZS(),D$.insertStyleElement=_S(),DS()(V$.Z,D$),V$.Z&&V$.Z.locals&&V$.Z.locals;const z$="research-projects",Z$='<title text="RESEARCH PROJECTS"></title>\r\n<div class="container">\r\n    <div class="projects">\r\n        <div class="project grid" repeat.for="project of model.researchProjects">\r\n            <text-field class="name" value.two-way="project.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="project.arts" placeholder="Arts"></text-field>\r\n            <text-field class="prerequisites" value.two-way="project.prerequisites" placeholder="Prereq"></text-field>\r\n            <stat-box class="level" mode="secondary" value.two-way="project.level" min="1" size="m" title="Level"></stat-box>\r\n\r\n            <stat-box class="total" mode="primary" readonly.bind="true" value.two-way="project.labTotal" min="0" size="s" title="Lab Total"></stat-box>\r\n            <stat-box class="surplus" mode="secondary" readonly.bind="true" value.two-way="project.surplusLabTotal" min="0" size="s" title="Surplus Lab Total"></stat-box>\r\n            <stat-box class="accumulated-total" mode="secondary" value.two-way="project.accumulatedLabTotal" min="0" size="s" title="Accumulated Lab Total"></stat-box>\r\n            \r\n            <symbol click.delegate="editDetails(project)" title="Edit details"></symbol>\r\n            <stat-info-button source.bind="project" property="additionalInfo"></stat-info-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add project" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',q$=Z$,H$=[];let K$;function W$(t){K$||(K$=zh.define({name:z$,template:Z$,dependencies:H$})),t.register(K$)}var Q$=n(6286),_$={};_$.styleTagTransform=XS(),_$.setAttributes=WS(),_$.insert=HS().bind(null,"head"),_$.domAPI=ZS(),_$.insertStyleElement=_S(),DS()(Q$.Z,_$),Q$.Z&&Q$.Z.locals&&Q$.Z.locals;const G$="research-project-details-dialog",X$='<dialog-box title="${model.name}" size="m">\r\n    <div class="project-details">\r\n        <span class="text">Focus</span>\r\n        <checkbox value.two-way="model.focus"></checkbox>\r\n\r\n        <span class="text">Lab Specialisation Bonus</span>\r\n        <stat-box class="specialisation-bonus" mode="secondary" value.two-way="model.specialisationBonus" min="0" size="s" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Intelligence Specialisation</span>\r\n        <checkbox value.two-way="model.intelligenceSpecialisation"></checkbox>\r\n\r\n        <span class="text">Magic Theory Specialisation</span>\r\n        <checkbox value.two-way="model.magicTheorySpecialisation"></checkbox>\r\n\r\n        <span class="text">Talisman</span>\r\n        <checkbox value.two-way="model.talisman"></checkbox>\r\n\r\n        <span if.bind="model.inventiveGeniusVirtue" class="text">New Invention</span>\r\n        <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="model.newWork"></checkbox>\r\n\r\n        <span if.bind="model.inventiveGeniusVirtue" class="text">Experiment</span>\r\n        <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="model.experiment"></checkbox>\r\n\r\n        <span if.bind="showGoodCycle" class="text">Good Cycle</span>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="model.positiveCycle"></checkbox>\r\n\r\n        <span class="text">Nocturnal</span>\r\n        <checkbox value.two-way="model.nocturnal" title="An owl, the magas daily cycle is the opposite of most folk  she\r\n        works at night and sleeps during the day. This has the advantage that the night\r\n        is quieter and presents fewer distractions  gain +2 to the Lab Total for\r\n        the season. Due to lack of sunlight and daylight living, however, she suffers a 1\r\n        penalty to her Living Conditions modifier for any year in which she has taken at\r\n        least one Nocturnal season. She also has trouble functioning during the daytime;\r\n        when dawn breaks, she loses a Long-Term Fatigue level and gains one extra botch\r\n        die on all activities for the day. She will likely not appreciate being woken up in\r\n        daylight hours. This routine is commonly taken by characters with the Nocturnal\r\n        Personality Flaw."></checkbox>\r\n\r\n        <span class="text">Similar Research Bonus</span>\r\n        <stat-box class="similar-research-bonus" mode="secondary" value.two-way="model.similarResearchBonus" min="0" size="s" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Lab Assistant Bonus</span>\r\n        <stat-box class="lab-assistant-bonus" mode="secondary" value.two-way="model.labAssistantBonus" min="0" size="s" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Material</span>\r\n        <text-field class="material" value.two-way="model.material"></text-field>\r\n\r\n        <span class="text">Material Bonus</span>\r\n        <stat-box class="material-bonus" mode="secondary" value.two-way="model.materialBonus" min="0" size="s" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Shape</span>\r\n        <text-field class="shape" value.two-way="model.shape"></text-field>\r\n\r\n        <span class="text">Shape Bonus</span>\r\n        <stat-box class="shape-bonus" mode="secondary" value.two-way="model.shapeBonus" min="0" size="s" prefix-plus.bind="true"></stat-box>\r\n    </div>\r\n</dialog-box>',Y$=X$,J$=[];let tI;function eI(t){tI||(tI=zh.define({name:G$,template:X$,dependencies:J$})),t.register(tI)}var nI;let iI=nI=class{activate(t){this.model=t}static open(t,e){let n=dU.get(cv),i=cA(t);n.open({component:()=>nI,overlayDismiss:!0,model:i}).whenClosed((n=>{t.focus=i.focus,t.specialisationBonus=i.specialisationBonus,t.intelligenceSpecialisation=i.intelligenceSpecialisation,t.magicTheorySpecialisation=i.magicTheorySpecialisation,t.talisman=i.talisman,t.nocturnal=i.nocturnal,t.similarResearchBonus=i.similarResearchBonus,t.labAssistantBonus=i.labAssistantBonus,t.material=i.material,t.materialBonus=i.materialBonus,t.shape=i.shape,t.shapeBonus=i.shapeBonus,e&&e()}))}};iI=nI=NS([$h(Q),Ih],iI);let sI=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),OA),this.itemAdded=t=>{this.model.researchProjects.push({name:t,accumulatedLabTotal:0,surplusLabTotal:0,artModifier:0,arts:"",prerequisites:"",focus:!1,labTotal:0,labAssistantBonus:0,magicTheorySpecialisation:!1,intelligenceSpecialisation:!0,material:"",materialBonus:0,shape:"",shapeBonus:0,similarResearchBonus:0,specialisationBonus:0,talisman:!1,level:1,experiment:!1,newWork:!0,nocturnal:!1,positiveCycle:!1,additionalInfo:""})},this.editDetails=t=>{iI.open(t)}}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};sI=NS([$h(W),FS("design:paramtypes",[])],sI);var rI=n(6964),oI={};oI.styleTagTransform=XS(),oI.setAttributes=WS(),oI.insert=HS().bind(null,"head"),oI.domAPI=ZS(),oI.insertStyleElement=_S(),DS()(rI.Z,oI),rI.Z&&rI.Z.locals&&rI.Z.locals;const aI="lab-modifications-list",lI='<title text="LAB MODIFICATIONS"></title>\r\n<div class="container">\r\n    <add-item-input class="add-modifier-input" title="Add Modifier Column" on-item-added.bind="modifierAdded"></add-item-input>\r\n    \r\n    <div class="block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n\r\n        <label class="text title">VIRTUES</label>\r\n        <div class="items">\r\n            <div class="virtue grid" repeat.for="virtue of model.virtues">\r\n                <stat-box class="cost" fade-zero.bind="true" mode="secondary-angled" value.two-way="virtue.cost" min="0" size="xs" title="Cost"></stat-box>\r\n                <text-field class="name" value.two-way="virtue.name" placeholder="Name"></text-field>\r\n                <text-field class="category" value.two-way="virtue.category" placeholder="Category"></text-field>\r\n                <text-field class="description" value.two-way="virtue.description" placeholder="Description"></text-field>\r\n                <stat-box class="modifier" fade-zero.bind="true" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of virtue.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></stat-box>\r\n            </div>\r\n        </div>\r\n        <add-item-input placeholder="Add virtue" on-item-added.bind="virtueAdded"></add-item-input>\r\n    </div>\r\n\r\n    <div class="block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n\r\n        <label class="text title">FLAWS</label>\r\n        <div class="items">\r\n            <div class="flaw grid" repeat.for="flaw of model.flaws">\r\n                <stat-box class="cost" fade-zero.bind="true" mode="secondary-angled" value.two-way="flaw.cost" max="0" size="xs" title="Cost"></stat-box>\r\n                <text-field class="name" value.two-way="flaw.name" placeholder="Name"></text-field>\r\n                <text-field class="category" value.two-way="flaw.category" placeholder="Category"></text-field>\r\n                <text-field class="description" value.two-way="flaw.description" placeholder="Description"></text-field>\r\n                <stat-box class="modifier" fade-zero.bind="true" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of flaw.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></stat-box>\r\n            </div>\r\n        </div>\r\n        <add-item-input placeholder="Add flaw" on-item-added.bind="flawAdded"></add-item-input>\r\n    </div>\r\n\r\n    <div class="block last-block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n        <div class="modifier-totals">\r\n            <span class="numbers modifier-total" repeat.for="total of totals" class="modifier-title text">${total > 0 ? \'+\' : \'\'}${total}</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<footer></footer>',cI=lI,hI=[];let uI;function dI(t){uI||(uI=zh.define({name:aI,template:lI,dependencies:hI})),t.register(uI)}let pI=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),OA),this.virtueAdded=t=>{this.model.virtues.push({name:t,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Virtue"}),this.model.virtues.sort(((t,e)=>t.name.localeCompare(e.name)))},this.flawAdded=t=>{this.model.flaws.push({name:t,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Flaw"}),this.model.flaws.sort(((t,e)=>t.name.localeCompare(e.name)))},this.modifierAdded=t=>{this.model.availableModifiers.push({name:t})}}get totals(){return this.model?aC(this.model).map((t=>t.rating)):[]}};pI=NS([$h(G),FS("design:paramtypes",[])],pI);var fI=n(2820),gI={};gI.styleTagTransform=XS(),gI.setAttributes=WS(),gI.insert=HS().bind(null,"head"),gI.domAPI=ZS(),gI.insertStyleElement=_S(),DS()(fI.Z,gI),fI.Z&&fI.Z.locals&&fI.Z.locals;const vI="lab-description-block",mI='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',bI=mI,wI=[];let yI;function xI(t){yI||(yI=zh.define({name:vI,template:mI,dependencies:wI})),t.register(yI)}let kI=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),OA)}};kI=NS([$h(Y),FS("design:paramtypes",[])],kI);const SI="lab",AI='\r\n\r\n\r\n\r\n\r\n<lab-stats></lab-stats>\r\n<research-projects></research-projects>\r\n<lab-modifications-list></lab-modifications-list>\r\n<lab-description-block></lab-description-block>\r\n\r\n<div style="clear: both;"></div>',CI=AI,EI=[K,_,X,J];let TI;function $I(t){TI||(TI=zh.define({name:SI,template:AI,dependencies:EI})),t.register(TI)}let II=class{};II=NS([$h(tt)],II);var RI=n(8985),OI={};OI.styleTagTransform=XS(),OI.setAttributes=WS(),OI.insert=HS().bind(null,"head"),OI.domAPI=ZS(),OI.insertStyleElement=_S(),DS()(RI.Z,OI),RI.Z&&RI.Z.locals&&RI.Z.locals;const PI="carried-belongings-block",LI='<text-box title="CARRIED" text.two-way="model.carried"></text-box>',MI=LI,UI=[];let BI;function NI(t){BI||(BI=zh.define({name:PI,template:LI,dependencies:UI})),t.register(BI)}let jI=class extends uC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),(t=>t.carried),((t,e)=>t.carried=e),NA)}};jI=NS([$h(nt),FS("design:paramtypes",[])],jI);var FI=n(5204),VI={};VI.styleTagTransform=XS(),VI.setAttributes=WS(),VI.insert=HS().bind(null,"head"),VI.domAPI=ZS(),VI.insertStyleElement=_S(),DS()(FI.Z,VI),FI.Z&&FI.Z.locals&&FI.Z.locals;const DI="sanctum-belongings-block",zI='<text-box title="SANCTUM" text.two-way="model.inSanctum"></text-box>',ZI=zI,qI=[];let HI;function KI(t){HI||(HI=zh.define({name:DI,template:zI,dependencies:qI})),t.register(HI)}let WI=class extends uC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),(t=>t.inSanctum),((t,e)=>t.inSanctum=e),jA)}};WI=NS([$h(st),FS("design:paramtypes",[])],WI);var QI=n(1860),_I={};_I.styleTagTransform=XS(),_I.setAttributes=WS(),_I.insert=HS().bind(null,"head"),_I.domAPI=ZS(),_I.insertStyleElement=_S(),DS()(QI.Z,_I),QI.Z&&QI.Z.locals&&QI.Z.locals;const GI="vis-block",XI='<title text="VIS"></title>\r\n<div class="container">\r\n    <div class="vis grid" repeat.for="vis of model.vis">\r\n        <text-field class="name" value.two-way="vis.name"></text-field>\r\n        <stat-box class="lab-vis" mode="secondary" value.two-way="vis.amountInLab" min="0" size="s" title="In lab"></stat-box>\r\n        <stat-box class="personal-vis" mode="secondary" value.two-way="vis.amountOnPerson" min="0" size="s" title="On person"></stat-box>\r\n        <text-field class="income" value.two-way="vis.income" placeholder="Income" title="${vis.income}"></text-field>\r\n        <text-field class="notes" value.two-way="vis.notes" placeholder="Notes" title="${vis.notes}"></text-field>\r\n    </div>\r\n    <add-item-input placeholder="Add vis type" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',YI=XI,JI=[];let tR;function eR(t){tR||(tR=zh.define({name:GI,template:XI,dependencies:JI})),t.register(tR)}let nR=class extends uC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),(t=>t.vis),((t,e)=>t.vis=e),FA),this.itemAdded=t=>{this.model||(this.model={carried:"",inSanctum:"",vis:[]}),this.model.vis||(this.model.vis=[]),this.model.vis.push({name:t,amountInLab:0,amountOnPerson:0,income:"",notes:""}),this.model.vis.sort(((t,e)=>t.name.localeCompare(e.name)))}}};nR=NS([$h(ot),FS("design:paramtypes",[])],nR);const iR="belongings",sR='\r\n\r\n\r\n\r\n<carried-belongings-block></carried-belongings-block>\r\n<sanctum-belongings-block></sanctum-belongings-block>\r\n<vis-block></vis-block>\r\n\r\n<div style="clear: both;"></div>',rR=sR,oR=[it,rt,at];let aR;function lR(t){aR||(aR=zh.define({name:iR,template:sR,dependencies:oR})),t.register(aR)}let cR=class{};cR=NS([$h(lt)],cR);var hR=n(3349),uR={};uR.styleTagTransform=XS(),uR.setAttributes=WS(),uR.insert=HS().bind(null,"head"),uR.domAPI=ZS(),uR.insertStyleElement=_S(),DS()(hR.Z,uR),hR.Z&&hR.Z.locals&&hR.Z.locals;const dR="notes-block",pR='<text-box title="NOTES" text.two-way="model"></text-box>',fR=pR,gR=[];let vR;function mR(t){vR||(vR=zh.define({name:dR,template:pR,dependencies:gR})),t.register(vR)}let bR=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.notes}),RA)}};bR=NS([$h(ht),FS("design:paramtypes",[])],bR);var wR=n(3260),yR={};yR.styleTagTransform=XS(),yR.setAttributes=WS(),yR.insert=HS().bind(null,"head"),yR.domAPI=ZS(),yR.insertStyleElement=_S(),DS()(wR.Z,yR),wR.Z&&wR.Z.locals&&wR.Z.locals;const xR="background-block",kR='<text-box title="BACKGROUND" text.two-way="model"></text-box>',SR=kR,AR=[];let CR;function ER(t){CR||(CR=zh.define({name:xR,template:kR,dependencies:AR})),t.register(CR)}let TR=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.background}),UA)}};TR=NS([$h(dt),FS("design:paramtypes",[])],TR);var $R=n(7600),IR={};IR.styleTagTransform=XS(),IR.setAttributes=WS(),IR.insert=HS().bind(null,"head"),IR.domAPI=ZS(),IR.insertStyleElement=_S(),DS()($R.Z,IR),$R.Z&&$R.Z.locals&&$R.Z.locals;const RR="quest-list",OR='<title text="QUESTS"></title>\r\n<div class="container">\r\n    <div class="quests">\r\n        <div class="quest grid" repeat.for="quest of model">\r\n            <checkbox mode="angled" size="xs" value.two-way="quest.focused" title="Focused"></checkbox>\r\n            <stat-box class="priority" mode="secondary" value.two-way="quest.priority" min="1" size="xs" title="Priority"></stat-box>\r\n            <text-field class="name" value.two-way="quest.name" placeholder="Name" title="${quest.name}"></text-field>\r\n            <stat-info-button source.bind="quest" property="additionalInfo"></stat-info-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add quest" on-item-added.bind="questAdded">\r\n</div>\r\n<footer></footer>',PR=OR,LR=[];let MR;function UR(t){MR||(MR=zh.define({name:RR,template:OR,dependencies:LR})),t.register(MR)}let BR=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.quests}),zA),this.questAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,focused:!1,priority:0,additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))).sort(((t,e)=>t.priority-e.priority))}}};BR=NS([$h(ft),FS("design:paramtypes",[])],BR);var NR=n(280),jR={};jR.styleTagTransform=XS(),jR.setAttributes=WS(),jR.insert=HS().bind(null,"head"),jR.domAPI=ZS(),jR.insertStyleElement=_S(),DS()(NR.Z,jR),NR.Z&&NR.Z.locals&&NR.Z.locals;const FR="npc-list",VR='<title text="Persons of Interest"></title>\r\n<div class="container">\r\n    <div class="npcs">\r\n        <div class="npc grid" repeat.for="npc of model">\r\n            <text-field class="name" value.two-way="npc.name" placeholder="Name" title="${npc.name}"></text-field>\r\n            <text-field class="description" value.two-way="npc.description" placeholder="Description" title="${npc.description}"></text-field>\r\n            <stat-info-button source.bind="npc" property="additionalInfo"></stat-info-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add person" on-item-added.bind="npcAdded">\r\n</div>\r\n<footer></footer>',DR=VR,zR=[];let ZR;function qR(t){ZR||(ZR=zh.define({name:FR,template:VR,dependencies:zR})),t.register(ZR)}let HR=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.npcs}),ZA),this.npcAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};HR=NS([$h(vt),FS("design:paramtypes",[])],HR);const KR="notes",WR='\r\n\r\n\r\n\r\n\r\n<notes-block></notes-block>\r\n<background-block></background-block>\r\n<quest-list></quest-list>\r\n<npc-list></npc-list>\r\n\r\n<div style="clear: both;"></div>',QR=WR,_R=[ut,pt,gt,mt];let GR;function XR(t){GR||(GR=zh.define({name:KR,template:WR,dependencies:_R})),t.register(GR)}let YR=class{};YR=NS([$h(bt)],YR);var JR=n(8840),tO={};tO.styleTagTransform=XS(),tO.setAttributes=WS(),tO.insert=HS().bind(null,"head"),tO.domAPI=ZS(),tO.insertStyleElement=_S(),DS()(JR.Z,tO),JR.Z&&JR.Z.locals&&JR.Z.locals;const eO="xp-list",nO='<title text="XP ENTRIES"></title>\r\n<div class="container">\r\n    <div class="xp-entry grid" repeat.for="entry of planningEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n        <text-field class="plans" value.two-way="entry.plans" placeholder="Plans"></text-field>\r\n    </div>\r\n\r\n    <div class="separator"></div>\r\n    <div class="center-button-box">\r\n        <cross-button click.delegate="deletePreviousEntries()" title="Delete previous entries" mode="angled"></cross-button>\r\n    </div>\r\n\r\n    <div class="past-xp-entry grid" repeat.for="entry of pastEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>',iO=nO,sO=[];let rO;function oO(t){rO||(rO=zh.define({name:eO,template:nO,dependencies:sO})),t.register(rO)}let aO=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.xpEntries}),IA),this.deletePreviousEntries=()=>{let t=this.state.present.character.ageing.currentYear;this.model=this.model.filter((e=>e.year>=t))}}get planningEntries(){return this.model?this.model.filter((t=>t.planningMode)):[]}get pastEntries(){return this.model?this.model.filter((t=>!t.planningMode)):[]}};aO=NS([$h(yt),FS("design:paramtypes",[])],aO);var lO=n(2012),cO={};cO.styleTagTransform=XS(),cO.setAttributes=WS(),cO.insert=HS().bind(null,"head"),cO.domAPI=ZS(),cO.insertStyleElement=_S(),DS()(lO.Z,cO),lO.Z&&lO.Z.locals&&lO.Z.locals;const hO="age-block",uO='<div class="container grid">\r\n    <stat-box class="small-text" mode="secondary-angled" size="m" value.two-way="model.birthYear" min="0" max="2000" title="Birth Year"></stat-box>\r\n    <div>\r\n        <stat-box mode="secondary" size="s" value.two-way="model.age" readonly.bind="true" min="0" title="Age"></stat-box>\r\n        <stat-box mode="secondary" size="s" value.two-way="model.apparentAge" min="0" title="Apparent Age"></stat-box>\r\n    </div>\r\n    <stat-box class="small-text" mode="secondary-angled" size="m" value.two-way="model.currentYear" min="0" max="2000" title="Current Year"></stat-box>\r\n\r\n    <stat-box mode="secondary" size="s" value.two-way="model.livingConditionModifier" prefix-plus.bind="true" title="Living condition modifier"></stat-box>\r\n    <stat-box mode="primary" value.two-way="model.ageingRollModifier" prefix-plus.bind="true" title="Ageing roll bonus" readonly.bind="true"></stat-box>\r\n    <stat-box mode="secondary" size="s" value.two-way="model.longevityModifier" min="0" prefix-plus.bind="true" title="Longevity ritual modifier"></stat-box>\r\n\r\n    <checkbox class="left" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 1" title="Decrepitude level 1"></checkbox>\r\n    <stat-box mode="primary" value.two-way="model.decrepitudePoints" min="0" title="Decrepitude points"></stat-box>\r\n    <checkbox class="right" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 5" title="Decrepitude level 5"></checkbox>\r\n\r\n    <checkbox class="right top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 2" title="Decrepitude level 2"></checkbox>\r\n    <checkbox class="bottom" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 3" title="Decrepitude level 3"></checkbox>\r\n    <checkbox class="left top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 4" title="Decrepitude level 4"></checkbox>\r\n</div>',dO=uO,pO=[];let fO;function gO(t){fO||(fO=zh.define({name:hO,template:uO,dependencies:pO})),t.register(fO)}let vO=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.ageing}),CA)}};vO=NS([$h(kt),FS("design:paramtypes",[])],vO);const mO="progression",bO='\r\n\r\n\r\n<age-block></age-block>\r\n<xp-list></xp-list>\r\n\r\n<div style="clear: both;"></div>',wO=bO,yO=[xt,St];let xO;function kO(t){xO||(xO=zh.define({name:mO,template:bO,dependencies:yO})),t.register(xO)}let SO=class{};SO=NS([$h(At)],SO);var AO=n(6019),CO={};CO.styleTagTransform=XS(),CO.setAttributes=WS(),CO.insert=HS().bind(null,"head"),CO.domAPI=ZS(),CO.insertStyleElement=_S(),DS()(AO.Z,CO),AO.Z&&AO.Z.locals&&AO.Z.locals;const EO="talisman-block",TO='<title text="TALISMAN"></title>\r\n<div class="container">\r\n    <stat-box class="invested-vis" mode="primary" value.two-way="model.investedVis" min="0" size="m" title="Invested vis"></stat-box>\r\n    <stat-box class="spent-vis" mode="secondary" value.two-way="model.spentVis" min="0" max.bind="model.investedVis" size="s" title="Spent vis"></stat-box>\r\n    <text-field class="description" value.two-way="model.description" placeholder="Description" title="${model.description}"></text-field>\r\n\r\n    <div class="bonuses">\r\n        <span class="title text">Bonuses</span>\r\n        <div class="bonus grid" repeat.for="bonus of model.bonuses">\r\n            <checkbox mode="angled" size="xs" value.two-way="bonus.instilled" title="Instilled"></checkbox>\r\n            <text-field class="name" value.two-way="bonus.name" placeholder="Name" title="${bonus.name}"></text-field>\r\n            <stat-box class="bonus-modifier" mode="secondary" value.two-way="bonus.bonus" min="1" size="s" title="Bonus" prefix-plus.bind="true"></stat-box>\r\n            <text-field class="source" value.two-way="bonus.source" placeholder="Source"></text-field>\r\n            <text-field class="notes" value.two-way="bonus.notes" placeholder="Notes" title="${bonus.notes}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="bonusAdded" placeholder="Add bonus"></add-item-input>\r\n    </div>\r\n\r\n    <div class="effects">\r\n        <span class="title text">Effects</span>\r\n        <div class="effect grid" repeat.for="effect of model.effects">\r\n            <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n            <stat-box class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></stat-box>\r\n            <stat-box class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></stat-box>\r\n            <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n            <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n            <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n            <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n            <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="effectAdded" placeholder="Add effect"></add-item-input>\r\n    </div>\r\n</div>\r\n<footer></footer>',$O=TO,IO=[];let RO;function OO(t){RO||(RO=zh.define({name:EO,template:TO,dependencies:IO})),t.register(RO)}let PO=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.talisman}),VA),this.bonusAdded=t=>{this.model.bonuses.push({name:t,bonus:1,instilled:!1,source:"",notes:""}),this.model.bonuses.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=t=>{this.model.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),this.model.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};PO=NS([$h(Et),FS("design:paramtypes",[])],PO);var LO=n(4769),MO={};MO.styleTagTransform=XS(),MO.setAttributes=WS(),MO.insert=HS().bind(null,"head"),MO.domAPI=ZS(),MO.insertStyleElement=_S(),DS()(LO.Z,MO),LO.Z&&LO.Z.locals&&LO.Z.locals;const UO="magic-items-block",BO='<title text="MAGIC ITEMS"></title>\r\n<div class="container">\r\n    <div class="magic-item grid" repeat.for="magicItem of model">\r\n        <text-field class="name" value.two-way="magicItem.name" placeholder="Name"></text-field>\r\n        <stat-box class="invested-vis" mode="primary" value.two-way="magicItem.investedVis" min="0" size="m" title="Invested vis"></stat-box>\r\n        <stat-box class="spent-vis" mode="secondary" value.two-way="magicItem.spentVis" min="0" max.bind="magicItem.investedVis" size="s" title="Spent vis"></stat-box>\r\n        <text-field class="description" value.two-way="magicItem.description" placeholder="Description" title="${magicItem.description}"></text-field>\r\n        <span></span>\r\n\r\n        <div class="effects">\r\n            <span class="title text">Effects</span>\r\n            <div class="effect grid" repeat.for="effect of magicItem.effects">\r\n                <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n                <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n                <stat-box class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></stat-box>\r\n                <stat-box class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></stat-box>\r\n                <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n                <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n                <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n                <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n                <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n            </div>\r\n            <add-item-input on-item-added.bind="effectAdded" parent.bind="magicItem" placeholder="Add effect"></add-item-input>\r\n        </div>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add items"></add-item-input>\r\n</div>\r\n<footer></footer>',NO=BO,jO=[];let FO;function VO(t){FO||(FO=zh.define({name:UO,template:BO,dependencies:jO})),t.register(FO)}let DO=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.magicItems}),DA),this.itemAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",investedVis:0,spentVis:0,effects:[]}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=(t,e)=>{e.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),e.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};DO=NS([$h($t),FS("design:paramtypes",[])],DO);var zO=n(912),ZO={};ZO.styleTagTransform=XS(),ZO.setAttributes=WS(),ZO.insert=HS().bind(null,"head"),ZO.domAPI=ZS(),ZO.insertStyleElement=_S(),DS()(zO.Z,ZO),zO.Z&&zO.Z.locals&&zO.Z.locals;const qO="familiar-block",HO='<title text="FAMILIAR"></title>\r\n<div class="container text">\r\n    <div class="grid">\r\n        <text-field class="name" value.two-way="model.name" placeholder="Name"></text-field>\r\n        <text-field class="arts" value.two-way="model.arts" placeholder="Arts"></text-field>\r\n        <checkbox value.two-way="model.isSpirit" title="Is spirit"></checkbox>\r\n        <stat-info-button source.bind="model" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <text-field class="description" value.two-way="model.description" placeholder="Description"></text-field>\r\n    <div class="block">\r\n        <stat-box header="Bronze" value.two-way="model.bronzeBondLevel" min="0" size="m"></stat-box>\r\n        <stat-box header="Silver" value.two-way="model.silverBondLevel" min="0" size="m"></stat-box>\r\n        <stat-box header="Gold" value.two-way="model.goldBondLevel" min="0" size="m"></stat-box>\r\n    </div>\r\n\r\n    <label class="text title">Powers</label>\r\n    <div class="effect grid" repeat.for="effect of model.effects">\r\n        <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n        <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n        <stat-box class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></stat-box>\r\n        <stat-box class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></stat-box>\r\n        <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n        <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n        <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n        <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n        <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add power"></add-item-input>\r\n</div>\r\n<footer></footer>',KO=HO,WO=[];let QO;function _O(t){QO||(QO=zh.define({name:qO,template:HO,dependencies:WO})),t.register(QO)}let GO=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.familiar}),qA),this.itemAdded=t=>{this.model.effects.push({name:t,arts:"",description:"",duration:"",level:0,penetration:0,range:"",target:"",usages:""}),this.model.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};GO=NS([$h(Rt),FS("design:paramtypes",[])],GO);const XO="enchantments",YO='\r\n\r\n\r\n\r\n<div style="overflow-y: auto; max-height: 1000px;">\r\n    <talisman-block></talisman-block>\r\n    <magic-items-block></magic-items-block>\r\n    <familiar-block></familiar-block>\r\n\r\n    <div style="clear: both;"></div>\r\n</div>',JO=YO,tP=[Tt,It,Ot];let eP;function nP(t){eP||(eP=zh.define({name:XO,template:YO,dependencies:tP})),t.register(eP)}let iP=class{};iP=NS([$h(Pt)],iP);var sP=n(6767),rP={};rP.styleTagTransform=XS(),rP.setAttributes=WS(),rP.insert=HS().bind(null,"head"),rP.domAPI=ZS(),rP.insertStyleElement=_S(),DS()(sP.Z,rP),sP.Z&&sP.Z.locals&&sP.Z.locals;const oP="character-type-selector",aP='<div class="container">\r\n    <span>Magus</span> <radio-button group="character-type" state="${model == \'magus\' ? \'selected\' : \'unselected\'}" value="magus"></radio-button>\r\n    <span>Companion</span> <radio-button group="character-type" state="${model == \'companion\' ? \'selected\' : \'unselected\'}" value="companion"></radio-button>\r\n</div>',lP=aP,cP=[];let hP;function uP(t){hP||(hP=zh.define({name:oP,template:aP,dependencies:cP})),t.register(hP)}let dP=class extends hC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.type}),MA)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"character-type"==t.group&&(this.model=t.value)}))}};dP=NS([$h(Mt),FS("design:paramtypes",[])],dP);const pP="settings",fP="\r\n\r\n<character-type-selector></character-type-selector>\r\n",gP=fP,vP=[Ut];let mP;function bP(t){mP||(mP=zh.define({name:pP,template:fP,dependencies:vP})),t.register(mP)}let wP=class{};wP=NS([$h(Bt)],wP);const yP="my-app",xP='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<page-header></page-header>\r\n<div class="main-paper">\r\n    <div class="page-view">\r\n        <au-viewport name="main" default="description"></au-viewport>\r\n    </div>\r\n</div>\r\n<div class="buttons">\r\n    <button click.delegate="undo()" disabled.bind="state.past.length == 0">Undo</button>\r\n    <button click.delegate="redo()" disabled.bind="state.future.length == 0">Redo</button>\r\n    <button click.delegate="save()">Save As</button>\r\n    <button click.delegate="load()">Load</button>\r\n    <button click.delegate="newCharacter()">Create New Character</button>\r\n    \r\n    <input type=\'file\' accept=\'.json\' files.bind="selectedFiles" ref="fileInput" style="display: none;"><br>\r\n</div>',kP=xP,SP=[g,O,q,et,ct,wt,Ct,Lt,Nt];let AP;function CP(t){AP||(AP=zh.define({name:yP,template:xP,dependencies:SP})),t.register(AP)}let EP=class{constructor(t){this.store=t,this.middlewareRegistered=!1,this.isStandalone=window.matchMedia("(display-mode: standalone)").matches,this.undo=()=>{this.store.dispatch(nm,-1)},this.redo=()=>{this.store.dispatch(nm,1)},this.save=async()=>{if(this.isStandalone){const t={suggestedName:"character sheet.ars",types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};this.fileHandle=await window.showSaveFilePicker(t),await this.saveFile(this.state),this.middlewareRegistered||(this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),am.After),this.isInitialized=!0)}else!function(t,e){const n=document.createElement("a"),i=e.split(".").pop();n.href=URL.createObjectURL(new Blob([t],{type:`text/${"txt"===i?"plain":i}`})),n.download=e,n.click(),n.remove()}(JSON.stringify(this.state.present,null,4),"character sheet.ars")},this.load=async()=>{if(this.isStandalone){const t={types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};let[e]=await window.showOpenFilePicker(t);this.fileHandle=e,this.isInitialized=!1,this.middlewareRegistered||this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),am.After),this.store.dispatch(dA,await this.fileHandle.getFile())}else this.fileInput.click(),this.fileInput.onchange=this.fileInputChanged},this.newCharacter=async()=>{this.isStandalone&&(this.fileHandle=null),await this.store.dispatch(uA),this.isStandalone&&await this.save()},this.fileInputChanged=()=>{this.theFile.text().then((t=>this.store.dispatch(PA,t)))},this.isInitialized=!1,this.fileStorageMiddlewareFactory=()=>(this.middlewareRegistered=!0,(t,e,n)=>{this.isInitialized?(console.log("Saving file to disk"),this.saveFile(t)):this.isInitialized=!0}),this.saveFile=async t=>{if(!this.fileHandle)return void console.log("Could not save - file handle not set");var e=await this.fileHandle.createWritable();let n=await e.write(JSON.stringify(t.present,null,4));console.log("rr:",n);let i=await e.close();console.log("cc:",i)},this.store.registerAction("createNewCharacter",uA),this.store.registerAction("loadCharacter",pA),this.store.registerAction("loadCharacterFromFile",dA),this.store.registerAction("importCharacter",PA),this.store.registerAction("updateCharacteristics",fA),this.store.registerAction("updateAbilities",gA),this.store.registerAction("updateVirtues",mA),this.store.registerAction("updateFlaws",bA),this.store.registerAction("updateDescription",wA),this.store.registerAction("updateFatigue",yA),this.store.registerAction("updateWounds",xA),this.store.registerAction("updateArts",kA),this.store.registerAction("updateSpells",SA),this.store.registerAction("updateSpellWishlist",AA),this.store.registerAction("updatePersonalityTraits",vA),this.store.registerAction("updateAgeing",CA),this.store.registerAction("updateConfidence",EA),this.store.registerAction("updateWarping",TA),this.store.registerAction("updateActiveMagic",$A),this.store.registerAction("updateXpEntries",IA),this.store.registerAction("updateNotes",RA),this.store.registerAction("updateLab",OA),this.store.registerAction("updateSpellcastingStats",LA),this.store.registerAction("updateCharacterType",MA),this.store.registerAction("updateBackground",UA),this.store.registerAction("updateSigil",BA),this.store.registerAction("updateCarriedBelongings",NA),this.store.registerAction("updateSanctumBelongings",jA),this.store.registerAction("updateVis",FA),this.store.registerAction("updateTalisman",VA),this.store.registerAction("updateMagicItems",DA),this.store.registerAction("updateQuests",zA),this.store.registerAction("updateNpcs",ZA),this.store.registerAction("updateFamiliar",qA),this.isStandalone?this.registerFileLaunchHandler():(this.store.registerAction("rehydrateFromLocalStorage",um),t.registerMiddleware(hm,am.After,{key:"character-sheets"}),t.dispatch(um,"character-sheets"))}stateChanged(t,e){var n,i,s;hA.name=null!==(s=null===(i=null===(n=t.present)||void 0===n?void 0:n.character)||void 0===i?void 0:i.description.name)&&void 0!==s?s:""}registerFileLaunchHandler(){let t=window.launchQueue;t&&t.setConsumer((async t=>{const[e]=t.files;if(e){this.fileHandle=e;const t=await e.getFile();t&&(this.store.dispatch(dA,t),this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),am.After))}}))}get theFile(){return this.selectedFiles&&this.selectedFiles.length>0?this.selectedFiles[0]:null}};EP=NS([$h(jt),ym(),FS("design:paramtypes",[bm])],EP);var TP=n(288),$P={};$P.styleTagTransform=XS(),$P.setAttributes=WS(),$P.insert=HS().bind(null,"head"),$P.domAPI=ZS(),$P.insertStyleElement=_S(),DS()(TP.Z,$P),TP.Z&&TP.Z.locals&&TP.Z.locals;const IP="checkbox",RP="<div class=\"container ${value ? 'checked' : 'unchecked'} ${readonly ? 'readonly' : ''} ${colorMode} ${size} ${mode}\" pointerup.delegate=\"toggle()\">\r\n</div>",OP=RP,PP=[];let LP;function MP(t){LP||(LP=zh.define({name:IP,template:RP,dependencies:PP})),t.register(LP)}class UP{constructor(){this.colorMode="color"}}NS([ql,FS("design:type",String)],UP.prototype,"colorMode",void 0);let BP=class extends UP{constructor(){super(...arguments),this.value=!1,this.size="m",this.mode="regular",this.readonly=!1,this.toggle=()=>{this.readonly||(this.value=!this.value)}}};NS([ql,FS("design:type",Boolean)],BP.prototype,"value",void 0),NS([ql,FS("design:type",String)],BP.prototype,"size",void 0),NS([ql,FS("design:type",String)],BP.prototype,"mode",void 0),NS([ql,FS("design:type",Boolean)],BP.prototype,"readonly",void 0),BP=NS([$h(Ft)],BP);var NP=n(2001),jP={};jP.styleTagTransform=XS(),jP.setAttributes=WS(),jP.insert=HS().bind(null,"head"),jP.domAPI=ZS(),jP.insertStyleElement=_S(),DS()(NP.Z,jP),NP.Z&&NP.Z.locals&&NP.Z.locals;const FP="list",VP='<title text.bind="title"></title>\r\n<div class="container">\r\n    <div repeat.for="item of items">\r\n        <text-field class="list-entry" value.two-way="item.name" title="${item.name}"></text-field>\r\n        <stat-info-button if.bind="hasAdditionalInfo" source.bind="item" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <add-item-input placeholder="Add item" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',DP=VP,zP=[];let ZP;function qP(t){ZP||(ZP=zh.define({name:FP,template:VP,dependencies:zP})),t.register(ZP)}let HP=class{constructor(){this.items=[],this.hasAdditionalInfo=!1,this.itemAdded=t=>{this.items.push({name:t,additionalInfo:""}),this.items.sort(((t,e)=>t.name.localeCompare(e.name)))}}};NS([ql,FS("design:type",String)],HP.prototype,"title",void 0),NS([ql,FS("design:type",Array)],HP.prototype,"items",void 0),NS([ql,FS("design:type",Boolean)],HP.prototype,"hasAdditionalInfo",void 0),HP=NS([$h(Vt)],HP);var KP=n(1365),WP={};WP.styleTagTransform=XS(),WP.setAttributes=WS(),WP.insert=HS().bind(null,"head"),WP.domAPI=ZS(),WP.insertStyleElement=_S(),DS()(KP.Z,WP),KP.Z&&KP.Z.locals&&KP.Z.locals;const QP="stat-box",_P='<span if.bind="showHeader && header" class="header ${mode} ${size}">${header}</span>\r\n<div class="container ${active === true ? \'active\' : \'\'} ${readonly ? \'readonly\' : \'\'} ${fadeZero && value == 0 ? \'fade\' : \'\'} ${mode} ${colorMode} ${size}"\r\n     pointerdown.delegate="press()"\r\n     ref="containerElement">\r\n    <span class="content numbers">${getValuePrefix()+value}</div>\r\n</div>\r\n<div class="overlay" if.bind="active"  pointerup.delegate="release()" pointermove.delegate="move($event)"></div>',GP=_P,XP=[];let YP;function JP(t){YP||(YP=zh.define({name:QP,template:_P,dependencies:XP})),t.register(YP)}let tL=class extends UP{constructor(t){super(),this.ea=t,this.max=99,this.min=-99,this.mode="primary-angled",this.size="m",this.prefixPlus=!1,this.readonly=!1,this.header="",this.showHeader=!0,this.fadeZero=!1,this.active=!1,this.delta=0,this.press=()=>{this.readonly||(this.active=!0,this.originalValue=this.value,this.delta=0,window.addEventListener("pointerout",this.checkPointerOutsideWindow))},this.checkPointerOutsideWindow=t=>{(t.clientY<=0||t.clientX<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(window.removeEventListener("pointerout",this.checkPointerOutsideWindow),this.release())},this.release=()=>{this.readonly||(this.active=!1)},this.move=t=>{if(!this.active||this.readonly)return;this.delta+=t.movementY;let e=Math.round(this.originalValue-this.delta/10);this.value=Math.max(this.min,Math.min(this.max,e)),this.ea.publish("ui-interaction")},this.getValuePrefix=()=>this.prefixPlus&&this.value>0?"+":""}};NS([ql,FS("design:type",Number)],tL.prototype,"value",void 0),NS([ql,FS("design:type",Number)],tL.prototype,"max",void 0),NS([ql,FS("design:type",Number)],tL.prototype,"min",void 0),NS([ql,FS("design:type",String)],tL.prototype,"mode",void 0),NS([ql,FS("design:type",String)],tL.prototype,"size",void 0),NS([ql,FS("design:type",Boolean)],tL.prototype,"prefixPlus",void 0),NS([ql,FS("design:type",Boolean)],tL.prototype,"readonly",void 0),NS([ql,FS("design:type",String)],tL.prototype,"header",void 0),NS([ql,FS("design:type",Boolean)],tL.prototype,"showHeader",void 0),NS([ql,FS("design:type",Boolean)],tL.prototype,"fadeZero",void 0),tL=NS([$h(Dt),jS(0,Ci),FS("design:paramtypes",[Object])],tL);var eL=n(9909),nL={};nL.styleTagTransform=XS(),nL.setAttributes=WS(),nL.insert=HS().bind(null,"head"),nL.domAPI=ZS(),nL.insertStyleElement=_S(),DS()(eL.Z,nL),eL.Z&&eL.Z.locals&&eL.Z.locals;const iL="radio-button",sL='<div class="container ${state} ${colorMode}"\r\n     pointerup.delegate="select()"\r\n     ref="element">\r\n</div>',rL=sL,oL=[];let aL;function lL(t){aL||(aL=zh.define({name:iL,template:sL,dependencies:oL})),t.register(aL)}let cL=class extends UP{constructor(t){super(),this.ea=t,this.state="unselected",this.select=()=>{this.group?this.ea.publish("radio-button-selected",{group:this.group,source:this.element,value:this.value}):this.state="selected"}}bound(){this.ea.subscribe("radio-button-selected",(t=>{this.group==t.group&&(this.state=t.source===this.element?"selected":"unselected")}))}};NS([ql,FS("design:type",String)],cL.prototype,"state",void 0),NS([ql,FS("design:type",String)],cL.prototype,"group",void 0),NS([ql,FS("design:type",String)],cL.prototype,"value",void 0),cL=NS([$h(zt),jS(0,Ci),FS("design:paramtypes",[Object])],cL);var hL=n(835),uL={};uL.styleTagTransform=XS(),uL.setAttributes=WS(),uL.insert=HS().bind(null,"head"),uL.domAPI=ZS(),uL.insertStyleElement=_S(),DS()(hL.Z,uL),hL.Z&&hL.Z.locals&&hL.Z.locals;const dL="text-box",pL='<title text.bind="title" if.bind="showBorders"></title>\r\n<div class="container">\r\n    <textarea value.bind="text" cols="32" rows="8" keydown.delegate="onChange()" autocomplete="chrome-off"></textarea>\r\n</div>\r\n<footer if.bind="showBorders"></footer>',fL=pL,gL=[];let vL;function mL(t){vL||(vL=zh.define({name:dL,template:pL,dependencies:gL})),t.register(vL)}let bL=class{constructor(t){this.ea=t,this.showBorders=!0,this.onChange=()=>{this.ea.publish("ui-interaction")}}};NS([ql,FS("design:type",String)],bL.prototype,"title",void 0),NS([ql,FS("design:type",String)],bL.prototype,"text",void 0),NS([ql,FS("design:type",Boolean)],bL.prototype,"showBorders",void 0),bL=NS([$h(Zt),jS(0,Ci),FS("design:paramtypes",[Object])],bL);var wL=n(6140),yL={};yL.styleTagTransform=XS(),yL.setAttributes=WS(),yL.insert=HS().bind(null,"head"),yL.domAPI=ZS(),yL.insertStyleElement=_S(),DS()(wL.Z,yL),wL.Z&&wL.Z.locals&&wL.Z.locals;const xL="footer",kL='<div class="grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',SL=kL,AL=[];let CL;function EL(t){CL||(CL=zh.define({name:xL,template:kL,dependencies:AL})),t.register(CL)}let TL=class{};TL=NS([$h(qt)],TL);var $L=n(1939),IL={};IL.styleTagTransform=XS(),IL.setAttributes=WS(),IL.insert=HS().bind(null,"head"),IL.domAPI=ZS(),IL.insertStyleElement=_S(),DS()($L.Z,IL),$L.Z&&$L.Z.locals&&$L.Z.locals;const RL="title",OL='<div class="title grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n    <span class="text">${text}</span>\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',PL=OL,LL=[];let ML;function UL(t){ML||(ML=zh.define({name:RL,template:OL,dependencies:LL})),t.register(ML)}let BL=class{};NS([ql,FS("design:type",String)],BL.prototype,"text",void 0),BL=NS([$h(Ht)],BL);var NL=n(1525),jL={};jL.styleTagTransform=XS(),jL.setAttributes=WS(),jL.insert=HS().bind(null,"head"),jL.domAPI=ZS(),jL.insertStyleElement=_S(),DS()(NL.Z,jL),NL.Z&&NL.Z.locals&&NL.Z.locals;const FL="rune-edge",VL='<div class="container">\r\n</div>',DL=VL,zL=[];let ZL;function qL(t){ZL||(ZL=zh.define({name:FL,template:VL,dependencies:zL})),t.register(ZL)}let HL=class{};HL=NS([$h(Kt)],HL);var KL=n(6392),WL={};WL.styleTagTransform=XS(),WL.setAttributes=WS(),WL.insert=HS().bind(null,"head"),WL.domAPI=ZS(),WL.insertStyleElement=_S(),DS()(KL.Z,WL),KL.Z&&KL.Z.locals&&KL.Z.locals;const QL="page-header",_L='\r\n\r\n<div class="grid">\r\n    <div class="page-links">\r\n        <a class="page-link description active" href="/description"></a>\r\n        <a class="page-link stats" href="/stats"></a>\r\n        <a class="page-link magic" href="/magic" if.bind="state.present.character.type == \'magus\'"></a>\r\n        <a class="page-link progression" href="/progression"></a>\r\n        <a class="page-link lab" href="/lab" if.bind="state.present.character.type == \'magus\'"></a>\r\n        <a class="page-link belongings" href="/belongings"></a>\r\n        <a class="page-link enchantments" href="/enchantments" if.bind="state.present.character.type == \'magus\'"></a>\r\n        <a class="page-link notes" href="/notes"></a>\r\n        <a class="page-link settings" href="/settings"></a>\r\n    </div>\r\n</div>',GL=_L,XL=[p];let YL;function JL(t){YL||(YL=zh.define({name:QL,template:_L,dependencies:XL})),t.register(YL)}let tM=class{};tM=NS([$h(Wt),ym()],tM);var eM=n(4280),nM={};nM.styleTagTransform=XS(),nM.setAttributes=WS(),nM.insert=HS().bind(null,"head"),nM.domAPI=ZS(),nM.insertStyleElement=_S(),DS()(eM.Z,nM),eM.Z&&eM.Z.locals&&eM.Z.locals;const iM="text-field",sM='<input type="text" class.bind="class" value.bind="value" placeholder.bind="placeholder" title.bind="title" keydown.delegate="onChange()">\r\n',rM=sM,oM=[];let aM;function lM(t){aM||(aM=zh.define({name:iM,template:sM,dependencies:oM})),t.register(aM)}let cM=class{constructor(t){this.ea=t,this.placeholder="",this.title="",this.class="",this.onChange=()=>{this.ea.publish("ui-interaction")}}};NS([ql,FS("design:type",String)],cM.prototype,"value",void 0),NS([ql,FS("design:type",String)],cM.prototype,"placeholder",void 0),NS([ql,FS("design:type",String)],cM.prototype,"title",void 0),NS([ql,FS("design:type",String)],cM.prototype,"class",void 0),cM=NS([$h(Qt),Ih,jS(0,Ci),FS("design:paramtypes",[Object])],cM);var hM=n(2661),uM={};uM.styleTagTransform=XS(),uM.setAttributes=WS(),uM.insert=HS().bind(null,"head"),uM.domAPI=ZS(),uM.insertStyleElement=_S(),DS()(hM.Z,uM),hM.Z&&hM.Z.locals&&hM.Z.locals;const dM="add-item-input",pM='<input class="add-item-input-field ${class}" type="text" placeholder.bind="placeholder" keyup.delegate="keyPressed($event)" value.two-way="newItemString">',fM=pM,gM=[];let vM;function mM(t){vM||(vM=zh.define({name:dM,template:pM,dependencies:gM})),t.register(vM)}let bM=class{constructor(){this.placeholder="",this.class="",this.newItemString="",this.keyPressed=t=>{this.onItemAdded&&"Enter"==t.key&&this.newItemString&&(this.parent?this.onItemAdded(this.newItemString,this.parent):this.onItemAdded(this.newItemString),this.newItemString="")}}};NS([ql,FS("design:type",String)],bM.prototype,"placeholder",void 0),NS([ql,FS("design:type",Function)],bM.prototype,"onItemAdded",void 0),NS([ql,FS("design:type",Object)],bM.prototype,"parent",void 0),NS([ql,FS("design:type",String)],bM.prototype,"class",void 0),bM=NS([$h(_t),Ih],bM);var wM=n(3055),yM={};yM.styleTagTransform=XS(),yM.setAttributes=WS(),yM.insert=HS().bind(null,"head"),yM.domAPI=ZS(),yM.insertStyleElement=_S(),DS()(wM.Z,yM),wM.Z&&wM.Z.locals&&wM.Z.locals;const xM="dialog-box",kM='<div class="dialog-container ${size}">\r\n    <div class="inner-container">\r\n        <title text.bind="title"></title>\r\n        <au-slot></au-slot>\r\n        <footer></footer>\r\n    </div>\r\n</div>\r\n',SM=kM,AM=[];let CM;function EM(t){CM||(CM=zh.define({name:xM,template:kM,dependencies:AM})),t.register(CM)}let TM=class{constructor(t){this.host=t,this.size="m"}attaching(){return document.body.classList.add("disable-scrolling"),this.host.animate([{transform:"scale(0.8)",opacity:"0"},{transform:"scale(1)",opacity:"1"}],{duration:200}).finished}detaching(){return document.body.classList.remove("disable-scrolling"),this.host.animate([{transform:"scale(1)",opacity:"1"},{transform:"scale(0.8)",opacity:"0"}],{duration:200}).finished}};NS([ql,FS("design:type",String)],TM.prototype,"title",void 0),NS([ql,FS("design:type",String)],TM.prototype,"size",void 0),TM=NS([$h(Gt),kn(Element),FS("design:paramtypes",[Element])],TM);var $M=n(2495),IM={};IM.styleTagTransform=XS(),IM.setAttributes=WS(),IM.insert=HS().bind(null,"head"),IM.domAPI=ZS(),IM.insertStyleElement=_S(),DS()($M.Z,IM),$M.Z&&$M.Z.locals&&$M.Z.locals;const RM="text-dialog",OM='<dialog-box title="${model.title}" size="m">\r\n    <text-box class="text-dialog-input" text.two-way="model.value" show-borders.bind="false"></text-box>\r\n</dialog-box>',PM=OM,LM=[];let MM;function UM(t){MM||(MM=zh.define({name:RM,template:OM,dependencies:LM})),t.register(MM)}var BM;let NM=BM=class{activate(t){this.model=t}static open(t,e){let n=dU.get(cv),i=cA(t);n.open({component:()=>BM,overlayDismiss:!0,model:i}).whenClosed((n=>{t.value=i.value,e()}))}};NM=BM=NS([$h(Xt),Ih],NM);var jM=n(1247),FM={};FM.styleTagTransform=XS(),FM.setAttributes=WS(),FM.insert=HS().bind(null,"head"),FM.domAPI=ZS(),FM.insertStyleElement=_S(),DS()(jM.Z,FM),jM.Z&&jM.Z.locals&&jM.Z.locals;const VM="stat-info-button",DM='<div class="button ${isActive ? \'active\' : \'\'}" click.delegate="activate()" title="Additional information">\r\n</div>',zM=DM,ZM=[];let qM;function HM(t){qM||(qM=zh.define({name:VM,template:DM,dependencies:ZM})),t.register(qM)}let KM=class{constructor(){this.activate=()=>{let t=this.source[this.property],e={value:null!=t?t:"",title:"INFORMATION"};NM.open(e,(()=>{this.source[this.property]=e.value}))}}get isActive(){let t=this.source[this.property];return null!=t&&t.length>0}};NS([ql,FS("design:type",Object)],KM.prototype,"source",void 0),NS([ql,FS("design:type",String)],KM.prototype,"property",void 0),KM=NS([$h(Yt)],KM);var WM=n(1187),QM={};QM.styleTagTransform=XS(),QM.setAttributes=WS(),QM.insert=HS().bind(null,"head"),QM.domAPI=ZS(),QM.insertStyleElement=_S(),DS()(WM.Z,QM),WM.Z&&WM.Z.locals&&WM.Z.locals;const _M="cross-button",GM='<div class="button-container ${mode}">\r\n\r\n</div>',XM=GM,YM=[];let JM;function tU(t){JM||(JM=zh.define({name:_M,template:GM,dependencies:YM})),t.register(JM)}let eU=class{constructor(){this.mode="standard"}};NS([ql,FS("design:type",String)],eU.prototype,"mode",void 0),eU=NS([$h(Jt)],eU);var nU=n(8831),iU={};iU.styleTagTransform=XS(),iU.setAttributes=WS(),iU.insert=HS().bind(null,"head"),iU.domAPI=ZS(),iU.insertStyleElement=_S(),DS()(nU.Z,iU),nU.Z&&nU.Z.locals&&nU.Z.locals;const sU="symbol",rU='<div class="symbol-container ${icon}">\r\n</div>',oU=rU,aU=[];let lU;function cU(t){lU||(lU=zh.define({name:sU,template:rU,dependencies:aU})),t.register(lU)}let hU=class{constructor(){this.icon="three-dots"}};NS([ql,FS("design:type",String)],hU.prototype,"icon",void 0),hU=NS([$h(te)],hU);let uU=Iv.register(xm.withInitialState(lA).withOptions({history:{undoable:!0,limit:20}})).register(BS.customize({title:{transformTitle:(t,e,n)=>hA.name?`${hA.name} - ${t}`:t,appTitle:"${componentTitles}${appTitleSeparator}Sheet Maker"}})).register(Ev).register(BP,HP,tL,cL,bL,cM,bM,TM,NM,KM,eU,hU).register(TL,BL,HL,tM).app(EP);const dU=uU.container;uU.start(),window.addEventListener("dragover",(function(t){t.preventDefault()}),!1),window.addEventListener("drop",(function(t){t.preventDefault()}),!1),!(window.location.href.indexOf("localhost")>=0)&&"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sheet-maker/service-worker.js").then((t=>{console.log("SW registered: ",t)})).catch((t=>{console.log("SW registration failed: ",t)}))}))})()})();