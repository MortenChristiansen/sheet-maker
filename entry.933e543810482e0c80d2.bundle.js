/*! For license information please see entry.933e543810482e0c80d2.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={288:(t,e,i)=>{i.d(e,{Z:()=>f});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r),a=i(1667),l=i.n(a),c=new URL(i(8390),i.b),h=new URL(i(3208),i.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"checkbox {\r\n    display: inline-block;\r\n}\r\n\r\ncheckbox > .container:not(.readonly) {\r\n    cursor: pointer;\r\n}\r\n\r\ncheckbox .container {\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\ncheckbox .container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncheckbox .container.s {\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n\r\ncheckbox .container.xs {\r\n    width: 13px;\r\n    height: 13px;\r\n}\r\n\r\ncheckbox .container.checked {\r\n    background-image: url("+d+");\r\n}\r\n\r\ncheckbox .container.unchecked {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},2001:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nlist > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nlist .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nlist .list-entry {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},8908:(t,e,i)=>{i.d(e,{Z:()=>b});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r),a=i(1667),l=i.n(a),c=new URL(i(8801),i.b),h=new URL(i(9462),i.b),u=new URL(i(3473),i.b),d=new URL(i(2867),i.b),p=o()(s()),f=l()(c),v=l()(h),g=l()(u),m=l()(d);p.push([t.id,"primary-stat {\r\n    display: inline-block;\r\n}\r\n\r\nprimary-stat .container {\r\n    width: 60px;\r\n    height: 60px;\r\n    background-size: contain;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nprimary-stat > .container:not(.readonly) {\r\n    cursor: -webkit-grab;\r\n    cursor: grab;\r\n}\r\n\r\nprimary-stat .container.l {\r\n    width: 90px;\r\n    height: 90px;\r\n    font-size: 30px;\r\n}\r\n\r\nprimary-stat .container.s {\r\n    width: 45px;\r\n    height: 45px;\r\n    font-size: 13px;\r\n}\r\n\r\nprimary-stat .container.xs {\r\n    width: 36px;\r\n    height: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nprimary-stat .container.primary {\r\n    background-image: url("+f+");\r\n}\r\n\r\nprimary-stat .container.primary-angled {\r\n    background-image: url("+v+");\r\n}\r\n\r\nprimary-stat .container.secondary {\r\n    background-image: url("+g+");\r\n    width: 44px;\r\n    height: 44px;\r\n}\r\nprimary-stat .container.secondary.s {\r\n    width: 33px;\r\n    height: 33px;\r\n}\r\nprimary-stat .container.secondary.xs {\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nprimary-stat .container.secondary-angled {\r\n    background-image: url("+m+");\r\n}\r\n\r\nprimary-stat .container.active {\r\n    cursor: -webkit-grabbing;\r\n    cursor: grabbing;\r\n}\r\n\r\nprimary-stat .container .content {\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\nprimary-stat .overlay {\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 1;\r\n}",""]);const b=p},9909:(t,e,i)=>{i.d(e,{Z:()=>f});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r),a=i(1667),l=i.n(a),c=new URL(i(164),i.b),h=new URL(i(2),i.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"radio-button {\r\n    display: inline-block;\r\n    cursor: pointer;\r\n}\r\n\r\nradio-button .container {\r\n    background-size: contain;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nradio-button .container.selected {\r\n    background-image: url("+d+");\r\n}\r\n\r\nradio-button .container.unselected {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},835:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"text-box {\r\n    display: block;\r\n    margin: 30px;\r\n    float: left;\r\n    width: 300px;\r\n}\r\n\r\ntext-box > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\ntext-box textarea {\r\n    font-family: 'Estonia', cursive;\r\n    font-size: 30px;\r\n    background-color: transparent;\r\n    font-weight: bold;\r\n\r\n    width: 100%;\r\n    border: none;\r\n    overflow: auto;\r\n    outline: none;\r\n    box-shadow: none;\r\n\r\n    resize: none;\r\n}",""]);const a=o},6140:(t,e,i)=>{i.d(e,{Z:()=>f});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r),a=i(1667),l=i.n(a),c=new URL(i(3356),i.b),h=new URL(i(1668),i.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"footer {\r\n    display: block;\r\n}\r\n\r\nfooter .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1) scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block; \r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n}",""]);const f=u},6392:(t,e,i)=>{i.d(e,{Z:()=>d});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r),a=i(1667),l=i.n(a),c=new URL(i(8626),i.b),h=o()(s()),u=l()(c);h.push([t.id,"page-header {\r\n    display: block;\r\n    width: 100%;\r\n    margin-top: 20px;\r\n}\r\n\r\npage-header > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto 1fr;\r\n    grid-template-rows:  0 1fr;\r\n}\r\n\r\npage-header .name-box {\r\n    height: 150px;\r\n    width: 400px;\r\n    background-position: 50%;\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    background-image: url("+u+");\r\n    text-align: center;\r\n}\r\n\r\npage-header .name-box input {\r\n    margin-top: 30px;\r\n    text-align: center;\r\n    font-size: 70px;\r\n    width: 300px;\r\n    border: none;\r\n}\r\n\r\npage-header .left-page-links {\r\n    align-self: center;\r\n    justify-self: right;\r\n    margin: 20px;\r\n    margin-top: 45px;\r\n}\r\n\r\npage-header .right-page-links {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 20px;\r\n    margin-top: 45px;\r\n}\r\n\r\npage-header .page-link {\r\n    margin: 10px;\r\n    color: #446;;\r\n}\r\n\r\npage-header .page-link {\r\n    text-decoration: none;\r\n}\r\n\r\n\r\n\r\npage-header .page-link:hover:not(.active) {\r\n    color: black;\r\n}\r\n\r\npage-header .page-link.active{\r\n    cursor: default;\r\n    color: darkred;\r\n}",""]);const d=h},1525:(t,e,i)=>{i.d(e,{Z:()=>d});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r),a=i(1667),l=i.n(a),c=new URL(i(7283),i.b),h=o()(s()),u=l()(c);h.push([t.id,"rune-edge {\r\n    display: block;\r\n    width: 100%;\r\n    height: 20px;\r\n    background-size: contain;\r\n    background-repeat: repeat-x;\r\n    background-image: url("+u+");\r\n    margin: 45px 0;\r\n}",""]);const d=h},1939:(t,e,i)=>{i.d(e,{Z:()=>f});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r),a=i(1667),l=i.n(a),c=new URL(i(3356),i.b),h=new URL(i(1668),i.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"title {\r\n    display: block;\r\n    height: auto;\r\n}\r\n\r\ntitle .text {\r\n    font-size: 18px;\r\n    color: darkred;\r\n    padding: 0 4px;\r\n    display: inline-block;\r\n}\r\n\r\ntitle .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1);\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto auto auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n    \r\n}",""]);const f=u},1138:(t,e,i)=>{i.d(e,{Z:()=>d});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r),a=i(1667),l=i.n(a),c=new URL(i(4378),i.b),h=o()(s()),u=l()(c);h.push([t.id,".message {\n  background-color: red;\n}\n\nbody {\n  font-family: 'Eagle Lake', cursive;\n  font-size: 20px;\n  color: darkred;\n  background-image:  url("+u+");\n  background-color: #FBF5EB;\n  margin: 0;\n}\n\n.numbers {\n  font-family: 'MedievalSharp', cursive;\n}\n\n/*\nfont-family: 'Amatic SC', cursive;\nfont-family: 'Eagle Lake', cursive;\nfont-family: 'Estonia', cursive;\nfont-family: 'Fleur De Leah', cursive;\nfont-family: 'IM Fell DW Pica SC', serif;\nfont-family: 'IM Fell English SC', serif;\nfont-family: 'MedievalSharp', cursive;\n*/\n\n.monochrome {\n  filter: grayscale(100%);\n}\n\n.text {\n    font-size: 16px;\n    color: #446;\n}\n\ninput[type=\"text\"] {\n  border: none;\n  border-bottom: 2px solid #cbc1ad;\n  background: none;\n  padding: 0px 6px;\n  font-family: 'Estonia', cursive;\n  font-size: 30px;\n  font-weight: bold;\n  text-indent: 5px;\n}\n\ninput[type=\"text\"]:focus {\n  outline: none;\n}\n\ninput[type=\"text\"].specialisation {\n  text-align: center;\n  width: 150px;\n  color: #888;\n}\n\n::-moz-placeholder {\n  color: #bbb;\n  opacity: 1; /* Firefox */\n}\n\n::placeholder {\n  color: #bbb;\n  opacity: 1; /* Firefox */\n}",""]);const d=h},927:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"abilities-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nabilities-block > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nabilities-block .ability > * {\r\n    display: inline-block;\r\n}\r\n\r\nabilities-block .ability .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .name {\r\n    opacity: 0.4;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability .specialisation {\r\n    width: 150px;\r\n    text-align: center;\r\n}\r\n\r\nabilities-block .ability.untrained .specialisation {\r\n    opacity: 0;\r\n}\r\n\r\nabilities-block .add-item-input {\r\n    margin-top: 15px;\r\n    width: 200px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nabilities-block .puissant-label {\r\n    width: 0;\r\n}",""]);const a=o},7804:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"active-magic-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n    width: 366px;\r\n}\r\n\r\nactive-magic-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nactive-magic-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nactive-magic-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nactive-magic-list .add-magic-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}",""]);const a=o},2012:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"age-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nage-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-template-rows: auto auto auto 60px;\r\n}\r\n\r\nage-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 4px;\r\n}\r\n\r\nage-block > .grid > .left {\r\n    justify-self: left;\r\n}\r\n\r\nage-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nage-block > .grid > .bottom {\r\n    align-self: end;\r\n}\r\n\r\nage-block > .grid > .top {\r\n    align-self: baseline;\r\n}\r\n\r\nage-block .small-text {\r\n    font-size: 14px;\r\n}",""]);const a=o},5185:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"arts-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\narts-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto 40px auto auto auto auto  10px auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\narts-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\narts-block .untrained {\r\n    opacity: 0.4;\r\n}",""]);const a=o},3260:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"background-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nbackground-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nbackground-block text-box textarea {\r\n    height: 1200px;\r\n}",""]);const a=o},6767:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"character-type-selector {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    height: -webkit-fit-content;\r\n    height: -moz-fit-content;\r\n    height: fit-content;\r\n    color: #446;\r\n    margin: 20px;\r\n}\r\n\r\ncharacter-type-selector .container > * {\r\n    vertical-align: middle;\r\n}",""]);const a=o},3292:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"characteristics-block {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    color: #446;\r\n    margin: 30px;\r\n    float: left;\r\n}\r\n\r\ncharacteristics-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ncharacteristics-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr;\r\n}\r\n\r\ncharacteristics-block .grid > * {\r\n    align-self: center;\r\n}\r\n\r\ncharacteristics-block .grid .text.left-col {\r\n    justify-self: right;\r\n}\r\n\r\ncharacteristics-block .grid .text{\r\n    justify-self: left;\r\n    margin-left: 3px;\r\n    margin-right: 3px;\r\n}\r\n\r\n\r\ncharacteristics-block .grid primary-stat {\r\n    margin: 1px;\r\n}\r\n\r\ncharacteristics-block footer {\r\n    margin-top: 5px;\r\n}",""]);const a=o},4397:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"confidence-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},6903:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"damage-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\ndamage-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ndamage-block .wound-type {\r\n    display: inline-block;\r\n    margin: 0 10px;\r\n}\r\n\r\ndamage-block .wound-type:nth-child(1) {\r\n    display: inline-block;\r\n    margin-left: 0;\r\n}\r\n",""]);const a=o},1459:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"fatigue-block {\r\n    display: block;\r\n    margin: 30px;\r\n    min-width: 280px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nfatigue-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nfatigue-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\nfatigue-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nfatigue-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nfatigue-block radio-button {\r\n    margin-left: 5px;\r\n}",""]);const a=o},6964:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,'lab-modifications-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    min-width: 845px;\r\n    float: left;\r\n}\r\n\r\nlab-modifications-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-modifications-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nlab-modifications-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-modifications-list .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .container > .title {\r\n    display: block;\r\n    margin-top: 30px;\r\n}\r\n\r\nlab-modifications-list .grid > .name {\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .grid > .category {\r\n    width: 100px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .grid > .description {\r\n    width: 400px;\r\n}\r\n\r\nlab-modifications-list .add-item-input.add-modifier-input {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: -15px;\r\n    width: 60px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .modifier-titles {\r\n    position: absolute;\r\n    right: 32px;\r\n    top: 40px;\r\n}\r\n\r\nlab-modifications-list .modifier-title {\r\n    font-size: 9px;\r\n    display: inline-block;\r\n    width: 33px;\r\n    margin: 2px;\r\n    text-align: center;\r\n    font-family: "Eagle Lake", cursive;\r\n    border-bottom: none;\r\n    padding: 0px;\r\n    font-weight: unset;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nlab-modifications-list .modifier-totals {\r\n    position: absolute;\r\n    right: 30px;\r\n    bottom: 20px;\r\n}\r\n\r\nlab-modifications-list .modifier-total {\r\n    font-size: 16px;\r\n    display: inline-block;\r\n    width: 33px;\r\n    margin: 2px;\r\n    text-align: center;\r\n}',""]);const a=o},8412:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"lab-stats {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 1500px;\r\n    float: left;\r\n}\r\n\r\nlab-stats > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-stats > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr 1fr;\r\n}\r\n\r\nlab-stats > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-stats > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nlab-stats .modifier-selector {\r\n    text-align: center;\r\n    width: 100px;\r\n}",""]);const a=o},3349:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"notes-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 800px;\r\n    float: left;\r\n}\r\n\r\nnotes-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nnotes-block text-box textarea {\r\n    height: 1200px;\r\n}",""]);const a=o},5555:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"personality-traits-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\npersonality-traits-list > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\npersonality-traits-list .add-item-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\npersonality-traits-list primary-stat {\r\n    margin-left: 10px;;\r\n}",""]);const a=o},4467:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"research-projects {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 1969px;\r\n    float: left;\r\n}\r\n\r\nresearch-projects > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nresearch-projects .aura-bonus {\r\n    display: block;\r\n}\r\n\r\nresearch-projects .add-item-input {\r\n    margin-top: 15px;\r\n    width: 250px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nresearch-projects > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nresearch-projects > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nresearch-projects .description {\r\n    width: 600px;\r\n    margin-left: 40px !important;\r\n    text-overflow: ellipsis;\r\n}\r\nresearch-projects .arts, research-projects .prerequisites {\r\n    width: 50px;\r\n    text-align: center;\r\n}\r\nresearch-projects .level {\r\n    margin-right: 40px !important;\r\n}\r\n\r\nresearch-projects .material, research-projects .shape {\r\n    width: 150px;\r\n    text-align: center;\r\n}\r\n\r\nresearch-projects .total {\r\n    margin-left: 40px !important;\r\n}",""]);const a=o},7266:(t,e,i)=>{i.d(e,{Z:()=>f});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r),a=i(1667),l=i.n(a),c=new URL(i(9462),i.b),h=new URL(i(3082),i.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"sigil {\r\n    display: block;\r\n    height: auto;\r\n    float: left;\r\n}\r\n\r\nsigil > .container {\r\n    width: 130px;\r\n    height: 130px;\r\n    background-size: contain;\r\n    background-image: url("+d+");\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nsigil > .container .sigil-image-placeholder {\r\n    width: 70px;\r\n    height: 35px;\r\n    background-size: contain;\r\n    background-image: url("+p+");\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container .sigil-image {\r\n    width: 70px;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\nsigil > .container.active-drag {\r\n    opacity: 0.6;\r\n}",""]);const f=u},7624:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"spell-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nspell-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-list .add-item-input {\r\n    margin-top: 15px;\r\n    width: 300px;\r\n    border-bottom-style: dashed;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-list  > .container > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-list .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-list .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-list .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-list .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-list .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-list .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-list .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-list .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-list .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-list .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-list .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-list .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #bbb;\r\n}\r\n\r\nspell-list .co-form ~ .co-form .form-header::before,\r\nspell-list .an-form ~ .an-form .form-header::before,\r\nspell-list .au-form ~ .au-form .form-header::before,\r\nspell-list .aq-form ~ .aq-form .form-header::before,\r\nspell-list .he-form ~ .he-form .form-header::before,\r\nspell-list .vi-form ~ .vi-form .form-header::before,\r\nspell-list .te-form ~ .te-form .form-header::before,\r\nspell-list .ig-form ~ .ig-form .form-header::before,\r\nspell-list .me-form ~ .me-form .form-header::before,\r\nspell-list .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}",""]);const a=o},2244:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"spellcasting-modifiers-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: 1000px;\r\n    float: left;\r\n}\r\n\r\nspellcasting-modifiers-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid .arts {\r\n    width: 60px;\r\n    text-align: center;\r\n}",""]);const a=o},2410:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"warping-block {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n    width: 420px;\r\n}\r\n\r\nwarping-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nwarping-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nwarping-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nwarping-block .warping-level {\r\n    text-align: center;\r\n}\r\n\r\nwarping-block .add-effect-input {\r\n    margin-top: 15px;\r\n    border-bottom-style: dashed;\r\n}",""]);const a=o},8840:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(8081),s=i.n(n),r=i(3645),o=i.n(r)()(s());o.push([t.id,"xp-list {\r\n    display: block;\r\n    margin: 30px;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nxp-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nxp-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 70px 100px auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nxp-list > .container > .grid.past-xp-entry {\r\n    grid-template-columns: 70px 100px auto auto auto auto;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n}\r\n\r\nxp-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nxp-list .description, xp-list .plans {\r\n    width: 400px;\r\n}\r\n\r\nxp-list .xp {\r\n    width: 600px;\r\n}\r\n\r\nxp-list .correspondence, xp-list .area-lore  {\r\n    width: 150px;\r\n}\r\n\r\nxp-list .separator {\r\n    height: 40px;\r\n}",""]);const a=o},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",n=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),n&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),n&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,n,s,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(n)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);n&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},1667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:t=>{t.exports=function(t){return t[1]}},3379:t=>{var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var r={},o=[],a=0;a<t.length;a++){var l=t[a],c=n.base?l[0]+n.base:l[0],h=r[c]||0,u="".concat(c," ").concat(h);r[c]=h+1;var d=i(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=s(p,n);n.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function s(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,s){var r=n(t=t||[],s=s||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=i(r[o]);e[a].references--}for(var l=n(t,s),c=0;c<r.length;c++){var h=i(r[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=l}}},569:t=>{var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,s&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},8390:(t,e,i)=>{t.exports=i.p+"3747d62d05f8f09fb741.png"},3208:(t,e,i)=>{t.exports=i.p+"b037ca7f505f5c048bae.png"},164:(t,e,i)=>{t.exports=i.p+"5c3d1b2ce7bb3793be6e.png"},2:(t,e,i)=>{t.exports=i.p+"2b9f9a8912419b0f4b69.png"},2867:(t,e,i)=>{t.exports=i.p+"fe3a2cf273f4367e50c9.png"},3473:(t,e,i)=>{t.exports=i.p+"60e08010af0453fec957.png"},9462:(t,e,i)=>{t.exports=i.p+"c945e6443b532c587958.png"},8801:(t,e,i)=>{t.exports=i.p+"8a70e34efeda3124235b.png"},3082:(t,e,i)=>{t.exports=i.p+"dd674023209c7164b31e.png"},7283:(t,e,i)=>{t.exports=i.p+"33cbb501e4e522021025.png"},1668:(t,e,i)=>{t.exports=i.p+"92bd8516e50642f8233a.png"},3356:(t,e,i)=>{t.exports=i.p+"5bd76dab3a9d835f39f2.png"},8626:(t,e,i)=>{t.exports=i.p+"ec6a054a75f35ddbe8db.png"},4378:(t,e,i)=>{t.exports=i.p+"4a319709cc0699c694dc.png"}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={id:n,exports:{}};return t[n](r,r.exports,i),r.exports}i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.p="/sheet-maker/",i.b=document.baseURI||self.location.href,i.nc=void 0,(()=>{var t={};i.r(t),i.d(t,{default:()=>WL,dependencies:()=>KL,name:()=>zL,register:()=>_L,template:()=>qL});var e={};i.r(e),i.d(e,{RadioButton:()=>GL});var n={};i.r(n),i.d(n,{default:()=>JL,dependencies:()=>tM,name:()=>XL,register:()=>iM,template:()=>YL});var s={};i.r(s),i.d(s,{CharacterTypeSelector:()=>qM});var r={};i.r(r),i.d(r,{default:()=>QM,dependencies:()=>GM,name:()=>ZM,register:()=>YM,template:()=>_M});var o={};i.r(o),i.d(o,{RuneEdge:()=>JM});var a={};i.r(a),i.d(a,{default:()=>hj,dependencies:()=>uj,name:()=>lj,register:()=>pj,template:()=>cj});var l={};i.r(l),i.d(l,{Title:()=>fj});var c={};i.r(c),i.d(c,{default:()=>yj,dependencies:()=>wj,name:()=>mj,register:()=>kj,template:()=>bj});var h={};i.r(h),i.d(h,{Footer:()=>Sj});var u={};i.r(u),i.d(u,{default:()=>$j,dependencies:()=>Ej,name:()=>Cj,register:()=>Rj,template:()=>Aj});var d={};i.r(d),i.d(d,{TextBox:()=>Ij});var p={};i.r(p),i.d(p,{default:()=>Lj,dependencies:()=>Mj,name:()=>Oj,register:()=>Uj,template:()=>Pj});var f={};i.r(f),i.d(f,{NotesBlock:()=>Bj});var v={};i.r(v),i.d(v,{default:()=>Hj,dependencies:()=>zj,name:()=>Fj,register:()=>Wj,template:()=>Dj});var g={};i.r(g),i.d(g,{BackgroundBlock:()=>Kj});var m={};i.r(m),i.d(m,{default:()=>Qj,dependencies:()=>Gj,name:()=>Zj,register:()=>Yj,template:()=>_j});var b={};i.r(b),i.d(b,{Notes:()=>Jj});var y={};i.r(y),i.d(y,{default:()=>iU,dependencies:()=>nU,name:()=>tU,register:()=>rU,template:()=>eU});var w={};i.r(w),i.d(w,{PageHeader:()=>oU});var x={};i.r(x),i.d(x,{default:()=>cU,dependencies:()=>hU,name:()=>aU,register:()=>dU,template:()=>lU});var k={};i.r(k),i.d(k,{DescriptionBlock:()=>pU});var S={};i.r(S),i.d(S,{default:()=>bU,dependencies:()=>yU,name:()=>gU,register:()=>xU,template:()=>mU});var C={};i.r(C),i.d(C,{List:()=>kU});var A={};i.r(A),i.d(A,{default:()=>AU,dependencies:()=>$U,name:()=>SU,register:()=>TU,template:()=>CU});var $={};i.r($),i.d($,{VirtuesList:()=>RU});var E={};i.r(E),i.d(E,{default:()=>PU,dependencies:()=>LU,name:()=>IU,register:()=>jU,template:()=>OU});var T={};i.r(T),i.d(T,{FlawsList:()=>UU});var R={};i.r(R),i.d(R,{default:()=>zU,dependencies:()=>qU,name:()=>DU,register:()=>KU,template:()=>HU});var I={};i.r(I),i.d(I,{PrimaryStat:()=>ZU});var O={};i.r(O),i.d(O,{default:()=>GU,dependencies:()=>XU,name:()=>_U,register:()=>JU,template:()=>QU});var P={};i.r(P),i.d(P,{PersonalityTraitsList:()=>tB});var L={};i.r(L),i.d(L,{default:()=>rB,dependencies:()=>oB,name:()=>nB,register:()=>lB,template:()=>sB});var M={};i.r(M),i.d(M,{WarpingBlock:()=>cB});var j={};i.r(j),i.d(j,{default:()=>dB,dependencies:()=>pB,name:()=>hB,register:()=>vB,template:()=>uB});var U={};i.r(U),i.d(U,{Description:()=>gB});var B={};i.r(B),i.d(B,{default:()=>SB,dependencies:()=>CB,name:()=>xB,register:()=>$B,template:()=>kB});var N={};i.r(N),i.d(N,{Checkbox:()=>EB});var V={};i.r(V),i.d(V,{default:()=>IB,dependencies:()=>OB,name:()=>TB,register:()=>LB,template:()=>RB});var F={};i.r(F),i.d(F,{AbilitiesBlock:()=>MB});var D={};i.r(D),i.d(D,{default:()=>VB,dependencies:()=>FB,name:()=>BB,register:()=>HB,template:()=>NB});var H={};i.r(H),i.d(H,{CharacteristicsBlock:()=>zB});var z={};i.r(z),i.d(z,{default:()=>_B,dependencies:()=>QB,name:()=>KB,register:()=>XB,template:()=>ZB});var q={};i.r(q),i.d(q,{FatigueBlock:()=>YB});var W={};i.r(W),i.d(W,{default:()=>nN,dependencies:()=>sN,name:()=>eN,register:()=>oN,template:()=>iN});var K={};i.r(K),i.d(K,{DamageBlock:()=>aN});var Z={};i.r(Z),i.d(Z,{default:()=>dN,dependencies:()=>pN,name:()=>hN,register:()=>vN,template:()=>uN});var _={};i.r(_),i.d(_,{ConfidenceBlock:()=>gN});var Q={};i.r(Q),i.d(Q,{default:()=>xN,dependencies:()=>kN,name:()=>yN,register:()=>CN,template:()=>wN});var G={};i.r(G),i.d(G,{ActiveMagicList:()=>AN});var X={};i.r(X),i.d(X,{default:()=>TN,dependencies:()=>RN,name:()=>$N,register:()=>ON,template:()=>EN});var Y={};i.r(Y),i.d(Y,{Stats:()=>PN});var J={};i.r(J),i.d(J,{default:()=>BN,dependencies:()=>NN,name:()=>jN,register:()=>FN,template:()=>UN});var tt={};i.r(tt),i.d(tt,{ArtsBlock:()=>DN});var et={};i.r(et),i.d(et,{default:()=>KN,dependencies:()=>ZN,name:()=>qN,register:()=>QN,template:()=>WN});var it={};i.r(it),i.d(it,{SpellcastingModifiersBlock:()=>GN});var nt={};i.r(nt),i.d(nt,{default:()=>eV,dependencies:()=>iV,name:()=>JN,register:()=>sV,template:()=>tV});var st={};i.r(st),i.d(st,{SpellList:()=>rV});var rt={};i.r(rt),i.d(rt,{default:()=>hV,dependencies:()=>uV,name:()=>lV,register:()=>pV,template:()=>cV});var ot={};i.r(ot),i.d(ot,{Sigil:()=>fV});var at={};i.r(at),i.d(at,{default:()=>mV,dependencies:()=>bV,name:()=>vV,register:()=>wV,template:()=>gV});var lt={};i.r(lt),i.d(lt,{Magic:()=>xV});var ct={};i.r(ct),i.d(ct,{default:()=>$V,dependencies:()=>EV,name:()=>CV,register:()=>RV,template:()=>AV});var ht={};i.r(ht),i.d(ht,{LabStats:()=>IV});var ut={};i.r(ut),i.d(ut,{default:()=>jV,dependencies:()=>UV,name:()=>LV,register:()=>NV,template:()=>MV});var dt={};i.r(dt),i.d(dt,{ResearchProjects:()=>VV});var pt={};i.r(pt),i.d(pt,{default:()=>qV,dependencies:()=>WV,name:()=>HV,register:()=>ZV,template:()=>zV});var ft={};i.r(ft),i.d(ft,{LabModificationsList:()=>_V});var vt={};i.r(vt),i.d(vt,{default:()=>XV,dependencies:()=>YV,name:()=>QV,register:()=>tF,template:()=>GV});var gt={};i.r(gt),i.d(gt,{Lab:()=>eF});var mt={};i.r(mt),i.d(mt,{default:()=>sF,dependencies:()=>rF,name:()=>iF,register:()=>aF,template:()=>nF});var bt={};i.r(bt),i.d(bt,{Gear:()=>lF});var yt={};i.r(yt),i.d(yt,{default:()=>pF,dependencies:()=>fF,name:()=>uF,register:()=>gF,template:()=>dF});var wt={};i.r(wt),i.d(wt,{XpList:()=>mF});var xt={};i.r(xt),i.d(xt,{default:()=>kF,dependencies:()=>SF,name:()=>wF,register:()=>AF,template:()=>xF});var kt={};i.r(kt),i.d(kt,{AgeBlock:()=>$F});var St={};i.r(St),i.d(St,{default:()=>RF,dependencies:()=>IF,name:()=>EF,register:()=>PF,template:()=>TF});var Ct={};i.r(Ct),i.d(Ct,{Progression:()=>LF});var At={};function $t(t){return"object"==typeof t&&null!==t||"function"==typeof t}function Et(t){return null==t}i.r(At),i.d(At,{default:()=>UF,dependencies:()=>BF,name:()=>MF,register:()=>VF,template:()=>jF});let Tt=new WeakMap;function Rt(t,e,i,n,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${i}' to be of type ${s}, but got: ${Object.prototype.toString.call(n)} (${String(n)})`)}function It(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function Ot(t,e,i){let n=Tt.get(t);if(void 0===n){if(!i)return;n=new Map,Tt.set(t,n)}let s=n.get(e);if(void 0===s){if(!i)return;s=new Map,n.set(e,s)}return s}function Pt(t,e,i){const n=Ot(e,i,!1);return void 0!==n&&n.has(t)}function Lt(t,e,i){if(Pt(t,e,i))return!0;const n=Object.getPrototypeOf(e);return null!==n&&Lt(t,n,i)}function Mt(t,e,i){const n=Ot(e,i,!1);if(void 0!==n)return n.get(t)}function jt(t,e,i){if(Pt(t,e,i))return Mt(t,e,i);const n=Object.getPrototypeOf(e);return null!==n?jt(t,n,i):void 0}function Ut(t,e,i,n){Ot(i,n,!0).set(t,e)}function Bt(t,e){const i=[],n=Ot(t,e,!1);if(void 0===n)return i;const s=n.keys();let r=0;for(const t of s)i[r]=t,++r;return i}function Nt(t,e){const i=Bt(t,e),n=Object.getPrototypeOf(t);if(null===n)return i;const s=Nt(n,e),r=i.length;if(0===r)return s;const o=s.length;if(0===o)return i;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=i[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}function Vt(t,e){return function(i,n){if(!$t(i))throw Rt("@metadata",[t,e,i,n],"target",i,"Object or Function");Ut(t,e,i,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(n))}}function Ft(t,e,i,n){if(void 0!==i){if(!Array.isArray(t))throw Rt("Metadata.decorate",[t,e,i,n],"decorators",t,"Array");if(!$t(e))throw Rt("Metadata.decorate",[t,e,i,n],"target",e,"Object or Function");if(!$t(n)&&!Et(n))throw Rt("Metadata.decorate",[t,e,i,n],"attributes",n,"Object, Function, null, or undefined");return null===n&&(n=void 0),function(t,e,i,n){for(let s=t.length-1;s>=0;--s){const r=(0,t[s])(e,i,n);if(!Et(r)){if(!$t(r))throw Rt("DecorateProperty",[t,e,i,n],"decorated",r,"Object, Function, null, or undefined");n=r}}return n}(t,e,i=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(i),n)}if(!Array.isArray(t))throw Rt("Metadata.decorate",[t,e,i,n],"decorators",t,"Array");if("function"!=typeof e)throw Rt("Metadata.decorate",[t,e,i,n],"target",e,"Function");return function(t,e){for(let i=t.length-1;i>=0;--i){const n=(0,t[i])(e);if(!Et(n)){if("function"!=typeof n)throw Rt("DecorateConstructor",[t,e],"decorated",n,"Function, null, or undefined");e=n}}return e}(t,e)}function Dt(t,e,i,n){if(!$t(i))throw Rt("Metadata.define",[t,e,i,n],"target",i,"Object or Function");return Ut(t,e,i,It(n))}function Ht(t,e,i){if(!$t(e))throw Rt("Metadata.has",[t,e,i],"target",e,"Object or Function");return Lt(t,e,It(i))}function zt(t,e,i){if(!$t(e))throw Rt("Metadata.hasOwn",[t,e,i],"target",e,"Object or Function");return Pt(t,e,It(i))}function qt(t,e,i){if(!$t(e))throw Rt("Metadata.get",[t,e,i],"target",e,"Object or Function");return jt(t,e,It(i))}function Wt(t,e,i){if(!$t(e))throw Rt("Metadata.getOwn",[t,e,i],"target",e,"Object or Function");return Mt(t,e,It(i))}function Kt(t,e){if(!$t(t))throw Rt("Metadata.getKeys",[t,e],"target",t,"Object or Function");return Nt(t,It(e))}function Zt(t,e){if(!$t(t))throw Rt("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return Bt(t,It(e))}function _t(t,e,i){if(!$t(e))throw Rt("Metadata.delete",[t,e,i],"target",e,"Object or Function");return function(t,e,i){const n=Ot(t,i,!1);return void 0!==n&&n.delete(e)}(e,t,It(i))}const Qt={define:Dt,has:Ht,hasOwn:zt,get:qt,getOwn:Wt,getKeys:Kt,getOwnKeys:Zt,delete:_t};function Gt(t,e,i,n,s){if(!Reflect.defineProperty(t,e,{writable:n,enumerable:!1,configurable:s,value:i}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}const Xt="[[$au]]";function Yt(t,e,i){Gt(t,Xt,Tt,e,i),Gt(t,"metadata",Vt,e,i),Gt(t,"decorate",Ft,e,i),Gt(t,"defineMetadata",Dt,e,i),Gt(t,"hasMetadata",Ht,e,i),Gt(t,"hasOwnMetadata",zt,e,i),Gt(t,"getMetadata",qt,e,i),Gt(t,"getOwnMetadata",Wt,e,i),Gt(t,"getMetadataKeys",Kt,e,i),Gt(t,"getOwnMetadataKeys",Zt,e,i),Gt(t,"deleteMetadata",_t,e,i)}const Jt=Qt.getOwn,te=Qt.hasOwn,ee=Qt.define,ie=t=>"function"==typeof t,ne=t=>"string"==typeof t,se=()=>Object.create(null),re={};function oe(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=re[t];if(void 0!==e)return e;const i=t.length;if(0===i)return re[t]=!1;let n=0,s=0;for(;s<i;++s)if(n=t.charCodeAt(s),0===s&&48===n&&i>1||n<48||n>57)return re[t]=!1;return re[t]=!0}default:return!1}}function ae(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function le(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const ce=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(se(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function i(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const n=t.length;if(0===n)return t;let s,r=!1,o="",a="",l=0,c=t.charAt(0),h=i(c),u=0;for(;u<n;++u)s=l,a=c,l=h,c=t.charAt(u+1),h=i(c),0===l?o.length>0&&(r=!0):(!r&&o.length>0&&2===l&&(r=3===s||3===h),o+=e(a,r),r=!1);return o}}(),he=function(){const t=se();function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(i){let n=t[i];return void 0===n&&(n=t[i]=ce(i,e)),n}}(),ue=function(){const t=se();return function(e){let i=t[e];return void 0===i&&(i=he(e),i.length>0&&(i=i[0].toUpperCase()+i.slice(1)),t[e]=i),i}}(),de=function(){const t=se();function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(i){let n=t[i];return void 0===n&&(n=t[i]=ce(i,e)),n}}();function pe(t){const{length:e}=t,i=Array(e);let n=0;for(;n<e;++n)i[n]=t[n];return i}const fe={};function ve(t){return void 0===fe[t]&&(fe[t]=0),++fe[t]}function ge(t,e){return t-e}function me(t,e,i){return{configurable:!0,enumerable:i.enumerable,get(){const t=i.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:i.enumerable}),t}}}function be(...t){const e=[];let i=0;const n=t.length;let s,r=0,o=0;for(;o<n;++o)if(s=t[o],void 0!==s){r=s.length;let t=0;for(;t<r;++t)e[i++]=s[t]}return e}function ye(...t){const e=t.length;let i,n=0;for(;e>n;++n)if(i=t[n],void 0!==i)return i;throw new Error("No default value found")}const we=function(){const t=Function.prototype,e=Object.getPrototypeOf,i=new WeakMap;let n,s=t,r=0;return function(o){if(n=i.get(o),void 0===n)for(i.set(o,n=[s=o]),r=0;(s=e(s))!==t;)n[++r]=s;return n}}();function xe(...t){return Object.assign(se(),...t)}const ke=function(){const t=new WeakMap;let e=!1,i="",n=0;return function(s){return e=t.get(s),void 0===e&&(i=s.toString(),n=i.length,e=n>=29&&n<=100&&125===i.charCodeAt(n-1)&&i.charCodeAt(n-2)<=32&&93===i.charCodeAt(n-3)&&101===i.charCodeAt(n-4)&&100===i.charCodeAt(n-5)&&111===i.charCodeAt(n-6)&&99===i.charCodeAt(n-7)&&32===i.charCodeAt(n-8)&&101===i.charCodeAt(n-9)&&118===i.charCodeAt(n-10)&&105===i.charCodeAt(n-11)&&116===i.charCodeAt(n-12)&&97===i.charCodeAt(n-13)&&110===i.charCodeAt(n-14)&&88===i.charCodeAt(n-15),t.set(s,e)),e}}();function Se(t,e){return t instanceof Promise?t.then(e):e(t)}function Ce(...t){let e,i,n,s=0,r=t.length;for(;s<r;++s)e=t[s],(e=t[s])instanceof Promise&&(void 0===i?i=e:void 0===n?n=[i,e]:n.push(e));return void 0===n?i:Promise.all(n)}const Ae="au:annotation",$e=(t,e)=>void 0===e?`${Ae}:${t}`:`${Ae}:${t}:${e}`,Ee=(t,e)=>{const i=Jt(Ae,t);void 0===i?ee(Ae,[e],t):i.push(e)},Te=Object.freeze({name:"au:annotation",appendTo:Ee,set(t,e,i){ee($e(e),i,t)},get:(t,e)=>Jt($e(e),t),getKeys(t){let e=Jt(Ae,t);return void 0===e&&ee(Ae,e=[],t),e},isKey:t=>t.startsWith(Ae),keyFor:$e}),Re="au:resource",Ie=Object.freeze({name:Re,appendTo(t,e){const i=Jt(Re,t);void 0===i?ee(Re,[e],t):i.push(e)},has:t=>te(Re,t),getAll(t){const e=Jt(Re,t);return void 0===e?wi:e.map((e=>Jt(e,t)))},getKeys(t){let e=Jt(Re,t);return void 0===e&&ee(Re,e=[],t),e},isKey:t=>t.startsWith(Re),keyFor:(t,e)=>void 0===e?`${Re}:${t}`:`${Re}:${t}:${e}`}),Oe={annotation:Te,resource:Ie},Pe=Object.prototype.hasOwnProperty;function Le(t,e,i,n){let s=Jt($e(t),i);return void 0===s?(s=e[t],void 0===s?(s=i[t],void 0!==s&&Pe.call(i,t)?s:n()):s):s}function Me(t,e,i){let n=Jt($e(t),e);return void 0===n?(n=e[t],void 0!==n&&Pe.call(e,t)?n:i()):n}function je(t,e,i){const n=e[t];return void 0===n?i():n}!function(t,e=!0,i=!1,n=!0,s=!0){if(function(t){return Xt in t}(t)){if(t[Xt]===Tt)return;if(t[Xt]instanceof WeakMap)return void(Tt=t[Xt]);throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const r=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`)}i&&Yt(t,n,s)}else Yt(t,n,s)}(Reflect,!1,!1);class Ue{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,fi(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:i,key:n}=this;return this.container=this.key=void 0,i.registerResolver(n,new ei(n,t,e))}}function Be(t){const e=t.slice(),i=Object.keys(t),n=i.length;let s;for(let r=0;r<n;++r)s=i[r],oe(s)||(e[s]=t[s]);return e}const Ne={none(t){throw Error(`AUR0002:${t.toString()}`)},singleton:t=>new ei(t,1,t),transient:t=>new ei(t,2,t)};class Ve{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){var e,i;return void 0===t||t===Ve.DEFAULT?Ve.DEFAULT:new Ve(null!==(e=t.inheritParentResources)&&void 0!==e&&e,null!==(i=t.defaultResolver)&&void 0!==i?i:Ne.singleton)}}Ve.DEFAULT=Ve.from({});const Fe={createContainer:t=>new ui(null,Ve.from(t)),getDesignParamtypes:t=>Jt("design:paramtypes",t),getAnnotationParamtypes(t){const e=$e("di:paramtypes");return Jt(e,t)},getOrCreateAnnotationParamTypes:He,getDependencies:De,createInterface(t,e){const i=ie(t)?t:e,n=ne(t)?t:void 0,s=function(t,e,i){if(null==t||void 0!==new.target)throw new Error(`AUR0001:${s.friendlyName}`);He(t)[i]=s};return s.$isInterface=!0,s.friendlyName=null==n?"(anonymous)":n,null!=i&&(s.register=function(t,e){return i(new Ue(t,null!=e?e:s))}),s.toString=function(){return`InterfaceSymbol<${s.friendlyName}>`},s},inject:(...t)=>function(e,i,n){if("number"==typeof n){const i=He(e),s=t[0];void 0!==s&&(i[n]=s)}else if(i){const n=He(e.constructor),s=t[0];void 0!==s&&(n[i]=s)}else if(n){const e=He(n.value);let i;for(let n=0;n<t.length;++n)i=t[n],void 0!==i&&(e[n]=i)}else{const i=He(e);let n;for(let e=0;e<t.length;++e)n=t[e],void 0!==n&&(i[e]=n)}},transient:t=>(t.register=function(e){return vi.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=_e)=>(t.register=function(e){return vi.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)};function De(t){const e=$e("di:dependencies");let i=Jt(e,t);if(void 0===i){const n=t.inject;if(void 0===n){const e=Fe.getDesignParamtypes(t),n=Fe.getAnnotationParamtypes(t);if(void 0===e)if(void 0===n){const e=Object.getPrototypeOf(t);i=ie(e)&&e!==Function.prototype?Be(De(e)):[]}else i=Be(n);else if(void 0===n)i=Be(e);else{i=Be(e);let t,s=n.length,r=0;for(;r<s;++r)t=n[r],void 0!==t&&(i[r]=t);const o=Object.keys(n);let a;for(r=0,s=o.length,r=0;r<s;++r)a=o[r],oe(a)||(i[a]=n[a])}}else i=Be(n);ee(e,i,t),Ee(t,e)}return i}function He(t){const e=$e("di:paramtypes");let i=Jt(e,t);return void 0===i&&(ee(e,i=[],t),Ee(t,e)),i}const ze=Fe.createInterface("IContainer"),qe=ze;function We(t){return function(e){const i=function(t,e,n){Fe.inject(i)(t,e,n)};return i.$isResolver=!0,i.resolve=function(i,n){return t(e,i,n)},i}}function Ke(t){return Fe.transient(t)}function Ze(t){return null==t?Ke:Ke(t)}Fe.inject;const _e={scoped:!1},Qe=function(t,e){e=!!e;const i=function(t,e,n){Fe.inject(i)(t,e,n)};return i.$isResolver=!0,i.resolve=function(i,n){return((t,e,i,n)=>i.getAll(t,n))(t,0,n,e)},i},Ge=(We(((t,e,i)=>()=>i.get(t))),We(((t,e,i)=>i.has(t,!0)?i.get(t):void 0)));function Xe(t,e,i){Fe.inject(Xe)(t,e,i)}function Ye(t,e,i){return e.getFactory(t).construct(i)}var Je,ti;Xe.$isResolver=!0,Xe.resolve=()=>{},We(((t,e,i)=>(...n)=>e.getFactory(t).construct(i,n))),We(((t,e,i)=>{const n=Ye(t,e,i),s=new gi(String(t),n);return i.registerResolver(t,s,!0),n})),We(((t,e,i)=>Ye(t,e,i))),(ti=Je||(Je={}))[ti.instance=0]="instance",ti[ti.singleton=1]="singleton",ti[ti.transient=2]="transient",ti[ti.callback=3]="callback",ti[ti.array=4]="array",ti[ti.alias=5]="alias";class ei{constructor(t,e,i){this.key=t,this.strategy=e,this.state=i,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`AUR0003:${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const i=t.getFactory(this.state);if(null===i)throw new Error(`AUR0004:${String(this.key)}`);return i.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`AUR0005:${this.strategy}`)}}getFactory(t){var e,i,n;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(n=null===(i=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===i?void 0:i.call(e,t))&&void 0!==n?n:null;default:return null}}}function ii(t){return this.get(t)}function ni(t,e){return e(t)}class si{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let i;return i=void 0===e?new this.Type(...this.dependencies.map(ii,t)):new this.Type(...this.dependencies.map(ii,t),...e),null==this.transformers?i:this.transformers.reduce(ni,i)}registerTransformer(t){var e;(null!==(e=this.transformers)&&void 0!==e?e:this.transformers=[]).push(t)}}const ri={$isResolver:!0,resolve:(t,e)=>e};function oi(t){return ie(t.register)}function ai(t){return function(t){return oi(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}function li(t){return void 0!==t.prototype}const ci=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]);let hi=0;class ui{constructor(t,e){this.parent=t,this.config=e,this.id=++hi,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=se()):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign(se(),t.res,this.root.res):this.res=se()),this.u.set(ze,ri)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw new Error(`AUR0006:${t.map(String)}`);let e,i,n,s,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],$t(e))if(oi(e))e.register(this);else if(Oe.resource.has(e)){const t=Oe.resource.getAll(e);if(1===t.length)t[0].register(this);else for(s=0,r=t.length;r>s;)t[s].register(this),++s}else if(li(e))vi.singleton(e,e).register(this);else for(i=Object.keys(e),s=0,r=i.length;s<r;++s)n=e[i[s]],$t(n)&&(oi(n)?n.register(this):this.register(n));return--this.t,this}registerResolver(t,e,i=!1){mi(t);const n=this.u,s=n.get(t);if(null==s){if(n.set(t,e),function(t){return ne(t)&&t.indexOf(":")>0}(t)){if(void 0!==this.res[t])throw new Error(`AUR0007:${t}`);this.res[t]=e}}else s instanceof ei&&4===s.strategy?s.state.push(e):n.set(t,new ei(t,4,[s,e]));return i&&this.i.set(t,e),e}registerTransformer(t,e){const i=this.getResolver(t);if(null==i)return!1;if(i.getFactory){const t=i.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(mi(t),void 0!==t.resolve)return t;let i,n=this;for(;null!=n;){if(i=n.u.get(t),null!=i)return i;if(null==n.parent){const i=ai(t)?this:n;return e?this.R(t,i):null}n=n.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(mi(t),t.$isResolver)return t.resolve(this,this);let e,i=this;for(;null!=i;){if(e=i.u.get(t),null!=e)return e.resolve(i,this);if(null==i.parent){const n=ai(t)?this:i;return e=this.R(t,n),e.resolve(i,this)}i=i.parent}throw new Error(`AUR0008:${String(t)}`)}getAll(t,e=!1){mi(t);const i=this;let n,s=i;if(e){let e=wi;for(;null!=s;)n=s.u.get(t),null!=n&&(e=e.concat(bi(n,s,i))),s=s.parent;return e}for(;null!=s;){if(n=s.u.get(t),null!=n)return bi(n,s,i);if(s=s.parent,null==s)return wi}return wi}invoke(t,e){if(ke(t))throw yi(t);return void 0===e?new t(...De(t).map(ii,this)):new t(...De(t).map(ii,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(ke(t))throw yi(t);this.h.set(t,e=new si(t,De(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===Ve.DEFAULT?new ui(this,this.config):new ui(this,Ve.from({...this.config,inheritParentResources:!1})):new ui(this,Ve.from(null!=t?t:this.config))}disposeResolvers(){const t=this.u,e=this.i;let i,n;for([n,i]of e.entries())i.dispose(),t.delete(n);e.clear()}find(t,e){const i=t.keyFrom(e);let n=this.res[i];if(void 0===n&&(n=this.root.res[i],void 0===n))return null;if(null===n)return null;if(ie(n.getFactory)){const e=n.getFactory(this);if(null==e)return null;const i=Jt(t.name,e.Type);return void 0===i?null:i}return null}create(t,e){var i,n;const s=t.keyFrom(e);let r=this.res[s];return void 0===r?(r=this.root.res[s],void 0===r?null:null!==(i=r.resolve(this.root,this))&&void 0!==i?i:null):null!==(n=r.resolve(this,this))&&void 0!==n?n:null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}R(t,e){if(!ie(t))throw new Error(`AUR0009:${t}`);if(ci.has(t.name))throw new Error(`AUR0010:${t.name}`);if(oi(t)){const i=t.register(e,t);if(!(i instanceof Object)||null==i.resolve){const i=e.u.get(t);if(null!=i)return i;throw new Error("AUR0011")}return i}if(Oe.resource.has(t)){const i=Oe.resource.getAll(t);if(1===i.length)i[0].register(e);else{const t=i.length;for(let n=0;n<t;++n)i[n].register(e)}const n=e.u.get(t);if(null!=n)return n;throw new Error("AUR0011")}if(t.$isInterface)throw new Error(`AUR0012:${t.friendlyName}`);{const i=this.config.defaultResolver(t,e);return e.u.set(t,i),i}}}class di{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const pi=new WeakMap;function fi(t){return function(e,i,n){let s=pi.get(e);if(void 0===s&&pi.set(e,s=new WeakMap),s.has(n))return s.get(n);const r=t(e,i,n);return s.set(n,r),r}}const vi={instance:(t,e)=>new ei(t,0,e),singleton:(t,e)=>new ei(t,1,e),transient:(t,e)=>new ei(t,2,e),callback:(t,e)=>new ei(t,3,e),cachedCallback:(t,e)=>new ei(t,3,fi(e)),aliasTo:(t,e)=>new ei(e,5,t),defer:(t,...e)=>new di(t,e)};class gi{constructor(t,e){this.C=null,this.$=t,void 0!==e&&(this.C=e)}get friendlyName(){return this.$}prepare(t){this.C=t}get $isResolver(){return!0}resolve(){if(null==this.C)throw new Error(`AUR0013:${this.$}`);return this.C}dispose(){this.C=null}}function mi(t){if(null==t)throw new Error("AUR0014")}function bi(t,e,i){if(t instanceof ei&&4===t.strategy){const n=t.state;let s=n.length;const r=new Array(s);for(;s--;)r[s]=n[s].resolve(e,i);return r}return[t.resolve(e,i)]}function yi(t){return new Error(`AUR0015:${t.name}`)}const wi=Object.freeze([]),xi=Object.freeze({});function ki(){}const Si=Fe.createInterface("IPlatform");function Ci(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function Ai(t,e){return function(i,n){e(i,n,t)}}var $i,Ei;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}($i||($i={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Ei||(Ei={}));const Ti=Fe.createInterface("ILogConfig",(t=>t.instance(new ji(0,3)))),Ri=Fe.createInterface("ISink"),Ii=Fe.createInterface("ILogEventFactory",(t=>t.singleton(Vi))),Oi=Fe.createInterface("ILogger",(t=>t.singleton(Di))),Pi=Fe.createInterface("ILogScope"),Li=Object.freeze({key:$e("logger-sink-handles"),define(t,e){return ee(this.key,e.handles,t.prototype),t},getHandles(t){return Qt.get(this.key,t)}}),Mi=xe({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class ji{constructor(t,e){this.colorOptions=t,this.level=e}}const Ui=function(){const t=[xe({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),xe({TRC:Mi.grey("TRC"),DBG:Mi.grey("DBG"),INF:Mi.white("INF"),WRN:Mi.yellow("WRN"),ERR:Mi.red("ERR"),FTL:Mi.red("FTL"),QQQ:Mi.grey("???")})];return function(e,i){return e<=0?t[i].TRC:e<=1?t[i].DBG:e<=2?t[i].INF:e<=3?t[i].WRN:e<=4?t[i].ERR:e<=5?t[i].FTL:t[i].QQQ}}();function Bi(t,e){return 0===e?new Date(t).toISOString():Mi.grey(new Date(t).toISOString())}class Ni{constructor(t,e,i,n,s,r){this.severity=t,this.message=e,this.optionalParams=i,this.scope=n,this.colorOptions=s,this.timestamp=r}toString(){const{severity:t,message:e,scope:i,colorOptions:n,timestamp:s}=this;return 0===i.length?`${Bi(s,n)} [${Ui(t,n)}] ${e}`:`${Bi(s,n)} [${Ui(t,n)} ${function(t,e){return 0===e?t.join("."):t.map(Mi.cyan).join(".")}(i,n)}] ${e}`}}let Vi=class{constructor(t){this.config=t}createLogEvent(t,e,i,n){return new Ni(e,i,n,t.scope,this.config.colorOptions,Date.now())}};Vi=Ci([Ai(0,Ti)],Vi);let Fi=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const i=t.optionalParams;if(void 0===i||0===i.length){const i=t.toString();switch(t.severity){case 0:case 1:return e.debug(i);case 2:return e.info(i);case 3:return e.warn(i);case 4:case 5:return e.error(i)}}else{let n=t.toString(),s=0;for(;n.includes("%s");)n=n.replace("%s",String(i[s++]));switch(t.severity){case 0:case 1:return e.debug(n,...i.slice(s));case 2:return e.info(n,...i.slice(s));case 3:return e.warn(n,...i.slice(s));case 4:case 5:return e.error(n,...i.slice(s))}}}}static register(e){vi.singleton(Ri,t).register(e)}};Fi=Ci([Ai(0,Si)],Fi);let Di=class t{constructor(t,e,i,n=[],s=null){var r,o,a,l,c,h;let u,d,p,f,v,g;if(this.config=t,this.factory=e,this.scope=n,this.scopedLoggers=se(),null===s){this.root=this,this.parent=this,u=this.traceSinks=[],d=this.debugSinks=[],p=this.infoSinks=[],f=this.warnSinks=[],v=this.errorSinks=[],g=this.fatalSinks=[];for(const t of i){const e=Li.getHandles(t);(null===(r=null==e?void 0:e.includes(0))||void 0===r||r)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&d.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&p.push(t),(null===(l=null==e?void 0:e.includes(3))||void 0===l||l)&&f.push(t),(null===(c=null==e?void 0:e.includes(4))||void 0===c||c)&&v.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&g.push(t)}}else this.root=s.root,this.parent=s,u=this.traceSinks=s.traceSinks,d=this.debugSinks=s.debugSinks,p=this.infoSinks=s.infoSinks,f=this.warnSinks=s.warnSinks,v=this.errorSinks=s.errorSinks,g=this.fatalSinks=s.fatalSinks}trace(t,...e){this.config.level<=0&&this.emit(this.traceSinks,0,t,e)}debug(t,...e){this.config.level<=1&&this.emit(this.debugSinks,1,t,e)}info(t,...e){this.config.level<=2&&this.emit(this.infoSinks,2,t,e)}warn(t,...e){this.config.level<=3&&this.emit(this.warnSinks,3,t,e)}error(t,...e){this.config.level<=4&&this.emit(this.errorSinks,4,t,e)}fatal(t,...e){this.config.level<=5&&this.emit(this.fatalSinks,5,t,e)}scopeTo(e){const i=this.scopedLoggers;let n=i[e];return void 0===n&&(n=i[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),n}emit(t,e,i,n){const s=ie(i)?i():i,r=this.factory.createLogEvent(this,e,s,n);for(let e=0,i=t.length;e<i;++e)t[e].handleEvent(r)}};function Hi(t){return t}Ci([me],Di.prototype,"trace",null),Ci([me],Di.prototype,"debug",null),Ci([me],Di.prototype,"info",null),Ci([me],Di.prototype,"warn",null),Ci([me],Di.prototype,"error",null),Ci([me],Di.prototype,"fatal",null),Di=Ci([Ai(0,Ti),Ai(1,Ii),Ai(2,Qe(Ri)),Ai(3,Ge(Pi)),Ai(4,Xe)],Di),xe({create:({level:t=3,colorOptions:e=0,sinks:i=[]}={})=>xe({register(n){n.register(vi.instance(Ti,new ji(e,t)));for(const t of i)ie(t)?n.register(vi.singleton(Ri,t)):n.register(t);return n}})}),Fe.createInterface((t=>t.singleton(qi)));class zi{constructor(t){this.$transform=t,this.A=new Map,this.j=new Map}transform(t){if(t instanceof Promise)return this.I(t);if("object"==typeof t&&null!==t)return this.O(t);throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`)}I(t){if(this.A.has(t))return this.A.get(t);const e=t.then((t=>this.O(t)));return this.A.set(t,e),e.then((e=>{this.A.set(t,e)})),e}O(t){if(this.j.has(t))return this.j.get(t);const e=this.$transform(this.M(t));return this.j.set(t,e),e instanceof Promise&&e.then((e=>{this.j.set(t,e)})),e}M(t){let e,i,n,s;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;i=ie(e.register),n=!1,s=wi;break;case"function":i=ie(e.register),n=void 0!==e.prototype,s=Oe.resource.getAll(e);break;default:continue}r.push(new Ki(o,e,i,n,s))}return new Wi(t,r)}}class qi{constructor(){this.transformers=new Map}load(t,e=Hi){const i=this.transformers;let n=i.get(e);return void 0===n&&i.set(e,n=new zi(e)),n.transform(t)}dispose(){this.transformers.clear()}}class Wi{constructor(t,e){this.raw=t,this.items=e}}class Ki{constructor(t,e,i,n,s){this.key=t,this.value=e,this.isRegistry=i,this.isConstructable=n,this.definitions=s}}class Zi{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}const _i=Fe.createInterface("IEventAggregator",(t=>t.singleton(Qi)));class Qi{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw new Error(`Invalid channel name or instance: ${t}.`);if(ne(t)){let i=this.eventLookup[t];if(void 0!==i){i=i.slice();let n=i.length;for(;n-- >0;)i[n](e,t)}}else{const e=this.messageHandlers.slice();let i=e.length;for(;i-- >0;)e[i].handle(t)}}subscribe(t,e){if(!t)throw new Error(`Invalid channel name or type: ${t}.`);let i,n;return ne(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),i=e,n=this.eventLookup[t]):(i=new Zi(t,e),n=this.messageHandlers),n.push(i),{dispose(){const t=n.indexOf(i);-1!==t&&n.splice(t,1)}}}subscribeOnce(t,e){const i=this.subscribe(t,(function(t,n){i.dispose(),e(t,n)}));return i}}const Gi=Object.prototype.hasOwnProperty,Xi=Reflect.defineProperty,Yi=t=>"function"==typeof t,Ji=t=>"string"==typeof t;function tn(t,e,i){return Xi(t,e,{enumerable:!1,configurable:!0,writable:!0,value:i}),i}function en(t,e,i,n=!1){!n&&Gi.call(t,e)||tn(t,e,i)}const nn=()=>Object.create(null),sn=Qt.getOwn,rn=Qt.hasOwn,on=Qt.define,an=Oe.annotation.keyFor,ln=Oe.resource.keyFor,cn=Oe.resource.appendTo;function hn(t,e,i,n){for(let s=0,r=t.length;s<r;++s)vi.aliasTo(i,e.keyFrom(t[s])).register(n)}Object.freeze({});class un{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Gi.call(t,e)&&(this[e]=t[e])}static create(t,e){return new un(t,e)}static get(t,e,i,n){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(i>0){for(;i>0;)if(i--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class dn{constructor(t,e,i,n){this.parentScope=t,this.bindingContext=e,this.overrideContext=i,this.isBoundary=n}static create(t,e,i){return new dn(null,t,null==e?pn.create(t):e,null!=i&&i)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new dn(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new dn(t,e,pn.create(e),!1)}}class pn{constructor(t){this.bindingContext=t}static create(t){return new pn(t)}}const fn=Fe.createInterface("ISignaler",(t=>t.singleton(vn)));class vn{constructor(){this.signals=nn()}dispatchSignal(t,e){const i=this.signals[t];if(void 0===i)return;let n;for(n of i.keys())n.handleChange(void 0,void 0,e)}addSignalListener(t,e){const i=this.signals,n=i[t];void 0===n?i[t]=new Set([e]):n.add(e)}removeSignalListener(t,e){const i=this.signals[t];i&&i.delete(e)}}var gn;function mn(t){return function(e){return Sn.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(gn||(gn={}));class bn{constructor(t,e,i,n,s){this.Type=t,this.name=e,this.aliases=i,this.key=n,this.strategy=s}static create(t,e){let i,n;Ji(t)?(i=t,n={name:i}):(i=t.name,n=t);const s=Object.getPrototypeOf(e)===wn;return new bn(e,ye(kn(e,"name"),i),be(kn(e,"aliases"),n.aliases,e.aliases),Sn.keyFrom(i),Le("strategy",n,e,(()=>s?2:1)))}register(t){const{Type:e,key:i,aliases:n,strategy:s}=this;switch(s){case 1:vi.singleton(i,e).register(t);break;case 2:vi.instance(i,new yn(t,e)).register(t)}vi.aliasTo(i,e).register(t),hn(n,Sn,i,t)}}class yn{constructor(t,e){this.ctn=t,this.Type=e,this.deps=Fe.getDependencies(e)}construct(t,e){const i=this.ctn,n=this.deps;switch(n.length){case 0:return new this.Type(t,e);case 1:return new this.Type(i.get(n[0]),t,e);case 2:return new this.Type(i.get(n[0]),i.get(n[1]),t,e);default:return new this.Type(...n.map((t=>i.get(t))),t,e)}}}class wn{constructor(t,e){let i;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)i=t.interceptor,t.interceptor=this,t=i}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,i){this.binding.handleChange(t,e,i)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{Xi(wn.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const xn=ln("binding-behavior"),kn=(t,e)=>sn(an(e),t),Sn=Object.freeze({name:xn,keyFrom:t=>`${xn}:${t}`,isType:t=>Yi(t)&&rn(xn,t),define(t,e){const i=bn.create(t,e);return on(xn,i,i.Type),on(xn,i,i),cn(e,xn),i.Type},getDefinition(t){const e=sn(xn,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,i){on(an(e),i,t)},getAnnotation:kn});function Cn(t){return function(e){return Tn.define(t,e)}}class An{constructor(t,e,i,n){this.Type=t,this.name=e,this.aliases=i,this.key=n}static create(t,e){let i,n;return Ji(t)?(i=t,n={name:i}):(i=t.name,n=t),new An(e,ye(En(e,"name"),i),be(En(e,"aliases"),n.aliases,e.aliases),Tn.keyFrom(i))}register(t){const{Type:e,key:i,aliases:n}=this;vi.singleton(i,e).register(t),vi.aliasTo(i,e).register(t),hn(n,Tn,i,t)}}const $n=ln("value-converter"),En=(t,e)=>sn(an(e),t),Tn=Object.freeze({name:$n,keyFrom:t=>`${$n}:${t}`,isType:t=>Yi(t)&&rn($n,t),define(t,e){const i=An.create(t,e);return on($n,i,i.Type),on($n,i,i),cn(e,$n),i.Type},getDefinition(t){const e=sn($n,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,i){on(an(e),i,t)},getAnnotation:En});var Rn;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(Rn||(Rn={}));class In{constructor(){this.text=""}static unparse(t){const e=new In;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,i=t.values;this.text+="{";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,i[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",Ji(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:i}=t,n=i.length;this.text+="`",this.text+=e[0];for(let t=0;t<n;t++)i[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:i}=t,n=i.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<n;t++)i[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,i=e.length;t<i;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,i=e.length;t<i;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,i=t.values;this.text+="{";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,i[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:i}=t,n=i.length;this.text+="${",this.text+=e[0];for(let t=0;t<n;t++)i[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const i=t.list,n=i.length;let s,r;for(s=0;s<n;s++)switch(r=i[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,i=t.length;e<i;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class On{constructor(t){this.value=t}evaluate(t,e,i,n){return this.value}}class Pn{constructor(t,e,i){this.expression=t,this.name=e,this.args=i,this.behaviorKey=Sn.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,i,n){return this.expression.evaluate(t,e,i,n)}assign(t,e,i,n){return this.expression.assign(t,e,i,n)}bind(t,e,i){this.expression.hasBind&&this.expression.bind(t,e,i);const n=i.locator.get(this.behaviorKey);if(null==n)throw new Error(`AUR0101:${this.name}`);if(!(n instanceof yn)){if(void 0!==i[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);i[this.behaviorKey]=n,n.bind.call(n,t,e,i,...this.args.map((n=>n.evaluate(t,e,i.locator,null))))}}unbind(t,e,i){const n=this.behaviorKey,s=i;void 0!==s[n]&&(Yi(s[n].unbind)&&s[n].unbind(t,e,i),s[n]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,i)}accept(t){return t.visitBindingBehavior(this)}toString(){return In.unparse(this)}}class Ln{constructor(t,e,i){this.expression=t,this.name=e,this.args=i,this.converterKey=Tn.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,i,n){const s=i.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==n&&"handleChange"in n){const t=s.signals;if(null!=t){const e=i.get(fn);for(let i=0,s=t.length;i<s;++i)e.addSignalListener(t[i],n)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,i,n),...this.args.map((s=>s.evaluate(t,e,i,n)))):this.expression.evaluate(t,e,i,n)}assign(t,e,i,n){const s=i.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(n=s.fromView(n,...this.args.map((n=>n.evaluate(t,e,i,null))))),this.expression.assign(t,e,i,n)}unbind(t,e,i){const n=i.locator.get(this.converterKey);if(void 0===n.signals)return;const s=i.locator.get(fn);for(let t=0;t<n.signals.length;++t)s.removeSignalListener(n.signals[t],i)}accept(t){return t.visitValueConverter(this)}toString(){return In.unparse(this)}}class Mn{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.target.assign(t,e,i,this.value.evaluate(t,e,i,n))}assign(t,e,i,n){return this.value.assign(t,e,i,n),this.target.assign(t,e,i,n)}accept(t){return t.visitAssign(this)}toString(){return In.unparse(this)}}class jn{constructor(t,e,i){this.condition=t,this.yes=e,this.no=i}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.condition.evaluate(t,e,i,n)?this.yes.evaluate(t,e,i,n):this.no.evaluate(t,e,i,n)}assign(t,e,i,n){}accept(t){return t.visitConditional(this)}toString(){return In.unparse(this)}}class Un{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,i,n){}accept(t){return t.visitAccessThis(this)}toString(){return In.unparse(this)}}Un.$this=new Un(0),Un.$parent=new Un(1);class Bn{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=un.get(e,this.name,this.ancestor,t);null!==n&&n.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,i,n){var s;if("$host"===this.name)throw new Error("AUR0106");const r=un.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(n,t),n):r[this.name]=n}accept(t){return t.visitAccessScope(this)}toString(){return In.unparse(this)}}class Nn{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.object.evaluate(t,e,i,(32&t)>0?null:n);return 1&t?null==s?s:(null!==n&&n.observe(s,this.name),s[this.name]):(null!==n&&s instanceof Object&&n.observe(s,this.name),s?s[this.name]:"")}assign(t,e,i,n){const s=this.object.evaluate(t,e,i,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(n,t):s[this.name]=n:this.object.assign(t,e,i,{[this.name]:n}),n}accept(t){return t.visitAccessMember(this)}toString(){return In.unparse(this)}}class Vn{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.object.evaluate(t,e,i,(32&t)>0?null:n);if(s instanceof Object){const r=this.key.evaluate(t,e,i,(32&t)>0?null:n);return null!==n&&n.observe(s,r),s[r]}}assign(t,e,i,n){return this.object.evaluate(t,e,i,null)[this.key.evaluate(t,e,i,null)]=n}accept(t){return t.visitAccessKeyed(this)}toString(){return In.unparse(this)}}class Fn{constructor(t,e,i=0){this.name=t,this.args=e,this.ancestor=i}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.args.map((s=>s.evaluate(t,e,i,n))),r=un.get(e,this.name,this.ancestor,t),o=ss(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,i,n){}accept(t){return t.visitCallScope(this)}toString(){return In.unparse(this)}}class Dn{constructor(t,e,i){this.object=t,this.name=e,this.args=i}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.object.evaluate(t,e,i,(32&t)>0?null:n),r=this.args.map((s=>s.evaluate(t,e,i,n))),o=ss(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,i,n){}accept(t){return t.visitCallMember(this)}toString(){return In.unparse(this)}}class Hn{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.func.evaluate(t,e,i,n);if(Yi(s))return s(...this.args.map((s=>s.evaluate(t,e,i,n))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,i,n){}accept(t){return t.visitCallFunction(this)}toString(){return In.unparse(this)}}class zn{constructor(t,e,i){this.operation=t,this.left=e,this.right=i}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){switch(this.operation){case"&&":return this.left.evaluate(t,e,i,n)&&this.right.evaluate(t,e,i,n);case"||":return this.left.evaluate(t,e,i,n)||this.right.evaluate(t,e,i,n);case"==":return this.left.evaluate(t,e,i,n)==this.right.evaluate(t,e,i,n);case"===":return this.left.evaluate(t,e,i,n)===this.right.evaluate(t,e,i,n);case"!=":return this.left.evaluate(t,e,i,n)!=this.right.evaluate(t,e,i,n);case"!==":return this.left.evaluate(t,e,i,n)!==this.right.evaluate(t,e,i,n);case"instanceof":{const s=this.right.evaluate(t,e,i,n);return!!Yi(s)&&this.left.evaluate(t,e,i,n)instanceof s}case"in":{const s=this.right.evaluate(t,e,i,n);return s instanceof Object&&this.left.evaluate(t,e,i,n)in s}case"+":{const s=this.left.evaluate(t,e,i,n),r=this.right.evaluate(t,e,i,n);if((1&t)>0)return s+r;if(!s||!r){if(ae(s)||ae(r))return(s||0)+(r||0);if(le(s)||le(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,i,n)-this.right.evaluate(t,e,i,n);case"*":return this.left.evaluate(t,e,i,n)*this.right.evaluate(t,e,i,n);case"/":return this.left.evaluate(t,e,i,n)/this.right.evaluate(t,e,i,n);case"%":return this.left.evaluate(t,e,i,n)%this.right.evaluate(t,e,i,n);case"<":return this.left.evaluate(t,e,i,n)<this.right.evaluate(t,e,i,n);case">":return this.left.evaluate(t,e,i,n)>this.right.evaluate(t,e,i,n);case"<=":return this.left.evaluate(t,e,i,n)<=this.right.evaluate(t,e,i,n);case">=":return this.left.evaluate(t,e,i,n)>=this.right.evaluate(t,e,i,n);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,i,n){}accept(t){return t.visitBinary(this)}toString(){return In.unparse(this)}}class qn{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){switch(this.operation){case"void":return void this.expression.evaluate(t,e,i,n);case"typeof":return typeof this.expression.evaluate(1|t,e,i,n);case"!":return!this.expression.evaluate(t,e,i,n);case"-":return-this.expression.evaluate(t,e,i,n);case"+":return+this.expression.evaluate(t,e,i,n);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,i,n){}accept(t){return t.visitUnary(this)}toString(){return In.unparse(this)}}class Wn{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.value}assign(t,e,i,n){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return In.unparse(this)}}Wn.$undefined=new Wn(void 0),Wn.$null=new Wn(null),Wn.$true=new Wn(!0),Wn.$false=new Wn(!1),Wn.$empty=new Wn("");class Kn{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.elements.map((s=>s.evaluate(t,e,i,n)))}assign(t,e,i,n){}accept(t){return t.visitArrayLiteral(this)}toString(){return In.unparse(this)}}Kn.$empty=new Kn(wi);class Zn{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,i,n);return s}assign(t,e,i,n){}accept(t){return t.visitObjectLiteral(this)}toString(){return In.unparse(this)}}Zn.$empty=new Zn(wi,wi);class _n{constructor(t,e=wi){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,i,n)),s+=this.cooked[r+1];return s}assign(t,e,i,n){}accept(t){return t.visitTemplate(this)}toString(){return In.unparse(this)}}_n.$empty=new _n([""]);class Qn{constructor(t,e,i,n=wi){this.cooked=t,this.func=i,this.expressions=n,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.expressions.map((s=>s.evaluate(t,e,i,n))),r=this.func.evaluate(t,e,i,n);if(!Yi(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,i,n){}accept(t){return t.visitTaggedTemplate(this)}toString(){return In.unparse(this)}}class Gn{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){}assign(t,e,i,n){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return In.unparse(this)}}class Xn{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){}assign(t,e,i,n){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return In.unparse(this)}}class Yn{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return In.unparse(this)}}const Jn=Object.prototype.toString;class ts{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.iterable.evaluate(t,e,i,n)}assign(t,e,i,n){}count(t,e){switch(Jn.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${Jn.call(e)}`)}}iterate(t,e,i){switch(Jn.call(e)){case"[object Array]":return rs(e,i);case"[object Map]":return function(t,e){const i=Array(t.size);let n=-1;for(const e of t.entries())i[++n]=e;rs(i,e)}(e,i);case"[object Set]":return function(t,e){const i=Array(t.size);let n=-1;for(const e of t.keys())i[++n]=e;rs(i,e)}(e,i);case"[object Number]":return function(t,e){const i=Array(t);for(let e=0;e<t;++e)i[e]=e;rs(i,e)}(e,i);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${Jn.call(e)}`)}}bind(t,e,i){this.iterable.hasBind&&this.iterable.bind(t,e,i)}unbind(t,e,i){this.iterable.hasUnbind&&this.iterable.unbind(t,e,i)}accept(t){return t.visitForOfStatement(this)}toString(){return In.unparse(this)}}class es{constructor(t,e=wi){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,i,n)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,i,n)}${this.parts[1]}`}assign(t,e,i,n){}accept(t){return t.visitInterpolation(this)}toString(){return In.unparse(this)}}class is{constructor(t,e,i,n){this.$kind=t,this.list=e,this.source=i,this.initializer=n}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){}assign(t,e,i,n){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,i,n);break;case 90137:case 106521:{if("object"!=typeof n||null===n)throw new Error("AUR0112");let r=l.source.evaluate(t,dn.create(n),i,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,i,null)),l.assign(t,e,i,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return In.unparse(this)}}class ns{constructor(t,e,i){this.target=t,this.source=e,this.initializer=i}get $kind(){return 139289}evaluate(t,e,i,n){}assign(t,e,i,n){var s;if(null==n)return;if("object"!=typeof n)throw new Error("AUR0112");let r=this.source.evaluate(t,dn.create(n),i,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,i,null)),this.target.assign(t,e,i,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return In.unparse(this)}}function ss(t,e,i){const n=null==e?null:e[i];if(Yi(n))return n;if(!(8&t)&&null==n)return null;throw new Error(`AUR0111:${i}`)}function rs(t,e){for(let i=0,n=t.length;i<n;++i)e(t,i,t[i])}const os=Fe.createInterface("ICoercionConfiguration");var as,ls,cs,hs,us,ds;function ps(t=0){const e=Array(t);let i=0;for(;i<t;)e[i]=i++;return e.deletedItems=[],e.isIndexMap=!0,e}function fs(t){return null==t?vs:vs(t)}function vs(t){const e=t.prototype;Xi(e,"subs",{get:ms}),en(e,"subscribe",bs),en(e,"unsubscribe",ys)}!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(as||(as={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(ls||(ls={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(cs||(cs={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(hs||(hs={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(us||(us={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(ds||(ds={}));class gs{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,i=e.length;let n=0;for(;n<i;++n)if(e[n]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,i=e.length;let n=0;for(;n<i;++n)if(e[n]===t)return e.splice(n,1),1===i&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,i){const n=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==n&&n.handleChange(t,e,i),void 0!==s&&s.handleChange(t,e,i),void 0!==r&&r.handleChange(t,e,i),void 0!==o){const n=o.length;let s,r=0;for(;r<n;++r)s=o[r],void 0!==s&&s.handleChange(t,e,i)}}notifyCollection(t,e){const i=this.s0,n=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==i&&i.handleCollectionChange(t,e),void 0!==n&&n.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const i=r.length;let n,s=0;for(;s<i;++s)n=r[s],void 0!==n&&n.handleCollectionChange(t,e)}}}function ms(){return tn(this,"subs",new gs)}function bs(t){return this.subs.add(t)}function ys(t){return this.subs.remove(t)}function ws(t){return null==t?xs:xs(t)}function xs(t){const e=t.prototype;Xi(e,"queue",{get:Ss})}class ks{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(Cs)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function Ss(){return ks.instance}function Cs(t,e,i){i.delete(t),t.flush()}ks.instance=new ks;class As{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const i=this.v;t!==i&&oe(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=i,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const i=this.v,n=this.o.length;(this.v=n)!==i&&(this.h=i,this.f=e,this.queue.add(this))}flush(){Is=this.h,this.h=this.v,this.subs.notify(this.v,Is,this.f)}}class $s{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const i=this.v,n=this.o.size;(this.v=n)!==i&&(this.h=i,this.f=e,this.queue.add(this))}flush(){Is=this.h,this.h=this.v,this.subs.notify(this.v,Is,this.f)}}function Es(t){const e=t.prototype;en(e,"subscribe",Ts,!0),en(e,"unsubscribe",Rs,!0),ws(t),fs(t)}function Ts(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function Rs(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let Is;Es(As),Es($s);const Os=new WeakMap;function Ps(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Ls(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function Ms(t,e,i,n,s){let r,o,a,l,c,h,u;for(h=i+1;h<n;h++){for(r=t[h],o=e[h],u=h-1;u>=i&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function js(t,e,i,n,s){let r,o,a,l,c,h,u,d,p,f,v,g,m,b,y,w,x,k,S,C=0,A=0;for(;;){if(n-i<=10)return void Ms(t,e,i,n,s);C=i+(n-i>>1),r=t[i],l=e[i],o=t[n-1],c=e[n-1],a=t[C],h=e[C],u=s(r,o),u>0&&(f=r,v=l,r=o,l=c,o=f,c=v),d=s(r,a),d>=0?(f=r,v=l,r=a,l=h,a=o,h=c,o=f,c=v):(p=s(o,a),p>0&&(f=o,v=c,o=a,c=h,a=f,h=v)),t[i]=r,e[i]=l,t[n-1]=a,e[n-1]=h,g=o,m=c,b=i+1,y=n-1,t[C]=t[b],e[C]=e[b],t[b]=g,e[b]=m;t:for(A=b+1;A<y;A++)if(w=t[A],x=e[A],k=s(w,g),k<0)t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,b++;else if(k>0){do{if(y--,y==A)break t;S=t[y],k=s(S,g)}while(k>0);t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,k<0&&(w=t[A],x=e[A],t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,b++)}n-y<b-i?(js(t,e,y,n,s),n=b):(js(t,e,i,b,s),i=y)}}const Us=Array.prototype,Bs=Us.push,Ns=Us.unshift,Vs=Us.pop,Fs=Us.shift,Ds=Us.splice,Hs=Us.reverse,zs=Us.sort,qs=["push","unshift","pop","shift","splice","reverse","sort"],Ws={push:function(...t){const e=Os.get(this);if(void 0===e)return Bs.apply(this,t);const i=this.length,n=t.length;if(0===n)return i;this.length=e.indexMap.length=i+n;let s=i;for(;s<this.length;)this[s]=t[s-i],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=Os.get(this);if(void 0===e)return Ns.apply(this,t);const i=t.length,n=new Array(i);let s=0;for(;s<i;)n[s++]=-2;Ns.apply(e.indexMap,n);const r=Ns.apply(this,t);return e.notify(),r},pop:function(){const t=Os.get(this);if(void 0===t)return Vs.call(this);const e=t.indexMap,i=Vs.call(this),n=e.length-1;return e[n]>-1&&e.deletedItems.push(e[n]),Vs.call(e),t.notify(),i},shift:function(){const t=Os.get(this);if(void 0===t)return Fs.call(this);const e=t.indexMap,i=Fs.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),Fs.call(e),t.notify(),i},splice:function(...t){const e=t[0],i=t[1],n=Os.get(this);if(void 0===n)return Ds.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=n.indexMap,l=t.length,c=0===l?0:1===l?s-o:i;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,n=new Array(t);let s=0;for(;s<t;)n[s++]=-2;Ds.call(a,e,i,...n)}else Ds.apply(a,t);const h=Ds.apply(this,t);return n.notify(),h},reverse:function(){const t=Os.get(this);if(void 0===t)return Hs.call(this),this;const e=this.length,i=e/2|0;let n=0;for(;n!==i;){const i=e-n-1,s=this[n],r=t.indexMap[n],o=this[i],a=t.indexMap[i];this[n]=o,t.indexMap[n]=a,this[i]=s,t.indexMap[i]=r,n++}return t.notify(),this},sort:function(t){const e=Os.get(this);if(void 0===e)return zs.call(this,t),this;const i=this.length;if(i<2)return this;js(this,e.indexMap,0,i,Ls);let n=0;for(;n<i&&void 0!==this[n];)n++;return void 0!==t&&Yi(t)||(t=Ps),js(this,e.indexMap,0,n,t),e.notify(),this}};for(const t of qs)Xi(Ws[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Ks=!1;class Zs{constructor(t){this.type=18,Ks||(Ks=!0,function(){for(const t of qs)!0!==Us[t].observing&&tn(Us,t,Ws[t])}()),this.indexObservers={},this.collection=t,this.indexMap=ps(t.length),this.lenObs=void 0,Os.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=ps(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new As(this)}getIndexObserver(t){var e,i;return null!==(e=(i=this.indexObservers)[t])&&void 0!==e?e:i[t]=new _s(this,t)}}class _s{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const i=this.owner,n=this.index,s=i.indexMap;s[n]>-1&&s.deletedItems.push(s[n]),s[n]=-2,i.collection[n]=t,i.notify()}handleCollectionChange(t,e){const i=this.index;if(t[i]===i)return;const n=this.value,s=this.value=this.getValue();n!==s&&this.subs.notify(s,n,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Qs(t){let e=Os.get(t);return void 0===e&&(e=new Zs(t)),e}fs(Zs),fs(_s);const Gs=new WeakMap,Xs=Set.prototype,Ys=Xs.add,Js=Xs.clear,tr=Xs.delete,er=["add","clear","delete"],ir={add:function(t){const e=Gs.get(this);if(void 0===e)return Ys.call(this,t),this;const i=this.size;return Ys.call(this,t),this.size===i||(e.indexMap[i]=-2,e.notify()),this},clear:function(){const t=Gs.get(this);if(void 0===t)return Js.call(this);if(this.size>0){const e=t.indexMap;let i=0;for(const t of this.keys())e[i]>-1&&e.deletedItems.push(e[i]),i++;Js.call(this),e.length=0,t.notify()}},delete:function(t){const e=Gs.get(this);if(void 0===e)return tr.call(this,t);if(0===this.size)return!1;let i=0;const n=e.indexMap;for(const s of this.keys()){if(s===t){n[i]>-1&&n.deletedItems.push(n[i]),n.splice(i,1);const s=tr.call(this,t);return!0===s&&e.notify(),s}i++}return!1}},nr={writable:!0,enumerable:!1,configurable:!0};for(const t of er)Xi(ir[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let sr=!1;class rr{constructor(t){this.type=34,sr||(sr=!0,function(){for(const t of er)!0!==Xs[t].observing&&Xi(Xs,t,{...nr,value:ir[t]})}()),this.collection=t,this.indexMap=ps(t.size),this.lenObs=void 0,Gs.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=ps(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new $s(this)}}function or(t){let e=Gs.get(t);return void 0===e&&(e=new rr(t)),e}fs(rr);const ar=new WeakMap,lr=Map.prototype,cr=lr.set,hr=lr.clear,ur=lr.delete,dr=["set","clear","delete"],pr={set:function(t,e){const i=ar.get(this);if(void 0===i)return cr.call(this,t,e),this;const n=this.get(t),s=this.size;if(cr.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==n&&(i.indexMap.deletedItems.push(i.indexMap[e]),i.indexMap[e]=-2,i.notify()),this;e++}return this}return i.indexMap[s]=-2,i.notify(),this},clear:function(){const t=ar.get(this);if(void 0===t)return hr.call(this);if(this.size>0){const e=t.indexMap;let i=0;for(const t of this.keys())e[i]>-1&&e.deletedItems.push(e[i]),i++;hr.call(this),e.length=0,t.notify()}},delete:function(t){const e=ar.get(this);if(void 0===e)return ur.call(this,t);if(0===this.size)return!1;let i=0;const n=e.indexMap;for(const s of this.keys()){if(s===t){n[i]>-1&&n.deletedItems.push(n[i]),n.splice(i,1);const s=ur.call(this,t);return!0===s&&e.notify(),s}++i}return!1}},fr={writable:!0,enumerable:!1,configurable:!0};for(const t of dr)Xi(pr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let vr=!1;class gr{constructor(t){this.type=66,vr||(vr=!0,function(){for(const t of dr)!0!==lr[t].observing&&Xi(lr,t,{...fr,value:pr[t]})}()),this.collection=t,this.indexMap=ps(t.size),this.lenObs=void 0,ar.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=ps(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new $s(this)}}function mr(t){let e=ar.get(t);return void 0===e&&(e=new gr(t)),e}function br(t,e){const i=this.oL.getObserver(t,e);this.obs.add(i)}function yr(){return tn(this,"obs",new Cr(this))}function wr(t){let e;if(t instanceof Array)e=Qs(t);else if(t instanceof Set)e=or(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=mr(t)}this.obs.add(e)}function xr(t){this.obs.add(t)}function kr(){throw new Error("AUR2011:handleChange")}function Sr(){throw new Error("AUR2012:handleCollectionChange")}fs(gr);class Cr{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,i){return this.b.interceptor.handleChange(t,e,i)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach($r,this),this.count=this.o.size}clearAll(){this.o.forEach(Ar,this),this.o.clear(),this.count=0}}function Ar(t,e){e.unsubscribe(this)}function $r(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function Er(t){const e=t.prototype;return en(e,"observe",br,!0),en(e,"observeCollection",wr,!0),en(e,"subscribeTo",xr,!0),Xi(e,"obs",{get:yr}),en(e,"handleChange",kr),en(e,"handleCollectionChange",Sr),t}function Tr(t){return null==t?Er:Er(t)}Er(class{constructor(t,e,i,n){this.key=t,this.binding=e,this.oL=i,this.locator=n,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,i){this.binding[this.key](t,e,i)}});const Rr=Fe.createInterface("IExpressionParser",(t=>t.singleton(Ir)));class Ir{constructor(){this.u=nn(),this.A=nn(),this.U=nn()}parse(t,e){let i;switch(e){case 16:return new On(t);case 1:return i=this.U[t],void 0===i&&(i=this.U[t]=this.$parse(t,e)),i;case 2:return i=this.A[t],void 0===i&&(i=this.A[t]=this.$parse(t,e)),i;default:if(0===t.length){if((12&e)>0)return Wn.$empty;throw new Error("AUR0169")}return i=this.u[t],void 0===i&&(i=this.u[t]=this.$parse(t,e)),i}}$parse(t,e){return zr.ip=t,zr.length=t.length,zr.index=0,zr.O=t.charCodeAt(0),qr(zr,0,61,void 0===e?8:e)}}var Or,Pr,Lr,Mr;function jr(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(Or||(Or={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(Pr||(Pr={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(Lr||(Lr={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(Mr||(Mr={}));const Ur=Wn.$false,Br=Wn.$true,Nr=Wn.$null,Vr=Wn.$undefined,Fr=Un.$this,Dr=Un.$parent;var Hr;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(Hr||(Hr={}));const zr=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function qr(t,e,i,n){if(16===n)return new On(t.ip);if(0===t.index){if(1&n)return function(t){const e=[],i=[],n=t.length;let s="";for(;t.index<n;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),Kr(t);const n=qr(t,0,61,1);i.push(n);continue}s+="$";break;case 92:s+=String.fromCharCode(jr(Zr(t)));break;default:s+=String.fromCharCode(t.O)}Zr(t)}return i.length?(e.push(s),new es(e,i)):null}(t);if(Kr(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>i,32768&t.$){const i=Jr[63&t.$];Kr(t),s=new qn(i,qr(t,e,449,n)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(Kr(t),e++,!Xr(t,16393)){if(524288&t.$){const t=511&e;s=0===t?Fr:1===t?Dr:new Un(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&n?s=new Yn(t.L):(s=new Bn(t.L,511&e),e=1024),t.R=!0,Kr(t);break;case 3076:t.R=!1,Kr(t),s=Fr,e=512;break;case 671751:Kr(t),s=qr(t,0,62,n),Yr(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],i=new is(90137,e,void 0,void 0);let n="",s=!0,r=0;for(;s;)switch(Kr(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:n=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return Yr(t,1835022),i;function o(){""!==n?(e.push(new ns(new Nn(Fr,n),new Vn(Fr,new Wn(r++)),void 0)),n=""):r++}}(t):function(t,e,i){Kr(t);const n=new Array;for(;1835022!==t.$;)if(Xr(t,1572876)){if(n.push(Vr),1835022===t.$)break}else{if(n.push(qr(t,e,62,-3&i)),!Xr(t,1572876))break;if(1835022===t.$)break}return Yr(t,1835022),2&i?new Gn(n):(t.R=!1,new Kn(n))}(t,e,n),e=0;break;case 131080:s=function(t,e){const i=new Array,n=new Array;for(Kr(t);1835018!==t.$;){if(i.push(t.L),12288&t.$)Kr(t),Yr(t,1572879),n.push(qr(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:i,$:s,index:r}=t;Kr(t),Xr(t,1572879)?n.push(qr(t,0,62,-3&e)):(t.O=i,t.$=s,t.index=r,n.push(qr(t,0,450,-3&e)))}}1835018!==t.$&&Yr(t,1572876)}return Yr(t,1835018),2&e?new Xn(i,n):(t.R=!1,new Zn(i,n))}(t,n),e=0;break;case 540714:s=new _n([t.L]),t.R=!1,Kr(t),e=0;break;case 540715:s=Wr(t,e,n,s,!1),e=0;break;case 4096:case 8192:s=new Wn(t.L),t.R=!1,Kr(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=Jr[63&t.$],t.R=!1,Kr(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&n)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);Kr(t);const i=e,n=qr(t,0,61,0);return new ts(i,n)}(t,s);if(449<i)return s;let r=t.L;for(;(16384&t.$)>0;){const i=[];let o;switch(t.$){case 16393:if(t.R=!0,Kr(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,Kr(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new Bn(r,s.ancestor):new Nn(s,r);continue;case 671757:t.R=!0,Kr(t),e=4096,s=new Vn(s,qr(t,0,62,n)),Yr(t,1835022);break;case 671751:for(t.R=!1,Kr(t);1835019!==t.$&&(i.push(qr(t,0,62,n)),Xr(t,1572876)););Yr(t,1835019),s=1024&e?new Fn(r,i,s.ancestor):2048&e?new Dn(s,r,i):new Hn(s,i),e=0;break;case 540714:t.R=!1,o=[t.L],s=new Qn(o,o,s),Kr(t);break;case 540715:s=Wr(t,e,n,s,!0)}}}if(448<i)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=i)break;Kr(t),s=new zn(Jr[63&r],s,qr(t,e,448&r,n)),t.R=!1}if(63<i)return s;if(Xr(t,1572880)){const i=qr(t,e,62,n);Yr(t,1572879),s=new jn(s,i,qr(t,e,62,n)),t.R=!1}if(62<i)return s;if(Xr(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new Mn(s,qr(t,e,62,n))}if(61<i)return s;for(;Xr(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const i=t.L;Kr(t);const r=new Array;for(;Xr(t,1572879);)r.push(qr(t,e,62,n));s=new Ln(s,i,r)}for(;Xr(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const i=t.L;Kr(t);const r=new Array;for(;Xr(t,1572879);)r.push(qr(t,e,62,n));s=new Pn(s,i,r)}if(1572864!==t.$){if(1&n)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function Wr(t,e,i,n,s){const r=[t.L];Yr(t,540715);const o=[qr(t,e,62,i)];for(;540714!==(t.$=Gr(t));)r.push(t.L),Yr(t,540715),o.push(qr(t,e,62,i));return r.push(t.L),t.R=!1,s?(Kr(t),new Qn(r,r,n,o)):(Kr(t),new _n(r,o))}function Kr(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=ao[t.O](t)))return;t.$=1572864}function Zr(t){return t.O=t.ip.charCodeAt(++t.index)}function _r(t,e){let i=t.O;if(!1===e){do{i=Zr(t)}while(i<=57&&i>=48);if(46!==i)return t.L=parseInt(t.P,10),8192;if(i=Zr(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(i<=57&&i>=48)do{i=Zr(t)}while(i<=57&&i>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function Qr(t){let e=!0,i="";for(;96!==Zr(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}i+="$"}else if(92===t.O)i+=String.fromCharCode(jr(Zr(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);i+=String.fromCharCode(t.O)}return Zr(t),t.L=i,e?540714:540715}function Gr(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,Qr(t)}function Xr(t,e){return t.$===e&&(Kr(t),!0)}function Yr(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);Kr(t)}const Jr=[Ur,Br,Nr,Vr,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],to=nn();to.true=2049,to.null=2050,to.false=2048,to.undefined=2051,to.$this=3076,to.$parent=3078,to.in=1640799,to.instanceof=1640800,to.typeof=34851,to.void=34852,to.of=1051180;const eo=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],io=[48,58];function no(t,e,i,n){const s=i.length;for(let r=0;r<s;r+=2){const s=i[r];let o=i[r+1];if(o=o>0?o:s+1,t&&t.fill(n,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function so(t){return e=>(Zr(e),t)}const ro=t=>{throw new Error(`AUR0168:${t.ip}`)};ro.notMapped=!0,no(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const oo=new Uint8Array(65535);no(oo,null,eo,1),no(oo,null,io,1);const ao=new Array(65535);ao.fill(ro,0,65535),no(ao,null,[0,33,127,161],(t=>(Zr(t),null))),no(ao,null,eo,(function(t){for(;oo[Zr(t)];);const e=to[t.L=t.P];return void 0===e?1024:e})),no(ao,null,io,(t=>_r(t,!1))),ao[34]=ao[39]=t=>function(t){const e=t.O;Zr(t);let i=0;const n=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)n.push(t.ip.slice(s,t.index)),Zr(t),i=jr(t.O),Zr(t),n.push(String.fromCharCode(i)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);Zr(t)}const r=t.ip.slice(s,t.index);Zr(t),n.push(r);const o=n.join("");return t.L=o,4096}(t),ao[96]=t=>Qr(t),ao[33]=t=>61!==Zr(t)?32809:61!==Zr(t)?1638680:(Zr(t),1638682),ao[61]=t=>61!==Zr(t)?1048616:61!==Zr(t)?1638679:(Zr(t),1638681),ao[38]=t=>38!==Zr(t)?1572883:(Zr(t),1638614),ao[124]=t=>124!==Zr(t)?1572884:(Zr(t),1638549),ao[46]=t=>Zr(t)<=57&&t.O>=48?_r(t,!0):16393,ao[60]=t=>61!==Zr(t)?1638747:(Zr(t),1638749),ao[62]=t=>61!==Zr(t)?1638748:(Zr(t),1638750),ao[37]=so(1638886),ao[40]=so(671751),ao[41]=so(1835019),ao[42]=so(1638885),ao[43]=so(623009),ao[44]=so(1572876),ao[45]=so(623010),ao[47]=so(1638887),ao[58]=so(1572879),ao[63]=so(1572880),ao[91]=so(671757),ao[93]=so(1835022),ao[123]=so(131080),ao[125]=so(1835018);let lo=null;const co=[];let ho=!1;function uo(){return lo}function po(t){if(null==t)throw new Error("AUR0206");if(null==lo)return lo=t,co[0]=lo,void(ho=!0);if(lo===t)throw new Error("AUR0207");co.push(t),lo=t,ho=!0}function fo(t){if(null==t)throw new Error("AUR0208");if(lo!==t)throw new Error("AUR0209");co.pop(),lo=co.length>0?co[co.length-1]:null,ho=null!=lo}const vo=Object.freeze({get current(){return lo},get connecting(){return ho},enter:po,exit:fo,pause:function(){ho=!1},resume:function(){ho=!0}}),go=Reflect.get,mo=Object.prototype.toString,bo=new WeakMap;function yo(t){switch(mo.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const wo="__raw__";function xo(t){return yo(t)?ko(t):t}function ko(t){var e;return null!==(e=bo.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?Eo:t instanceof Map||t instanceof Set?Go:$o,i=new Proxy(t,e);return bo.set(t,i),i}(t)}function So(t){var e;return null!==(e=t[wo])&&void 0!==e?e:t}function Co(t){return yo(t)&&t[wo]||t}function Ao(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const $o={get(t,e,i){if(e===wo)return t;const n=uo();return!ho||Ao(e)||null==n?go(t,e,i):(n.observe(t,e),xo(go(t,e,i)))}},Eo={get(t,e,i){if(e===wo)return t;const n=uo();if(!ho||Ao(e)||null==n)return go(t,e,i);switch(e){case"length":return n.observe(t,"length"),t.length;case"map":return To;case"includes":return Oo;case"indexOf":return Po;case"lastIndexOf":return Lo;case"every":return Ro;case"filter":return Io;case"find":return jo;case"findIndex":return Mo;case"flat":return Uo;case"flatMap":return Bo;case"join":return No;case"push":return Fo;case"pop":return Vo;case"reduce":return _o;case"reduceRight":return Qo;case"reverse":return qo;case"shift":return Do;case"unshift":return Ho;case"slice":return Zo;case"splice":return zo;case"some":return Wo;case"sort":return Ko;case"keys":return sa;case"values":case Symbol.iterator:return ra;case"entries":return oa}return n.observe(t,e),xo(go(t,e,i))},ownKeys(t){var e;return null===(e=uo())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function To(t,e){var i;const n=So(this),s=n.map(((i,n)=>Co(t.call(e,xo(i),n,this))));return null===(i=uo())||void 0===i||i.observeCollection(n),xo(s)}function Ro(t,e){var i;const n=So(this),s=n.every(((i,n)=>t.call(e,xo(i),n,this)));return null===(i=uo())||void 0===i||i.observeCollection(n),s}function Io(t,e){var i;const n=So(this),s=n.filter(((i,n)=>Co(t.call(e,xo(i),n,this))));return null===(i=uo())||void 0===i||i.observeCollection(n),xo(s)}function Oo(t){var e;const i=So(this),n=i.includes(Co(t));return null===(e=uo())||void 0===e||e.observeCollection(i),n}function Po(t){var e;const i=So(this),n=i.indexOf(Co(t));return null===(e=uo())||void 0===e||e.observeCollection(i),n}function Lo(t){var e;const i=So(this),n=i.lastIndexOf(Co(t));return null===(e=uo())||void 0===e||e.observeCollection(i),n}function Mo(t,e){var i;const n=So(this),s=n.findIndex(((i,n)=>Co(t.call(e,xo(i),n,this))));return null===(i=uo())||void 0===i||i.observeCollection(n),s}function jo(t,e){var i;const n=So(this),s=n.find(((e,i)=>t(xo(e),i,this)),e);return null===(i=uo())||void 0===i||i.observeCollection(n),xo(s)}function Uo(){var t;const e=So(this);return null===(t=uo())||void 0===t||t.observeCollection(e),xo(e.flat())}function Bo(t,e){var i;const n=So(this);return null===(i=uo())||void 0===i||i.observeCollection(n),ko(n.flatMap(((i,n)=>xo(t.call(e,xo(i),n,this)))))}function No(t){var e;const i=So(this);return null===(e=uo())||void 0===e||e.observeCollection(i),i.join(t)}function Vo(){return xo(So(this).pop())}function Fo(...t){return So(this).push(...t)}function Do(){return xo(So(this).shift())}function Ho(...t){return So(this).unshift(...t)}function zo(...t){return xo(So(this).splice(...t))}function qo(...t){var e;const i=So(this),n=i.reverse();return null===(e=uo())||void 0===e||e.observeCollection(i),xo(n)}function Wo(t,e){var i;const n=So(this),s=n.some(((i,n)=>Co(t.call(e,xo(i),n,this))));return null===(i=uo())||void 0===i||i.observeCollection(n),s}function Ko(t){var e;const i=So(this),n=i.sort(t);return null===(e=uo())||void 0===e||e.observeCollection(i),xo(n)}function Zo(t,e){var i;const n=So(this);return null===(i=uo())||void 0===i||i.observeCollection(n),ko(n.slice(t,e))}function _o(t,e){var i;const n=So(this),s=n.reduce(((e,i,n)=>t(e,xo(i),n,this)),e);return null===(i=uo())||void 0===i||i.observeCollection(n),xo(s)}function Qo(t,e){var i;const n=So(this),s=n.reduceRight(((e,i,n)=>t(e,xo(i),n,this)),e);return null===(i=uo())||void 0===i||i.observeCollection(n),xo(s)}const Go={get(t,e,i){if(e===wo)return t;const n=uo();if(!ho||Ao(e)||null==n)return go(t,e,i);switch(e){case"size":return n.observe(t,"size"),t.size;case"clear":return ia;case"delete":return na;case"forEach":return Xo;case"add":if(t instanceof Set)return ea;break;case"get":if(t instanceof Map)return Jo;break;case"set":if(t instanceof Map)return ta;break;case"has":return Yo;case"keys":return sa;case"values":return ra;case"entries":return oa;case Symbol.iterator:return t instanceof Map?oa:ra}return xo(go(t,e,i))}};function Xo(t,e){var i;const n=So(this);return null===(i=uo())||void 0===i||i.observeCollection(n),n.forEach(((i,n)=>{t.call(e,xo(i),xo(n),this)}))}function Yo(t){var e;const i=So(this);return null===(e=uo())||void 0===e||e.observeCollection(i),i.has(Co(t))}function Jo(t){var e;const i=So(this);return null===(e=uo())||void 0===e||e.observeCollection(i),xo(i.get(Co(t)))}function ta(t,e){return xo(So(this).set(Co(t),Co(e)))}function ea(t){return xo(So(this).add(Co(t)))}function ia(){return xo(So(this).clear())}function na(t){return xo(So(this).delete(Co(t)))}function sa(){var t;const e=So(this);null===(t=uo())||void 0===t||t.observeCollection(e);const i=e.keys();return{next(){const t=i.next(),e=t.value,n=t.done;return n?{value:void 0,done:n}:{value:xo(e),done:n}},[Symbol.iterator](){return this}}}function ra(){var t;const e=So(this);null===(t=uo())||void 0===t||t.observeCollection(e);const i=e.values();return{next(){const t=i.next(),e=t.value,n=t.done;return n?{value:void 0,done:n}:{value:xo(e),done:n}},[Symbol.iterator](){return this}}}function oa(){var t;const e=So(this);null===(t=uo())||void 0===t||t.observeCollection(e);const i=e.entries();return{next(){const t=i.next(),e=t.value,n=t.done;return n?{value:void 0,done:n}:{value:[xo(e[0]),xo(e[1])],done:n}},[Symbol.iterator](){return this}}}const aa=Object.freeze({getProxy:ko,getRaw:So,wrap:xo,unwrap:Co,rawKey:wo});class la{constructor(t,e,i,n,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=i,this.up=n,this.oL=s}static create(t,e,i,n,s){const r=i.get,o=i.set,a=new la(t,r,o,s,n),l=()=>a.getValue();return l.getObserver=()=>a,Xi(t,e,{enumerable:i.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!Yi(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){ca=this.ov,this.ov=this.v,this.subs.notify(this.v,ca,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return po(this),this.v=Co(this.get.call(this.up?xo(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,fo(this)}}}let ca;Tr(la),fs(la),ws(la);const ha=Fe.createInterface("IDirtyChecker",(t=>t.singleton(pa))),ua={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},da={persistent:!0};class pa{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(ua.disabled)return;if(++this.j<ua.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let i,n=0;for(;n<e;++n)i=t[n],i.isDirty()&&this.queue.add(i)}}createProperty(t,e){if(ua.throw)throw new Error(`AUR0222:${e}`);return new fa(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,da))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}pa.inject=[Si],ws(pa);class fa{constructor(t,e,i){this.obj=e,this.key=i,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}fs(fa);class va{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class ga{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,i,n){i[n]=t}}let ma;class ba{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){ma=this.ov,this.ov=this.v,this.subs.notify(this.v,ma,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Xi(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(Xi(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class ya{constructor(t,e,i,n){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=i,this.hs=Yi(i);const s=t[e];this.cb=Yi(s)?s:void 0,this.v=n}getValue(){return this.v}setValue(t,e){var i;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(i=this.cb)||void 0===i||i.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){ma=this.ov,this.ov=this.v,this.subs.notify(this.v,ma,this.f)}}fs(ba),fs(ya),ws(ba),ws(ya);const wa=new ga,xa=Fe.createInterface("IObserverLocator",(t=>t.singleton(Ca))),ka=Fe.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(Oi).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new Sa)))));class Sa{handles(){return!1}getObserver(){return wa}getAccessor(){return wa}}class Ca{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var i,n;return null!==(n=null===(i=t.$observers)||void 0===i?void 0:i[e])&&void 0!==n?n:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var i;const n=null===(i=t.$observers)||void 0===i?void 0:i[e];return void 0!==n?n:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):wa}getArrayObserver(t){return Qs(t)}getMapObserver(t){return mr(t)}getSetObserver(t){return or(t)}createObserver(t,e){var i,n,s,r;if(!(t instanceof Object))return new va(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return Qs(t).getLengthObserver();break;case"size":if(t instanceof Map)return mr(t).getLengthObserver();if(t instanceof Set)return or(t).getLengthObserver();break;default:if(t instanceof Array&&oe(e))return Qs(t).getIndexObserver(Number(e))}let o=$a(t,e);if(void 0===o){let i=Aa(t);for(;null!==i&&(o=$a(i,e),void 0===o);)i=Aa(i)}if(void 0!==o&&!Gi.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(n=null===(i=o.get)||void 0===i?void 0:i.getObserver)&&void 0!==n?n:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?la.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new ba(t,e)}N(t,e,i){if(this.F.length>0)for(const n of this.F){const s=n.getObserver(t,e,i,this);if(null!=s)return s}return null}V(t,e,i){return!0===i.doNotCache?i:void 0===t.$observers?(Xi(t,"$observers",{value:{[e]:i}}),i):t.$observers[e]=i}}Ca.inject=[ha,ka];const Aa=Object.getPrototypeOf,$a=Object.getOwnPropertyDescriptor;Fe.createInterface("IObservation",(t=>t.singleton(Ea)));class Ea{constructor(t){this.oL=t}static get inject(){return[xa]}run(t){const e=new Ta(this.oL,t);return e.run(),e}}class Ta{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{po(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,fo(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}Tr(Ta);const Ra=new Map;function Ia(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}class Oa{constructor(t,e={}){var i,n,s,r,o,a,l,c,h,u,d,p,f;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,this.decodeURI="decodeURI"in e?e.decodeURI:t.decodeURI,this.decodeURIComponent="decodeURIComponent"in e?e.decodeURIComponent:t.decodeURIComponent,this.encodeURI="encodeURI"in e?e.encodeURI:t.encodeURI,this.encodeURIComponent="encodeURIComponent"in e?e.encodeURIComponent:t.encodeURIComponent,this.Date="Date"in e?e.Date:t.Date,this.Reflect="Reflect"in e?e.Reflect:t.Reflect,this.clearInterval="clearInterval"in e?e.clearInterval:null!==(n=null===(i=t.clearInterval)||void 0===i?void 0:i.bind(t))&&void 0!==n?n:Ia("clearInterval"),this.clearTimeout="clearTimeout"in e?e.clearTimeout:null!==(r=null===(s=t.clearTimeout)||void 0===s?void 0:s.bind(t))&&void 0!==r?r:Ia("clearTimeout"),this.queueMicrotask="queueMicrotask"in e?e.queueMicrotask:null!==(a=null===(o=t.queueMicrotask)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:Ia("queueMicrotask"),this.setInterval="setInterval"in e?e.setInterval:null!==(c=null===(l=t.setInterval)||void 0===l?void 0:l.bind(t))&&void 0!==c?c:Ia("setInterval"),this.setTimeout="setTimeout"in e?e.setTimeout:null!==(u=null===(h=t.setTimeout)||void 0===h?void 0:h.bind(t))&&void 0!==u?u:Ia("setTimeout"),this.console="console"in e?e.console:t.console,this.performanceNow="performanceNow"in e?e.performanceNow:null!==(f=null===(p=null===(d=t.performance)||void 0===d?void 0:d.now)||void 0===p?void 0:p.bind(t.performance))&&void 0!==f?f:Ia("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new La(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let i=Ra.get(t);return void 0===i&&Ra.set(t,i=new Oa(t,e)),i}static set(t,e){Ra.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}function Pa(t){return t.persistent}class La{constructor(t,e,i){this.platform=t,this.$request=e,this.$cancel=i,this.t=void 0,this.i=0,this.processing=[],this.pending=[],this.delayed=[],this.flushRequested=!1,this.h=void 0,this.taskPool=[],this.u=0,this.T=0,this.$=0,this.I=()=>{this.flushRequested||(this.flushRequested=!0,this.T=this.platform.performanceNow(),this.$request())},this.M=new Va(t.console)}get isEmpty(){return 0===this.i&&0===this.processing.length&&0===this.pending.length&&0===this.delayed.length}get P(){return 0===this.i&&this.processing.every(Pa)&&this.pending.every(Pa)&&this.delayed.every(Pa)}flush(t=this.platform.performanceNow()){if(this.flushRequested=!1,this.$=t,void 0===this.t){if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}let e;for(;this.processing.length>0;)if((e=this.processing.shift()).run(),1===e.status){if(!0===e.suspend)return this.t=e,void this.I();++this.i}if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}if((this.processing.length>0||this.delayed.length>0||this.i>0)&&this.I(),void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}}else this.I()}cancel(){this.flushRequested&&(this.$cancel(),this.flushRequested=!1)}async yield(){this.isEmpty||(void 0===this.h&&(this.h=qa()),await this.h)}queueTask(t,e){const{delay:i,preempt:n,persistent:s,reusable:r,suspend:o}={...Fa,...e};if(n){if(i>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(s)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}0===this.processing.length&&this.I();const a=this.platform.performanceNow();let l;if(r){const e=this.taskPool,c=this.u-1;c>=0?(l=e[c],e[c]=void 0,this.u=c,l.reuse(a,i,n,s,o,t)):l=new Na(this.M,this,a,a+i,n,s,o,r,t)}else l=new Na(this.M,this,a,a+i,n,s,o,r,t);return n?this.processing[this.processing.length]=l:0===i?this.pending[this.pending.length]=l:this.delayed[this.delayed.length]=l,l}remove(t){let e=this.processing.indexOf(t);if(e>-1)this.processing.splice(e,1);else if(e=this.pending.indexOf(t),e>-1)this.pending.splice(e,1);else{if(e=this.delayed.indexOf(t),!(e>-1))throw new Error(`Task #${t.id} could not be found`);this.delayed.splice(e,1)}}returnToPool(t){this.taskPool[this.u++]=t}resetPersistentTask(t){t.reset(this.platform.performanceNow()),t.createdTime===t.queueTime?this.pending[this.pending.length]=t:this.delayed[this.delayed.length]=t}completeAsyncTask(t){var e;if(!0===t.suspend){if(this.t!==t)throw new Error(`Async task completion mismatch: suspenderTask=${null===(e=this.t)||void 0===e?void 0:e.id}, task=${t.id}`);this.t=void 0}else--this.i;if(void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class Ma extends Error{constructor(t){super("Task was canceled."),this.task=t}}let ja=0;var Ua,Ba;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(Ua||(Ua={}));class Na{constructor(t,e,i,n,s,r,o,a,l){this.taskQueue=e,this.createdTime=i,this.queueTime=n,this.preempt=s,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=l,this.id=++ja,this.R=void 0,this.A=void 0,this.q=void 0,this.C=0,this.M=t}get result(){const t=this.q;if(void 0===t)switch(this.C){case 0:{const t=this.q=qa();return this.R=t.resolve,this.A=t.reject,t}case 1:throw new Error("Trying to await task from within task will cause a deadlock.");case 2:return this.q=Promise.resolve();case 3:return this.q=Promise.reject(new Ma(this))}return t}get status(){return this.C}run(t=this.taskQueue.platform.performanceNow()){if(0!==this.C)throw new Error(`Cannot run task in ${this.C} state`);const{persistent:e,reusable:i,taskQueue:n,callback:s,R:r,A:o,createdTime:a}=this;let l;this.C=1;try{l=s(t-a),l instanceof Promise?l.then((t=>{this.persistent?n.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),n.completeAsyncTask(this),void 0!==r&&r(t),!this.persistent&&i&&n.returnToPool(this)})).catch((t=>{if(this.persistent||this.dispose(),n.completeAsyncTask(this),void 0===o)throw t;o(t)})):(this.persistent?n.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),void 0!==r&&r(l),!this.persistent&&i&&n.returnToPool(this))}catch(t){if(this.persistent||this.dispose(),void 0===o)throw t;o(t)}}cancel(){if(0===this.C){const t=this.taskQueue,e=this.reusable,i=this.A;return t.remove(this),t.isEmpty&&t.cancel(),this.C=3,this.dispose(),e&&t.returnToPool(this),void 0!==i&&i(new Ma(this)),!0}return!(1!==this.C||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.C=0,this.R=void 0,this.A=void 0,this.q=void 0}reuse(t,e,i,n,s,r){this.createdTime=t,this.queueTime=t+e,this.preempt=i,this.persistent=n,this.suspend=s,this.callback=r,this.C=0}dispose(){this.callback=void 0,this.R=void 0,this.A=void 0,this.q=void 0}}class Va{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,i){if(e instanceof La){const n=`processing=${e.processing.length} pending=${e.pending.length} delayed=${e.delayed.length} flushReq=${e.flushRequested} susTask=${!!e.t}`;this.console.log(`${t}[Q.${i}] ${n}`)}else{const n=e.id,s=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,l=e.persistent,c=e.suspend,h=function(t){switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}}(e.C),u=`id=${n} created=${s} queue=${r} preempt=${o} persistent=${l} reusable=${a} status=${h} suspend=${c}`;this.console.log(`${t}[T.${i}] ${u}`)}}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(Ba||(Ba={}));const Fa={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let Da,Ha;function za(t,e){Da=t,Ha=e}function qa(){const t=new Promise(za);return t.resolve=Da,t.reject=Ha,t}const Wa=new Map;class Ka extends Oa{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver,window,document,location,history,navigator,customElements".split(",").forEach((i=>{this[i]=i in e?e[i]:t[i]})),"fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((i=>{var n,s;this[i]=i in e?e[i]:null!==(s=null===(n=t[i])||void 0===n?void 0:n.bind(t))&&void 0!==s?s:function(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}(i)})),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new La(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new La(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let i=Wa.get(t);return void 0===i&&Wa.set(t,i=new Ka(t,e)),i}static set(t,e){Wa.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}function Za(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function _a(t,e){return function(i,n){e(i,n,t)}}const Qa=Qt.getOwn,Ga=Qt.hasOwn,Xa=Qt.define,{annotation:Ya,resource:Ja}=Oe,tl=Ya.keyFor,el=Ja.keyFor,il=Ja.appendTo,nl=Ya.appendTo,sl=Ya.getKeys,rl=()=>Object.create(null),ol=Object.prototype.hasOwnProperty,al=rl(),ll=(t,e,i)=>{if(!0===al[e])return!0;if(!ul(e))return!1;const n=e.slice(0,5);return al[e]="aria-"===n||"data-"===n||i.isStandardSvgAttribute(t,e)},cl=t=>t instanceof Promise,hl=t=>"function"==typeof t,ul=t=>"string"==typeof t,dl=Object.defineProperty,pl=t=>{throw t};function fl(t,e){let i;function n(t,e){arguments.length>1&&(i.property=e),Xa(gl,bl.create(e,t,i),t.constructor,e),nl(t.constructor,ml.keyFrom(e))}return arguments.length>1?(i={},void n(t,e)):ul(t)?(i={},n):(i=void 0===t?{}:t,n)}function vl(t){return t.startsWith(gl)}const gl=tl("bindable"),ml=Object.freeze({name:gl,keyFrom:t=>`${gl}:${t}`,from(t,...e){const i={},n=Array.isArray;function s(e){i[e]=bl.create(e,t)}function r(e,n){i[e]=n instanceof bl?n:bl.create(e,t,n)}return e.forEach((function(t){n(t)?t.forEach(s):t instanceof bl?i[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>r(e,t[e])))})),i},for(t){let e;const i={add(n){let s,r;return ul(n)?(s=n,r={property:s}):(s=n.property,r=n),e=bl.create(s,t,r),Ga(gl,t,s)||nl(t,ml.keyFrom(s)),Xa(gl,e,t,s),i},mode:t=>(e.mode=t,i),callback:t=>(e.callback=t,i),attribute:t=>(e.attribute=t,i),primary:()=>(e.primary=!0,i),set:t=>(e.set=t,i)};return i},getAll(t){const e=gl.length+1,i=[],n=we(t);let s,r,o,a,l=n.length,c=0;for(;--l>=0;)for(o=n[l],s=sl(o).filter(vl),r=s.length,a=0;a<r;++a)i[c++]=Qa(gl,o,s[a].slice(e));return i}});class bl{constructor(t,e,i,n,s,r){this.attribute=t,this.callback=e,this.mode=i,this.primary=n,this.property=s,this.set=r}static create(t,e,i={}){return new bl(ye(i.attribute,de(t)),ye(i.callback,`${t}Changed`),ye(i.mode,as.toView),ye(i.primary,!1),ye(i.property,t),ye(i.set,function(t,e,i={}){var n,s,r;const o=null!==(s=null!==(n=i.type)&&void 0!==n?n:Reflect.getMetadata("design:type",e,t))&&void 0!==s?s:null;if(null==o)return ki;let a;switch(o){case Number:case Boolean:case String:case BigInt:a=o;break;default:{const t=o.coerce;a="function"==typeof t?t.bind(o):null!==(r=yl.for(o))&&void 0!==r?r:ki;break}}return a===ki?a:function(t,e){return function(i,n){var s;return(null==n?void 0:n.enableCoercion)?(null!=e?e:null===(s=null==n?void 0:n.coerceNullish)||void 0===s||!s)&&null==i?i:t(i,n):i}}(a,i.nullable)}(t,e,i)))}}const yl={key:tl("coercer"),define(t,e){Xa(yl.key,t[e].bind(t),t)},for:t=>Qa(yl.key,t)};class wl{constructor(t,e,i,n,s,r){this.set=n,this.$controller=s,this.t=r,this.v=void 0,this.ov=void 0,this.f=0;const o=t[i],a=t.propertyChanged,l=this.i=hl(o),c=this.u=hl(a),h=this.hs=n!==ki;let u;this.o=t,this.k=e,this.cb=l?o:ki,this.C=c?a:ki,void 0!==this.cb||c||h?(this.iO=!0,u=t[e],this.v=h&&void 0!==u?n(u,this.t):u,this.A()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t,e){this.hs&&(t=this.set(t,this.t));const i=this.v;if(this.iO){if(Object.is(t,i))return;this.v=t,this.ov=i,this.f=e,(null==this.$controller||this.$controller.isBound)&&(this.i&&this.cb.call(this.o,t,i,e),this.u&&this.C.call(this.o,this.k,t,i,e)),this.queue.add(this)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.t):this.o[this.k],this.A()),this.subs.add(t)}flush(){xl=this.ov,this.ov=this.v,this.subs.notify(this.v,xl,this.f)}A(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t,0)}})}}let xl;fs(wl),ws(wl);class kl{constructor(t,e,i,n){if(this.chars=t,this.repeat=e,this.isSymbol=i,this.isInverted=n,n)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.B;break;default:this.has=this.I}else switch(t.length){case 0:this.has=this.T;break;case 1:this.has=this.P;break;default:this.has=this.$}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}$(t){return this.chars.includes(t)}P(t){return this.chars===t}T(t){return!1}I(t){return!this.chars.includes(t)}B(t){return this.chars!==t}R(t){return!0}}class Sl{constructor(){this.parts=wi,this.O="",this.L={},this.q={}}get pattern(){const t=this.O;return""===t?null:t}set pattern(t){null==t?(this.O="",this.parts=wi):(this.O=t,this.parts=this.q[t])}append(t,e){const i=this.L;void 0===i[t]?i[t]=e:i[t]+=e}next(t){const e=this.L;let i;void 0!==e[t]&&(i=this.q,void 0===i[t]?i[t]=[e[t]]:i[t].push(e[t]),e[t]=void 0)}}class Cl{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,i=e.length;let n=null,s=0;for(;s<i;++s)if(n=e[s],t.equals(n.charSpec))return n;return null}append(t,e){const i=this.patterns;i.includes(e)||i.push(e);let n=this.findChild(t);return null==n&&(n=new Cl(t,e),this.nextStates.push(n),t.repeat&&n.nextStates.push(n)),n}findMatches(t,e){const i=[],n=this.nextStates,s=n.length;let r=0,o=null,a=0,l=0;for(;a<s;++a)if(o=n[a],o.charSpec.has(t))if(i.push(o),r=o.patterns.length,l=0,o.charSpec.isSymbol)for(;l<r;++l)e.next(o.patterns[l]);else for(;l<r;++l)e.append(o.patterns[l],t);return i}}class Al{constructor(t){this.text=t;const e=this.len=t.length,i=this.specs=[];let n=0;for(;e>n;++n)i.push(new kl(t[n],!1,!1,!1))}eachChar(t){const e=this.len,i=this.specs;let n=0;for(;e>n;++n)t(i[n])}}class $l{constructor(t){this.text="PART",this.spec=new kl(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class El{constructor(t){this.text=t,this.spec=new kl(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class Tl{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Rl=Fe.createInterface("ISyntaxInterpreter",(t=>t.singleton(Il)));class Il{constructor(){this.rootState=new Cl(null),this.initialStates=[this.rootState]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let i,n,s,r,o,a,l,c,h=0;for(;e>h;){for(i=this.rootState,n=t[h],s=n.pattern,r=new Tl,o=this.parse(n,r),a=o.length,l=t=>{i=i.append(t,s)},c=0;a>c;++c)o[c].eachChar(l);i.types=r,i.isEndpoint=!0,++h}}interpret(t){const e=new Sl,i=t.length;let n,s=this.initialStates,r=0;for(;r<i&&(s=this.getNextStates(s,t.charAt(r),e),0!==s.length);++r);return s=s.filter(Ol),s.length>0&&(s.sort(Pl),n=s[0],n.charSpec.isSymbol||e.next(n.pattern),e.pattern=n.pattern),e}getNextStates(t,e,i){const n=[];let s=null;const r=t.length;let o=0;for(;o<r;++o)s=t[o],n.push(...s.findMatches(e,i));return n}parse(t,e){const i=[],n=t.pattern,s=n.length,r=t.symbols;let o=0,a=0,l="";for(;o<s;)l=n.charAt(o),0!==r.length&&r.includes(l)?o!==a?(i.push(new Al(n.slice(a,o))),++e.statics,a=o):(i.push(new El(n.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===l&&"PART"===n.slice(o,o+4)?(a=o+=4,i.push(new $l(r)),++e.dynamics):++o;return a!==o&&(i.push(new Al(n.slice(a,o))),++e.statics),i}}function Ol(t){return t.isEndpoint}function Pl(t,e){const i=t.types,n=e.types;return i.statics!==n.statics?n.statics-i.statics:i.dynamics!==n.dynamics?n.dynamics-i.dynamics:i.symbols!==n.symbols?n.symbols-i.symbols:0}class Ll{constructor(t,e,i,n){this.rawName=t,this.rawValue=e,this.target=i,this.command=n}}const Ml=Fe.createInterface("IAttributePattern"),jl=Fe.createInterface("IAttributeParser",(t=>t.singleton(Ul)));class Ul{constructor(t,e){this.U={},this._=t;const i=this.F={},n=e.reduce(((t,e)=>{const n=Dl(e.constructor);return n.forEach((t=>i[t.pattern]=e)),t.concat(n)}),wi);t.add(n)}parse(t,e){let i=this.U[t];null==i&&(i=this.U[t]=this._.interpret(t));const n=i.pattern;return null==n?new Ll(t,e,t,null):this.F[n][n](t,e,i.parts)}}function Bl(...t){return function(e){return Hl.define(t,e)}}Ul.inject=[Rl,Qe(Ml)];class Nl{constructor(t){this.Type=t,this.name=void 0}register(t){vi.singleton(Ml,this.Type).register(t)}}const Vl=el("attribute-pattern"),Fl="attribute-pattern-definitions",Dl=t=>Oe.annotation.get(t,Fl),Hl=Object.freeze({name:Vl,definitionAnnotationKey:Fl,define(t,e){const i=new Nl(e);return Xa(Vl,i,e),il(e,Vl),Oe.annotation.set(e,Fl,t),nl(e,Fl),e},getPatternDefinitions:Dl});let zl=class{"PART.PART"(t,e,i){return new Ll(t,e,i[0],i[1])}"PART.PART.PART"(t,e,i){return new Ll(t,e,i[0],i[2])}};zl=Za([Bl({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],zl);let ql=class{ref(t,e,i){return new Ll(t,e,"element","ref")}"PART.ref"(t,e,i){return new Ll(t,e,i[0],"ref")}};ql=Za([Bl({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],ql);let Wl=class{":PART"(t,e,i){return new Ll(t,e,i[0],"bind")}};Wl=Za([Bl({pattern:":PART",symbols:":"})],Wl);let Kl=class{"@PART"(t,e,i){return new Ll(t,e,i[0],"trigger")}};Kl=Za([Bl({pattern:"@PART",symbols:"@"})],Kl);let Zl=class{"...$attrs"(t,e,i){return new Ll(t,e,"","...$attrs")}};Zl=Za([Bl({pattern:"...$attrs",symbols:""})],Zl);const _l=Si,Ql=Fe.createInterface("ISVGAnalyzer",(t=>t.singleton(Gl)));class Gl{isStandardSvgAttribute(t,e){return!1}}const Xl=Fe.createInterface("IAttrMapper",(t=>t.singleton(Yl)));class Yl{constructor(t){this.svg=t,this.fns=[],this.N=rl(),this.W=rl(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[Ql]}useMapping(t){var e,i;let n,s,r,o;for(r in t)for(o in n=t[r],s=null!==(e=(i=this.N)[r])&&void 0!==e?e:i[r]=rl(),n){if(void 0!==s[o])throw Jl(o,r);s[o]=n[o]}}useGlobalMapping(t){const e=this.W;for(const i in t){if(void 0!==e[i])throw Jl(i,"*");e[i]=t[i]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((i=>i(t,e)))}map(t,e){var i,n,s;return null!==(s=null!==(n=null===(i=this.N[t.nodeName])||void 0===i?void 0:i[e])&&void 0!==n?n:this.W[e])&&void 0!==s?s:ll(t,e,this.svg)?e:null}}function Jl(t,e){return new Error(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}class tc{constructor(t,e,i,n,s){this.sourceExpression=t,this.target=e,this.targetProperty=i,this.locator=s,this.interceptor=this,this.isBound=!1,this.targetObserver=n.getAccessor(e,i)}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const i=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(e,"$event"),i}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.targetObserver.setValue((t=>this.interceptor.callSource(t)),t,this.target,this.targetProperty),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t,this.target,this.targetProperty),this.isBound=!1)}observe(t,e){}handleChange(t,e,i){}}class ec{constructor(t,e,i){this.type=7,this.v=null,this.ov=null,this.H=!1,this.f=0,this.o=t,this.G=e,this.X=i}getValue(){return this.v}setValue(t,e){this.v=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H)switch(this.H=!1,this.ov=this.v,this.X){case"class":this.o.classList.toggle(this.G,!!this.v);break;case"style":{let t="",e=this.v;ul(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.G,e,t);break}default:null==this.v?this.o.removeAttribute(this.X):this.o.setAttribute(this.X,String(this.v))}}handleMutation(t){let e=!1;for(let i=0,n=t.length;n>i;++i){const n=t[i];if("attributes"===n.type&&n.attributeName===this.G){e=!0;break}}if(e){let t;switch(this.X){case"class":t=this.o.classList.contains(this.G);break;case"style":t=this.o.style.getPropertyValue(this.G);break;default:throw new Error(`AUR0651:${this.X}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.H=!1,this.f=0,this.queue.add(this))}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.G),ic(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&nc(this.o,this)}flush(){oc=this.ov,this.ov=this.v,this.subs.notify(this.v,oc,this.f)}}fs(ec),ws(ec);const ic=(t,e,i)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(sc)).observe(e,{attributes:!0}),e.$eMObs.add(i)},nc=(t,e)=>{const i=t.$eMObs;return!(!i||!i.delete(e)||(0===i.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},sc=t=>{t[0].target.$eMObs.forEach(rc,t)};function rc(t){t.handleMutation(this)}let oc;class ac{constructor(t){this.b=t}handleChange(t,e,i){const n=this.b;t!==n.sourceExpression.evaluate(i,n.$scope,n.locator,null)&&n.updateSource(t,i)}}const{oneTime:lc,toView:cc,fromView:hc}=as,uc=cc|lc,dc={reusable:!1,preempt:!0};class pc{constructor(t,e,i,n,s,r,o){this.sourceExpression=t,this.targetAttribute=i,this.targetProperty=n,this.mode=s,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=e,this.p=o.get(_l),this.oL=r}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,i){if(!this.isBound)return;i|=this.persistentFlags;const n=this.mode,s=this.interceptor,r=this.sourceExpression,o=this.$scope,a=this.locator,l=this.targetObserver,c=0==(2&i)&&(4&l.type)>0;let h,u=!1;(10082!==r.$kind||this.obs.count>1)&&(u=0==(n&lc),u&&this.obs.version++,t=r.evaluate(i,o,a,s),u&&this.obs.clear()),t!==this.value&&(this.value=t,c?(h=this.task,this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,s.updateTarget(t,i)}),dc),null==h||h.cancel()):s.updateTarget(t,i))}$bind(t,e){var i;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.persistentFlags=97&t,this.$scope=e;let n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor);let s=this.targetObserver;s||(s=this.targetObserver=new ec(this.target,this.targetProperty,this.targetAttribute)),n=this.sourceExpression;const r=this.mode,o=this.interceptor;let a=!1;r&uc&&(a=(r&cc)>0,o.updateTarget(this.value=n.evaluate(t,e,this.locator,a?o:null),t)),r&hc&&s.subscribe(null!==(i=this.targetSubscriber)&&void 0!==i?i:this.targetSubscriber=new ac(o)),this.isBound=!0}$unbind(t){var e;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.obs.clearAll(),this.isBound=!1)}}Tr(pc);const{toView:fc}=as,vc={reusable:!1,preempt:!0};class gc{constructor(t,e,i,n,s,r,o){this.interpolation=e,this.target=i,this.targetProperty=n,this.mode=s,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.oL=t,this.targetObserver=t.getAccessor(i,n);const a=e.expressions,l=this.partBindings=Array(a.length),c=a.length;let h=0;for(;c>h;++h)l[h]=new mc(a[h],i,n,r,t,this)}updateTarget(t,e){const i=this.partBindings,n=this.interpolation.parts,s=i.length;let r="",o=0;if(1===s)r=n[0]+i[0].value+n[1];else for(r=n[0];s>o;++o)r+=i[o].value+n[o+1];const a=this.targetObserver;let l;0==(2&e)&&(4&a.type)>0?(l=this.task,this.task=this.taskQueue.queueTask((()=>{this.task=null,a.setValue(r,e,this.target,this.targetProperty)}),vc),null==l||l.cancel(),l=null):a.setValue(r,e,this.target,this.targetProperty)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const i=this.partBindings,n=i.length;let s=0;for(;n>s;++s)i[s].$bind(t,e);this.updateTarget(void 0,t)}$unbind(t){var e;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const i=this.partBindings,n=i.length;let s=0;for(;n>s;++s)i[s].interceptor.$unbind(t);null===(e=this.task)||void 0===e||e.cancel(),this.task=null}}class mc{constructor(t,e,i,n,s,r){this.sourceExpression=t,this.target=e,this.targetProperty=i,this.locator=n,this.owner=r,this.interceptor=this,this.mode=as.toView,this.value="",this.task=null,this.isBound=!1,this.oL=s}handleChange(t,e,i){if(!this.isBound)return;const n=this.sourceExpression,s=this.obs;let r=!1;10082===n.$kind&&1===s.count||(r=(this.mode&fc)>0,r&&s.version++,t=n.evaluate(i,this.$scope,this.locator,r?this.interceptor:null),r&&s.clear()),t!=this.value&&(this.value=t,t instanceof Array&&this.observeCollection(t),this.owner.updateTarget(t,i))}handleCollectionChange(t,e){this.owner.updateTarget(void 0,e)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&fc)>0?this.interceptor:null),this.value instanceof Array&&this.observeCollection(this.value)}$unbind(t){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll())}}Tr(mc);class bc{constructor(t,e,i,n,s,r){this.sourceExpression=t,this.target=e,this.locator=i,this.p=s,this.strict=r,this.interceptor=this,this.mode=as.toView,this.value="",this.task=null,this.isBound=!1,this.oL=n}updateTarget(t,e){var i,n;const s=this.target,r=this.p.Node,o=this.value;this.value=t,o instanceof r&&(null===(i=o.parentNode)||void 0===i||i.removeChild(o)),t instanceof r?(s.textContent="",null===(n=s.parentNode)||void 0===n||n.insertBefore(t,s)):s.textContent=String(t)}handleChange(t,e,i){var n;if(!this.isBound)return;const s=this.sourceExpression,r=this.obs;let o=!1;if(10082===s.$kind&&1===r.count||(o=(this.mode&fc)>0,o&&r.version++,i|=this.strict?1:0,t=s.evaluate(i,this.$scope,this.locator,o?this.interceptor:null),o&&r.clear()),t===this.value)return null===(n=this.task)||void 0===n||n.cancel(),void(this.task=null);0==(2&i)?this.queueUpdate(t,i):this.updateTarget(t,i)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),t|=this.strict?1:0;const i=this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&fc)>0?this.interceptor:null);i instanceof Array&&this.observeCollection(i),this.updateTarget(i,t)}$unbind(t){var e;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),null===(e=this.task)||void 0===e||e.cancel(),this.task=null)}queueUpdate(t,e){const i=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(t,e)}),vc),null==i||i.cancel()}}Tr(bc);class yc{constructor(t,e,i,n,s=!1){this.sourceExpression=t,this.targetProperty=e,this.locator=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.target=null,this.oL=i,this.Y=s}handleChange(t,e,i){if(!this.isBound)return;const n=this.target,s=this.targetProperty,r=n[s];this.obs.version++,t=this.sourceExpression.evaluate(i,this.$scope,this.locator,this.interceptor),this.obs.clear(),t!==r&&(n[s]=t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.target=this.Y?e.bindingContext:e.overrideContext;const i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|t,e,this.locator,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),this.isBound=!1}}Tr(yc);const{oneTime:wc,toView:xc,fromView:kc}=as,Sc=xc|wc,Cc={reusable:!1,preempt:!0};class Ac{constructor(t,e,i,n,s,r,o){this.sourceExpression=t,this.target=e,this.targetProperty=i,this.mode=n,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null,this.oL=s}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,i){if(!this.isBound)return;const n=0==(2&(i|=this.persistentFlags))&&(4&this.targetObserver.type)>0,s=this.obs;let r=!1;(10082!==this.sourceExpression.$kind||s.count>1)&&(r=this.mode>wc,r&&s.version++,t=this.sourceExpression.evaluate(i,this.$scope,this.locator,this.interceptor),r&&s.clear()),n?($c=this.task,this.task=this.taskQueue.queueTask((()=>{this.interceptor.updateTarget(t,i),this.task=null}),Cc),null==$c||$c.cancel(),$c=null):this.interceptor.updateTarget(t,i)}$bind(t,e){var i;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}t|=1,this.persistentFlags=97&t,this.$scope=e;let n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor);const s=this.oL,r=this.mode;let o=this.targetObserver;o||(o=r&kc?s.getObserver(this.target,this.targetProperty):s.getAccessor(this.target,this.targetProperty),this.targetObserver=o),n=this.sourceExpression;const a=this.interceptor,l=(r&xc)>0;r&Sc&&a.updateTarget(n.evaluate(t,e,this.locator,l?a:null),t),r&kc&&(o.subscribe(null!==(i=this.targetSubscriber)&&void 0!==i?i:this.targetSubscriber=new ac(a)),l||a.updateSource(o.getValue(this.target,this.targetProperty),t)),this.isBound=!0}$unbind(t){this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,$c=this.task,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=$c&&($c.cancel(),$c=this.task=null),this.obs.clearAll(),this.isBound=!1)}}Tr(Ac);let $c=null;class Ec{constructor(t,e,i){this.sourceExpression=t,this.target=e,this.locator=i,this.interceptor=this,this.isBound=!1,this.$scope=void 0}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(t,this.$scope,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,null)===this.target&&e.assign(t,this.$scope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.isBound=!1}observe(t,e){}handleChange(t,e,i){}}const Tc=Fe.createInterface("IAppTask");class Rc{constructor(t,e,i){this.c=void 0,this.slot=t,this.k=e,this.cb=i}register(t){return this.c=t.register(vi.instance(Tc,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const Ic=Object.freeze({beforeCreate:Oc("beforeCreate"),hydrating:Oc("hydrating"),hydrated:Oc("hydrated"),beforeActivate:Oc("beforeActivate"),afterActivate:Oc("afterActivate"),beforeDeactivate:Oc("beforeDeactivate"),afterDeactivate:Oc("afterDeactivate")});function Oc(t){return function(e,i){return hl(i)?new Rc(t,e,i):new Rc(t,null,e)}}function Pc(t){return t.startsWith(Lc)}const Lc=tl("children-observer"),Mc=Object.freeze({name:Lc,keyFrom:t=>`${Lc}:${t}`,from(...t){const e={},i=Array.isArray;function n(t){e[t]=Uc.create(t)}function s(t,i){e[t]=Uc.create(t,i)}return t.forEach((function(t){i(t)?t.forEach(n):t instanceof Uc?e[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>s(e,t)))})),e},getAll(t){const e=Lc.length+1,i=[],n=we(t);let s,r,o,a=n.length,l=0;for(;--a>=0;){o=n[a],s=sl(o).filter(Pc),r=s.length;for(let t=0;t<r;++t)i[l++]=Qa(Lc,o,s[t].slice(e))}return i}}),jc={childList:!0};class Uc{constructor(t,e,i,n,s,r){this.callback=t,this.property=e,this.options=i,this.query=n,this.filter=s,this.map=r}static create(t,e={}){var i;return new Uc(ye(e.callback,`${t}Changed`),ye(e.property,t),null!==(i=e.options)&&void 0!==i?i:jc,e.query,e.filter,e.map)}}class Bc{constructor(t,e,i,n,s=Nc,r=Vc,o=Fc,a){this.controller=t,this.obj=e,this.propertyKey=i,this.query=s,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[n],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){var t;this.observing||(this.observing=!0,this.children=this.get(),(null!==(t=this.observer)&&void 0!==t?t:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.Z()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=wi)}Z(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(t,e,i,n){var s;const r=e(t),o=r.length,a=[];let l,c,h,u=0;for(;u<o;++u)l=r[u],c=uh.for(l,Dc),h=null!==(s=null==c?void 0:c.viewModel)&&void 0!==s?s:null,i(l,c,h)&&a.push(n(l,c,h));return a}(this.controller,this.query,this.filter,this.map)}}function Nc(t){return t.host.childNodes}function Vc(t,e,i){return!!i}function Fc(t,e,i){return i}fs()(Bc);const Dc={optional:!0};function Hc(t){return function(e){return _c.define(t,e)}}function zc(t){return function(e){return _c.define(ul(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class qc{constructor(t,e,i,n,s,r,o,a,l,c){this.Type=t,this.name=e,this.aliases=i,this.key=n,this.defaultBindingMode=s,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=l,this.dependencies=c}get type(){return 2}static create(t,e){let i,n;return ul(t)?(i=t,n={name:i}):(i=t.name,n=t),new qc(e,ye(Zc(e,"name"),i),be(Zc(e,"aliases"),n.aliases,e.aliases),_c.keyFrom(i),ye(Zc(e,"defaultBindingMode"),n.defaultBindingMode,e.defaultBindingMode,as.toView),ye(Zc(e,"isTemplateController"),n.isTemplateController,e.isTemplateController,!1),ml.from(e,...ml.getAll(e),Zc(e,"bindables"),e.bindables,n.bindables),ye(Zc(e,"noMultiBindings"),n.noMultiBindings,e.noMultiBindings,!1),be(Yc.getAnnotation(e),e.watches),be(Zc(e,"dependencies"),n.dependencies,e.dependencies))}register(t){const{Type:e,key:i,aliases:n}=this;vi.transient(i,e).register(t),vi.aliasTo(i,e).register(t),hn(n,_c,i,t)}}const Wc=el("custom-attribute"),Kc=t=>`${Wc}:${t}`,Zc=(t,e)=>Qa(tl(e),t),_c=Object.freeze({name:Wc,keyFrom:Kc,isType:t=>hl(t)&&Ga(Wc,t),for(t,e){var i;return null!==(i=$u(t,Kc(e)))&&void 0!==i?i:void 0},define(t,e){const i=qc.create(t,e);return Xa(Wc,i,i.Type),Xa(Wc,i,i),il(e,Wc),i.Type},getDefinition(t){const e=Qa(Wc,t);if(void 0===e)throw new Error(`AUR0759:${t.name}`);return e},annotate(t,e,i){Xa(tl(e),i,t)},getAnnotation:Zc});class Qc{constructor(t,e){this.expression=t,this.callback=e}}const Gc=wi,Xc=tl("watch"),Yc=Object.freeze({name:Xc,add(t,e){let i=Qa(Xc,t);null==i&&Xa(Xc,i=[],t),i.push(e)},getAnnotation(t){var e;return null!==(e=Qa(Xc,t))&&void 0!==e?e:Gc}});function Jc(t){return function(e){return uh.define(t,e)}}const th=new WeakMap;class eh{constructor(t,e,i,n,s,r,o,a,l,c,h,u,d,p,f,v,g,m,b,y,w){this.Type=t,this.name=e,this.aliases=i,this.key=n,this.cache=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=v,this.shadowOptions=g,this.hasSlots=m,this.enhance=b,this.watches=y,this.processContent=w}get type(){return 1}static create(t,e=null){if(null===e){const i=t;if(ul(i))throw new Error(`AUR0761:${t}`);const n=je("name",i,ch);return e=hl(i.Type)?i.Type:uh.generateType(ue(n)),new eh(e,n,be(i.aliases),je("key",i,(()=>uh.keyFrom(n))),je("cache",i,nh),je("capture",i,rh),je("template",i,sh),be(i.instructions),be(i.dependencies),je("injectable",i,sh),je("needsCompile",i,oh),be(i.surrogates),ml.from(e,i.bindables),Mc.from(i.childrenObservers),je("containerless",i,rh),je("isStrictBinding",i,rh),je("shadowOptions",i,sh),je("hasSlots",i,rh),je("enhance",i,rh),je("watches",i,ah),Me("processContent",e,sh))}if(ul(t))return new eh(e,t,be(hh(e,"aliases"),e.aliases),uh.keyFrom(t),Me("cache",e,nh),Me("capture",e,rh),Me("template",e,sh),be(hh(e,"instructions"),e.instructions),be(hh(e,"dependencies"),e.dependencies),Me("injectable",e,sh),Me("needsCompile",e,oh),be(hh(e,"surrogates"),e.surrogates),ml.from(e,...ml.getAll(e),hh(e,"bindables"),e.bindables),Mc.from(...Mc.getAll(e),hh(e,"childrenObservers"),e.childrenObservers),Me("containerless",e,rh),Me("isStrictBinding",e,rh),Me("shadowOptions",e,sh),Me("hasSlots",e,rh),Me("enhance",e,rh),be(Yc.getAnnotation(e),e.watches),Me("processContent",e,sh));const i=je("name",t,ch);return new eh(e,i,be(hh(e,"aliases"),t.aliases,e.aliases),uh.keyFrom(i),Le("cache",t,e,nh),Le("capture",t,e,rh),Le("template",t,e,sh),be(hh(e,"instructions"),t.instructions,e.instructions),be(hh(e,"dependencies"),t.dependencies,e.dependencies),Le("injectable",t,e,sh),Le("needsCompile",t,e,oh),be(hh(e,"surrogates"),t.surrogates,e.surrogates),ml.from(e,...ml.getAll(e),hh(e,"bindables"),e.bindables,t.bindables),Mc.from(...Mc.getAll(e),hh(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),Le("containerless",t,e,rh),Le("isStrictBinding",t,e,rh),Le("shadowOptions",t,e,sh),Le("hasSlots",t,e,rh),Le("enhance",t,e,rh),be(t.watches,Yc.getAnnotation(e),e.watches),Le("processContent",t,e,sh))}static getOrCreate(t){if(t instanceof eh)return t;if(th.has(t))return th.get(t);const e=eh.create(t);return th.set(t,e),Xa(lh,e,e.Type),e}register(t){const{Type:e,key:i,aliases:n}=this;t.has(i,!1)||(vi.transient(i,e).register(t),vi.aliasTo(i,e).register(t),hn(n,uh,i,t))}}const ih={name:void 0,searchParents:!1,optional:!1},nh=()=>0,sh=()=>null,rh=()=>!1,oh=()=>!0,ah=()=>wi,lh=el("custom-element"),ch=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),hh=(t,e)=>Qa(tl(e),t),uh=Object.freeze({name:lh,keyFrom:t=>`${lh}:${t}`,isType:t=>hl(t)&&Ga(lh,t),for(t,e=ih){if(void 0===e.name&&!0!==e.searchParents){const i=$u(t,lh);if(null===i){if(!0===e.optional)return null;throw new Error("AUR0762")}return i}if(void 0!==e.name){if(!0!==e.searchParents){const i=$u(t,lh);if(null===i)throw new Error("AUR0763");return i.is(e.name)?i:void 0}let i=t,n=!1;for(;null!==i;){const t=$u(i,lh);if(null!==t&&(n=!0,t.is(e.name)))return t;i=Lu(i)}if(n)return;throw new Error("AUR0764")}let i=t;for(;null!==i;){const t=$u(i,lh);if(null!==t)return t;i=Lu(i)}throw new Error("AUR0765")},define(t,e){const i=eh.create(t,e);return Xa(lh,i,i.Type),Xa(lh,i,i),il(i.Type,lh),i.Type},getDefinition(t){const e=Qa(lh,t);if(void 0===e)throw new Error(`AUR0760:${t.name}`);return e},annotate:(t,e,i)=>{Xa(tl(e),i,t)},getAnnotation:hh,generateName:ch,createInjectable(){const t=function(e,i,n){return Fe.getOrCreateAnnotationParamTypes(e)[n]=t,e};return t.register=function(e){return{resolve:(e,i)=>i.has(t,!0)?i.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(i,n=e){const s=class{};return t.value=i,Reflect.defineProperty(s,"name",t),n!==e&&Object.assign(s.prototype,n),s}}()});tl("processContent");class dh{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.J={},this.tt=0,this.H=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H){this.H=!1;const t=this.value,e=this.J,i=ph(t);let n=this.tt;if(this.ov=t,i.length>0&&this.it(i),this.tt+=1,0===n)return;n-=1;for(const t in e)ol.call(e,t)&&e[t]===n&&this.obj.classList.remove(t)}}it(t){const e=this.obj,i=t.length;let n,s=0;for(;s<i;s++)n=t[s],0!==n.length&&(this.J[n]=this.tt,e.classList.add(n))}}function ph(t){if(ul(t))return fh(t);if("object"!=typeof t)return wi;if(t instanceof Array){const e=t.length;if(e>0){const i=[];let n=0;for(;e>n;++n)i.push(...ph(t[n]));return i}return wi}const e=[];let i;for(i in t)Boolean(t[i])&&(i.includes(" ")?e.push(...fh(i)):e.push(i));return e}function fh(t){const e=t.match(/\S+/g);return null===e?wi:e}Fe.createInterface("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>yh.supported(t.get(_l))?t.get(vh):t.get(gh)))));class vh{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new yh(this.p,t,this.cache,e)}}vh.inject=[_l];class gh{constructor(t){this.p=t}createStyles(t,e){return new wh(this.p,t,e)}}gh.inject=[_l];const mh=Fe.createInterface("IShadowDOMStyles"),bh=Fe.createInterface("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:ki})));class yh{constructor(t,e,i,n=null){this.sharedStyles=n,this.styleSheets=e.map((e=>{let n;return e instanceof t.CSSStyleSheet?n=e:(n=i.get(e),void 0===n&&(n=new t.CSSStyleSheet,n.replaceSync(e),i.set(e,n))),n}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class wh{constructor(t,e,i=null){this.p=t,this.localStyles=e,this.sharedStyles=i}applyTo(t){const e=this.localStyles,i=this.p;for(let n=e.length-1;n>-1;--n){const s=i.document.createElement("style");s.innerHTML=e[n],t.prepend(s)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:xh,exit:kh}=vo,{wrap:Sh,unwrap:Ch}=aa;class Ah{constructor(t,e,i,n,s){this.obj=t,this.get=i,this.cb=n,this.useProxy=s,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.value,i=this.compute();Object.is(i,e)||this.cb.call(t,i,e,t)}compute(){this.running=!0,this.obs.version++;try{return xh(this),this.value=Ch(this.get.call(void 0,this.useProxy?Sh(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,kh(this)}}}class $h{constructor(t,e,i,n,s){this.scope=t,this.locator=e,this.oL=i,this.expression=n,this.callback=s,this.interceptor=this,this.isBound=!1,this.obj=t.bindingContext}handleChange(t){const e=this.expression,i=this.obj,n=this.value;10082===e.$kind&&1===this.obs.count||(this.obs.version++,t=e.evaluate(0,this.scope,this.locator,this),this.obs.clear()),Object.is(t,n)||(this.value=t,this.callback.call(i,t,n,i))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,this.locator,this),this.obs.clear())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.value=void 0)}}Tr(Ah),Tr($h);const Eh=Fe.createInterface("ILifecycleHooks");class Th{constructor(t,e){this.definition=t,this.instance=e}}class Rh{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const i=new Set;let n=e.prototype;for(;n!==Object.prototype;){for(const t of Object.getOwnPropertyNames(n))"constructor"!==t&&i.add(t);n=Object.getPrototypeOf(n)}return new Rh(e,i)}register(t){vi.singleton(Eh,this.Type).register(t)}}const Ih=new WeakMap,Oh=tl("lifecycle-hooks"),Ph=Object.freeze({name:Oh,define(t,e){const i=Rh.create(t,e);return Xa(Oh,i,e),il(e,Oh),i.Type},resolve(t){let e=Ih.get(t);if(void 0===e){Ih.set(t,e=new Lh);const i=t.root,n=i.id===t.id?t.getAll(Eh):t.has(Eh,!1)?i.getAll(Eh).concat(t.getAll(Eh)):i.getAll(Eh);let s,r,o,a,l;for(s of n)for(a of(r=Qa(Oh,s.constructor),o=new Th(r,s),r.propertyNames))l=e[a],void 0===l?e[a]=[o]:l.push(o)}return e}});class Lh{}const Mh=Fe.createInterface("IViewFactory");class jh{constructor(t,e){this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=jh.maxCacheSize:ul(t)&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t){const e=this.cache;let i;return null!=e&&e.length>0?(i=e.pop(),i):(i=_h.$view(this,t),i)}}jh.maxCacheSize=65535;const Uh=new WeakSet;function Bh(t){return!Uh.has(t)}function Nh(t){return Uh.add(t),eh.create(t)}const Vh=el("views"),Fh=Object.freeze({name:Vh,has:t=>hl(t)&&(Ga(Vh,t)||"$views"in t),get(t){if(hl(t)&&"$views"in t){const e=t.$views.filter(Bh).map(Nh);for(const i of e)Fh.add(t,i)}let e=Qa(Vh,t);return void 0===e&&Xa(Vh,e=[],t),e},add(t,e){const i=eh.create(e);let n=Qa(Vh,t);return void 0===n?Xa(Vh,n=[i],t):n.push(i),n}}),Dh=Fe.createInterface("IViewLocator",(t=>t.singleton(Hh)));class Hh{constructor(){this.et=new WeakMap,this.st=new Map}getViewComponentForObject(t,e){if(t){const i=Fh.has(t.constructor)?Fh.get(t.constructor):[],n=hl(e)?e(t,i):this.nt(i,e);return this.rt(t,i,n)}return null}rt(t,e,i){let n,s=this.et.get(t);if(void 0===s?(s={},this.et.set(t,s)):n=s[i],void 0===n){const r=this.ot(t,e,i);n=uh.define(uh.getDefinition(r),class extends r{constructor(){super(t)}}),s[i]=n}return n}ot(t,e,i){let n,s=this.st.get(t.constructor);if(void 0===s?(s={},this.st.set(t.constructor,s)):n=s[i],void 0===n){n=uh.define(this.lt(e,i),class{constructor(t){this.viewModel=t}define(t,e,i){const n=this.viewModel;if(t.scope=dn.fromParent(t.scope,n),void 0!==n.define)return n.define(t,e,i)}});const r=n.prototype;"hydrating"in t&&(r.hydrating=function(t){this.viewModel.hydrating(t)}),"hydrated"in t&&(r.hydrated=function(t){this.viewModel.hydrated(t)}),"created"in t&&(r.created=function(t){this.viewModel.created(t)}),"binding"in t&&(r.binding=function(t,e,i){return this.viewModel.binding(t,e,i)}),"bound"in t&&(r.bound=function(t,e,i){return this.viewModel.bound(t,e,i)}),"attaching"in t&&(r.attaching=function(t,e,i){return this.viewModel.attaching(t,e,i)}),"attached"in t&&(r.attached=function(t,e){return this.viewModel.attached(t,e)}),"detaching"in t&&(r.detaching=function(t,e,i){return this.viewModel.detaching(t,e,i)}),"unbinding"in t&&(r.unbinding=function(t,e,i){return this.viewModel.unbinding(t,e,i)}),"dispose"in t&&(r.dispose=function(){this.viewModel.dispose()}),s[i]=n}return n}nt(t,e){return e||(1===t.length?t[0].name:"default-view")}lt(t,e){const i=t.find((t=>t.name===e));if(void 0===i)throw new Error(`Could not find view: ${e}`);return i}}const zh=Fe.createInterface("IRendering",(t=>t.singleton(qh)));class qh{constructor(t){this.ht=new WeakMap,this.ct=new WeakMap,this.ut=(this.ft=t.root).get(_l),this.dt=new Uu(this.ut,this.ut.document.createDocumentFragment())}get renderers(){return null==this.rs?this.rs=this.ft.getAll(bd,!1).reduce(((t,e)=>(t[e.target]=e,t)),rl()):this.rs}compile(t,e,i){if(!1!==t.needsCompile){const n=this.ht,s=e.get(md);let r=n.get(t);return null==r?n.set(t,r=s.compile(t,e,i)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new jh(e,eh.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new Uu(this.ut,t.template);let e;const i=this.ct;if(i.has(t))e=i.get(t);else{const n=this.ut,s=n.document,r=t.template;let o;null===r?e=null:r instanceof n.Node?"TEMPLATE"===r.nodeName?e=s.adoptNode(r.content):(e=s.adoptNode(s.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=s.createElement("template"),ul(r)&&(o.innerHTML=r),s.adoptNode(e=o.content)),i.set(t,e)}return null==e?this.dt:new Uu(this.ut,e.cloneNode(!0))}render(t,e,i,n){const s=i.instructions,r=this.renderers,o=e.length;if(e.length!==s.length)throw new Error(`AUR0757:${o}<>${s.length}`);let a,l,c,h=0,u=0,d=0;if(o>0)for(;o>h;){for(a=s[h],c=e[h],u=0,d=a.length;d>u;)l=a[u],r[l.type].render(t,c,l),++u;++h}if(null!=n&&(a=i.surrogates,(d=a.length)>0))for(u=0;d>u;)l=a[u],r[l.type].render(t,n,l),++u}}var Wh;qh.inject=[ze],function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(Wh||(Wh={}));const Kh={optional:!0},Zh=new WeakMap;class _h{constructor(t,e,i,n,s,r,o){switch(this.container=t,this.vmKind=e,this.definition=i,this.viewFactory=n,this.viewModel=s,this.host=r,this.id=ve("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.vt=!1,this.gt=wi,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.wt=0,this.bt=0,this.xt=0,this.location=o,this.r=t.root.get(zh),e){case 1:case 0:this.hooks=new tu(s);break;case 2:this.hooks=tu.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var t;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(t=this.parent.definition)||void 0===t?void 0:t.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(t){return Zh.get(t)}static getCachedOrThrow(t){const e=_h.getCached(t);if(void 0===e)throw new Error(`AUR0500:${t}`);return e}static $el(t,e,i,n,s,r=null){if(Zh.has(e))return Zh.get(e);s=null!=s?s:uh.getDefinition(e.constructor);const o=new _h(t,0,s,null,e,i,r),a=t.get(Ge(ou));return s.dependencies.length>0&&t.register(...s.dependencies),t.registerResolver(ou,new gi("IHydrationContext",new au(o,n,a))),Zh.set(e,o),null!=n&&!1===n.hydrate||o.hE(n,a),o}static $attr(t,e,i,n){if(Zh.has(e))return Zh.get(e);n=null!=n?n:_c.getDefinition(e.constructor);const s=new _h(t,1,n,null,e,i,null);return n.dependencies.length>0&&t.register(...n.dependencies),Zh.set(e,s),s.yt(),s}static $view(t,e){const i=new _h(t.container,2,null,t,null,null,null);return i.parent=null!=e?e:null,i.kt(),i}hE(t,e){const i=this.container,n=(this.flags,this.viewModel);let s=this.definition;if(this.scope=dn.create(n,null,!0),s.watches.length>0&&Jh(this,i,s,n),Gh(this,s,0,n),this.gt=function(t,e,i){const n=e.childrenObservers,s=Object.getOwnPropertyNames(n),r=s.length;if(r>0){const e=Qh(i),o=[];let a,l,c=0;for(;c<r;++c)a=s[c],null==e[a]&&(l=n[a],o[o.length]=e[a]=new Bc(t,i,a,l.callback,l.query,l.filter,l.map,l.options));return o}return wi}(this,s,n),this.hooks.hasDefine){const t=n.define(this,e,s);void 0!==t&&t!==s&&(s=eh.getOrCreate(t))}this.lifecycleHooks=Ph.resolve(i),s.register(i),null!==s.injectable&&i.registerResolver(s.injectable,new gi("definition.injectable",n)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){void 0!==this.lifecycleHooks.hydrating&&this.lifecycleHooks.hydrating.forEach(hu,this),this.hooks.hasHydrating&&this.viewModel.hydrating(this);const e=this.Ct=this.r.compile(this.definition,this.container,t),{shadowOptions:i,isStrictBinding:n,hasSlots:s}=e,r=this.location;if(this.isStrictBinding=n,null!==(this.hostController=uh.for(this.host,Kh))&&(this.host=this.container.root.get(_l).document.createElement(this.definition.name)),Eu(this.host,uh.name,this),Eu(this.host,this.definition.key,this),null!==i||s){if(null!=r)throw new Error("AUR0501");Eu(this.shadowRoot=this.host.attachShadow(null!=i?i:eu),uh.name,this),Eu(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=r?(Eu(r,uh.name,this),Eu(r,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.lifecycleHooks.hydrated&&this.lifecycleHooks.hydrated.forEach(uu,this),this.hooks.hasHydrated&&this.viewModel.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Ct,this.host),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(cu,this),this.hooks.hasCreated&&this.viewModel.created(this)}yt(){const t=this.definition,e=this.viewModel;t.watches.length>0&&Jh(this,this.container,t,e),Gh(this,t,this.flags,e),e.$controller=this,this.lifecycleHooks=Ph.resolve(this.container),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(cu,this),this.hooks.hasCreated&&this.viewModel.created(this)}kt(){this.Ct=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Ct.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Ct)).findTargets(),this.Ct,void 0)}activate(t,e,i,n){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`AUR0502:${this.name}`);default:throw new Error(`AUR0503:${this.name} ${su(this.state)}`)}switch(this.parent=e,i|=2,this.vmKind){case 0:this.scope.parentScope=null!=n?n:null;break;case 1:this.scope=null!=n?n:null;break;case 2:if(null==n)throw new Error("AUR0504");this.hasLockedScope||(this.scope=n)}let s;return this.isStrictBinding&&(i|=1),this.$initiator=t,this.$flags=i,this.At(),2!==this.vmKind&&null!=this.lifecycleHooks.binding&&(s=Ce(...this.lifecycleHooks.binding.map(du,this))),this.hooks.hasBinding&&(s=Ce(s,this.viewModel.binding(this.$initiator,this.parent,this.$flags))),s instanceof Promise?(this.Rt(),s.then((()=>{this.bind()})).catch((t=>{this.St(t)})),this.$promise):(this.bind(),this.$promise)}bind(){let t,e=0,i=this.gt.length;if(i>0)for(;i>e;)this.gt[e].start(),++e;if(null!==this.bindings)for(e=0,i=this.bindings.length;i>e;)this.bindings[e].$bind(this.$flags,this.scope),++e;if(2!==this.vmKind&&null!=this.lifecycleHooks.bound&&(t=Ce(...this.lifecycleHooks.bound.map(pu,this))),this.hooks.hasBound&&(t=Ce(t,this.viewModel.bound(this.$initiator,this.parent,this.$flags))),t instanceof Promise)return this.Rt(),void t.then((()=>{this.isBound=!0,this.Et()})).catch((t=>{this.St(t)}));this.isBound=!0,this.Et()}Bt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Et(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Bt(this.host);break;case 3:this.hostController.Bt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(mh,!1)?t.get(mh):t.get(bh)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.lifecycleHooks.attaching&&(t=Ce(...this.lifecycleHooks.attaching.map(fu,this))),this.hooks.hasAttaching&&(t=Ce(t,this.viewModel.attaching(this.$initiator,this.parent,this.$flags))),t instanceof Promise&&(this.Rt(),this.At(),t.then((()=>{this.It()})).catch((t=>{this.St(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.It()}deactivate(t,e,i){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`AUR0505:${this.name} ${su(this.state)}`)}this.$initiator=t,this.$flags=i,t===this&&this.Tt();let n,s=0;if(this.gt.length)for(;s<this.gt.length;++s)this.gt[s].stop();if(null!==this.children)for(s=0;s<this.children.length;++s)this.children[s].deactivate(t,this,i);if(2!==this.vmKind&&null!=this.lifecycleHooks.detaching&&(n=Ce(...this.lifecycleHooks.detaching.map(gu,this))),this.hooks.hasDetaching&&(n=Ce(n,this.viewModel.detaching(this.$initiator,this.parent,this.$flags))),n instanceof Promise&&(this.Rt(),t.Tt(),n.then((()=>{t.Dt()})).catch((e=>{t.St(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Dt(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=4|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].$unbind(t);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}16==(16&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.Pt()}Rt(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Rt())}Pt(){void 0!==this.$promise&&(bu=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,bu(),bu=void 0)}St(t){void 0!==this.$promise&&(yu=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,yu(t),yu=void 0),this.$initiator!==this&&this.parent.St(t)}At(){++this.wt,this.$initiator!==this&&this.parent.At()}It(){if(0==--this.wt){if(2!==this.vmKind&&null!=this.lifecycleHooks.attached&&(wu=Ce(...this.lifecycleHooks.attached.map(vu,this))),this.hooks.hasAttached&&(wu=Ce(wu,this.viewModel.attached(this.$initiator,this.$flags))),wu instanceof Promise)return this.Rt(),wu.then((()=>{this.state=2,this.Pt(),this.$initiator!==this&&this.parent.It()})).catch((t=>{this.St(t)})),void(wu=void 0);wu=void 0,this.state=2,this.Pt()}this.$initiator!==this&&this.parent.It()}Tt(){++this.bt}Dt(){if(0==--this.bt){this.$t(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),2!==e.vmKind&&null!=e.lifecycleHooks.unbinding&&(t=Ce(...e.lifecycleHooks.unbinding.map(mu,this))),e.hooks.hasUnbinding&&(e.debug&&e.logger.trace("unbinding()"),t=Ce(t,e.viewModel.unbinding(e.$initiator,e.parent,e.$flags))),t instanceof Promise&&(this.Rt(),this.$t(),t.then((()=>{this.Ot()})).catch((t=>{this.St(t)}))),t=void 0,e=e.next;this.Ot()}}$t(){++this.xt}Ot(){if(0==--this.xt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return _c.getDefinition(this.viewModel.constructor).name===t;case 0:return uh.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(Eu(t,uh.name,this),Eu(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(Eu(t,uh.name,this),Eu(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(Eu(t,uh.name,this),Eu(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(lu),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(Zh.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let i=0,n=e.length;i<n;++i)if(!0===e[i].accept(t))return!0}}}function Qh(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function Gh(t,e,i,n){const s=e.bindables,r=Object.getOwnPropertyNames(s),o=r.length;if(o>0){let e,i,a=0;const l=Qh(n),c=t.container,h=c.has(os,!0)?c.get(os):null;for(;a<o;++a)e=r[a],void 0===l[e]&&(i=s[e],l[e]=new wl(n,e,i.callback,i.set,t,h))}}const Xh=new Map,Yh=t=>{let e=Xh.get(t);return null==e&&(e=new Bn(t,0),Xh.set(t,e)),e};function Jh(t,e,i,n){const s=e.get(xa),r=e.get(Rr),o=i.watches,a=0===t.vmKind?t.scope:dn.create(n,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if(({expression:c,callback:h}=o[d]),h=hl(h)?h:Reflect.get(n,h),!hl(h))throw new Error(`AUR0506:${String(h)}`);hl(c)?t.addBinding(new Ah(n,s,c,h,!0)):(u=ul(c)?r.parse(c,8):Yh(c),t.addBinding(new $h(a,e,s,u,h)))}}class tu{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}tu.none=new tu({});const eu={mode:"open"};var iu,nu;function su(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(iu||(iu={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(nu||(nu={}));const ru=Fe.createInterface("IController"),ou=Fe.createInterface("IHydrationContext");class au{constructor(t,e,i){this.instruction=e,this.parent=i,this.controller=t}}function lu(t){t.dispose()}function cu(t){t.instance.created(this.viewModel,this)}function hu(t){t.instance.hydrating(this.viewModel,this)}function uu(t){t.instance.hydrated(this.viewModel,this)}function du(t){return t.instance.binding(this.viewModel,this.$initiator,this.parent,this.$flags)}function pu(t){return t.instance.bound(this.viewModel,this.$initiator,this.parent,this.$flags)}function fu(t){return t.instance.attaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function vu(t){return t.instance.attached(this.viewModel,this.$initiator,this.$flags)}function gu(t){return t.instance.detaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function mu(t){return t.instance.unbinding(this.viewModel,this.$initiator,this.parent,this.$flags)}let bu,yu,wu;const xu=Fe.createInterface("IAppRoot"),ku=Fe.createInterface("IWorkTracker",(t=>t.singleton(Su)));class Su{constructor(t){this.Lt=0,this.qt=null,this.Pt=null,this.Ut=t.scopeTo("WorkTracker")}start(){this.Ut.trace(`start(stack:${this.Lt})`),++this.Lt}finish(){if(this.Ut.trace(`finish(stack:${this.Lt})`),0==--this.Lt){const t=this.Pt;null!==t&&(this.Pt=this.qt=null,t())}}wait(){if(this.Ut.trace(`wait(stack:${this.Lt})`),null===this.qt){if(0===this.Lt)return Promise.resolve();this.qt=new Promise((t=>{this.Pt=t}))}return this.qt}}Su.inject=[Oi];class Cu{constructor(t,e,i,n){this.config=t,this.platform=e,this.container=i,this.controller=void 0,this._t=void 0,this.host=t.host,this.work=i.get(ku),n.prepare(this),i.registerResolver(e.HTMLElement,i.registerResolver(e.Element,i.registerResolver(Tu,new gi("ElementResolver",t.host)))),this._t=Se(this.Ft("beforeCreate"),(()=>{const e=t.component,n=i.createChild();let s;s=uh.isType(e)?this.container.get(e):t.component;const r={hydrate:!1,projections:null},o=this.controller=_h.$el(n,s,this.host,r);return o.hE(r,null),Se(this.Ft("hydrating"),(()=>(o.hS(null),Se(this.Ft("hydrated"),(()=>{o.hC(),this._t=void 0})))))}))}activate(){return Se(this._t,(()=>Se(this.Ft("beforeActivate"),(()=>Se(this.controller.activate(this.controller,null,2,void 0),(()=>this.Ft("afterActivate")))))))}deactivate(){return Se(this.Ft("beforeDeactivate"),(()=>Se(this.controller.deactivate(this.controller,null,0),(()=>this.Ft("afterDeactivate")))))}Ft(t){return Ce(...this.container.getAll(Tc).reduce(((e,i)=>(i.slot===t&&e.push(i.run()),e)),[]))}dispose(){var t;null===(t=this.controller)||void 0===t||t.dispose()}}class Au{}function $u(t,e){var i,n;return null!==(n=null===(i=t.$au)||void 0===i?void 0:i[e])&&void 0!==n?n:null}function Eu(t,e,i){var n,s;(null!==(n=(s=t).$au)&&void 0!==n?n:s.$au=new Au)[e]=i}const Tu=Fe.createInterface("INode"),Ru=Fe.createInterface("IEventTarget",(t=>t.cachedCallback((t=>t.has(xu,!0)?t.get(xu).host:t.get(_l).document)))),Iu=Fe.createInterface("IRenderLocation");var Ou;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(Ou||(Ou={}));const Pu=new WeakMap;function Lu(t){if(Pu.has(t))return Pu.get(t);let e=0,i=t.nextSibling;for(;null!==i;){if(8===i.nodeType)switch(i.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return i}i=i.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=uh.for(t);if(void 0===e)return null;if(2===e.mountTarget)return Lu(e.host)}return t.parentNode}function Mu(t){if(ju(t))return t;const e=t.ownerDocument.createComment("au-end"),i=t.ownerDocument.createComment("au-start");return null!==t.parentNode&&(t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(i,e)),e.$start=i,e}function ju(t){return"au-end"===t.textContent}class Uu{constructor(t,e){this.platform=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const i=e.querySelectorAll(".au");let n,s=0,r=i.length,o=this.targets=Array(r);for(;r>s;)n=i[s],"AU-M"===n.nodeName?o[s]=Mu(n):o[s]=n,++s;const a=e.childNodes,l=this.childNodes=Array(r=a.length);for(s=0;r>s;)l[s]=a[s],++s;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let i,n=this.firstChild;const s=this.lastChild;for(;null!=n&&(i=n.nextSibling,e.insertBefore(n,t),n!==s);)n=i}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e,i=this.firstChild;const n=this.lastChild;for(;null!=i&&(e=i.nextSibling,t.appendChild(i),i!==n);)i=e}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let i,n=this.firstChild;for(;null!==n&&(i=n.nextSibling,t.appendChild(n),n!==e);)n=i}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let i,n=this.firstChild;const s=this.lastChild;for(;null!=n&&(i=n.nextSibling,e.insertBefore(n,t),n!==s);)n=i}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,ju(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}const Bu=Fe.createInterface("IWindow",(t=>t.callback((t=>t.get(_l).window)))),Nu=(Fe.createInterface("ILocation",(t=>t.callback((t=>t.get(Bu).location)))),Fe.createInterface("IHistory",(t=>t.callback((t=>t.get(Bu).history)))),{[hs.capturing]:{capture:!0},[hs.bubbling]:{capture:!1}});class Vu{constructor(t,e,i){this.prevent=t,this.strategy=e,this.expAsHandler=i}}class Fu{constructor(t,e,i,n,s,r,o){this.platform=t,this.targetEvent=e,this.sourceExpression=i,this.target=n,this.eventDelegator=s,this.locator=r,this.Vt=o,this.interceptor=this,this.isBound=!1,this.handler=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;let i=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);if(delete e.$event,this.Vt.expAsHandler){if(!hl(i))throw new Error(`Handler of "${this.targetEvent}" event is not a function.`);i=i(t)}return!0!==i&&this.Vt.prevent&&t.preventDefault(),i}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e;const i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor),this.Vt.strategy===hs.none?this.target.addEventListener(this.targetEvent,this):this.handler=this.eventDelegator.addEventListener(this.locator.get(Ru),this.target,this.targetEvent,this,Nu[this.Vt.strategy]),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.Vt.strategy===hs.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observe(t,e){}handleChange(t,e,i){}}const Du={capture:!1};class Hu{constructor(t,e,i=Du){this.Mt=t,this.jt=e,this.Vt=i,this.Nt=0,this.Wt=new Map,this.Ht=new Map}zt(){1==++this.Nt&&this.Mt.addEventListener(this.jt,this,this.Vt)}Gt(){0==--this.Nt&&this.Mt.removeEventListener(this.jt,this,this.Vt)}dispose(){this.Nt>0&&(this.Nt=0,this.Mt.removeEventListener(this.jt,this,this.Vt)),this.Wt.clear(),this.Ht.clear()}Xt(t){const e=!0===this.Vt.capture?this.Wt:this.Ht;let i=e.get(t);return void 0===i&&e.set(t,i=rl()),i}handleEvent(t){const e=!0===this.Vt.capture?this.Wt:this.Ht,i=t.composedPath();!0===this.Vt.capture&&i.reverse();for(const n of i){const i=e.get(n);if(void 0===i)continue;const s=i[this.jt];if(void 0!==s&&(hl(s)?s(t):s.handleEvent(t),!0===t.cancelBubble))return}}}class zu{constructor(t,e,i,n){this.Kt=t,this.Yt=e,this.jt=i,t.zt(),e[i]=n}dispose(){this.Kt.Gt(),this.Yt[this.jt]=void 0}}class qu{constructor(t){this.config=t,this.target=null,this.handler=null}subscribe(t,e){let i;for(i of(this.target=t,this.handler=e,this.config.events))t.addEventListener(i,e)}dispose(){const{target:t,handler:e}=this;let i;if(null!==t&&null!==e)for(i of this.config.events)t.removeEventListener(i,e);this.target=this.handler=null}}const Wu=Fe.createInterface("IEventDelegator",(t=>t.singleton(Ku)));class Ku{constructor(){this.Zt=rl()}addEventListener(t,e,i,n,s){var r,o;const a=null!==(r=(o=this.Zt)[i])&&void 0!==r?r:o[i]=new Map;let l=a.get(t);return void 0===l&&a.set(t,l=new Hu(t,i,s)),new zu(l,l.Xt(e),i,n)}dispose(){for(const t in this.Zt){const e=this.Zt[t];for(const t of e.values())t.dispose();e.clear()}}}Fe.createInterface("IProjections");const Zu=Fe.createInterface("IAuSlotsInfo");class _u{constructor(t){this.projectedSlots=t}}var Qu;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}(Qu||(Qu={}));const Gu=Fe.createInterface("Instruction");function Xu(t){const e=t.type;return ul(e)&&2===e.length}class Yu{constructor(t,e){this.from=t,this.to=e}get type(){return"rf"}}class Ju{constructor(t,e,i){this.from=t,this.to=e,this.mode=i}get type(){return"rg"}}class td{constructor(t,e){this.from=t,this.to=e}get type(){return"rk"}}class ed{constructor(t,e){this.from=t,this.to=e}get type(){return"rh"}}class id{constructor(t,e){this.from=t,this.to=e}get type(){return"rj"}}class nd{constructor(t,e){this.value=t,this.to=e}get type(){return"re"}}class sd{constructor(t,e,i,n,s,r){this.res=t,this.alias=e,this.props=i,this.projections=n,this.containerless=s,this.captures=r,this.auSlot=null}get type(){return"ra"}}class rd{constructor(t,e,i){this.res=t,this.alias=e,this.props=i}get type(){return"rb"}}class od{constructor(t,e,i,n){this.def=t,this.res=e,this.alias=i,this.props=n}get type(){return"rc"}}class ad{constructor(t,e){this.instructions=t,this.toBindingContext=e}get type(){return"rd"}}class ld{constructor(t,e){this.from=t,this.to=e}get type(){return"ri"}}class cd{constructor(t,e){this.from=t,this.strict=e}get type(){return"ha"}}class hd{constructor(t,e,i,n){this.from=t,this.to=e,this.preventDefault=i,this.strategy=n}get type(){return"hb"}}class ud{constructor(t,e){this.value=t,this.to=e}get type(){return"he"}}class dd{constructor(t){this.value=t,this.type="hf"}}class pd{constructor(t){this.value=t,this.type="hg"}}class fd{constructor(t,e,i){this.attr=t,this.from=e,this.to=i}get type(){return"hc"}}class vd{get type(){return"hs"}}class gd{constructor(t){this.instructions=t}get type(){return"hp"}}const md=Fe.createInterface("ITemplateCompiler"),bd=Fe.createInterface("IRenderer");function yd(t){return function(e){return e.register=function(t){vi.singleton(bd,this).register(t)},dl(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function wd(t,e,i){return ul(e)?t.parse(e,i):e}function xd(t){return null!=t.viewModel?t.viewModel:t}let kd=class{render(t,e,i){const n=xd(e);void 0!==n.$observers&&void 0!==n.$observers[i.to]?n.$observers[i.to].setValue(i.value,2):n[i.to]=i.value}};kd=Za([yd("re")],kd);let Sd=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[zh,_l]}render(t,e,i){let n,s,r,o;const a=i.res,l=i.projections,c=t.container;if("string"==typeof a){if(n=c.find(uh,a),null==n)throw new Error(`AUR0752:${a}@${t.name}`)}else n=a;const h=i.containerless||n.containerless?Mu(e):null,u=function(t,e,i,n,s,r){const o=e.container.createChild();return o.registerResolver(t.HTMLElement,o.registerResolver(t.Element,o.registerResolver(Tu,new gi("ElementResolver",i)))),o.registerResolver(ru,new gi(Zd,e)),o.registerResolver(Gu,new gi(_d,n)),o.registerResolver(Iu,null==s?Jd:new Yd(s)),o.registerResolver(Mh,tp),o.registerResolver(Zu,null==r?ep:new gi(Qd,r)),o}(this.p,t,e,i,h,null==l?void 0:new _u(Object.keys(l)));s=n.Type,r=u.invoke(s),u.registerResolver(s,new gi(n.key,r)),o=_h.$el(u,r,e,i,n,h),Eu(e,n.key,o);const d=this.r.renderers,p=i.props,f=p.length;let v,g=0;for(;f>g;)v=p[g],d[v.type].render(t,o,v),++g;t.addChild(o)}};Sd=Za([yd("ra")],Sd);let Cd=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[zh,_l]}render(t,e,i){let n,s=t.container;if("string"==typeof i.res){if(n=s.find(_c,i.res),null==n)throw new Error(`AUR0753:${i.res}@${t.name}`)}else n=i.res;const r=Xd(this.p,n,t,e,i,void 0,void 0),o=_h.$attr(r.ctn,r.vm,e,n);Eu(e,n.key,o);const a=this.r.renderers,l=i.props,c=l.length;let h,u=0;for(;c>u;)h=l[u],a[h.type].render(t,o,h),++u;t.addChild(o)}};Cd=Za([yd("rb")],Cd);let Ad=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[zh,_l]}render(t,e,i){var n,s;let r,o=t.container;if("string"==typeof i.res){if(r=o.find(_c,i.res),null==r)throw new Error(`AUR0754:${i.res}@${t.name}`)}else r=i.res;const a=this.r.getViewFactory(i.def,o),l=Mu(e),c=Xd(this.p,r,t,e,i,a,l),h=_h.$attr(c.ctn,c.vm,e,r);Eu(l,r.key,h),null===(s=(n=c.vm).link)||void 0===s||s.call(n,t,h,e,i);const u=this.r.renderers,d=i.props,p=d.length;let f,v=0;for(;p>v;)f=d[v],u[f.type].render(t,h,f),++v;t.addChild(h)}};Ad=Za([yd("rc")],Ad);let $d=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,i){e.remove();const n=i.instructions,s=i.toBindingContext,r=t.container,o=n.length;let a,l,c,h=0;for(;o>h;)a=n[h],l=wd(this.ep,a.from,8),c=new yc(l,a.to,this.oL,r,s),t.addBinding(38962===l.$kind?Md(c,l,r):c),++h}};$d.inject=[Rr,xa],$d=Za([yd("rd")],$d);let Ed=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,i){const n=wd(this.ep,i.from,12),s=new tc(n,xd(e),i.to,this.oL,t.container);t.addBinding(38962===n.$kind?Md(s,n,t.container):s)}};Ed.inject=[Rr,xa],Ed=Za([yd("rh")],Ed);let Td=class{constructor(t){this.ep=t}render(t,e,i){const n=wd(this.ep,i.from,8),s=new Ec(n,function(t,e){if("element"===e)return t;switch(e){case"controller":return uh.for(t);case"view":throw new Error("AUR0750");case"view-model":return uh.for(t).viewModel;default:{const i=_c.for(t,e);if(void 0!==i)return i.viewModel;const n=uh.for(t,{name:e});if(void 0===n)throw new Error(`AUR0751:${e}`);return n.viewModel}}}(e,i.to),t.container);t.addBinding(38962===n.$kind?Md(s,n,t.container):s)}};Td.inject=[Rr],Td=Za([yd("rj")],Td);let Rd=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const n=t.container,s=wd(this.ep,i.from,1),r=new gc(this.oL,s,xd(e),i.to,as.toView,n,this.p.domWriteQueue),o=r.partBindings,a=o.length;let l,c=0;for(;a>c;++c)l=o[c],38962===l.sourceExpression.$kind&&(o[c]=Md(l,l.sourceExpression,n));t.addBinding(r)}};Rd.inject=[Rr,xa,_l],Rd=Za([yd("rf")],Rd);let Id=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const n=wd(this.ep,i.from,8),s=new Ac(n,xd(e),i.to,i.mode,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===n.$kind?Md(s,n,t.container):s)}};Id.inject=[Rr,xa,_l],Id=Za([yd("rg")],Id);let Od=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const n=wd(this.ep,i.from,2),s=new Ac(n,xd(e),i.to,as.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===n.iterable.$kind?Md(s,n.iterable,t.container):s)}};Od.inject=[Rr,xa,_l],Od=Za([yd("rk")],Od);let Pd=0;const Ld=[];function Md(t,e,i){for(;e instanceof Pn;)Ld[Pd++]=e,e=e.expression;for(;Pd>0;){const e=Ld[--Pd],n=i.get(e.behaviorKey);n instanceof yn&&(t=n.construct(t,e))}return Ld.length=0,t}let jd=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const n=t.container,s=e.nextSibling,r=e.parentNode,o=this.p.document,a=wd(this.ep,i.from,1),l=a.parts,c=a.expressions,h=c.length;let u,d,p=0,f=l[0];for(""!==f&&r.insertBefore(o.createTextNode(f),s);h>p;++p)d=c[p],u=new bc(d,r.insertBefore(o.createTextNode(""),s),n,this.oL,this.p,i.strict),t.addBinding(38962===d.$kind?Md(u,d,n):u),f=l[p+1],""!==f&&r.insertBefore(o.createTextNode(f),s);"AU-M"===e.nodeName&&e.remove()}};jd.inject=[Rr,xa,_l],jd=Za([yd("ha")],jd);const Ud=Fe.createInterface("IListenerBehaviorOptions",(t=>t.singleton(Bd)));class Bd{constructor(){this.expAsHandler=!1}}let Nd=class{constructor(t,e,i,n){this.ep=t,this.Jt=e,this.p=i,this.Qt=n}render(t,e,i){const n=wd(this.ep,i.from,4),s=new Fu(this.p,i.to,n,e,this.Jt,t.container,new Vu(i.preventDefault,i.strategy,this.Qt.expAsHandler));t.addBinding(38962===n.$kind?Md(s,n,t.container):s)}};Nd.inject=[Rr,Wu,_l,Ud],Nd=Za([yd("hb")],Nd);let Vd=class{render(t,e,i){e.setAttribute(i.to,i.value)}};Vd=Za([yd("he")],Vd);let Fd=class{render(t,e,i){!function(t,e){const i=e.length;let n=0;for(let s=0;s<i;++s)32===e.charCodeAt(s)?(s!==n&&t.add(e.slice(n,s)),n=s+1):s+1===i&&t.add(e.slice(n))}(e.classList,i.value)}};Fd=Za([yd("hf")],Fd);let Dd=class{render(t,e,i){e.style.cssText+=i.value}};Dd=Za([yd("hg")],Dd);let Hd=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const n=wd(this.ep,i.from,8),s=new Ac(n,e.style,i.to,as.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===n.$kind?Md(s,n,t.container):s)}};Hd.inject=[Rr,xa,_l],Hd=Za([yd("hd")],Hd);let zd=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,i){const n=wd(this.ep,i.from,8),s=new pc(n,e,i.attr,i.to,as.toView,this.oL,t.container);t.addBinding(38962===n.$kind?Md(s,n,t.container):s)}};zd.inject=[Rr,xa],zd=Za([yd("hc")],zd);let qd=class{constructor(t,e){this.ti=t,this.r=e}static get inject(){return[md,zh]}render(t,e,i){const n=t.container.get(ou),s=this.r.renderers,r=t=>{let e=t,i=n;for(;null!=i&&e>0;)i=i.parent,--e;if(null==i)throw new Error("No scope context for spread binding.");return i},o=i=>{var n,a;const l=r(i),c=Kd(l),h=this.ti.compileSpread(l.controller.definition,null!==(a=null===(n=l.instruction)||void 0===n?void 0:n.captures)&&void 0!==a?a:wi,l.controller.container,e);let u;for(u of h)switch(u.type){case"hs":o(i+1);break;case"hp":s[u.instructions.type].render(c,uh.for(e),u.instructions);break;default:s[u.type].render(c,e,u)}t.addBinding(c)};o(0)}};qd=Za([yd("hs")],qd);class Wd{constructor(t,e){this.ii=t,this.ei=e,this.interceptor=this,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}$bind(t,e){var i;if(this.isBound)return;this.isBound=!0;const n=this.$scope=null!==(i=this.ei.controller.scope.parentScope)&&void 0!==i?i:void 0;if(null==n)throw new Error("Invalid spreading. Context scope is null/undefined");this.ii.forEach((e=>e.$bind(t,n)))}$unbind(t){this.ii.forEach((e=>e.$unbind(t))),this.isBound=!1}addBinding(t){this.ii.push(t)}addChild(t){if(1!==t.vmKind)throw new Error("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}}const Kd=t=>new Wd([],t),Zd="IController",_d="IInstruction",Qd="IAuSlotsInfo";class Gd{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw new Error("AUR7055");if(!ul(t.name)||0===t.name.length)throw new Error("AUR0756");return t}}function Xd(t,e,i,n,s,r,o,a){const l=i.container.createChild();return l.registerResolver(t.HTMLElement,l.registerResolver(t.Element,l.registerResolver(Tu,new gi("ElementResolver",n)))),i=i instanceof _h?i:i.ctrl,l.registerResolver(ru,new gi(Zd,i)),l.registerResolver(Gu,new gi(_d,s)),l.registerResolver(Iu,null==o?Jd:new gi("IRenderLocation",o)),l.registerResolver(Mh,null==r?tp:new Gd(r)),l.registerResolver(Zu,null==a?ep:new gi(Qd,a)),{vm:l.invoke(e.Type),ctn:l}}class Yd{constructor(t){this.l=t}get name(){return"IRenderLocation"}get $isResolver(){return!0}resolve(){return this.l}}const Jd=new Yd(null),tp=new Gd(null),ep=new gi(Qd,new _u(wi));var ip;function np(t){return function(e){return lp.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(ip||(ip={}));class sp{constructor(t,e,i,n,s){this.Type=t,this.name=e,this.aliases=i,this.key=n,this.type=s}static create(t,e){let i,n;return ul(t)?(i=t,n={name:i}):(i=t.name,n=t),new sp(e,ye(ap(e,"name"),i),be(ap(e,"aliases"),n.aliases,e.aliases),op(i),ye(ap(e,"type"),n.type,e.type,null))}register(t){const{Type:e,key:i,aliases:n}=this;vi.singleton(i,e).register(t),vi.aliasTo(i,e).register(t),hn(n,lp,i,t)}}const rp=el("binding-command"),op=t=>`${rp}:${t}`,ap=(t,e)=>Qa(tl(e),t),lp=Object.freeze({name:rp,keyFrom:op,define(t,e){const i=sp.create(t,e);return Xa(rp,i,i.Type),Xa(rp,i,i),il(e,rp),i.Type},getAnnotation:ap});let cp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"one-time"}build(t){var e;let i=t.attr.target,n=t.attr.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:he(i):(""===n&&1===t.def.type&&(n=he(i)),i=t.bindable.property),new Ju(this.ep.parse(n,8),i,as.oneTime)}};cp.inject=[Xl,Rr],cp=Za([np("one-time")],cp);let hp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"to-view"}build(t){var e;let i=t.attr.target,n=t.attr.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:he(i):(""===n&&1===t.def.type&&(n=he(i)),i=t.bindable.property),new Ju(this.ep.parse(n,8),i,as.toView)}};hp.inject=[Xl,Rr],hp=Za([np("to-view")],hp);let up=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"from-view"}build(t){var e;const i=t.attr;let n=i.target,s=i.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:he(n):(""===s&&1===t.def.type&&(s=he(n)),n=t.bindable.property),new Ju(this.ep.parse(s,8),n,as.fromView)}};up.inject=[Xl,Rr],up=Za([np("from-view")],up);let dp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"two-way"}build(t){var e;const i=t.attr;let n=i.target,s=i.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:he(n):(""===s&&1===t.def.type&&(s=he(n)),n=t.bindable.property),new Ju(this.ep.parse(s,8),n,as.twoWay)}};dp.inject=[Xl,Rr],dp=Za([np("two-way")],dp);let pp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"bind"}build(t){var e;const i=t.attr,n=t.bindable;let s,r,o=i.target,a=i.rawValue;return null==n?(r=this.m.isTwoWay(t.node,o)?as.twoWay:as.toView,o=null!==(e=this.m.map(t.node,o))&&void 0!==e?e:he(o)):(""===a&&1===t.def.type&&(a=he(o)),s=t.def.defaultBindingMode,r=n.mode===as.default||null==n.mode?null==s||s===as.default?as.toView:s:n.mode,o=n.property),new Ju(this.ep.parse(a,8),o,r)}};pp.inject=[Xl,Rr],pp=Za([np("bind")],pp);let fp=class{constructor(t){this.type=0,this.ep=t}get name(){return"call"}build(t){const e=null===t.bindable?he(t.attr.target):t.bindable.property;return new ed(this.ep.parse(t.attr.rawValue,12),e)}};fp.inject=[Rr],fp=Za([np("call")],fp);let vp=class{constructor(t){this.type=0,this.ep=t}get name(){return"for"}build(t){const e=null===t.bindable?he(t.attr.target):t.bindable.property;return new td(this.ep.parse(t.attr.rawValue,2),e)}};vp.inject=[Rr],vp=Za([np("for")],vp);let gp=class{constructor(t){this.type=1,this.ep=t}get name(){return"trigger"}build(t){return new hd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!0,hs.none)}};gp.inject=[Rr],gp=Za([np("trigger")],gp);let mp=class{constructor(t){this.type=1,this.ep=t}get name(){return"delegate"}build(t){return new hd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,hs.bubbling)}};mp.inject=[Rr],mp=Za([np("delegate")],mp);let bp=class{constructor(t){this.type=1,this.ep=t}get name(){return"capture"}build(t){return new hd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,hs.capturing)}};bp.inject=[Rr],bp=Za([np("capture")],bp);let yp=class{constructor(t){this.type=1,this.ep=t}get name(){return"attr"}build(t){return new fd(t.attr.target,this.ep.parse(t.attr.rawValue,8),t.attr.target)}};yp.inject=[Rr],yp=Za([np("attr")],yp);let wp=class{constructor(t){this.type=1,this.ep=t}get name(){return"style"}build(t){return new fd("style",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};wp.inject=[Rr],wp=Za([np("style")],wp);let xp=class{constructor(t){this.type=1,this.ep=t}get name(){return"class"}build(t){return new fd("class",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};xp.inject=[Rr],xp=Za([np("class")],xp);let kp=class{constructor(t){this.type=1,this.ep=t}get name(){return"ref"}build(t){return new id(this.ep.parse(t.attr.rawValue,8),t.attr.target)}};kp.inject=[Rr],kp=Za([np("ref")],kp);let Sp=class{constructor(){this.type=1}get name(){return"...$attrs"}build(t){return new vd}};Sp=Za([np("...$attrs")],Sp);const Cp=Fe.createInterface("ITemplateElementFactory",(t=>t.singleton($p))),Ap={};class $p{constructor(t){this.p=t,this.si=t.document.createElement("template")}createTemplate(t){var e;if(ul(t)){let e=Ap[t];if(void 0===e){const i=this.si;i.innerHTML=t;const n=i.content.firstElementChild;null==n||"TEMPLATE"!==n.nodeName||null!=n.nextElementSibling?(this.si=this.p.document.createElement("template"),e=i):(i.content.removeChild(n),e=n),Ap[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.p.document.createElement("template");return e.content.appendChild(t),e}return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.cloneNode(!0)}}$p.inject=[_l];class Ep{constructor(t,e,i,n,s,r){this.hasSlot=!1,this.Ci=rl();const o=null!==n;this.c=e,this.root=null===s?this:s,this.def=t,this.ci=i,this.parent=n,this.ni=o?n.ni:e.get(Cp),this.di=o?n.di:e.get(jl),this.ep=o?n.ep:e.get(Rr),this.m=o?n.m:e.get(Xl),this.Ut=o?n.Ut:e.get(Oi),this.p=o?n.p:e.get(_l),this.localEls=o?n.localEls:new Set,this.rows=null!=r?r:[]}ki(t){var e,i;(null!==(e=(i=this.root).deps)&&void 0!==e?e:i.deps=[]).push(t),this.root.c.register(t)}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}hi(t){return this.c.find(uh,t)}ui(t){return this.c.find(_c,t)}xi(t){return new Ep(this.def,this.c,this.ci,this,this.root,t)}ai(t){if(this.root!==this)return this.root.ai(t);const e=t.command;if(null===e)return null;let i=this.Ci[e];if(void 0===i){if(i=this.c.create(lp,e),null===i)throw new Error(`AUR0713:${e}`);this.Ci[e]=i}return i}}function Tp(t){const e=t.length;let i=0,n=0;for(;e>n;){if(i=t.charCodeAt(n),92===i)++n;else{if(58===i)return!0;if(36===i&&123===t.charCodeAt(n+1))return!1}++n}return!1}function Rp(){Pp.node=Pp.attr=Pp.bindable=Pp.def=null}const Ip={projections:null},Op={name:"unnamed"},Pp={node:null,attr:null,bindable:null,def:null},Lp=Object.assign(rl(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),Mp={checkbox:1,radio:1},jp=new WeakMap;class Up{constructor(t,e,i){this.attrs=t,this.bindables=e,this.primary=i}static from(t,e){let i=jp.get(t);if(null==i){const n=t.bindables,s=rl(),r=e?void 0===t.defaultBindingMode?as.default:t.defaultBindingMode:as.default;let o,a,l,c,h=!1;for(a in n){if(o=n[a],c=o.attribute,!0===o.primary){if(h)throw new Error(`AUR0714:${t.name}`);h=!0,l=o}else h||null!=l||(l=o);s[c]=bl.create(a,t.Type,o)}null==o&&e&&(l=s.value=bl.create("value",t.Type,{mode:r})),jp.set(t,i=new Up(s,n,l))}return i}}var Bp;!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(Bp||(Bp={}));const Np=Object.freeze(["property","attribute","mode"]),Vp="as-custom-element";function Fp(t,e){const i=t.getAttribute(Vp);if(null===i||""===i)throw new Error("AUR0715");if(e.has(i))throw new Error(`AUR0716:${i}`);return e.add(i),t.removeAttribute(Vp),i}function Dp(t){switch(t.getAttribute("mode")){case"oneTime":return as.oneTime;case"toView":return as.toView;case"fromView":return as.fromView;case"twoWay":return as.twoWay;default:return as.default}}const Hp=Fe.createInterface("ITemplateCompilerHooks"),zp=new WeakMap,qp=el("compiler-hooks");Object.freeze({name:qp,define(t){let e=zp.get(t);return void 0===e&&(zp.set(t,e=new Wp(t)),Xa(qp,e,t),il(t,qp)),t}});class Wp{constructor(t){this.Type=t}get name(){return""}register(t){t.register(vi.singleton(Hp,this.Type))}}const Kp=uh.generateName,Zp="default",_p="au-slot";class Qp{constructor(t){this.mode=t,this.Ai=new Map}bind(t,e,i){this.Ai.set(i,i.mode),i.mode=this.mode}unbind(t,e,i){i.mode=this.Ai.get(i),this.Ai.delete(i)}}class Gp extends Qp{constructor(){super(as.oneTime)}}class Xp extends Qp{constructor(){super(as.toView)}}class Yp extends Qp{constructor(){super(as.fromView)}}class Jp extends Qp{constructor(){super(as.twoWay)}}mn("oneTime")(Gp),mn("toView")(Xp),mn("fromView")(Yp),mn("twoWay")(Jp);class tf extends wn{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(Si).taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask((()=>this.binding.callSource(t)))}handleChange(t,e,i){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(t,e,i)}updateSource(t,e){this.queueTask((()=>this.binding.updateSource(t,e)))}queueTask(t){const e=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,t())),this.opts),null==e||e.cancel()}$bind(t,e){if(null!==this.firstArg){const i=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=isNaN(i)?200:i}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.binding.$unbind(t)}}mn("debounce")(tf);class ef{constructor(t){this.Yt=new Map,this.Ri=t}bind(t,e,i,...n){if(!("handleChange"in i))throw new Error("AUR0817");if(0===n.length)throw new Error("AUR0818");let s;for(s of(this.Yt.set(i,n),n))this.Ri.addSignalListener(s,i)}unbind(t,e,i){const n=this.Yt.get(i);let s;for(s of(this.Yt.delete(i),n))this.Ri.removeSignalListener(s,i)}}ef.inject=[fn],mn("signal")(ef);class nf extends wn{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.p=t.locator.get(Si),this.Si=this.p.taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.Ei((()=>this.binding.callSource(t)))}handleChange(t,e,i){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.p.performanceNow()),this.binding.handleChange(t,e,i)}updateSource(t,e){this.Ei((()=>this.binding.updateSource(t,e)))}Ei(t){const e=this.opts,i=this.p,n=this.lastCall+e.delay-i.performanceNow();if(n>0){const s=this.task;e.delay=n,this.task=this.Si.queueTask((()=>{this.lastCall=i.performanceNow(),this.task=null,e.delay=this.delay,t()}),e),null==s||s.cancel()}else this.lastCall=i.performanceNow(),t()}$bind(t,e){if(null!==this.firstArg){const i=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=this.delay=isNaN(i)?200:i}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,super.$unbind(t)}}mn("throttle")(nf);const sf=new class{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,i,n){null==t?i.removeAttribute(n):i.setAttribute(n,t)}};class rf{bind(t,e,i){i.targetObserver=sf}unbind(t,e,i){}}function of(t){const e=t.composedPath()[0];if(this.target===e)return this.selfEventCallSource(t)}mn("attr")(rf);class af{bind(t,e,i){if(!i.callSource||!i.targetEvent)throw new Error("AUR0801");i.selfEventCallSource=i.callSource,i.callSource=of}unbind(t,e,i){i.callSource=i.selfEventCallSource,i.selfEventCallSource=null}}mn("self")(af);const lf=rl();class cf{constructor(t){this.ns=t,this.type=6}static forNs(t){var e;return null!==(e=lf[t])&&void 0!==e?e:lf[t]=new cf(t)}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,i,n){null==t?i.removeAttributeNS(this.ns,n):i.setAttributeNS(this.ns,n,t)}}function hf(t,e){return t===e}class uf{constructor(t,e,i,n){this.handler=i,this.type=7,this.v=void 0,this.ov=void 0,this.Bi=void 0,this.Ii=void 0,this.f=0,this.o=t,this.oL=n}getValue(){return this.v}setValue(t,e){const i=this.v;t!==i&&(this.v=t,this.ov=i,this.f=e,this.Ti(),this.Di(),this.queue.add(this))}handleCollectionChange(t,e){this.Di()}handleChange(t,e,i){this.Di()}Di(){const t=this.v,e=this.o,i=ol.call(e,"model")?e.model:e.value,n="radio"===e.type,s=void 0!==e.matcher?e.matcher:hf;if(n)e.checked=!!s(t,i);else if(!0===t)e.checked=!0;else{let n=!1;if(t instanceof Array)n=-1!==t.findIndex((t=>!!s(t,i)));else if(t instanceof Set){for(const e of t)if(s(e,i)){n=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(s(t,i)&&!0===r){n=!0;break}}e.checked=n}}handleEvent(){let t=this.ov=this.v;const e=this.o,i=ol.call(e,"model")?e.model:e.value,n=e.checked,s=void 0!==e.matcher?e.matcher:hf;if("checkbox"===e.type){if(t instanceof Array){const e=t.findIndex((t=>!!s(t,i)));return void(n&&-1===e?t.push(i):n||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===s(e,i)){r=e;break}return void(n&&r===e?t.add(i):n||r===e||t.delete(r))}if(t instanceof Map){let e;for(const n of t){const t=n[0];if(!0===s(t,i)){e=t;break}}return void t.set(e,n)}t=n}else{if(!n)return;t=i}this.v=t,this.queue.add(this)}start(){this.handler.subscribe(this.o,this),this.Ti()}stop(){var t,e;this.handler.dispose(),null===(t=this.Bi)||void 0===t||t.unsubscribe(this),this.Bi=void 0,null===(e=this.Ii)||void 0===e||e.unsubscribe(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.start()}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.stop()}flush(){df=this.ov,this.ov=this.v,this.subs.notify(this.v,df,this.f)}Ti(){var t,e,i,n,s,r,o;const a=this.o;null===(s=null!==(t=this.Ii)&&void 0!==t?t:this.Ii=null!==(i=null===(e=a.$observers)||void 0===e?void 0:e.model)&&void 0!==i?i:null===(n=a.$observers)||void 0===n?void 0:n.value)||void 0===s||s.subscribe(this),null===(r=this.Bi)||void 0===r||r.unsubscribe(this),this.Bi=void 0,"checkbox"===a.type&&(null===(o=this.Bi=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))||void 0===o||o.subscribe(this))}}let df;fs(uf),ws(uf);const pf={childList:!0,subtree:!0,characterData:!0};function ff(t,e){return t===e}class vf{constructor(t,e,i,n){this.type=7,this.v=void 0,this.ov=void 0,this.H=!1,this.Pi=void 0,this.$i=void 0,this.iO=!1,this.o=t,this.oL=n,this.handler=i}getValue(){return this.iO?this.v:this.o.multiple?function(t){const e=[];if(0===t.length)return e;const i=t.length;let n,s=0;for(;i>s;)n=t[s],n.selected&&(e[e.length]=ol.call(n,"model")?n.model:n.value),++s;return e}(this.o.options):this.o.value}setValue(t,e){this.ov=this.v,this.v=t,this.H=t!==this.ov,this.Oi(t instanceof Array?t:null),0==(64&e)&&this.K()}K(){this.H&&(this.H=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var t;const e=this.v,i=this.o,n=Array.isArray(e),s=null!==(t=i.matcher)&&void 0!==t?t:ff,r=i.options;let o=r.length;for(;o-- >0;){const t=r[o],i=ol.call(t,"model")?t.model:t.value;t.selected=n?-1!==e.findIndex((t=>!!s(i,t))):!!s(i,e)}}syncValue(){const t=this.o,e=t.options,i=e.length,n=this.v;let s=0;if(t.multiple){if(!(n instanceof Array))return!0;let r;const o=t.matcher||ff,a=[];for(;s<i;)r=e[s],r.selected&&a.push(ol.call(r,"model")?r.model:r.value),++s;let l;for(s=0;s<n.length;)l=n[s],-1===a.findIndex((t=>!!o(l,t)))?n.splice(s,1):++s;for(s=0;s<a.length;)l=a[s],-1===n.findIndex((t=>!!o(l,t)))&&n.push(l),++s;return!1}let r,o=null;for(;s<i;){if(r=e[s],r.selected){o=ol.call(r,"model")?r.model:r.value;break}++s}return this.ov=this.v,this.v=o,!0}Li(){(this.$i=new this.o.ownerDocument.defaultView.MutationObserver(this.qi.bind(this))).observe(this.o,pf),this.Oi(this.v instanceof Array?this.v:null),this.iO=!0}Ui(){var t;this.$i.disconnect(),null===(t=this.Pi)||void 0===t||t.unsubscribe(this),this.$i=this.Pi=void 0,this.iO=!1}Oi(t){var e;if(null===(e=this.Pi)||void 0===e||e.unsubscribe(this),this.Pi=void 0,null!=t){if(!this.o.multiple)throw new Error("AUR0654");(this.Pi=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}qi(t){this.syncOptions(),this.syncValue()&&this.queue.add(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.Li())}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.handler.dispose(),this.Ui())}flush(){gf=this.ov,this.ov=this.v,this.subs.notify(this.v,gf,0)}}let gf,mf;fs(vf),ws(vf);class bf{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.styles={},this.version=0,this.H=!1}getValue(){return this.obj.style.cssText}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}_i(t){const e=[],i=/url\([^)]+$/;let n,s,r,o,a=0,l="";for(;a<t.length;)n=t.indexOf(";",a),-1===n&&(n=t.length),l+=t.substring(a,n),a=n+1,i.test(l)?l+=";":(s=l.indexOf(":"),r=l.substring(0,s).trim(),o=l.substring(s+1).trim(),e.push([r,o]),l="");return e}Fi(t){let e,i;const n=[];for(i in t)if(e=t[i],null!=e)if(ul(e)){if(i.startsWith("--")){n.push([i,e]);continue}n.push([de(i),e])}else n.push(...this.Vi(e));return n}Mi(t){const e=t.length;if(e>0){const i=[];let n=0;for(;e>n;++n)i.push(...this.Vi(t[n]));return i}return wi}Vi(t){return ul(t)?this._i(t):t instanceof Array?this.Mi(t):t instanceof Object?this.Fi(t):wi}K(){if(this.H){this.H=!1;const t=this.value,e=this.styles,i=this.Vi(t);let n,s,r,o,a=this.version;this.ov=t;let l=0;const c=i.length;for(;l<c;++l)s=i[l],r=s[0],o=s[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(n in a-=1,e)ol.call(e,n)&&e[n]===a&&this.obj.style.removeProperty(n)}}setProperty(t,e){let i="";null!=e&&hl(e.indexOf)&&e.includes("!important")&&(i="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,i)}bind(t){this.value=this.ov=this.obj.style.cssText}}class yf{constructor(t,e,i){this.handler=i,this.type=7,this.v="",this.ov="",this.H=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.H=!0,this.handler.config.readonly||0!=(64&e)||this.K(e))}K(t){var e;this.H&&(this.H=!1,this.o[this.k]=null!==(e=this.v)&&void 0!==e?e:this.handler.config.default,0==(2&t)&&this.queue.add(this))}handleEvent(){this.ov=this.v,this.v=this.o[this.k],this.ov!==this.v&&(this.H=!1,this.queue.add(this))}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.v=this.ov=this.o[this.k])}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.handler.dispose()}flush(){mf=this.ov,this.ov=this.v,this.subs.notify(this.v,mf,0)}}fs(yf),ws(yf);const wf="http://www.w3.org/1999/xlink",xf="http://www.w3.org/XML/1998/namespace",kf="http://www.w3.org/2000/xmlns/",Sf=Object.assign(rl(),{"xlink:actuate":["actuate",wf],"xlink:arcrole":["arcrole",wf],"xlink:href":["href",wf],"xlink:role":["role",wf],"xlink:show":["show",wf],"xlink:title":["title",wf],"xlink:type":["type",wf],"xml:lang":["lang",xf],"xml:space":["space",xf],xmlns:["xmlns",kf],"xmlns:xlink":["xlink",kf]}),Cf=new ga;Cf.type=6;class Af{constructor(t){var e;this.type=null!==(e=t.type)&&void 0!==e?e:yf,this.events=t.events,this.readonly=t.readonly,this.default=t.default}}class $f{constructor(t,e,i,n){this.locator=t,this.platform=e,this.dirtyChecker=i,this.svgAnalyzer=n,this.allowDirtyCheck=!0,this.ji=rl(),this.Ni=rl(),this.Wi=rl(),this.Hi=rl();const s=["change","input"],r={events:s,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:s,default:0},checked:{type:uf,events:s},files:{events:s,readonly:!0}},SELECT:{value:{type:vf,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){vi.aliasTo(ka,$f).register(t),vi.singleton(ka,$f).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,i){var n,s;const r=this.ji;let o;if(ul(t))o=null!==(n=r[t])&&void 0!==n?n:r[t]=rl(),null==o[e]?o[e]=new Af(i):Ef(t,e);else for(const i in t){o=null!==(s=r[i])&&void 0!==s?s:r[i]=rl();const n=t[i];for(e in n)null==o[e]?o[e]=new Af(n[e]):Ef(i,e)}}useConfigGlobal(t,e){const i=this.Ni;if("object"==typeof t)for(const e in t)null==i[e]?i[e]=new Af(t[e]):Ef("*",e);else null==i[t]?i[t]=new Af(e):Ef("*",t)}getAccessor(t,e,i){var n;if(e in this.Hi||e in(null!==(n=this.Wi[t.tagName])&&void 0!==n?n:xi))return this.getObserver(t,e,i);switch(e){case"src":case"href":case"role":return sf;default:{const i=Sf[e];return void 0!==i?cf.forNs(i[1]):ll(t,e,this.svgAnalyzer)?sf:Cf}}}overrideAccessor(t,e){var i,n,s,r;let o;if(ul(t))o=null!==(i=(s=this.Wi)[t])&&void 0!==i?i:s[t]=rl(),o[e]=!0;else for(const e in t)for(const i of t[e])o=null!==(n=(r=this.Wi)[e])&&void 0!==n?n:r[e]=rl(),o[i]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Hi[e]=!0}getObserver(t,e,i){var n,s;switch(e){case"role":return sf;case"class":return new dh(t);case"css":case"style":return new bf(t)}const r=null!==(s=null===(n=this.ji[t.tagName])||void 0===n?void 0:n[e])&&void 0!==s?s:this.Ni[e];if(null!=r)return new r.type(t,e,new qu(r),i,this.locator);const o=Sf[e];if(void 0!==o)return cf.forNs(o[1]);if(ll(t,e,this.svgAnalyzer))return sf;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw new Error(`AUR0652:${String(e)}`)}return new ba(t,e)}}function Ef(t,e){throw new Error(`AUR0653:${String(e)}@${t}`)}$f.inject=[qe,_l,ha,Ql];class Tf{constructor(t){this.oL=t}bind(t,e,i,...n){if(0===n.length)throw new Error("AUR0802");if(i.mode!==as.twoWay&&i.mode!==as.fromView)throw new Error("AUR0803");const s=this.oL.getObserver(i.target,i.targetProperty);if(!s.handler)throw new Error("AUR0804");i.targetObserver=s;const r=s.handler;s.originalHandler=r,s.handler=new qu(new Af({default:r.config.default,events:n,readonly:r.config.readonly}))}unbind(t,e,i){i.targetObserver.handler.dispose(),i.targetObserver.handler=i.targetObserver.originalHandler,i.targetObserver.originalHandler=null}}Tf.inject=[xa],mn("updateTrigger")(Tf);class Rf{constructor(t,e){this.zi=t,this.p=e,this.Gi=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Xi():this.Gi=!0}attached(){this.Gi&&(this.Gi=!1,this.Xi()),this.zi.addEventListener("focus",this),this.zi.addEventListener("blur",this)}afterDetachChildren(){const t=this.zi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Ki||(this.value=!1)}Xi(){const t=this.zi,e=this.Ki,i=this.value;i&&!e?t.focus():!i&&e&&t.blur()}get Ki(){return this.zi===this.p.document.activeElement}}Rf.inject=[Tu,_l],Za([fl({mode:as.twoWay})],Rf.prototype,"value",void 0),Hc("focus")(Rf);let If=class{constructor(t,e,i){this.el=t,this.p=e,this.Yi=!1,this.Zi=null,this.$val="",this.$prio="",this.update=()=>{this.Zi=null,Boolean(this.value)!==this.Ji&&(this.Ji===this.Qi?(this.Ji=!this.Qi,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Ji=this.Qi,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.Ji=this.Qi="hide"!==i.alias}binding(){this.Yi=!0,this.update()}detaching(){var t;this.Yi=!1,null===(t=this.Zi)||void 0===t||t.cancel(),this.Zi=null}valueChanged(){this.Yi&&null===this.Zi&&(this.Zi=this.p.domWriteQueue.queueTask(this.update))}};Za([fl],If.prototype,"value",void 0),If=Za([_a(0,Tu),_a(1,_l),_a(2,Gu)],If),function(...t){return function(e){const i=an("aliases"),n=sn(i,e);void 0===n?on(i,t,e):n.push(...t)}}("hide")(If),Hc("show")(If);class Of{constructor(t,e,i){this.id=ve("au$component"),this.strict=!1,this.p=i,this.te=i.document.createElement("div"),this.view=t.create(),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)Pu.set(t,e);else{const i=t.childNodes;for(let t=0,n=i.length;t<n;++t)Pu.set(i[t],e)}}(this.view.nodes,e)}attaching(t,e,i){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const n=this.te=this.ie();return this.view.setHost(n),this.ee(t,n,i)}detaching(t,e,i){return this.se(t,this.te,i)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.te,i=this.te=this.ie();if(e===i)return;this.view.setHost(i);const n=Se(this.se(null,i,t.flags),(()=>this.ee(null,i,t.flags)));n instanceof Promise&&n.catch((t=>{throw t}))}ee(t,e,i){const{activating:n,callbackContext:s,view:r}=this;return r.setHost(e),Se(null==n?void 0:n.call(s,e,r),(()=>this.ne(t,e,i)))}ne(t,e,i){const{$controller:n,view:s}=this;return null!==t?Se(s.activate(null!=t?t:s,n,i,n.scope),(()=>this.re(e))):(s.nodes.appendTo(e),this.re(e))}re(t){const{activated:e,callbackContext:i,view:n}=this;return null==e?void 0:e.call(i,t,n)}se(t,e,i){const{deactivating:n,callbackContext:s,view:r}=this;return Se(null==n?void 0:n.call(s,e,r),(()=>this.oe(t,e,i)))}oe(t,e,i){const{$controller:n,view:s}=this;return null!==t?Se(s.deactivate(t,n,i),(()=>this.le(e))):(s.nodes.remove(),this.le(e))}le(t){const{deactivated:e,callbackContext:i,view:n}=this;return null==e?void 0:e.call(i,t,n)}ie(){const t=this.p,e=t.document;let i=this.target,n=this.renderContext;if(""===i){if(this.strict)throw new Error("AUR0811");return e.body}if(ul(i)){let s=e;ul(n)&&(n=e.querySelector(n)),n instanceof t.Node&&(s=n),i=s.querySelector(i)}if(i instanceof t.Node)return i;if(null==i){if(this.strict)throw new Error("AUR0812");return e.body}return i}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Of.inject=[Mh,Iu,_l],Za([fl({primary:!0})],Of.prototype,"target",void 0),Za([fl({callback:"targetChanged"})],Of.prototype,"renderContext",void 0),Za([fl()],Of.prototype,"strict",void 0),Za([fl()],Of.prototype,"deactivating",void 0),Za([fl()],Of.prototype,"activating",void 0),Za([fl()],Of.prototype,"deactivated",void 0),Za([fl()],Of.prototype,"activated",void 0),Za([fl()],Of.prototype,"callbackContext",void 0),zc("portal")(Of);class Pf extends class{constructor(t,e,i){this.fs=i,this.id=ve("au$component"),this.view=t.create().setLocation(e)}attaching(t,e,i){const{$controller:n}=this;return this.view.activate(t,n,i|this.fs,n.scope)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}{constructor(t,e){super(t,e,32)}}Pf.inject=[Mh,Iu],zc("observe-shallow")(Pf);class Lf{constructor(t,e,i){this.ifFactory=t,this.location=e,this.work=i,this.id=ve("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.he=!1,this.ae=0}attaching(t,e,i){let n;const s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;return Se(this.pending,(()=>{var e;o()&&(this.pending=void 0,n=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=n&&(n.setLocation(this.location),this.pending=Se(n.activate(t,s,i,s.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e,i){return this.he=!0,Se(this.pending,(()=>{var e;this.he=!1,this.pending=void 0,null===(e=this.view)||void 0===e||e.deactivate(t,this.$controller,i)}))}valueChanged(t,e,i){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;this.work.start();const n=this.view,s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;let a;return Se(Se(this.pending,(()=>this.pending=Se(null==n?void 0:n.deactivate(n,s,i),(()=>{var e;if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=a))return a.setLocation(this.location),Se(a.activate(a,s,i,s.scope),(()=>{o()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var t,e;null===(t=this.ifView)||void 0===t||t.dispose(),null===(e=this.elseView)||void 0===e||e.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Lf.inject=[Mh,Iu,ku],Za([fl],Lf.prototype,"value",void 0),Za([fl({set:t=>""===t||!!t&&"false"!==t})],Lf.prototype,"cache",void 0),zc("if")(Lf);class Mf{constructor(t){this.factory=t,this.id=ve("au$component")}link(t,e,i,n){const s=t.children,r=s[s.length-1];if(r instanceof Lf)r.elseFactory=this.factory;else{if(!(r.viewModel instanceof Lf))throw new Error("AUR0810");r.viewModel.elseFactory=this.factory}}}function jf(t){t.dispose()}Mf.inject=[Mh],zc({name:"else"})(Mf);const Uf=[38962,36913];class Bf{constructor(t,e,i){this.l=t,this.ce=e,this.f=i,this.id=ve("au$component"),this.views=[],this.key=void 0,this.ue=void 0,this.fe=!1,this.de=!1,this.me=null,this.ve=void 0,this.ge=!1}binding(t,e,i){const n=this.ce.bindings,s=n.length;let r,o,a=0;for(;s>a;++a)if(r=n[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.sourceExpression,this.pe=r;let t=o.iterable;for(;null!=t&&Uf.includes(t.$kind);)t=t.expression,this.fe=!0;this.me=t;break}this.we(i);const l=o.declaration;(this.ge=90137===l.$kind||106521===l.$kind)||(this.local=l.evaluate(i,this.$controller.scope,r.locator,null))}attaching(t,e,i){return this.be(i),this.xe(t,i)}detaching(t,e,i){return this.we(i),this.ye(t,i)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.we(t),this.be(t);const i=Se(this.ye(null,t),(()=>this.xe(null,t)));i instanceof Promise&&i.catch(pl)}handleCollectionChange(t,e){const{$controller:i}=this;if(i.isActive){if(this.fe){if(this.de)return;return this.de=!0,this.items=this.forOf.iterable.evaluate(e,i.scope,this.pe.locator,null),void(this.de=!1)}if(e|=i.flags,this.be(e),void 0===t){const t=Se(this.ye(null,e),(()=>this.xe(null,e)));t instanceof Promise&&t.catch(pl)}else{const i=this.views.length,n=function(t){let e=0,i=0,n=0;const s=function(t){const e=t.slice();return e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t),r=s.length;for(;n<r;++n){for(;s.deletedItems[i]<=n-e;)++i,--e;-2===s[n]?++e:s[n]+=e}return s}(t);if(n.deletedItems.length>0){n.deletedItems.sort(ge);const t=Se(this.ke(n,e),(()=>this.Ce(i,n,e)));t instanceof Promise&&t.catch(pl)}else this.Ce(i,n,e)}}}we(t){var e;const i=this.$controller.scope;let n=this.Ae,s=this.fe;s&&(n=this.Ae=null!==(e=this.me.evaluate(t,i,this.pe.locator,null))&&void 0!==e?e:null,s=this.fe=!Object.is(this.items,n));const r=this.ue;if(4&t)void 0!==r&&r.unsubscribe(this);else if(this.$controller.isActive){const t=this.ue=function(t){let e;return t instanceof Array?e=Qs(t):t instanceof Map?e=mr(t):t instanceof Set&&(e=or(t)),e}(s?n:this.items);r!==t&&r&&r.unsubscribe(this),t&&t.subscribe(this)}}be(t){const e=this.items;if(e instanceof Array)return void(this.ve=e);if(void 0===this.forOf)return;const i=[];this.forOf.iterate(t,e,((t,e,n)=>{i[e]=n})),this.ve=i}xe(t,e){let i,n,s,r;const{$controller:o,f:a,local:l,l:c,items:h}=this,u=o.scope,d=this.forOf,p=d.count(e,h),f=this.views=Array(p);if(d.iterate(e,h,((h,v,g)=>{s=f[v]=a.create().setLocation(c),s.nodes.unlink(),this.ge?d.declaration.assign(e,r=dn.fromParent(u,un.create()),this.pe.locator,g):r=dn.fromParent(u,un.create(l,g)),Df(r.overrideContext,v,p),n=s.activate(null!=t?t:s,o,e,r),n instanceof Promise&&(null!=i?i:i=[]).push(n)})),void 0!==i)return 1===i.length?i[0]:Promise.all(i)}ye(t,e){let i,n,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),n=s.deactivate(null!=t?t:s,a,e),n instanceof Promise&&(null!=i?i:i=[]).push(n);if(void 0!==i)return 1===i.length?i[0]:Promise.all(i)}ke(t,e){let i,n,s;const{$controller:r,views:o}=this,a=t.deletedItems,l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),n=s.deactivate(s,r,e),n instanceof Promise&&(null!=i?i:i=[]).push(n);c=0;let h=0;for(;l>c;++c)h=a[c]-c,o.splice(h,1);if(void 0!==i)return 1===i.length?i[0]:Promise.all(i)}Ce(t,e,i){var n;let s,r,o,a,l=0;const{$controller:c,f:h,local:u,ve:d,l:p,views:f}=this,v=e.length;for(;v>l;++l)-2===e[l]&&(o=h.create(),f.splice(l,0,o));if(f.length!==v)throw new Error(`AUR0814:${f.length}!=${v}`);const g=c.scope,m=e.length;!function(t,e){const i=t.slice(),n=e.length;let s=0,r=0;for(;s<n;)r=e[s],-2!==r&&(t[s]=i[r]),++s}(f,e);const b=function(t){const e=t.length;e>Nf&&(Nf=e,Vf=new Int32Array(e),Ff=new Int32Array(e));let i=0,n=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(n=t[r],-2!==n){if(o=Vf[i],s=t[o],-2!==s&&s<n){Ff[r]=o,Vf[++i]=r;continue}for(a=0,l=i;a<l;)c=a+l>>1,s=t[Vf[c]],-2!==s&&s<n?a=c+1:l=c;s=t[Vf[a]],(n<s||-2===s)&&(a>0&&(Ff[r]=Vf[a-1]),Vf[a]=r)}r=++i;const h=new Int32Array(r);for(n=Vf[i-1];i-- >0;)h[i]=n,n=Ff[n];for(;r-- >0;)Vf[r]=0;return h}(e),y=b.length;let w,x=y-1;for(l=m-1;l>=0;--l)o=f[l],w=f[l+1],o.nodes.link(null!==(n=null==w?void 0:w.nodes)&&void 0!==n?n:p),-2===e[l]?(this.ge?this.forOf.declaration.assign(i,a=dn.fromParent(g,un.create()),this.pe.locator,d[l]):a=dn.fromParent(g,un.create(u,d[l])),Df(a.overrideContext,l,m),o.setLocation(p),r=o.activate(o,c,i,a),r instanceof Promise&&(null!=s?s:s=[]).push(r)):x<0||1===y||l!==b[x]?(Df(o.scope.overrideContext,l,m),o.nodes.insertBefore(o.location)):(t!==m&&Df(o.scope.overrideContext,l,m),--x);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(jf),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let i=0,n=e.length;i<n;++i)if(!0===e[i].accept(t))return!0}}Bf.inject=[Iu,ru,Mh],Za([fl],Bf.prototype,"items",void 0),zc("repeat")(Bf);let Nf=16,Vf=new Int32Array(Nf),Ff=new Int32Array(Nf);function Df(t,e,i){const n=0===e,s=e===i-1,r=e%2==0;t.$index=e,t.$first=n,t.$last=s,t.$middle=!n&&!s,t.$even=r,t.$odd=!r,t.$length=i}class Hf{constructor(t,e){this.id=ve("au$component"),this.id=ve("au$component"),this.view=t.create().setLocation(e)}valueChanged(t,e,i){const n=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(n.isActive&&null!=s)for(r=dn.fromParent(n.scope,void 0===t?{}:t),a=s.length;a>o;++o)s[o].$bind(2,r)}attaching(t,e,i){const{$controller:n,value:s}=this,r=dn.fromParent(n.scope,void 0===s?{}:s);return this.view.activate(t,n,i,r)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Hf.inject=[Mh,Iu],Za([fl],Hf.prototype,"value",void 0),zc("with")(Hf);let zf=class{constructor(t,e){this.f=t,this.l=e,this.id=ve("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,i,n){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,i){const n=this.view,s=this.$controller;return this.queue((()=>n.activate(t,s,i,s.scope))),this.queue((()=>this.swap(t,i,this.value))),this.promise}detaching(t,e,i){return this.queue((()=>this.view.deactivate(t,this.$controller,i))),this.promise}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}valueChanged(t,e,i){this.$controller.isActive&&this.queue((()=>this.swap(null,i,this.value)))}caseChanged(t,e){this.queue((()=>this.Re(t,e)))}Re(t,e){const i=t.isMatch(this.value,e),n=this.activeCases,s=n.length;if(!i)return s>0&&n[0].id===t.id?this.Se(null,e):void 0;if(s>0&&n[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,i=e.indexOf(t);for(let t=i,n=e.length;t<n&&o;t++){const i=e[t];r.push(i),o=i.fallThrough}}else r.push(t);return Se(this.Se(null,e,r),(()=>(this.activeCases=r,this.Ee(null,e))))}swap(t,e,i){const n=[];let s=!1;for(const t of this.cases)if((s||t.isMatch(i,e))&&(n.push(t),s=t.fallThrough),n.length>0&&!s)break;const r=this.defaultCase;return 0===n.length&&void 0!==r&&n.push(r),Se(this.activeCases.length>0?this.Se(t,e,n):void 0,(()=>{if(this.activeCases=n,0!==n.length)return this.Ee(t,e)}))}Ee(t,e){const i=this.$controller;if(!i.isActive)return;const n=this.activeCases,s=n.length;if(0===s)return;const r=i.scope;return 1===s?n[0].activate(t,e,r):Ce(...n.map((i=>i.activate(t,e,r))))}Se(t,e,i=[]){const n=this.activeCases,s=n.length;if(0!==s){if(1===s){const s=n[0];return i.includes(s)?void 0:(n.length=0,s.deactivate(t,e))}return Se(Ce(...n.reduce(((n,s)=>(i.includes(s)||n.push(s.deactivate(t,e)),n)),[])),(()=>{n.length=0}))}}queue(t){const e=this.promise;let i;i=this.promise=Se(Se(e,t),(()=>{this.promise===i&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};Za([fl],zf.prototype,"value",void 0),zf=Za([zc("switch"),_a(0,Mh),_a(1,Iu)],zf);let qf=class{constructor(t,e,i,n){this.f=t,this.Be=e,this.l=i,this.id=ve("au$component"),this.fallThrough=!1,this.view=void 0,this.Ie=n.config.level<=1,this.Ut=n.scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,i,n){const s=t.parent,r=null==s?void 0:s.viewModel;if(!(r instanceof zf))throw new Error("AUR0815");this.$switch=r,this.linkToSwitch(r)}detaching(t,e,i){return this.deactivate(t,i)}isMatch(t,e){this.Ut.debug("isMatch()");const i=this.value;return Array.isArray(i)?(void 0===this.ue&&(this.ue=this.Te(e,i)),i.includes(t)):i===t}valueChanged(t,e,i){var n;Array.isArray(t)?(null===(n=this.ue)||void 0===n||n.unsubscribe(this),this.ue=this.Te(i,t)):void 0!==this.ue&&this.ue.unsubscribe(this),this.$switch.caseChanged(this,i)}handleCollectionChange(t,e){this.$switch.caseChanged(this,e)}activate(t,e,i){let n=this.view;if(void 0===n&&(n=this.view=this.f.create().setLocation(this.l)),!n.isActive)return n.activate(null!=t?t:n,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(null!=t?t:i,this.$controller,e)}dispose(){var t,e;null===(t=this.ue)||void 0===t||t.unsubscribe(this),null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Te(t,e){const i=this.Be.getArrayObserver(e);return i.subscribe(this),i}accept(t){var e;return!0===this.$controller.accept(t)||(null===(e=this.view)||void 0===e?void 0:e.accept(t))}};qf.inject=[Mh,xa,Iu,Oi],Za([fl],qf.prototype,"value",void 0),Za([fl({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:as.oneTime})],qf.prototype,"fallThrough",void 0),qf=Za([zc("case")],qf);let Wf=class extends qf{linkToSwitch(t){if(void 0!==t.defaultCase)throw new Error("AUR0816");t.defaultCase=this}};Wf=Za([zc("default-case")],Wf);let Kf=class{constructor(t,e,i,n){this.f=t,this.l=e,this.p=i,this.id=ve("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=n.scopeTo("promise.resolve")}link(t,e,i,n){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,i){const n=this.view,s=this.$controller;return Se(n.activate(t,s,i,this.viewScope=dn.fromParent(s.scope,{})),(()=>this.swap(t,i)))}valueChanged(t,e,i){this.$controller.isActive&&this.swap(null,i)}swap(t,e){var i,n;const s=this.value;if(!(s instanceof Promise))return void this.logger.warn(`The value '${String(s)}' is not a promise. No change will be done.`);const r=this.p.domWriteQueue,o=this.fulfilled,a=this.rejected,l=this.pending,c=this.viewScope;let h;const u={reusable:!1},d=()=>{Ce(h=(this.preSettledTask=r.queueTask((()=>Ce(null==o?void 0:o.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==l?void 0:l.activate(t,e,c))),u)).result.catch((t=>{if(!(t instanceof Ma))throw t})),s.then((i=>{if(this.value!==s)return;const n=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>Ce(null==l?void 0:l.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==o?void 0:o.activate(t,e,c,i))),u)).result};1===this.preSettledTask.status?h.then(n):(this.preSettledTask.cancel(),n())}),(i=>{if(this.value!==s)return;const n=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>Ce(null==l?void 0:l.deactivate(t,e),null==o?void 0:o.deactivate(t,e),null==a?void 0:a.activate(t,e,c,i))),u)).result};1===this.preSettledTask.status?h.then(n):(this.preSettledTask.cancel(),n())})))};1===(null===(i=this.postSettledTask)||void 0===i?void 0:i.status)?this.postSettlePromise.then(d):(null===(n=this.postSettledTask)||void 0===n||n.cancel(),d())}detaching(t,e,i){var n,s;return null===(n=this.preSettledTask)||void 0===n||n.cancel(),null===(s=this.postSettledTask)||void 0===s||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};Za([fl],Kf.prototype,"value",void 0),Kf=Za([zc("promise"),_a(0,Mh),_a(1,Iu),_a(2,_l),_a(3,Oi)],Kf);let Zf=class{constructor(t,e){this.f=t,this.l=e,this.id=ve("au$component"),this.view=void 0}link(t,e,i,n){Gf(t).pending=this}activate(t,e,i){let n=this.view;if(void 0===n&&(n=this.view=this.f.create().setLocation(this.l)),!n.isActive)return n.activate(n,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};Za([fl({mode:as.toView})],Zf.prototype,"value",void 0),Zf=Za([zc("pending"),_a(0,Mh),_a(1,Iu)],Zf);let _f=class{constructor(t,e){this.f=t,this.l=e,this.id=ve("au$component"),this.view=void 0}link(t,e,i,n){Gf(t).fulfilled=this}activate(t,e,i,n){this.value=n;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};Za([fl({mode:as.fromView})],_f.prototype,"value",void 0),_f=Za([zc("then"),_a(0,Mh),_a(1,Iu)],_f);let Qf=class{constructor(t,e){this.f=t,this.l=e,this.id=ve("au$component"),this.view=void 0}link(t,e,i,n){Gf(t).rejected=this}activate(t,e,i,n){this.value=n;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};function Gf(t){const e=t.parent,i=null==e?void 0:e.viewModel;if(i instanceof Kf)return i;throw new Error("AUR0813")}Za([fl({mode:as.fromView})],Qf.prototype,"value",void 0),Qf=Za([zc("catch"),_a(0,Mh),_a(1,Iu)],Qf);let Xf=class{"promise.resolve"(t,e,i){return new Ll(t,e,"promise","bind")}};Xf=Za([Bl({pattern:"promise.resolve",symbols:""})],Xf);let Yf=class{then(t,e,i){return new Ll(t,e,"then","from-view")}};Yf=Za([Bl({pattern:"then",symbols:""})],Yf);let Jf=class{catch(t,e,i){return new Ll(t,e,"catch","from-view")}};Jf=Za([Bl({pattern:"catch",symbols:""})],Jf);class tv{constructor(t,e,i){this.node=t,this.instructions=e,this.De=i,this.Pe=void 0}get definition(){return void 0===this.Pe&&(this.Pe=eh.create({name:uh.generateName(),template:this.node,needsCompile:ul(this.node),instructions:this.instructions,dependencies:this.De})),this.Pe}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return t.root.get(zh).getViewFactory(this.definition,t.createChild().register(...this.De))}mergeInto(t,e,i){t.appendChild(this.node),e.push(...this.instructions),i.push(...this.De)}}function ev(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r){const o=i[r];switch(typeof o){case"string":e.appendChild(t.document.createTextNode(o));break;case"object":o instanceof t.Node?e.appendChild(o):"mergeInto"in o&&o.mergeInto(e,n,s)}}}function iv(t,e){const i=e.to;return void 0!==i&&"subject"!==i&&"composing"!==i&&(t[i]=e),t}class nv{constructor(t,e,i,n){this.p=t,this.$e=e,this.Oe=i,this.r=n,this.id=ve("au$component"),this.component=void 0,this.composing=!1,this.view=void 0,this.Le=void 0,this.qe=e.props.reduce(iv,{})}attaching(t,e,i){const{component:n,view:s}=this;return void 0===s||this.Le!==n?(this.Le=n,this.composing=!0,this.compose(void 0,n,t,i)):this.compose(s,n,t,i)}detaching(t,e,i){return this.oe(this.view,t,i)}componentChanged(t,e,i){const{$controller:n}=this;if(!n.isActive)return;if(this.Le===t)return;this.Le=t,this.composing=!0,i|=n.flags;const s=Se(this.oe(this.view,null,i),(()=>this.compose(void 0,t,null,i)));s instanceof Promise&&s.catch((t=>{throw t}))}compose(t,e,i,n){return Se(void 0===t?Se(e,(t=>this.Ue(t,n))):t,(t=>this.ne(this.view=t,i,n)))}oe(t,e,i){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,i)}ne(t,e,i){const{$controller:n}=this;return Se(null==t?void 0:t.activate(null!=e?e:t,n,i,n.scope),(()=>{this.composing=!1}))}Ue(t,e){const i=this._e(t,e);if(i)return i.setLocation(this.$controller.location),i.lockScope(this.$controller.scope),i}_e(t,e){if(!t)return;const i=this.Oe.controller.container;if("object"==typeof t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(i);if("create"in t)return t.create();if("template"in t)return this.r.getViewFactory(eh.getOrCreate(t),i).create()}if(ul(t)){const e=i.find(uh,t);if(null==e)throw new Error(`AUR0809:${t}`);t=e.Type}return function(t,e,i,n){if(ul(e))return function(t,e,i,n){const s=[],r=[],o=[],a=t.document.createElement(e);let l=!1;return i&&Object.keys(i).forEach((t=>{const e=i[t];Xu(e)?(l=!0,s.push(e)):a.setAttribute(t,e)})),l&&(a.className="au",r.push(s)),n&&ev(t,a,n,r,o),new tv(a,r,o)}(t,e,i,n);if(uh.isType(e))return function(t,e,i,n){const s=uh.getDefinition(e),r=[],o=[r],a=[],l=[],c=s.bindables,h=t.document.createElement(s.name);return h.className="au",a.includes(e)||a.push(e),r.push(new sd(s,void 0,l,null,!1,void 0)),i&&Object.keys(i).forEach((t=>{const e=i[t];Xu(e)?l.push(e):void 0===c[t]?l.push(new ud(e,t)):l.push(new nd(e,t))})),n&&ev(t,h,n,o,a),new tv(h,o,a)}(t,e,i,n);throw new Error("Invalid Tag or Type.")}(this.p,t,this.qe,this.$controller.host.childNodes).createView(i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}nv.inject=[_l,Gu,ou,zh],Za([fl],nv.prototype,"component",void 0),Za([fl({mode:as.fromView})],nv.prototype,"composing",void 0),Jc({name:"au-render",template:null,containerless:!0,capture:!0})(nv);class sv{constructor(t,e,i,n,s,r,o){this.c=t,this.parent=e,this.host=i,this.l=n,this.p=s,this.scopeBehavior="auto",this.Fe=void 0,this.r=t.get(zh),this.$e=r,this.Ve=o}static get inject(){return[ze,ru,Tu,Iu,_l,Gu,Ze(ov)]}get pending(){return this.Me}get composition(){return this.Fe}attaching(t,e,i){return this.Me=Se(this.queue(new av(this.view,this.viewModel,this.model,void 0),t),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)}))}detaching(t){const e=this.Fe,i=this.Me;return this.Ve.invalidate(),this.Fe=this.Me=void 0,Se(i,(()=>null==e?void 0:e.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Fe?this.Me=Se(this.Me,(()=>Se(this.queue(new av(this.view,this.viewModel,this.model,t),void 0),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)})))):this.Fe.update(this.model)}queue(t,e){const i=this.Ve,n=this.Fe;return Se(i.create(t),(t=>i.isCurrent(t)?Se(this.compose(t),(s=>i.isCurrent(t)?Se(s.activate(e),(()=>i.isCurrent(t)?(this.Fe=s,Se(null==n?void 0:n.deactivate(e),(()=>t))):Se(s.controller.deactivate(s.controller,this.$controller,4),(()=>(s.controller.dispose(),t))))):(s.controller.dispose(),t))):t))}compose(t){let e,i,n;const{view:s,viewModel:r,model:o}=t.change,{c:a,host:l,$controller:c,l:h}=this,u=this.getDef(r),d=a.createChild(),p=null==h?l.parentNode:h.parentNode;if(null!==u){if(u.containerless)throw new Error("AUR0806");null==h?(i=l,n=()=>{}):(i=p.insertBefore(this.p.document.createElement(u.name),h),n=()=>{i.remove()}),e=this.getVm(d,r,i)}else i=null==h?l:h,e=this.getVm(d,r,i);const f=()=>{if(null!==u){const s=_h.$el(d,e,i,{projections:this.$e.projections},u);return new hv(s,(t=>s.activate(null!=t?t:s,c,2,c.scope.parentScope)),(t=>Se(s.deactivate(null!=t?t:s,c,4),n)),(t=>{var i;return null===(i=e.activate)||void 0===i?void 0:i.call(e,t)}),t)}{const n=eh.create({name:uh.generateName(),template:s}),r=this.r.getViewFactory(n,d),o=_h.$view(r,c),a="auto"===this.scopeBehavior?dn.fromParent(this.parent.scope,e):dn.create(e);return ju(i)?o.setLocation(i):o.setHost(i),new hv(o,(t=>o.activate(null!=t?t:o,c,2,a)),(t=>o.deactivate(null!=t?t:o,c,4)),(t=>{var i;return null===(i=e.activate)||void 0===i?void 0:i.call(e,t)}),t)}};return"activate"in e?Se(e.activate(o),(()=>f())):f()}getVm(t,e,i){if(null==e)return new rv;if("object"==typeof e)return e;const n=this.p,s=ju(i);t.registerResolver(n.Element,t.registerResolver(Tu,new gi("ElementResolver",s?null:i))),t.registerResolver(Iu,new gi("IRenderLocation",s?i:null));const r=t.invoke(e);return t.registerResolver(e,new gi("au-compose.viewModel",r)),r}getDef(t){const e=hl(t)?t:null==t?void 0:t.constructor;return uh.isType(e)?uh.getDefinition(e):null}}Za([fl],sv.prototype,"view",void 0),Za([fl],sv.prototype,"viewModel",void 0),Za([fl],sv.prototype,"model",void 0),Za([fl({set:t=>{if("scoped"===t||"auto"===t)return t;throw new Error("AUR0805")}})],sv.prototype,"scopeBehavior",void 0),Jc("au-compose")(sv);class rv{}class ov{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return Se(t.load(),(t=>new cv(++this.id,t)))}invalidate(){this.id++}}class av{constructor(t,e,i,n){this.view=t,this.viewModel=e,this.model=i,this.src=n}load(){return cl(this.view)||cl(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new lv(t,e,this.model,this.src))):new lv(this.view,this.viewModel,this.model,this.src)}}class lv{constructor(t,e,i,n){this.view=t,this.viewModel=e,this.model=i,this.src=n}}class cv{constructor(t,e){this.id=t,this.change=e}}class hv{constructor(t,e,i,n,s){this.controller=t,this.start=e,this.stop=i,this.update=n,this.context=s,this.state=0}activate(t){if(0!==this.state)throw new Error(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw new Error("AUR0808");default:this.state=-1}}}class uv{constructor(t,e,i,n){var s,r;let o;this.je=null,this.Ne=null;const a=e.auSlot,l=null===(r=null===(s=i.instruction)||void 0===s?void 0:s.projections)||void 0===r?void 0:r[a.name];null==l?(o=n.getViewFactory(a.fallback,i.controller.container),this.We=!1):(o=n.getViewFactory(l,i.parent.controller.container),this.We=!0),this.Oe=i,this.view=o.create().setLocation(t)}static get inject(){return[Iu,Gu,ou,zh]}binding(t,e,i){var n;let s;this.je=this.$controller.scope.parentScope,this.We&&(s=this.Oe.controller.scope.parentScope,(this.Ne=dn.fromParent(s,s.bindingContext)).overrideContext.$host=null!==(n=this.expose)&&void 0!==n?n:this.je.bindingContext)}attaching(t,e,i){return this.view.activate(t,this.$controller,i,this.We?this.Ne:this.je)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}exposeChanged(t){this.We&&null!=this.Ne&&(this.Ne.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Za([fl],uv.prototype,"expose",void 0),Jc({name:"au-slot",template:null,containerless:!0})(uv);const dv=Fe.createInterface("ISanitizer",(t=>t.singleton(class{sanitize(){throw new Error('"sanitize" method not implemented')}})));let pv=class{constructor(t){this.He=t}toView(t){return null==t?null:this.He.sanitize(t)}};pv=Za([_a(0,dv)],pv),Cn("sanitize")(pv);let fv=class{constructor(t){this.ze=t}toView(t,e){return this.ze.getViewComponentForObject(t,e)}};fv=Za([_a(0,Dh)],fv),Cn("view")(fv);const vv=tf,gv=Gp,mv=Xp,bv=Yp,yv=ef,wv=nf,xv=Jp,kv=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return vi.singleton(md,this).register(t)}compile(t,e,i){var n,s,r,o;const a=eh.getOrCreate(t);if(null===a.template||void 0===a.template)return a;if(!1===a.needsCompile)return a;null!=i||(i=Ip);const l=new Ep(t,e,i,null,null,void 0),c=ul(a.template)||!t.enhance?l.ni.createTemplate(a.template):a.template,h="TEMPLATE"===c.nodeName&&null!=c.content,u=h?c.content:c,d=e.get(function(t){function e(t,i,n){Fe.inject(e)(t,i,n)}return e.$isResolver=!0,e.resolve=function(e,i){return i.root===i?i.getAll(t,!1):i.has(t,!1)?i.getAll(t,!1).concat(i.root.getAll(t,!1)):i.root.getAll(t,!1)},e}(Hp)),p=d.length;let f=0;if(p>0)for(;p>f;)null===(s=(n=d[f]).compiling)||void 0===s||s.call(n,c),++f;if(c.hasAttribute(Vp))throw new Error("AUR0701");return this.ri(u,l),this.oi(u,l),eh.create({...t,name:t.name||Kp(),dependencies:(null!==(r=t.dependencies)&&void 0!==r?r:wi).concat(null!==(o=l.deps)&&void 0!==o?o:wi),instructions:l.rows,surrogates:h?this.li(c,l):wi,template:c,hasSlots:l.hasSlot,needsCompile:!1})}compileSpread(t,e,i,n){var s;const r=new Ep(t,i,Ip,null,null,void 0),o=[],a=r.hi(n.nodeName.toLowerCase()),l=null!==a,c=r.ep,h=e.length;let u,d,p,f,v,g,m,b,y,w,x=0,k=null,S=null;for(;h>x;++x)if(u=e[x],y=u.target,w=u.rawValue,S=r.ai(u),null!==S&&(1&S.type)>0)Pp.node=n,Pp.attr=u,Pp.bindable=null,Pp.def=null,o.push(S.build(Pp));else if(k=r.ui(y),null===k)if(null===S){if(m=c.parse(w,1),l&&(f=Up.from(a,!1),v=f.attrs[y],void 0!==v)){m=c.parse(w,1),o.push(new gd(null==m?new nd(w,v.property):new Yu(m,v.property)));continue}if(null!=m)o.push(new Yu(m,null!==(s=r.m.map(n,y))&&void 0!==s?s:he(y)));else switch(y){case"class":o.push(new dd(w));break;case"style":o.push(new pd(w));break;default:o.push(new ud(w,y))}}else{if(l&&(f=Up.from(a,!1),v=f.attrs[y],void 0!==v)){Pp.node=n,Pp.attr=u,Pp.bindable=v,Pp.def=a,o.push(new gd(S.build(Pp)));continue}Pp.node=n,Pp.attr=u,Pp.bindable=null,Pp.def=null,o.push(S.build(Pp))}else{if(k.isTemplateController)throw new Error(`AUR0703:${y}`);f=Up.from(k,!0),b=!1===k.noMultiBindings&&null===S&&Tp(w),b?p=this.fi(n,w,k,r):(g=f.primary,null===S?(m=c.parse(w,1),p=[null===m?new nd(w,g.property):new Yu(m,g.property)]):(Pp.node=n,Pp.attr=u,Pp.bindable=g,Pp.def=k,p=[S.build(Pp)])),(null!=d?d:d=[]).push(new rd(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(y)?y:void 0,p))}return Rp(),null!=d?d.concat(o):o}li(t,e){var i;const n=[],s=t.attributes,r=e.ep;let o,a,l,c,h,u,d,p,f,v,g,m,b=s.length,y=0,w=null,x=null;for(;b>y;++y){if(o=s[y],a=o.name,l=o.value,c=e.di.parse(a,l),g=c.target,m=c.rawValue,Lp[g])throw new Error(`AUR0702:${a}`);if(x=e.ai(c),null!==x&&(1&x.type)>0)Pp.node=t,Pp.attr=c,Pp.bindable=null,Pp.def=null,n.push(x.build(Pp));else if(w=e.ui(g),null===w)if(null===x)if(f=r.parse(m,1),null!=f)t.removeAttribute(a),--y,--b,n.push(new Yu(f,null!==(i=e.m.map(t,g))&&void 0!==i?i:he(g)));else switch(a){case"class":n.push(new dd(m));break;case"style":n.push(new pd(m));break;default:n.push(new ud(m,a))}else Pp.node=t,Pp.attr=c,Pp.bindable=null,Pp.def=null,n.push(x.build(Pp));else{if(w.isTemplateController)throw new Error(`AUR0703:${g}`);d=Up.from(w,!0),v=!1===w.noMultiBindings&&null===x&&Tp(m),v?u=this.fi(t,m,w,e):(p=d.primary,null===x?(f=r.parse(m,1),u=[null===f?new nd(m,p.property):new Yu(f,p.property)]):(Pp.node=t,Pp.attr=c,Pp.bindable=p,Pp.def=w,u=[x.build(Pp)])),t.removeAttribute(a),--y,--b,(null!=h?h:h=[]).push(new rd(this.resolveResources?w:w.name,null!=w.aliases&&w.aliases.includes(g)?g:void 0,u))}}return Rp(),null!=h?h.concat(n):n}oi(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.mi(t,e):this.vi(t,e);case 3:return this.gi(t,e);case 11:{let i=t.firstChild;for(;null!==i;)i=this.oi(i,e);break}}return t.nextSibling}mi(t,e){const i=t.attributes,n=i.length,s=[],r=e.ep;let o,a,l,c,h,u,d,p,f=!1,v=0;for(;n>v;++v)if(o=i[v],l=o.name,c=o.value,"to-binding-context"!==l){if(a=e.di.parse(l,c),u=a.target,d=a.rawValue,h=e.ai(a),null!==h)switch(h.name){case"to-view":case"bind":s.push(new ld(r.parse(d,8),he(u)));continue;default:throw new Error(`AUR0704:${a.command}`)}p=r.parse(d,1),s.push(new ld(null===p?new Wn(d):p,he(u)))}else f=!0;return e.rows.push([new ad(s,f)]),this.pi(t).nextSibling}vi(t,e){var i,n,s,r,o,a,l,c,h,u;const d=t.nextSibling,p=(null!==(i=t.getAttribute("as-element"))&&void 0!==i?i:t.nodeName).toLowerCase(),f=e.hi(p),v=null!==f,g=v&&null!=f.shadowOptions,m=!!(null==f?void 0:f.capture),b=m?[]:wi,y=e.ep,w=this.debug?ki:()=>{t.removeAttribute(S),--H,--D};let x,k,S,C,A,$,E,T,R,I,O,P,L,M,j,U,B,N,V,F=t.attributes,D=F.length,H=0,z=null,q=!1,W=null,K=!0,Z=!1;if("slot"===p){if(null==e.root.def.shadowOptions)throw new Error(`AUR0717:${e.root.def.name}`);e.root.hasSlot=!0}if(v&&(K=null===(n=f.processContent)||void 0===n?void 0:n.call(f.Type,t,e.p),F=t.attributes,D=F.length),e.root.def.enhance&&t.classList.contains("au"))throw new Error("AUR0705");for(;D>H;++H){switch(k=F[H],S=k.name,C=k.value,S){case"as-element":case"containerless":w(),Z||(Z="containerless"===S);continue}if(A=e.di.parse(S,C),W=e.ai(A),B=A.target,N=A.rawValue,m){if(null!=W&&1&W.type){w(),b.push(A);continue}if("au-slot"!==B&&(j=Up.from(f,!1),null==j.attrs[B]&&!(null===(s=e.ui(B))||void 0===s?void 0:s.isTemplateController))){w(),b.push(A);continue}}if(null!==W&&1&W.type)Pp.node=t,Pp.attr=A,Pp.bindable=null,Pp.def=null,(null!=$?$:$=[]).push(W.build(Pp)),w();else if(z=e.ui(B),null===z)if(null!==W)w(),v&&(j=Up.from(f,!1),T=j.attrs[B],void 0!==T)?(Pp.node=t,Pp.attr=A,Pp.bindable=T,Pp.def=f,(null!=E?E:E=[]).push(W.build(Pp))):(Pp.node=t,Pp.attr=A,Pp.bindable=null,Pp.def=null,(null!=$?$:$=[]).push(W.build(Pp)));else{if(v&&(j=Up.from(f,!1),T=j.attrs[B],void 0!==T)){L=y.parse(N,1),(null!=E?E:E=[]).push(null==L?new nd(N,T.property):new Yu(L,T.property)),w();continue}L=y.parse(N,1),null!=L&&(w(),(null!=$?$:$=[]).push(new Yu(L,null!==(r=e.m.map(t,B))&&void 0!==r?r:he(B))))}else j=Up.from(z,!0),q=!1===z.noMultiBindings&&null===W&&Tp(N),q?I=this.fi(t,N,z,e):(U=j.primary,null===W?(L=y.parse(N,1),I=[null===L?new nd(N,U.property):new Yu(L,U.property)]):(Pp.node=t,Pp.attr=A,Pp.bindable=U,Pp.def=z,I=[W.build(Pp)])),w(),z.isTemplateController?(null!=O?O:O=[]).push(new od(Op,this.resolveResources?z:z.name,void 0,I)):(null!=R?R:R=[]).push(new rd(this.resolveResources?z:z.name,null!=z.aliases&&z.aliases.includes(B)?B:void 0,I))}if(Rp(),this.wi(t)&&null!=$&&$.length>1&&this.bi(t,$),v&&(M=new sd(this.resolveResources?f:f.name,void 0,null!=E?E:wi,null,Z,b),p===_p)){const i=t.getAttribute("name")||Zp,n=e.h("template"),s=e.xi();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?t.removeChild(r):n.content.appendChild(r),r=t.firstChild;this.oi(n.content,s),M.auSlot={name:i,fallback:eh.create({name:Kp(),template:n,instructions:s.rows,needsCompile:!1})},t=this.yi(t,e)}if(null==$&&null==M&&null==R||(x=wi.concat(null!=M?M:wi,null!=R?R:wi,null!=$?$:wi),this.pi(t)),null!=O){let i;D=O.length-1,H=D,P=O[H],this.yi(t,e),"TEMPLATE"===t.nodeName?i=t:(i=e.h("template"),i.content.appendChild(t));const n=i,s=e.xi(null==x?[]:[x]);let r,a,h,u,d,m,b,y,w=0,k=0,S=t.firstChild,C=!1;if(!1!==K)for(;null!==S;)if(a=1===S.nodeType?S.getAttribute(_p):null,null!==a&&S.removeAttribute(_p),v)r=S.nextSibling,g||(C=3===S.nodeType&&""===S.textContent.trim(),C||(null!==(o=(l=null!=u?u:u={})[c=a||Zp])&&void 0!==o?o:l[c]=[]).push(S),t.removeChild(S)),S=r;else{if(null!==a)throw a=a||Zp,new Error(`AUR0706:${p}[${a}]`);S=S.nextSibling}if(null!=u){for(a in h={},u){for(i=e.h("template"),d=u[a],w=0,k=d.length;k>w;++w)m=d[w],"TEMPLATE"===m.nodeName?m.attributes.length>0?i.content.appendChild(m):i.content.appendChild(m.content):i.content.appendChild(m);y=e.xi(),this.oi(i.content,y),h[a]=eh.create({name:Kp(),template:i,instructions:y.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=h}if(v&&(Z||f.containerless)&&this.yi(t,e),V=!v||!f.containerless&&!Z&&!1!==K,V)if("TEMPLATE"===t.nodeName)this.oi(t.content,s);else for(S=t.firstChild;null!==S;)S=this.oi(S,s);for(P.def=eh.create({name:Kp(),template:n,instructions:s.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});H-- >0;)P=O[H],i=e.h("template"),b=e.h("au-m"),b.classList.add("au"),i.content.appendChild(b),P.def=eh.create({name:Kp(),template:i,needsCompile:!1,instructions:[[O[H+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([P])}else{null!=x&&e.rows.push(x);let i,n,s,r,o,l,c,d=t.firstChild,m=null,b=!1,y=0,w=0;if(!1!==K)for(;null!==d;)if(n=1===d.nodeType?d.getAttribute(_p):null,null!==n&&d.removeAttribute(_p),v)i=d.nextSibling,g||(b=3===d.nodeType&&""===d.textContent.trim(),b||(null!==(a=(h=null!=s?s:s={})[u=n||Zp])&&void 0!==a?a:h[u]=[]).push(d),t.removeChild(d)),d=i;else{if(null!==n)throw n=n||Zp,new Error(`AUR0706:${p}[${n}]`);d=d.nextSibling}if(null!=s){for(n in m={},s){for(l=e.h("template"),r=s[n],y=0,w=r.length;w>y;++y)o=r[y],"TEMPLATE"===o.nodeName?o.attributes.length>0?l.content.appendChild(o):l.content.appendChild(o.content):l.content.appendChild(o);c=e.xi(),this.oi(l.content,c),m[n]=eh.create({name:Kp(),template:l,instructions:c.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=m}if(v&&(Z||f.containerless)&&this.yi(t,e),V=!v||!f.containerless&&!Z&&!1!==K,V&&t.childNodes.length>0)for(d=t.firstChild;null!==d;)d=this.oi(d,e)}return d}gi(t,e){let i="",n=t;for(;null!==n&&3===n.nodeType;)i+=n.textContent,n=n.nextSibling;const s=e.ep.parse(i,1);if(null===s)return n;const r=t.parentNode;for(r.insertBefore(this.pi(e.h("au-m")),t),e.rows.push([new cd(s,!!e.def.isStrictBinding)]),t.textContent="",n=t.nextSibling;null!==n&&3===n.nodeType;)r.removeChild(n),n=t.nextSibling;return t.nextSibling}fi(t,e,i,n){const s=Up.from(i,!0),r=e.length,o=[];let a,l,c,h,u,d,p=0,f=0;for(let v=0;v<r;++v)if(f=e.charCodeAt(v),92===f)++v;else if(58===f){for(a=e.slice(p,v);e.charCodeAt(++v)<=32;);for(p=v;v<r;++v)if(f=e.charCodeAt(v),92===f)++v;else if(59===f){l=e.slice(p,v);break}if(void 0===l&&(l=e.slice(p)),h=n.di.parse(a,l),u=n.ai(h),d=s.attrs[h.target],null==d)throw new Error(`AUR0707:${i.name}.${h.target}`);for(null===u?(c=n.ep.parse(l,1),o.push(null===c?new nd(l,d.property):new Yu(c,d.property))):(Pp.node=t,Pp.attr=h,Pp.bindable=d,Pp.def=i,o.push(u.build(Pp)));v<r&&e.charCodeAt(++v)<=32;);p=v,a=void 0,l=void 0}return Rp(),o}ri(t,e){var i,n;const s=t,r=pe(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===s.childElementCount)throw new Error("AUR0708");const a=new Set,l=[];for(const t of r){if(t.parentNode!==s)throw new Error("AUR0709");const i=Fp(t,a),n=class{},r=t.content,o=pe(r.querySelectorAll("bindable")),c=ml.for(n),h=new Set,u=new Set;for(const t of o){if(t.parentNode!==r)throw new Error("AUR0710");const e=t.getAttribute("property");if(null===e)throw new Error("AUR0711");const i=t.getAttribute("attribute");if(null!==i&&u.has(i)||h.has(e))throw new Error(`AUR0712:${e}+${i}`);null!==i&&u.add(i),h.add(e),c.add({property:e,attribute:null!=i?i:void 0,mode:Dp(t)}),t.getAttributeNames().filter((t=>!Np.includes(t))).length,r.removeChild(t)}l.push(n),e.ki(uh.define({name:i,template:t},n)),s.removeChild(t)}let c=0;const h=l.length;for(;h>c;++c)uh.getDefinition(l[c]).dependencies.push(...null!==(i=e.def.dependencies)&&void 0!==i?i:wi,...null!==(n=e.deps)&&void 0!==n?n:wi)}wi(t){return"INPUT"===t.nodeName&&1===Mp[t.type]}bi(t,e){if("INPUT"===t.nodeName){const t=e;let i,n,s,r=0;for(let e=0;e<t.length&&r<3;e++)switch(s=t[e],s.to){case"model":case"value":case"matcher":i=e,r++;break;case"checked":n=e,r++}void 0!==n&&void 0!==i&&n<i&&([t[i],t[n]]=[t[n],t[i]])}}pi(t){return t.classList.add("au"),t}yi(t,e){const i=t.parentNode,n=e.h("au-m");return this.pi(i.insertBefore(n,t)),i.removeChild(t),n}},$f],Sv=[ql,zl,Zl],Cv=[pp,cp,up,hp,dp,fp,vp,kp,gp,mp,bp,xp,wp,yp,Sp],Av=[vv,gv,mv,bv,yv,wv,xv,pv,fv,Pf,Lf,Mf,Bf,Hf,zf,qf,Wf,Kf,Zf,_f,Qf,Xf,Yf,Jf,rf,af,Tf,nv,sv,Of,Rf,If,uv],$v=[Id,Od,Ed,Td,Rd,kd,Sd,Cd,Ad,$d,Nd,zd,Vd,Fd,Dd,Hd,jd,qd],Ev=function t(e){return{optionsProvider:e,register(t){const i={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(i),t.register(vi.instance(os,i.coercingOptions),...kv,...Av,...Sv,...Cv,...$v)},customize:i=>t(null!=i?i:e)}}(ki),Tv=Fe.createInterface("IAurelia");var Rv;!function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(Rv||(Rv={}));const Iv=Fe.createInterface("IDialogService"),Ov=Fe.createInterface("IDialogController"),Pv=Fe.createInterface("IDialogDomRenderer"),Lv=Fe.createInterface("IDialogDom"),Mv=Fe.createInterface("IDialogGlobalSettings");class jv{constructor(t,e){this.wasCancelled=t,this.dialog=e}static create(t,e){return new jv(t,e)}}class Uv{constructor(t,e){this.status=t,this.value=e}static create(t,e){return new Uv(t,e)}}var Bv;!function(t){t.Ok="ok",t.Error="error",t.Cancel="cancel",t.Abort="abort"}(Bv||(Bv={}));class Nv{constructor(t,e){this.p=t,this.ctn=e,this.closed=new Promise(((t,e)=>{this.Pt=t,this.St=e}))}static get inject(){return[_l,ze]}activate(t){var e;const i=this.ctn.createChild(),{model:n,template:s,rejectOnCancel:r}=t,o=i.get(Pv),a=null!==(e=t.host)&&void 0!==e?e:this.p.document.body,l=this.dom=o.render(a,t),c=i.has(Ru,!0)?i.get(Ru):null,h=l.contentHost;return this.settings=t,null!=c&&c.contains(a)||i.register(vi.instance(Ru,a)),i.register(vi.instance(Tu,h),vi.instance(Lv,l)),new Promise((e=>{var s,r;const o=Object.assign(this.cmp=this.getOrCreateVm(i,t,h),{$dialog:this});e(null===(r=null===(s=o.canActivate)||void 0===s?void 0:s.call(o,n))||void 0===r||r)})).then((e=>{var o;if(!0!==e){if(l.dispose(),r)throw Fv(null,"Dialog activation rejected");return jv.create(!0,this)}const a=this.cmp;return Se(null===(o=a.activate)||void 0===o?void 0:o.call(a,n),(()=>{var e;const n=this.controller=_h.$el(i,a,h,null,eh.create(null!==(e=this.getDefinition(a))&&void 0!==e?e:{name:uh.generateName(),template:s}));return Se(n.activate(n,null,2),(()=>{var e;return l.overlay.addEventListener(null!==(e=t.mouseEvent)&&void 0!==e?e:"click",this),jv.create(!1,this)}))}))}),(t=>{throw l.dispose(),t}))}deactivate(t,e){if(this.es)return this.es;let i=!0;const{controller:n,dom:s,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,l=Uv.create(t,e),c=new Promise((c=>{var h,u;c(Se(null===(u=null===(h=r.canDeactivate)||void 0===h?void 0:h.call(r,l))||void 0===u||u,(c=>{var h;if(!0!==c){if(i=!1,this.es=void 0,a)throw Fv(null,"Dialog cancellation rejected");return Uv.create("abort")}return Se(null===(h=r.deactivate)||void 0===h?void 0:h.call(r,l),(()=>Se(n.deactivate(n,null,4),(()=>(s.dispose(),s.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===t?this.St(Fv(e,"Dialog cancelled with a rejection on cancel")):this.Pt(l),l)))))})))})).catch((t=>{throw this.es=void 0,t}));return this.es=i?c:void 0,c}ok(t){return this.deactivate("ok",t)}cancel(t){return this.deactivate("cancel",t)}error(t){const e=function(t){const e=new Error;return e.wasCancelled=!1,e.value=t,e}(t);return new Promise((t=>{var i,n;return t(Se(null===(n=(i=this.cmp).deactivate)||void 0===n?void 0:n.call(i,Uv.create("error",e)),(()=>Se(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.St(e)})))))}))}handleEvent(t){this.settings.overlayDismiss&&!this.dom.contentHost.contains(t.target)&&this.cancel()}getOrCreateVm(t,e,i){const n=e.component;if(null==n)return new Vv;if("object"==typeof n)return n;const s=this.p;return t.registerResolver(s.HTMLElement,t.registerResolver(s.Element,t.registerResolver(Tu,new gi("ElementResolver",i)))),t.invoke(n)}getDefinition(t){const e=hl(t)?t:null==t?void 0:t.constructor;return uh.isType(e)?uh.getDefinition(e):null}}class Vv{}function Fv(t,e){const i=new Error(e);return i.wasCancelled=!0,i.value=t,i}class Dv{static from(...t){return Object.assign(new Dv,...t).ls().os()}load(){const t=this,e=this.component,i=this.template,n=Ce(null==e?void 0:Se(e(),(e=>{t.component=e})),hl(i)?Se(i(),(e=>{t.template=e})):void 0);return n instanceof Promise?n.then((()=>t)):t}ls(){if(null==this.component&&null==this.template)throw new Error("AUR0903");return this}os(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function Hv(t,e){return this.then((i=>i.dialog.closed.then(t,e)),e)}const zv="position:absolute;width:100%;height:100%;top:0;left:0;";class qv{constructor(t){this.p=t,this.wrapperCss=`${zv} display:flex;`,this.overlayCss=zv,this.hostCss="position:relative;margin:auto;"}static register(t){vi.singleton(Pv,this).register(t)}render(t){const e=this.p.document,i=(t,i)=>{const n=e.createElement(t);return n.style.cssText=i,n},n=t.appendChild(i("au-dialog-container",this.wrapperCss)),s=n.appendChild(i("au-dialog-overlay",this.overlayCss)),r=n.appendChild(i("div",this.hostCss));return new Wv(n,s,r)}}qv.inject=[_l];class Wv{constructor(t,e,i){this.wrapper=t,this.overlay=e,this.contentHost=i}dispose(){this.wrapper.remove()}}function Kv(t,e){return{settingsProvider:t,register:i=>i.register(...e,Ic.beforeCreate((()=>t(i.get(Mv))))),customize:(t,i)=>Kv(t,null!=i?i:e)}}Kv((()=>{throw new Error("AUR0904")}),[class{static register(t){t.register(vi.singleton(Mv,this))}}]),Kv(ki,[class{constructor(t,e,i){this.ft=t,this.p=e,this.ss=i,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const t=this.dlgs;return t.length>0?t[t.length-1]:null}static get inject(){return[ze,_l,Mv]}static register(t){t.register(vi.singleton(Iv,this),Ic.beforeDeactivate(Iv,(t=>Se(t.closeAll(),(t=>{if(t.length>0)throw new Error(`AUR0901:${t.length}`)})))))}open(t){return function(t){return t.whenClosed=Hv,t}(new Promise((e=>{var i;const n=Dv.from(this.ss,t),s=null!==(i=n.container)&&void 0!==i?i:this.ft.createChild();e(Se(n.load(),(t=>{const e=s.invoke(Nv);return s.register(vi.instance(Ov,e)),s.register(vi.callback(Nv,(()=>{throw new Error("AUR0902")}))),Se(e.activate(t),(t=>{if(!t.wasCancelled){1===this.dlgs.push(e)&&this.p.window.addEventListener("keydown",this);const t=()=>this.remove(e);e.closed.then(t,t)}return t}))})))})))}closeAll(){return Promise.all(Array.from(this.dlgs).map((t=>t.settings.rejectOnCancel?t.cancel().then((()=>null)):t.cancel().then((e=>"cancel"===e.status?null:t))))).then((t=>t.filter((t=>!!t))))}remove(t){const e=this.dlgs,i=e.indexOf(t);i>-1&&this.dlgs.splice(i,1),0===e.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(t){const e=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(t);if(null==e)return;const i=this.top;if(null===i||0===i.settings.keyboard.length)return;const n=i.settings.keyboard;"Escape"===e&&n.includes(e)?i.cancel():"Enter"===e&&n.includes(e)&&i.ok()}},class{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(t){vi.singleton(Mv,this).register(t)}},qv]),Fe.createInterface((t=>t.singleton(Zv)));class Zv{constructor(t,e,i){this.ctn=t,this.p=e,this.r=i}define(t,e,i){if(!t.includes("-"))throw new Error('Invalid web-components custom element name. It must include a "-"');let n;if(null==e)throw new Error("Invalid custom element definition");if(n="function"==typeof e?uh.isType(e)?uh.getDefinition(e):eh.create(uh.generateName(),e):eh.getOrCreate(e),n.containerless)throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");const s=(null==i?void 0:i.extends)?this.p.document.createElement(i.extends).constructor:HTMLElement,r=this.ctn,o=this.r,a=n.bindables,l=this.p;class c extends s{auInit(){if(this.auInited)return;this.auInited=!0;const t=r.createChild();t.registerResolver(l.HTMLElement,t.registerResolver(l.Element,t.registerResolver(Tu,new gi("ElementProvider",this))));const e=o.compile(n,t,{projections:null}),i=t.invoke(e.Type),s=this.auCtrl=_h.$el(t,i,this,null,e);Eu(this,e.key,s)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null,0)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null,0)}adoptedCallback(){this.auInit()}attributeChangedCallback(t,e,i){this.auInit(),this.auCtrl.viewModel[t]=i}}c.observedAttributes=Object.keys(a);for(const t in a)Object.defineProperty(c.prototype,t,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[t]},set(e){this.auInited||this.auInit(),this.auCtrl.viewModel[t]=e}});return this.p.customElements.define(t,c,i),c}}Zv.inject=[ze,_l,zh];const _v=Ka.getOrCreate(globalThis);class Qv extends class{constructor(t=Fe.createContainer()){if(this.container=t,this.ir=!1,this.Ge=!1,this.Xe=!1,this.Ke=void 0,this.next=void 0,this.Ye=void 0,this.Ze=void 0,t.has(Tv,!0))throw new Error("AUR0768");t.registerResolver(Tv,new gi("IAurelia",this)),t.registerResolver(xu,this.Je=new gi("IAppRoot"))}get isRunning(){return this.ir}get isStarting(){return this.Ge}get isStopping(){return this.Xe}get root(){if(null==this.Ke){if(null==this.next)throw new Error("AUR0767");return this.next}return this.Ke}register(...t){return this.container.register(...t),this}app(t){return this.next=new Cu(t,this.Qe(t.host),this.container,this.Je),this}enhance(t,e){var i;const n=null!==(i=t.container)&&void 0!==i?i:this.container.createChild(),s=t.host,r=this.Qe(s),o=t.component;let a;hl(o)?(n.registerResolver(r.HTMLElement,n.registerResolver(r.Element,n.registerResolver(Tu,new gi("ElementResolver",s)))),a=n.invoke(o)):a=o,n.registerResolver(Ru,new gi("IEventTarget",s)),e=null!=e?e:null;const l=_h.$el(n,a,s,null,eh.create({name:uh.generateName(),template:s,enhance:!0}));return Se(l.activate(l,e,2),(()=>l))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}Qe(t){let e;if(this.container.has(_l,!1))e=this.container.get(_l);else{if(null===t.ownerDocument.defaultView)throw new Error("AUR0769");e=new Ka(t.ownerDocument.defaultView),this.container.register(vi.instance(_l,e))}return e}start(t=this.next){if(null==t)throw new Error("AUR0770");return this.Ye instanceof Promise?this.Ye:this.Ye=Se(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.Je.prepare(this.Ke=t),this.Ge=!0,Se(t.activate(),(()=>{this.ir=!0,this.Ge=!1,this.Ye=void 0,this.ts(t,"au-started",t.host)})))))}stop(t=!1){if(this.Ze instanceof Promise)return this.Ze;if(!0===this.ir){const e=this.Ke;return this.ir=!1,this.Xe=!0,this.Ze=Se(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.Ke=void 0,this.Je.dispose(),this.Xe=!1,this.ts(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.Xe)throw new Error("AUR0771");this.container.dispose()}ts(t,e,i){const n=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});i.dispatchEvent(n)}}{constructor(t=function(){return Fe.createContainer().register(vi.instance(_l,_v),Ev)}()){super(t)}static start(t){return(new Qv).start(t)}static app(t){return(new Qv).app(t)}static enhance(t,e){return(new Qv).enhance(t,e)}static register(...t){return(new Qv).register(...t)}app(t){if(uh.isType(t)){const e=uh.getDefinition(t);let i=document.querySelector(e.name);return null===i&&(i=document.body),super.app({host:i,component:t})}return super.app(t)}}var Gv=function(t,e){return Gv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Gv(t,e)};function Xv(t,e){function i(){this.constructor=t}Gv(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function Yv(t){return"function"==typeof t}var Jv=!1,tg={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,Jv=t},get useDeprecatedSynchronousErrorHandling(){return Jv}};function eg(t){setTimeout((function(){throw t}),0)}var ig={closed:!0,next:function(t){},error:function(t){if(tg.useDeprecatedSynchronousErrorHandling)throw t;eg(t)},complete:function(){}},ng=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function sg(t){return null!==t&&"object"==typeof t}var rg=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),og=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var i=this,n=i._parentOrParents,s=i._ctorUnsubscribe,r=i._unsubscribe,o=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var a=0;a<n.length;++a)n[a].remove(this);if(Yv(r)){s&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof rg?ag(t.errors):[t]}}if(ng(o)){a=-1;for(var l=o.length;++a<l;){var c=o[a];if(sg(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof rg?e=e.concat(ag(t.errors)):e.push(t)}}}if(e)throw new rg(e)}},t.prototype.add=function(e){var i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){var n=i;(i=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=i._parentOrParents;if(null===s)i._parentOrParents=this;else if(s instanceof t){if(s===this)return i;i._parentOrParents=[s,this]}else{if(-1!==s.indexOf(this))return i;s.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[i]:r.push(i),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function ag(t){return t.reduce((function(t,e){return t.concat(e instanceof rg?e.errors:e)}),[])}var lg=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),cg=function(t){function e(i,n,s){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=ig;break;case 1:if(!i){r.destination=ig;break}if("object"==typeof i){i instanceof e?(r.syncErrorThrowable=i.syncErrorThrowable,r.destination=i,i.add(r)):(r.syncErrorThrowable=!0,r.destination=new hg(r,i));break}default:r.syncErrorThrowable=!0,r.destination=new hg(r,i,n,s)}return r}return Xv(e,t),e.prototype[lg]=function(){return this},e.create=function(t,i,n){var s=new e(t,i,n);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(og),hg=function(t){function e(e,i,n,s){var r,o=t.call(this)||this;o._parentSubscriber=e;var a=o;return Yv(i)?r=i:i&&(r=i.next,n=i.error,s=i.complete,i!==ig&&(Yv((a=Object.create(i)).unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=r,o._error=n,o._complete=s,o}return Xv(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;tg.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=tg.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):eg(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;eg(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};tg.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),tg.useDeprecatedSynchronousErrorHandling)throw t;eg(t)}},e.prototype.__tryOrSetError=function(t,e,i){if(!tg.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return tg.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(eg(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(cg),ug=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function dg(t){return t}function pg(t){return 0===t.length?dg:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var fg=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var n=this.operator,s=function(t,e,i){if(t){if(t instanceof cg)return t;if(t[lg])return t[lg]()}return t||e||i?new cg(t,e,i):new cg(ig)}(t,e,i);if(n?s.add(n.call(s,this.source)):s.add(this.source||tg.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),tg.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){tg.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,i=e.closed,n=e.destination,s=e.isStopped;if(i||s)return!1;t=n&&n instanceof cg?n:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=vg(e))((function(e,n){var s;s=i.subscribe((function(e){try{t(e)}catch(t){n(t),s&&s.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[ug]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:pg(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=vg(t))((function(t,i){var n;e.subscribe((function(t){return n=t}),(function(t){return i(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function vg(t){if(t||(t=tg.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var gg=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),mg=function(t){function e(e,i){var n=t.call(this)||this;return n.subject=e,n.subscriber=i,n.closed=!1,n}return Xv(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(og),bg=function(t){function e(e){var i=t.call(this,e)||this;return i.destination=e,i}return Xv(e,t),e}(cg),yg=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Xv(e,t),e.prototype[lg]=function(){return new bg(this)},e.prototype.lift=function(t){var e=new wg(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new gg;if(!this.isStopped)for(var e=this.observers,i=e.length,n=e.slice(),s=0;s<i;s++)n[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new gg;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,n=e.slice(),s=0;s<i;s++)n[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new gg;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),n=0;n<e;n++)i[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new gg;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new gg;return this.hasError?(t.error(this.thrownError),og.EMPTY):this.isStopped?(t.complete(),og.EMPTY):(this.observers.push(t),new mg(this,t))},e.prototype.asObservable=function(){var t=new fg;return t.source=this,t},e.create=function(t,e){return new wg(t,e)},e}(fg),wg=function(t){function e(e,i){var n=t.call(this)||this;return n.destination=e,n.source=i,n}return Xv(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):og.EMPTY},e}(yg),xg=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return Xv(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var i=t.prototype._subscribe.call(this,e);return i&&!i.closed&&e.next(this._value),i},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new gg;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(yg);function kg(t,e){if(!Cg(t))throw Error("Provided state is not of type StateHistory");return e>0?function(t,e){if(e<0||e>=t.future.length)return t;const{past:i,future:n,present:s}=t;return{past:[...i,s,...n.slice(0,e)],present:n[e],future:n.slice(e+1)}}(t,e-1):e<0?function(t,e){if(e<0||e>=t.past.length)return t;const{past:i,future:n,present:s}=t,r=i.slice(0,e),o=[...i.slice(e+1),s,...n];return{past:r,present:i[e],future:o}}(t,t.past.length+e):t}function Sg(t,e){return{...t,past:[...t.past,t.present],present:e,future:[]}}function Cg(t){return void 0!==t.present&&void 0!==t.future&&void 0!==t.past&&Array.isArray(t.future)&&Array.isArray(t.past)}function Ag(t,e){return function(i,n){e(i,n,t)}}const $g="aurelia-store-state";var Eg,Tg,Rg;function Ig(t,e,i){const n=Lg.container.get(Bu).localStorage;if(void 0!==n){const e=void 0!==(null==i?void 0:i.key)?i.key:$g;n.setItem(e,JSON.stringify(t))}}function Og(t,e){const i=Lg.container.get(Bu).localStorage;if(void 0===i)return t;const n=i.getItem(void 0===e?$g:e);if(null===n||""===n)return t;try{return JSON.parse(n)}catch(t){}return t}function Pg(t,e,i){var n;return(null===(n=t.logDefinitions)||void 0===n?void 0:n.hasOwnProperty(e))&&t.logDefinitions[e]&&Object.values(Tg).includes(t.logDefinitions[e])?t.logDefinitions[e]:i}!function(t){t.Before="before",t.After="after"}(Eg||(Eg={})),function(t){t.trace="trace",t.debug="debug",t.info="info",t.warn="warn",t.error="error"}(Tg||(Tg={})),function(t){t.StartEnd="startEnd",t.All="all"}(Rg||(Rg={}));const Lg={container:null};class Mg extends Error{constructor(t){super(`Tried to dispatch an unregistered action ${void 0!==t&&("string"==typeof t?t:t.name)}`)}}class jg extends Error{}class Ug extends Error{}class Bg extends Error{}let Ng=class{constructor(t,e,i,n){var s,r,o,a;this.initialState=t,this.logger=e,this.t=i,this.devToolsAvailable=!1,this.actions=new Map,this.middlewares=new Map,this.dispatchQueue=[],this.options=null!=n?n:{};const l=!0===(null===(r=null===(s=this.options)||void 0===s?void 0:s.history)||void 0===r?void 0:r.undoable);this._state=new xg(t),this.state=this._state.asObservable(),!0!==(null===(a=null===(o=this.options)||void 0===o?void 0:o.devToolsOptions)||void 0===a?void 0:a.disable)&&this.setupDevTools(),l&&this.registerHistoryMethods()}registerMiddleware(t,e,i){this.middlewares.set(t,{placement:e,settings:i})}unregisterMiddleware(t){this.middlewares.has(t)&&this.middlewares.delete(t)}isMiddlewareRegistered(t){return this.middlewares.has(t)}registerAction(t,e){if(0===e.length)throw new Ug("The reducer is expected to have one or more parameters, where the first will be the present state");this.actions.set(e,{type:t})}unregisterAction(t){this.actions.has(t)&&this.actions.delete(t)}isActionRegistered(t){return"string"==typeof t?void 0!==Array.from(this.actions).find((e=>e[1].type===t)):this.actions.has(t)}resetToState(t){this._state.next(t)}async dispatch(t,...e){const i=this.lookupAction(t);return i?this.queueDispatch([{reducer:i,params:e}]):Promise.reject(new Mg(t))}pipe(t,...e){const i=[],n={dispatch:async()=>this.queueDispatch(i),pipe:(e,...s)=>{const r=this.lookupAction(e);if(!r)throw new Mg(t);return i.push({reducer:r,params:s}),n}};return n.pipe(t,...e)}lookupAction(t){if("string"==typeof t){const e=Array.from(this.actions).find((([e,i])=>i.type===t));if(e)return e[0]}else if(this.actions.has(t))return t}async queueDispatch(t){return new Promise(((e,i)=>{this.dispatchQueue.push({actions:t,resolve:e,reject:i}),1===this.dispatchQueue.length&&this.handleQueue()}))}async handleQueue(){if(this.dispatchQueue.length>0){const t=this.dispatchQueue[0];try{await this.internalDispatch(t.actions),t.resolve()}catch(e){t.reject(e)}this.dispatchQueue.shift(),this.handleQueue()}}async internalDispatch(t){var e;const i=t.find((t=>!this.actions.has(t.reducer)));if(i)throw new Mg(i.reducer);Lg.container.get(Bu).performance.mark("dispatch-start");const n=t.map((t=>({type:this.actions.get(t.reducer).type,params:t.params,reducer:t.reducer}))),s={name:n.map((t=>t.type)).join("->"),params:n.reduce(((t,e)=>t.concat(e.params)),[]),pipedActions:n.map((t=>({name:t.type,params:t.params})))};this.options.logDispatchedActions&&this.logger[Pg(this.options,"dispatchedActions",Tg.info)](`Dispatching: ${s.name}`);const r=await this.executeMiddlewares(this._state.getValue(),Eg.Before,s);if(!1===r)return Lg.container.get(Bu).performance.clearMarks(),void Lg.container.get(Bu).performance.clearMeasures();let o=r;for(const t of n){if(o=await t.reducer(o,...t.params),!1===o)return Lg.container.get(Bu).performance.clearMarks(),void Lg.container.get(Bu).performance.clearMeasures();if(Lg.container.get(Bu).performance.mark(`dispatch-after-reducer-${t.type}`),!o&&"object"!=typeof o)throw new Bg("The reducer has to return a new state")}let a=await this.executeMiddlewares(o,Eg.After,s);if(!1===a)return Lg.container.get(Bu).performance.clearMarks(),void Lg.container.get(Bu).performance.clearMeasures();if(Cg(a)&&(null===(e=this.options.history)||void 0===e?void 0:e.limit)&&(a=function(t,e){return Cg(t)&&(t.past.length>e&&(t.past=t.past.slice(t.past.length-e)),t.future.length>e&&(t.future=t.future.slice(0,e))),t}(a,this.options.history.limit)),this._state.next(a),Lg.container.get(Bu).performance.mark("dispatch-end"),this.options.measurePerformance===Rg.StartEnd){Lg.container.get(Bu).performance.measure("startEndDispatchDuration","dispatch-start","dispatch-end");const t=Lg.container.get(Bu).performance.getEntriesByName("startEndDispatchDuration");this.logger[Pg(this.options,"performanceLog",Tg.info)](`Total duration ${t[0].duration} of dispatched action ${s.name}:`,t)}else if(this.options.measurePerformance===Rg.All){const t=Lg.container.get(Bu).performance.getEntriesByType("mark"),e=t[t.length-1].startTime-t[0].startTime;this.logger[Pg(this.options,"performanceLog",Tg.info)](`Total duration ${e} of dispatched action ${s.name}:`,t)}Lg.container.get(Bu).performance.clearMarks(),Lg.container.get(Bu).performance.clearMeasures(),this.updateDevToolsState({type:s.name,params:s.params},a)}executeMiddlewares(t,e,i){return Array.from(this.middlewares).filter((t=>t[1].placement===e)).reduce((async(t,n,s)=>{try{const s=await n[0](await t,this._state.getValue(),n[1].settings,i);return!1!==s&&(s||await t)}catch(e){if(this.options.propagateError)throw e;return await t}finally{Lg.container.get(Bu).performance.mark(`dispatch-${e}-${n[0].name}`)}}),t)}setupDevTools(){this.t.__REDUX_DEVTOOLS_EXTENSION__&&(this.logger[Pg(this.options,"devToolsStatus",Tg.debug)]("DevTools are available"),this.devToolsAvailable=!0,this.devTools=this.t.__REDUX_DEVTOOLS_EXTENSION__.connect(this.options.devToolsOptions),this.devTools.init(this.initialState),this.devTools.subscribe((t=>{var e,i;if(this.logger[Pg(this.options,"devToolsStatus",Tg.debug)](`DevTools sent change ${t.type}`),"ACTION"!==t.type||void 0===t.payload){if("DISPATCH"===t.type&&t.payload)switch(t.payload.type){case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return void this._state.next(JSON.parse(t.state));case"COMMIT":return void this.devTools.init(this._state.getValue());case"RESET":return this.devTools.init(this.initialState),void this.resetToState(this.initialState);case"ROLLBACK":{const e=JSON.parse(t.state);return this.resetToState(e),void this.devTools.init(e)}}}else{const n=Array.from(this.actions).find((function([e]){var i;return e.name===(null===(i=t.payload)||void 0===i?void 0:i.name)})),s=null!==(i=this.lookupAction(null===(e=t.payload)||void 0===e?void 0:e.name))&&void 0!==i?i:null==n?void 0:n[0];if(!s)throw new jg("Tried to remotely dispatch an unregistered action");if(!t.payload.args||t.payload.args.length<1)throw new jg("No action arguments provided");this.dispatch(s,...t.payload.args.slice(1).map((t=>JSON.parse(t)))).catch((()=>{throw new jg("Issue when trying to dispatch an action through devtools")}))}})))}updateDevToolsState(t,e){this.devToolsAvailable&&this.devTools&&this.devTools.send(t,e)}registerHistoryMethods(){this.registerAction("jump",kg)}};Ng=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([Ag(1,Oi),Ag(2,Bu)],Ng);const Vg=t=>t.state;function Fg(t){const e={selector:"function"==typeof t?t:Vg,...t};function i(t,e){const i=e(t);return i instanceof fg?i:t.state}function n(){const t="object"==typeof e.selector,i={[e.target||"state"]:e.selector||Vg};return Object.entries({...t?e.selector:i}).map((([i,n])=>{var s,r;return{targets:e.target&&t?[e.target,i]:[i],selector:n,changeHandlers:{[null!==(s=e.onChanged)&&void 0!==s?s:""]:1,[`${null!==(r=e.target)&&void 0!==r?r:i}Changed`]:e.target?0:1,propertyChanged:0}}}))}return function(e){const s="object"==typeof t&&t.setup?e.prototype[t.setup]:e.prototype.binding,r="object"==typeof t&&t.teardown?e.prototype[t.teardown]:e.prototype.unbinding;e.prototype["object"==typeof t&&void 0!==t.setup?t.setup:"binding"]=function(){if("object"==typeof t&&"string"==typeof t.onChanged&&!(t.onChanged in this))throw new Error("Provided onChanged handler does not exist on target VM");const e=_h.getCached(this)?_h.getCached(this).container.get(Ng):Lg.container.get(Ng);if(this._stateSubscriptions=n().map((t=>i(e,t.selector).subscribe((e=>{const i=t.targets.length-1,n=t.targets.reduce(((t={},e)=>t[e]),this);Object.entries(t.changeHandlers).forEach((([s,r])=>{s in this&&this[s](...[t.targets[i],e,n].slice(r,3))})),t.targets.reduce(((t,n,s)=>(t[n]=s===i?e:t[n]||{},t[n])),this)})))),s)return s.apply(this,arguments)},e.prototype["object"==typeof t&&t.teardown?t.teardown:"unbinding"]=function(){if(this._stateSubscriptions&&Array.isArray(this._stateSubscriptions)&&this._stateSubscriptions.forEach((t=>{t instanceof og&&!1===t.closed&&t.unsubscribe()})),r)return r.apply(this,arguments)}}}const Dg={withInitialState(t){return Reflect.set(this,"state",t),this},withOptions(t){return Reflect.set(this,"options",t),this},register(t){var e;Lg.container=t;const i=Reflect.get(this,"state"),n=Reflect.get(this,"options"),s=t.get(Oi),r=t.get(Bu);if(!i)throw new Error("initialState must be provided via withInitialState builder method");let o=i;return(null===(e=null==n?void 0:n.history)||void 0===e?void 0:e.undoable)&&!Cg(i)&&(o={past:[],present:i,future:[]}),vi.instance(Ng,new Ng(o,s,r,n)).register(t),t}};function Hg(t){return"object"==typeof t&&null!==t||"function"==typeof t}function zg(t){return null==t}let qg=new WeakMap;function Wg(t,e,i,n,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${i}' to be of type ${s}, but got: ${Object.prototype.toString.call(n)} (${String(n)})`)}function Kg(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function Zg(t,e,i){let n=qg.get(t);if(void 0===n){if(!i)return;n=new Map,qg.set(t,n)}let s=n.get(e);if(void 0===s){if(!i)return;s=new Map,n.set(e,s)}return s}function _g(t,e,i){const n=Zg(e,i,!1);return void 0!==n&&n.has(t)}function Qg(t,e,i){if(_g(t,e,i))return!0;const n=Object.getPrototypeOf(e);return null!==n&&Qg(t,n,i)}function Gg(t,e,i){const n=Zg(e,i,!1);if(void 0!==n)return n.get(t)}function Xg(t,e,i){if(_g(t,e,i))return Gg(t,e,i);const n=Object.getPrototypeOf(e);return null!==n?Xg(t,n,i):void 0}function Yg(t,e,i,n){Zg(i,n,!0).set(t,e)}function Jg(t,e){const i=[],n=Zg(t,e,!1);if(void 0===n)return i;const s=n.keys();let r=0;for(const t of s)i[r]=t,++r;return i}function tm(t,e){const i=Jg(t,e),n=Object.getPrototypeOf(t);if(null===n)return i;const s=tm(n,e),r=i.length;if(0===r)return s;const o=s.length;if(0===o)return i;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=i[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}function em(t,e){return function(i,n){if(!Hg(i))throw Wg("@metadata",[t,e,i,n],"target",i,"Object or Function");Yg(t,e,i,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(n))}}function im(t,e,i,n){if(void 0!==i){if(!Array.isArray(t))throw Wg("Metadata.decorate",[t,e,i,n],"decorators",t,"Array");if(!Hg(e))throw Wg("Metadata.decorate",[t,e,i,n],"target",e,"Object or Function");if(!Hg(n)&&!zg(n))throw Wg("Metadata.decorate",[t,e,i,n],"attributes",n,"Object, Function, null, or undefined");return null===n&&(n=void 0),function(t,e,i,n){for(let s=t.length-1;s>=0;--s){const r=(0,t[s])(e,i,n);if(!zg(r)){if(!Hg(r))throw Wg("DecorateProperty",[t,e,i,n],"decorated",r,"Object, Function, null, or undefined");n=r}}return n}(t,e,i=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(i),n)}if(!Array.isArray(t))throw Wg("Metadata.decorate",[t,e,i,n],"decorators",t,"Array");if("function"!=typeof e)throw Wg("Metadata.decorate",[t,e,i,n],"target",e,"Function");return function(t,e){for(let i=t.length-1;i>=0;--i){const n=(0,t[i])(e);if(!zg(n)){if("function"!=typeof n)throw Wg("DecorateConstructor",[t,e],"decorated",n,"Function, null, or undefined");e=n}}return e}(t,e)}function nm(t,e,i,n){if(!Hg(i))throw Wg("Metadata.define",[t,e,i,n],"target",i,"Object or Function");return Yg(t,e,i,Kg(n))}function sm(t,e,i){if(!Hg(e))throw Wg("Metadata.has",[t,e,i],"target",e,"Object or Function");return Qg(t,e,Kg(i))}function rm(t,e,i){if(!Hg(e))throw Wg("Metadata.hasOwn",[t,e,i],"target",e,"Object or Function");return _g(t,e,Kg(i))}function om(t,e,i){if(!Hg(e))throw Wg("Metadata.get",[t,e,i],"target",e,"Object or Function");return Xg(t,e,Kg(i))}function am(t,e,i){if(!Hg(e))throw Wg("Metadata.getOwn",[t,e,i],"target",e,"Object or Function");return Gg(t,e,Kg(i))}function lm(t,e){if(!Hg(t))throw Wg("Metadata.getKeys",[t,e],"target",t,"Object or Function");return tm(t,Kg(e))}function cm(t,e){if(!Hg(t))throw Wg("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return Jg(t,Kg(e))}function hm(t,e,i){if(!Hg(e))throw Wg("Metadata.delete",[t,e,i],"target",e,"Object or Function");return function(t,e,i){const n=Zg(t,i,!1);return void 0!==n&&n.delete(e)}(e,t,Kg(i))}const um={define:nm,has:sm,hasOwn:rm,get:om,getOwn:am,getKeys:lm,getOwnKeys:cm,delete:hm};function dm(t,e,i,n,s){if(!Reflect.defineProperty(t,e,{writable:n,enumerable:!1,configurable:s,value:i}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}const pm="[[$au]]";function fm(t,e,i){dm(t,pm,qg,e,i),dm(t,"metadata",em,e,i),dm(t,"decorate",im,e,i),dm(t,"defineMetadata",nm,e,i),dm(t,"hasMetadata",sm,e,i),dm(t,"hasOwnMetadata",rm,e,i),dm(t,"getMetadata",om,e,i),dm(t,"getOwnMetadata",am,e,i),dm(t,"getMetadataKeys",lm,e,i),dm(t,"getOwnMetadataKeys",cm,e,i),dm(t,"deleteMetadata",hm,e,i)}const vm=um.getOwn,gm=um.hasOwn,mm=um.define,bm=t=>"function"==typeof t,ym=t=>"string"==typeof t,wm=()=>Object.create(null),xm={};function km(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=xm[t];if(void 0!==e)return e;const i=t.length;if(0===i)return xm[t]=!1;let n=0,s=0;for(;s<i;++s)if(n=t.charCodeAt(s),0===s&&48===n&&i>1||n<48||n>57)return xm[t]=!1;return xm[t]=!0}default:return!1}}function Sm(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function Cm(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const Am=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(wm(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function i(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const n=t.length;if(0===n)return t;let s,r=!1,o="",a="",l=0,c=t.charAt(0),h=i(c),u=0;for(;u<n;++u)s=l,a=c,l=h,c=t.charAt(u+1),h=i(c),0===l?o.length>0&&(r=!0):(!r&&o.length>0&&2===l&&(r=3===s||3===h),o+=e(a,r),r=!1);return o}}(),$m=function(){const t=wm();function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(i){let n=t[i];return void 0===n&&(n=t[i]=Am(i,e)),n}}(),Em=function(){const t=wm();return function(e){let i=t[e];return void 0===i&&(i=$m(e),i.length>0&&(i=i[0].toUpperCase()+i.slice(1)),t[e]=i),i}}(),Tm=function(){const t=wm();function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(i){let n=t[i];return void 0===n&&(n=t[i]=Am(i,e)),n}}();function Rm(t){const{length:e}=t,i=Array(e);let n=0;for(;n<e;++n)i[n]=t[n];return i}const Im={};function Om(t){return void 0===Im[t]&&(Im[t]=0),++Im[t]}function Pm(t,e){return t-e}function Lm(t,e,i){return{configurable:!0,enumerable:i.enumerable,get(){const t=i.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:i.enumerable}),t}}}function Mm(...t){const e=[];let i=0;const n=t.length;let s,r=0,o=0;for(;o<n;++o)if(s=t[o],void 0!==s){r=s.length;let t=0;for(;t<r;++t)e[i++]=s[t]}return e}function jm(...t){const e=t.length;let i,n=0;for(;e>n;++n)if(i=t[n],void 0!==i)return i;throw new Error("No default value found")}const Um=function(){const t=Function.prototype,e=Object.getPrototypeOf,i=new WeakMap;let n,s=t,r=0;return function(o){if(n=i.get(o),void 0===n)for(i.set(o,n=[s=o]),r=0;(s=e(s))!==t;)n[++r]=s;return n}}();function Bm(...t){return Object.assign(wm(),...t)}const Nm=function(){const t=new WeakMap;let e=!1,i="",n=0;return function(s){return e=t.get(s),void 0===e&&(i=s.toString(),n=i.length,e=n>=29&&n<=100&&125===i.charCodeAt(n-1)&&i.charCodeAt(n-2)<=32&&93===i.charCodeAt(n-3)&&101===i.charCodeAt(n-4)&&100===i.charCodeAt(n-5)&&111===i.charCodeAt(n-6)&&99===i.charCodeAt(n-7)&&32===i.charCodeAt(n-8)&&101===i.charCodeAt(n-9)&&118===i.charCodeAt(n-10)&&105===i.charCodeAt(n-11)&&116===i.charCodeAt(n-12)&&97===i.charCodeAt(n-13)&&110===i.charCodeAt(n-14)&&88===i.charCodeAt(n-15),t.set(s,e)),e}}();function Vm(t,e){return t instanceof Promise?t.then(e):e(t)}function Fm(...t){let e,i,n,s=0,r=t.length;for(;s<r;++s)e=t[s],(e=t[s])instanceof Promise&&(void 0===i?i=e:void 0===n?n=[i,e]:n.push(e));return void 0===n?i:Promise.all(n)}const Dm="au:annotation",Hm=(t,e)=>void 0===e?`au:annotation:${t}`:`au:annotation:${t}:${e}`,zm=(t,e)=>{const i=vm(Dm,t);void 0===i?mm(Dm,[e],t):i.push(e)},qm=Object.freeze({name:"au:annotation",appendTo:zm,set(t,e,i){mm(Hm(e),i,t)},get:(t,e)=>vm(Hm(e),t),getKeys(t){let e=vm(Dm,t);return void 0===e&&mm(Dm,e=[],t),e},isKey:t=>t.startsWith(Dm),keyFor:Hm}),Wm="au:resource",Km=Object.freeze({name:Wm,appendTo(t,e){const i=vm(Wm,t);void 0===i?mm(Wm,[e],t):i.push(e)},has:t=>gm(Wm,t),getAll(t){const e=vm(Wm,t);return void 0===e?jb:e.map((e=>vm(e,t)))},getKeys(t){let e=vm(Wm,t);return void 0===e&&mm(Wm,e=[],t),e},isKey:t=>t.startsWith(Wm),keyFor:(t,e)=>void 0===e?`au:resource:${t}`:`au:resource:${t}:${e}`}),Zm={annotation:qm,resource:Km},_m=Object.prototype.hasOwnProperty;function Qm(t,e,i,n){let s=vm(Hm(t),i);return void 0===s?(s=e[t],void 0===s?(s=i[t],void 0!==s&&_m.call(i,t)?s:n()):s):s}function Gm(t,e,i){let n=vm(Hm(t),e);return void 0===n?(n=e[t],void 0!==n&&_m.call(e,t)?n:i()):n}function Xm(t,e,i){const n=e[t];return void 0===n?i():n}!function(t,e=!0,i=!1,n=!0,s=!0){if(function(t){return pm in t}(t)){if(t["[[$au]]"]===qg)return;if(t["[[$au]]"]instanceof WeakMap)return void(qg=t["[[$au]]"]);throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const r=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`)}i&&fm(t,n,s)}else fm(t,n,s)}(Reflect,!1,!1);class Ym{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,Rb(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:i,key:n}=this;return this.container=this.key=void 0,i.registerResolver(n,new gb(n,t,e))}}function Jm(t){const e=t.slice(),i=Object.keys(t),n=i.length;let s;for(let r=0;r<n;++r)s=i[r],km(s)||(e[s]=t[s]);return e}const tb={none(t){throw Error(`AUR0002:${t.toString()}`)},singleton:t=>new gb(t,1,t),transient:t=>new gb(t,2,t)};class eb{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){var e,i;return void 0===t||t===eb.DEFAULT?eb.DEFAULT:new eb(null!==(e=t.inheritParentResources)&&void 0!==e&&e,null!==(i=t.defaultResolver)&&void 0!==i?i:tb.singleton)}}eb.DEFAULT=eb.from({});const ib={createContainer:t=>new $b(null,eb.from(t)),getDesignParamtypes:t=>vm("design:paramtypes",t),getAnnotationParamtypes(t){const e=Hm("di:paramtypes");return vm(e,t)},getOrCreateAnnotationParamTypes:sb,getDependencies:nb,createInterface(t,e){const i=bm(t)?t:e,n=ym(t)?t:void 0,s=function(t,e,i){if(null==t||void 0!==new.target)throw new Error(`AUR0001:${s.friendlyName}`);sb(t)[i]=s};return s.$isInterface=!0,s.friendlyName=null==n?"(anonymous)":n,null!=i&&(s.register=function(t,e){return i(new Ym(t,null!=e?e:s))}),s.toString=function(){return`InterfaceSymbol<${s.friendlyName}>`},s},inject:(...t)=>function(e,i,n){if("number"==typeof n){const i=sb(e),s=t[0];void 0!==s&&(i[n]=s)}else if(i){const n=sb(e.constructor),s=t[0];void 0!==s&&(n[i]=s)}else if(n){const e=sb(n.value);let i;for(let n=0;n<t.length;++n)i=t[n],void 0!==i&&(e[n]=i)}else{const i=sb(e);let n;for(let e=0;e<t.length;++e)n=t[e],void 0!==n&&(i[e]=n)}},transient:t=>(t.register=function(e){return Ib.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=hb)=>(t.register=function(e){return Ib.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)};function nb(t){const e=Hm("di:dependencies");let i=vm(e,t);if(void 0===i){const n=t.inject;if(void 0===n){const e=ib.getDesignParamtypes(t),n=ib.getAnnotationParamtypes(t);if(void 0===e)if(void 0===n){const e=Object.getPrototypeOf(t);i=bm(e)&&e!==Function.prototype?Jm(nb(e)):[]}else i=Jm(n);else if(void 0===n)i=Jm(e);else{i=Jm(e);let t,s=n.length,r=0;for(;r<s;++r)t=n[r],void 0!==t&&(i[r]=t);const o=Object.keys(n);let a;for(r=0,s=o.length,r=0;r<s;++r)a=o[r],km(a)||(i[a]=n[a])}}else i=Jm(n);mm(e,i,t),zm(t,e)}return i}function sb(t){const e=Hm("di:paramtypes");let i=vm(e,t);return void 0===i&&(mm(e,i=[],t),zm(t,e)),i}const rb=ib.createInterface("IContainer"),ob=rb;function ab(t){return function(e){const i=function(t,e,n){ib.inject(i)(t,e,n)};return i.$isResolver=!0,i.resolve=function(i,n){return t(e,i,n)},i}}function lb(t){return ib.transient(t)}function cb(t){return null==t?lb:lb(t)}ib.inject;const hb={scoped:!1},ub=function(t,e){e=!!e;const i=function(t,e,n){ib.inject(i)(t,e,n)};return i.$isResolver=!0,i.resolve=function(i,n){return((t,e,i,n)=>i.getAll(t,n))(t,0,n,e)},i},db=(ab(((t,e,i)=>()=>i.get(t))),ab(((t,e,i)=>i.has(t,!0)?i.get(t):void 0)));function pb(t,e,i){ib.inject(pb)(t,e,i)}function fb(t,e,i){return e.getFactory(t).construct(i)}var vb;pb.$isResolver=!0,pb.resolve=()=>{},ab(((t,e,i)=>(...n)=>e.getFactory(t).construct(i,n))),ab(((t,e,i)=>{const n=fb(t,e,i),s=new Ob(String(t),n);return i.registerResolver(t,s,!0),n})),ab(((t,e,i)=>fb(t,e,i))),function(t){t[t.instance=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.callback=3]="callback",t[t.array=4]="array",t[t.alias=5]="alias"}(vb||(vb={}));class gb{constructor(t,e,i){this.key=t,this.strategy=e,this.state=i,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`AUR0003:${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const i=t.getFactory(this.state);if(null===i)throw new Error(`AUR0004:${String(this.key)}`);return i.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`AUR0005:${this.strategy}`)}}getFactory(t){var e,i,n;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(n=null===(i=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===i?void 0:i.call(e,t))&&void 0!==n?n:null;default:return null}}}function mb(t){return this.get(t)}function bb(t,e){return e(t)}class yb{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let i;return i=void 0===e?new this.Type(...this.dependencies.map(mb,t)):new this.Type(...this.dependencies.map(mb,t),...e),null==this.transformers?i:this.transformers.reduce(bb,i)}registerTransformer(t){var e;(null!==(e=this.transformers)&&void 0!==e?e:this.transformers=[]).push(t)}}const wb={$isResolver:!0,resolve:(t,e)=>e};function xb(t){return bm(t.register)}function kb(t){return function(t){return xb(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}function Sb(t){return void 0!==t.prototype}const Cb=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]);let Ab=0;class $b{constructor(t,e){this.parent=t,this.config=e,this.id=++Ab,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=wm()):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign(wm(),t.res,this.root.res):this.res=wm()),this.u.set(rb,wb)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw new Error(`AUR0006:${t.map(String)}`);let e,i,n,s,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],Hg(e))if(xb(e))e.register(this);else if(Zm.resource.has(e)){const t=Zm.resource.getAll(e);if(1===t.length)t[0].register(this);else for(s=0,r=t.length;r>s;)t[s].register(this),++s}else if(Sb(e))Ib.singleton(e,e).register(this);else for(i=Object.keys(e),s=0,r=i.length;s<r;++s)n=e[i[s]],Hg(n)&&(xb(n)?n.register(this):this.register(n));return--this.t,this}registerResolver(t,e,i=!1){Pb(t);const n=this.u,s=n.get(t);if(null==s){if(n.set(t,e),function(t){return ym(t)&&t.indexOf(":")>0}(t)){if(void 0!==this.res[t])throw new Error(`AUR0007:${t}`);this.res[t]=e}}else s instanceof gb&&4===s.strategy?s.state.push(e):n.set(t,new gb(t,4,[s,e]));return i&&this.i.set(t,e),e}registerTransformer(t,e){const i=this.getResolver(t);if(null==i)return!1;if(i.getFactory){const t=i.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(Pb(t),void 0!==t.resolve)return t;let i,n=this;for(;null!=n;){if(i=n.u.get(t),null!=i)return i;if(null==n.parent){const i=kb(t)?this:n;return e?this.R(t,i):null}n=n.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(Pb(t),t.$isResolver)return t.resolve(this,this);let e,i=this;for(;null!=i;){if(e=i.u.get(t),null!=e)return e.resolve(i,this);if(null==i.parent){const n=kb(t)?this:i;return e=this.R(t,n),e.resolve(i,this)}i=i.parent}throw new Error(`AUR0008:${String(t)}`)}getAll(t,e=!1){Pb(t);const i=this;let n,s=i;if(e){let e=jb;for(;null!=s;)n=s.u.get(t),null!=n&&(e=e.concat(Lb(n,s,i))),s=s.parent;return e}for(;null!=s;){if(n=s.u.get(t),null!=n)return Lb(n,s,i);if(s=s.parent,null==s)return jb}return jb}invoke(t,e){if(Nm(t))throw Mb(t);return void 0===e?new t(...nb(t).map(mb,this)):new t(...nb(t).map(mb,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(Nm(t))throw Mb(t);this.h.set(t,e=new yb(t,nb(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===eb.DEFAULT?new $b(this,this.config):new $b(this,eb.from({...this.config,inheritParentResources:!1})):new $b(this,eb.from(null!=t?t:this.config))}disposeResolvers(){const t=this.u,e=this.i;let i,n;for([n,i]of e.entries())i.dispose(),t.delete(n);e.clear()}find(t,e){const i=t.keyFrom(e);let n=this.res[i];if(void 0===n&&(n=this.root.res[i],void 0===n))return null;if(null===n)return null;if(bm(n.getFactory)){const e=n.getFactory(this);if(null==e)return null;const i=vm(t.name,e.Type);return void 0===i?null:i}return null}create(t,e){var i,n;const s=t.keyFrom(e);let r=this.res[s];return void 0===r?(r=this.root.res[s],void 0===r?null:null!==(i=r.resolve(this.root,this))&&void 0!==i?i:null):null!==(n=r.resolve(this,this))&&void 0!==n?n:null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}R(t,e){if(!bm(t))throw new Error(`AUR0009:${t}`);if(Cb.has(t.name))throw new Error(`AUR0010:${t.name}`);if(xb(t)){const i=t.register(e,t);if(!(i instanceof Object)||null==i.resolve){const i=e.u.get(t);if(null!=i)return i;throw new Error("AUR0011")}return i}if(Zm.resource.has(t)){const i=Zm.resource.getAll(t);if(1===i.length)i[0].register(e);else{const t=i.length;for(let n=0;n<t;++n)i[n].register(e)}const n=e.u.get(t);if(null!=n)return n;throw new Error("AUR0011")}if(t.$isInterface)throw new Error(`AUR0012:${t.friendlyName}`);{const i=this.config.defaultResolver(t,e);return e.u.set(t,i),i}}}class Eb{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const Tb=new WeakMap;function Rb(t){return function(e,i,n){let s=Tb.get(e);if(void 0===s&&Tb.set(e,s=new WeakMap),s.has(n))return s.get(n);const r=t(e,i,n);return s.set(n,r),r}}const Ib={instance:(t,e)=>new gb(t,0,e),singleton:(t,e)=>new gb(t,1,e),transient:(t,e)=>new gb(t,2,e),callback:(t,e)=>new gb(t,3,e),cachedCallback:(t,e)=>new gb(t,3,Rb(e)),aliasTo:(t,e)=>new gb(e,5,t),defer:(t,...e)=>new Eb(t,e)};class Ob{constructor(t,e){this.C=null,this.$=t,void 0!==e&&(this.C=e)}get friendlyName(){return this.$}prepare(t){this.C=t}get $isResolver(){return!0}resolve(){if(null==this.C)throw new Error(`AUR0013:${this.$}`);return this.C}dispose(){this.C=null}}function Pb(t){if(null==t)throw new Error("AUR0014")}function Lb(t,e,i){if(t instanceof gb&&4===t.strategy){const n=t.state;let s=n.length;const r=new Array(s);for(;s--;)r[s]=n[s].resolve(e,i);return r}return[t.resolve(e,i)]}function Mb(t){return new Error(`AUR0015:${t.name}`)}const jb=Object.freeze([]),Ub=Object.freeze({});function Bb(){}const Nb=ib.createInterface("IPlatform");function Vb(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function Fb(t,e){return function(i,n){e(i,n,t)}}var Db,Hb;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(Db||(Db={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Hb||(Hb={}));const zb=ib.createInterface("ILogConfig",(t=>t.instance(new Gb(0,3)))),qb=ib.createInterface("ISink"),Wb=ib.createInterface("ILogEventFactory",(t=>t.singleton(ty))),Kb=ib.createInterface("ILogger",(t=>t.singleton(iy))),Zb=ib.createInterface("ILogScope"),_b=Object.freeze({key:Hm("logger-sink-handles"),define(t,e){return mm(this.key,e.handles,t.prototype),t},getHandles(t){return um.get(this.key,t)}}),Qb=Bm({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class Gb{constructor(t,e){this.colorOptions=t,this.level=e}}const Xb=function(){const t=[Bm({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),Bm({TRC:Qb.grey("TRC"),DBG:Qb.grey("DBG"),INF:Qb.white("INF"),WRN:Qb.yellow("WRN"),ERR:Qb.red("ERR"),FTL:Qb.red("FTL"),QQQ:Qb.grey("???")})];return function(e,i){return e<=0?t[i].TRC:e<=1?t[i].DBG:e<=2?t[i].INF:e<=3?t[i].WRN:e<=4?t[i].ERR:e<=5?t[i].FTL:t[i].QQQ}}();function Yb(t,e){return 0===e?new Date(t).toISOString():Qb.grey(new Date(t).toISOString())}class Jb{constructor(t,e,i,n,s,r){this.severity=t,this.message=e,this.optionalParams=i,this.scope=n,this.colorOptions=s,this.timestamp=r}toString(){const{severity:t,message:e,scope:i,colorOptions:n,timestamp:s}=this;return 0===i.length?`${Yb(s,n)} [${Xb(t,n)}] ${e}`:`${Yb(s,n)} [${Xb(t,n)} ${function(t,e){return 0===e?t.join("."):t.map(Qb.cyan).join(".")}(i,n)}] ${e}`}}let ty=class{constructor(t){this.config=t}createLogEvent(t,e,i,n){return new Jb(e,i,n,t.scope,this.config.colorOptions,Date.now())}};ty=Vb([Fb(0,zb)],ty);let ey=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const i=t.optionalParams;if(void 0===i||0===i.length){const i=t.toString();switch(t.severity){case 0:case 1:return e.debug(i);case 2:return e.info(i);case 3:return e.warn(i);case 4:case 5:return e.error(i)}}else{let n=t.toString(),s=0;for(;n.includes("%s");)n=n.replace("%s",String(i[s++]));switch(t.severity){case 0:case 1:return e.debug(n,...i.slice(s));case 2:return e.info(n,...i.slice(s));case 3:return e.warn(n,...i.slice(s));case 4:case 5:return e.error(n,...i.slice(s))}}}}static register(e){Ib.singleton(qb,t).register(e)}};ey=Vb([Fb(0,Nb)],ey);let iy=class t{constructor(t,e,i,n=[],s=null){var r,o,a,l,c,h;let u,d,p,f,v,g;if(this.config=t,this.factory=e,this.scope=n,this.scopedLoggers=wm(),null===s){this.root=this,this.parent=this,u=this.traceSinks=[],d=this.debugSinks=[],p=this.infoSinks=[],f=this.warnSinks=[],v=this.errorSinks=[],g=this.fatalSinks=[];for(const t of i){const e=_b.getHandles(t);(null===(r=null==e?void 0:e.includes(0))||void 0===r||r)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&d.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&p.push(t),(null===(l=null==e?void 0:e.includes(3))||void 0===l||l)&&f.push(t),(null===(c=null==e?void 0:e.includes(4))||void 0===c||c)&&v.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&g.push(t)}}else this.root=s.root,this.parent=s,u=this.traceSinks=s.traceSinks,d=this.debugSinks=s.debugSinks,p=this.infoSinks=s.infoSinks,f=this.warnSinks=s.warnSinks,v=this.errorSinks=s.errorSinks,g=this.fatalSinks=s.fatalSinks}trace(t,...e){this.config.level<=0&&this.emit(this.traceSinks,0,t,e)}debug(t,...e){this.config.level<=1&&this.emit(this.debugSinks,1,t,e)}info(t,...e){this.config.level<=2&&this.emit(this.infoSinks,2,t,e)}warn(t,...e){this.config.level<=3&&this.emit(this.warnSinks,3,t,e)}error(t,...e){this.config.level<=4&&this.emit(this.errorSinks,4,t,e)}fatal(t,...e){this.config.level<=5&&this.emit(this.fatalSinks,5,t,e)}scopeTo(e){const i=this.scopedLoggers;let n=i[e];return void 0===n&&(n=i[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),n}emit(t,e,i,n){const s=bm(i)?i():i,r=this.factory.createLogEvent(this,e,s,n);for(let e=0,i=t.length;e<i;++e)t[e].handleEvent(r)}};function ny(t){return t}Vb([Lm],iy.prototype,"trace",null),Vb([Lm],iy.prototype,"debug",null),Vb([Lm],iy.prototype,"info",null),Vb([Lm],iy.prototype,"warn",null),Vb([Lm],iy.prototype,"error",null),Vb([Lm],iy.prototype,"fatal",null),iy=Vb([Fb(0,zb),Fb(1,Wb),Fb(2,ub(qb)),Fb(3,db(Zb)),Fb(4,pb)],iy),Bm({create:({level:t=3,colorOptions:e=0,sinks:i=[]}={})=>Bm({register(n){n.register(Ib.instance(zb,new Gb(e,t)));for(const t of i)bm(t)?n.register(Ib.singleton(qb,t)):n.register(t);return n}})}),ib.createInterface((t=>t.singleton(ry)));class sy{constructor(t){this.$transform=t,this.A=new Map,this.j=new Map}transform(t){if(t instanceof Promise)return this.I(t);if("object"==typeof t&&null!==t)return this.O(t);throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`)}I(t){if(this.A.has(t))return this.A.get(t);const e=t.then((t=>this.O(t)));return this.A.set(t,e),e.then((e=>{this.A.set(t,e)})),e}O(t){if(this.j.has(t))return this.j.get(t);const e=this.$transform(this.M(t));return this.j.set(t,e),e instanceof Promise&&e.then((e=>{this.j.set(t,e)})),e}M(t){let e,i,n,s;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;i=bm(e.register),n=!1,s=jb;break;case"function":i=bm(e.register),n=void 0!==e.prototype,s=Zm.resource.getAll(e);break;default:continue}r.push(new ay(o,e,i,n,s))}return new oy(t,r)}}class ry{constructor(){this.transformers=new Map}load(t,e=ny){const i=this.transformers;let n=i.get(e);return void 0===n&&i.set(e,n=new sy(e)),n.transform(t)}dispose(){this.transformers.clear()}}class oy{constructor(t,e){this.raw=t,this.items=e}}class ay{constructor(t,e,i,n,s){this.key=t,this.value=e,this.isRegistry=i,this.isConstructable=n,this.definitions=s}}class ly{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}const cy=ib.createInterface("IEventAggregator",(t=>t.singleton(hy)));class hy{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw new Error(`Invalid channel name or instance: ${t}.`);if(ym(t)){let i=this.eventLookup[t];if(void 0!==i){i=i.slice();let n=i.length;for(;n-- >0;)i[n](e,t)}}else{const e=this.messageHandlers.slice();let i=e.length;for(;i-- >0;)e[i].handle(t)}}subscribe(t,e){if(!t)throw new Error(`Invalid channel name or type: ${t}.`);let i,n;return ym(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),i=e,n=this.eventLookup[t]):(i=new ly(t,e),n=this.messageHandlers),n.push(i),{dispose(){const t=n.indexOf(i);-1!==t&&n.splice(t,1)}}}subscribeOnce(t,e){const i=this.subscribe(t,(function(t,n){i.dispose(),e(t,n)}));return i}}const uy=Object.prototype.hasOwnProperty,dy=Reflect.defineProperty,py=t=>"function"==typeof t,fy=t=>"string"==typeof t;function vy(t,e,i){return dy(t,e,{enumerable:!1,configurable:!0,writable:!0,value:i}),i}function gy(t,e,i,n=!1){!n&&uy.call(t,e)||vy(t,e,i)}const my=()=>Object.create(null),by=um.getOwn,yy=um.hasOwn,wy=um.define,xy=Zm.annotation.keyFor,ky=Zm.resource.keyFor,Sy=Zm.resource.appendTo;function Cy(t,e,i,n){for(let s=0,r=t.length;s<r;++s)Ib.aliasTo(i,e.keyFrom(t[s])).register(n)}Object.freeze({});class Ay{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)uy.call(t,e)&&(this[e]=t[e])}static create(t,e){return new Ay(t,e)}static get(t,e,i,n){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(i>0){for(;i>0;)if(i--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class $y{constructor(t,e,i,n){this.parentScope=t,this.bindingContext=e,this.overrideContext=i,this.isBoundary=n}static create(t,e,i){return new $y(null,t,null==e?Ey.create(t):e,null!=i&&i)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new $y(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new $y(t,e,Ey.create(e),!1)}}class Ey{constructor(t){this.bindingContext=t}static create(t){return new Ey(t)}}const Ty=ib.createInterface("ISignaler",(t=>t.singleton(Ry)));class Ry{constructor(){this.signals=my()}dispatchSignal(t,e){const i=this.signals[t];if(void 0===i)return;let n;for(n of i.keys())n.handleChange(void 0,void 0,e)}addSignalListener(t,e){const i=this.signals,n=i[t];void 0===n?i[t]=new Set([e]):n.add(e)}removeSignalListener(t,e){const i=this.signals[t];i&&i.delete(e)}}var Iy;function Oy(t){return function(e){return By.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(Iy||(Iy={}));class Py{constructor(t,e,i,n,s){this.Type=t,this.name=e,this.aliases=i,this.key=n,this.strategy=s}static create(t,e){let i,n;fy(t)?(i=t,n={name:i}):(i=t.name,n=t);const s=Object.getPrototypeOf(e)===My;return new Py(e,jm(Uy(e,"name"),i),Mm(Uy(e,"aliases"),n.aliases,e.aliases),By.keyFrom(i),Qm("strategy",n,e,(()=>s?2:1)))}register(t){const{Type:e,key:i,aliases:n,strategy:s}=this;switch(s){case 1:Ib.singleton(i,e).register(t);break;case 2:Ib.instance(i,new Ly(t,e)).register(t)}Ib.aliasTo(i,e).register(t),Cy(n,By,i,t)}}class Ly{constructor(t,e){this.ctn=t,this.Type=e,this.deps=ib.getDependencies(e)}construct(t,e){const i=this.ctn,n=this.deps;switch(n.length){case 0:return new this.Type(t,e);case 1:return new this.Type(i.get(n[0]),t,e);case 2:return new this.Type(i.get(n[0]),i.get(n[1]),t,e);default:return new this.Type(...n.map((t=>i.get(t))),t,e)}}}class My{constructor(t,e){let i;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)i=t.interceptor,t.interceptor=this,t=i}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,i){this.binding.handleChange(t,e,i)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{dy(My.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const jy=ky("binding-behavior"),Uy=(t,e)=>by(xy(e),t),By=Object.freeze({name:jy,keyFrom:t=>`${jy}:${t}`,isType:t=>py(t)&&yy(jy,t),define(t,e){const i=Py.create(t,e);return wy(jy,i,i.Type),wy(jy,i,i),Sy(e,jy),i.Type},getDefinition(t){const e=by(jy,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,i){wy(xy(e),i,t)},getAnnotation:Uy});function Ny(t){return function(e){return Hy.define(t,e)}}class Vy{constructor(t,e,i,n){this.Type=t,this.name=e,this.aliases=i,this.key=n}static create(t,e){let i,n;return fy(t)?(i=t,n={name:i}):(i=t.name,n=t),new Vy(e,jm(Dy(e,"name"),i),Mm(Dy(e,"aliases"),n.aliases,e.aliases),Hy.keyFrom(i))}register(t){const{Type:e,key:i,aliases:n}=this;Ib.singleton(i,e).register(t),Ib.aliasTo(i,e).register(t),Cy(n,Hy,i,t)}}const Fy=ky("value-converter"),Dy=(t,e)=>by(xy(e),t),Hy=Object.freeze({name:Fy,keyFrom:t=>`${Fy}:${t}`,isType:t=>py(t)&&yy(Fy,t),define(t,e){const i=Vy.create(t,e);return wy(Fy,i,i.Type),wy(Fy,i,i),Sy(e,Fy),i.Type},getDefinition(t){const e=by(Fy,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,i){wy(xy(e),i,t)},getAnnotation:Dy});var zy;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(zy||(zy={}));class qy{constructor(){this.text=""}static unparse(t){const e=new qy;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,i=t.values;this.text+="{";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,i[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",fy(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:i}=t,n=i.length;this.text+="`",this.text+=e[0];for(let t=0;t<n;t++)i[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:i}=t,n=i.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<n;t++)i[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,i=e.length;t<i;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,i=e.length;t<i;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,i=t.values;this.text+="{";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,i[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:i}=t,n=i.length;this.text+="${",this.text+=e[0];for(let t=0;t<n;t++)i[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const i=t.list,n=i.length;let s,r;for(s=0;s<n;s++)switch(r=i[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,i=t.length;e<i;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class Wy{constructor(t){this.value=t}evaluate(t,e,i,n){return this.value}}class Ky{constructor(t,e,i){this.expression=t,this.name=e,this.args=i,this.behaviorKey=By.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,i,n){return this.expression.evaluate(t,e,i,n)}assign(t,e,i,n){return this.expression.assign(t,e,i,n)}bind(t,e,i){this.expression.hasBind&&this.expression.bind(t,e,i);const n=i.locator.get(this.behaviorKey);if(null==n)throw new Error(`AUR0101:${this.name}`);if(!(n instanceof Ly)){if(void 0!==i[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);i[this.behaviorKey]=n,n.bind.call(n,t,e,i,...this.args.map((n=>n.evaluate(t,e,i.locator,null))))}}unbind(t,e,i){const n=this.behaviorKey,s=i;void 0!==s[n]&&(py(s[n].unbind)&&s[n].unbind(t,e,i),s[n]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,i)}accept(t){return t.visitBindingBehavior(this)}toString(){return qy.unparse(this)}}class Zy{constructor(t,e,i){this.expression=t,this.name=e,this.args=i,this.converterKey=Hy.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,i,n){const s=i.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==n&&"handleChange"in n){const t=s.signals;if(null!=t){const e=i.get(Ty);for(let i=0,s=t.length;i<s;++i)e.addSignalListener(t[i],n)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,i,n),...this.args.map((s=>s.evaluate(t,e,i,n)))):this.expression.evaluate(t,e,i,n)}assign(t,e,i,n){const s=i.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(n=s.fromView(n,...this.args.map((n=>n.evaluate(t,e,i,null))))),this.expression.assign(t,e,i,n)}unbind(t,e,i){const n=i.locator.get(this.converterKey);if(void 0===n.signals)return;const s=i.locator.get(Ty);for(let t=0;t<n.signals.length;++t)s.removeSignalListener(n.signals[t],i)}accept(t){return t.visitValueConverter(this)}toString(){return qy.unparse(this)}}class _y{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.target.assign(t,e,i,this.value.evaluate(t,e,i,n))}assign(t,e,i,n){return this.value.assign(t,e,i,n),this.target.assign(t,e,i,n)}accept(t){return t.visitAssign(this)}toString(){return qy.unparse(this)}}class Qy{constructor(t,e,i){this.condition=t,this.yes=e,this.no=i}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.condition.evaluate(t,e,i,n)?this.yes.evaluate(t,e,i,n):this.no.evaluate(t,e,i,n)}assign(t,e,i,n){}accept(t){return t.visitConditional(this)}toString(){return qy.unparse(this)}}class Gy{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,i,n){}accept(t){return t.visitAccessThis(this)}toString(){return qy.unparse(this)}}Gy.$this=new Gy(0),Gy.$parent=new Gy(1);class Xy{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=Ay.get(e,this.name,this.ancestor,t);null!==n&&n.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,i,n){var s;if("$host"===this.name)throw new Error("AUR0106");const r=Ay.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(n,t),n):r[this.name]=n}accept(t){return t.visitAccessScope(this)}toString(){return qy.unparse(this)}}class Yy{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.object.evaluate(t,e,i,(32&t)>0?null:n);return 1&t?null==s?s:(null!==n&&n.observe(s,this.name),s[this.name]):(null!==n&&s instanceof Object&&n.observe(s,this.name),s?s[this.name]:"")}assign(t,e,i,n){const s=this.object.evaluate(t,e,i,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(n,t):s[this.name]=n:this.object.assign(t,e,i,{[this.name]:n}),n}accept(t){return t.visitAccessMember(this)}toString(){return qy.unparse(this)}}class Jy{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.object.evaluate(t,e,i,(32&t)>0?null:n);if(s instanceof Object){const r=this.key.evaluate(t,e,i,(32&t)>0?null:n);return null!==n&&n.observe(s,r),s[r]}}assign(t,e,i,n){return this.object.evaluate(t,e,i,null)[this.key.evaluate(t,e,i,null)]=n}accept(t){return t.visitAccessKeyed(this)}toString(){return qy.unparse(this)}}class tw{constructor(t,e,i=0){this.name=t,this.args=e,this.ancestor=i}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.args.map((s=>s.evaluate(t,e,i,n))),r=Ay.get(e,this.name,this.ancestor,t),o=bw(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,i,n){}accept(t){return t.visitCallScope(this)}toString(){return qy.unparse(this)}}class ew{constructor(t,e,i){this.object=t,this.name=e,this.args=i}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.object.evaluate(t,e,i,(32&t)>0?null:n),r=this.args.map((s=>s.evaluate(t,e,i,n))),o=bw(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,i,n){}accept(t){return t.visitCallMember(this)}toString(){return qy.unparse(this)}}class iw{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.func.evaluate(t,e,i,n);if(py(s))return s(...this.args.map((s=>s.evaluate(t,e,i,n))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,i,n){}accept(t){return t.visitCallFunction(this)}toString(){return qy.unparse(this)}}class nw{constructor(t,e,i){this.operation=t,this.left=e,this.right=i}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){switch(this.operation){case"&&":return this.left.evaluate(t,e,i,n)&&this.right.evaluate(t,e,i,n);case"||":return this.left.evaluate(t,e,i,n)||this.right.evaluate(t,e,i,n);case"==":return this.left.evaluate(t,e,i,n)==this.right.evaluate(t,e,i,n);case"===":return this.left.evaluate(t,e,i,n)===this.right.evaluate(t,e,i,n);case"!=":return this.left.evaluate(t,e,i,n)!=this.right.evaluate(t,e,i,n);case"!==":return this.left.evaluate(t,e,i,n)!==this.right.evaluate(t,e,i,n);case"instanceof":{const s=this.right.evaluate(t,e,i,n);return!!py(s)&&this.left.evaluate(t,e,i,n)instanceof s}case"in":{const s=this.right.evaluate(t,e,i,n);return s instanceof Object&&this.left.evaluate(t,e,i,n)in s}case"+":{const s=this.left.evaluate(t,e,i,n),r=this.right.evaluate(t,e,i,n);if((1&t)>0)return s+r;if(!s||!r){if(Sm(s)||Sm(r))return(s||0)+(r||0);if(Cm(s)||Cm(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,i,n)-this.right.evaluate(t,e,i,n);case"*":return this.left.evaluate(t,e,i,n)*this.right.evaluate(t,e,i,n);case"/":return this.left.evaluate(t,e,i,n)/this.right.evaluate(t,e,i,n);case"%":return this.left.evaluate(t,e,i,n)%this.right.evaluate(t,e,i,n);case"<":return this.left.evaluate(t,e,i,n)<this.right.evaluate(t,e,i,n);case">":return this.left.evaluate(t,e,i,n)>this.right.evaluate(t,e,i,n);case"<=":return this.left.evaluate(t,e,i,n)<=this.right.evaluate(t,e,i,n);case">=":return this.left.evaluate(t,e,i,n)>=this.right.evaluate(t,e,i,n);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,i,n){}accept(t){return t.visitBinary(this)}toString(){return qy.unparse(this)}}class sw{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){switch(this.operation){case"void":return void this.expression.evaluate(t,e,i,n);case"typeof":return typeof this.expression.evaluate(1|t,e,i,n);case"!":return!this.expression.evaluate(t,e,i,n);case"-":return-this.expression.evaluate(t,e,i,n);case"+":return+this.expression.evaluate(t,e,i,n);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,i,n){}accept(t){return t.visitUnary(this)}toString(){return qy.unparse(this)}}class rw{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.value}assign(t,e,i,n){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return qy.unparse(this)}}rw.$undefined=new rw(void 0),rw.$null=new rw(null),rw.$true=new rw(!0),rw.$false=new rw(!1),rw.$empty=new rw("");class ow{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.elements.map((s=>s.evaluate(t,e,i,n)))}assign(t,e,i,n){}accept(t){return t.visitArrayLiteral(this)}toString(){return qy.unparse(this)}}ow.$empty=new ow(jb);class aw{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,i,n);return s}assign(t,e,i,n){}accept(t){return t.visitObjectLiteral(this)}toString(){return qy.unparse(this)}}aw.$empty=new aw(jb,jb);class lw{constructor(t,e=jb){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,i,n)),s+=this.cooked[r+1];return s}assign(t,e,i,n){}accept(t){return t.visitTemplate(this)}toString(){return qy.unparse(this)}}lw.$empty=new lw([""]);class cw{constructor(t,e,i,n=jb){this.cooked=t,this.func=i,this.expressions=n,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){const s=this.expressions.map((s=>s.evaluate(t,e,i,n))),r=this.func.evaluate(t,e,i,n);if(!py(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,i,n){}accept(t){return t.visitTaggedTemplate(this)}toString(){return qy.unparse(this)}}class hw{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){}assign(t,e,i,n){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return qy.unparse(this)}}class uw{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){}assign(t,e,i,n){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return qy.unparse(this)}}class dw{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return qy.unparse(this)}}const pw=Object.prototype.toString;class fw{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){return this.iterable.evaluate(t,e,i,n)}assign(t,e,i,n){}count(t,e){switch(pw.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${pw.call(e)}`)}}iterate(t,e,i){switch(pw.call(e)){case"[object Array]":return yw(e,i);case"[object Map]":return function(t,e){const i=Array(t.size);let n=-1;for(const e of t.entries())i[++n]=e;yw(i,e)}(e,i);case"[object Set]":return function(t,e){const i=Array(t.size);let n=-1;for(const e of t.keys())i[++n]=e;yw(i,e)}(e,i);case"[object Number]":return function(t,e){const i=Array(t);for(let e=0;e<t;++e)i[e]=e;yw(i,e)}(e,i);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${pw.call(e)}`)}}bind(t,e,i){this.iterable.hasBind&&this.iterable.bind(t,e,i)}unbind(t,e,i){this.iterable.hasUnbind&&this.iterable.unbind(t,e,i)}accept(t){return t.visitForOfStatement(this)}toString(){return qy.unparse(this)}}class vw{constructor(t,e=jb){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,i,n)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,i,n)}${this.parts[1]}`}assign(t,e,i,n){}accept(t){return t.visitInterpolation(this)}toString(){return qy.unparse(this)}}class gw{constructor(t,e,i,n){this.$kind=t,this.list=e,this.source=i,this.initializer=n}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,n){}assign(t,e,i,n){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,i,n);break;case 90137:case 106521:{if("object"!=typeof n||null===n)throw new Error("AUR0112");let r=l.source.evaluate(t,$y.create(n),i,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,i,null)),l.assign(t,e,i,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return qy.unparse(this)}}class mw{constructor(t,e,i){this.target=t,this.source=e,this.initializer=i}get $kind(){return 139289}evaluate(t,e,i,n){}assign(t,e,i,n){var s;if(null==n)return;if("object"!=typeof n)throw new Error("AUR0112");let r=this.source.evaluate(t,$y.create(n),i,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,i,null)),this.target.assign(t,e,i,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return qy.unparse(this)}}function bw(t,e,i){const n=null==e?null:e[i];if(py(n))return n;if(!(8&t)&&null==n)return null;throw new Error(`AUR0111:${i}`)}function yw(t,e){for(let i=0,n=t.length;i<n;++i)e(t,i,t[i])}const ww=ib.createInterface("ICoercionConfiguration");var xw,kw,Sw,Cw,Aw,$w;function Ew(t=0){const e=Array(t);let i=0;for(;i<t;)e[i]=i++;return e.deletedItems=[],e.isIndexMap=!0,e}function Tw(t){return null==t?Rw:Rw(t)}function Rw(t){const e=t.prototype;dy(e,"subs",{get:Ow}),gy(e,"subscribe",Pw),gy(e,"unsubscribe",Lw)}!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(xw||(xw={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(kw||(kw={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(Sw||(Sw={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(Cw||(Cw={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(Aw||(Aw={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}($w||($w={}));class Iw{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,i=e.length;let n=0;for(;n<i;++n)if(e[n]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,i=e.length;let n=0;for(;n<i;++n)if(e[n]===t)return e.splice(n,1),1===i&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,i){const n=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==n&&n.handleChange(t,e,i),void 0!==s&&s.handleChange(t,e,i),void 0!==r&&r.handleChange(t,e,i),void 0!==o){const n=o.length;let s,r=0;for(;r<n;++r)s=o[r],void 0!==s&&s.handleChange(t,e,i)}}notifyCollection(t,e){const i=this.s0,n=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==i&&i.handleCollectionChange(t,e),void 0!==n&&n.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const i=r.length;let n,s=0;for(;s<i;++s)n=r[s],void 0!==n&&n.handleCollectionChange(t,e)}}}function Ow(){return vy(this,"subs",new Iw)}function Pw(t){return this.subs.add(t)}function Lw(t){return this.subs.remove(t)}function Mw(t){return null==t?jw:jw(t)}function jw(t){const e=t.prototype;dy(e,"queue",{get:Bw})}class Uw{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(Nw)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function Bw(){return Uw.instance}function Nw(t,e,i){i.delete(t),t.flush()}Uw.instance=new Uw;class Vw{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const i=this.v;t!==i&&km(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=i,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const i=this.v,n=this.o.length;(this.v=n)!==i&&(this.h=i,this.f=e,this.queue.add(this))}flush(){qw=this.h,this.h=this.v,this.subs.notify(this.v,qw,this.f)}}class Fw{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const i=this.v,n=this.o.size;(this.v=n)!==i&&(this.h=i,this.f=e,this.queue.add(this))}flush(){qw=this.h,this.h=this.v,this.subs.notify(this.v,qw,this.f)}}function Dw(t){const e=t.prototype;gy(e,"subscribe",Hw,!0),gy(e,"unsubscribe",zw,!0),Mw(t),Tw(t)}function Hw(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function zw(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let qw;Dw(Vw),Dw(Fw);const Ww=new WeakMap;function Kw(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Zw(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function _w(t,e,i,n,s){let r,o,a,l,c,h,u;for(h=i+1;h<n;h++){for(r=t[h],o=e[h],u=h-1;u>=i&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function Qw(t,e,i,n,s){let r,o,a,l,c,h,u,d,p,f,v,g,m,b,y,w,x,k,S,C=0,A=0;for(;;){if(n-i<=10)return void _w(t,e,i,n,s);C=i+(n-i>>1),r=t[i],l=e[i],o=t[n-1],c=e[n-1],a=t[C],h=e[C],u=s(r,o),u>0&&(f=r,v=l,r=o,l=c,o=f,c=v),d=s(r,a),d>=0?(f=r,v=l,r=a,l=h,a=o,h=c,o=f,c=v):(p=s(o,a),p>0&&(f=o,v=c,o=a,c=h,a=f,h=v)),t[i]=r,e[i]=l,t[n-1]=a,e[n-1]=h,g=o,m=c,b=i+1,y=n-1,t[C]=t[b],e[C]=e[b],t[b]=g,e[b]=m;t:for(A=b+1;A<y;A++)if(w=t[A],x=e[A],k=s(w,g),k<0)t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,b++;else if(k>0){do{if(y--,y==A)break t;S=t[y],k=s(S,g)}while(k>0);t[A]=t[y],e[A]=e[y],t[y]=w,e[y]=x,k<0&&(w=t[A],x=e[A],t[A]=t[b],e[A]=e[b],t[b]=w,e[b]=x,b++)}n-y<b-i?(Qw(t,e,y,n,s),n=b):(Qw(t,e,i,b,s),i=y)}}const Gw=Array.prototype,Xw=Gw.push,Yw=Gw.unshift,Jw=Gw.pop,tx=Gw.shift,ex=Gw.splice,ix=Gw.reverse,nx=Gw.sort,sx=["push","unshift","pop","shift","splice","reverse","sort"],rx={push:function(...t){const e=Ww.get(this);if(void 0===e)return Xw.apply(this,t);const i=this.length,n=t.length;if(0===n)return i;this.length=e.indexMap.length=i+n;let s=i;for(;s<this.length;)this[s]=t[s-i],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=Ww.get(this);if(void 0===e)return Yw.apply(this,t);const i=t.length,n=new Array(i);let s=0;for(;s<i;)n[s++]=-2;Yw.apply(e.indexMap,n);const r=Yw.apply(this,t);return e.notify(),r},pop:function(){const t=Ww.get(this);if(void 0===t)return Jw.call(this);const e=t.indexMap,i=Jw.call(this),n=e.length-1;return e[n]>-1&&e.deletedItems.push(e[n]),Jw.call(e),t.notify(),i},shift:function(){const t=Ww.get(this);if(void 0===t)return tx.call(this);const e=t.indexMap,i=tx.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),tx.call(e),t.notify(),i},splice:function(...t){const e=t[0],i=t[1],n=Ww.get(this);if(void 0===n)return ex.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=n.indexMap,l=t.length,c=0===l?0:1===l?s-o:i;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,n=new Array(t);let s=0;for(;s<t;)n[s++]=-2;ex.call(a,e,i,...n)}else ex.apply(a,t);const h=ex.apply(this,t);return n.notify(),h},reverse:function(){const t=Ww.get(this);if(void 0===t)return ix.call(this),this;const e=this.length,i=e/2|0;let n=0;for(;n!==i;){const i=e-n-1,s=this[n],r=t.indexMap[n],o=this[i],a=t.indexMap[i];this[n]=o,t.indexMap[n]=a,this[i]=s,t.indexMap[i]=r,n++}return t.notify(),this},sort:function(t){const e=Ww.get(this);if(void 0===e)return nx.call(this,t),this;const i=this.length;if(i<2)return this;Qw(this,e.indexMap,0,i,Zw);let n=0;for(;n<i&&void 0!==this[n];)n++;return void 0!==t&&py(t)||(t=Kw),Qw(this,e.indexMap,0,n,t),e.notify(),this}};for(const t of sx)dy(rx[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ox=!1;class ax{constructor(t){this.type=18,ox||(ox=!0,function(){for(const t of sx)!0!==Gw[t].observing&&vy(Gw,t,rx[t])}()),this.indexObservers={},this.collection=t,this.indexMap=Ew(t.length),this.lenObs=void 0,Ww.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=Ew(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Vw(this)}getIndexObserver(t){var e,i;return null!==(e=(i=this.indexObservers)[t])&&void 0!==e?e:i[t]=new lx(this,t)}}class lx{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const i=this.owner,n=this.index,s=i.indexMap;s[n]>-1&&s.deletedItems.push(s[n]),s[n]=-2,i.collection[n]=t,i.notify()}handleCollectionChange(t,e){const i=this.index;if(t[i]===i)return;const n=this.value,s=this.value=this.getValue();n!==s&&this.subs.notify(s,n,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function cx(t){let e=Ww.get(t);return void 0===e&&(e=new ax(t)),e}Tw(ax),Tw(lx);const hx=new WeakMap,ux=Set.prototype,dx=ux.add,px=ux.clear,fx=ux.delete,vx=["add","clear","delete"],gx={add:function(t){const e=hx.get(this);if(void 0===e)return dx.call(this,t),this;const i=this.size;return dx.call(this,t),this.size===i||(e.indexMap[i]=-2,e.notify()),this},clear:function(){const t=hx.get(this);if(void 0===t)return px.call(this);if(this.size>0){const e=t.indexMap;let i=0;for(const t of this.keys())e[i]>-1&&e.deletedItems.push(e[i]),i++;px.call(this),e.length=0,t.notify()}},delete:function(t){const e=hx.get(this);if(void 0===e)return fx.call(this,t);if(0===this.size)return!1;let i=0;const n=e.indexMap;for(const s of this.keys()){if(s===t){n[i]>-1&&n.deletedItems.push(n[i]),n.splice(i,1);const s=fx.call(this,t);return!0===s&&e.notify(),s}i++}return!1}},mx={writable:!0,enumerable:!1,configurable:!0};for(const t of vx)dy(gx[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let bx=!1;class yx{constructor(t){this.type=34,bx||(bx=!0,function(){for(const t of vx)!0!==ux[t].observing&&dy(ux,t,{...mx,value:gx[t]})}()),this.collection=t,this.indexMap=Ew(t.size),this.lenObs=void 0,hx.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Ew(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Fw(this)}}function wx(t){let e=hx.get(t);return void 0===e&&(e=new yx(t)),e}Tw(yx);const xx=new WeakMap,kx=Map.prototype,Sx=kx.set,Cx=kx.clear,Ax=kx.delete,$x=["set","clear","delete"],Ex={set:function(t,e){const i=xx.get(this);if(void 0===i)return Sx.call(this,t,e),this;const n=this.get(t),s=this.size;if(Sx.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==n&&(i.indexMap.deletedItems.push(i.indexMap[e]),i.indexMap[e]=-2,i.notify()),this;e++}return this}return i.indexMap[s]=-2,i.notify(),this},clear:function(){const t=xx.get(this);if(void 0===t)return Cx.call(this);if(this.size>0){const e=t.indexMap;let i=0;for(const t of this.keys())e[i]>-1&&e.deletedItems.push(e[i]),i++;Cx.call(this),e.length=0,t.notify()}},delete:function(t){const e=xx.get(this);if(void 0===e)return Ax.call(this,t);if(0===this.size)return!1;let i=0;const n=e.indexMap;for(const s of this.keys()){if(s===t){n[i]>-1&&n.deletedItems.push(n[i]),n.splice(i,1);const s=Ax.call(this,t);return!0===s&&e.notify(),s}++i}return!1}},Tx={writable:!0,enumerable:!1,configurable:!0};for(const t of $x)dy(Ex[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Rx=!1;class Ix{constructor(t){this.type=66,Rx||(Rx=!0,function(){for(const t of $x)!0!==kx[t].observing&&dy(kx,t,{...Tx,value:Ex[t]})}()),this.collection=t,this.indexMap=Ew(t.size),this.lenObs=void 0,xx.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Ew(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Fw(this)}}function Ox(t){let e=xx.get(t);return void 0===e&&(e=new Ix(t)),e}function Px(t,e){const i=this.oL.getObserver(t,e);this.obs.add(i)}function Lx(){return vy(this,"obs",new Nx(this))}function Mx(t){let e;if(t instanceof Array)e=cx(t);else if(t instanceof Set)e=wx(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=Ox(t)}this.obs.add(e)}function jx(t){this.obs.add(t)}function Ux(){throw new Error("AUR2011:handleChange")}function Bx(){throw new Error("AUR2012:handleCollectionChange")}Tw(Ix);class Nx{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,i){return this.b.interceptor.handleChange(t,e,i)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(Fx,this),this.count=this.o.size}clearAll(){this.o.forEach(Vx,this),this.o.clear(),this.count=0}}function Vx(t,e){e.unsubscribe(this)}function Fx(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function Dx(t){const e=t.prototype;return gy(e,"observe",Px,!0),gy(e,"observeCollection",Mx,!0),gy(e,"subscribeTo",jx,!0),dy(e,"obs",{get:Lx}),gy(e,"handleChange",Ux),gy(e,"handleCollectionChange",Bx),t}function Hx(t){return null==t?Dx:Dx(t)}Dx(class{constructor(t,e,i,n){this.key=t,this.binding=e,this.oL=i,this.locator=n,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,i){this.binding[this.key](t,e,i)}});const zx=ib.createInterface("IExpressionParser",(t=>t.singleton(qx)));class qx{constructor(){this.u=my(),this.A=my(),this.U=my()}parse(t,e){let i;switch(e){case 16:return new Wy(t);case 1:return i=this.U[t],void 0===i&&(i=this.U[t]=this.$parse(t,e)),i;case 2:return i=this.A[t],void 0===i&&(i=this.A[t]=this.$parse(t,e)),i;default:if(0===t.length){if((12&e)>0)return rw.$empty;throw new Error("AUR0169")}return i=this.u[t],void 0===i&&(i=this.u[t]=this.$parse(t,e)),i}}$parse(t,e){return nk.ip=t,nk.length=t.length,nk.index=0,nk.O=t.charCodeAt(0),sk(nk,0,61,void 0===e?8:e)}}var Wx,Kx,Zx,_x;function Qx(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(Wx||(Wx={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(Kx||(Kx={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(Zx||(Zx={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(_x||(_x={}));const Gx=rw.$false,Xx=rw.$true,Yx=rw.$null,Jx=rw.$undefined,tk=Gy.$this,ek=Gy.$parent;var ik;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(ik||(ik={}));const nk=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function sk(t,e,i,n){if(16===n)return new Wy(t.ip);if(0===t.index){if(1&n)return function(t){const e=[],i=[],n=t.length;let s="";for(;t.index<n;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),ok(t);const n=sk(t,0,61,1);i.push(n);continue}s+="$";break;case 92:s+=String.fromCharCode(Qx(ak(t)));break;default:s+=String.fromCharCode(t.O)}ak(t)}return i.length?(e.push(s),new vw(e,i)):null}(t);if(ok(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>i,32768&t.$){const i=pk[63&t.$];ok(t),s=new sw(i,sk(t,e,449,n)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(ok(t),e++,!uk(t,16393)){if(524288&t.$){const t=511&e;s=0===t?tk:1===t?ek:new Gy(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&n?s=new dw(t.L):(s=new Xy(t.L,511&e),e=1024),t.R=!0,ok(t);break;case 3076:t.R=!1,ok(t),s=tk,e=512;break;case 671751:ok(t),s=sk(t,0,62,n),dk(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],i=new gw(90137,e,void 0,void 0);let n="",s=!0,r=0;for(;s;)switch(ok(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:n=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return dk(t,1835022),i;function o(){""!==n?(e.push(new mw(new Yy(tk,n),new Jy(tk,new rw(r++)),void 0)),n=""):r++}}(t):function(t,e,i){ok(t);const n=new Array;for(;1835022!==t.$;)if(uk(t,1572876)){if(n.push(Jx),1835022===t.$)break}else{if(n.push(sk(t,e,62,-3&i)),!uk(t,1572876))break;if(1835022===t.$)break}return dk(t,1835022),2&i?new hw(n):(t.R=!1,new ow(n))}(t,e,n),e=0;break;case 131080:s=function(t,e){const i=new Array,n=new Array;for(ok(t);1835018!==t.$;){if(i.push(t.L),12288&t.$)ok(t),dk(t,1572879),n.push(sk(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:i,$:s,index:r}=t;ok(t),uk(t,1572879)?n.push(sk(t,0,62,-3&e)):(t.O=i,t.$=s,t.index=r,n.push(sk(t,0,450,-3&e)))}}1835018!==t.$&&dk(t,1572876)}return dk(t,1835018),2&e?new uw(i,n):(t.R=!1,new aw(i,n))}(t,n),e=0;break;case 540714:s=new lw([t.L]),t.R=!1,ok(t),e=0;break;case 540715:s=rk(t,e,n,s,!1),e=0;break;case 4096:case 8192:s=new rw(t.L),t.R=!1,ok(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=pk[63&t.$],t.R=!1,ok(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&n)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);ok(t);const i=e,n=sk(t,0,61,0);return new fw(i,n)}(t,s);if(449<i)return s;let r=t.L;for(;(16384&t.$)>0;){const i=[];let o;switch(t.$){case 16393:if(t.R=!0,ok(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,ok(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new Xy(r,s.ancestor):new Yy(s,r);continue;case 671757:t.R=!0,ok(t),e=4096,s=new Jy(s,sk(t,0,62,n)),dk(t,1835022);break;case 671751:for(t.R=!1,ok(t);1835019!==t.$&&(i.push(sk(t,0,62,n)),uk(t,1572876)););dk(t,1835019),s=1024&e?new tw(r,i,s.ancestor):2048&e?new ew(s,r,i):new iw(s,i),e=0;break;case 540714:t.R=!1,o=[t.L],s=new cw(o,o,s),ok(t);break;case 540715:s=rk(t,e,n,s,!0)}}}if(448<i)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=i)break;ok(t),s=new nw(pk[63&r],s,sk(t,e,448&r,n)),t.R=!1}if(63<i)return s;if(uk(t,1572880)){const i=sk(t,e,62,n);dk(t,1572879),s=new Qy(s,i,sk(t,e,62,n)),t.R=!1}if(62<i)return s;if(uk(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new _y(s,sk(t,e,62,n))}if(61<i)return s;for(;uk(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const i=t.L;ok(t);const r=new Array;for(;uk(t,1572879);)r.push(sk(t,e,62,n));s=new Zy(s,i,r)}for(;uk(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const i=t.L;ok(t);const r=new Array;for(;uk(t,1572879);)r.push(sk(t,e,62,n));s=new Ky(s,i,r)}if(1572864!==t.$){if(1&n)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function rk(t,e,i,n,s){const r=[t.L];dk(t,540715);const o=[sk(t,e,62,i)];for(;540714!==(t.$=hk(t));)r.push(t.L),dk(t,540715),o.push(sk(t,e,62,i));return r.push(t.L),t.R=!1,s?(ok(t),new cw(r,r,n,o)):(ok(t),new lw(r,o))}function ok(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=xk[t.O](t)))return;t.$=1572864}function ak(t){return t.O=t.ip.charCodeAt(++t.index)}function lk(t,e){let i=t.O;if(!1===e){do{i=ak(t)}while(i<=57&&i>=48);if(46!==i)return t.L=parseInt(t.P,10),8192;if(i=ak(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(i<=57&&i>=48)do{i=ak(t)}while(i<=57&&i>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function ck(t){let e=!0,i="";for(;96!==ak(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}i+="$"}else if(92===t.O)i+=String.fromCharCode(Qx(ak(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);i+=String.fromCharCode(t.O)}return ak(t),t.L=i,e?540714:540715}function hk(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,ck(t)}function uk(t,e){return t.$===e&&(ok(t),!0)}function dk(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);ok(t)}const pk=[Gx,Xx,Yx,Jx,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],fk=my();fk.true=2049,fk.null=2050,fk.false=2048,fk.undefined=2051,fk.$this=3076,fk.$parent=3078,fk.in=1640799,fk.instanceof=1640800,fk.typeof=34851,fk.void=34852,fk.of=1051180;const vk=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],gk=[48,58];function mk(t,e,i,n){const s=i.length;for(let r=0;r<s;r+=2){const s=i[r];let o=i[r+1];if(o=o>0?o:s+1,t&&t.fill(n,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function bk(t){return e=>(ak(e),t)}const yk=t=>{throw new Error(`AUR0168:${t.ip}`)};yk.notMapped=!0,mk(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const wk=new Uint8Array(65535);mk(wk,null,vk,1),mk(wk,null,gk,1);const xk=new Array(65535);xk.fill(yk,0,65535),mk(xk,null,[0,33,127,161],(t=>(ak(t),null))),mk(xk,null,vk,(function(t){for(;wk[ak(t)];);const e=fk[t.L=t.P];return void 0===e?1024:e})),mk(xk,null,gk,(t=>lk(t,!1))),xk[34]=xk[39]=t=>function(t){const e=t.O;ak(t);let i=0;const n=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)n.push(t.ip.slice(s,t.index)),ak(t),i=Qx(t.O),ak(t),n.push(String.fromCharCode(i)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);ak(t)}const r=t.ip.slice(s,t.index);ak(t),n.push(r);const o=n.join("");return t.L=o,4096}(t),xk[96]=t=>ck(t),xk[33]=t=>61!==ak(t)?32809:61!==ak(t)?1638680:(ak(t),1638682),xk[61]=t=>61!==ak(t)?1048616:61!==ak(t)?1638679:(ak(t),1638681),xk[38]=t=>38!==ak(t)?1572883:(ak(t),1638614),xk[124]=t=>124!==ak(t)?1572884:(ak(t),1638549),xk[46]=t=>ak(t)<=57&&t.O>=48?lk(t,!0):16393,xk[60]=t=>61!==ak(t)?1638747:(ak(t),1638749),xk[62]=t=>61!==ak(t)?1638748:(ak(t),1638750),xk[37]=bk(1638886),xk[40]=bk(671751),xk[41]=bk(1835019),xk[42]=bk(1638885),xk[43]=bk(623009),xk[44]=bk(1572876),xk[45]=bk(623010),xk[47]=bk(1638887),xk[58]=bk(1572879),xk[63]=bk(1572880),xk[91]=bk(671757),xk[93]=bk(1835022),xk[123]=bk(131080),xk[125]=bk(1835018);let kk=null;const Sk=[];let Ck=!1;function Ak(){return kk}function $k(t){if(null==t)throw new Error("AUR0206");if(null==kk)return kk=t,Sk[0]=kk,void(Ck=!0);if(kk===t)throw new Error("AUR0207");Sk.push(t),kk=t,Ck=!0}function Ek(t){if(null==t)throw new Error("AUR0208");if(kk!==t)throw new Error("AUR0209");Sk.pop(),kk=Sk.length>0?Sk[Sk.length-1]:null,Ck=null!=kk}const Tk=Object.freeze({get current(){return kk},get connecting(){return Ck},enter:$k,exit:Ek,pause:function(){Ck=!1},resume:function(){Ck=!0}}),Rk=Reflect.get,Ik=Object.prototype.toString,Ok=new WeakMap;function Pk(t){switch(Ik.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Lk="__raw__";function Mk(t){return Pk(t)?jk(t):t}function jk(t){var e;return null!==(e=Ok.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?Fk:t instanceof Map||t instanceof Set?cS:Vk,i=new Proxy(t,e);return Ok.set(t,i),i}(t)}function Uk(t){var e;return null!==(e=t.__raw__)&&void 0!==e?e:t}function Bk(t){return Pk(t)&&t.__raw__||t}function Nk(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const Vk={get(t,e,i){if(e===Lk)return t;const n=Ak();return!Ck||Nk(e)||null==n?Rk(t,e,i):(n.observe(t,e),Mk(Rk(t,e,i)))}},Fk={get(t,e,i){if(e===Lk)return t;const n=Ak();if(!Ck||Nk(e)||null==n)return Rk(t,e,i);switch(e){case"length":return n.observe(t,"length"),t.length;case"map":return Dk;case"includes":return qk;case"indexOf":return Wk;case"lastIndexOf":return Kk;case"every":return Hk;case"filter":return zk;case"find":return _k;case"findIndex":return Zk;case"flat":return Qk;case"flatMap":return Gk;case"join":return Xk;case"push":return Jk;case"pop":return Yk;case"reduce":return aS;case"reduceRight":return lS;case"reverse":return nS;case"shift":return tS;case"unshift":return eS;case"slice":return oS;case"splice":return iS;case"some":return sS;case"sort":return rS;case"keys":return mS;case"values":case Symbol.iterator:return bS;case"entries":return yS}return n.observe(t,e),Mk(Rk(t,e,i))},ownKeys(t){var e;return null===(e=Ak())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function Dk(t,e){var i;const n=Uk(this),s=n.map(((i,n)=>Bk(t.call(e,Mk(i),n,this))));return null===(i=Ak())||void 0===i||i.observeCollection(n),Mk(s)}function Hk(t,e){var i;const n=Uk(this),s=n.every(((i,n)=>t.call(e,Mk(i),n,this)));return null===(i=Ak())||void 0===i||i.observeCollection(n),s}function zk(t,e){var i;const n=Uk(this),s=n.filter(((i,n)=>Bk(t.call(e,Mk(i),n,this))));return null===(i=Ak())||void 0===i||i.observeCollection(n),Mk(s)}function qk(t){var e;const i=Uk(this),n=i.includes(Bk(t));return null===(e=Ak())||void 0===e||e.observeCollection(i),n}function Wk(t){var e;const i=Uk(this),n=i.indexOf(Bk(t));return null===(e=Ak())||void 0===e||e.observeCollection(i),n}function Kk(t){var e;const i=Uk(this),n=i.lastIndexOf(Bk(t));return null===(e=Ak())||void 0===e||e.observeCollection(i),n}function Zk(t,e){var i;const n=Uk(this),s=n.findIndex(((i,n)=>Bk(t.call(e,Mk(i),n,this))));return null===(i=Ak())||void 0===i||i.observeCollection(n),s}function _k(t,e){var i;const n=Uk(this),s=n.find(((e,i)=>t(Mk(e),i,this)),e);return null===(i=Ak())||void 0===i||i.observeCollection(n),Mk(s)}function Qk(){var t;const e=Uk(this);return null===(t=Ak())||void 0===t||t.observeCollection(e),Mk(e.flat())}function Gk(t,e){var i;const n=Uk(this);return null===(i=Ak())||void 0===i||i.observeCollection(n),jk(n.flatMap(((i,n)=>Mk(t.call(e,Mk(i),n,this)))))}function Xk(t){var e;const i=Uk(this);return null===(e=Ak())||void 0===e||e.observeCollection(i),i.join(t)}function Yk(){return Mk(Uk(this).pop())}function Jk(...t){return Uk(this).push(...t)}function tS(){return Mk(Uk(this).shift())}function eS(...t){return Uk(this).unshift(...t)}function iS(...t){return Mk(Uk(this).splice(...t))}function nS(...t){var e;const i=Uk(this),n=i.reverse();return null===(e=Ak())||void 0===e||e.observeCollection(i),Mk(n)}function sS(t,e){var i;const n=Uk(this),s=n.some(((i,n)=>Bk(t.call(e,Mk(i),n,this))));return null===(i=Ak())||void 0===i||i.observeCollection(n),s}function rS(t){var e;const i=Uk(this),n=i.sort(t);return null===(e=Ak())||void 0===e||e.observeCollection(i),Mk(n)}function oS(t,e){var i;const n=Uk(this);return null===(i=Ak())||void 0===i||i.observeCollection(n),jk(n.slice(t,e))}function aS(t,e){var i;const n=Uk(this),s=n.reduce(((e,i,n)=>t(e,Mk(i),n,this)),e);return null===(i=Ak())||void 0===i||i.observeCollection(n),Mk(s)}function lS(t,e){var i;const n=Uk(this),s=n.reduceRight(((e,i,n)=>t(e,Mk(i),n,this)),e);return null===(i=Ak())||void 0===i||i.observeCollection(n),Mk(s)}const cS={get(t,e,i){if(e===Lk)return t;const n=Ak();if(!Ck||Nk(e)||null==n)return Rk(t,e,i);switch(e){case"size":return n.observe(t,"size"),t.size;case"clear":return vS;case"delete":return gS;case"forEach":return hS;case"add":if(t instanceof Set)return fS;break;case"get":if(t instanceof Map)return dS;break;case"set":if(t instanceof Map)return pS;break;case"has":return uS;case"keys":return mS;case"values":return bS;case"entries":return yS;case Symbol.iterator:return t instanceof Map?yS:bS}return Mk(Rk(t,e,i))}};function hS(t,e){var i;const n=Uk(this);return null===(i=Ak())||void 0===i||i.observeCollection(n),n.forEach(((i,n)=>{t.call(e,Mk(i),Mk(n),this)}))}function uS(t){var e;const i=Uk(this);return null===(e=Ak())||void 0===e||e.observeCollection(i),i.has(Bk(t))}function dS(t){var e;const i=Uk(this);return null===(e=Ak())||void 0===e||e.observeCollection(i),Mk(i.get(Bk(t)))}function pS(t,e){return Mk(Uk(this).set(Bk(t),Bk(e)))}function fS(t){return Mk(Uk(this).add(Bk(t)))}function vS(){return Mk(Uk(this).clear())}function gS(t){return Mk(Uk(this).delete(Bk(t)))}function mS(){var t;const e=Uk(this);null===(t=Ak())||void 0===t||t.observeCollection(e);const i=e.keys();return{next(){const t=i.next(),e=t.value,n=t.done;return n?{value:void 0,done:n}:{value:Mk(e),done:n}},[Symbol.iterator](){return this}}}function bS(){var t;const e=Uk(this);null===(t=Ak())||void 0===t||t.observeCollection(e);const i=e.values();return{next(){const t=i.next(),e=t.value,n=t.done;return n?{value:void 0,done:n}:{value:Mk(e),done:n}},[Symbol.iterator](){return this}}}function yS(){var t;const e=Uk(this);null===(t=Ak())||void 0===t||t.observeCollection(e);const i=e.entries();return{next(){const t=i.next(),e=t.value,n=t.done;return n?{value:void 0,done:n}:{value:[Mk(e[0]),Mk(e[1])],done:n}},[Symbol.iterator](){return this}}}const wS=Object.freeze({getProxy:jk,getRaw:Uk,wrap:Mk,unwrap:Bk,rawKey:Lk});class xS{constructor(t,e,i,n,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=i,this.up=n,this.oL=s}static create(t,e,i,n,s){const r=i.get,o=i.set,a=new xS(t,r,o,s,n),l=()=>a.getValue();return l.getObserver=()=>a,dy(t,e,{enumerable:i.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!py(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){kS=this.ov,this.ov=this.v,this.subs.notify(this.v,kS,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return $k(this),this.v=Bk(this.get.call(this.up?Mk(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,Ek(this)}}}let kS;Hx(xS),Tw(xS),Mw(xS);const SS=ib.createInterface("IDirtyChecker",(t=>t.singleton($S))),CS={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},AS={persistent:!0};class $S{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(CS.disabled)return;if(++this.j<CS.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let i,n=0;for(;n<e;++n)i=t[n],i.isDirty()&&this.queue.add(i)}}createProperty(t,e){if(CS.throw)throw new Error(`AUR0222:${e}`);return new ES(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,AS))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}$S.inject=[Nb],Mw($S);class ES{constructor(t,e,i){this.obj=e,this.key=i,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}Tw(ES);class TS{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class RS{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,i,n){i[n]=t}}let IS;class OS{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){IS=this.ov,this.ov=this.v,this.subs.notify(this.v,IS,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],dy(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(dy(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class PS{constructor(t,e,i,n){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=i,this.hs=py(i);const s=t[e];this.cb=py(s)?s:void 0,this.v=n}getValue(){return this.v}setValue(t,e){var i;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(i=this.cb)||void 0===i||i.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){IS=this.ov,this.ov=this.v,this.subs.notify(this.v,IS,this.f)}}Tw(OS),Tw(PS),Mw(OS),Mw(PS);const LS=new RS,MS=ib.createInterface("IObserverLocator",(t=>t.singleton(BS))),jS=ib.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(Kb).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new US)))));class US{handles(){return!1}getObserver(){return LS}getAccessor(){return LS}}class BS{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var i,n;return null!==(n=null===(i=t.$observers)||void 0===i?void 0:i[e])&&void 0!==n?n:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var i;const n=null===(i=t.$observers)||void 0===i?void 0:i[e];return void 0!==n?n:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):LS}getArrayObserver(t){return cx(t)}getMapObserver(t){return Ox(t)}getSetObserver(t){return wx(t)}createObserver(t,e){var i,n,s,r;if(!(t instanceof Object))return new TS(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return cx(t).getLengthObserver();break;case"size":if(t instanceof Map)return Ox(t).getLengthObserver();if(t instanceof Set)return wx(t).getLengthObserver();break;default:if(t instanceof Array&&km(e))return cx(t).getIndexObserver(Number(e))}let o=VS(t,e);if(void 0===o){let i=NS(t);for(;null!==i&&(o=VS(i,e),void 0===o);)i=NS(i)}if(void 0!==o&&!uy.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(n=null===(i=o.get)||void 0===i?void 0:i.getObserver)&&void 0!==n?n:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?xS.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new OS(t,e)}N(t,e,i){if(this.F.length>0)for(const n of this.F){const s=n.getObserver(t,e,i,this);if(null!=s)return s}return null}V(t,e,i){return!0===i.doNotCache?i:void 0===t.$observers?(dy(t,"$observers",{value:{[e]:i}}),i):t.$observers[e]=i}}BS.inject=[SS,jS];const NS=Object.getPrototypeOf,VS=Object.getOwnPropertyDescriptor;ib.createInterface("IObservation",(t=>t.singleton(FS)));class FS{constructor(t){this.oL=t}static get inject(){return[MS]}run(t){const e=new DS(this.oL,t);return e.run(),e}}class DS{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{$k(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,Ek(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}Hx(DS),new Map;class HS extends Error{constructor(t){super("Task was canceled."),this.task=t}}var zS,qS;function WS(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function KS(t,e){return function(i,n){e(i,n,t)}}!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(zS||(zS={})),function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(qS||(qS={})),new Map;const ZS=um.getOwn,_S=um.hasOwn,QS=um.define,{annotation:GS,resource:XS}=Zm,YS=GS.keyFor,JS=XS.keyFor,tC=XS.appendTo,eC=GS.appendTo,iC=GS.getKeys,nC=()=>Object.create(null),sC=Object.prototype.hasOwnProperty,rC=nC(),oC=(t,e,i)=>{if(!0===rC[e])return!0;if(!cC(e))return!1;const n=e.slice(0,5);return rC[e]="aria-"===n||"data-"===n||i.isStandardSvgAttribute(t,e)},aC=t=>t instanceof Promise,lC=t=>"function"==typeof t,cC=t=>"string"==typeof t,hC=Object.defineProperty,uC=t=>{throw t};function dC(t,e){let i;function n(t,e){arguments.length>1&&(i.property=e),QS(fC,gC.create(e,t,i),t.constructor,e),eC(t.constructor,vC.keyFrom(e))}return arguments.length>1?(i={},void n(t,e)):cC(t)?(i={},n):(i=void 0===t?{}:t,n)}function pC(t){return t.startsWith(fC)}const fC=YS("bindable"),vC=Object.freeze({name:fC,keyFrom:t=>`${fC}:${t}`,from(t,...e){const i={},n=Array.isArray;function s(e){i[e]=gC.create(e,t)}function r(e,n){i[e]=n instanceof gC?n:gC.create(e,t,n)}return e.forEach((function(t){n(t)?t.forEach(s):t instanceof gC?i[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>r(e,t[e])))})),i},for(t){let e;const i={add(n){let s,r;return cC(n)?(s=n,r={property:s}):(s=n.property,r=n),e=gC.create(s,t,r),_S(fC,t,s)||eC(t,vC.keyFrom(s)),QS(fC,e,t,s),i},mode:t=>(e.mode=t,i),callback:t=>(e.callback=t,i),attribute:t=>(e.attribute=t,i),primary:()=>(e.primary=!0,i),set:t=>(e.set=t,i)};return i},getAll(t){const e=fC.length+1,i=[],n=Um(t);let s,r,o,a,l=n.length,c=0;for(;--l>=0;)for(o=n[l],s=iC(o).filter(pC),r=s.length,a=0;a<r;++a)i[c++]=ZS(fC,o,s[a].slice(e));return i}});class gC{constructor(t,e,i,n,s,r){this.attribute=t,this.callback=e,this.mode=i,this.primary=n,this.property=s,this.set=r}static create(t,e,i={}){return new gC(jm(i.attribute,Tm(t)),jm(i.callback,`${t}Changed`),jm(i.mode,xw.toView),jm(i.primary,!1),jm(i.property,t),jm(i.set,function(t,e,i={}){var n,s,r;const o=null!==(s=null!==(n=i.type)&&void 0!==n?n:Reflect.getMetadata("design:type",e,t))&&void 0!==s?s:null;if(null==o)return Bb;let a;switch(o){case Number:case Boolean:case String:case BigInt:a=o;break;default:{const t=o.coerce;a="function"==typeof t?t.bind(o):null!==(r=mC.for(o))&&void 0!==r?r:Bb;break}}return a===Bb?a:function(t,e){return function(i,n){var s;return(null==n?void 0:n.enableCoercion)?(null!=e?e:null===(s=null==n?void 0:n.coerceNullish)||void 0===s||!s)&&null==i?i:t(i,n):i}}(a,i.nullable)}(t,e,i)))}}const mC={key:YS("coercer"),define(t,e){QS(mC.key,t[e].bind(t),t)},for:t=>ZS(mC.key,t)};class bC{constructor(t,e,i,n,s,r){this.set=n,this.$controller=s,this.t=r,this.v=void 0,this.ov=void 0,this.f=0;const o=t[i],a=t.propertyChanged,l=this.i=lC(o),c=this.u=lC(a),h=this.hs=n!==Bb;let u;this.o=t,this.k=e,this.cb=l?o:Bb,this.C=c?a:Bb,void 0!==this.cb||c||h?(this.iO=!0,u=t[e],this.v=h&&void 0!==u?n(u,this.t):u,this.A()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t,e){this.hs&&(t=this.set(t,this.t));const i=this.v;if(this.iO){if(Object.is(t,i))return;this.v=t,this.ov=i,this.f=e,(null==this.$controller||this.$controller.isBound)&&(this.i&&this.cb.call(this.o,t,i,e),this.u&&this.C.call(this.o,this.k,t,i,e)),this.queue.add(this)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.t):this.o[this.k],this.A()),this.subs.add(t)}flush(){yC=this.ov,this.ov=this.v,this.subs.notify(this.v,yC,this.f)}A(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t,0)}})}}let yC;Tw(bC),Mw(bC);class wC{constructor(t,e,i,n){if(this.chars=t,this.repeat=e,this.isSymbol=i,this.isInverted=n,n)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.B;break;default:this.has=this.I}else switch(t.length){case 0:this.has=this.T;break;case 1:this.has=this.P;break;default:this.has=this.$}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}$(t){return this.chars.includes(t)}P(t){return this.chars===t}T(t){return!1}I(t){return!this.chars.includes(t)}B(t){return this.chars!==t}R(t){return!0}}class xC{constructor(){this.parts=jb,this.O="",this.L={},this.q={}}get pattern(){const t=this.O;return""===t?null:t}set pattern(t){null==t?(this.O="",this.parts=jb):(this.O=t,this.parts=this.q[t])}append(t,e){const i=this.L;void 0===i[t]?i[t]=e:i[t]+=e}next(t){const e=this.L;let i;void 0!==e[t]&&(i=this.q,void 0===i[t]?i[t]=[e[t]]:i[t].push(e[t]),e[t]=void 0)}}class kC{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,i=e.length;let n=null,s=0;for(;s<i;++s)if(n=e[s],t.equals(n.charSpec))return n;return null}append(t,e){const i=this.patterns;i.includes(e)||i.push(e);let n=this.findChild(t);return null==n&&(n=new kC(t,e),this.nextStates.push(n),t.repeat&&n.nextStates.push(n)),n}findMatches(t,e){const i=[],n=this.nextStates,s=n.length;let r=0,o=null,a=0,l=0;for(;a<s;++a)if(o=n[a],o.charSpec.has(t))if(i.push(o),r=o.patterns.length,l=0,o.charSpec.isSymbol)for(;l<r;++l)e.next(o.patterns[l]);else for(;l<r;++l)e.append(o.patterns[l],t);return i}}class SC{constructor(t){this.text=t;const e=this.len=t.length,i=this.specs=[];let n=0;for(;e>n;++n)i.push(new wC(t[n],!1,!1,!1))}eachChar(t){const e=this.len,i=this.specs;let n=0;for(;e>n;++n)t(i[n])}}class CC{constructor(t){this.text="PART",this.spec=new wC(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class AC{constructor(t){this.text=t,this.spec=new wC(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class $C{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const EC=ib.createInterface("ISyntaxInterpreter",(t=>t.singleton(TC)));class TC{constructor(){this.rootState=new kC(null),this.initialStates=[this.rootState]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let i,n,s,r,o,a,l,c,h=0;for(;e>h;){for(i=this.rootState,n=t[h],s=n.pattern,r=new $C,o=this.parse(n,r),a=o.length,l=t=>{i=i.append(t,s)},c=0;a>c;++c)o[c].eachChar(l);i.types=r,i.isEndpoint=!0,++h}}interpret(t){const e=new xC,i=t.length;let n,s=this.initialStates,r=0;for(;r<i&&(s=this.getNextStates(s,t.charAt(r),e),0!==s.length);++r);return s=s.filter(RC),s.length>0&&(s.sort(IC),n=s[0],n.charSpec.isSymbol||e.next(n.pattern),e.pattern=n.pattern),e}getNextStates(t,e,i){const n=[];let s=null;const r=t.length;let o=0;for(;o<r;++o)s=t[o],n.push(...s.findMatches(e,i));return n}parse(t,e){const i=[],n=t.pattern,s=n.length,r=t.symbols;let o=0,a=0,l="";for(;o<s;)l=n.charAt(o),0!==r.length&&r.includes(l)?o!==a?(i.push(new SC(n.slice(a,o))),++e.statics,a=o):(i.push(new AC(n.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===l&&"PART"===n.slice(o,o+4)?(a=o+=4,i.push(new CC(r)),++e.dynamics):++o;return a!==o&&(i.push(new SC(n.slice(a,o))),++e.statics),i}}function RC(t){return t.isEndpoint}function IC(t,e){const i=t.types,n=e.types;return i.statics!==n.statics?n.statics-i.statics:i.dynamics!==n.dynamics?n.dynamics-i.dynamics:i.symbols!==n.symbols?n.symbols-i.symbols:0}class OC{constructor(t,e,i,n){this.rawName=t,this.rawValue=e,this.target=i,this.command=n}}const PC=ib.createInterface("IAttributePattern"),LC=ib.createInterface("IAttributeParser",(t=>t.singleton(MC)));class MC{constructor(t,e){this.U={},this._=t;const i=this.F={},n=e.reduce(((t,e)=>{const n=VC(e.constructor);return n.forEach((t=>i[t.pattern]=e)),t.concat(n)}),jb);t.add(n)}parse(t,e){let i=this.U[t];null==i&&(i=this.U[t]=this._.interpret(t));const n=i.pattern;return null==n?new OC(t,e,t,null):this.F[n][n](t,e,i.parts)}}function jC(...t){return function(e){return FC.define(t,e)}}MC.inject=[EC,ub(PC)];class UC{constructor(t){this.Type=t,this.name=void 0}register(t){Ib.singleton(PC,this.Type).register(t)}}const BC=JS("attribute-pattern"),NC="attribute-pattern-definitions",VC=t=>Zm.annotation.get(t,NC),FC=Object.freeze({name:BC,definitionAnnotationKey:NC,define(t,e){const i=new UC(e);return QS(BC,i,e),tC(e,BC),Zm.annotation.set(e,NC,t),eC(e,NC),e},getPatternDefinitions:VC});let DC=class{"PART.PART"(t,e,i){return new OC(t,e,i[0],i[1])}"PART.PART.PART"(t,e,i){return new OC(t,e,i[0],i[2])}};DC=WS([jC({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],DC);let HC=class{ref(t,e,i){return new OC(t,e,"element","ref")}"PART.ref"(t,e,i){return new OC(t,e,i[0],"ref")}};HC=WS([jC({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],HC);let zC=class{":PART"(t,e,i){return new OC(t,e,i[0],"bind")}};zC=WS([jC({pattern:":PART",symbols:":"})],zC);let qC=class{"@PART"(t,e,i){return new OC(t,e,i[0],"trigger")}};qC=WS([jC({pattern:"@PART",symbols:"@"})],qC);let WC=class{"...$attrs"(t,e,i){return new OC(t,e,"","...$attrs")}};WC=WS([jC({pattern:"...$attrs",symbols:""})],WC);const KC=Nb,ZC=ib.createInterface("ISVGAnalyzer",(t=>t.singleton(_C)));class _C{isStandardSvgAttribute(t,e){return!1}}const QC=ib.createInterface("IAttrMapper",(t=>t.singleton(GC)));class GC{constructor(t){this.svg=t,this.fns=[],this.N=nC(),this.W=nC(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[ZC]}useMapping(t){var e,i;let n,s,r,o;for(r in t)for(o in n=t[r],s=null!==(e=(i=this.N)[r])&&void 0!==e?e:i[r]=nC(),n){if(void 0!==s[o])throw XC(o,r);s[o]=n[o]}}useGlobalMapping(t){const e=this.W;for(const i in t){if(void 0!==e[i])throw XC(i,"*");e[i]=t[i]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((i=>i(t,e)))}map(t,e){var i,n,s;return null!==(s=null!==(n=null===(i=this.N[t.nodeName])||void 0===i?void 0:i[e])&&void 0!==n?n:this.W[e])&&void 0!==s?s:oC(t,e,this.svg)?e:null}}function XC(t,e){return new Error(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}class YC{constructor(t,e,i,n,s){this.sourceExpression=t,this.target=e,this.targetProperty=i,this.locator=s,this.interceptor=this,this.isBound=!1,this.targetObserver=n.getAccessor(e,i)}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const i=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(e,"$event"),i}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.targetObserver.setValue((t=>this.interceptor.callSource(t)),t,this.target,this.targetProperty),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t,this.target,this.targetProperty),this.isBound=!1)}observe(t,e){}handleChange(t,e,i){}}class JC{constructor(t,e,i){this.type=7,this.v=null,this.ov=null,this.H=!1,this.f=0,this.o=t,this.G=e,this.X=i}getValue(){return this.v}setValue(t,e){this.v=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H)switch(this.H=!1,this.ov=this.v,this.X){case"class":this.o.classList.toggle(this.G,!!this.v);break;case"style":{let t="",e=this.v;cC(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.G,e,t);break}default:null==this.v?this.o.removeAttribute(this.X):this.o.setAttribute(this.X,String(this.v))}}handleMutation(t){let e=!1;for(let i=0,n=t.length;n>i;++i){const n=t[i];if("attributes"===n.type&&n.attributeName===this.G){e=!0;break}}if(e){let t;switch(this.X){case"class":t=this.o.classList.contains(this.G);break;case"style":t=this.o.style.getPropertyValue(this.G);break;default:throw new Error(`AUR0651:${this.X}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.H=!1,this.f=0,this.queue.add(this))}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.G),tA(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&eA(this.o,this)}flush(){sA=this.ov,this.ov=this.v,this.subs.notify(this.v,sA,this.f)}}Tw(JC),Mw(JC);const tA=(t,e,i)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(iA)).observe(e,{attributes:!0}),e.$eMObs.add(i)},eA=(t,e)=>{const i=t.$eMObs;return!(!i||!i.delete(e)||(0===i.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},iA=t=>{t[0].target.$eMObs.forEach(nA,t)};function nA(t){t.handleMutation(this)}let sA;class rA{constructor(t){this.b=t}handleChange(t,e,i){const n=this.b;t!==n.sourceExpression.evaluate(i,n.$scope,n.locator,null)&&n.updateSource(t,i)}}const{oneTime:oA,toView:aA,fromView:lA}=xw,cA=aA|oA,hA={reusable:!1,preempt:!0};class uA{constructor(t,e,i,n,s,r,o){this.sourceExpression=t,this.targetAttribute=i,this.targetProperty=n,this.mode=s,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=e,this.p=o.get(KC),this.oL=r}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,i){if(!this.isBound)return;i|=this.persistentFlags;const n=this.mode,s=this.interceptor,r=this.sourceExpression,o=this.$scope,a=this.locator,l=this.targetObserver,c=0==(2&i)&&(4&l.type)>0;let h,u=!1;(10082!==r.$kind||this.obs.count>1)&&(u=0==(n&oA),u&&this.obs.version++,t=r.evaluate(i,o,a,s),u&&this.obs.clear()),t!==this.value&&(this.value=t,c?(h=this.task,this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,s.updateTarget(t,i)}),hA),null==h||h.cancel()):s.updateTarget(t,i))}$bind(t,e){var i;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.persistentFlags=97&t,this.$scope=e;let n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor);let s=this.targetObserver;s||(s=this.targetObserver=new JC(this.target,this.targetProperty,this.targetAttribute)),n=this.sourceExpression;const r=this.mode,o=this.interceptor;let a=!1;r&cA&&(a=(r&aA)>0,o.updateTarget(this.value=n.evaluate(t,e,this.locator,a?o:null),t)),r&lA&&s.subscribe(null!==(i=this.targetSubscriber)&&void 0!==i?i:this.targetSubscriber=new rA(o)),this.isBound=!0}$unbind(t){var e;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.obs.clearAll(),this.isBound=!1)}}Hx(uA);const{toView:dA}=xw,pA={reusable:!1,preempt:!0};class fA{constructor(t,e,i,n,s,r,o){this.interpolation=e,this.target=i,this.targetProperty=n,this.mode=s,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.oL=t,this.targetObserver=t.getAccessor(i,n);const a=e.expressions,l=this.partBindings=Array(a.length),c=a.length;let h=0;for(;c>h;++h)l[h]=new vA(a[h],i,n,r,t,this)}updateTarget(t,e){const i=this.partBindings,n=this.interpolation.parts,s=i.length;let r="",o=0;if(1===s)r=n[0]+i[0].value+n[1];else for(r=n[0];s>o;++o)r+=i[o].value+n[o+1];const a=this.targetObserver;let l;0==(2&e)&&(4&a.type)>0?(l=this.task,this.task=this.taskQueue.queueTask((()=>{this.task=null,a.setValue(r,e,this.target,this.targetProperty)}),pA),null==l||l.cancel(),l=null):a.setValue(r,e,this.target,this.targetProperty)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const i=this.partBindings,n=i.length;let s=0;for(;n>s;++s)i[s].$bind(t,e);this.updateTarget(void 0,t)}$unbind(t){var e;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const i=this.partBindings,n=i.length;let s=0;for(;n>s;++s)i[s].interceptor.$unbind(t);null===(e=this.task)||void 0===e||e.cancel(),this.task=null}}class vA{constructor(t,e,i,n,s,r){this.sourceExpression=t,this.target=e,this.targetProperty=i,this.locator=n,this.owner=r,this.interceptor=this,this.mode=xw.toView,this.value="",this.task=null,this.isBound=!1,this.oL=s}handleChange(t,e,i){if(!this.isBound)return;const n=this.sourceExpression,s=this.obs;let r=!1;10082===n.$kind&&1===s.count||(r=(this.mode&dA)>0,r&&s.version++,t=n.evaluate(i,this.$scope,this.locator,r?this.interceptor:null),r&&s.clear()),t!=this.value&&(this.value=t,t instanceof Array&&this.observeCollection(t),this.owner.updateTarget(t,i))}handleCollectionChange(t,e){this.owner.updateTarget(void 0,e)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&dA)>0?this.interceptor:null),this.value instanceof Array&&this.observeCollection(this.value)}$unbind(t){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll())}}Hx(vA);class gA{constructor(t,e,i,n,s,r){this.sourceExpression=t,this.target=e,this.locator=i,this.p=s,this.strict=r,this.interceptor=this,this.mode=xw.toView,this.value="",this.task=null,this.isBound=!1,this.oL=n}updateTarget(t,e){var i,n;const s=this.target,r=this.p.Node,o=this.value;this.value=t,o instanceof r&&(null===(i=o.parentNode)||void 0===i||i.removeChild(o)),t instanceof r?(s.textContent="",null===(n=s.parentNode)||void 0===n||n.insertBefore(t,s)):s.textContent=String(t)}handleChange(t,e,i){var n;if(!this.isBound)return;const s=this.sourceExpression,r=this.obs;let o=!1;if(10082===s.$kind&&1===r.count||(o=(this.mode&dA)>0,o&&r.version++,i|=this.strict?1:0,t=s.evaluate(i,this.$scope,this.locator,o?this.interceptor:null),o&&r.clear()),t===this.value)return null===(n=this.task)||void 0===n||n.cancel(),void(this.task=null);0==(2&i)?this.queueUpdate(t,i):this.updateTarget(t,i)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),t|=this.strict?1:0;const i=this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&dA)>0?this.interceptor:null);i instanceof Array&&this.observeCollection(i),this.updateTarget(i,t)}$unbind(t){var e;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),null===(e=this.task)||void 0===e||e.cancel(),this.task=null)}queueUpdate(t,e){const i=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(t,e)}),pA),null==i||i.cancel()}}Hx(gA);class mA{constructor(t,e,i,n,s=!1){this.sourceExpression=t,this.targetProperty=e,this.locator=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.target=null,this.oL=i,this.Y=s}handleChange(t,e,i){if(!this.isBound)return;const n=this.target,s=this.targetProperty,r=n[s];this.obs.version++,t=this.sourceExpression.evaluate(i,this.$scope,this.locator,this.interceptor),this.obs.clear(),t!==r&&(n[s]=t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.target=this.Y?e.bindingContext:e.overrideContext;const i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|t,e,this.locator,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),this.isBound=!1}}Hx(mA);const{oneTime:bA,toView:yA,fromView:wA}=xw,xA=yA|bA,kA={reusable:!1,preempt:!0};class SA{constructor(t,e,i,n,s,r,o){this.sourceExpression=t,this.target=e,this.targetProperty=i,this.mode=n,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null,this.oL=s}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,i){if(!this.isBound)return;const n=0==(2&(i|=this.persistentFlags))&&(4&this.targetObserver.type)>0,s=this.obs;let r=!1;(10082!==this.sourceExpression.$kind||s.count>1)&&(r=this.mode>bA,r&&s.version++,t=this.sourceExpression.evaluate(i,this.$scope,this.locator,this.interceptor),r&&s.clear()),n?(CA=this.task,this.task=this.taskQueue.queueTask((()=>{this.interceptor.updateTarget(t,i),this.task=null}),kA),null==CA||CA.cancel(),CA=null):this.interceptor.updateTarget(t,i)}$bind(t,e){var i;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}t|=1,this.persistentFlags=97&t,this.$scope=e;let n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor);const s=this.oL,r=this.mode;let o=this.targetObserver;o||(o=r&wA?s.getObserver(this.target,this.targetProperty):s.getAccessor(this.target,this.targetProperty),this.targetObserver=o),n=this.sourceExpression;const a=this.interceptor,l=(r&yA)>0;r&xA&&a.updateTarget(n.evaluate(t,e,this.locator,l?a:null),t),r&wA&&(o.subscribe(null!==(i=this.targetSubscriber)&&void 0!==i?i:this.targetSubscriber=new rA(a)),l||a.updateSource(o.getValue(this.target,this.targetProperty),t)),this.isBound=!0}$unbind(t){this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,CA=this.task,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=CA&&(CA.cancel(),CA=this.task=null),this.obs.clearAll(),this.isBound=!1)}}Hx(SA);let CA=null;class AA{constructor(t,e,i){this.sourceExpression=t,this.target=e,this.locator=i,this.interceptor=this,this.isBound=!1,this.$scope=void 0}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(t,this.$scope,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,null)===this.target&&e.assign(t,this.$scope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.isBound=!1}observe(t,e){}handleChange(t,e,i){}}const $A=ib.createInterface("IAppTask");class EA{constructor(t,e,i){this.c=void 0,this.slot=t,this.k=e,this.cb=i}register(t){return this.c=t.register(Ib.instance($A,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const TA=Object.freeze({beforeCreate:RA("beforeCreate"),hydrating:RA("hydrating"),hydrated:RA("hydrated"),beforeActivate:RA("beforeActivate"),afterActivate:RA("afterActivate"),beforeDeactivate:RA("beforeDeactivate"),afterDeactivate:RA("afterDeactivate")});function RA(t){return function(e,i){return lC(i)?new EA(t,e,i):new EA(t,null,e)}}function IA(t){return t.startsWith(OA)}const OA=YS("children-observer"),PA=Object.freeze({name:OA,keyFrom:t=>`${OA}:${t}`,from(...t){const e={},i=Array.isArray;function n(t){e[t]=MA.create(t)}function s(t,i){e[t]=MA.create(t,i)}return t.forEach((function(t){i(t)?t.forEach(n):t instanceof MA?e[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>s(e,t)))})),e},getAll(t){const e=OA.length+1,i=[],n=Um(t);let s,r,o,a=n.length,l=0;for(;--a>=0;){o=n[a],s=iC(o).filter(IA),r=s.length;for(let t=0;t<r;++t)i[l++]=ZS(OA,o,s[t].slice(e))}return i}}),LA={childList:!0};class MA{constructor(t,e,i,n,s,r){this.callback=t,this.property=e,this.options=i,this.query=n,this.filter=s,this.map=r}static create(t,e={}){var i;return new MA(jm(e.callback,`${t}Changed`),jm(e.property,t),null!==(i=e.options)&&void 0!==i?i:LA,e.query,e.filter,e.map)}}class jA{constructor(t,e,i,n,s=UA,r=BA,o=NA,a){this.controller=t,this.obj=e,this.propertyKey=i,this.query=s,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[n],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){var t;this.observing||(this.observing=!0,this.children=this.get(),(null!==(t=this.observer)&&void 0!==t?t:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.Z()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=jb)}Z(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(t,e,i,n){var s;const r=e(t),o=r.length,a=[];let l,c,h,u=0;for(;u<o;++u)l=r[u],c=l$.for(l,VA),h=null!==(s=null==c?void 0:c.viewModel)&&void 0!==s?s:null,i(l,c,h)&&a.push(n(l,c,h));return a}(this.controller,this.query,this.filter,this.map)}}function UA(t){return t.host.childNodes}function BA(t,e,i){return!!i}function NA(t,e,i){return i}Tw()(jA);const VA={optional:!0};function FA(t){return function(e){return KA.define(t,e)}}function DA(t){return function(e){return KA.define(cC(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class HA{constructor(t,e,i,n,s,r,o,a,l,c){this.Type=t,this.name=e,this.aliases=i,this.key=n,this.defaultBindingMode=s,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=l,this.dependencies=c}get type(){return 2}static create(t,e){let i,n;return cC(t)?(i=t,n={name:i}):(i=t.name,n=t),new HA(e,jm(WA(e,"name"),i),Mm(WA(e,"aliases"),n.aliases,e.aliases),KA.keyFrom(i),jm(WA(e,"defaultBindingMode"),n.defaultBindingMode,e.defaultBindingMode,xw.toView),jm(WA(e,"isTemplateController"),n.isTemplateController,e.isTemplateController,!1),vC.from(e,...vC.getAll(e),WA(e,"bindables"),e.bindables,n.bindables),jm(WA(e,"noMultiBindings"),n.noMultiBindings,e.noMultiBindings,!1),Mm(QA.getAnnotation(e),e.watches),Mm(WA(e,"dependencies"),n.dependencies,e.dependencies))}register(t){const{Type:e,key:i,aliases:n}=this;Ib.transient(i,e).register(t),Ib.aliasTo(i,e).register(t),Cy(n,KA,i,t)}}const zA=JS("custom-attribute"),qA=t=>`${zA}:${t}`,WA=(t,e)=>ZS(YS(e),t),KA=Object.freeze({name:zA,keyFrom:qA,isType:t=>lC(t)&&_S(zA,t),for(t,e){var i;return null!==(i=kE(t,qA(e)))&&void 0!==i?i:void 0},define(t,e){const i=HA.create(t,e);return QS(zA,i,i.Type),QS(zA,i,i),tC(e,zA),i.Type},getDefinition(t){const e=ZS(zA,t);if(void 0===e)throw new Error(`AUR0759:${t.name}`);return e},annotate(t,e,i){QS(YS(e),i,t)},getAnnotation:WA}),ZA=jb,_A=YS("watch"),QA=Object.freeze({name:_A,add(t,e){let i=ZS(_A,t);null==i&&QS(_A,i=[],t),i.push(e)},getAnnotation(t){var e;return null!==(e=ZS(_A,t))&&void 0!==e?e:ZA}});function GA(t){return function(e){return l$.define(t,e)}}const XA=new WeakMap;class YA{constructor(t,e,i,n,s,r,o,a,l,c,h,u,d,p,f,v,g,m,b,y,w){this.Type=t,this.name=e,this.aliases=i,this.key=n,this.cache=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=v,this.shadowOptions=g,this.hasSlots=m,this.enhance=b,this.watches=y,this.processContent=w}get type(){return 1}static create(t,e=null){if(null===e){const i=t;if(cC(i))throw new Error(`AUR0761:${t}`);const n=Xm("name",i,o$);return e=lC(i.Type)?i.Type:l$.generateType(Em(n)),new YA(e,n,Mm(i.aliases),Xm("key",i,(()=>l$.keyFrom(n))),Xm("cache",i,t$),Xm("capture",i,i$),Xm("template",i,e$),Mm(i.instructions),Mm(i.dependencies),Xm("injectable",i,e$),Xm("needsCompile",i,n$),Mm(i.surrogates),vC.from(e,i.bindables),PA.from(i.childrenObservers),Xm("containerless",i,i$),Xm("isStrictBinding",i,i$),Xm("shadowOptions",i,e$),Xm("hasSlots",i,i$),Xm("enhance",i,i$),Xm("watches",i,s$),Gm("processContent",e,e$))}if(cC(t))return new YA(e,t,Mm(a$(e,"aliases"),e.aliases),l$.keyFrom(t),Gm("cache",e,t$),Gm("capture",e,i$),Gm("template",e,e$),Mm(a$(e,"instructions"),e.instructions),Mm(a$(e,"dependencies"),e.dependencies),Gm("injectable",e,e$),Gm("needsCompile",e,n$),Mm(a$(e,"surrogates"),e.surrogates),vC.from(e,...vC.getAll(e),a$(e,"bindables"),e.bindables),PA.from(...PA.getAll(e),a$(e,"childrenObservers"),e.childrenObservers),Gm("containerless",e,i$),Gm("isStrictBinding",e,i$),Gm("shadowOptions",e,e$),Gm("hasSlots",e,i$),Gm("enhance",e,i$),Mm(QA.getAnnotation(e),e.watches),Gm("processContent",e,e$));const i=Xm("name",t,o$);return new YA(e,i,Mm(a$(e,"aliases"),t.aliases,e.aliases),l$.keyFrom(i),Qm("cache",t,e,t$),Qm("capture",t,e,i$),Qm("template",t,e,e$),Mm(a$(e,"instructions"),t.instructions,e.instructions),Mm(a$(e,"dependencies"),t.dependencies,e.dependencies),Qm("injectable",t,e,e$),Qm("needsCompile",t,e,n$),Mm(a$(e,"surrogates"),t.surrogates,e.surrogates),vC.from(e,...vC.getAll(e),a$(e,"bindables"),e.bindables,t.bindables),PA.from(...PA.getAll(e),a$(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),Qm("containerless",t,e,i$),Qm("isStrictBinding",t,e,i$),Qm("shadowOptions",t,e,e$),Qm("hasSlots",t,e,i$),Qm("enhance",t,e,i$),Mm(t.watches,QA.getAnnotation(e),e.watches),Qm("processContent",t,e,e$))}static getOrCreate(t){if(t instanceof YA)return t;if(XA.has(t))return XA.get(t);const e=YA.create(t);return XA.set(t,e),QS(r$,e,e.Type),e}register(t){const{Type:e,key:i,aliases:n}=this;t.has(i,!1)||(Ib.transient(i,e).register(t),Ib.aliasTo(i,e).register(t),Cy(n,l$,i,t))}}const JA={name:void 0,searchParents:!1,optional:!1},t$=()=>0,e$=()=>null,i$=()=>!1,n$=()=>!0,s$=()=>jb,r$=JS("custom-element"),o$=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),a$=(t,e)=>ZS(YS(e),t),l$=Object.freeze({name:r$,keyFrom:t=>`${r$}:${t}`,isType:t=>lC(t)&&_S(r$,t),for(t,e=JA){if(void 0===e.name&&!0!==e.searchParents){const i=kE(t,r$);if(null===i){if(!0===e.optional)return null;throw new Error("AUR0762")}return i}if(void 0!==e.name){if(!0!==e.searchParents){const i=kE(t,r$);if(null===i)throw new Error("AUR0763");return i.is(e.name)?i:void 0}let i=t,n=!1;for(;null!==i;){const t=kE(i,r$);if(null!==t&&(n=!0,t.is(e.name)))return t;i=RE(i)}if(n)return;throw new Error("AUR0764")}let i=t;for(;null!==i;){const t=kE(i,r$);if(null!==t)return t;i=RE(i)}throw new Error("AUR0765")},define(t,e){const i=YA.create(t,e);return QS(r$,i,i.Type),QS(r$,i,i),tC(i.Type,r$),i.Type},getDefinition(t){const e=ZS(r$,t);if(void 0===e)throw new Error(`AUR0760:${t.name}`);return e},annotate:(t,e,i)=>{QS(YS(e),i,t)},getAnnotation:a$,generateName:o$,createInjectable(){const t=function(e,i,n){return ib.getOrCreateAnnotationParamTypes(e)[n]=t,e};return t.register=function(e){return{resolve:(e,i)=>i.has(t,!0)?i.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(i,n=e){const s=class{};return t.value=i,Reflect.defineProperty(s,"name",t),n!==e&&Object.assign(s.prototype,n),s}}()});YS("processContent");class c${constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.J={},this.tt=0,this.H=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H){this.H=!1;const t=this.value,e=this.J,i=h$(t);let n=this.tt;if(this.ov=t,i.length>0&&this.it(i),this.tt+=1,0===n)return;n-=1;for(const t in e)sC.call(e,t)&&e[t]===n&&this.obj.classList.remove(t)}}it(t){const e=this.obj,i=t.length;let n,s=0;for(;s<i;s++)n=t[s],0!==n.length&&(this.J[n]=this.tt,e.classList.add(n))}}function h$(t){if(cC(t))return u$(t);if("object"!=typeof t)return jb;if(t instanceof Array){const e=t.length;if(e>0){const i=[];let n=0;for(;e>n;++n)i.push(...h$(t[n]));return i}return jb}const e=[];let i;for(i in t)Boolean(t[i])&&(i.includes(" ")?e.push(...u$(i)):e.push(i));return e}function u$(t){const e=t.match(/\S+/g);return null===e?jb:e}ib.createInterface("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>g$.supported(t.get(KC))?t.get(d$):t.get(p$)))));class d${constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new g$(this.p,t,this.cache,e)}}d$.inject=[KC];class p${constructor(t){this.p=t}createStyles(t,e){return new m$(this.p,t,e)}}p$.inject=[KC];const f$=ib.createInterface("IShadowDOMStyles"),v$=ib.createInterface("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:Bb})));class g${constructor(t,e,i,n=null){this.sharedStyles=n,this.styleSheets=e.map((e=>{let n;return e instanceof t.CSSStyleSheet?n=e:(n=i.get(e),void 0===n&&(n=new t.CSSStyleSheet,n.replaceSync(e),i.set(e,n))),n}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class m${constructor(t,e,i=null){this.p=t,this.localStyles=e,this.sharedStyles=i}applyTo(t){const e=this.localStyles,i=this.p;for(let n=e.length-1;n>-1;--n){const s=i.document.createElement("style");s.innerHTML=e[n],t.prepend(s)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:b$,exit:y$}=Tk,{wrap:w$,unwrap:x$}=wS;class k${constructor(t,e,i,n,s){this.obj=t,this.get=i,this.cb=n,this.useProxy=s,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.value,i=this.compute();Object.is(i,e)||this.cb.call(t,i,e,t)}compute(){this.running=!0,this.obs.version++;try{return b$(this),this.value=x$(this.get.call(void 0,this.useProxy?w$(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,y$(this)}}}class S${constructor(t,e,i,n,s){this.scope=t,this.locator=e,this.oL=i,this.expression=n,this.callback=s,this.interceptor=this,this.isBound=!1,this.obj=t.bindingContext}handleChange(t){const e=this.expression,i=this.obj,n=this.value;10082===e.$kind&&1===this.obs.count||(this.obs.version++,t=e.evaluate(0,this.scope,this.locator,this),this.obs.clear()),Object.is(t,n)||(this.value=t,this.callback.call(i,t,n,i))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,this.locator,this),this.obs.clear())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.value=void 0)}}Hx(k$),Hx(S$);const C$=ib.createInterface("ILifecycleHooks");class A${constructor(t,e){this.definition=t,this.instance=e}}class $${constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const i=new Set;let n=e.prototype;for(;n!==Object.prototype;){for(const t of Object.getOwnPropertyNames(n))"constructor"!==t&&i.add(t);n=Object.getPrototypeOf(n)}return new $$(e,i)}register(t){Ib.singleton(C$,this.Type).register(t)}}const E$=new WeakMap,T$=YS("lifecycle-hooks"),R$=Object.freeze({name:T$,define(t,e){const i=$$.create(t,e);return QS(T$,i,e),tC(e,T$),i.Type},resolve(t){let e=E$.get(t);if(void 0===e){E$.set(t,e=new I$);const i=t.root,n=i.id===t.id?t.getAll(C$):t.has(C$,!1)?i.getAll(C$).concat(t.getAll(C$)):i.getAll(C$);let s,r,o,a,l;for(s of n)for(a of(r=ZS(T$,s.constructor),o=new A$(r,s),r.propertyNames))l=e[a],void 0===l?e[a]=[o]:l.push(o)}return e}});class I${}const O$=ib.createInterface("IViewFactory");class P${constructor(t,e){this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=P$.maxCacheSize:cC(t)&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t){const e=this.cache;let i;return null!=e&&e.length>0?(i=e.pop(),i):(i=W$.$view(this,t),i)}}P$.maxCacheSize=65535;const L$=new WeakSet;function M$(t){return!L$.has(t)}function j$(t){return L$.add(t),YA.create(t)}const U$=JS("views"),B$=Object.freeze({name:U$,has:t=>lC(t)&&(_S(U$,t)||"$views"in t),get(t){if(lC(t)&&"$views"in t){const e=t.$views.filter(M$).map(j$);for(const i of e)B$.add(t,i)}let e=ZS(U$,t);return void 0===e&&QS(U$,e=[],t),e},add(t,e){const i=YA.create(e);let n=ZS(U$,t);return void 0===n?QS(U$,n=[i],t):n.push(i),n}}),N$=ib.createInterface("IViewLocator",(t=>t.singleton(V$)));class V${constructor(){this.et=new WeakMap,this.st=new Map}getViewComponentForObject(t,e){if(t){const i=B$.has(t.constructor)?B$.get(t.constructor):[],n=lC(e)?e(t,i):this.nt(i,e);return this.rt(t,i,n)}return null}rt(t,e,i){let n,s=this.et.get(t);if(void 0===s?(s={},this.et.set(t,s)):n=s[i],void 0===n){const r=this.ot(t,e,i);n=l$.define(l$.getDefinition(r),class extends r{constructor(){super(t)}}),s[i]=n}return n}ot(t,e,i){let n,s=this.st.get(t.constructor);if(void 0===s?(s={},this.st.set(t.constructor,s)):n=s[i],void 0===n){n=l$.define(this.lt(e,i),class{constructor(t){this.viewModel=t}define(t,e,i){const n=this.viewModel;if(t.scope=$y.fromParent(t.scope,n),void 0!==n.define)return n.define(t,e,i)}});const r=n.prototype;"hydrating"in t&&(r.hydrating=function(t){this.viewModel.hydrating(t)}),"hydrated"in t&&(r.hydrated=function(t){this.viewModel.hydrated(t)}),"created"in t&&(r.created=function(t){this.viewModel.created(t)}),"binding"in t&&(r.binding=function(t,e,i){return this.viewModel.binding(t,e,i)}),"bound"in t&&(r.bound=function(t,e,i){return this.viewModel.bound(t,e,i)}),"attaching"in t&&(r.attaching=function(t,e,i){return this.viewModel.attaching(t,e,i)}),"attached"in t&&(r.attached=function(t,e){return this.viewModel.attached(t,e)}),"detaching"in t&&(r.detaching=function(t,e,i){return this.viewModel.detaching(t,e,i)}),"unbinding"in t&&(r.unbinding=function(t,e,i){return this.viewModel.unbinding(t,e,i)}),"dispose"in t&&(r.dispose=function(){this.viewModel.dispose()}),s[i]=n}return n}nt(t,e){return e||(1===t.length?t[0].name:"default-view")}lt(t,e){const i=t.find((t=>t.name===e));if(void 0===i)throw new Error(`Could not find view: ${e}`);return i}}const F$=ib.createInterface("IRendering",(t=>t.singleton(D$)));class D${constructor(t){this.ht=new WeakMap,this.ct=new WeakMap,this.ut=(this.ft=t.root).get(KC),this.dt=new PE(this.ut,this.ut.document.createDocumentFragment())}get renderers(){return null==this.rs?this.rs=this.ft.getAll(gT,!1).reduce(((t,e)=>(t[e.target]=e,t)),nC()):this.rs}compile(t,e,i){if(!1!==t.needsCompile){const n=this.ht,s=e.get(vT);let r=n.get(t);return null==r?n.set(t,r=s.compile(t,e,i)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new P$(e,YA.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new PE(this.ut,t.template);let e;const i=this.ct;if(i.has(t))e=i.get(t);else{const n=this.ut,s=n.document,r=t.template;let o;null===r?e=null:r instanceof n.Node?"TEMPLATE"===r.nodeName?e=s.adoptNode(r.content):(e=s.adoptNode(s.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=s.createElement("template"),cC(r)&&(o.innerHTML=r),s.adoptNode(e=o.content)),i.set(t,e)}return null==e?this.dt:new PE(this.ut,e.cloneNode(!0))}render(t,e,i,n){const s=i.instructions,r=this.renderers,o=e.length;if(e.length!==s.length)throw new Error(`AUR0757:${o}<>${s.length}`);let a,l,c,h=0,u=0,d=0;if(o>0)for(;o>h;){for(a=s[h],c=e[h],u=0,d=a.length;d>u;)l=a[u],r[l.type].render(t,c,l),++u;++h}if(null!=n&&(a=i.surrogates,(d=a.length)>0))for(u=0;d>u;)l=a[u],r[l.type].render(t,n,l),++u}}var H$;D$.inject=[rb],function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(H$||(H$={}));const z$={optional:!0},q$=new WeakMap;class W${constructor(t,e,i,n,s,r,o){switch(this.container=t,this.vmKind=e,this.definition=i,this.viewFactory=n,this.viewModel=s,this.host=r,this.id=Om("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.vt=!1,this.gt=jb,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.wt=0,this.bt=0,this.xt=0,this.location=o,this.r=t.root.get(F$),e){case 1:case 0:this.hooks=new X$(s);break;case 2:this.hooks=X$.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var t;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(t=this.parent.definition)||void 0===t?void 0:t.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(t){return q$.get(t)}static getCachedOrThrow(t){const e=W$.getCached(t);if(void 0===e)throw new Error(`AUR0500:${t}`);return e}static $el(t,e,i,n,s,r=null){if(q$.has(e))return q$.get(e);s=null!=s?s:l$.getDefinition(e.constructor);const o=new W$(t,0,s,null,e,i,r),a=t.get(db(nE));return s.dependencies.length>0&&t.register(...s.dependencies),t.registerResolver(nE,new Ob("IHydrationContext",new sE(o,n,a))),q$.set(e,o),null!=n&&!1===n.hydrate||o.hE(n,a),o}static $attr(t,e,i,n){if(q$.has(e))return q$.get(e);n=null!=n?n:KA.getDefinition(e.constructor);const s=new W$(t,1,n,null,e,i,null);return n.dependencies.length>0&&t.register(...n.dependencies),q$.set(e,s),s.yt(),s}static $view(t,e){const i=new W$(t.container,2,null,t,null,null,null);return i.parent=null!=e?e:null,i.kt(),i}hE(t,e){const i=this.container,n=(this.flags,this.viewModel);let s=this.definition;if(this.scope=$y.create(n,null,!0),s.watches.length>0&&G$(this,i,s,n),Z$(this,s,0,n),this.gt=function(t,e,i){const n=e.childrenObservers,s=Object.getOwnPropertyNames(n),r=s.length;if(r>0){const e=K$(i),o=[];let a,l,c=0;for(;c<r;++c)a=s[c],null==e[a]&&(l=n[a],o[o.length]=e[a]=new jA(t,i,a,l.callback,l.query,l.filter,l.map,l.options));return o}return jb}(this,s,n),this.hooks.hasDefine){const t=n.define(this,e,s);void 0!==t&&t!==s&&(s=YA.getOrCreate(t))}this.lifecycleHooks=R$.resolve(i),s.register(i),null!==s.injectable&&i.registerResolver(s.injectable,new Ob("definition.injectable",n)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){void 0!==this.lifecycleHooks.hydrating&&this.lifecycleHooks.hydrating.forEach(aE,this),this.hooks.hasHydrating&&this.viewModel.hydrating(this);const e=this.Ct=this.r.compile(this.definition,this.container,t),{shadowOptions:i,isStrictBinding:n,hasSlots:s}=e,r=this.location;if(this.isStrictBinding=n,null!==(this.hostController=l$.for(this.host,z$))&&(this.host=this.container.root.get(KC).document.createElement(this.definition.name)),SE(this.host,l$.name,this),SE(this.host,this.definition.key,this),null!==i||s){if(null!=r)throw new Error("AUR0501");SE(this.shadowRoot=this.host.attachShadow(null!=i?i:Y$),l$.name,this),SE(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=r?(SE(r,l$.name,this),SE(r,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.lifecycleHooks.hydrated&&this.lifecycleHooks.hydrated.forEach(lE,this),this.hooks.hasHydrated&&this.viewModel.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Ct,this.host),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(oE,this),this.hooks.hasCreated&&this.viewModel.created(this)}yt(){const t=this.definition,e=this.viewModel;t.watches.length>0&&G$(this,this.container,t,e),Z$(this,t,this.flags,e),e.$controller=this,this.lifecycleHooks=R$.resolve(this.container),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(oE,this),this.hooks.hasCreated&&this.viewModel.created(this)}kt(){this.Ct=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Ct.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Ct)).findTargets(),this.Ct,void 0)}activate(t,e,i,n){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`AUR0502:${this.name}`);default:throw new Error(`AUR0503:${this.name} ${eE(this.state)}`)}switch(this.parent=e,i|=2,this.vmKind){case 0:this.scope.parentScope=null!=n?n:null;break;case 1:this.scope=null!=n?n:null;break;case 2:if(null==n)throw new Error("AUR0504");this.hasLockedScope||(this.scope=n)}let s;return this.isStrictBinding&&(i|=1),this.$initiator=t,this.$flags=i,this.At(),2!==this.vmKind&&null!=this.lifecycleHooks.binding&&(s=Fm(...this.lifecycleHooks.binding.map(cE,this))),this.hooks.hasBinding&&(s=Fm(s,this.viewModel.binding(this.$initiator,this.parent,this.$flags))),s instanceof Promise?(this.Rt(),s.then((()=>{this.bind()})).catch((t=>{this.St(t)})),this.$promise):(this.bind(),this.$promise)}bind(){let t,e=0,i=this.gt.length;if(i>0)for(;i>e;)this.gt[e].start(),++e;if(null!==this.bindings)for(e=0,i=this.bindings.length;i>e;)this.bindings[e].$bind(this.$flags,this.scope),++e;if(2!==this.vmKind&&null!=this.lifecycleHooks.bound&&(t=Fm(...this.lifecycleHooks.bound.map(hE,this))),this.hooks.hasBound&&(t=Fm(t,this.viewModel.bound(this.$initiator,this.parent,this.$flags))),t instanceof Promise)return this.Rt(),void t.then((()=>{this.isBound=!0,this.Et()})).catch((t=>{this.St(t)}));this.isBound=!0,this.Et()}Bt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Et(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Bt(this.host);break;case 3:this.hostController.Bt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(f$,!1)?t.get(f$):t.get(v$)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.lifecycleHooks.attaching&&(t=Fm(...this.lifecycleHooks.attaching.map(uE,this))),this.hooks.hasAttaching&&(t=Fm(t,this.viewModel.attaching(this.$initiator,this.parent,this.$flags))),t instanceof Promise&&(this.Rt(),this.At(),t.then((()=>{this.It()})).catch((t=>{this.St(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.It()}deactivate(t,e,i){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`AUR0505:${this.name} ${eE(this.state)}`)}this.$initiator=t,this.$flags=i,t===this&&this.Tt();let n,s=0;if(this.gt.length)for(;s<this.gt.length;++s)this.gt[s].stop();if(null!==this.children)for(s=0;s<this.children.length;++s)this.children[s].deactivate(t,this,i);if(2!==this.vmKind&&null!=this.lifecycleHooks.detaching&&(n=Fm(...this.lifecycleHooks.detaching.map(pE,this))),this.hooks.hasDetaching&&(n=Fm(n,this.viewModel.detaching(this.$initiator,this.parent,this.$flags))),n instanceof Promise&&(this.Rt(),t.Tt(),n.then((()=>{t.Dt()})).catch((e=>{t.St(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Dt(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=4|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].$unbind(t);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}16==(16&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.Pt()}Rt(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Rt())}Pt(){void 0!==this.$promise&&(vE=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,vE(),vE=void 0)}St(t){void 0!==this.$promise&&(gE=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,gE(t),gE=void 0),this.$initiator!==this&&this.parent.St(t)}At(){++this.wt,this.$initiator!==this&&this.parent.At()}It(){if(0==--this.wt){if(2!==this.vmKind&&null!=this.lifecycleHooks.attached&&(mE=Fm(...this.lifecycleHooks.attached.map(dE,this))),this.hooks.hasAttached&&(mE=Fm(mE,this.viewModel.attached(this.$initiator,this.$flags))),mE instanceof Promise)return this.Rt(),mE.then((()=>{this.state=2,this.Pt(),this.$initiator!==this&&this.parent.It()})).catch((t=>{this.St(t)})),void(mE=void 0);mE=void 0,this.state=2,this.Pt()}this.$initiator!==this&&this.parent.It()}Tt(){++this.bt}Dt(){if(0==--this.bt){this.$t(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),2!==e.vmKind&&null!=e.lifecycleHooks.unbinding&&(t=Fm(...e.lifecycleHooks.unbinding.map(fE,this))),e.hooks.hasUnbinding&&(e.debug&&e.logger.trace("unbinding()"),t=Fm(t,e.viewModel.unbinding(e.$initiator,e.parent,e.$flags))),t instanceof Promise&&(this.Rt(),this.$t(),t.then((()=>{this.Ot()})).catch((t=>{this.St(t)}))),t=void 0,e=e.next;this.Ot()}}$t(){++this.xt}Ot(){if(0==--this.xt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return KA.getDefinition(this.viewModel.constructor).name===t;case 0:return l$.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(SE(t,l$.name,this),SE(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(SE(t,l$.name,this),SE(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(SE(t,l$.name,this),SE(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(rE),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(q$.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let i=0,n=e.length;i<n;++i)if(!0===e[i].accept(t))return!0}}}function K$(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function Z$(t,e,i,n){const s=e.bindables,r=Object.getOwnPropertyNames(s),o=r.length;if(o>0){let e,i,a=0;const l=K$(n),c=t.container,h=c.has(ww,!0)?c.get(ww):null;for(;a<o;++a)e=r[a],void 0===l[e]&&(i=s[e],l[e]=new bC(n,e,i.callback,i.set,t,h))}}const _$=new Map,Q$=t=>{let e=_$.get(t);return null==e&&(e=new Xy(t,0),_$.set(t,e)),e};function G$(t,e,i,n){const s=e.get(MS),r=e.get(zx),o=i.watches,a=0===t.vmKind?t.scope:$y.create(n,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if(({expression:c,callback:h}=o[d]),h=lC(h)?h:Reflect.get(n,h),!lC(h))throw new Error(`AUR0506:${String(h)}`);lC(c)?t.addBinding(new k$(n,s,c,h,!0)):(u=cC(c)?r.parse(c,8):Q$(c),t.addBinding(new S$(a,e,s,u,h)))}}class X${constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}X$.none=new X$({});const Y$={mode:"open"};var J$,tE;function eE(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(J$||(J$={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(tE||(tE={}));const iE=ib.createInterface("IController"),nE=ib.createInterface("IHydrationContext");class sE{constructor(t,e,i){this.instruction=e,this.parent=i,this.controller=t}}function rE(t){t.dispose()}function oE(t){t.instance.created(this.viewModel,this)}function aE(t){t.instance.hydrating(this.viewModel,this)}function lE(t){t.instance.hydrated(this.viewModel,this)}function cE(t){return t.instance.binding(this.viewModel,this.$initiator,this.parent,this.$flags)}function hE(t){return t.instance.bound(this.viewModel,this.$initiator,this.parent,this.$flags)}function uE(t){return t.instance.attaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function dE(t){return t.instance.attached(this.viewModel,this.$initiator,this.$flags)}function pE(t){return t.instance.detaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function fE(t){return t.instance.unbinding(this.viewModel,this.$initiator,this.parent,this.$flags)}let vE,gE,mE;const bE=ib.createInterface("IAppRoot"),yE=ib.createInterface("IWorkTracker",(t=>t.singleton(wE)));class wE{constructor(t){this.Lt=0,this.qt=null,this.Pt=null,this.Ut=t.scopeTo("WorkTracker")}start(){this.Ut.trace(`start(stack:${this.Lt})`),++this.Lt}finish(){if(this.Ut.trace(`finish(stack:${this.Lt})`),0==--this.Lt){const t=this.Pt;null!==t&&(this.Pt=this.qt=null,t())}}wait(){if(this.Ut.trace(`wait(stack:${this.Lt})`),null===this.qt){if(0===this.Lt)return Promise.resolve();this.qt=new Promise((t=>{this.Pt=t}))}return this.qt}}wE.inject=[Kb];class xE{}function kE(t,e){var i,n;return null!==(n=null===(i=t.$au)||void 0===i?void 0:i[e])&&void 0!==n?n:null}function SE(t,e,i){var n,s;(null!==(n=(s=t).$au)&&void 0!==n?n:s.$au=new xE)[e]=i}const CE=ib.createInterface("INode"),AE=ib.createInterface("IEventTarget",(t=>t.cachedCallback((t=>t.has(bE,!0)?t.get(bE).host:t.get(KC).document)))),$E=ib.createInterface("IRenderLocation");var EE;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(EE||(EE={}));const TE=new WeakMap;function RE(t){if(TE.has(t))return TE.get(t);let e=0,i=t.nextSibling;for(;null!==i;){if(8===i.nodeType)switch(i.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return i}i=i.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=l$.for(t);if(void 0===e)return null;if(2===e.mountTarget)return RE(e.host)}return t.parentNode}function IE(t){if(OE(t))return t;const e=t.ownerDocument.createComment("au-end"),i=t.ownerDocument.createComment("au-start");return null!==t.parentNode&&(t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(i,e)),e.$start=i,e}function OE(t){return"au-end"===t.textContent}class PE{constructor(t,e){this.platform=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const i=e.querySelectorAll(".au");let n,s=0,r=i.length,o=this.targets=Array(r);for(;r>s;)n=i[s],"AU-M"===n.nodeName?o[s]=IE(n):o[s]=n,++s;const a=e.childNodes,l=this.childNodes=Array(r=a.length);for(s=0;r>s;)l[s]=a[s],++s;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let i,n=this.firstChild;const s=this.lastChild;for(;null!=n&&(i=n.nextSibling,e.insertBefore(n,t),n!==s);)n=i}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e,i=this.firstChild;const n=this.lastChild;for(;null!=i&&(e=i.nextSibling,t.appendChild(i),i!==n);)i=e}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let i,n=this.firstChild;for(;null!==n&&(i=n.nextSibling,t.appendChild(n),n!==e);)n=i}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let i,n=this.firstChild;const s=this.lastChild;for(;null!=n&&(i=n.nextSibling,e.insertBefore(n,t),n!==s);)n=i}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,OE(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}const LE=ib.createInterface("IWindow",(t=>t.callback((t=>t.get(KC).window)))),ME=ib.createInterface("ILocation",(t=>t.callback((t=>t.get(LE).location)))),jE=ib.createInterface("IHistory",(t=>t.callback((t=>t.get(LE).history)))),UE={[Cw.capturing]:{capture:!0},[Cw.bubbling]:{capture:!1}};class BE{constructor(t,e,i){this.prevent=t,this.strategy=e,this.expAsHandler=i}}class NE{constructor(t,e,i,n,s,r,o){this.platform=t,this.targetEvent=e,this.sourceExpression=i,this.target=n,this.eventDelegator=s,this.locator=r,this.Vt=o,this.interceptor=this,this.isBound=!1,this.handler=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;let i=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);if(delete e.$event,this.Vt.expAsHandler){if(!lC(i))throw new Error(`Handler of "${this.targetEvent}" event is not a function.`);i=i(t)}return!0!==i&&this.Vt.prevent&&t.preventDefault(),i}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e;const i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor),this.Vt.strategy===Cw.none?this.target.addEventListener(this.targetEvent,this):this.handler=this.eventDelegator.addEventListener(this.locator.get(AE),this.target,this.targetEvent,this,UE[this.Vt.strategy]),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.Vt.strategy===Cw.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observe(t,e){}handleChange(t,e,i){}}const VE={capture:!1};class FE{constructor(t,e,i=VE){this.Mt=t,this.jt=e,this.Vt=i,this.Nt=0,this.Wt=new Map,this.Ht=new Map}zt(){1==++this.Nt&&this.Mt.addEventListener(this.jt,this,this.Vt)}Gt(){0==--this.Nt&&this.Mt.removeEventListener(this.jt,this,this.Vt)}dispose(){this.Nt>0&&(this.Nt=0,this.Mt.removeEventListener(this.jt,this,this.Vt)),this.Wt.clear(),this.Ht.clear()}Xt(t){const e=!0===this.Vt.capture?this.Wt:this.Ht;let i=e.get(t);return void 0===i&&e.set(t,i=nC()),i}handleEvent(t){const e=!0===this.Vt.capture?this.Wt:this.Ht,i=t.composedPath();!0===this.Vt.capture&&i.reverse();for(const n of i){const i=e.get(n);if(void 0===i)continue;const s=i[this.jt];if(void 0!==s&&(lC(s)?s(t):s.handleEvent(t),!0===t.cancelBubble))return}}}class DE{constructor(t,e,i,n){this.Kt=t,this.Yt=e,this.jt=i,t.zt(),e[i]=n}dispose(){this.Kt.Gt(),this.Yt[this.jt]=void 0}}class HE{constructor(t){this.config=t,this.target=null,this.handler=null}subscribe(t,e){let i;for(i of(this.target=t,this.handler=e,this.config.events))t.addEventListener(i,e)}dispose(){const{target:t,handler:e}=this;let i;if(null!==t&&null!==e)for(i of this.config.events)t.removeEventListener(i,e);this.target=this.handler=null}}const zE=ib.createInterface("IEventDelegator",(t=>t.singleton(qE)));class qE{constructor(){this.Zt=nC()}addEventListener(t,e,i,n,s){var r,o;const a=null!==(r=(o=this.Zt)[i])&&void 0!==r?r:o[i]=new Map;let l=a.get(t);return void 0===l&&a.set(t,l=new FE(t,i,s)),new DE(l,l.Xt(e),i,n)}dispose(){for(const t in this.Zt){const e=this.Zt[t];for(const t of e.values())t.dispose();e.clear()}}}ib.createInterface("IProjections");const WE=ib.createInterface("IAuSlotsInfo");class KE{constructor(t){this.projectedSlots=t}}var ZE;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}(ZE||(ZE={}));const _E=ib.createInterface("Instruction");function QE(t){const e=t.type;return cC(e)&&2===e.length}class GE{constructor(t,e){this.from=t,this.to=e}get type(){return"rf"}}class XE{constructor(t,e,i){this.from=t,this.to=e,this.mode=i}get type(){return"rg"}}class YE{constructor(t,e){this.from=t,this.to=e}get type(){return"rk"}}class JE{constructor(t,e){this.from=t,this.to=e}get type(){return"rh"}}class tT{constructor(t,e){this.from=t,this.to=e}get type(){return"rj"}}class eT{constructor(t,e){this.value=t,this.to=e}get type(){return"re"}}class iT{constructor(t,e,i,n,s,r){this.res=t,this.alias=e,this.props=i,this.projections=n,this.containerless=s,this.captures=r,this.auSlot=null}get type(){return"ra"}}class nT{constructor(t,e,i){this.res=t,this.alias=e,this.props=i}get type(){return"rb"}}class sT{constructor(t,e,i,n){this.def=t,this.res=e,this.alias=i,this.props=n}get type(){return"rc"}}class rT{constructor(t,e){this.instructions=t,this.toBindingContext=e}get type(){return"rd"}}class oT{constructor(t,e){this.from=t,this.to=e}get type(){return"ri"}}class aT{constructor(t,e){this.from=t,this.strict=e}get type(){return"ha"}}class lT{constructor(t,e,i,n){this.from=t,this.to=e,this.preventDefault=i,this.strategy=n}get type(){return"hb"}}class cT{constructor(t,e){this.value=t,this.to=e}get type(){return"he"}}class hT{constructor(t){this.value=t,this.type="hf"}}class uT{constructor(t){this.value=t,this.type="hg"}}class dT{constructor(t,e,i){this.attr=t,this.from=e,this.to=i}get type(){return"hc"}}class pT{get type(){return"hs"}}class fT{constructor(t){this.instructions=t}get type(){return"hp"}}const vT=ib.createInterface("ITemplateCompiler"),gT=ib.createInterface("IRenderer");function mT(t){return function(e){return e.register=function(t){Ib.singleton(gT,this).register(t)},hC(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function bT(t,e,i){return cC(e)?t.parse(e,i):e}function yT(t){return null!=t.viewModel?t.viewModel:t}let wT=class{render(t,e,i){const n=yT(e);void 0!==n.$observers&&void 0!==n.$observers[i.to]?n.$observers[i.to].setValue(i.value,2):n[i.to]=i.value}};wT=WS([mT("re")],wT);let xT=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[F$,KC]}render(t,e,i){let n,s,r,o;const a=i.res,l=i.projections,c=t.container;if("string"==typeof a){if(n=c.find(l$,a),null==n)throw new Error(`AUR0752:${a}@${t.name}`)}else n=a;const h=i.containerless||n.containerless?IE(e):null,u=function(t,e,i,n,s,r){const o=e.container.createChild();return o.registerResolver(t.HTMLElement,o.registerResolver(t.Element,o.registerResolver(CE,new Ob("ElementResolver",i)))),o.registerResolver(iE,new Ob(WT,e)),o.registerResolver(_E,new Ob(KT,n)),o.registerResolver($E,null==s?XT:new GT(s)),o.registerResolver(O$,YT),o.registerResolver(WE,null==r?JT:new Ob(ZT,r)),o}(this.p,t,e,i,h,null==l?void 0:new KE(Object.keys(l)));s=n.Type,r=u.invoke(s),u.registerResolver(s,new Ob(n.key,r)),o=W$.$el(u,r,e,i,n,h),SE(e,n.key,o);const d=this.r.renderers,p=i.props,f=p.length;let v,g=0;for(;f>g;)v=p[g],d[v.type].render(t,o,v),++g;t.addChild(o)}};xT=WS([mT("ra")],xT);let kT=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[F$,KC]}render(t,e,i){let n,s=t.container;if("string"==typeof i.res){if(n=s.find(KA,i.res),null==n)throw new Error(`AUR0753:${i.res}@${t.name}`)}else n=i.res;const r=QT(this.p,n,t,e,i,void 0,void 0),o=W$.$attr(r.ctn,r.vm,e,n);SE(e,n.key,o);const a=this.r.renderers,l=i.props,c=l.length;let h,u=0;for(;c>u;)h=l[u],a[h.type].render(t,o,h),++u;t.addChild(o)}};kT=WS([mT("rb")],kT);let ST=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[F$,KC]}render(t,e,i){var n,s;let r,o=t.container;if("string"==typeof i.res){if(r=o.find(KA,i.res),null==r)throw new Error(`AUR0754:${i.res}@${t.name}`)}else r=i.res;const a=this.r.getViewFactory(i.def,o),l=IE(e),c=QT(this.p,r,t,e,i,a,l),h=W$.$attr(c.ctn,c.vm,e,r);SE(l,r.key,h),null===(s=(n=c.vm).link)||void 0===s||s.call(n,t,h,e,i);const u=this.r.renderers,d=i.props,p=d.length;let f,v=0;for(;p>v;)f=d[v],u[f.type].render(t,h,f),++v;t.addChild(h)}};ST=WS([mT("rc")],ST);let CT=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,i){e.remove();const n=i.instructions,s=i.toBindingContext,r=t.container,o=n.length;let a,l,c,h=0;for(;o>h;)a=n[h],l=bT(this.ep,a.from,8),c=new mA(l,a.to,this.oL,r,s),t.addBinding(38962===l.$kind?PT(c,l,r):c),++h}};CT.inject=[zx,MS],CT=WS([mT("rd")],CT);let AT=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,i){const n=bT(this.ep,i.from,12),s=new YC(n,yT(e),i.to,this.oL,t.container);t.addBinding(38962===n.$kind?PT(s,n,t.container):s)}};AT.inject=[zx,MS],AT=WS([mT("rh")],AT);let $T=class{constructor(t){this.ep=t}render(t,e,i){const n=bT(this.ep,i.from,8),s=new AA(n,function(t,e){if("element"===e)return t;switch(e){case"controller":return l$.for(t);case"view":throw new Error("AUR0750");case"view-model":return l$.for(t).viewModel;default:{const i=KA.for(t,e);if(void 0!==i)return i.viewModel;const n=l$.for(t,{name:e});if(void 0===n)throw new Error(`AUR0751:${e}`);return n.viewModel}}}(e,i.to),t.container);t.addBinding(38962===n.$kind?PT(s,n,t.container):s)}};$T.inject=[zx],$T=WS([mT("rj")],$T);let ET=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const n=t.container,s=bT(this.ep,i.from,1),r=new fA(this.oL,s,yT(e),i.to,xw.toView,n,this.p.domWriteQueue),o=r.partBindings,a=o.length;let l,c=0;for(;a>c;++c)l=o[c],38962===l.sourceExpression.$kind&&(o[c]=PT(l,l.sourceExpression,n));t.addBinding(r)}};ET.inject=[zx,MS,KC],ET=WS([mT("rf")],ET);let TT=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const n=bT(this.ep,i.from,8),s=new SA(n,yT(e),i.to,i.mode,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===n.$kind?PT(s,n,t.container):s)}};TT.inject=[zx,MS,KC],TT=WS([mT("rg")],TT);let RT=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const n=bT(this.ep,i.from,2),s=new SA(n,yT(e),i.to,xw.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===n.iterable.$kind?PT(s,n.iterable,t.container):s)}};RT.inject=[zx,MS,KC],RT=WS([mT("rk")],RT);let IT=0;const OT=[];function PT(t,e,i){for(;e instanceof Ky;)OT[IT++]=e,e=e.expression;for(;IT>0;){const e=OT[--IT],n=i.get(e.behaviorKey);n instanceof Ly&&(t=n.construct(t,e))}return OT.length=0,t}let LT=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const n=t.container,s=e.nextSibling,r=e.parentNode,o=this.p.document,a=bT(this.ep,i.from,1),l=a.parts,c=a.expressions,h=c.length;let u,d,p=0,f=l[0];for(""!==f&&r.insertBefore(o.createTextNode(f),s);h>p;++p)d=c[p],u=new gA(d,r.insertBefore(o.createTextNode(""),s),n,this.oL,this.p,i.strict),t.addBinding(38962===d.$kind?PT(u,d,n):u),f=l[p+1],""!==f&&r.insertBefore(o.createTextNode(f),s);"AU-M"===e.nodeName&&e.remove()}};LT.inject=[zx,MS,KC],LT=WS([mT("ha")],LT);const MT=ib.createInterface("IListenerBehaviorOptions",(t=>t.singleton(jT)));class jT{constructor(){this.expAsHandler=!1}}let UT=class{constructor(t,e,i,n){this.ep=t,this.Jt=e,this.p=i,this.Qt=n}render(t,e,i){const n=bT(this.ep,i.from,4),s=new NE(this.p,i.to,n,e,this.Jt,t.container,new BE(i.preventDefault,i.strategy,this.Qt.expAsHandler));t.addBinding(38962===n.$kind?PT(s,n,t.container):s)}};UT.inject=[zx,zE,KC,MT],UT=WS([mT("hb")],UT);let BT=class{render(t,e,i){e.setAttribute(i.to,i.value)}};BT=WS([mT("he")],BT);let NT=class{render(t,e,i){!function(t,e){const i=e.length;let n=0;for(let s=0;s<i;++s)32===e.charCodeAt(s)?(s!==n&&t.add(e.slice(n,s)),n=s+1):s+1===i&&t.add(e.slice(n))}(e.classList,i.value)}};NT=WS([mT("hf")],NT);let VT=class{render(t,e,i){e.style.cssText+=i.value}};VT=WS([mT("hg")],VT);let FT=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const n=bT(this.ep,i.from,8),s=new SA(n,e.style,i.to,xw.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===n.$kind?PT(s,n,t.container):s)}};FT.inject=[zx,MS,KC],FT=WS([mT("hd")],FT);let DT=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,i){const n=bT(this.ep,i.from,8),s=new uA(n,e,i.attr,i.to,xw.toView,this.oL,t.container);t.addBinding(38962===n.$kind?PT(s,n,t.container):s)}};DT.inject=[zx,MS],DT=WS([mT("hc")],DT);let HT=class{constructor(t,e){this.ti=t,this.r=e}static get inject(){return[vT,F$]}render(t,e,i){const n=t.container.get(nE),s=this.r.renderers,r=t=>{let e=t,i=n;for(;null!=i&&e>0;)i=i.parent,--e;if(null==i)throw new Error("No scope context for spread binding.");return i},o=i=>{var n,a;const l=r(i),c=qT(l),h=this.ti.compileSpread(l.controller.definition,null!==(a=null===(n=l.instruction)||void 0===n?void 0:n.captures)&&void 0!==a?a:jb,l.controller.container,e);let u;for(u of h)switch(u.type){case"hs":o(i+1);break;case"hp":s[u.instructions.type].render(c,l$.for(e),u.instructions);break;default:s[u.type].render(c,e,u)}t.addBinding(c)};o(0)}};HT=WS([mT("hs")],HT);class zT{constructor(t,e){this.ii=t,this.ei=e,this.interceptor=this,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}$bind(t,e){var i;if(this.isBound)return;this.isBound=!0;const n=this.$scope=null!==(i=this.ei.controller.scope.parentScope)&&void 0!==i?i:void 0;if(null==n)throw new Error("Invalid spreading. Context scope is null/undefined");this.ii.forEach((e=>e.$bind(t,n)))}$unbind(t){this.ii.forEach((e=>e.$unbind(t))),this.isBound=!1}addBinding(t){this.ii.push(t)}addChild(t){if(1!==t.vmKind)throw new Error("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}}const qT=t=>new zT([],t),WT="IController",KT="IInstruction",ZT="IAuSlotsInfo";class _T{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw new Error("AUR7055");if(!cC(t.name)||0===t.name.length)throw new Error("AUR0756");return t}}function QT(t,e,i,n,s,r,o,a){const l=i.container.createChild();return l.registerResolver(t.HTMLElement,l.registerResolver(t.Element,l.registerResolver(CE,new Ob("ElementResolver",n)))),i=i instanceof W$?i:i.ctrl,l.registerResolver(iE,new Ob(WT,i)),l.registerResolver(_E,new Ob(KT,s)),l.registerResolver($E,null==o?XT:new Ob("IRenderLocation",o)),l.registerResolver(O$,null==r?YT:new _T(r)),l.registerResolver(WE,null==a?JT:new Ob(ZT,a)),{vm:l.invoke(e.Type),ctn:l}}class GT{constructor(t){this.l=t}get name(){return"IRenderLocation"}get $isResolver(){return!0}resolve(){return this.l}}const XT=new GT(null),YT=new _T(null),JT=new Ob(ZT,new KE(jb));var tR;function eR(t){return function(e){return oR.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(tR||(tR={}));class iR{constructor(t,e,i,n,s){this.Type=t,this.name=e,this.aliases=i,this.key=n,this.type=s}static create(t,e){let i,n;return cC(t)?(i=t,n={name:i}):(i=t.name,n=t),new iR(e,jm(rR(e,"name"),i),Mm(rR(e,"aliases"),n.aliases,e.aliases),sR(i),jm(rR(e,"type"),n.type,e.type,null))}register(t){const{Type:e,key:i,aliases:n}=this;Ib.singleton(i,e).register(t),Ib.aliasTo(i,e).register(t),Cy(n,oR,i,t)}}const nR=JS("binding-command"),sR=t=>`${nR}:${t}`,rR=(t,e)=>ZS(YS(e),t),oR=Object.freeze({name:nR,keyFrom:sR,define(t,e){const i=iR.create(t,e);return QS(nR,i,i.Type),QS(nR,i,i),tC(e,nR),i.Type},getAnnotation:rR});let aR=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"one-time"}build(t){var e;let i=t.attr.target,n=t.attr.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:$m(i):(""===n&&1===t.def.type&&(n=$m(i)),i=t.bindable.property),new XE(this.ep.parse(n,8),i,xw.oneTime)}};aR.inject=[QC,zx],aR=WS([eR("one-time")],aR);let lR=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"to-view"}build(t){var e;let i=t.attr.target,n=t.attr.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:$m(i):(""===n&&1===t.def.type&&(n=$m(i)),i=t.bindable.property),new XE(this.ep.parse(n,8),i,xw.toView)}};lR.inject=[QC,zx],lR=WS([eR("to-view")],lR);let cR=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"from-view"}build(t){var e;const i=t.attr;let n=i.target,s=i.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:$m(n):(""===s&&1===t.def.type&&(s=$m(n)),n=t.bindable.property),new XE(this.ep.parse(s,8),n,xw.fromView)}};cR.inject=[QC,zx],cR=WS([eR("from-view")],cR);let hR=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"two-way"}build(t){var e;const i=t.attr;let n=i.target,s=i.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:$m(n):(""===s&&1===t.def.type&&(s=$m(n)),n=t.bindable.property),new XE(this.ep.parse(s,8),n,xw.twoWay)}};hR.inject=[QC,zx],hR=WS([eR("two-way")],hR);let uR=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"bind"}build(t){var e;const i=t.attr,n=t.bindable;let s,r,o=i.target,a=i.rawValue;return null==n?(r=this.m.isTwoWay(t.node,o)?xw.twoWay:xw.toView,o=null!==(e=this.m.map(t.node,o))&&void 0!==e?e:$m(o)):(""===a&&1===t.def.type&&(a=$m(o)),s=t.def.defaultBindingMode,r=n.mode===xw.default||null==n.mode?null==s||s===xw.default?xw.toView:s:n.mode,o=n.property),new XE(this.ep.parse(a,8),o,r)}};uR.inject=[QC,zx],uR=WS([eR("bind")],uR);let dR=class{constructor(t){this.type=0,this.ep=t}get name(){return"call"}build(t){const e=null===t.bindable?$m(t.attr.target):t.bindable.property;return new JE(this.ep.parse(t.attr.rawValue,12),e)}};dR.inject=[zx],dR=WS([eR("call")],dR);let pR=class{constructor(t){this.type=0,this.ep=t}get name(){return"for"}build(t){const e=null===t.bindable?$m(t.attr.target):t.bindable.property;return new YE(this.ep.parse(t.attr.rawValue,2),e)}};pR.inject=[zx],pR=WS([eR("for")],pR);let fR=class{constructor(t){this.type=1,this.ep=t}get name(){return"trigger"}build(t){return new lT(this.ep.parse(t.attr.rawValue,4),t.attr.target,!0,Cw.none)}};fR.inject=[zx],fR=WS([eR("trigger")],fR);let vR=class{constructor(t){this.type=1,this.ep=t}get name(){return"delegate"}build(t){return new lT(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Cw.bubbling)}};vR.inject=[zx],vR=WS([eR("delegate")],vR);let gR=class{constructor(t){this.type=1,this.ep=t}get name(){return"capture"}build(t){return new lT(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Cw.capturing)}};gR.inject=[zx],gR=WS([eR("capture")],gR);let mR=class{constructor(t){this.type=1,this.ep=t}get name(){return"attr"}build(t){return new dT(t.attr.target,this.ep.parse(t.attr.rawValue,8),t.attr.target)}};mR.inject=[zx],mR=WS([eR("attr")],mR);let bR=class{constructor(t){this.type=1,this.ep=t}get name(){return"style"}build(t){return new dT("style",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};bR.inject=[zx],bR=WS([eR("style")],bR);let yR=class{constructor(t){this.type=1,this.ep=t}get name(){return"class"}build(t){return new dT("class",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};yR.inject=[zx],yR=WS([eR("class")],yR);let wR=class{constructor(t){this.type=1,this.ep=t}get name(){return"ref"}build(t){return new tT(this.ep.parse(t.attr.rawValue,8),t.attr.target)}};wR.inject=[zx],wR=WS([eR("ref")],wR);let xR=class{constructor(){this.type=1}get name(){return"...$attrs"}build(t){return new pT}};xR=WS([eR("...$attrs")],xR);const kR=ib.createInterface("ITemplateElementFactory",(t=>t.singleton(CR))),SR={};class CR{constructor(t){this.p=t,this.si=t.document.createElement("template")}createTemplate(t){var e;if(cC(t)){let e=SR[t];if(void 0===e){const i=this.si;i.innerHTML=t;const n=i.content.firstElementChild;null==n||"TEMPLATE"!==n.nodeName||null!=n.nextElementSibling?(this.si=this.p.document.createElement("template"),e=i):(i.content.removeChild(n),e=n),SR[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.p.document.createElement("template");return e.content.appendChild(t),e}return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.cloneNode(!0)}}CR.inject=[KC];class AR{constructor(t,e,i,n,s,r){this.hasSlot=!1,this.Ci=nC();const o=null!==n;this.c=e,this.root=null===s?this:s,this.def=t,this.ci=i,this.parent=n,this.ni=o?n.ni:e.get(kR),this.di=o?n.di:e.get(LC),this.ep=o?n.ep:e.get(zx),this.m=o?n.m:e.get(QC),this.Ut=o?n.Ut:e.get(Kb),this.p=o?n.p:e.get(KC),this.localEls=o?n.localEls:new Set,this.rows=null!=r?r:[]}ki(t){var e,i;(null!==(e=(i=this.root).deps)&&void 0!==e?e:i.deps=[]).push(t),this.root.c.register(t)}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}hi(t){return this.c.find(l$,t)}ui(t){return this.c.find(KA,t)}xi(t){return new AR(this.def,this.c,this.ci,this,this.root,t)}ai(t){if(this.root!==this)return this.root.ai(t);const e=t.command;if(null===e)return null;let i=this.Ci[e];if(void 0===i){if(i=this.c.create(oR,e),null===i)throw new Error(`AUR0713:${e}`);this.Ci[e]=i}return i}}function $R(t){const e=t.length;let i=0,n=0;for(;e>n;){if(i=t.charCodeAt(n),92===i)++n;else{if(58===i)return!0;if(36===i&&123===t.charCodeAt(n+1))return!1}++n}return!1}function ER(){IR.node=IR.attr=IR.bindable=IR.def=null}const TR={projections:null},RR={name:"unnamed"},IR={node:null,attr:null,bindable:null,def:null},OR=Object.assign(nC(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),PR={checkbox:1,radio:1},LR=new WeakMap;class MR{constructor(t,e,i){this.attrs=t,this.bindables=e,this.primary=i}static from(t,e){let i=LR.get(t);if(null==i){const n=t.bindables,s=nC(),r=e?void 0===t.defaultBindingMode?xw.default:t.defaultBindingMode:xw.default;let o,a,l,c,h=!1;for(a in n){if(o=n[a],c=o.attribute,!0===o.primary){if(h)throw new Error(`AUR0714:${t.name}`);h=!0,l=o}else h||null!=l||(l=o);s[c]=gC.create(a,t.Type,o)}null==o&&e&&(l=s.value=gC.create("value",t.Type,{mode:r})),LR.set(t,i=new MR(s,n,l))}return i}}var jR;!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(jR||(jR={}));const UR=Object.freeze(["property","attribute","mode"]),BR="as-custom-element";function NR(t,e){const i=t.getAttribute(BR);if(null===i||""===i)throw new Error("AUR0715");if(e.has(i))throw new Error(`AUR0716:${i}`);return e.add(i),t.removeAttribute(BR),i}function VR(t){switch(t.getAttribute("mode")){case"oneTime":return xw.oneTime;case"toView":return xw.toView;case"fromView":return xw.fromView;case"twoWay":return xw.twoWay;default:return xw.default}}const FR=ib.createInterface("ITemplateCompilerHooks"),DR=new WeakMap,HR=JS("compiler-hooks");Object.freeze({name:HR,define(t){let e=DR.get(t);return void 0===e&&(DR.set(t,e=new zR(t)),QS(HR,e,t),tC(t,HR)),t}});class zR{constructor(t){this.Type=t}get name(){return""}register(t){t.register(Ib.singleton(FR,this.Type))}}const qR=l$.generateName,WR="default",KR="au-slot";class ZR{constructor(t){this.mode=t,this.Ai=new Map}bind(t,e,i){this.Ai.set(i,i.mode),i.mode=this.mode}unbind(t,e,i){i.mode=this.Ai.get(i),this.Ai.delete(i)}}class _R extends ZR{constructor(){super(xw.oneTime)}}class QR extends ZR{constructor(){super(xw.toView)}}class GR extends ZR{constructor(){super(xw.fromView)}}class XR extends ZR{constructor(){super(xw.twoWay)}}Oy("oneTime")(_R),Oy("toView")(QR),Oy("fromView")(GR),Oy("twoWay")(XR);class YR extends My{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(Nb).taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask((()=>this.binding.callSource(t)))}handleChange(t,e,i){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(t,e,i)}updateSource(t,e){this.queueTask((()=>this.binding.updateSource(t,e)))}queueTask(t){const e=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,t())),this.opts),null==e||e.cancel()}$bind(t,e){if(null!==this.firstArg){const i=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=isNaN(i)?200:i}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.binding.$unbind(t)}}Oy("debounce")(YR);class JR{constructor(t){this.Yt=new Map,this.Ri=t}bind(t,e,i,...n){if(!("handleChange"in i))throw new Error("AUR0817");if(0===n.length)throw new Error("AUR0818");let s;for(s of(this.Yt.set(i,n),n))this.Ri.addSignalListener(s,i)}unbind(t,e,i){const n=this.Yt.get(i);let s;for(s of(this.Yt.delete(i),n))this.Ri.removeSignalListener(s,i)}}JR.inject=[Ty],Oy("signal")(JR);class tI extends My{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.p=t.locator.get(Nb),this.Si=this.p.taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.Ei((()=>this.binding.callSource(t)))}handleChange(t,e,i){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.p.performanceNow()),this.binding.handleChange(t,e,i)}updateSource(t,e){this.Ei((()=>this.binding.updateSource(t,e)))}Ei(t){const e=this.opts,i=this.p,n=this.lastCall+e.delay-i.performanceNow();if(n>0){const s=this.task;e.delay=n,this.task=this.Si.queueTask((()=>{this.lastCall=i.performanceNow(),this.task=null,e.delay=this.delay,t()}),e),null==s||s.cancel()}else this.lastCall=i.performanceNow(),t()}$bind(t,e){if(null!==this.firstArg){const i=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=this.delay=isNaN(i)?200:i}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,super.$unbind(t)}}Oy("throttle")(tI);const eI=new class{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,i,n){null==t?i.removeAttribute(n):i.setAttribute(n,t)}};class iI{bind(t,e,i){i.targetObserver=eI}unbind(t,e,i){}}function nI(t){const e=t.composedPath()[0];if(this.target===e)return this.selfEventCallSource(t)}Oy("attr")(iI);class sI{bind(t,e,i){if(!i.callSource||!i.targetEvent)throw new Error("AUR0801");i.selfEventCallSource=i.callSource,i.callSource=nI}unbind(t,e,i){i.callSource=i.selfEventCallSource,i.selfEventCallSource=null}}Oy("self")(sI);const rI=nC();class oI{constructor(t){this.ns=t,this.type=6}static forNs(t){var e;return null!==(e=rI[t])&&void 0!==e?e:rI[t]=new oI(t)}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,i,n){null==t?i.removeAttributeNS(this.ns,n):i.setAttributeNS(this.ns,n,t)}}function aI(t,e){return t===e}class lI{constructor(t,e,i,n){this.handler=i,this.type=7,this.v=void 0,this.ov=void 0,this.Bi=void 0,this.Ii=void 0,this.f=0,this.o=t,this.oL=n}getValue(){return this.v}setValue(t,e){const i=this.v;t!==i&&(this.v=t,this.ov=i,this.f=e,this.Ti(),this.Di(),this.queue.add(this))}handleCollectionChange(t,e){this.Di()}handleChange(t,e,i){this.Di()}Di(){const t=this.v,e=this.o,i=sC.call(e,"model")?e.model:e.value,n="radio"===e.type,s=void 0!==e.matcher?e.matcher:aI;if(n)e.checked=!!s(t,i);else if(!0===t)e.checked=!0;else{let n=!1;if(t instanceof Array)n=-1!==t.findIndex((t=>!!s(t,i)));else if(t instanceof Set){for(const e of t)if(s(e,i)){n=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(s(t,i)&&!0===r){n=!0;break}}e.checked=n}}handleEvent(){let t=this.ov=this.v;const e=this.o,i=sC.call(e,"model")?e.model:e.value,n=e.checked,s=void 0!==e.matcher?e.matcher:aI;if("checkbox"===e.type){if(t instanceof Array){const e=t.findIndex((t=>!!s(t,i)));return void(n&&-1===e?t.push(i):n||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===s(e,i)){r=e;break}return void(n&&r===e?t.add(i):n||r===e||t.delete(r))}if(t instanceof Map){let e;for(const n of t){const t=n[0];if(!0===s(t,i)){e=t;break}}return void t.set(e,n)}t=n}else{if(!n)return;t=i}this.v=t,this.queue.add(this)}start(){this.handler.subscribe(this.o,this),this.Ti()}stop(){var t,e;this.handler.dispose(),null===(t=this.Bi)||void 0===t||t.unsubscribe(this),this.Bi=void 0,null===(e=this.Ii)||void 0===e||e.unsubscribe(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.start()}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.stop()}flush(){cI=this.ov,this.ov=this.v,this.subs.notify(this.v,cI,this.f)}Ti(){var t,e,i,n,s,r,o;const a=this.o;null===(s=null!==(t=this.Ii)&&void 0!==t?t:this.Ii=null!==(i=null===(e=a.$observers)||void 0===e?void 0:e.model)&&void 0!==i?i:null===(n=a.$observers)||void 0===n?void 0:n.value)||void 0===s||s.subscribe(this),null===(r=this.Bi)||void 0===r||r.unsubscribe(this),this.Bi=void 0,"checkbox"===a.type&&(null===(o=this.Bi=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))||void 0===o||o.subscribe(this))}}let cI;Tw(lI),Mw(lI);const hI={childList:!0,subtree:!0,characterData:!0};function uI(t,e){return t===e}class dI{constructor(t,e,i,n){this.type=7,this.v=void 0,this.ov=void 0,this.H=!1,this.Pi=void 0,this.$i=void 0,this.iO=!1,this.o=t,this.oL=n,this.handler=i}getValue(){return this.iO?this.v:this.o.multiple?function(t){const e=[];if(0===t.length)return e;const i=t.length;let n,s=0;for(;i>s;)n=t[s],n.selected&&(e[e.length]=sC.call(n,"model")?n.model:n.value),++s;return e}(this.o.options):this.o.value}setValue(t,e){this.ov=this.v,this.v=t,this.H=t!==this.ov,this.Oi(t instanceof Array?t:null),0==(64&e)&&this.K()}K(){this.H&&(this.H=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var t;const e=this.v,i=this.o,n=Array.isArray(e),s=null!==(t=i.matcher)&&void 0!==t?t:uI,r=i.options;let o=r.length;for(;o-- >0;){const t=r[o],i=sC.call(t,"model")?t.model:t.value;t.selected=n?-1!==e.findIndex((t=>!!s(i,t))):!!s(i,e)}}syncValue(){const t=this.o,e=t.options,i=e.length,n=this.v;let s=0;if(t.multiple){if(!(n instanceof Array))return!0;let r;const o=t.matcher||uI,a=[];for(;s<i;)r=e[s],r.selected&&a.push(sC.call(r,"model")?r.model:r.value),++s;let l;for(s=0;s<n.length;)l=n[s],-1===a.findIndex((t=>!!o(l,t)))?n.splice(s,1):++s;for(s=0;s<a.length;)l=a[s],-1===n.findIndex((t=>!!o(l,t)))&&n.push(l),++s;return!1}let r,o=null;for(;s<i;){if(r=e[s],r.selected){o=sC.call(r,"model")?r.model:r.value;break}++s}return this.ov=this.v,this.v=o,!0}Li(){(this.$i=new this.o.ownerDocument.defaultView.MutationObserver(this.qi.bind(this))).observe(this.o,hI),this.Oi(this.v instanceof Array?this.v:null),this.iO=!0}Ui(){var t;this.$i.disconnect(),null===(t=this.Pi)||void 0===t||t.unsubscribe(this),this.$i=this.Pi=void 0,this.iO=!1}Oi(t){var e;if(null===(e=this.Pi)||void 0===e||e.unsubscribe(this),this.Pi=void 0,null!=t){if(!this.o.multiple)throw new Error("AUR0654");(this.Pi=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}qi(t){this.syncOptions(),this.syncValue()&&this.queue.add(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.Li())}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.handler.dispose(),this.Ui())}flush(){pI=this.ov,this.ov=this.v,this.subs.notify(this.v,pI,0)}}let pI,fI;Tw(dI),Mw(dI);class vI{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.styles={},this.version=0,this.H=!1}getValue(){return this.obj.style.cssText}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}_i(t){const e=[],i=/url\([^)]+$/;let n,s,r,o,a=0,l="";for(;a<t.length;)n=t.indexOf(";",a),-1===n&&(n=t.length),l+=t.substring(a,n),a=n+1,i.test(l)?l+=";":(s=l.indexOf(":"),r=l.substring(0,s).trim(),o=l.substring(s+1).trim(),e.push([r,o]),l="");return e}Fi(t){let e,i;const n=[];for(i in t)if(e=t[i],null!=e)if(cC(e)){if(i.startsWith("--")){n.push([i,e]);continue}n.push([Tm(i),e])}else n.push(...this.Vi(e));return n}Mi(t){const e=t.length;if(e>0){const i=[];let n=0;for(;e>n;++n)i.push(...this.Vi(t[n]));return i}return jb}Vi(t){return cC(t)?this._i(t):t instanceof Array?this.Mi(t):t instanceof Object?this.Fi(t):jb}K(){if(this.H){this.H=!1;const t=this.value,e=this.styles,i=this.Vi(t);let n,s,r,o,a=this.version;this.ov=t;let l=0;const c=i.length;for(;l<c;++l)s=i[l],r=s[0],o=s[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(n in a-=1,e)sC.call(e,n)&&e[n]===a&&this.obj.style.removeProperty(n)}}setProperty(t,e){let i="";null!=e&&lC(e.indexOf)&&e.includes("!important")&&(i="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,i)}bind(t){this.value=this.ov=this.obj.style.cssText}}class gI{constructor(t,e,i){this.handler=i,this.type=7,this.v="",this.ov="",this.H=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.H=!0,this.handler.config.readonly||0!=(64&e)||this.K(e))}K(t){var e;this.H&&(this.H=!1,this.o[this.k]=null!==(e=this.v)&&void 0!==e?e:this.handler.config.default,0==(2&t)&&this.queue.add(this))}handleEvent(){this.ov=this.v,this.v=this.o[this.k],this.ov!==this.v&&(this.H=!1,this.queue.add(this))}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.v=this.ov=this.o[this.k])}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.handler.dispose()}flush(){fI=this.ov,this.ov=this.v,this.subs.notify(this.v,fI,0)}}Tw(gI),Mw(gI);const mI="http://www.w3.org/1999/xlink",bI="http://www.w3.org/XML/1998/namespace",yI="http://www.w3.org/2000/xmlns/",wI=Object.assign(nC(),{"xlink:actuate":["actuate",mI],"xlink:arcrole":["arcrole",mI],"xlink:href":["href",mI],"xlink:role":["role",mI],"xlink:show":["show",mI],"xlink:title":["title",mI],"xlink:type":["type",mI],"xml:lang":["lang",bI],"xml:space":["space",bI],xmlns:["xmlns",yI],"xmlns:xlink":["xlink",yI]}),xI=new RS;xI.type=6;class kI{constructor(t){var e;this.type=null!==(e=t.type)&&void 0!==e?e:gI,this.events=t.events,this.readonly=t.readonly,this.default=t.default}}class SI{constructor(t,e,i,n){this.locator=t,this.platform=e,this.dirtyChecker=i,this.svgAnalyzer=n,this.allowDirtyCheck=!0,this.ji=nC(),this.Ni=nC(),this.Wi=nC(),this.Hi=nC();const s=["change","input"],r={events:s,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:s,default:0},checked:{type:lI,events:s},files:{events:s,readonly:!0}},SELECT:{value:{type:dI,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){Ib.aliasTo(jS,SI).register(t),Ib.singleton(jS,SI).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,i){var n,s;const r=this.ji;let o;if(cC(t))o=null!==(n=r[t])&&void 0!==n?n:r[t]=nC(),null==o[e]?o[e]=new kI(i):CI(t,e);else for(const i in t){o=null!==(s=r[i])&&void 0!==s?s:r[i]=nC();const n=t[i];for(e in n)null==o[e]?o[e]=new kI(n[e]):CI(i,e)}}useConfigGlobal(t,e){const i=this.Ni;if("object"==typeof t)for(const e in t)null==i[e]?i[e]=new kI(t[e]):CI("*",e);else null==i[t]?i[t]=new kI(e):CI("*",t)}getAccessor(t,e,i){var n;if(e in this.Hi||e in(null!==(n=this.Wi[t.tagName])&&void 0!==n?n:Ub))return this.getObserver(t,e,i);switch(e){case"src":case"href":case"role":return eI;default:{const i=wI[e];return void 0!==i?oI.forNs(i[1]):oC(t,e,this.svgAnalyzer)?eI:xI}}}overrideAccessor(t,e){var i,n,s,r;let o;if(cC(t))o=null!==(i=(s=this.Wi)[t])&&void 0!==i?i:s[t]=nC(),o[e]=!0;else for(const e in t)for(const i of t[e])o=null!==(n=(r=this.Wi)[e])&&void 0!==n?n:r[e]=nC(),o[i]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Hi[e]=!0}getObserver(t,e,i){var n,s;switch(e){case"class":return new c$(t);case"css":case"style":return new vI(t)}const r=null!==(s=null===(n=this.ji[t.tagName])||void 0===n?void 0:n[e])&&void 0!==s?s:this.Ni[e];if(null!=r)return new r.type(t,e,new HE(r),i,this.locator);const o=wI[e];if(void 0!==o)return oI.forNs(o[1]);if(oC(t,e,this.svgAnalyzer))return eI;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw new Error(`AUR0652:${String(e)}`)}return new OS(t,e)}}function CI(t,e){throw new Error(`AUR0653:${String(e)}@${t}`)}SI.inject=[ob,KC,SS,ZC];class AI{constructor(t){this.oL=t}bind(t,e,i,...n){if(0===n.length)throw new Error("AUR0802");if(i.mode!==xw.twoWay&&i.mode!==xw.fromView)throw new Error("AUR0803");const s=this.oL.getObserver(i.target,i.targetProperty);if(!s.handler)throw new Error("AUR0804");i.targetObserver=s;const r=s.handler;s.originalHandler=r,s.handler=new HE(new kI({default:r.config.default,events:n,readonly:r.config.readonly}))}unbind(t,e,i){i.targetObserver.handler.dispose(),i.targetObserver.handler=i.targetObserver.originalHandler,i.targetObserver.originalHandler=null}}AI.inject=[MS],Oy("updateTrigger")(AI);class $I{constructor(t,e){this.zi=t,this.p=e,this.Gi=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Xi():this.Gi=!0}attached(){this.Gi&&(this.Gi=!1,this.Xi()),this.zi.addEventListener("focus",this),this.zi.addEventListener("blur",this)}afterDetachChildren(){const t=this.zi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Ki||(this.value=!1)}Xi(){const t=this.zi,e=this.Ki,i=this.value;i&&!e?t.focus():!i&&e&&t.blur()}get Ki(){return this.zi===this.p.document.activeElement}}$I.inject=[CE,KC],WS([dC({mode:xw.twoWay})],$I.prototype,"value",void 0),FA("focus")($I);let EI=class{constructor(t,e,i){this.el=t,this.p=e,this.Yi=!1,this.Zi=null,this.$val="",this.$prio="",this.update=()=>{this.Zi=null,Boolean(this.value)!==this.Ji&&(this.Ji===this.Qi?(this.Ji=!this.Qi,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Ji=this.Qi,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.Ji=this.Qi="hide"!==i.alias}binding(){this.Yi=!0,this.update()}detaching(){var t;this.Yi=!1,null===(t=this.Zi)||void 0===t||t.cancel(),this.Zi=null}valueChanged(){this.Yi&&null===this.Zi&&(this.Zi=this.p.domWriteQueue.queueTask(this.update))}};WS([dC],EI.prototype,"value",void 0),EI=WS([KS(0,CE),KS(1,KC),KS(2,_E)],EI),function(...t){return function(e){const i=xy("aliases"),n=by(i,e);void 0===n?wy(i,t,e):n.push(...t)}}("hide")(EI),FA("show")(EI);class TI{constructor(t,e,i){this.id=Om("au$component"),this.strict=!1,this.p=i,this.te=i.document.createElement("div"),this.view=t.create(),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)TE.set(t,e);else{const i=t.childNodes;for(let t=0,n=i.length;t<n;++t)TE.set(i[t],e)}}(this.view.nodes,e)}attaching(t,e,i){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const n=this.te=this.ie();return this.view.setHost(n),this.ee(t,n,i)}detaching(t,e,i){return this.se(t,this.te,i)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.te,i=this.te=this.ie();if(e===i)return;this.view.setHost(i);const n=Vm(this.se(null,i,t.flags),(()=>this.ee(null,i,t.flags)));n instanceof Promise&&n.catch((t=>{throw t}))}ee(t,e,i){const{activating:n,callbackContext:s,view:r}=this;return r.setHost(e),Vm(null==n?void 0:n.call(s,e,r),(()=>this.ne(t,e,i)))}ne(t,e,i){const{$controller:n,view:s}=this;return null!==t?Vm(s.activate(null!=t?t:s,n,i,n.scope),(()=>this.re(e))):(s.nodes.appendTo(e),this.re(e))}re(t){const{activated:e,callbackContext:i,view:n}=this;return null==e?void 0:e.call(i,t,n)}se(t,e,i){const{deactivating:n,callbackContext:s,view:r}=this;return Vm(null==n?void 0:n.call(s,e,r),(()=>this.oe(t,e,i)))}oe(t,e,i){const{$controller:n,view:s}=this;return null!==t?Vm(s.deactivate(t,n,i),(()=>this.le(e))):(s.nodes.remove(),this.le(e))}le(t){const{deactivated:e,callbackContext:i,view:n}=this;return null==e?void 0:e.call(i,t,n)}ie(){const t=this.p,e=t.document;let i=this.target,n=this.renderContext;if(""===i){if(this.strict)throw new Error("AUR0811");return e.body}if(cC(i)){let s=e;cC(n)&&(n=e.querySelector(n)),n instanceof t.Node&&(s=n),i=s.querySelector(i)}if(i instanceof t.Node)return i;if(null==i){if(this.strict)throw new Error("AUR0812");return e.body}return i}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}TI.inject=[O$,$E,KC],WS([dC({primary:!0})],TI.prototype,"target",void 0),WS([dC({callback:"targetChanged"})],TI.prototype,"renderContext",void 0),WS([dC()],TI.prototype,"strict",void 0),WS([dC()],TI.prototype,"deactivating",void 0),WS([dC()],TI.prototype,"activating",void 0),WS([dC()],TI.prototype,"deactivated",void 0),WS([dC()],TI.prototype,"activated",void 0),WS([dC()],TI.prototype,"callbackContext",void 0),DA("portal")(TI);class RI extends class{constructor(t,e,i){this.fs=i,this.id=Om("au$component"),this.view=t.create().setLocation(e)}attaching(t,e,i){const{$controller:n}=this;return this.view.activate(t,n,i|this.fs,n.scope)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}{constructor(t,e){super(t,e,32)}}RI.inject=[O$,$E],DA("observe-shallow")(RI);class II{constructor(t,e,i){this.ifFactory=t,this.location=e,this.work=i,this.id=Om("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.he=!1,this.ce=0}attaching(t,e,i){let n;const s=this.$controller,r=this.ce++,o=()=>!this.he&&this.ce===r+1;return Vm(this.pending,(()=>{var e;o()&&(this.pending=void 0,n=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=n&&(n.setLocation(this.location),this.pending=Vm(n.activate(t,s,i,s.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e,i){return this.he=!0,Vm(this.pending,(()=>{var e;this.he=!1,this.pending=void 0,null===(e=this.view)||void 0===e||e.deactivate(t,this.$controller,i)}))}valueChanged(t,e,i){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;this.work.start();const n=this.view,s=this.$controller,r=this.ce++,o=()=>!this.he&&this.ce===r+1;let a;return Vm(Vm(this.pending,(()=>this.pending=Vm(null==n?void 0:n.deactivate(n,s,i),(()=>{var e;if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=a))return a.setLocation(this.location),Vm(a.activate(a,s,i,s.scope),(()=>{o()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var t,e;null===(t=this.ifView)||void 0===t||t.dispose(),null===(e=this.elseView)||void 0===e||e.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}II.inject=[O$,$E,yE],WS([dC],II.prototype,"value",void 0),WS([dC({set:t=>""===t||!!t&&"false"!==t})],II.prototype,"cache",void 0),DA("if")(II);class OI{constructor(t){this.factory=t,this.id=Om("au$component")}link(t,e,i,n){const s=t.children,r=s[s.length-1];if(r instanceof II)r.elseFactory=this.factory;else{if(!(r.viewModel instanceof II))throw new Error("AUR0810");r.viewModel.elseFactory=this.factory}}}function PI(t){t.dispose()}OI.inject=[O$],DA({name:"else"})(OI);const LI=[38962,36913];class MI{constructor(t,e,i){this.l=t,this.ae=e,this.f=i,this.id=Om("au$component"),this.views=[],this.key=void 0,this.ue=void 0,this.fe=!1,this.de=!1,this.me=null,this.ve=void 0,this.ge=!1}binding(t,e,i){const n=this.ae.bindings,s=n.length;let r,o,a=0;for(;s>a;++a)if(r=n[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.sourceExpression,this.pe=r;let t=o.iterable;for(;null!=t&&LI.includes(t.$kind);)t=t.expression,this.fe=!0;this.me=t;break}this.we(i);const l=o.declaration;(this.ge=90137===l.$kind||106521===l.$kind)||(this.local=l.evaluate(i,this.$controller.scope,r.locator,null))}attaching(t,e,i){return this.be(i),this.xe(t,i)}detaching(t,e,i){return this.we(i),this.ye(t,i)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.we(t),this.be(t);const i=Vm(this.ye(null,t),(()=>this.xe(null,t)));i instanceof Promise&&i.catch(uC)}handleCollectionChange(t,e){const{$controller:i}=this;if(i.isActive){if(this.fe){if(this.de)return;return this.de=!0,this.items=this.forOf.iterable.evaluate(e,i.scope,this.pe.locator,null),void(this.de=!1)}if(e|=i.flags,this.be(e),void 0===t){const t=Vm(this.ye(null,e),(()=>this.xe(null,e)));t instanceof Promise&&t.catch(uC)}else{const i=this.views.length,n=function(t){let e=0,i=0,n=0;const s=function(t){const e=t.slice();return e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t),r=s.length;for(;n<r;++n){for(;s.deletedItems[i]<=n-e;)++i,--e;-2===s[n]?++e:s[n]+=e}return s}(t);if(n.deletedItems.length>0){n.deletedItems.sort(Pm);const t=Vm(this.ke(n,e),(()=>this.Ce(i,n,e)));t instanceof Promise&&t.catch(uC)}else this.Ce(i,n,e)}}}we(t){var e;const i=this.$controller.scope;let n=this.Ae,s=this.fe;s&&(n=this.Ae=null!==(e=this.me.evaluate(t,i,this.pe.locator,null))&&void 0!==e?e:null,s=this.fe=!Object.is(this.items,n));const r=this.ue;if(4&t)void 0!==r&&r.unsubscribe(this);else if(this.$controller.isActive){const t=this.ue=function(t){let e;return t instanceof Array?e=cx(t):t instanceof Map?e=Ox(t):t instanceof Set&&(e=wx(t)),e}(s?n:this.items);r!==t&&r&&r.unsubscribe(this),t&&t.subscribe(this)}}be(t){const e=this.items;if(e instanceof Array)return void(this.ve=e);if(void 0===this.forOf)return;const i=[];this.forOf.iterate(t,e,((t,e,n)=>{i[e]=n})),this.ve=i}xe(t,e){let i,n,s,r;const{$controller:o,f:a,local:l,l:c,items:h}=this,u=o.scope,d=this.forOf,p=d.count(e,h),f=this.views=Array(p);if(d.iterate(e,h,((h,v,g)=>{s=f[v]=a.create().setLocation(c),s.nodes.unlink(),this.ge?d.declaration.assign(e,r=$y.fromParent(u,Ay.create()),this.pe.locator,g):r=$y.fromParent(u,Ay.create(l,g)),NI(r.overrideContext,v,p),n=s.activate(null!=t?t:s,o,e,r),n instanceof Promise&&(null!=i?i:i=[]).push(n)})),void 0!==i)return 1===i.length?i[0]:Promise.all(i)}ye(t,e){let i,n,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),n=s.deactivate(null!=t?t:s,a,e),n instanceof Promise&&(null!=i?i:i=[]).push(n);if(void 0!==i)return 1===i.length?i[0]:Promise.all(i)}ke(t,e){let i,n,s;const{$controller:r,views:o}=this,a=t.deletedItems,l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),n=s.deactivate(s,r,e),n instanceof Promise&&(null!=i?i:i=[]).push(n);c=0;let h=0;for(;l>c;++c)h=a[c]-c,o.splice(h,1);if(void 0!==i)return 1===i.length?i[0]:Promise.all(i)}Ce(t,e,i){var n;let s,r,o,a,l=0;const{$controller:c,f:h,local:u,ve:d,l:p,views:f}=this,v=e.length;for(;v>l;++l)-2===e[l]&&(o=h.create(),f.splice(l,0,o));if(f.length!==v)throw new Error(`AUR0814:${f.length}!=${v}`);const g=c.scope,m=e.length;!function(t,e){const i=t.slice(),n=e.length;let s=0,r=0;for(;s<n;)r=e[s],-2!==r&&(t[s]=i[r]),++s}(f,e);const b=function(t){const e=t.length;e>jI&&(jI=e,UI=new Int32Array(e),BI=new Int32Array(e));let i=0,n=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(n=t[r],-2!==n){if(o=UI[i],s=t[o],-2!==s&&s<n){BI[r]=o,UI[++i]=r;continue}for(a=0,l=i;a<l;)c=a+l>>1,s=t[UI[c]],-2!==s&&s<n?a=c+1:l=c;s=t[UI[a]],(n<s||-2===s)&&(a>0&&(BI[r]=UI[a-1]),UI[a]=r)}r=++i;const h=new Int32Array(r);for(n=UI[i-1];i-- >0;)h[i]=n,n=BI[n];for(;r-- >0;)UI[r]=0;return h}(e),y=b.length;let w,x=y-1;for(l=m-1;l>=0;--l)o=f[l],w=f[l+1],o.nodes.link(null!==(n=null==w?void 0:w.nodes)&&void 0!==n?n:p),-2===e[l]?(this.ge?this.forOf.declaration.assign(i,a=$y.fromParent(g,Ay.create()),this.pe.locator,d[l]):a=$y.fromParent(g,Ay.create(u,d[l])),NI(a.overrideContext,l,m),o.setLocation(p),r=o.activate(o,c,i,a),r instanceof Promise&&(null!=s?s:s=[]).push(r)):x<0||1===y||l!==b[x]?(NI(o.scope.overrideContext,l,m),o.nodes.insertBefore(o.location)):(t!==m&&NI(o.scope.overrideContext,l,m),--x);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(PI),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let i=0,n=e.length;i<n;++i)if(!0===e[i].accept(t))return!0}}MI.inject=[$E,iE,O$],WS([dC],MI.prototype,"items",void 0),DA("repeat")(MI);let jI=16,UI=new Int32Array(jI),BI=new Int32Array(jI);function NI(t,e,i){const n=0===e,s=e===i-1,r=e%2==0;t.$index=e,t.$first=n,t.$last=s,t.$middle=!n&&!s,t.$even=r,t.$odd=!r,t.$length=i}class VI{constructor(t,e){this.id=Om("au$component"),this.id=Om("au$component"),this.view=t.create().setLocation(e)}valueChanged(t,e,i){const n=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(n.isActive&&null!=s)for(r=$y.fromParent(n.scope,void 0===t?{}:t),a=s.length;a>o;++o)s[o].$bind(2,r)}attaching(t,e,i){const{$controller:n,value:s}=this,r=$y.fromParent(n.scope,void 0===s?{}:s);return this.view.activate(t,n,i,r)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}VI.inject=[O$,$E],WS([dC],VI.prototype,"value",void 0),DA("with")(VI);let FI=class{constructor(t,e){this.f=t,this.l=e,this.id=Om("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,i,n){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,i){const n=this.view,s=this.$controller;return this.queue((()=>n.activate(t,s,i,s.scope))),this.queue((()=>this.swap(t,i,this.value))),this.promise}detaching(t,e,i){return this.queue((()=>this.view.deactivate(t,this.$controller,i))),this.promise}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}valueChanged(t,e,i){this.$controller.isActive&&this.queue((()=>this.swap(null,i,this.value)))}caseChanged(t,e){this.queue((()=>this.Re(t,e)))}Re(t,e){const i=t.isMatch(this.value,e),n=this.activeCases,s=n.length;if(!i)return s>0&&n[0].id===t.id?this.Se(null,e):void 0;if(s>0&&n[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,i=e.indexOf(t);for(let t=i,n=e.length;t<n&&o;t++){const i=e[t];r.push(i),o=i.fallThrough}}else r.push(t);return Vm(this.Se(null,e,r),(()=>(this.activeCases=r,this.Ee(null,e))))}swap(t,e,i){const n=[];let s=!1;for(const t of this.cases)if((s||t.isMatch(i,e))&&(n.push(t),s=t.fallThrough),n.length>0&&!s)break;const r=this.defaultCase;return 0===n.length&&void 0!==r&&n.push(r),Vm(this.activeCases.length>0?this.Se(t,e,n):void 0,(()=>{if(this.activeCases=n,0!==n.length)return this.Ee(t,e)}))}Ee(t,e){const i=this.$controller;if(!i.isActive)return;const n=this.activeCases,s=n.length;if(0===s)return;const r=i.scope;return 1===s?n[0].activate(t,e,r):Fm(...n.map((i=>i.activate(t,e,r))))}Se(t,e,i=[]){const n=this.activeCases,s=n.length;if(0!==s){if(1===s){const s=n[0];return i.includes(s)?void 0:(n.length=0,s.deactivate(t,e))}return Vm(Fm(...n.reduce(((n,s)=>(i.includes(s)||n.push(s.deactivate(t,e)),n)),[])),(()=>{n.length=0}))}}queue(t){const e=this.promise;let i;i=this.promise=Vm(Vm(e,t),(()=>{this.promise===i&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};WS([dC],FI.prototype,"value",void 0),FI=WS([DA("switch"),KS(0,O$),KS(1,$E)],FI);let DI=class{constructor(t,e,i,n){this.f=t,this.Be=e,this.l=i,this.id=Om("au$component"),this.fallThrough=!1,this.view=void 0,this.Ie=n.config.level<=1,this.Ut=n.scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,i,n){const s=t.parent,r=null==s?void 0:s.viewModel;if(!(r instanceof FI))throw new Error("AUR0815");this.$switch=r,this.linkToSwitch(r)}detaching(t,e,i){return this.deactivate(t,i)}isMatch(t,e){this.Ut.debug("isMatch()");const i=this.value;return Array.isArray(i)?(void 0===this.ue&&(this.ue=this.Te(e,i)),i.includes(t)):i===t}valueChanged(t,e,i){var n;Array.isArray(t)?(null===(n=this.ue)||void 0===n||n.unsubscribe(this),this.ue=this.Te(i,t)):void 0!==this.ue&&this.ue.unsubscribe(this),this.$switch.caseChanged(this,i)}handleCollectionChange(t,e){this.$switch.caseChanged(this,e)}activate(t,e,i){let n=this.view;if(void 0===n&&(n=this.view=this.f.create().setLocation(this.l)),!n.isActive)return n.activate(null!=t?t:n,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(null!=t?t:i,this.$controller,e)}dispose(){var t,e;null===(t=this.ue)||void 0===t||t.unsubscribe(this),null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Te(t,e){const i=this.Be.getArrayObserver(e);return i.subscribe(this),i}accept(t){var e;return!0===this.$controller.accept(t)||(null===(e=this.view)||void 0===e?void 0:e.accept(t))}};DI.inject=[O$,MS,$E,Kb],WS([dC],DI.prototype,"value",void 0),WS([dC({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:xw.oneTime})],DI.prototype,"fallThrough",void 0),DI=WS([DA("case")],DI);let HI=class extends DI{linkToSwitch(t){if(void 0!==t.defaultCase)throw new Error("AUR0816");t.defaultCase=this}};HI=WS([DA("default-case")],HI);let zI=class{constructor(t,e,i,n){this.f=t,this.l=e,this.p=i,this.id=Om("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=n.scopeTo("promise.resolve")}link(t,e,i,n){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,i){const n=this.view,s=this.$controller;return Vm(n.activate(t,s,i,this.viewScope=$y.fromParent(s.scope,{})),(()=>this.swap(t,i)))}valueChanged(t,e,i){this.$controller.isActive&&this.swap(null,i)}swap(t,e){var i,n;const s=this.value;if(!(s instanceof Promise))return void this.logger.warn(`The value '${String(s)}' is not a promise. No change will be done.`);const r=this.p.domWriteQueue,o=this.fulfilled,a=this.rejected,l=this.pending,c=this.viewScope;let h;const u={reusable:!1},d=()=>{Fm(h=(this.preSettledTask=r.queueTask((()=>Fm(null==o?void 0:o.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==l?void 0:l.activate(t,e,c))),u)).result.catch((t=>{if(!(t instanceof HS))throw t})),s.then((i=>{if(this.value!==s)return;const n=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>Fm(null==l?void 0:l.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==o?void 0:o.activate(t,e,c,i))),u)).result};1===this.preSettledTask.status?h.then(n):(this.preSettledTask.cancel(),n())}),(i=>{if(this.value!==s)return;const n=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>Fm(null==l?void 0:l.deactivate(t,e),null==o?void 0:o.deactivate(t,e),null==a?void 0:a.activate(t,e,c,i))),u)).result};1===this.preSettledTask.status?h.then(n):(this.preSettledTask.cancel(),n())})))};1===(null===(i=this.postSettledTask)||void 0===i?void 0:i.status)?this.postSettlePromise.then(d):(null===(n=this.postSettledTask)||void 0===n||n.cancel(),d())}detaching(t,e,i){var n,s;return null===(n=this.preSettledTask)||void 0===n||n.cancel(),null===(s=this.postSettledTask)||void 0===s||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};WS([dC],zI.prototype,"value",void 0),zI=WS([DA("promise"),KS(0,O$),KS(1,$E),KS(2,KC),KS(3,Kb)],zI);let qI=class{constructor(t,e){this.f=t,this.l=e,this.id=Om("au$component"),this.view=void 0}link(t,e,i,n){ZI(t).pending=this}activate(t,e,i){let n=this.view;if(void 0===n&&(n=this.view=this.f.create().setLocation(this.l)),!n.isActive)return n.activate(n,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};WS([dC({mode:xw.toView})],qI.prototype,"value",void 0),qI=WS([DA("pending"),KS(0,O$),KS(1,$E)],qI);let WI=class{constructor(t,e){this.f=t,this.l=e,this.id=Om("au$component"),this.view=void 0}link(t,e,i,n){ZI(t).fulfilled=this}activate(t,e,i,n){this.value=n;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};WS([dC({mode:xw.fromView})],WI.prototype,"value",void 0),WI=WS([DA("then"),KS(0,O$),KS(1,$E)],WI);let KI=class{constructor(t,e){this.f=t,this.l=e,this.id=Om("au$component"),this.view=void 0}link(t,e,i,n){ZI(t).rejected=this}activate(t,e,i,n){this.value=n;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(void 0!==i&&i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};function ZI(t){const e=t.parent,i=null==e?void 0:e.viewModel;if(i instanceof zI)return i;throw new Error("AUR0813")}WS([dC({mode:xw.fromView})],KI.prototype,"value",void 0),KI=WS([DA("catch"),KS(0,O$),KS(1,$E)],KI);let _I=class{"promise.resolve"(t,e,i){return new OC(t,e,"promise","bind")}};_I=WS([jC({pattern:"promise.resolve",symbols:""})],_I);let QI=class{then(t,e,i){return new OC(t,e,"then","from-view")}};QI=WS([jC({pattern:"then",symbols:""})],QI);let GI=class{catch(t,e,i){return new OC(t,e,"catch","from-view")}};GI=WS([jC({pattern:"catch",symbols:""})],GI);class XI{constructor(t,e,i){this.node=t,this.instructions=e,this.De=i,this.Pe=void 0}get definition(){return void 0===this.Pe&&(this.Pe=YA.create({name:l$.generateName(),template:this.node,needsCompile:cC(this.node),instructions:this.instructions,dependencies:this.De})),this.Pe}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return t.root.get(F$).getViewFactory(this.definition,t.createChild().register(...this.De))}mergeInto(t,e,i){t.appendChild(this.node),e.push(...this.instructions),i.push(...this.De)}}function YI(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r){const o=i[r];switch(typeof o){case"string":e.appendChild(t.document.createTextNode(o));break;case"object":o instanceof t.Node?e.appendChild(o):"mergeInto"in o&&o.mergeInto(e,n,s)}}}function JI(t,e){const i=e.to;return void 0!==i&&"subject"!==i&&"composing"!==i&&(t[i]=e),t}class tO{constructor(t,e,i,n){this.p=t,this.$e=e,this.Oe=i,this.r=n,this.id=Om("au$component"),this.component=void 0,this.composing=!1,this.view=void 0,this.Le=void 0,this.qe=e.props.reduce(JI,{})}attaching(t,e,i){const{component:n,view:s}=this;return void 0===s||this.Le!==n?(this.Le=n,this.composing=!0,this.compose(void 0,n,t,i)):this.compose(s,n,t,i)}detaching(t,e,i){return this.oe(this.view,t,i)}componentChanged(t,e,i){const{$controller:n}=this;if(!n.isActive)return;if(this.Le===t)return;this.Le=t,this.composing=!0,i|=n.flags;const s=Vm(this.oe(this.view,null,i),(()=>this.compose(void 0,t,null,i)));s instanceof Promise&&s.catch((t=>{throw t}))}compose(t,e,i,n){return Vm(void 0===t?Vm(e,(t=>this.Ue(t,n))):t,(t=>this.ne(this.view=t,i,n)))}oe(t,e,i){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,i)}ne(t,e,i){const{$controller:n}=this;return Vm(null==t?void 0:t.activate(null!=e?e:t,n,i,n.scope),(()=>{this.composing=!1}))}Ue(t,e){const i=this._e(t,e);if(i)return i.setLocation(this.$controller.location),i.lockScope(this.$controller.scope),i}_e(t,e){if(!t)return;const i=this.Oe.controller.container;if("object"==typeof t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(i);if("create"in t)return t.create();if("template"in t)return this.r.getViewFactory(YA.getOrCreate(t),i).create()}if(cC(t)){const e=i.find(l$,t);if(null==e)throw new Error(`AUR0809:${t}`);t=e.Type}return function(t,e,i,n){if(cC(e))return function(t,e,i,n){const s=[],r=[],o=[],a=t.document.createElement(e);let l=!1;return i&&Object.keys(i).forEach((t=>{const e=i[t];QE(e)?(l=!0,s.push(e)):a.setAttribute(t,e)})),l&&(a.className="au",r.push(s)),n&&YI(t,a,n,r,o),new XI(a,r,o)}(t,e,i,n);if(l$.isType(e))return function(t,e,i,n){const s=l$.getDefinition(e),r=[],o=[r],a=[],l=[],c=s.bindables,h=t.document.createElement(s.name);return h.className="au",a.includes(e)||a.push(e),r.push(new iT(s,void 0,l,null,!1,void 0)),i&&Object.keys(i).forEach((t=>{const e=i[t];QE(e)?l.push(e):void 0===c[t]?l.push(new cT(e,t)):l.push(new eT(e,t))})),n&&YI(t,h,n,o,a),new XI(h,o,a)}(t,e,i,n);throw new Error("Invalid Tag or Type.")}(this.p,t,this.qe,this.$controller.host.childNodes).createView(i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}tO.inject=[KC,_E,nE,F$],WS([dC],tO.prototype,"component",void 0),WS([dC({mode:xw.fromView})],tO.prototype,"composing",void 0),GA({name:"au-render",template:null,containerless:!0,capture:!0})(tO);class eO{constructor(t,e,i,n,s,r,o){this.c=t,this.parent=e,this.host=i,this.l=n,this.p=s,this.scopeBehavior="auto",this.Fe=void 0,this.r=t.get(F$),this.$e=r,this.Ve=o}static get inject(){return[rb,iE,CE,$E,KC,_E,cb(nO)]}get pending(){return this.Me}get composition(){return this.Fe}attaching(t,e,i){return this.Me=Vm(this.queue(new sO(this.view,this.viewModel,this.model,void 0),t),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)}))}detaching(t){const e=this.Fe,i=this.Me;return this.Ve.invalidate(),this.Fe=this.Me=void 0,Vm(i,(()=>null==e?void 0:e.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Fe?this.Me=Vm(this.Me,(()=>Vm(this.queue(new sO(this.view,this.viewModel,this.model,t),void 0),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)})))):this.Fe.update(this.model)}queue(t,e){const i=this.Ve,n=this.Fe;return Vm(i.create(t),(t=>i.isCurrent(t)?Vm(this.compose(t),(s=>i.isCurrent(t)?Vm(s.activate(e),(()=>i.isCurrent(t)?(this.Fe=s,Vm(null==n?void 0:n.deactivate(e),(()=>t))):Vm(s.controller.deactivate(s.controller,this.$controller,4),(()=>(s.controller.dispose(),t))))):(s.controller.dispose(),t))):t))}compose(t){let e,i,n;const{view:s,viewModel:r,model:o}=t.change,{c:a,host:l,$controller:c,l:h}=this,u=this.getDef(r),d=a.createChild(),p=null==h?l.parentNode:h.parentNode;if(null!==u){if(u.containerless)throw new Error("AUR0806");null==h?(i=l,n=()=>{}):(i=p.insertBefore(this.p.document.createElement(u.name),h),n=()=>{i.remove()}),e=this.getVm(d,r,i)}else i=null==h?l:h,e=this.getVm(d,r,i);const f=()=>{if(null!==u){const s=W$.$el(d,e,i,{projections:this.$e.projections},u);return new aO(s,(t=>s.activate(null!=t?t:s,c,2,c.scope.parentScope)),(t=>Vm(s.deactivate(null!=t?t:s,c,4),n)),(t=>{var i;return null===(i=e.activate)||void 0===i?void 0:i.call(e,t)}),t)}{const n=YA.create({name:l$.generateName(),template:s}),r=this.r.getViewFactory(n,d),o=W$.$view(r,c),a="auto"===this.scopeBehavior?$y.fromParent(this.parent.scope,e):$y.create(e);return OE(i)?o.setLocation(i):o.setHost(i),new aO(o,(t=>o.activate(null!=t?t:o,c,2,a)),(t=>o.deactivate(null!=t?t:o,c,4)),(t=>{var i;return null===(i=e.activate)||void 0===i?void 0:i.call(e,t)}),t)}};return"activate"in e?Vm(e.activate(o),(()=>f())):f()}getVm(t,e,i){if(null==e)return new iO;if("object"==typeof e)return e;const n=this.p,s=OE(i);t.registerResolver(n.Element,t.registerResolver(CE,new Ob("ElementResolver",s?null:i))),t.registerResolver($E,new Ob("IRenderLocation",s?i:null));const r=t.invoke(e);return t.registerResolver(e,new Ob("au-compose.viewModel",r)),r}getDef(t){const e=lC(t)?t:null==t?void 0:t.constructor;return l$.isType(e)?l$.getDefinition(e):null}}WS([dC],eO.prototype,"view",void 0),WS([dC],eO.prototype,"viewModel",void 0),WS([dC],eO.prototype,"model",void 0),WS([dC({set:t=>{if("scoped"===t||"auto"===t)return t;throw new Error("AUR0805")}})],eO.prototype,"scopeBehavior",void 0),GA("au-compose")(eO);class iO{}class nO{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return Vm(t.load(),(t=>new oO(++this.id,t)))}invalidate(){this.id++}}class sO{constructor(t,e,i,n){this.view=t,this.viewModel=e,this.model=i,this.src=n}load(){return aC(this.view)||aC(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new rO(t,e,this.model,this.src))):new rO(this.view,this.viewModel,this.model,this.src)}}class rO{constructor(t,e,i,n){this.view=t,this.viewModel=e,this.model=i,this.src=n}}class oO{constructor(t,e){this.id=t,this.change=e}}class aO{constructor(t,e,i,n,s){this.controller=t,this.start=e,this.stop=i,this.update=n,this.context=s,this.state=0}activate(t){if(0!==this.state)throw new Error(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw new Error("AUR0808");default:this.state=-1}}}class lO{constructor(t,e,i,n){var s,r;let o;this.je=null,this.Ne=null;const a=e.auSlot,l=null===(r=null===(s=i.instruction)||void 0===s?void 0:s.projections)||void 0===r?void 0:r[a.name];null==l?(o=n.getViewFactory(a.fallback,i.controller.container),this.We=!1):(o=n.getViewFactory(l,i.parent.controller.container),this.We=!0),this.Oe=i,this.view=o.create().setLocation(t)}static get inject(){return[$E,_E,nE,F$]}binding(t,e,i){var n;let s;this.je=this.$controller.scope.parentScope,this.We&&(s=this.Oe.controller.scope.parentScope,(this.Ne=$y.fromParent(s,s.bindingContext)).overrideContext.$host=null!==(n=this.expose)&&void 0!==n?n:this.je.bindingContext)}attaching(t,e,i){return this.view.activate(t,this.$controller,i,this.We?this.Ne:this.je)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}exposeChanged(t){this.We&&null!=this.Ne&&(this.Ne.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}WS([dC],lO.prototype,"expose",void 0),GA({name:"au-slot",template:null,containerless:!0})(lO);const cO=ib.createInterface("ISanitizer",(t=>t.singleton(class{sanitize(){throw new Error('"sanitize" method not implemented')}})));let hO=class{constructor(t){this.He=t}toView(t){return null==t?null:this.He.sanitize(t)}};hO=WS([KS(0,cO)],hO),Ny("sanitize")(hO);let uO=class{constructor(t){this.ze=t}toView(t,e){return this.ze.getViewComponentForObject(t,e)}};uO=WS([KS(0,N$)],uO),Ny("view")(uO);const dO=YR,pO=_R,fO=QR,vO=GR,gO=JR,mO=tI,bO=XR,yO=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return Ib.singleton(vT,this).register(t)}compile(t,e,i){var n,s,r,o;const a=YA.getOrCreate(t);if(null===a.template||void 0===a.template)return a;if(!1===a.needsCompile)return a;null!=i||(i=TR);const l=new AR(t,e,i,null,null,void 0),c=cC(a.template)||!t.enhance?l.ni.createTemplate(a.template):a.template,h="TEMPLATE"===c.nodeName&&null!=c.content,u=h?c.content:c,d=e.get(function(t){function e(t,i,n){ib.inject(e)(t,i,n)}return e.$isResolver=!0,e.resolve=function(e,i){return i.root===i?i.getAll(t,!1):i.has(t,!1)?i.getAll(t,!1).concat(i.root.getAll(t,!1)):i.root.getAll(t,!1)},e}(FR)),p=d.length;let f=0;if(p>0)for(;p>f;)null===(s=(n=d[f]).compiling)||void 0===s||s.call(n,c),++f;if(c.hasAttribute(BR))throw new Error("AUR0701");return this.ri(u,l),this.oi(u,l),YA.create({...t,name:t.name||qR(),dependencies:(null!==(r=t.dependencies)&&void 0!==r?r:jb).concat(null!==(o=l.deps)&&void 0!==o?o:jb),instructions:l.rows,surrogates:h?this.li(c,l):jb,template:c,hasSlots:l.hasSlot,needsCompile:!1})}compileSpread(t,e,i,n){var s;const r=new AR(t,i,TR,null,null,void 0),o=[],a=r.hi(n.nodeName.toLowerCase()),l=null!==a,c=r.ep,h=e.length;let u,d,p,f,v,g,m,b,y,w,x=0,k=null,S=null;for(;h>x;++x)if(u=e[x],y=u.target,w=u.rawValue,S=r.ai(u),null!==S&&(1&S.type)>0)IR.node=n,IR.attr=u,IR.bindable=null,IR.def=null,o.push(S.build(IR));else if(k=r.ui(y),null===k)if(null===S){if(m=c.parse(w,1),l&&(f=MR.from(a,!1),v=f.attrs[y],void 0!==v)){m=c.parse(w,1),o.push(new fT(null==m?new eT(w,v.property):new GE(m,v.property)));continue}if(null!=m)o.push(new GE(m,null!==(s=r.m.map(n,y))&&void 0!==s?s:$m(y)));else switch(y){case"class":o.push(new hT(w));break;case"style":o.push(new uT(w));break;default:o.push(new cT(w,y))}}else{if(l&&(f=MR.from(a,!1),v=f.attrs[y],void 0!==v)){IR.node=n,IR.attr=u,IR.bindable=v,IR.def=a,o.push(new fT(S.build(IR)));continue}IR.node=n,IR.attr=u,IR.bindable=null,IR.def=null,o.push(S.build(IR))}else{if(k.isTemplateController)throw new Error(`AUR0703:${y}`);f=MR.from(k,!0),b=!1===k.noMultiBindings&&null===S&&$R(w),b?p=this.fi(n,w,k,r):(g=f.primary,null===S?(m=c.parse(w,1),p=[null===m?new eT(w,g.property):new GE(m,g.property)]):(IR.node=n,IR.attr=u,IR.bindable=g,IR.def=k,p=[S.build(IR)])),(null!=d?d:d=[]).push(new nT(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(y)?y:void 0,p))}return ER(),null!=d?d.concat(o):o}li(t,e){var i;const n=[],s=t.attributes,r=e.ep;let o,a,l,c,h,u,d,p,f,v,g,m,b=s.length,y=0,w=null,x=null;for(;b>y;++y){if(o=s[y],a=o.name,l=o.value,c=e.di.parse(a,l),g=c.target,m=c.rawValue,OR[g])throw new Error(`AUR0702:${a}`);if(x=e.ai(c),null!==x&&(1&x.type)>0)IR.node=t,IR.attr=c,IR.bindable=null,IR.def=null,n.push(x.build(IR));else if(w=e.ui(g),null===w)if(null===x)if(f=r.parse(m,1),null!=f)t.removeAttribute(a),--y,--b,n.push(new GE(f,null!==(i=e.m.map(t,g))&&void 0!==i?i:$m(g)));else switch(a){case"class":n.push(new hT(m));break;case"style":n.push(new uT(m));break;default:n.push(new cT(m,a))}else IR.node=t,IR.attr=c,IR.bindable=null,IR.def=null,n.push(x.build(IR));else{if(w.isTemplateController)throw new Error(`AUR0703:${g}`);d=MR.from(w,!0),v=!1===w.noMultiBindings&&null===x&&$R(m),v?u=this.fi(t,m,w,e):(p=d.primary,null===x?(f=r.parse(m,1),u=[null===f?new eT(m,p.property):new GE(f,p.property)]):(IR.node=t,IR.attr=c,IR.bindable=p,IR.def=w,u=[x.build(IR)])),t.removeAttribute(a),--y,--b,(null!=h?h:h=[]).push(new nT(this.resolveResources?w:w.name,null!=w.aliases&&w.aliases.includes(g)?g:void 0,u))}}return ER(),null!=h?h.concat(n):n}oi(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.mi(t,e):this.vi(t,e);case 3:return this.gi(t,e);case 11:{let i=t.firstChild;for(;null!==i;)i=this.oi(i,e);break}}return t.nextSibling}mi(t,e){const i=t.attributes,n=i.length,s=[],r=e.ep;let o,a,l,c,h,u,d,p,f=!1,v=0;for(;n>v;++v)if(o=i[v],l=o.name,c=o.value,"to-binding-context"!==l){if(a=e.di.parse(l,c),u=a.target,d=a.rawValue,h=e.ai(a),null!==h)switch(h.name){case"to-view":case"bind":s.push(new oT(r.parse(d,8),$m(u)));continue;default:throw new Error(`AUR0704:${a.command}`)}p=r.parse(d,1),s.push(new oT(null===p?new rw(d):p,$m(u)))}else f=!0;return e.rows.push([new rT(s,f)]),this.pi(t).nextSibling}vi(t,e){var i,n,s,r,o,a,l,c,h,u;const d=t.nextSibling,p=(null!==(i=t.getAttribute("as-element"))&&void 0!==i?i:t.nodeName).toLowerCase(),f=e.hi(p),v=null!==f,g=v&&null!=f.shadowOptions,m=!!(null==f?void 0:f.capture),b=m?[]:jb,y=e.ep,w=this.debug?Bb:()=>{t.removeAttribute(S),--H,--D};let x,k,S,C,A,$,E,T,R,I,O,P,L,M,j,U,B,N,V,F=t.attributes,D=F.length,H=0,z=null,q=!1,W=null,K=!0,Z=!1;if("slot"===p){if(null==e.root.def.shadowOptions)throw new Error(`AUR0717:${e.root.def.name}`);e.root.hasSlot=!0}if(v&&(K=null===(n=f.processContent)||void 0===n?void 0:n.call(f.Type,t,e.p),F=t.attributes,D=F.length),e.root.def.enhance&&t.classList.contains("au"))throw new Error("AUR0705");for(;D>H;++H){switch(k=F[H],S=k.name,C=k.value,S){case"as-element":case"containerless":w(),Z||(Z="containerless"===S);continue}if(A=e.di.parse(S,C),W=e.ai(A),B=A.target,N=A.rawValue,m){if(null!=W&&1&W.type){w(),b.push(A);continue}if("au-slot"!==B&&(j=MR.from(f,!1),null==j.attrs[B]&&!(null===(s=e.ui(B))||void 0===s?void 0:s.isTemplateController))){w(),b.push(A);continue}}if(null!==W&&1&W.type)IR.node=t,IR.attr=A,IR.bindable=null,IR.def=null,(null!=$?$:$=[]).push(W.build(IR)),w();else if(z=e.ui(B),null===z)if(null!==W)w(),v&&(j=MR.from(f,!1),T=j.attrs[B],void 0!==T)?(IR.node=t,IR.attr=A,IR.bindable=T,IR.def=f,(null!=E?E:E=[]).push(W.build(IR))):(IR.node=t,IR.attr=A,IR.bindable=null,IR.def=null,(null!=$?$:$=[]).push(W.build(IR)));else{if(v&&(j=MR.from(f,!1),T=j.attrs[B],void 0!==T)){L=y.parse(N,1),(null!=E?E:E=[]).push(null==L?new eT(N,T.property):new GE(L,T.property)),w();continue}L=y.parse(N,1),null!=L&&(w(),(null!=$?$:$=[]).push(new GE(L,null!==(r=e.m.map(t,B))&&void 0!==r?r:$m(B))))}else j=MR.from(z,!0),q=!1===z.noMultiBindings&&null===W&&$R(N),q?I=this.fi(t,N,z,e):(U=j.primary,null===W?(L=y.parse(N,1),I=[null===L?new eT(N,U.property):new GE(L,U.property)]):(IR.node=t,IR.attr=A,IR.bindable=U,IR.def=z,I=[W.build(IR)])),w(),z.isTemplateController?(null!=O?O:O=[]).push(new sT(RR,this.resolveResources?z:z.name,void 0,I)):(null!=R?R:R=[]).push(new nT(this.resolveResources?z:z.name,null!=z.aliases&&z.aliases.includes(B)?B:void 0,I))}if(ER(),this.wi(t)&&null!=$&&$.length>1&&this.bi(t,$),v&&(M=new iT(this.resolveResources?f:f.name,void 0,null!=E?E:jb,null,Z,b),p===KR)){const i=t.getAttribute("name")||WR,n=e.h("template"),s=e.xi();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?t.removeChild(r):n.content.appendChild(r),r=t.firstChild;this.oi(n.content,s),M.auSlot={name:i,fallback:YA.create({name:qR(),template:n,instructions:s.rows,needsCompile:!1})},t=this.yi(t,e)}if(null==$&&null==M&&null==R||(x=jb.concat(null!=M?M:jb,null!=R?R:jb,null!=$?$:jb),this.pi(t)),null!=O){let i;D=O.length-1,H=D,P=O[H],this.yi(t,e),"TEMPLATE"===t.nodeName?i=t:(i=e.h("template"),i.content.appendChild(t));const n=i,s=e.xi(null==x?[]:[x]);let r,a,h,u,d,m,b,y,w=0,k=0,S=t.firstChild,C=!1;if(!1!==K)for(;null!==S;)if(a=1===S.nodeType?S.getAttribute(KR):null,null!==a&&S.removeAttribute(KR),v)r=S.nextSibling,g||(C=3===S.nodeType&&""===S.textContent.trim(),C||(null!==(o=(l=null!=u?u:u={})[c=a||WR])&&void 0!==o?o:l[c]=[]).push(S),t.removeChild(S)),S=r;else{if(null!==a)throw a=a||WR,new Error(`AUR0706:${p}[${a}]`);S=S.nextSibling}if(null!=u){for(a in h={},u){for(i=e.h("template"),d=u[a],w=0,k=d.length;k>w;++w)m=d[w],"TEMPLATE"===m.nodeName?m.attributes.length>0?i.content.appendChild(m):i.content.appendChild(m.content):i.content.appendChild(m);y=e.xi(),this.oi(i.content,y),h[a]=YA.create({name:qR(),template:i,instructions:y.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=h}if(v&&(Z||f.containerless)&&this.yi(t,e),V=!v||!f.containerless&&!Z&&!1!==K,V)if("TEMPLATE"===t.nodeName)this.oi(t.content,s);else for(S=t.firstChild;null!==S;)S=this.oi(S,s);for(P.def=YA.create({name:qR(),template:n,instructions:s.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});H-- >0;)P=O[H],i=e.h("template"),b=e.h("au-m"),b.classList.add("au"),i.content.appendChild(b),P.def=YA.create({name:qR(),template:i,needsCompile:!1,instructions:[[O[H+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([P])}else{null!=x&&e.rows.push(x);let i,n,s,r,o,l,c,d=t.firstChild,m=null,b=!1,y=0,w=0;if(!1!==K)for(;null!==d;)if(n=1===d.nodeType?d.getAttribute(KR):null,null!==n&&d.removeAttribute(KR),v)i=d.nextSibling,g||(b=3===d.nodeType&&""===d.textContent.trim(),b||(null!==(a=(h=null!=s?s:s={})[u=n||WR])&&void 0!==a?a:h[u]=[]).push(d),t.removeChild(d)),d=i;else{if(null!==n)throw n=n||WR,new Error(`AUR0706:${p}[${n}]`);d=d.nextSibling}if(null!=s){for(n in m={},s){for(l=e.h("template"),r=s[n],y=0,w=r.length;w>y;++y)o=r[y],"TEMPLATE"===o.nodeName?o.attributes.length>0?l.content.appendChild(o):l.content.appendChild(o.content):l.content.appendChild(o);c=e.xi(),this.oi(l.content,c),m[n]=YA.create({name:qR(),template:l,instructions:c.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=m}if(v&&(Z||f.containerless)&&this.yi(t,e),V=!v||!f.containerless&&!Z&&!1!==K,V&&t.childNodes.length>0)for(d=t.firstChild;null!==d;)d=this.oi(d,e)}return d}gi(t,e){let i="",n=t;for(;null!==n&&3===n.nodeType;)i+=n.textContent,n=n.nextSibling;const s=e.ep.parse(i,1);if(null===s)return n;const r=t.parentNode;for(r.insertBefore(this.pi(e.h("au-m")),t),e.rows.push([new aT(s,!!e.def.isStrictBinding)]),t.textContent="",n=t.nextSibling;null!==n&&3===n.nodeType;)r.removeChild(n),n=t.nextSibling;return t.nextSibling}fi(t,e,i,n){const s=MR.from(i,!0),r=e.length,o=[];let a,l,c,h,u,d,p=0,f=0;for(let v=0;v<r;++v)if(f=e.charCodeAt(v),92===f)++v;else if(58===f){for(a=e.slice(p,v);e.charCodeAt(++v)<=32;);for(p=v;v<r;++v)if(f=e.charCodeAt(v),92===f)++v;else if(59===f){l=e.slice(p,v);break}if(void 0===l&&(l=e.slice(p)),h=n.di.parse(a,l),u=n.ai(h),d=s.attrs[h.target],null==d)throw new Error(`AUR0707:${i.name}.${h.target}`);for(null===u?(c=n.ep.parse(l,1),o.push(null===c?new eT(l,d.property):new GE(c,d.property))):(IR.node=t,IR.attr=h,IR.bindable=d,IR.def=i,o.push(u.build(IR)));v<r&&e.charCodeAt(++v)<=32;);p=v,a=void 0,l=void 0}return ER(),o}ri(t,e){var i,n;const s=t,r=Rm(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===s.childElementCount)throw new Error("AUR0708");const a=new Set,l=[];for(const t of r){if(t.parentNode!==s)throw new Error("AUR0709");const i=NR(t,a),n=class{},r=t.content,o=Rm(r.querySelectorAll("bindable")),c=vC.for(n),h=new Set,u=new Set;for(const t of o){if(t.parentNode!==r)throw new Error("AUR0710");const e=t.getAttribute("property");if(null===e)throw new Error("AUR0711");const i=t.getAttribute("attribute");if(null!==i&&u.has(i)||h.has(e))throw new Error(`AUR0712:${e}+${i}`);null!==i&&u.add(i),h.add(e),c.add({property:e,attribute:null!=i?i:void 0,mode:VR(t)}),t.getAttributeNames().filter((t=>!UR.includes(t))).length,r.removeChild(t)}l.push(n),e.ki(l$.define({name:i,template:t},n)),s.removeChild(t)}let c=0;const h=l.length;for(;h>c;++c)l$.getDefinition(l[c]).dependencies.push(...null!==(i=e.def.dependencies)&&void 0!==i?i:jb,...null!==(n=e.deps)&&void 0!==n?n:jb)}wi(t){return"INPUT"===t.nodeName&&1===PR[t.type]}bi(t,e){if("INPUT"===t.nodeName){const t=e;let i,n,s,r=0;for(let e=0;e<t.length&&r<3;e++)switch(s=t[e],s.to){case"model":case"value":case"matcher":i=e,r++;break;case"checked":n=e,r++}void 0!==n&&void 0!==i&&n<i&&([t[i],t[n]]=[t[n],t[i]])}}pi(t){return t.classList.add("au"),t}yi(t,e){const i=t.parentNode,n=e.h("au-m");return this.pi(i.insertBefore(n,t)),i.removeChild(t),n}},SI],wO=[HC,DC,WC],xO=[uR,aR,cR,lR,hR,dR,pR,wR,fR,vR,gR,yR,bR,mR,xR],kO=[dO,pO,fO,vO,gO,mO,bO,hO,uO,RI,II,OI,MI,VI,FI,DI,HI,zI,qI,WI,KI,_I,QI,GI,iI,sI,AI,tO,eO,TI,$I,EI,lO],SO=[TT,RT,AT,$T,ET,wT,xT,kT,ST,CT,UT,DT,BT,NT,VT,FT,LT,HT];var CO;!function t(e){return{optionsProvider:e,register(t){const i={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(i),t.register(Ib.instance(ww,i.coercingOptions),...yO,...kO,...wO,...xO,...SO)},customize:i=>t(null!=i?i:e)}}(Bb),ib.createInterface("IAurelia"),function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(CO||(CO={}));const AO=ib.createInterface("IDialogService"),$O=ib.createInterface("IDialogController"),EO=ib.createInterface("IDialogDomRenderer"),TO=ib.createInterface("IDialogDom"),RO=ib.createInterface("IDialogGlobalSettings");class IO{constructor(t,e){this.wasCancelled=t,this.dialog=e}static create(t,e){return new IO(t,e)}}class OO{constructor(t,e){this.status=t,this.value=e}static create(t,e){return new OO(t,e)}}var PO;!function(t){t.Ok="ok",t.Error="error",t.Cancel="cancel",t.Abort="abort"}(PO||(PO={}));class LO{constructor(t,e){this.p=t,this.ctn=e,this.closed=new Promise(((t,e)=>{this.Pt=t,this.St=e}))}static get inject(){return[KC,rb]}activate(t){var e;const i=this.ctn.createChild(),{model:n,template:s,rejectOnCancel:r}=t,o=i.get(EO),a=null!==(e=t.host)&&void 0!==e?e:this.p.document.body,l=this.dom=o.render(a,t),c=i.has(AE,!0)?i.get(AE):null,h=l.contentHost;return this.settings=t,null!=c&&c.contains(a)||i.register(Ib.instance(AE,a)),i.register(Ib.instance(CE,h),Ib.instance(TO,l)),new Promise((e=>{var s,r;const o=Object.assign(this.cmp=this.getOrCreateVm(i,t,h),{$dialog:this});e(null===(r=null===(s=o.canActivate)||void 0===s?void 0:s.call(o,n))||void 0===r||r)})).then((e=>{var o;if(!0!==e){if(l.dispose(),r)throw jO(null,"Dialog activation rejected");return IO.create(!0,this)}const a=this.cmp;return Vm(null===(o=a.activate)||void 0===o?void 0:o.call(a,n),(()=>{var e;const n=this.controller=W$.$el(i,a,h,null,YA.create(null!==(e=this.getDefinition(a))&&void 0!==e?e:{name:l$.generateName(),template:s}));return Vm(n.activate(n,null,2),(()=>{var e;return l.overlay.addEventListener(null!==(e=t.mouseEvent)&&void 0!==e?e:"click",this),IO.create(!1,this)}))}))}),(t=>{throw l.dispose(),t}))}deactivate(t,e){if(this.es)return this.es;let i=!0;const{controller:n,dom:s,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,l=OO.create(t,e),c=new Promise((c=>{var h,u;c(Vm(null===(u=null===(h=r.canDeactivate)||void 0===h?void 0:h.call(r,l))||void 0===u||u,(c=>{var h;if(!0!==c){if(i=!1,this.es=void 0,a)throw jO(null,"Dialog cancellation rejected");return OO.create("abort")}return Vm(null===(h=r.deactivate)||void 0===h?void 0:h.call(r,l),(()=>Vm(n.deactivate(n,null,4),(()=>(s.dispose(),s.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===t?this.St(jO(e,"Dialog cancelled with a rejection on cancel")):this.Pt(l),l)))))})))})).catch((t=>{throw this.es=void 0,t}));return this.es=i?c:void 0,c}ok(t){return this.deactivate("ok",t)}cancel(t){return this.deactivate("cancel",t)}error(t){const e=function(t){const e=new Error;return e.wasCancelled=!1,e.value=t,e}(t);return new Promise((t=>{var i,n;return t(Vm(null===(n=(i=this.cmp).deactivate)||void 0===n?void 0:n.call(i,OO.create("error",e)),(()=>Vm(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.St(e)})))))}))}handleEvent(t){this.settings.overlayDismiss&&!this.dom.contentHost.contains(t.target)&&this.cancel()}getOrCreateVm(t,e,i){const n=e.component;if(null==n)return new MO;if("object"==typeof n)return n;const s=this.p;return t.registerResolver(s.HTMLElement,t.registerResolver(s.Element,t.registerResolver(CE,new Ob("ElementResolver",i)))),t.invoke(n)}getDefinition(t){const e=lC(t)?t:null==t?void 0:t.constructor;return l$.isType(e)?l$.getDefinition(e):null}}class MO{}function jO(t,e){const i=new Error(e);return i.wasCancelled=!0,i.value=t,i}class UO{static from(...t){return Object.assign(new UO,...t).ls().os()}load(){const t=this,e=this.component,i=this.template,n=Fm(null==e?void 0:Vm(e(),(e=>{t.component=e})),lC(i)?Vm(i(),(e=>{t.template=e})):void 0);return n instanceof Promise?n.then((()=>t)):t}ls(){if(null==this.component&&null==this.template)throw new Error("AUR0903");return this}os(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function BO(t,e){return this.then((i=>i.dialog.closed.then(t,e)),e)}const NO="position:absolute;width:100%;height:100%;top:0;left:0;";class VO{constructor(t){this.p=t,this.wrapperCss=`${NO} display:flex;`,this.overlayCss=NO,this.hostCss="position:relative;margin:auto;"}static register(t){Ib.singleton(EO,this).register(t)}render(t){const e=this.p.document,i=(t,i)=>{const n=e.createElement(t);return n.style.cssText=i,n},n=t.appendChild(i("au-dialog-container",this.wrapperCss)),s=n.appendChild(i("au-dialog-overlay",this.overlayCss)),r=n.appendChild(i("div",this.hostCss));return new FO(n,s,r)}}VO.inject=[KC];class FO{constructor(t,e,i){this.wrapper=t,this.overlay=e,this.contentHost=i}dispose(){this.wrapper.remove()}}function DO(t,e){return{settingsProvider:t,register:i=>i.register(...e,TA.beforeCreate((()=>t(i.get(RO))))),customize:(t,i)=>DO(t,null!=i?i:e)}}DO((()=>{throw new Error("AUR0904")}),[class{static register(t){t.register(Ib.singleton(RO,this))}}]),DO(Bb,[class{constructor(t,e,i){this.ft=t,this.p=e,this.ss=i,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const t=this.dlgs;return t.length>0?t[t.length-1]:null}static get inject(){return[rb,KC,RO]}static register(t){t.register(Ib.singleton(AO,this),TA.beforeDeactivate(AO,(t=>Vm(t.closeAll(),(t=>{if(t.length>0)throw new Error(`AUR0901:${t.length}`)})))))}open(t){return function(t){return t.whenClosed=BO,t}(new Promise((e=>{var i;const n=UO.from(this.ss,t),s=null!==(i=n.container)&&void 0!==i?i:this.ft.createChild();e(Vm(n.load(),(t=>{const e=s.invoke(LO);return s.register(Ib.instance($O,e)),s.register(Ib.callback(LO,(()=>{throw new Error("AUR0902")}))),Vm(e.activate(t),(t=>{if(!t.wasCancelled){1===this.dlgs.push(e)&&this.p.window.addEventListener("keydown",this);const t=()=>this.remove(e);e.closed.then(t,t)}return t}))})))})))}closeAll(){return Promise.all(Array.from(this.dlgs).map((t=>t.settings.rejectOnCancel?t.cancel().then((()=>null)):t.cancel().then((e=>"cancel"===e.status?null:t))))).then((t=>t.filter((t=>!!t))))}remove(t){const e=this.dlgs,i=e.indexOf(t);i>-1&&this.dlgs.splice(i,1),0===e.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(t){const e=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(t);if(null==e)return;const i=this.top;if(null===i||0===i.settings.keyboard.length)return;const n=i.settings.keyboard;"Escape"===e&&n.includes(e)?i.cancel():"Enter"===e&&n.includes(e)&&i.ok()}},class{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(t){Ib.singleton(RO,this).register(t)}},VO]),ib.createInterface((t=>t.singleton(HO)));class HO{constructor(t,e,i){this.ctn=t,this.p=e,this.r=i}define(t,e,i){if(!t.includes("-"))throw new Error('Invalid web-components custom element name. It must include a "-"');let n;if(null==e)throw new Error("Invalid custom element definition");if(n="function"==typeof e?l$.isType(e)?l$.getDefinition(e):YA.create(l$.generateName(),e):YA.getOrCreate(e),n.containerless)throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");const s=(null==i?void 0:i.extends)?this.p.document.createElement(i.extends).constructor:HTMLElement,r=this.ctn,o=this.r,a=n.bindables,l=this.p;class c extends s{auInit(){if(this.auInited)return;this.auInited=!0;const t=r.createChild();t.registerResolver(l.HTMLElement,t.registerResolver(l.Element,t.registerResolver(CE,new Ob("ElementProvider",this))));const e=o.compile(n,t,{projections:null}),i=t.invoke(e.Type),s=this.auCtrl=W$.$el(t,i,this,null,e);SE(this,e.key,s)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null,0)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null,0)}adoptedCallback(){this.auInit()}attributeChangedCallback(t,e,i){this.auInit(),this.auCtrl.viewModel[t]=i}}c.observedAttributes=Object.keys(a);for(const t in a)Object.defineProperty(c.prototype,t,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[t]},set(e){this.auInited||this.auInit(),this.auCtrl.viewModel[t]=e}});return this.p.customElements.define(t,c,i),c}}HO.inject=[rb,KC,F$];class zO{constructor(t,e,i){this.path=t,this.caseSensitive=e,this.handler=i}}class qO{constructor(t,e){this.route=t,this.paramNames=e}}class WO{constructor(t,e){this.endpoint=t,this.params=e}}class KO{constructor(t,e,i,n){var s;this.chars=t,this.states=e,this.skippedStates=i,this.result=n,this.head=e[e.length-1],this.endpoint=null===(s=this.head)||void 0===s?void 0:s.endpoint}advance(t){const{chars:e,states:i,skippedStates:n,result:s}=this;let r=null,o=0;const a=i[i.length-1];function l(c,h){if(c.isMatch(t)&&(1==++o?r=c:s.add(new KO(e.concat(t),i.concat(c),null===h?n:n.concat(h),s))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw new Error(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw new Error("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)l(e,c)}}if(a.isDynamic&&l(a,null),null!==a.nextStates)for(const t of a.nextStates)l(t,null);null!==r&&(i.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&s.remove(this)}finalize(){!function t(e,i){const n=i.nextStates;if(null!==n)if(1===n.length&&null===n[0].segment)t(e,n[0]);else for(const i of n)if(i.isOptional&&null!==i.endpoint){if(e.push(i),null!==i.nextStates)for(const n of i.nextStates)t(e,n);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:i}=this,n={};for(const t of i.paramNames)n[t]=void 0;for(let i=0,s=t.length;i<s;++i){const s=t[i];if(s.isDynamic){const t=s.segment.name;void 0===n[t]?n[t]=e[i]:n[t]+=e[i]}}return n}compareTo(t){const e=this.states,i=t.states;for(let t=0,n=0,s=Math.max(e.length,i.length);t<s;++t){let s=e[t];if(void 0===s)return 1;let r=i[n];if(void 0===r)return-1;let o=s.segment,a=r.segment;if(null===o){if(null===a){++n;continue}if(void 0===(s=e[++t]))return 1;o=s.segment}else if(null===a){if(void 0===(r=i[++n]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++n}const n=this.skippedStates,s=t.skippedStates,r=n.length,o=s.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=n[t],i=s[t];if(e.length<i.length)return 1;if(e.length>i.length)return-1}return 0}}function ZO(t){return null!==t.head.endpoint}function _O(t,e){return t.compareTo(e)}class QO{constructor(t){this.candidates=[],this.candidates=[new KO([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(ZO);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(_O),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const i of e)i.advance(t)}}class GO{constructor(t,e,i){switch(this.prevState=t,this.segment=e,this.value=i,this.nextStates=null,this.endpoint=null,null==e?void 0:e.kind){case 2:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let i,n=this.nextStates;return null===n?(i=void 0,n=this.nextStates=[]):i=null===t?n.find((t=>t.value===e)):n.find((e=>{var i;return null===(i=e.segment)||void 0===i?void 0:i.equals(t)})),void 0===i&&n.push(i=new GO(this,t,e)),i}setEndpoint(t){if(null!==this.endpoint)throw new Error(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(null==e?void 0:e.kind){case 2:return!this.value.includes(t);case 1:return!0;case 3:case void 0:return this.value.includes(t)}}}function XO(t){return t.length>0}var YO,JO;!function(t){t[t.star=1]="star",t[t.dynamic=2]="dynamic",t[t.static=3]="static"}(YO||(YO={}));class tP{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 3}appendTo(t){const{value:e,value:{length:i}}=this;if(this.caseSensitive)for(let n=0;n<i;++n)t=t.append(this,e.charAt(n));else for(let n=0;n<i;++n){const i=e.charAt(n);t=t.append(this,i.toUpperCase()+i.toLowerCase())}return t}equals(t){return 3===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class eP{constructor(t,e){this.name=t,this.optional=e}get kind(){return 2}appendTo(t){return t.append(this,"/")}equals(t){return 2===t.kind&&t.optional===this.optional&&t.name===this.name}}class iP{constructor(t){this.name=t}get kind(){return 1}appendTo(t){return t.append(this,"")}equals(t){return 1===t.kind&&t.name===this.name}}class nP{constructor(t,e,i,n={}){this.router=t,this.name=e,this.connectedCE=i,this.options=n,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}get activeContent(){var t;return null!==(t=this.getNextContent())&&void 0!==t?t:this.getContent()}get connectedScope(){var t;return null===(t=this.activeContent)||void 0===t?void 0:t.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){var t,e;return null!==(e=null===(t=this.connectedCE)||void 0===t?void 0:t.$controller)&&void 0!==e?e:null}get isViewport(){return this instanceof RP}get isViewportScope(){return this instanceof SP}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){var i;return this.getContent().delete(),null===(i=this.getNextContent())||void 0===i||i.delete(),!0}canUnload(t){return!0}canLoad(t){return!0}unload(t){}load(t){}}class sP{constructor(t,e,i,n,s=OP.create(""),r=AP.create({instruction:"",fullStateInstruction:""})){var o,a;this.router=t,this.endpoint=e,this.instruction=s,this.navigation=r,this.completed=!1,this.connectedScope=new UP(t,n,i,this),null!==this.router.rootScope&&(null!==(a=null===(o=this.endpoint.connectedScope)||void 0===o?void 0:o.parent)&&void 0!==a?a:this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){var t;null===(t=this.connectedScope.parent)||void 0===t||t.removeChild(this.connectedScope)}}class rP{constructor(t=null,e="",i=[],n="",s={}){this.match=t,this.matching=e,this.instructions=i,this.remaining=n,this.params=s}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.length>0}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}function oP(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function aP(t,e){return function(i,n){e(i,n,t)}}class lP{static parse(t,e,i,n){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!lP.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const s=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===s.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);n=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),i=!0);const{instructions:o,remaining:a}=lP.parse(t,e,r,!1);s[s.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:i,remaining:r}=lP.parse(t,e,!0,n);s.push(...i),e=r}else if(e.startsWith(t.groupEnd)){i&&(e=e.slice(t.groupEnd.length));let n=0;const r=e.length;for(;n<r;n++){if(e.slice(n,n+t.sibling.length)===t.sibling)return{instructions:s,remaining:e};if(e.slice(n,n+t.groupEnd.length)!==t.groupEnd){if(s.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(n);break}}if(n>=r)return{instructions:s,remaining:e}}else if(e.startsWith(t.sibling)&&!lP.isAdd(t,e)){if(!i)return{instructions:s,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:i,remaining:n}=lP.parseOne(t,e);s.push(i),e=n}return{instructions:s,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const i=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let n,s,r,o,a,l=!0;const c=[t.add,t.clear];for(const s of c)if(e===s){n=e,e="",i.shift(),i.shift(),o=t.viewport;break}if(void 0===n)for(const s of c)if(e.startsWith(`${s}${t.viewport}`)){n=s,e=e.slice(`${s}${t.viewport}`.length),i.shift(),i.shift(),o=t.viewport;break}if(void 0===n&&(({token:o,pos:a}=lP.findNextToken(e,i)),n=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",i.shift(),o===t.parameters&&(({token:o,pos:a}=lP.findNextToken(e,[t.parametersEnd])),s=e.slice(0,a),e=e.slice(a+o.length),({token:o}=lP.findNextToken(e,i)),e=e.slice(o.length)),i.shift()),o===t.viewport&&(({token:o,pos:a}=lP.findNextToken(e,i)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),i.shift(),o===t.noScope&&(l=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(null!=n?n:""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);return{instruction:OP.create(n,r,s,l),remaining:e}}static findNextToken(t,e){const i={};for(const n of e)t.indexOf(n)>-1&&(i[n]=t.indexOf(n));const n=Math.min(...Object.values(i));for(const t in i)if(i[t]===n)return{token:t,pos:n};return{token:"",pos:-1}}}class cP{constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",i="top-down",n=" > ",s=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=i,this.componentTitleSeparator=n,this.useComponentNames=s,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new cP((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return dP.for(t).title}apply(t={}){var e,i,n,s,r,o;t="string"==typeof t?{appTitle:t}:t,this.appTitle=null!==(e=t.appTitle)&&void 0!==e?e:this.appTitle,this.appTitleSeparator=null!==(i=t.appTitleSeparator)&&void 0!==i?i:this.appTitleSeparator,this.componentTitleOrder=null!==(n=t.componentTitleOrder)&&void 0!==n?n:this.componentTitleOrder,this.componentTitleSeparator=null!==(s=t.componentTitleSeparator)&&void 0!==s?s:this.componentTitleSeparator,this.useComponentNames=null!==(r=t.useComponentNames)&&void 0!==r?r:this.useComponentNames,this.componentPrefix=null!==(o=t.componentPrefix)&&void 0!==o?o:this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class hP{constructor(t="@",e="+",i="/",n="(",s=")",r="!",o="(",a=")",l=",",c="=",h="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=i,this.groupStart=n,this.groupEnd=s,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=l,this.parameterKeySeparator=c,this.add=h,this.clear=u,this.action=d}static create(t={}){return new hP(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return dP.for(t).separators}apply(t={}){var e,i,n,s,r,o,a,l,c,h,u,d,p;this.viewport=null!==(e=t.viewport)&&void 0!==e?e:this.viewport,this.sibling=null!==(i=t.sibling)&&void 0!==i?i:this.sibling,this.scope=null!==(n=t.scope)&&void 0!==n?n:this.scope,this.groupStart=null!==(s=t.groupStart)&&void 0!==s?s:this.groupStart,this.groupEnd=null!==(r=t.groupEnd)&&void 0!==r?r:this.groupEnd,this.noScope=null!==(o=t.noScope)&&void 0!==o?o:this.noScope,this.parameters=null!==(a=t.parameters)&&void 0!==a?a:this.parameters,this.parametersEnd=null!==(l=t.parametersEnd)&&void 0!==l?l:this.parametersEnd,this.parameterSeparator=null!==(c=t.parameterSeparator)&&void 0!==c?c:this.parameterSeparator,this.parameterKeySeparator=null!==(h=t.parameterKeySeparator)&&void 0!==h?h:this.parameterKeySeparator,this.add=null!==(u=t.add)&&void 0!==u?u:this.add,this.clear=null!==(d=t.clear)&&void 0!==d?d:this.clear,this.action=null!==(p=t.action)&&void 0!==p?p:this.action}}class uP{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new uP(t.loadActive,t.viewportNavigating)}static for(t){return dP.for(t).indicators}apply(t={}){var e,i;this.loadActive=null!==(e=t.loadActive)&&void 0!==e?e:this.loadActive,this.viewportNavigating=null!==(i=t.viewportNavigating)&&void 0!==i?i:this.viewportNavigating}}class dP{constructor(t=hP.create(),e=uP.create(),i=!0,n=null,s=!0,r=0,o=!0,a=!0,l=!0,c=cP.create(),h=["guardedUnload","swapped","completed"],u="attach-next-detach-current"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=i,this.basePath=n,this.useHref=s,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=l,this.title=c,this.navigationSyncStates=h,this.swapOrder=u,this.registrationHooks=[]}static create(t={}){return new dP(hP.create(t.separators),uP.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,cP.create(t.title),t.navigationSyncStates,t.swapOrder)}static for(t){return t instanceof xL?t.options:(t=t instanceof _P?t.configuration:t.get(bL)).options}apply(t){var e,i,n,s,r,o,a,l,c;t=null!=t?t:{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=null!==(e=t.useUrlFragmentHash)&&void 0!==e?e:this.useUrlFragmentHash,this.basePath=null!==(i=t.basePath)&&void 0!==i?i:this.basePath,this.useHref=null!==(n=t.useHref)&&void 0!==n?n:this.useHref,this.statefulHistoryLength=null!==(s=t.statefulHistoryLength)&&void 0!==s?s:this.statefulHistoryLength,this.useDirectRouting=null!==(r=t.useDirectRouting)&&void 0!==r?r:this.useDirectRouting,this.useConfiguredRoutes=null!==(o=t.useConfiguredRoutes)&&void 0!==o?o:this.useConfiguredRoutes,this.additiveInstructionDefault=null!==(a=t.additiveInstructionDefault)&&void 0!==a?a:this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=null!==(l=t.navigationSyncStates)&&void 0!==l?l:this.navigationSyncStates,this.swapOrder=null!==(c=t.swapOrder)&&void 0!==c?c:this.swapOrder,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(JO||(JO={}));class pP{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new pP;return e.set(t),e}static parse(t,e,i=!1){if(null==e||0===e.length)return[];const n=hP.for(t),s=n.parameterSeparator,r=n.parameterKeySeparator;if("string"==typeof e){const t=[],n=e.split(s);for(const e of n){let n,s;[n,s]=e.split(r),void 0===s?(s=i?decodeURIComponent(n):n,n=void 0):i&&(n=decodeURIComponent(n),s=decodeURIComponent(s)),t.push({key:n,value:s})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,i=!1){if(!Array.isArray(e)||0===e.length)return"";const n=hP.for(t);return e.map((t=>{const e=void 0!==t.key&&i?encodeURIComponent(t.key):t.key,s=i?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==s?e+n.parameterKeySeparator+s:s})).join(n.parameterSeparator)}static contains(t,e){return Object.keys(e).every((i=>e[i]===t[i]))}parameters(t){return pP.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const i=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==i.length?1===i.length?i[0]:i:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=null!=e?e:[];const i=this.parameters(t),n={};for(const t of e){let e=i.findIndex((e=>e.key===t));if(e>=0){const[s]=i.splice(e,1);n[t]=s.value}else if(e=i.findIndex((t=>void 0===t.key)),e>=0){const[s]=i.splice(e,1);n[t]=s.value}}for(const t of i.filter((t=>void 0!==t.key)))n[t.key]=t.value;let s=e.length;for(const t of i.filter((t=>void 0===t.key)))n[s++]=t.value;return n}toSortedParameters(t,e){e=e||[];const i=this.parameters(t),n=[];for(const t of e){let e=i.findIndex((e=>e.key===t));if(e>=0){const t={...i.splice(e,1)[0]};t.key=void 0,n.push(t)}else if(e=i.findIndex((t=>void 0===t.key)),e>=0){const t={...i.splice(e,1)[0]};n.push(t)}else n.push({value:void 0})}const s=i.filter((t=>void 0!==t.key));return s.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),n.push(...s),n.push(...i.filter((t=>void 0===t.key))),n}same(t,e,i){const n=null!==i?i.parameters:[],s=this.toSpecifiedParameters(t,n),r=e.toSpecifiedParameters(t,n);return Object.keys(s).every((t=>s[t]===r[t]))&&Object.keys(r).every((t=>r[t]===s[t]))}}class fP{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new fP;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return l$.isType(t.Type)}static isType(t){return l$.isType(t)}static isInstance(t){return function(t){return Hg(t)&&l$.isType(t.constructor)}(t)}static isAppelation(t){return fP.isName(t)||fP.isType(t)||fP.isInstance(t)}static getName(t){return fP.isName(t)?t:fP.isType(t)?l$.getDefinition(t).name:fP.getName(t.constructor)}static getType(t){return fP.isName(t)?null:fP.isType(t)?t:t.constructor}static getInstance(t){return fP.isName(t)||fP.isType(t)?null:t}set(t){let e=null,i=null,n=null,s=null,r=null;t instanceof Promise?s=t:fP.isName(t)?e=fP.getName(t):fP.isType(t)?(e=this.getNewName(t),i=fP.getType(t)):fP.isInstance(t)?(e=this.getNewName(fP.getType(t)),i=fP.getType(t),n=fP.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=i,this.instance=n,this.promise=s,this.func=r}resolve(){if(null!==this.func&&this.set(this.func()),this.promise instanceof Promise)return this.promise.then((t=>{if(fP.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const i=e[0];this.set(t[i])}))}get none(){return!this.isName()&&!this.isType()&&!this.isInstance()}isName(){return!!this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t){if(null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(l$.keyFrom(this.name),!0)){const e=t.getResolver(l$.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const i=e.getFactory(t);if(i)return i.Type}}}return null}toInstance(t){if(null!==this.instance)return this.instance;if(null!=t){const e=this.isType()?t.get(this.type):t.get(l$.keyFrom(this.name));return!this.isType()||e instanceof this.type||console.warn("Failed to instantiate",this.type,e),null!=e?e:null}return null}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?fP.getName(t):this.name}}function vP(t,e){const i=[];let n=t.findIndex(e);for(;n>=0;)i.push(t.splice(n,1)[0]),n=t.findIndex(e);return i}function gP(t,e=!1){return t.filter(((t,i,n)=>(e||null!=t)&&n.indexOf(t)===i))}class mP{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class bP{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){var i,n;if(0===(null!==(i=null==e?void 0:e.length)&&void 0!==i?i:0))return null==e?void 0:e[0];let s=!1;null===t&&(t=new yP,s=!0);const r=new yP(e.shift());return bP.connect(t,r,null!==(n=null==t?void 0:t.runParallel)&&void 0!==n&&n||s),e.length>0&&bP.add(r,!1,...e),s?(bP.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):r}static runParallel(t,...e){var i,n;if(0===(null!==(i=null==e?void 0:e.length)&&void 0!==i?i:0))return[];let s=!1;return null===t?(t=new yP,s=!0):t=bP.connect(t,new yP,!0),bP.add(t,!0,...e),s&&bP.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?null!==(n=t.result)&&void 0!==n?n:[]:t}static step(t){if(t instanceof Promise)return bP.runners.get(t)}static cancel(t){const e=bP.step(t);void 0!==e&&e.cancel()}static add(t,e,...i){let n=new yP(i.shift(),e);null!==t&&(n=bP.connect(t,n,e));const s=n;for(;i.length>0;)n=bP.connect(n,new yP(i.shift(),e),!1);return s}static connect(t,e,i){if(i){const i=t.child;t.child=e,e.parent=t,e.next=i,null!==i&&(i.parent=null,i.previous=e)}else{const i=t.next;t.next=e,e.previous=t,e.next=i,null!==i&&(i.previous=e,i.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)bP.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const i=t.value;bP.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,bP.settlePromise(t),t.isDone=!0,t.isDoing=!1;const i=t.nextToDo();null===i||t.isExited?(t.root.doneAll||t.isExited)&&bP.settlePromise(t.root):bP.process(i)})).catch((t=>{throw t}))})(t,i)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?bP.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&bP.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new mP,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){var i,n,s,r;if(null!==(n=null===(i=t.finally)||void 0===i?void 0:i.isPending)&&void 0!==n&&n)switch(t.promise=null,e){case"resolve":null===(s=t.finally)||void 0===s||s.resolve(t.result);break;case"reject":null===(r=t.finally)||void 0===r||r.reject(t.result)}}}bP.runners=new WeakMap,bP.roots={};class yP{constructor(t,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+yP.id++}get isParallelParent(){var t,e;return null!==(e=null===(t=this.child)||void 0===t?void 0:t.runParallel)&&void 0!==e&&e}get result(){var t,e;if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:null===(e=null===(t=this.child)||void 0===t?void 0:t.tail)||void 0===e?void 0:e.result}let i=this.value;for(;i instanceof yP;)i=i.result;return i}get asValue(){return this.result}get previousValue(){var t,e,i,n;return this.runParallel?null===(i=null===(e=null===(t=this.head.parent)||void 0===t?void 0:t.parent)||void 0===e?void 0:e.previous)||void 0===i?void 0:i.result:null===(n=this.previous)||void 0===n?void 0:n.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){var e,i;return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,null===(e=this.child)||void 0===e||e.cancel(!1),null===(i=this.next)||void 0===i||i.cancel(!1),!0)}exit(t=!0){var e,i;return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,null===(e=this.child)||void 0===e||e.exit(!1),null===(i=this.next)||void 0===i||i.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){var t;let e=this.next;for(;null!==e;){if(!e.isDoing&&!e.isDone)return e;e=e.next}const i=null!==(t=this.head.parent)&&void 0!==t?t:null;return null!==i&&i.done?i.nextOrUp():null}get path(){var t,e;return`${null!==(e=null===(t=this.head.parent)||void 0===t?void 0:t.path)&&void 0!==e?e:""}/${this.name}`}get tree(){let t="",e=this.head,i=e.parent,n="";for(;null!==i;)n=`${i.path}${n}`,i=i.head.parent;do{if(t+=`${n}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){var t,e,i,n;let s=`${this.path}\n`;return s+=null!==(e=null===(t=this.child)||void 0===t?void 0:t.report)&&void 0!==e?e:"",s+=null!==(n=null===(i=this.next)||void 0===i?void 0:i.report)&&void 0!==n?n:"",s}}yP.id=0;class wP{constructor(t,e,i,n,s,r,o,a){this.path=t,this.id=e,this.redirectTo=i,this.instructions=n,this.caseSensitive=s,this.title=r,this.reloadBehavior=o,this.data=a}static isConfigured(t){return um.hasOwn(wP.resourceKey,t)||"parameters"in t||"title"in t}static configure(t,e){const i=wP.create(t,e);return um.define(wP.resourceKey,i,e),e}static getConfiguration(t){var e;const i=null!==(e=um.getOwn(wP.resourceKey,t))&&void 0!==e?e:{};return Array.isArray(t.parameters)&&(i.parameters=t.parameters),"title"in t&&(i.title=t.title),i instanceof wP?i:wP.create(i,t)}static create(t,e=null){var i,n,s,r,o,a,l,c,h;null!==e&&(t=wP.transferTypeToComponent(t,e)),l$.isType(t)?t=wP.getConfiguration(t):null===e&&(t={...t});const u=wP.transferIndividualIntoInstructions(t);wP.validateRouteConfiguration(u);let d=u.path;return Array.isArray(d)&&(d=d.join(",")),new wP(null!==(i=u.path)&&void 0!==i?i:"",null!==(s=null!==(n=u.id)&&void 0!==n?n:d)&&void 0!==s?s:null,null!==(r=u.redirectTo)&&void 0!==r?r:null,null!==(o=u.instructions)&&void 0!==o?o:null,null!==(a=u.caseSensitive)&&void 0!==a&&a,null!==(l=u.title)&&void 0!==l?l:null,null!==(c=u.reloadBehavior)&&void 0!==c?c:null,null!==(h=u.data)&&void 0!==h?h:null)}static transferTypeToComponent(t,e){var i;if(l$.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const n=null!==(i={...t})&&void 0!==i?i:{};if("component"in n||"instructions"in n)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in n||(n.component=e),"path"in n||"redirectTo"in n||(n.path=l$.getDefinition(e).name),n}static transferIndividualIntoInstructions(t){var e,i,n,s;if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(null!==(e=t.component)&&void 0!==e?e:null)||null!==(null!==(i=t.viewport)&&void 0!==i?i:null)||null!==(null!==(n=t.parameters)&&void 0!==n?n:null)||null!==(null!==(s=t.children)&&void 0!==s?s:null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}wP.resourceKey=Zm.resource.keyFor("route");const xP={name:Zm.resource.keyFor("routes"),isConfigured:t=>um.hasOwn(xP.name,t)||"routes"in t,configure(t,e){const i=t.map((t=>wP.create(t)));return um.define(xP.name,i,e),e},getConfiguration(t){const e=t,i=[],n=um.getOwn(xP.name,t);return Array.isArray(n)&&i.push(...n),Array.isArray(e.routes)&&i.push(...e.routes),i.map((t=>t instanceof wP?t:wP.create(t)))}};class kP extends sP{}class SP extends nP{constructor(t,e,i,n,s,r=null,o={catches:[],source:null}){super(t,e,i),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new kP(t,this,n,s)),this.catches.length>0&&(this.instruction=OP.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){var t;return null!==(t=this.options.source)&&void 0!==t?t:null}get catches(){var t;let e=null!==(t=this.options.catches)&&void 0!==t?t:[];return"string"==typeof e&&(e=e.split(",")),e}get default(){if(this.catches.length>0)return this.catches[0]}toString(){var t,e,i,n;const s=null!==(e=null===(t=this.instruction)||void 0===t?void 0:t.component.name)&&void 0!==e?e:"",r=null!==(n=null===(i=this.getNextContent())||void 0===i?void 0:i.instruction.component.name)&&void 0!==n?n:"";return`vs:${this.name}[${s}->${r}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new kP(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){bP.run(null,(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){var i;const n=this.contents.findIndex((e=>e.navigation===t.navigation));let s=this.contents[n];if(this.remove){const t=new kP(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(n,1,t),s.delete(),s=t}s.completed=!0;let r=0;for(let t=0,e=n;t<e&&null!==(i=this.contents[0].navigation.completed)&&void 0!==i&&i;t++)r++;this.contents.splice(0,r),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e){const i=this.contents.findIndex((e=>e.navigation===t.navigation));if(this.contents.splice(i,1),this.add){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===OP.clear(this.router)||t===OP.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&vP(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){if(null!==this.rootComponentType){const t=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;return xP.getConfiguration(t)}return null}}class CP{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class AP extends class{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}{constructor(t={instruction:"",fullStateInstruction:""}){var e,i,n,s,r,o;super(t),this.navigation=new CP,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=null!==(e=t.fromBrowser)&&void 0!==e?e:this.fromBrowser,this.origin=null!==(i=t.origin)&&void 0!==i?i:this.origin,this.replacing=null!==(n=t.replacing)&&void 0!==n?n:this.replacing,this.refreshing=null!==(s=t.refreshing)&&void 0!==s?s:this.refreshing,this.untracked=null!==(r=t.untracked)&&void 0!==r?r:this.untracked,this.historyMovement=null!==(o=t.historyMovement)&&void 0!==o?o:this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){var t,e,i;return null!==(t=this.navigation.back)&&void 0!==t&&t||null!==(e=this.navigation.forward)&&void 0!==e&&e||null!==(i=this.navigation.refresh)&&void 0!==i&&i}static create(t={instruction:"",fullStateInstruction:""}){return new AP(t)}}class $P{constructor(){this.map=new Map}set(t,e){const i=this.map.get(t);i instanceof mP&&i.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof mP&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new mP;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof mP?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof mP)}clone(){const t=new $P;return t.map=new Map(this.map),t}}class EP extends sP{constructor(t,e,i,n,s=OP.create(""),r=AP.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,i,n,s,r),this.router=t,this.instruction=s,this.navigation=r,this.contentStates=new $P,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==(null==o?void 0:o.container)||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){var t,e;return this.instruction.route instanceof rP&&null!==(null===(t=this.instruction.route.match)||void 0===t?void 0:t.reloadBehavior)?null===(e=this.instruction.route.match)||void 0===e?void 0:e.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){var e,i;return this.instruction.sameComponent(this.router,t.instruction,!0)&&(null!==(e=this.navigation.query)&&void 0!==e?e:"")===(null!==(i=t.navigation.query)&&void 0!==i?i:"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return W$.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(i){if(""===(null!=e?e:""))throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`);this.instruction.parameters.set([this.instruction.component.name]),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(t){throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`)}}this.contentStates.set("created",void 0),this.contentStates.has("loaded")||!this.instruction.component.instance||this.fromCache&&this.fromHistory||(this.contentController(t).parent=t.controller)}}canLoad(){var t,e,i;if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const n=this.instruction.component.instance;if(null==n)return!0;this.contentStates.set("checkedLoad",void 0);const s=null===(i=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===i?void 0:i.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(n,"canLoad").map((t=>e=>{const i=t(n,o,this.instruction,this.navigation);return"boolean"==typeof i?(!1===i&&e.exit(),i):"string"==typeof i?(e.exit(),[OP.create(i,this.endpoint)]):i}));if(0!==a.length){const t=bP.run(null,...a);if(!0!==t)return!1!==t&&("string"==typeof t?[OP.create(t,this.endpoint)]:t)}if(null==n.canLoad)return!0;const l=n.canLoad(o,this.instruction,this.navigation);return"boolean"==typeof l?l:"string"==typeof l?[OP.create(l,this.endpoint)]:l}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=AP.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const i=this.getLifecycleHooks(e,"canUnload").map((i=>n=>{const s=i(e,this.instruction,t);return"boolean"==typeof s?(!1===s&&n.exit(),s):s}));if(0!==i.length){const t=bP.run(null,...i);if(!0!==t)return!1!==t&&t}if(!e.canUnload)return!0;const n=e.canUnload(this.instruction,t);if("boolean"!=typeof n&&!(n instanceof Promise))throw new Error(`Method 'canUnload' in component "${this.instruction.component.name}" needs to return true or false or a Promise resolving to true or false.`);return n}load(t){return bP.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{var t,e,i;if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const n=this.instruction.component.instance,s=null===(i=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===i?void 0:i.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(n,"load").map((t=>()=>t(n,o,this.instruction,this.navigation)));return 0!==a.length?(null!=n.load&&a.push((()=>n.load(o,this.instruction,this.navigation))),bP.run(null,...a)):null!=n.load?n.load(o,this.instruction,this.navigation):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=AP.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const i=this.getLifecycleHooks(e,"unload").map((i=>()=>i(e,this.instruction,t)));return 0!==i.length?(null!=e.unload&&i.push((()=>e.unload(this.instruction,t))),bP.run(null,...i)):null!=e.unload?e.unload(this.instruction,t):void 0}activateComponent(t,e,i,n,s,r,o){return bP.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(i)),(()=>{if(this.contentStates.has("activating")||this.contentStates.has("activated"))return;this.contentStates.set("activating",void 0);const t=this.contentController(s);return t.activate(null!=e?e:t,i,n,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,i,n,s,r=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return bP.run(t,(()=>{if(r&&null!==s.element){const t=Array.from(s.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}this.contentStates.delete("activated"),this.contentStates.delete("activating");const t=this.contentController(s);return t.deactivate(null!=e?e:t,i,n)}))}disposeComponent(t,e,i=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance){if(!i)return this.contentStates.delete("created"),this.contentController(t).dispose();e.push(this)}}freeContent(t,e,i,n,s=!1){return bP.run(t,(()=>this.unload(i)),(t=>this.deactivateComponent(t,null,e.controller,0,e,s)),(()=>this.disposeComponent(e,n,s)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t)}toComponentInstance(t){return this.instruction.component.none?null:this.instruction.component.toInstance(t)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}getLifecycleHooks(t,e){var i;return(null!==(i=t.$controller.lifecycleHooks[e])&&void 0!==i?i:[]).map((t=>t.instance[e].bind(t.instance)))}}class TP{constructor(t=!0,e=[],i="",n="",s=!1,r=!1,o=!1,a=!1,l=!1){this.scope=t,this.usedBy=e,this.fallback=n,this.noLink=s,this.noTitle=r,this.stateful=o,this.forceDescription=a,this.noHistory=l,this.default=void 0,this.default=i}static create(t){const e=new TP;return void 0!==t&&e.apply(t),e}apply(t){var e,i,n,s,r,o,a,l,c;this.scope=null!==(e=t.scope)&&void 0!==e?e:this.scope,this.usedBy=null!==(i="string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)&&void 0!==i?i:this.usedBy,this.default=null!==(n=t.default)&&void 0!==n?n:this.default,this.fallback=null!==(s=t.fallback)&&void 0!==s?s:this.fallback,this.noLink=null!==(r=t.noLink)&&void 0!==r?r:this.noLink,this.noTitle=null!==(o=t.noTitle)&&void 0!==o?o:this.noTitle,this.stateful=null!==(a=t.stateful)&&void 0!==a?a:this.stateful,this.forceDescription=null!==(l=t.forceDescription)&&void 0!==l?l:this.forceDescription,this.noHistory=null!==(c=t.noHistory)&&void 0!==c?c:this.noHistory}}class RP extends nP{constructor(t,e,i,n,s,r){super(t,e,i),this.contents=[],this.forceRemove=!1,this.options=new TP,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new EP(t,this,n,s)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){var t;if(1===this.contents.length)return this.contents[0];let e;for(let i=0,n=this.contents.length;i<n&&null!==(t=this.contents[i].completed)&&void 0!==t&&t;i++)e=this.contents[i];return e}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let i=0,n=this.contents.length;i<n&&!(this.contents[i].navigation.timestamp>t);i++)e=this.contents[i];return e}get parentViewport(){let t=this.connectedScope;for(;null!=(null==t?void 0:t.parent);)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){var t,e,i,n;const s=null!==(e=null===(t=this.getContent())||void 0===t?void 0:t.instruction.component.name)&&void 0!==e?e:"",r=null!==(n=null===(i=this.getNextContent())||void 0===i?void 0:i.instruction.component.name)&&void 0!==n?n:"";return`v:${this.name}[${s}->${r}]`}setNextContent(t,e){var i;t.endpoint.set(this),this.clear=t.isClear(this.router);const n=this.contents[this.contents.length-1],s=new EP(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,null!==(i=this.connectedCE)&&void 0!==i?i:null);if(this.contents.push(s),s.fromHistory=!(null===s.componentInstance||!e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>s.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(s),1,t),s.fromCache=!0):this.cache.push(s)}return null!==s.componentInstance&&n.componentInstance===s.componentInstance?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):!n.equalComponent(s)||e.navigation.refresh||"refresh"===n.reloadBehavior?this.transitionAction="swap":"disallow"===n.reloadBehavior?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):"reload"===n.reloadBehavior?(n.reload=!0,s.instruction.component.set(n.componentInstance),s.contentStates=n.contentStates.clone(),s.reload=n.reload,this.transitionAction="reload"):this.options.stateful&&n.equalParameters(s)||n.equalParameters(s)?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){var i,n,s,r,o;e=null!=e?e:{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),null!=this.connectionResolve&&this.connectionResolve());const a=(null!==(n=null===(i=this.scope.parent)||void 0===i?void 0:i.endpoint.getRoutes())&&void 0!==n?n:[]).filter((t=>""===t.path)).length>0;if(null===this.getContent().componentInstance&&null==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance)&&(this.options.default||a)){const t=OP.parse(this.router,null!==(r=this.options.default)&&void 0!==r?r:"");if(0===t.length&&a){const e=null===(o=this.scope.parent)||void 0===o?void 0:o.findInstructions([OP.create("")],!1,this.router.configuration.options.useConfiguredRoutes);(null==e?void 0:e.foundConfiguration)&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&bP.run(t,(t=>{var e,i;if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,null!==(i=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==i?i:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),bP.run(t,...e)}return!0}))}async transition(t){var e,i,n,s;const r=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let o=this.parentViewport;null!==o&&"reload"!==o.transitionAction&&"swap"!==o.transitionAction&&(o=null);const a=[e=>{if(this.isActiveNavigation(t))return this.canUnload(e)},e=>{this.isActiveNavigation(t)&&(e.previousValue?this.router.isRestrictedNavigation&&this.getNextContent().createComponent(this.connectedCE,this.options.fallback):t.cancel()),t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==o?t.waitForEndpointState(o,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(e)},e=>{if(this.isActiveNavigation(t)){const i=e.previousValue;if("boolean"!=typeof i)return bP.run(e,(()=>this.router.load(i,{append:!0})),(e=>this.cancelContentChange(t,e)));if(!i)return e.cancel(),void t.cancel()}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],l=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==o?t.waitForEndpointState(o,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],c=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":c.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":c.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":c.push((e=>bP.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":c.push((e=>bP.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}c.push((()=>t.addEndpointState(this,"swapped"))),null===(i=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===i||i.call(e,r,!0),null===(s=null===(n=this.connectedCE)||void 0===n?void 0:n.setActivity)||void 0===s||s.call(n,t.navigation.navigation,!0);const h=bP.run(null,(e=>t.setEndpointStep(this,e.root)),...a,...l,...c,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{var e,i,n,s;null===(i=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===i||i.call(e,r,!1),null===(s=null===(n=this.connectedCE)||void 0===n?void 0:n.setActivity)||void 0===s||s.call(n,t.navigation.navigation,!1)}));h instanceof Promise&&h.catch((t=>{}))}canUnload(t){return bP.run(t,(t=>this.getContent().connectedScope.canUnload(t)),(t=>{var e,i;return!!t.previousValue&&this.getContent().canUnload(null!==(i=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==i?i:null)}))}canLoad(t){return!!this.clear||bP.run(t,(()=>this.waitForConnected()),(()=>(this.getNextContent().createComponent(this.connectedCE,this.options.fallback),this.getNextContent().canLoad())))}load(t){if(!this.clear)return this.getNextContent().load(t)}addContent(t,e){return this.activate(t,null,this.connectedController,0,e)}removeContent(t,e){var i;if(this.isEmpty)return;const n=this.router.statefulHistory||null!==(i=this.options.stateful)&&void 0!==i&&i;return bP.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController,n?0:16)),(()=>n?this.dispose():void 0))}activate(t,e,i,n,s){if(null!==this.activeContent.componentInstance)return bP.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,i,n,this.connectedCE,(()=>null==s?void 0:s.addEndpointState(this,"bound")),null==s?void 0:s.waitForSyncState("bound"))))}deactivate(t,e,i,n){var s;const r=this.getContent();if(null!=(null==r?void 0:r.componentInstance)&&!r.reload&&r.componentInstance!==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance))return r.deactivateComponent(t,e,i,n,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t){return bP.run(t,(t=>this.getContent().connectedScope.unload(t)),(()=>{var t,e;return null!=this.getContent().componentInstance?this.getContent().unload(null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.navigation)&&void 0!==e?e:null):void 0}))}dispose(){var t;null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===(null===(t=this.getNextContent())||void 0===t?void 0:t.componentInstance)||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){var i,n,s,r,o;const a=this.contents.findIndex((e=>e.navigation===t.navigation));let l=this.contents[a];const c=this.contents[a-1];if(this.clear){const t=new EP(this.router,this,this.owningScope,this.scope.hasScope,void 0,l.navigation);this.contents.splice(a,1,t),l.delete(),l=t}else l.reload=!1;c.delete(),l.completed=!0,this.transitionAction="",l.contentStates.delete("checkedUnload"),l.contentStates.delete("checkedLoad"),this.previousViewportState=null;const h=this.router.configuration.options.indicators.viewportNavigating;null===(n=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===n||n.call(i,h,!1),null===(r=null===(s=this.connectedCE)||void 0===s?void 0:s.setActivity)||void 0===r||r.call(s,t.navigation.navigation,!1);let u=0;for(let t=0,e=a;t<e&&null!==(o=this.contents[0].navigation.completed)&&void 0!==o&&o;t++)u++;this.contents.splice(0,u),vP(this.coordinators,(e=>e===t))}cancelContentChange(t,e){const i=this.contents.findIndex((e=>e.navigation===t.navigation)),n=this.contents[i],s=this.contents[i-1];return bP.run(e,(t=>{if(null!=n)return n.freeContent(t,this.connectedCE,n.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)}),(()=>{var e,i,r,o;this.previousViewportState&&Object.assign(this,this.previousViewportState),null==n||n.delete(),null!==n&&this.contents.splice(this.contents.indexOf(n),1),this.transitionAction="",null==s||s.contentStates.delete("checkedUnload"),null==s||s.contentStates.delete("checkedLoad");const a=this.router.configuration.options.indicators.viewportNavigating;null===(i=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===i||i.call(e,a,!1),null===(o=null===(r=this.connectedCE)||void 0===r?void 0:r.setActivity)||void 0===o||o.call(r,t.navigation.navigation,!1),t.removeEndpoint(this),vP(this.coordinators,(e=>e===t))}),(()=>null==e?void 0:e.exit()))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const i=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==i)return bP.run(t,(t=>(this.forceRemove=!0,i.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,vP(this.historyCache,(t=>t===i))}))}getRoutes(){let t=this.getComponentType();if(null===t)return null;t=t.constructor===t.constructor.constructor?t:t.constructor;const e=xP.getConfiguration(t);return Array.isArray(e)?e:null}getTitle(t){var e,i;if(this.options.noTitle)return"";const n=this.getComponentType();if(null===n)return"";let s="";const r=n.title;if(void 0!==r)if("string"==typeof r)s=r;else{const e=this.getComponentInstance();s=r.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=null!==(e=this.getContentInstruction().component.name)&&void 0!==e?e:"";const n=null!==(i=this.router.configuration.options.title.componentPrefix)&&void 0!==i?i:"";t.startsWith(n)&&(t=t.slice(n.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){var t;let e=null!==(t=this.getContentInstruction().component.type)&&void 0!==t?t:null;return null===e&&(e=l$.for(this.connectedCE.element).container.componentType),null!=e?e:null}getComponentInstance(){var t;return null!==(t=this.getContentInstruction().component.instance)&&void 0!==t?t:null}getContentInstruction(){var t,e,i;return null!==(i=null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.instruction)&&void 0!==e?e:this.getContent().instruction)&&void 0!==i?i:null}clearState(){this.options=TP.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new EP(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class IP{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof RP?"Viewport":this.instance instanceof SP?"ViewportScope":null}static create(t){const e=new IP;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof nP}static getName(t){return IP.isName(t)?t:t?t.name:null}static getInstance(t){return IP.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class OP{constructor(t,e,i){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.component=fP.create(t),this.endpoint=IP.create(e),this.parameters=pP.create(i)}static create(t,e,i,n=!0,s=null){const r=new OP(t,e,i);return r.ownsScope=n,r.nextScopeInstructions=s,r}static createClear(t,e){return OP.create(OP.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const i=[];for(const n of e)if("string"==typeof n)i.push(...OP.parse(t,n));else if(n instanceof OP)i.push(n);else if(n instanceof Promise)i.push(OP.create(n));else if(fP.isAppelation(n))i.push(OP.create(n));else if(fP.isDefinition(n))i.push(OP.create(n.Type));else if("component"in n){const e=n,s=OP.create(e.component,e.viewport,e.parameters);void 0!==e.children&&null!==e.children&&(s.nextScopeInstructions=OP.from(t,e.children)),i.push(s)}else if("object"==typeof n&&null!==n){const t=l$.define(n);i.push(OP.create(t))}else i.push(OP.create(n));return i}static clear(t){return hP.for(t).clear}static add(t){return hP.for(t).add}static parse(t,e){const i=hP.for(t);let n="";const s=/^[./]+/.exec(e);Array.isArray(s)&&s.length>0&&(n=s[0],e=e.slice(n.length));const r=lP.parse(i,e,!0,!0).instructions;for(const t of r)t.scopeModifier=n;return r}static stringify(t,e,i=!1,n=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,i,n))).filter((t=>t.length>0)).join(hP.for(t).sibling)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>OP.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const i of t)e.push(i),i.hasNextScopeInstructions&&e.push(...OP.flat(i.nextScopeInstructions));return e}static clone(t,e=!1,i=!1){return t.map((t=>t.clone(e,i)))}static contains(t,e,i,n){return i.every((i=>i.isIn(t,e,n)))}get viewport(){return this.endpoint.instance instanceof RP||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof SP||null===this.endpoint.endpointType?this.endpoint:null}get previous(){var t,e;return null===(e=null===(t=this.endpoint.instance)||void 0===t?void 0:t.getContent())||void 0===e?void 0:e.instruction}isAdd(t){return this.component.name===hP.for(t).add}isClear(t){return this.component.name===hP.for(t).clear}isAddAll(t){var e,i;return this.isAdd(t)&&0===(null!==(i=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==i?i:0)}isClearAll(t){var e,i;return this.isClear(t)&&0===(null!==(i=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==i?i:0)}get hasNextScopeInstructions(){var t,e;return(null!==(e=null===(t=this.nextScopeInstructions)||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0}typeParameters(t){var e,i;return this.parameters.toSpecifiedParameters(t,null!==(i=null===(e=this.component.type)||void 0===e?void 0:e.parameters)&&void 0!==i?i:[])}sameComponent(t,e,i=!1,n=!1){return!(i&&!this.sameParameters(t,e,n))&&this.component.same(e.component,n)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,i=!1){return!!this.component.same(e.component,i)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,i=!1){var n,s,r,o,a;const l=hP.for(t);let c=e,h=!1;if(i){const t=null!==(s=null===(n=this.viewport)||void 0===n?void 0:n.instance)&&void 0!==s?s:null;if(null!==(r=null==t?void 0:t.options.noLink)&&void 0!==r&&r)return"";this.needsEndpointDescribed||null!==(o=null==t?void 0:t.options.forceDescription)&&void 0!==o&&o&&null==(null===(a=this.viewportScope)||void 0===a?void 0:a.instance)||(c=!0),(null==t?void 0:t.options.fallback)===this.component.name&&(h=!0),(null==t?void 0:t.options.default)===this.component.name&&(h=!0)}const u=this.nextScopeInstructions;let d=this.scopeModifier;if(null!==this.route){if(!this.routeStart)return Array.isArray(u)?OP.stringify(t,u,e,i):"";const n=this.route.matching;d+=n.endsWith(l.scope)?n.slice(0,-l.scope.length):n}else d+=this.stringifyShallow(t,c,h);if(Array.isArray(u)&&u.length>0){const n=OP.stringify(t,u,e,i);n.length>0&&(d+=l.scope,d+=1===u.length?n:`${l.groupStart}${n}${l.groupEnd}`)}return d}clone(t=!1,e=!1,i=!1){var n,s,r,o,a,l;const c=OP.create(null!==(r=null!==(s=null!==(n=this.component.func)&&void 0!==n?n:this.component.promise)&&void 0!==s?s:this.component.type)&&void 0!==r?r:this.component.name,this.endpoint.name,null!==this.parameters.typedParameters?this.parameters.typedParameters:void 0);return t&&(c.component.set(null!==(a=null!==(o=this.component.instance)&&void 0!==o?o:this.component.type)&&void 0!==a?a:this.component.name),c.endpoint.set(null!==(l=this.endpoint.instance)&&void 0!==l?l:this.endpoint.name)),c.component.name=this.component.name,c.needsEndpointDescribed=this.needsEndpointDescribed,c.route=this.route,c.routeStart=this.routeStart,c.default=this.default,e&&(c.scopeModifier=this.scopeModifier),c.scope=t?this.scope:null,this.hasNextScopeInstructions&&!i&&(c.nextScopeInstructions=OP.clone(this.nextScopeInstructions,t,e)),c}isIn(t,e,i){const n=e.filter((e=>{var i,n;if(!e.sameComponent(t,this))return!1;const s=null!==(i=e.component.type)&&void 0!==i?i:this.component.type,r=null!==(n=this.component.type)&&void 0!==n?n:e.component.type,o=e.parameters.toSpecifiedParameters(t,null==s?void 0:s.parameters),a=this.parameters.toSpecifiedParameters(t,null==r?void 0:r.parameters);return!!pP.contains(o,a)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===n.length||i&&this.hasNextScopeInstructions&&!n.some((e=>{var n;return OP.contains(t,null!==(n=e.nextScopeInstructions)&&void 0!==n?n:[],this.nextScopeInstructions,i)})))}getTitle(t){var e;if(null!==this.route){const i=null===(e=this.route.match)||void 0===e?void 0:e.title;if(null!=i)return this.routeStart?"string"==typeof i?i:i(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){var t,e,i;return{component:null!==(t=this.component.name)&&void 0!==t?t:void 0,viewport:null!==(e=this.endpoint.name)&&void 0!==e?e:void 0,parameters:null!==(i=this.parameters.parametersRecord)&&void 0!==i?i:void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,i=!1){var n;const s=hP.for(t);let r=i?"":null!==(n=this.component.name)&&void 0!==n?n:"";const o=this.component.type?this.component.type.parameters:null,a=pP.stringify(t,this.parameters.toSortedParameters(t,o));return a.length>0&&(r+=i?a:`${s.parameters}${a}${s.parametersEnd}`),null==this.endpoint.name||e||(r+=`${s.viewport}${this.endpoint.name}`),this.ownsScope||(r+=s.noScope),r||""}}class PP{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new PP(PP.eventName,t)}}PP.eventName="au:router:navigation-navigate";let LP=class{constructor(t,e){this.ea=t,this.container=e,this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=AP.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.lastNavigationIndex=-1}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){var e,i,n,s;t instanceof AP||(t=AP.create(t));const r=new CP;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?r.refresh=!0:(r.first=!0,r.new=!0,this.lastNavigationIndex=0,this.navigations=[AP.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||null!==(e=t.replacing)&&void 0!==e&&e||null!==(i=t.refreshing)&&void 0!==i&&i?null!==(n=t.refreshing)&&void 0!==n&&n||r.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):null!==(s=t.replacing)&&void 0!==s&&s?(r.replace=!0,r.new=!0,t.index=this.lastNavigationIndex):(r.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?r.forward=!0:t.historyMovement<0&&(r.back=!0)),t.navigation=r,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new mP,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){var i,n,s,r,o,a,l;if(null!==(i=t.untracked)&&void 0!==i&&i)null!==(n=t.fromBrowser)&&void 0!==n&&n&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(null!==(s=t.replacing)&&void 0!==s&&s)0===(null!==(r=t.historyMovement)&&void 0!==r?r:0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const i=t.index;if(e&&(this.navigations=this.navigations.slice(0,i)),this.navigations[i]=t,(null!==(o=this.options.statefulHistoryLength)&&void 0!==o?o:0)>0){const t=this.navigations.length-(null!==(a=this.options.statefulHistoryLength)&&void 0!==a?a:0);for(const e of this.navigations.slice(i))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,i))}await this.saveState(t.index,!(null!==(l=t.fromBrowser)&&void 0!==l&&l))}}async cancel(t){var e,i,n;null!=this.options.store&&((null===(e=t.navigation)||void 0===e?void 0:e.new)?null!==(i=t.fromBrowser)&&void 0!==i&&i&&await this.options.store.popNavigatorState():0!==(null!==(n=t.historyMovement)&&void 0!==n?n:0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const i=this.navigations[e];return this.navigate(i)}getState(){var t,e;const i=null!=this.options.store?{...this.options.store.state}:{};return{navigations:null!==(t=null==i?void 0:i.navigations)&&void 0!==t?t:[],navigationIndex:null!==(e=null==i?void 0:i.navigationIndex)&&void 0!==e?e:-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>AP.create(t))),this.lastNavigationIndex=e}async saveState(t,e){var i,n,s,r,o;for(let t=0;t<this.navigations.length;t++)this.navigations[t]=AP.create(this.navigations[t].toStoredNavigation());if((null!==(i=this.options.statefulHistoryLength)&&void 0!==i?i:0)>0){const t=this.navigations.length-(null!==(n=this.options.statefulHistoryLength)&&void 0!==n?n:0);for(let e=0;e<t;e++){const i=this.navigations[e];"string"==typeof i.instruction&&"string"==typeof i.fullStateInstruction||await this.serializeNavigation(i,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const a={navigations:(null!==(s=this.navigations)&&void 0!==s?s:[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?null===(o=null===(r=this.options)||void 0===r?void 0:r.store)||void 0===o?void 0:o.pushNavigatorState(a):this.options.store.replaceNavigatorState(a)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(PP.eventName,PP.create(t))}toStoreableNavigation(t){const e=t instanceof AP?t.toStoredNavigation():t;return e.instruction=OP.stringify(this.container,e.instruction),e.fullStateInstruction=OP.stringify(this.container,e.fullStateInstruction),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let i=[];for(const t of e)"string"!=typeof t.instruction&&i.push(...OP.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&i.push(...OP.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));i=gP(i);let n=[];"string"!=typeof t.fullStateInstruction&&(n.push(...t.fullStateInstruction),t.fullStateInstruction=OP.stringify(this.container,t.fullStateInstruction)),"string"!=typeof t.instruction&&(n.push(...t.instruction),t.instruction=OP.stringify(this.container,t.instruction)),n=n.filter(((t,e,i)=>null!=t.component.instance&&i.indexOf(t)===e));const s=[];for(const t of n)await this.freeInstructionComponents(t,i,s)}freeInstructionComponents(t,e,i){var n,s;const r=t.component.instance,o=null!==(s=null===(n=t.viewport)||void 0===n?void 0:n.instance)&&void 0!==s?s:null;if(null!==r&&null!==o&&!i.some((t=>t===r))){if(!e.some((t=>t===r)))return bP.run(null,(t=>o.freeContent(t,r)),(()=>{i.push(r)}));if(t.hasNextScopeInstructions)for(const n of t.nextScopeInstructions)return this.freeInstructionComponents(n,e,i)}}};LP=oP([aP(0,cy),aP(1,rb)],LP);class MP extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){vP(this,(e=>e===t))}}class jP{static matchEndpoints(t,e,i,n=!1){const s=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!i.some((e=>t===e.endpoint.instance)))),o=new MP(...e.slice());let a=null;for(jP.matchKnownEndpoints(t.router,"ViewportScope",o,r,s,!1),n||jP.matchKnownEndpoints(t.router,"Viewport",o,r,s,!1),jP.matchViewportScopeSegment(t.router,t,o,r,s);null!==(a=o.next());)a.needsEndpointDescribed=!0;return jP.matchViewportConfiguration(o,r,s),n||jP.matchSpecifiedViewport(o,r,s,!1),jP.matchLastViewport(o,r,s),n&&jP.matchSpecifiedViewport(o,r,s,!1),{matchedInstructions:s,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,i,n,s,r=!1){let o;for(;null!==(o=i.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(jP.matchEndpoint(o,o.endpoint.instance,r),s.push(o),vP(n,(t=>t===o.endpoint.instance)),i.removeCurrent())}static matchViewportScopeSegment(t,e,i,n,s){let r;for(;null!==(r=i.next());)for(let o of n)if(o instanceof SP&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let i=n.find((t=>t instanceof SP&&t.name===o.name));if(void 0===i||r.isAdd(t)){const t=o.addSourceItem();i=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=i}jP.matchEndpoint(r,o,!1),s.push(r),vP(n,(t=>t===r.endpoint.instance)),i.removeCurrent();break}}static matchViewportConfiguration(t,e,i){let n;for(;null!==(n=t.next());)for(const s of e)if(s instanceof RP&&(null==s?void 0:s.wantComponent(n.component.name))){jP.matchEndpoint(n,s,!0),i.push(n),vP(e,(t=>t===n.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,i,n){var s;let r;for(;null!==(r=t.next());){let o=r.endpoint.instance;if(null==o){const t=r.endpoint.name;if(0===(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0))continue;for(const i of e)if(i instanceof RP&&t===i.name){o=i;break}}(null==o?void 0:o.acceptComponent(r.component.name))&&(jP.matchEndpoint(r,o,n),i.push(r),vP(e,(t=>t===r.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,i){let n;for(;null!==(n=t.next());){const s=[];for(const t of e)t instanceof RP&&t.acceptComponent(n.component.name)&&s.push(t);if(1===s.length){const r=s[0];jP.matchEndpoint(n,r,!0),i.push(n),vP(e,(t=>t===n.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,i){t.endpoint.set(e),i&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof RP?e.scope:e.scope.scope)}))}}class UP{constructor(t,e,i,n){this.router=t,this.hasScope=e,this.owningScope=i,this.endpointContent=n,this.id=-1,this.parent=null,this.children=[],this.path=null,this.id=++UP.lastId,this.owningScope=null!=i?i:this}static for(t){var e;if(null==t)return null;if(t instanceof UP||t instanceof RP||t instanceof SP)return t.scope;let i;if("res"in t)i=t;else if("container"in t)i=t.container;else if("$controller"in t)i=t.$controller.container;else{const e=l$.for(t,{searchParents:!0});i=null==e?void 0:e.container}if(null==i)return null;const n=i.has(_P.closestEndpointKey,!0)?i.get(_P.closestEndpointKey):null;return null!==(e=null==n?void 0:n.scope)&&void 0!==e?e:null}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof RP}get isViewportScope(){return this.endpoint instanceof SP}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const i=t.indexOf(e);t.splice(i,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const i=e.indexOf(t);e.splice(i,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,i,n=""){var s,r,o,a;const l=this.router,c=l.configuration.options,h=t.filter((t=>null==t.route));if(h.length>0){const e=this.findInstructions(h,c.useDirectRouting,c.useConfiguredRoutes);!h.some((t=>!t.component.none))||e.foundConfiguration||e.foundInstructions||l.unknownRoute(OP.stringify(l,h)),t=[...t.filter((t=>null!=t.route)),...e.instructions],t.some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(n=(null!=n?n:"")+e.matching)}const u=t.filter((t=>t.component.isFunction()||t.component.isPromise()));u.length>0&&await Promise.all(u.map((t=>t.component.resolve()))),c.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let d=[];({clearEndpoints:d,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(l))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;const p=[];let f=[],{matchedInstructions:v,remainingInstructions:g}=this.matchEndpoints(t,f),m=100;do{m--||l.unresolvedInstructionsError(e,g);const c=[],h=v.map((t=>t.endpoint.instance));v.push(...d.filter((t=>!h.includes(t))).map((t=>OP.createClear(l,t))));const u=await qP.invokeBeforeNavigation(v,e);if(!1===u)return l.cancelNavigation(e,i),[];if(!0!==u&&u!==v){const t=OP.flat(v);g=g.filter((e=>!t.includes(e))),v=u}for(const t of v){const o=t.endpoint.instance;if(null!==o){const a=o.setNextContent(t,e);"skip"!==a&&(c.push(o),i.addEndpoint(o));const h=[o];if("swap"===a&&h.push(...o.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),vP(d,(t=>h.includes(t))),vP(v,(e=>e!==t&&e.isClear(l)&&h.includes(e.endpoint.instance))),!t.isClear(l)&&(null===(r=null===(s=t.scope)||void 0===s?void 0:s.parent)||void 0===r?void 0:r.isViewportScope)&&(vP(d,(e=>e===t.scope.parent.endpoint)),vP(v,(e=>e!==t&&e.isClear(l)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==a&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=o.scope,e.endpoint.instance=null;"skip"!==a||t.hasNextScopeInstructions||p.push(...await o.scope.processInstructions([],e,i,n))}}const b=v.filter((t=>{var e;return"skip"===(null===(e=t.endpoint.instance)||void 0===e?void 0:e.transitionAction)})),y=b.filter((t=>t.hasNextScopeInstructions));if((0===b.length||0===y.length)&&(l.isRestrictedNavigation||i.finalEndpoint(),i.run(),i.hasAllEndpoints)){const t=i.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(i.cancelled)return l.cancelNavigation(e,i),[];for(const t of c)p.every((e=>e!==t))&&p.push(t);if(f.push(...v.splice(0)),g.length>0&&({matchedInstructions:v,remainingInstructions:g}=this.matchEndpoints(g,f)),!l.isRestrictedNavigation&&(v.length>0||g.length>0)&&i.running){const t=i.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===v.length&&0===g.length){const s=[];for(const r of t){if(!r.hasNextScopeInstructions)continue;const t=null!==(a=null===(o=r.endpoint.instance)||void 0===o?void 0:o.scope)&&void 0!==a?a:r.endpoint.scope;s.push(t.processInstructions(r.nextScopeInstructions,e,i,n))}p.push(...(await Promise.all(s)).flat())}if(e.useFullStateInstruction&&(i.appendedInstructions=i.appendedInstructions.filter((t=>!t.default))),({matchedInstructions:v,earlierMatchedInstructions:f,remainingInstructions:g}=i.dequeueAppendedInstructions(v,f,g)),0===v.length&&0===g.length){const t=f.map((t=>{var e,i;return null===(i=(null===(e=t.endpoint.instance)||void 0===e?void 0:e.connectedCE).pendingPromise)||void 0===i?void 0:i.promise})).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:v,earlierMatchedInstructions:f,remainingInstructions:g}=i.dequeueAppendedInstructions(v,f,g))):v=d.map((t=>OP.createClear(l,t)))}const w=v.filter((t=>t.component.isFunction()||t.component.isPromise()));w.length>0&&await Promise.all(w.map((t=>t.component.resolve())))}while(v.length>0||g.length>0);return p}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.router.configuration.options.useConfiguredRoutes&&this.router.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.router.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const i=OP.create(OP.clear(e));return i.scope=this,[i,...t]}return t}getClearAllEndpoints(t){const e=this.router;let i=[];return t.some((t=>{var i;return(null!==(i=t.scope)&&void 0!==i?i:this)===this&&t.isClearAll(e)}))&&(i=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>{var i;return!((null!==(i=t.scope)&&void 0!==i?i:this)===this&&t.isClearAll(e))}))),{clearEndpoints:i,instructions:t}}findInstructions(t,e,i){var n,s;const r=this.router;let o=new rP;if(i&&!OP.containsSiblings(r,t)){let i=t.filter((t=>t.isClear(r)||t.isClearAll(r)));const a=t.filter((t=>!t.isClear(r)&&!t.isClearAll(r)));if(a.length>0)for(const l of a){const c=this.findMatchingRoute(OP.stringify(r,a));if(null!==(n=null==c?void 0:c.foundConfiguration)&&void 0!==n&&n)o=c,o.instructions=[...i,...o.instructions],i=[];else{if(!e)throw new Error(`No route found for: ${OP.stringify(r,t)}!`);o.instructions=[...i,...o.instructions,l],i=[],o.remaining=OP.stringify(r,null!==(s=l.nextScopeInstructions)&&void 0!==s?s:[])}}else o.instructions=[...i]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${OP.stringify(r,t)}!`);o.instructions.push(...t)}o.instructions=o.instructions.filter((t=>""!==t.component.name));for(const t of o.instructions)null===t.scope&&(t.scope=this);return o}matchEndpoints(t,e,i=!1){const n=[],s=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)===this})),r=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)!==this})),{matchedInstructions:o,remainingInstructions:a}=jP.matchEndpoints(this,s,e,i);return n.push(...o),r.push(...a),{matchedInstructions:n,remainingInstructions:r}}addEndpoint(t,e,i,n={}){var s,r,o,a;let l=null!==(r=null===(s=this.getOwnedScopes().find((i=>i.type===t&&i.endpoint.name===e)))||void 0===s?void 0:s.endpoint)&&void 0!==r?r:null;return null!=i&&null!=(null==l?void 0:l.connectedCE)&&l.connectedCE!==i&&(l=null!==(a=null===(o=this.getOwnedScopes(!0).find((n=>n.type===t&&n.endpoint.name===e&&n.endpoint.connectedCE===i)))||void 0===o?void 0:o.endpoint)&&void 0!==a?a:null),null==l&&(l="Viewport"===t?new RP(this.router,e,i,this.scope,!!n.scope,n):new SP(this.router,e,i,this.scope,!0,null,n),this.addChild(l.connectedScope)),null!=i&&l.setConnectedCE(i,n),l}removeEndpoint(t,e,i){return!(null===(null!=i?i:null)&&!e.removeEndpoint(t,i)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const i of e.slice())e.push(...i.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const i of e.slice())e.push(...i.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const i of e.slice())if(i.passThroughScope){const n=e.indexOf(i);e.splice(n,1,...i.getOwnedRoutingScopes(t))}return gP(e)}getRoutingInstructions(t){var e;const i=gP(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),n=[];for(const s of i){const i=s.instruction.clone(!0,!1,!1);""!==(null!==(e=i.component.name)&&void 0!==e?e:"")&&(i.nextScopeInstructions=s.connectedScope.getRoutingInstructions(t),n.push(i))}return n}canUnload(t){return bP.run(t,(t=>bP.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.canUnload(e):e=>t.canUnload(e))))),(t=>t.previousValue.every((t=>t))))}unload(t){return bP.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.unload(e):e=>t.unload(e))))}matchScope(t,e=!1){const i=[];for(const n of t)n.scope===this?i.push(n):e&&n.hasNextScopeInstructions&&i.push(...this.matchScope(n.nextScopeInstructions,e));return i}findMatchingRoute(t){if(this.isViewportScope&&!this.passThroughScope)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());if(this.isViewport)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());for(const e of this.enabledChildren){const i=e.findMatchingRoute(t);if(null!==i)return i}return null}findMatchingRouteInRoutes(t,e){var i,n,s;if(!Array.isArray(e))return null;e=e.map((t=>this.ensureProperRoute(t)));const r=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const i of e)r.push({...t,path:i,handler:t}),""!==i&&r.push({...t,path:`${i}/*remainingPath`,handler:t})}const o=new rP;(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const a=e.find((e=>e.id===t));let l={params:{},endpoint:{}};if(null!=a)l.endpoint={route:{handler:a}};else{const e=new class{constructor(){this.rootState=new GO(null,null,""),this.cache=new Map}add(t){if(t instanceof Array)for(const e of t)this.$add(e);else this.$add(t);this.cache.clear()}$add(t){const e=t.path,i=new zO(t.path,!0===t.caseSensitive,t.handler),n=""===e?[""]:e.split("/").filter(XO),s=[];let r=this.rootState;for(const t of n)switch(r=r.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),i=e?t.slice(1,-1):t.slice(1);s.push(i),r=new eP(i,e).appendTo(r);break}case"*":{const e=t.slice(1);s.push(e),r=new iP(e).appendTo(r);break}default:r=new tP(t,i.caseSensitive).appendTo(r)}const o=new qO(i,s);r.setEndpoint(o)}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new QO(this.rootState);for(let i=0,n=t.length;i<n;++i){const n=t.charAt(i);if(e.advance(n),e.isEmpty)return null}const i=e.getSolution();if(null===i)return null;const{endpoint:n}=i,s=i.getParams();return new WO(n,s)}};e.add(r),l=e.recognize(t)}if(null!=l){o.match=l.endpoint.route.handler,o.matching=t;const r={...l.params};if(null!=r.remainingPath&&(o.remaining=r.remainingPath,Reflect.deleteProperty(r,"remainingPath"),o.matching=o.matching.slice(0,o.matching.indexOf(o.remaining))),o.params=r,null!=(null===(i=o.match)||void 0===i?void 0:i.redirectTo)){let t=null===(n=o.match)||void 0===n?void 0:n.redirectTo;return(null!==(s=o.remaining)&&void 0!==s?s:"").length>0&&(t+=`/${o.remaining}`),this.findMatchingRouteInRoutes(t,e)}}if(o.foundConfiguration){o.instructions=OP.clone(o.match.instructions,!1,!0);const t=o.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(o.params),e.route=o,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}o.instructions.length>0&&(o.instructions[0].routeStart=!0);const e=OP.parse(this.router,o.remaining);if(e.length>0){let t=o.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return o}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=OP.from(this.router,t.instructions)),t}}UP.lastId=0;class BP{constructor(t,e,i=0){this.taskQueue=t,this.item=e,this.cost=i,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class NP{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{var e;null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=null!==(e=this.processing.cost)&&void 0!==e?e:0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const i=Array.isArray(t),n=i?t:[t],s=n.map(((t,i)=>Array.isArray(e)?e[i]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of n)r.push(t instanceof BP?t:this.createQueueTask(t,s.shift()));return this.pending.push(...r),this.dequeue(),i?r:r[0]}createQueueTask(t,e){return new BP(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,i){e(i),this.processing=null,this.dequeue()}}let VP=class{constructor(t,e,i,n,s){this.platform=t,this.window=e,this.history=i,this.location=n,this.ea=s,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls=new NP}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){var t,e;const{pathname:i,search:n,hash:s}=this.location,r=null!==(t=this.options.useUrlFragmentHash)&&void 0!==t&&t?s.slice(1):`${i}${n}`,o=null!==(e=this.options.useUrlFragmentHash)&&void 0!==e&&e?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new FP(i,n.slice(1),o,r)}async go(t,e=!1){const i=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const n=i,s=e;this.forwardState({eventTask:n,suppressPopstate:s}),t.resolve()},e=>{const i=this.history,n=t;i.go(n),e.resolve()}],[0,1]),i.wait()}async pushNavigatorState(t){const{title:e,path:i}=t.navigations[t.navigationIndex],n=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((s=>{const r=this.history,o=t,a=e||"",l=`${n}${i}`;try{r.pushState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,l),this.setTitle(a)}s.resolve()}),1).wait()}async replaceNavigatorState(t,e,i){const n=t.navigations[t.navigationIndex];null!=e||(e=n.title),null!=i||(i=n.path);const s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((n=>{const r=this.history,o=t,a=e||"",l=`${s}${i}`;try{r.replaceState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,l),this.setTitle(a)}n.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const i=t;await this.popState(i),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:i}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async n=>{i||this.notifySubscribers(t),null!==e&&await e.execute(),n.resolve()}),1)}notifySubscribers(t){this.ea.publish(DP.eventName,DP.create(this.viewerState,t,this.history.state))}async popState(t){var e,i;await this.go(-1,!0);const n=this.history.state,s=null===(e=null==n?void 0:n.navigations)||void 0===e?void 0:e[null!==(i=null==n?void 0:n.navigationIndex)&&void 0!==i?i:0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(n)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,i){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${i}`)}}};VP=oP([aP(0,KC),aP(1,LE),aP(2,jE),aP(3,ME),aP(4,cy)],VP);class FP{constructor(t,e,i,n){this.path=t,this.query=e,this.hash=i,this.instruction=n}}class DP{constructor(t,e,i,n){this.eventName=t,this.viewerState=e,this.event=i,this.state=n}static create(t,e,i){return new DP(DP.eventName,t,e,i)}}DP.eventName="au:router:navigation-state-change";class HP{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class zP{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,i){const n=new zP(t,e);return i.syncStates.forEach((t=>n.addSyncState(t))),n}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new mP;this.syncStates.set(t,e)}addEndpoint(t){let e=this.entities.find((e=>e.endpoint===t));return void 0!==e||(e=new HP(t),this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this)),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&vP(this.entities,(t=>t===e))}setEndpointStep(t,e){let i=this.entities.find((e=>e.endpoint===t));void 0===i&&(i=this.addEndpoint(t)),i.step=e}addEndpointState(t,e){let i=this.entities.find((e=>e.endpoint===t));void 0===i&&(i=this.addEndpoint(t));const n=i.states.get(e);n instanceof mP&&n.resolve(),i.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const i=this.syncStates.get(t);if(void 0!==i){if(null!==e){const n=this.entities.find((t=>t.endpoint===e));if(null===(null==n?void 0:n.syncPromise)&&i.isPending)return n.syncingState=t,n.syncPromise=new mP,n.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),n.syncPromise.promise}return i.isPending?i.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let i=this.entities.find((e=>e.endpoint===t));if(null==i&&(i=this.addEndpoint(t)),i.hasReachedState(e))return;let n=i.states.get(e);return null==n&&(n=new mP,i.states.set(e,n)),n.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0}cancel(){this.cancelled=!0,this.entities.forEach((t=>{var e,i;const n=t.endpoint.cancelContentChange(this,null!==(i=null===(e=t.step)||void 0===e?void 0:e.current)&&void 0!==i?i:null);n instanceof Promise&&n.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{var t;null===(t=this.navigation.process)||void 0===t||t.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,i){let n=[...this.appendedInstructions];t=[...t],e=[...e],i=[...i];const s=n.filter((t=>!t.default)),r=n.filter((t=>t.default));for(n=s.length>0?[...s]:[...r];n.length>0;){const s=n.shift();vP(this.appendedInstructions,(t=>t===s));const r=e.some((t=>t.sameEndpoint(s,!0))),o=t.find((t=>t.sameEndpoint(s,!0))),a=i.find((t=>t.sameEndpoint(s,!0)));s.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&vP(t,(t=>t===o)),void 0!==a&&vP(i,(t=>t===a)),null!==s.endpoint.instance?t.push(s):i.push(s))}return{matchedInstructions:t,earlierMatchedInstructions:e,remainingInstructions:i}}checkSyncState(t){var e;const i=this.syncStates.get(t);if(void 0!==i&&this.hasAllEndpoints&&i.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const i of this.entities)i.syncingState===t&&(null===(e=i.syncPromise)||void 0===e||e.resolve(),i.syncPromise=null,i.syncingState=null);i.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class qP{constructor(t,e,i){var n,s;this.hook=t,this.id=i,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of null!==(n=e.include)&&void 0!==n?n:[])this.includeTargets.push(new WP(t));for(const t of null!==(s=e.exclude)&&void 0!==s?s:[])this.excludeTargets.push(new WP(t))}static add(t,e){const i=new qP(t,null!=e?e:{},++this.lastIdentity);return this.hooks[i.type].push(i),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const i=this.hooks[e].findIndex((e=>e.id===t));i>=0&&this.hooks[e].splice(i,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,i){let n=i;for(const s of this.hooks[t])if(!s.wantsMatch||s.matches(i))if(n=await s.invoke(e,i),"boolean"==typeof n){if(!n)return!1}else i=n;return n}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}qP.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},qP.lastIdentity=0;class WP{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(fP.isType(t))this.componentType=t,this.componentName=fP.getName(t);else{const e=t;null!=e.component&&(this.componentType=fP.isType(e.component)?fP.getType(e.component):null,this.componentName=fP.getName(e.component)),null!=e.viewport&&(this.viewport=IP.isInstance(e.viewport)?e.viewport:null,this.viewportName=IP.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(OP.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class KP{static async getTitle(t,e,i){let n=await qP.invokeTransformTitle(t,e);if("string"!=typeof n){const t=KP.stringifyTitles(n,e,i);n=i.appTitle,n=n.replace(/\${componentTitles}/g,t),n=n.replace(/\${appTitleSeparator}/g,""!==t?i.appTitleSeparator:"")}return n=await qP.invokeTransformTitle(n,e),n}static stringifyTitles(t,e,i){const n=t.map((t=>KP.stringifyTitle(t,e,i))).filter((t=>{var e;return(null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0)>0}));return n.join(" + ")}static stringifyTitle(t,e,i){const n=t.nextScopeInstructions;let s=KP.resolveTitle(t,e,i);if(Array.isArray(n)&&n.length>0){let t=KP.stringifyTitles(n,e,i);t.length>0&&(1!==n.length&&(t=`[ ${t} ]`),s=s.length>0?"top-down"===i.componentTitleOrder?s+i.componentTitleSeparator+t:t+i.componentTitleSeparator+s:t)}return s}static resolveTitle(t,e,i){let n=t.getTitle(e);return null!=i.transformTitle&&(n=i.transformTitle(n,t,e)),n}}const ZP=ib.createInterface("IRouter",(t=>t.singleton(_P)));class _P{constructor(t,e,i,n,s,r){this.container=t,this.ea=e,this.navigator=i,this.viewer=n,this.store=s,this.configuration=r,this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.handleNavigatorNavigateEvent=t=>{this.processNavigation(t.navigation).catch((t=>{throw t}))},this.handleNavigatorStateChangeEvent=t=>{var e;if(null!=(null===(e=t.state)||void 0===e?void 0:e.navigationIndex)){const e=AP.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{var e;this.loadedFirst=!0;const i=this.configuration.options,n=zP.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(n),n.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(JP.eventName,JP.create(t));let s="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await qP.invokeTransformFromUrl(t.instruction,n.navigation);const r=i.basePath;null!==r&&"string"==typeof s&&s.startsWith(r)&&!i.useUrlFragmentHash&&(s=s.slice(r.length)),"/"===s&&(s=""),"string"==typeof s&&(s=""===s?[new OP("")]:OP.parse(this,s)),null!==(e=t.scope)&&void 0!==e||(t.scope=this.rootScope.scope);const o=await t.scope.processInstructions(s,t,n);return bP.run(null,(()=>(n.finalEndpoint(),n.waitForSyncState("completed"))),(()=>(n.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&o.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(var t;this.coordinators.length>0&&this.coordinators[0].completed;){const e=this.coordinators.shift();await this.navigator.finalize(e.navigation,!1),this.ea.publish(iL.eventName,iL.create(e.navigation)),this.ea.publish(tL.eventName,tL.create(e.navigation)),null===(t=e.navigation.process)||void 0===t||t.resolve(!0)}}))}}static get inject(){return[rb,cy,LP,VP,VP,bL]}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw new Error("Router has already been started");this.isActive=!0;const t=this.container.get(bE);this.rootScope=new SP(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const i=new URL(t.host.baseURI);e.basePath=i.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.navigatorStateChangeEventSubscription=this.ea.subscribe(DP.eventName,this.handleNavigatorStateChangeEvent),this.navigatorNavigateEventSubscription=this.ea.subscribe(PP.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(GP.eventName,GP.create())}stop(){if(!this.isActive)throw new Error("Router has not been started");this.ea.publish(XP.eventName,XP.create()),this.navigator.stop(),this.viewer.stop(),this.navigatorStateChangeEventSubscription.dispose(),this.navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,i=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,i}getEndpoint(t,e){var i;return null!==(i=this.allEndpoints(t).find((t=>t.name===e)))&&void 0!==i?i:null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,e,i,n,s){const r=i.container,o=(r.has(_P.closestEndpointKey,!0)?r.get(_P.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=o.addEndpoint(e,n,i,s),Ib.instance(_P.closestEndpointKey,t).register(r)),t}disconnectEndpoint(t,e,i){if(!e.connectedScope.parent.removeEndpoint(t,e,i))throw new Error("Failed to remove endpoint: "+e.name)}async load(t,e){var i,n,s;e=null!=e?e:{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let r=null;if(({instructions:t,scope:r}=this.applyLoadOptions(t,e)),null!==(i=e.append)&&void 0!==i&&i&&(!this.loadedFirst||this.isNavigating))return t=OP.from(this,t),this.appendInstructions(t,r),Promise.resolve();const o=AP.create({instruction:t,fullStateInstruction:"",scope:r,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:null!==(n=e.replacing)&&void 0!==n&&n||e.replace,repeating:e.append,fromBrowser:null!==(s=e.fromBrowser)&&void 0!==s&&s,origin:e.origin,completed:!1});return this.navigator.navigate(o)}applyLoadOptions(t,e,i=!0){var n,s,r;"origin"in(e=null!=e?e:{})&&!("context"in e)&&(e.context=e.origin);let o=null!==(s=UP.for(null!==(n=e.context)&&void 0!==n?n:null))&&void 0!==s?s:null;if("string"==typeof t){if(t.startsWith("/"))o=null;else{if(t.startsWith("."))for(t.startsWith("./")&&(t=t.slice(2));t.startsWith("../");)o=null!==(r=null==o?void 0:o.parent)&&void 0!==r?r:o,t=t.slice(3);null!=(null==o?void 0:o.path)&&(t=`${o.path}/${t}`,o=null)}if(!i){t=OP.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}}else{t=OP.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}return{instructions:t,scope:o}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw new Error(`Parameter instructions to checkActivate can not be a string ('${t}')!`);e=null!=e?e:{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>{var e;return null!==(e=t.scope)&&void 0!==e?e:t.scope=this.rootScope.scope}));const i=gP(t.map((t=>t.scope)));for(const e of i){const i=e.matchScope(t,!1),n=e.matchScope(this.activeComponents,!0);if(!OP.contains(this,n,i,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(nL.eventName,nL.create(t)),this.ea.publish(tL.eventName,tL.create(t)),function(t){const e=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return e.remainingInstructions=t,console.log(e,e.remainingInstructions),e}(e)}cancelNavigation(t,e){e.cancel(),this.ea.publish(eL.eventName,eL.create(t)),this.ea.publish(tL.eventName,tL.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const i of t)null===i.scope&&(i.scope=e);let i=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){i=this.coordinators[t];break}if(null===i){if(this.loadedFirst)throw Error("Failed to append routing instructions to coordinator");this.appendedInstructions.push(...t)}null==i||i.enqueueAppendedInstructions(t)}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.configuration.options.useConfiguredRoutes&&this.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}async updateNavigation(t){var e,i,n,s,r,o,a;this.rootScope.scope.reparentRoutingInstructions();const l=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:c}=this.rootScope.scope.matchEndpoints(l,[],!0),h=100;for(;c.length>0;){if(0==h--)throw new Error("Failed to find viewport when updating viewer paths.");c=c.map((t=>{var e;const{matchedInstructions:i}=t.endpoint.instance.scope.matchEndpoints(null!==(e=t.nextScopeInstructions)&&void 0!==e?e:[],[],!0);return i})).flat()}t.timestamp>=(null!==(i=null===(e=this.activeNavigation)||void 0===e?void 0:e.timestamp)&&void 0!==i?i:0)&&(this.activeNavigation=t,this.activeComponents=l);let u=await qP.invokeTransformToUrl(l,t);if("string"!=typeof u&&(u=OP.stringify(this,u,!1,!0)),u=await qP.invokeTransformToUrl(u,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[i,n]of Object.entries(t.parameters)){i=encodeURIComponent(i),Array.isArray(n)||(n=[n]);for(const t of n)e.append(i,encodeURIComponent(t))}t.query=e.toString()}let d=`${this.configuration.options.basePath}/`;(null===d||""!==u&&"/"===u[0]||this.configuration.options.useUrlFragmentHash)&&(d="");const p=(null!==(s=null===(n=t.query)||void 0===n?void 0:n.length)&&void 0!==s?s:0)>0?"?"+t.query:"",f=(null!==(o=null===(r=t.fragment)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>0?"#"+t.fragment:"";t.path=d+u+p+f;const v=[OP.create(OP.clear(this))];if(v.push(...OP.clone(l,this.statefulHistory)),t.fullStateInstruction=v,null===(null!==(a=t.title)&&void 0!==a?a:null)){const e=await KP.getTitle(l,t,this.configuration.options.title);null!==e&&(t.title=e)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[i,n]=t.split("#");t=i,e.fragment=n}return t}extractQuery(t,e){var i;if("string"==typeof t&&null==e.query){const[i,n]=t.split("?");t=i,e.query=n}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(null!==(i=e.parameters)&&void 0!==i||(e.parameters={}),new URLSearchParams(e.query).forEach(((t,i)=>{i=decodeURIComponent(i),t=decodeURIComponent(t),i in e.parameters?(Array.isArray(e.parameters[i])||(e.parameters[i]=[e.parameters[i]]),e.parameters[i].push(t)):e.parameters[i]=t}))),t}}_P.closestEndpointKey=Zm.annotation.keyFor("closest-endpoint");class QP{constructor(t){this.eventName=t}}class GP extends QP{static create(){return new GP(this.eventName)}}GP.eventName="au:router:router-start";class XP extends QP{static create(){return new XP(this.eventName)}}XP.eventName="au:router:router-stop";class YP{constructor(t,e){this.eventName=t,this.navigation=e}}class JP extends YP{static create(t){return new JP(this.eventName,t)}}JP.eventName="au:router:navigation-start";class tL extends YP{static create(t){return new tL(this.eventName,t)}}tL.eventName="au:router:navigation-end";class eL extends YP{static create(t){return new eL(this.eventName,t)}}eL.eventName="au:router:navigation-cancel";class iL extends YP{static create(t){return new iL(this.eventName,t)}}iL.eventName="au:router:navigation-complete";class nL extends YP{static create(t){return new nL(this.eventName,t)}}nL.eventName="au:router:navigation-error";const sL=ib.createInterface("ILinkHandler",(t=>t.singleton(rL)));let rL=class{constructor(t,e){this.window=t,this.router=e}handleEvent(t){this.handleClick(t)}handleClick(t){var e,i;if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const n=t.currentTarget;if(n.hasAttribute("external"))return;const s=null!==(e=n.getAttribute("target"))&&void 0!==e?e:"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const r=KA.for(n,"load"),o=void 0!==r?r.viewModel.value:null,a=this.router.configuration.options.useHref&&n.hasAttribute("href")?n.getAttribute("href"):null;if(!(null!==o&&0!==o.length||null!==a&&0!==a.length))return;t.preventDefault();let l=null!==(i=null!=o?o:a)&&void 0!==i?i:"";"string"==typeof l&&l.startsWith("#")&&(l=l.slice(1),l.startsWith("/")||(l=`/${l}`)),this.router.load(l,{origin:n}).catch((t=>{throw t}))}};var oL;function aL(t,e,i,n,s=!1){var r;if(s)return""===e;if(i)return e;const o=null!==(r=n.getAttribute(t))&&void 0!==r?r:"";return o.length>0?o:e}function lL(t,e){if(!t.isActive)return new Promise((t=>{const i=e.subscribe(GP.eventName,(()=>{t(),i.dispose()}))}))}function cL(t,e,i,n){var s,r;let o=null===(r=null===(s=KA.for(i,"considered-active"))||void 0===s?void 0:s.viewModel)||void 0===r?void 0:r.value;void 0===o&&(o=n);const a=t.applyLoadOptions(o,{context:e}),l=OP.from(t,a.instructions);for(const t of l)null===t.scope&&(t.scope=a.scope);return l}function hL(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return null!=e||(e=t),e}rL=oP([aP(0,LE),aP(1,ZP)],rL),function(t){t.default="default",t.disallow="disallow",t.reload="reload",t.refresh="refresh"}(oL||(oL={}));const uL=l$.createInjectable();let dL=class{constructor(t,e,i,n,s,r){this.router=t,this.element=e,this.container=i,this.ea=n,this.parentViewport=s,this.instruction=r,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1}hydrated(t){this.controller=t,this.container=t.container;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new mP)),bP.run(null,(()=>lL(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e,i){return this.isBound=!0,bP.run(null,(()=>lL(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{var t;null!=(null===(t=this.endpoint)||void 0===t?void 0:t.activeResolve)&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{var e;if(null!==this.endpoint&&null===this.endpoint.getNextContent())return null===(e=this.endpoint.activate(null,t,this.controller,i,void 0))||void 0===e?void 0:e.asValue}))}detaching(t,e,i){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e,i)}unbinding(t,e,i){if(null!==this.endpoint)return this.disconnect(null)}dispose(){var t;null===(t=this.endpoint)||void 0===t||t.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,i=aL("name",this.name,t,e),n={};n.scope=!aL("no-scope",this.noScope,!1,e,!0),n.usedBy=aL("used-by",this.usedBy,t,e),n.default=aL("default",this.default,t,e),n.fallback=aL("fallback",this.fallback,t,e),n.noLink=aL("no-link",this.noLink,t,e,!0),n.noTitle=aL("no-title",this.noTitle,t,e,!0),n.noHistory=aL("no-history",this.noHistory,t,e,!0),n.stateful=aL("stateful",this.stateful,t,e,!0),Object.keys(n).forEach((t=>{void 0===n[t]&&delete n[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,i,n);const s=this.parentViewport;null!=s&&(vP(s.pendingChildren,(t=>t===this)),0===s.pendingChildren.length&&null!==s.pendingPromise&&(s.pendingPromise.resolve(),s.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const i=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const n in t)this.element.classList.toggle(`${i}-${n}`,e&&t[n])}};oP([dC],dL.prototype,"name",void 0),oP([dC],dL.prototype,"usedBy",void 0),oP([dC],dL.prototype,"default",void 0),oP([dC],dL.prototype,"fallback",void 0),oP([dC],dL.prototype,"noScope",void 0),oP([dC],dL.prototype,"noLink",void 0),oP([dC],dL.prototype,"noTitle",void 0),oP([dC],dL.prototype,"noHistory",void 0),oP([dC],dL.prototype,"stateful",void 0),dL=oP([GA({name:"au-viewport",injectable:uL}),aP(0,ZP),aP(1,CE),aP(2,rb),aP(3,cy),aP(4,uL),aP(5,_E)],dL);const pL=l$.createInjectable();let fL=class{constructor(t,e,i,n,s){this.router=t,this.element=e,this.container=i,this.parent=n,this.parentController=s,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e,i){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e,i){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let i=this.getAttribute("catches",this.catches);void 0!==i&&(e.catches=i),i=this.getAttribute("collection",this.collection,!0),void 0!==i&&(e.collection=i),e.source=this.source||null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,i=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(i)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};oP([dC],fL.prototype,"name",void 0),oP([dC],fL.prototype,"catches",void 0),oP([dC],fL.prototype,"collection",void 0),oP([dC],fL.prototype,"source",void 0),fL=oP([GA({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:pL}),aP(0,ZP),aP(1,CE),aP(2,rb),aP(3,pL),aP(4,iE)],fL);let vL=class{constructor(t,e,i,n){this.element=t,this.router=e,this.linkHandler=i,this.ea=n,this.hasHref=null,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(tL.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#${t}`),this.element.setAttribute("href",t)}}updateActive(){const t=KA.for(this.element,"load").parent,e=cL(this.router,t,this.element,this.value);hL(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}};oP([dC({mode:xw.toView})],vL.prototype,"value",void 0),vL=oP([FA("load"),aP(0,CE),aP(1,ZP),aP(2,sL),aP(3,cy)],vL);let gL=class{constructor(t,e,i,n){this.element=t,this.router=e,this.linkHandler=i,this.ea=n,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(tL.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){var t;this.element.removeEventListener("click",this.linkHandler),null===(t=this.routerNavigationSubscription)||void 0===t||t.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=KA.for(this.element,"href").parent,e=cL(this.router,t,this.element,this.value);hL(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){var t;const e=this.$controller.parent.children;return null!==(t=null==e?void 0:e.some((t=>1===t.vmKind&&t.viewModel instanceof vL)))&&void 0!==t&&t}};oP([dC({mode:xw.toView})],gL.prototype,"value",void 0),gL=oP([FA({name:"href",noMultiBindings:!0}),aP(0,CE),aP(1,ZP),aP(2,sL),aP(3,cy)],gL);let mL=class{};oP([dC({mode:xw.toView})],mL.prototype,"value",void 0),mL=oP([FA("considered-active")],mL);const bL=ib.createInterface("IRouterConfiguration",(t=>t.singleton(xL))),yL=[ZP],wL=[dL,fL,vL,gL,mL];class xL{static register(t){const e=t.get(bL);return e.options=xL.options,e.options.setRouterConfiguration(e),xL.options=dP.create(),t.register(...yL,...wL,TA.beforeActivate(ZP,xL.configurationCall),TA.afterActivate(ZP,(t=>t.initialLoad())),TA.afterDeactivate(ZP,(t=>t.stop())))}static customize(t){return void 0===t?(xL.options=dP.create(),xL.configurationCall=t=>{t.start()}):t instanceof Function?xL.configurationCall=t:(xL.options=dP.create(),xL.options.apply(t)),xL}static createContainer(){return this.register(ib.createContainer())}static for(t){return t instanceof _P?t.configuration:t.get(bL)}apply(t,e=!1){e&&(this.options=dP.create()),this.options.apply(t)}addHook(t,e){return qP.add(t,e)}removeHook(t){return qP.remove(t)}removeAllHooks(){return qP.removeAll()}}function kL(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function SL(t,e){return function(i,n){e(i,n,t)}}function CL(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}xL.options=dP.create(),xL.configurationCall=t=>{t.start()},Object.create,Object.create;var AL=i(3379),$L=i.n(AL),EL=i(7795),TL=i.n(EL),RL=i(569),IL=i.n(RL),OL=i(3565),PL=i.n(OL),LL=i(9216),ML=i.n(LL),jL=i(4589),UL=i.n(jL),BL=i(1138),NL={};NL.styleTagTransform=UL(),NL.setAttributes=PL(),NL.insert=IL().bind(null,"head"),NL.domAPI=TL(),NL.insertStyleElement=ML(),$L()(BL.Z,NL),BL.Z&&BL.Z.locals&&BL.Z.locals;var VL=i(6767),FL={};FL.styleTagTransform=UL(),FL.setAttributes=PL(),FL.insert=IL().bind(null,"head"),FL.domAPI=TL(),FL.insertStyleElement=ML(),$L()(VL.Z,FL),VL.Z&&VL.Z.locals&&VL.Z.locals;var DL=i(9909),HL={};HL.styleTagTransform=UL(),HL.setAttributes=PL(),HL.insert=IL().bind(null,"head"),HL.domAPI=TL(),HL.insertStyleElement=ML(),$L()(DL.Z,HL),DL.Z&&DL.Z.locals&&DL.Z.locals;const zL="radio-button",qL='<div class="container ${state} ${colorMode}"\r\n     pointerup.delegate="select()"\r\n     ref="element">\r\n</div>',WL=qL,KL=[];let ZL;function _L(t){ZL||(ZL=uh.define({name:zL,template:qL,dependencies:KL})),t.register(ZL)}class QL{constructor(){this.colorMode="color"}}kL([fl,CL("design:type",String)],QL.prototype,"colorMode",void 0);let GL=class extends QL{constructor(t){super(),this.ea=t,this.state="unselected",this.select=()=>{this.group?this.ea.publish("radio-button-selected",{group:this.group,source:this.element,value:this.value}):this.state="selected"}}bound(){this.ea.subscribe("radio-button-selected",(t=>{this.group==t.group&&(this.state=t.source===this.element?"selected":"unselected")}))}};kL([fl,CL("design:type",String)],GL.prototype,"state",void 0),kL([fl,CL("design:type",String)],GL.prototype,"group",void 0),kL([fl,CL("design:type",String)],GL.prototype,"value",void 0),GL=kL([Jc(t),SL(0,_i),CL("design:paramtypes",[Object])],GL);const XL="character-type-selector",YL='\r\n\r\n<div class="container">\r\n    <span>Magus</span> <radio-button group="character-type" state="${model == \'magus\' ? \'selected\' : \'unselected\'}" value="magus"></radio-button>\r\n    <span>Companion</span> <radio-button group="character-type" state="${model == \'companion\' ? \'selected\' : \'unselected\'}" value="companion"></radio-button>\r\n</div>',JL=YL,tM=[e];let eM;function iM(t){eM||(eM=uh.define({name:XL,template:YL,dependencies:tM})),t.register(eM)}function nM(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if("object"==typeof t){if("function"==typeof t[Symbol.iterator]){const e=[];if(t.length>0)for(const i of t)e.push(nM(i));return e}{const e=Object.keys(t),i={};if(e.length>0)for(const n of e)i[n]=nM(t[n]);return i}}return t}function sM(t){const e=nM(t.present);return e.character={type:"magus",physicalStatus:{fatigue:0,lightWounds:0,mediumWounds:0,heavyWounds:0},description:{name:"",description:""},abilities:[],personalityTraits:[],characteristics:{communication:{value:0,specialisation:"",agingPoints:0},dexterity:{value:0,specialisation:"",agingPoints:0},intelligence:{value:0,specialisation:"",agingPoints:0},perception:{value:0,specialisation:"",agingPoints:0},presence:{value:0,specialisation:"",agingPoints:0},quickness:{value:0,specialisation:"",agingPoints:0},stamina:{value:0,specialisation:"",agingPoints:0},strength:{value:0,specialisation:"",agingPoints:0}},flaws:[],virtues:[],arts:{creo:{level:0,xp:0,puissant:!1},muto:{level:0,xp:0,puissant:!1},rego:{level:0,xp:0,puissant:!1},intellego:{level:0,xp:0,puissant:!1},perdo:{level:0,xp:0,puissant:!1},animal:{level:0,xp:0,puissant:!1},auram:{level:0,xp:0,puissant:!1},aquam:{level:0,xp:0,puissant:!1},ignem:{level:0,xp:0,puissant:!1},terram:{level:0,xp:0,puissant:!1},herbam:{level:0,xp:0,puissant:!1},mentem:{level:0,xp:0,puissant:!1},corpus:{level:0,xp:0,puissant:!1},imaginem:{level:0,xp:0,puissant:!1},vim:{level:0,xp:0,puissant:!1}},spells:[],ageing:{age:25,apparentAge:25,birthYear:1195,currentYear:1220,decrepitudeLevel:0,decrepitudePoints:0,longevityModifier:0,ageingRollModifier:0,livingConditionModifier:0},confidence:{score:3},warping:{warpingPoints:0,warpingLevel:0,ongoingEffects:[]},activeMagic:[],xpEntries:[],notes:"",background:"",lab:{art1:{name:"",rating:0},art2:{name:"",rating:0},art3:{name:"",rating:0},art4:{name:"",rating:0},specialisation1:{name:"",rating:0},specialisation2:{name:"",rating:0},auraBonus:0,description:"",effectiveSafety:0,flaws:[],virtues:[],intelligenceBonus:0,labBaseQuality:0,livingConditionsModifier:0,magicTheory:0,occupiedSize:0,refinement:0,size:0,availableModifiers:[{name:"GQ"},{name:"Safety"},{name:"Health"},{name:"Aesthetics"},{name:"Upkeep"},{name:"Warping"}],researchProjects:[]},spellcastingStats:{arts:"",aura:0,ceremonial:!1,cyclicMagicVirtue:!1,focus:!1,largeGestures:!1,loudVoice:!1,similarFomulaicSpellBonus:0,spontaneousCastingTotal:0,staminaSpecialisation:!1,talismanBonus:0},sigil:""},Sg(t,e)}function rM(t,e){const i=nM(t.present);return i.character=e,Sg(t,i)}function oM(t,e){console.log("Saving characteristics",e);const i=nM(t.present);return i.character.characteristics=e,PM(i),HM(i),Sg(t,i)}function aM(t,e){console.log("Saving name",e);const i=nM(t.present);return i.character.description.name=e,Sg(t,i)}function lM(t,e){console.log("Saving abilities",e);const i=nM(t.present);return i.character.abilities=TM(e),HM(i),PM(i),Sg(t,i)}function cM(t,e){console.log("Saving personality traits",e);const i=nM(t.present);return i.character.personalityTraits=TM(e),Sg(t,i)}function hM(t,e){console.log("Saving virtues",e);const i=nM(t.present);return i.character.virtues=TM(e),RM(i),Sg(t,i)}function uM(t,e){console.log("Saving flaws",e);const i=nM(t.present);return i.character.flaws=TM(e),Sg(t,i)}function dM(t,e){console.log("Saving description",e);const i=nM(t.present);return i.character.description=e,Sg(t,i)}function pM(t,e){console.log("Saving physical status",e);const i=nM(t.present);return i.character.physicalStatus=e,PM(i),Sg(t,i)}function fM(t,e){console.log("Saving arts",e);const i=nM(t.present);return i.character.arts=e,PM(i),HM(i),Sg(t,i)}function vM(t,e){console.log("Saving spells",e);const i=nM(t.present);return i.character.spells=TM(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),PM(i),Sg(t,i)}function gM(t,e){console.log("Saving ageing",e);const i=nM(t.present);return i.character.ageing=e,RM(i),function(t){for(t.character.xpEntries||(t.character.xpEntries=[VM(t.character.ageing.currentYear,"Spring"),VM(t.character.ageing.currentYear,"Summer"),VM(t.character.ageing.currentYear,"Fall"),VM(t.character.ageing.currentYear,"Winter")]),t.character.xpEntries=t.character.xpEntries.filter((e=>e.year<t.character.ageing.currentYear+3)),0==t.character.xpEntries.length&&(t.character.xpEntries=[VM(t.character.ageing.currentYear,"Spring"),VM(t.character.ageing.currentYear,"Summer"),VM(t.character.ageing.currentYear,"Fall"),VM(t.character.ageing.currentYear,"Winter")]);t.character.xpEntries[t.character.xpEntries.length-1].year<t.character.ageing.currentYear+3;){let e=t.character.xpEntries[t.character.xpEntries.length-1].year+1;t.character.xpEntries.push(VM(e,"Spring")),t.character.xpEntries.push(VM(e,"Summer")),t.character.xpEntries.push(VM(e,"Fall")),t.character.xpEntries.push(VM(e,"Winter"))}t.character.xpEntries.forEach((e=>e.planningMode=e.year>=t.character.ageing.currentYear))}(i),Sg(t,i)}function mM(t,e){console.log("Saving confidence",e);const i=nM(t.present);return i.character.confidence=e,Sg(t,i)}function bM(t,e){console.log("Saving warping",e);const i=nM(t.present);return i.character.warping=e,i.character.warping.ongoingEffects=TM(e.ongoingEffects),function(t){t.character.warping.warpingLevel=OM(t.character.warping.warpingPoints,0)}(i),Sg(t,i)}function yM(t,e){console.log("Saving active magic",e);const i=nM(t.present);return i.character.activeMagic=TM(e),function(t){t.character.activeMagic.forEach((t=>t.penetration=t.active?t.penetration:0))}(i),Sg(t,i)}function wM(t,e){console.log("Saving xp entries",e);const i=nM(t.present);return i.character.xpEntries=e,Sg(t,i)}function xM(t,e){console.log("Saving notes",e);const i=nM(t.present);return i.character.notes=e,Sg(t,i)}function kM(t,e){console.log("Saving lab",e);const i=nM(t.present);return i.character.lab=e,i.character.lab.virtues=TM(i.character.lab.virtues),i.character.lab.flaws=TM(i.character.lab.flaws),i.character.lab.availableModifiers=i.character.lab.availableModifiers.filter((t=>""!=t.name)),i.character.lab.researchProjects=TM(i.character.lab.researchProjects),function(t){FM(t.character.lab.virtues,t.character.lab.availableModifiers),FM(t.character.lab.flaws,t.character.lab.availableModifiers),HM(t),function(t){var e,i,n,s,r,o,a,l,c,h,u,d,p,f,v,g;let m=t.character.lab,b=DM(m),y=m.virtues.concat(m.flaws).reduce(((t,e)=>t+e.cost),0);m.occupiedSize=m.size+y-m.refinement;let w=null!==(i=null===(e=b.find((t=>"Safety"==t.name)))||void 0===e?void 0:e.rating)&&void 0!==i?i:0,x=null!==(s=null===(n=b.find((t=>"Health"==t.name)))||void 0===n?void 0:n.rating)&&void 0!==s?s:0;m.livingConditionsModifier=x>=0?Math.floor(x/2):Math.ceil(x/2),m.effectiveSafety=w-Math.max(0,m.occupiedSize)+m.refinement,m.specialisation1.rating=null!==(o=null===(r=b.find((t=>t.name==m.specialisation1.name)))||void 0===r?void 0:r.rating)&&void 0!==o?o:0,m.specialisation2.rating=null!==(l=null===(a=b.find((t=>t.name==m.specialisation2.name)))||void 0===a?void 0:a.rating)&&void 0!==l?l:0,m.art1.rating=null!==(h=null===(c=b.find((t=>t.name==m.art1.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0,m.art2.rating=null!==(d=null===(u=b.find((t=>t.name==m.art2.name)))||void 0===u?void 0:u.rating)&&void 0!==d?d:0,m.art3.rating=null!==(f=null===(p=b.find((t=>t.name==m.art3.name)))||void 0===p?void 0:p.rating)&&void 0!==f?f:0,m.art4.rating=null!==(g=null===(v=b.find((t=>t.name==m.art4.name)))||void 0===v?void 0:v.rating)&&void 0!==g?g:0}(t),IM(t)}(i),Sg(t,i)}function SM(t,e){console.log("Importing character");const i=nM(t.present);return i.character=JSON.parse(e),Sg(t,i)}function CM(t,e){console.log("Saving spellcasting stats");const i=nM(t.present);return i.character.spellcastingStats=e,PM(i),Sg(t,i)}function AM(t,e){console.log("Saving character type");const i=nM(t.present);return i.character.type=e,PM(i),Sg(t,i)}function $M(t,e){console.log("Saving background");const i=nM(t.present);return i.character.background=e,Sg(t,i)}function EM(t,e){console.log("Saving sigil");const i=nM(t.present);return i.character.sigil=e,Sg(t,i)}function TM(t){return t.filter((t=>""!=t.name)).sort(((t,e)=>t.name.localeCompare(e.name)))}function RM(t){IM(t),function(t){t.character.ageing.decrepitudeLevel=OM(t.character.ageing.decrepitudePoints,0)}(t),function(t){t.character.ageing.age=t.character.ageing.currentYear-t.character.ageing.birthYear}(t)}function IM(t){let e=t.character.virtues.findIndex((t=>t.name.indexOf("Strong Faerie Blood")>=0))>=0?3:t.character.virtues.findIndex((t=>t.name.indexOf("Faerie Blood")>=0))>=0?1:0;t.character.ageing.ageingRollModifier=t.character.ageing.livingConditionModifier+t.character.ageing.longevityModifier+t.character.lab.livingConditionsModifier+e-Math.ceil(t.character.ageing.age/10)}function OM(t,e){let i=5*(e+1);return i>t?e:OM(t-i,e+1)}function PM(t){var e;(null===(e=null==t?void 0:t.character)||void 0===e?void 0:e.arts)&&(t.character.spellcastingStats.spontaneousCastingTotal=function(t){let e=t.character.spellcastingStats;return LM(t)+jM(t,e.arts,"",e.focus)+e.talismanBonus+e.similarFomulaicSpellBonus+(e.ceremonial?MM(t,"Ceremonial"):0)}(t),t.character.spells.forEach((e=>e.castingTotal=function(t,e){return LM(t)+jM(t,e.arts,e.prerequisites,e.focus)+e.attunementBonus+e.masteryLevel+(e.ritual?MM(t,"Ritual"):0)}(t,e))))}function LM(t){let e=t.character.spellcastingStats;return t.character.characteristics.stamina.value+function(t){let e=t.character.physicalStatus;return-e.lightWounds+-3*e.mediumWounds+-5*e.heavyWounds}(t)+function(t){let e=t.character.physicalStatus.fatigue;return e<=1?0:2===e?-1:3===e?-3:4===e?-5:0}(t)+e.aura+(e.cyclicMagicVirtue?3:0)+(e.staminaSpecialisation?1:0)+(e.largeGestures?1:0)+(e.loudVoice?1:0)}function MM(t,e){var i,n;let s=t.character.abilities.find((t=>"Artes Liberales"==t.name)),r=t.character.abilities.find((t=>"Philosophiae"==t.name)),o=(null==s?void 0:s.specialisation)==e?1:0,a=(null==r?void 0:r.specialisation)==e?1:0,l=(null==s?void 0:s.puissant)?3:0,c=(null==r?void 0:r.puissant)?3:0;return(null!==(i=null==s?void 0:s.level)&&void 0!==i?i:0)+o+l+(null!==(n=null==r?void 0:r.level)&&void 0!==n?n:0)+a+c}function jM(t,e,i,n){let s=UM(t,e),r=BM(t,e);if(null===s||null==r)return 0;let o=UM(t,i),a=BM(t,i),l=Math.min(s,null!=o?o:1e3),c=Math.min(r,null!=a?a:1e3);return l+c+(n?Math.min(l,c):0)}function UM(t,e){let i=t.character.arts;return e.indexOf("Cr")>=0?NM(i.creo):e.indexOf("In")>=0?NM(i.intellego):e.indexOf("Mu")>=0?NM(i.muto):e.indexOf("Pe")>=0?NM(i.perdo):e.indexOf("Re")>=0?NM(i.rego):null}function BM(t,e){let i=t.character.arts;return e.indexOf("An")>=0?NM(i.animal):e.indexOf("Aq")>=0?NM(i.aquam):e.indexOf("Au")>=0?NM(i.auram):e.indexOf("Co")>=0?NM(i.corpus):e.indexOf("He")>=0?NM(i.herbam):e.indexOf("Ig")>=0?NM(i.ignem):e.indexOf("Im")>=0?NM(i.imaginem):e.indexOf("Me")>=0?NM(i.mentem):e.indexOf("Te")>=0?NM(i.terram):e.indexOf("Vi")>=0?NM(i.vim):null}function NM(t){return t.level+(t.puissant?3:0)}function VM(t,e){return{year:t,xp:"",correspondence:"",description:"",plans:"",areaLore:"",season:e,planningMode:!0}}function FM(t,e){t.forEach((t=>{let i=t.modifiers.filter((t=>0!=t.rating));t.modifiers=e.map((t=>({name:t.name,rating:0}))),i.forEach((e=>{let i=t.modifiers.findIndex((t=>t.name==e.name));i>=0&&(t.modifiers[i].rating=e.rating)})),t.category.length>1&&("outfitting".startsWith(t.category.toLocaleLowerCase())&&(t.category="Outfitting"),"stucture".startsWith(t.category.toLocaleLowerCase())&&(t.category="Structure"),"supernatural".startsWith(t.category.toLocaleLowerCase())&&(t.category="Supernatural"))}))}function DM(t){return t.availableModifiers.map((e=>({name:e.name,rating:t.virtues.concat(t.flaws).reduce(((t,i)=>t.concat(i.modifiers.filter((t=>t.name==e.name)))),[]).reduce(((t,e)=>t+e.rating),0)})))}function HM(t){let e=t.character.lab;e.researchProjects.forEach((i=>{var n,s,r,o;let a=null!==(s=null===(n=t.character.abilities.find((t=>"Magic Theory"==t.name)))||void 0===n?void 0:n.level)&&void 0!==s?s:0,l=null!==(o=null===(r=DM(e).find((t=>"GQ"==t.name)))||void 0===r?void 0:r.rating)&&void 0!==o?o:0;i.artModifier=jM(t,i.arts,i.prerequisites,i.focus),i.labTotal=e.auraBonus+e.labBaseQuality+l+i.artModifier+i.labAssistantBonus+a+(i.magicTheorySpecialisation?1:0)+t.character.characteristics.intelligence.value+(i.intelligenceSpecialisation?1:0)+i.materialBonus+i.shapeBonus+i.similarResearchBonus+(i.talisman?5:0),i.surplusLabTotal=i.labTotal-i.level}))}let zM=class{constructor(t,e,i){this.store=t,this.pluckModel=e,this.saveAction=i,this.model=void 0,this.modelState=void 0,this.active=!1}stateChanged(t,e){t.present&&(this.modelState=this.pluckModel(t.present),this.hasChanges()&&(this.model=nM(this.modelState)))}bound(){this.active=!0,this.checkForChanges()}unbound(){this.active=!1}checkForChanges(){this.active&&(this.hasChanges()&&this.saveChanges(),setTimeout((()=>{this.checkForChanges()}),2e3))}saveChanges(){this.store.dispatch(this.saveAction,nM(this.model))}hasChanges(){return JSON.stringify(this.modelState)!==JSON.stringify(this.model)}};zM=kL([Fg(),CL("design:paramtypes",[Ng,Function,Function])],zM);let qM=class extends zM{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.type}),AM),this.ea=e}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"character-type"==t.group&&(this.model=t.value)}))}};qM=kL([Jc(n),SL(1,_i),CL("design:paramtypes",[Ng,Object])],qM);var WM=i(1525),KM={};KM.styleTagTransform=UL(),KM.setAttributes=PL(),KM.insert=IL().bind(null,"head"),KM.domAPI=TL(),KM.insertStyleElement=ML(),$L()(WM.Z,KM),WM.Z&&WM.Z.locals&&WM.Z.locals;const ZM="rune-edge",_M='<div class="container">\r\n</div>',QM=_M,GM=[];let XM;function YM(t){XM||(XM=uh.define({name:ZM,template:_M,dependencies:GM})),t.register(XM)}let JM=class{};JM=kL([Jc(r)],JM);var tj=i(6392),ej={};ej.styleTagTransform=UL(),ej.setAttributes=PL(),ej.insert=IL().bind(null,"head"),ej.domAPI=TL(),ej.insertStyleElement=ML(),$L()(tj.Z,ej),tj.Z&&tj.Z.locals&&tj.Z.locals;var ij=i(3349),nj={};nj.styleTagTransform=UL(),nj.setAttributes=PL(),nj.insert=IL().bind(null,"head"),nj.domAPI=TL(),nj.insertStyleElement=ML(),$L()(ij.Z,nj),ij.Z&&ij.Z.locals&&ij.Z.locals;var sj=i(835),rj={};rj.styleTagTransform=UL(),rj.setAttributes=PL(),rj.insert=IL().bind(null,"head"),rj.domAPI=TL(),rj.insertStyleElement=ML(),$L()(sj.Z,rj),sj.Z&&sj.Z.locals&&sj.Z.locals;var oj=i(1939),aj={};aj.styleTagTransform=UL(),aj.setAttributes=PL(),aj.insert=IL().bind(null,"head"),aj.domAPI=TL(),aj.insertStyleElement=ML(),$L()(oj.Z,aj),oj.Z&&oj.Z.locals&&oj.Z.locals;const lj="title",cj='<div class="title grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n    <span class="text">${text}</span>\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',hj=cj,uj=[];let dj;function pj(t){dj||(dj=uh.define({name:lj,template:cj,dependencies:uj})),t.register(dj)}let fj=class{};kL([fl,CL("design:type",String)],fj.prototype,"text",void 0),fj=kL([Jc(a)],fj);var vj=i(6140),gj={};gj.styleTagTransform=UL(),gj.setAttributes=PL(),gj.insert=IL().bind(null,"head"),gj.domAPI=TL(),gj.insertStyleElement=ML(),$L()(vj.Z,gj),vj.Z&&vj.Z.locals&&vj.Z.locals;const mj="footer",bj='<div class="grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',yj=bj,wj=[];let xj;function kj(t){xj||(xj=uh.define({name:mj,template:bj,dependencies:wj})),t.register(xj)}let Sj=class{};Sj=kL([Jc(c)],Sj);const Cj="text-box",Aj='\r\n\r\n\r\n<title text.bind="title"></title>\r\n<div class="container">\r\n    <textarea value.bind="text" cols="32" rows="8"></textarea>\r\n</div>\r\n<footer></footer>',$j=Aj,Ej=[l,h];let Tj;function Rj(t){Tj||(Tj=uh.define({name:Cj,template:Aj,dependencies:Ej})),t.register(Tj)}let Ij=class{};kL([fl,CL("design:type",String)],Ij.prototype,"title",void 0),kL([fl,CL("design:type",String)],Ij.prototype,"text",void 0),Ij=kL([Jc(u)],Ij);const Oj="notes-block",Pj='\r\n\r\n<text-box title="NOTES" text.two-way="model"></text-box>',Lj=Pj,Mj=[d];let jj;function Uj(t){jj||(jj=uh.define({name:Oj,template:Pj,dependencies:Mj})),t.register(jj)}let Bj=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.notes}),xM)}};Bj=kL([Jc(p),CL("design:paramtypes",[Ng])],Bj);var Nj=i(3260),Vj={};Vj.styleTagTransform=UL(),Vj.setAttributes=PL(),Vj.insert=IL().bind(null,"head"),Vj.domAPI=TL(),Vj.insertStyleElement=ML(),$L()(Nj.Z,Vj),Nj.Z&&Nj.Z.locals&&Nj.Z.locals;const Fj="background-block",Dj='\r\n\r\n<text-box title="BACKGROUND" text.two-way="model"></text-box>',Hj=Dj,zj=[d];let qj;function Wj(t){qj||(qj=uh.define({name:Fj,template:Dj,dependencies:zj})),t.register(qj)}let Kj=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.background}),$M)}};Kj=kL([Jc(v),CL("design:paramtypes",[Ng])],Kj);const Zj="notes",_j='\r\n\r\n\r\n<notes-block></notes-block>\r\n<background-block></background-block>\r\n\r\n<div style="clear: both;"></div>',Qj=_j,Gj=[f,g];let Xj;function Yj(t){Xj||(Xj=uh.define({name:Zj,template:_j,dependencies:Gj})),t.register(Xj)}let Jj=class{};Jj=kL([Jc(m)],Jj);const tU="page-header",eU='\r\n\r\n\r\n<div class="grid">\r\n    <div class="left-page-links">\r\n        <a class="page-link active" href="description">Description</a>\r\n        <a class="page-link" href="stats">Stats</a>\r\n        <a class="page-link" href="magic" if.bind="state.present.character.type == \'magus\'">Magic</a>\r\n        <a class="page-link" href="progression">Progression</a>\r\n    </div>\r\n    <div></div>\r\n    <div class="right-page-links">\r\n        <a class="page-link" href="lab" if.bind="state.present.character.type == \'magus\'">Lab</a>\r\n        <a class="page-link" href="gear">Gear</a>\r\n        <a class="page-link" href="notes">Notes</a>\r\n    </div>\r\n\r\n    <rune-edge></rune-edge>\r\n    <div class="name-box">\r\n        <input type="text" placeholder="Name" value.bind="name">\r\n    </div>\r\n    <rune-edge></rune-edge>\r\n</div>',iU=eU,nU=[o,b];let sU;function rU(t){sU||(sU=uh.define({name:tU,template:eU,dependencies:nU})),t.register(sU)}let oU=class{constructor(t){this.store=t,this.name="undefined",this.saveChanges=function(t,e=300){let i;return(...n)=>{clearTimeout(i),i=setTimeout((()=>{t.apply(this,n)}),e)}}((()=>this.store.dispatch(aM,this.name)),2e3)}stateChanged(t,e){t.present.character&&(this.name=t.present.character.description.name)}nameChanged(t,e){e!=t&&"undefined"!==e&&this.saveChanges()}};oU=kL([Jc(y),Fg(),function(t,e){return function(i,n,s){const r=null==n,o=r?i:i.constructor,a=new Qc(t,r?e:s.value);if(r){if(!hl(e)&&!(e in o.prototype))throw new Error(`AUR0773:${String(e)}@${o.name}}`)}else if(!hl(null==s?void 0:s.value))throw new Error(`AUR0774:${String(n)}`);Yc.add(o,a),_c.isType(o)&&_c.getDefinition(o).watches.push(a),uh.isType(o)&&uh.getDefinition(o).watches.push(a)}}("name","nameChanged"),CL("design:paramtypes",[Ng])],oU);const aU="description-block",lU='\r\n\r\n<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',cU=lU,hU=[d];let uU;function dU(t){uU||(uU=uh.define({name:aU,template:lU,dependencies:hU})),t.register(uU)}let pU=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),dM)}};pU=kL([Jc(x),CL("design:paramtypes",[Ng])],pU);var fU=i(2001),vU={};vU.styleTagTransform=UL(),vU.setAttributes=PL(),vU.insert=IL().bind(null,"head"),vU.domAPI=TL(),vU.insertStyleElement=ML(),$L()(fU.Z,vU),fU.Z&&fU.Z.locals&&fU.Z.locals;const gU="list",mU='\r\n\r\n\r\n<title text.bind="title"></title>\r\n<div class="container">\r\n    <div repeat.for="item of items">\r\n        <input class="list-entry" type="text" value.two-way="item.name" title="${item.name}">\r\n    </div>\r\n    <input type="text" class="add-item-input" placeholder="Add item" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',bU=mU,yU=[l,h];let wU;function xU(t){wU||(wU=uh.define({name:gU,template:mU,dependencies:yU})),t.register(wU)}let kU=class{constructor(){this.items=[],this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.items.push({name:this.newItemText}),this.items.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};kL([fl,CL("design:type",String)],kU.prototype,"title",void 0),kL([fl,CL("design:type",Array)],kU.prototype,"items",void 0),kU=kL([Jc(S)],kU);const SU="virtues-list",CU='\r\n\r\n<list title="VIRTUES" items.two-way="model"></list>',AU=CU,$U=[C];let EU;function TU(t){EU||(EU=uh.define({name:SU,template:CU,dependencies:$U})),t.register(EU)}let RU=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.virtues}),hM)}};RU=kL([Jc(A),CL("design:paramtypes",[Ng])],RU);const IU="flaws-list",OU='\r\n\r\n<list title="FLAWS" items.two-way="model"></list>',PU=OU,LU=[C];let MU;function jU(t){MU||(MU=uh.define({name:IU,template:OU,dependencies:LU})),t.register(MU)}let UU=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.flaws}),uM)}};UU=kL([Jc(E),CL("design:paramtypes",[Ng])],UU);var BU=i(5555),NU={};NU.styleTagTransform=UL(),NU.setAttributes=PL(),NU.insert=IL().bind(null,"head"),NU.domAPI=TL(),NU.insertStyleElement=ML(),$L()(BU.Z,NU),BU.Z&&BU.Z.locals&&BU.Z.locals;var VU=i(8908),FU={};FU.styleTagTransform=UL(),FU.setAttributes=PL(),FU.insert=IL().bind(null,"head"),FU.domAPI=TL(),FU.insertStyleElement=ML(),$L()(VU.Z,FU),VU.Z&&VU.Z.locals&&VU.Z.locals;const DU="primary-stat",HU='<div class="container ${active === true ? \'active\' : \'\'} ${readonly ? \'readonly\' : \'\'} ${mode} ${colorMode} ${size}"\r\n     pointerdown.delegate="press()"\r\n     ref="containerElement">\r\n    <span class="content numbers">${getValuePrefix()+value}</div>\r\n</div>\r\n<div class="overlay" if.bind="active"  pointerup.delegate="release()" pointermove.delegate="move($event)"></div>',zU=HU,qU=[];let WU;function KU(t){WU||(WU=uh.define({name:DU,template:HU,dependencies:qU})),t.register(WU)}let ZU=class extends QL{constructor(){super(...arguments),this.max=99,this.min=-99,this.mode="primary-angled",this.size="m",this.prefixPlus=!1,this.readonly=!1,this.active=!1,this.delta=0,this.press=()=>{this.readonly||(this.active=!0,this.originalValue=this.value,this.delta=0,window.addEventListener("pointerout",this.checkPointerOutsideWindow))},this.checkPointerOutsideWindow=t=>{(t.clientY<=0||t.clientX<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(window.removeEventListener("pointerout",this.checkPointerOutsideWindow),this.release())},this.release=()=>{this.readonly||(this.active=!1)},this.move=t=>{if(!this.active||this.readonly)return;this.delta+=t.movementY;let e=Math.round(this.originalValue-this.delta/10);this.value=Math.max(this.min,Math.min(this.max,e))},this.getValuePrefix=()=>this.prefixPlus&&this.value>0?"+":""}};kL([fl,CL("design:type",Number)],ZU.prototype,"value",void 0),kL([fl,CL("design:type",Number)],ZU.prototype,"max",void 0),kL([fl,CL("design:type",Number)],ZU.prototype,"min",void 0),kL([fl,CL("design:type",String)],ZU.prototype,"mode",void 0),kL([fl,CL("design:type",String)],ZU.prototype,"size",void 0),kL([fl,CL("design:type",Boolean)],ZU.prototype,"prefixPlus",void 0),kL([fl,CL("design:type",Boolean)],ZU.prototype,"readonly",void 0),ZU=kL([Jc(R)],ZU);const _U="personality-traits-list",QU='\r\n\r\n\r\n\r\n<title text="PERSONALITY"></title>\r\n<div class="container">\r\n    <div repeat.for="trait of model">\r\n        <input type="text" value.two-way="trait.name">\r\n        <primary-stat mode="secondary" size="s" value.two-way="trait.rating" prefix-plus.bind="true"></primary-stat>\r\n    </div>\r\n    <input type="text" class="add-item-input" placeholder="Add trait" keyup.delegate="keyPressed($event)" value.two-way="newTraitText">\r\n</div>\r\n<footer></footer>',GU=QU,XU=[l,h,I];let YU;function JU(t){YU||(YU=uh.define({name:_U,template:QU,dependencies:XU})),t.register(YU)}let tB=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.personalityTraits}),cM),this.newTraitText="",this.keyPressed=t=>{"Enter"==t.key&&this.newTraitText&&(this.model.push({name:this.newTraitText,rating:0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newTraitText="")}}};tB=kL([Jc(O),CL("design:paramtypes",[Ng])],tB);var eB=i(2410),iB={};iB.styleTagTransform=UL(),iB.setAttributes=PL(),iB.insert=IL().bind(null,"head"),iB.domAPI=TL(),iB.insertStyleElement=ML(),$L()(eB.Z,iB),eB.Z&&eB.Z.locals&&eB.Z.locals;const nB="warping-block",sB='\r\n\r\n\r\n\r\n<title text="WARPING"></title>\r\n<div class="container">\r\n    <div class="warping-level">\r\n        <primary-stat mode="secondary" value.two-way="model.warpingPoints" min="0" max="999" size="s" title="Warping Points"></primary-stat>\r\n        <primary-stat mode="secondary" readonly.bind="true" value.two-way="model.warpingLevel" min="0" size="m" title="Warping Level"></primary-stat>\r\n    </div>\r\n    <div class="warping-effect grid" repeat.for="effect of model.ongoingEffects">\r\n        <input class="name" type="text" value.bind="effect.name" placeholder="Name">\r\n        <primary-stat mode="secondary" value.two-way="effect.warpingPointsPerYear" min="1" size="s" title="Warping Points Per Year"></primary-stat>\r\n        <span class="text">/year</span>\r\n    </div>\r\n    <input class="add-effect-input" type="text" placeholder="Add ongoing effect" keyup.delegate="keyPressed($event)" value.two-way="newEffectText">\r\n</div>\r\n<footer></footer>',rB=sB,oB=[l,h,I];let aB;function lB(t){aB||(aB=uh.define({name:nB,template:sB,dependencies:oB})),t.register(aB)}let cB=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.warping}),bM),this.newEffectText="",this.keyPressed=t=>{"Enter"==t.key&&this.newEffectText&&(this.model.ongoingEffects.push({name:this.newEffectText,warpingPointsPerYear:1}),this.model.ongoingEffects.sort(((t,e)=>t.name.localeCompare(e.name))),this.newEffectText="")}}};cB=kL([Jc(L),CL("design:paramtypes",[Ng])],cB);const hB="description",uB='\r\n\r\n\r\n\r\n\r\n\r\n<description-block></description-block>\r\n<virtues-list></virtues-list>\r\n<flaws-list></flaws-list>\r\n<personality-traits-list></personality-traits-list>\r\n<warping-block></warping-block>\r\n\r\n<div style="clear: both;"></div>',dB=uB,pB=[k,$,T,P,M];let fB;function vB(t){fB||(fB=uh.define({name:hB,template:uB,dependencies:pB})),t.register(fB)}let gB=class{};gB=kL([Jc(j)],gB);var mB=i(927),bB={};bB.styleTagTransform=UL(),bB.setAttributes=PL(),bB.insert=IL().bind(null,"head"),bB.domAPI=TL(),bB.insertStyleElement=ML(),$L()(mB.Z,bB),mB.Z&&mB.Z.locals&&mB.Z.locals;var yB=i(288),wB={};wB.styleTagTransform=UL(),wB.setAttributes=PL(),wB.insert=IL().bind(null,"head"),wB.domAPI=TL(),wB.insertStyleElement=ML(),$L()(yB.Z,wB),yB.Z&&yB.Z.locals&&yB.Z.locals;const xB="checkbox",kB="<div class=\"container ${value ? 'checked' : 'unchecked'} ${readonly ? 'readonly' : ''} ${colorMode} ${size} ${mode}\" pointerup.delegate=\"toggle()\">\r\n</div>",SB=kB,CB=[];let AB;function $B(t){AB||(AB=uh.define({name:xB,template:kB,dependencies:CB})),t.register(AB)}let EB=class extends QL{constructor(){super(...arguments),this.value=!1,this.size="m",this.mode="regular",this.readonly=!1,this.toggle=()=>{this.readonly||(this.value=!this.value)}}};kL([fl,CL("design:type",Boolean)],EB.prototype,"value",void 0),kL([fl,CL("design:type",String)],EB.prototype,"size",void 0),kL([fl,CL("design:type",String)],EB.prototype,"mode",void 0),kL([fl,CL("design:type",Boolean)],EB.prototype,"readonly",void 0),EB=kL([Jc(B)],EB);const TB="abilities-block",RB='\r\n\r\n\r\n\r\n\r\n<title text="ABILITIES"></title>\r\n<div class="container">\r\n    <div class="ability ${item.level === 0 ? \'untrained\' : \'\'}" repeat.for="item of model">\r\n        <checkbox size="xs" mode="angled" value.two-way="item.puissant" title="Puissant ability"></checkbox>\r\n        <input class="name" type="text" value.bind="item.name">\r\n        <input class="specialisation" type="text" value.bind="item.specialisation" placeholder="Specialisation">\r\n        <primary-stat class="level" mode="secondary" value.two-way="item.level" min="0" size="s" title="Ability level"></primary-stat>\r\n        <primary-stat class="xp" mode="secondary" value.two-way="item.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n        <span class="puissant-label"><span class="numbers text" if.bind="item.puissant">+2</span></span>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add item" keyup.delegate="keyPressed($event)" value.two-way="newItemText">\r\n</div>\r\n<footer></footer>',IB=RB,OB=[l,h,I,N];let PB;function LB(t){PB||(PB=uh.define({name:TB,template:RB,dependencies:OB})),t.register(PB)}let MB=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.abilities}),lM),this.newItemText="",this.keyPressed=t=>{"Enter"==t.key&&this.newItemText&&(this.model.push({name:this.newItemText,specialisation:"",level:0,xp:0,puissant:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newItemText="")}}};MB=kL([Jc(V),CL("design:paramtypes",[Ng])],MB);var jB=i(3292),UB={};UB.styleTagTransform=UL(),UB.setAttributes=PL(),UB.insert=IL().bind(null,"head"),UB.domAPI=TL(),UB.insertStyleElement=ML(),$L()(jB.Z,UB),jB.Z&&jB.Z.locals&&jB.Z.locals;const BB="characteristics-block",NB='\r\n\r\n\r\n\r\n<title text="CHARACTERISTICS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <input type="text" class="specialisation" placeholder="Specialisation" value.bind="model.strength.specialisation">\r\n        <span class="text left-col">STR</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.strength.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.strength.value"></primary-stat>\r\n\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.dexterity.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.dexterity.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">DEX</span>\r\n        <input type="text" class="specialisation" placeholder="Specialisation" value.bind="model.dexterity.specialisation">\r\n\r\n        <input type="text" class="specialisation" placeholder="Specialisation" value.bind="model.stamina.specialisation">\r\n        <span class="text left-col">STA</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.stamina.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.stamina.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.quickness.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.quickness.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">QUI</span>\r\n        <input type="text" class="specialisation" placeholder="Specialisation" value.bind="model.quickness.specialisation">\r\n    </div>\r\n    <br/>\r\n    <div class="grid">\r\n        <input type="text" class="specialisation" placeholder="Specialisation" value.bind="model.intelligence.specialisation">\r\n        <span class="text left-col">INT</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.intelligence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.intelligence.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.presence.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.presence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">PRE</span>\r\n        <input type="text" class="specialisation" placeholder="Specialisation" value.bind="model.presence.specialisation">\r\n\r\n        <input type="text" class="specialisation" placeholder="Specialisation" value.bind="model.perception.specialisation">\r\n        <span class="text left-col">PER</span>\r\n        <primary-stat size="xs" min="0" value.two-way="model.perception.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.perception.value"></primary-stat>\r\n        \r\n        <primary-stat prefix-plus.bind="true" value.two-way="model.communication.value"></primary-stat>\r\n        <primary-stat size="xs" min="0" value.two-way="model.communication.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></primary-stat>\r\n        <span class="text">COM</span>\r\n        <input type="text" class="specialisation" placeholder="Specialisation" value.bind="model.communication.specialisation">\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',VB=NB,FB=[I,l,h];let DB;function HB(t){DB||(DB=uh.define({name:BB,template:NB,dependencies:FB})),t.register(DB)}let zB=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.characteristics}),oM)}};zB=kL([Jc(D),CL("design:paramtypes",[Ng])],zB);var qB=i(1459),WB={};WB.styleTagTransform=UL(),WB.setAttributes=PL(),WB.insert=IL().bind(null,"head"),WB.domAPI=TL(),WB.insertStyleElement=ML(),$L()(qB.Z,WB),qB.Z&&qB.Z.locals&&qB.Z.locals;const KB="fatigue-block",ZB='\r\n\r\n\r\n\r\n<title text="FATIGUE"></title>\r\n<div class="container grid text">\r\n    <span>Fresh (-0)</span><span class="right"></span><radio-button group="fatigue" state="${model.fatigue == 0 ? \'selected\' : \'unselected\'}" value="0"></radio-button>\r\n    <span>Winded (-0)</span><span class="right">2m</span><radio-button group="fatigue" state="${model.fatigue == 1 ? \'selected\' : \'unselected\'}" value="1"></radio-button>\r\n    <span>Weary (-1)</span><span class="right">10m</span><radio-button group="fatigue" state="${model.fatigue == 2 ? \'selected\' : \'unselected\'}" value="2"></radio-button>\r\n    <span>Tired (-3)</span><span class="right">30m</span><radio-button group="fatigue" state="${model.fatigue == 3 ? \'selected\' : \'unselected\'}" value="3"></radio-button>\r\n    <span>Dazed (-5)</span><span class="right">1h</span><radio-button group="fatigue" state="${model.fatigue == 4 ? \'selected\' : \'unselected\'}" value="4"></radio-button>\r\n    <span>Unconscious</span><span class="right">2h</span><radio-button group="fatigue" state="${model.fatigue == 5 ? \'selected\' : \'unselected\'}" value="5"></radio-button>\r\n</div>\r\n<footer></footer>',_B=ZB,QB=[e,l,h];let GB;function XB(t){GB||(GB=uh.define({name:KB,template:ZB,dependencies:QB})),t.register(GB)}let YB=class extends zM{constructor(t,e){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),pM),this.ea=e}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"fatigue"==t.group&&(this.model.fatigue=Number.parseInt(t.value))}))}};YB=kL([Jc(z),SL(1,_i),CL("design:paramtypes",[Ng,Object])],YB);var JB=i(6903),tN={};tN.styleTagTransform=UL(),tN.setAttributes=PL(),tN.insert=IL().bind(null,"head"),tN.domAPI=TL(),tN.insertStyleElement=ML(),$L()(JB.Z,tN),JB.Z&&JB.Z.locals&&JB.Z.locals;const eN="damage-block",iN='\r\n\r\n\r\n\r\n<title text="WOUNDS"></title>\r\n<div class="container text">\r\n    <span class="wound-type">Light</span><primary-stat value.two-way="model.lightWounds" min="0" size="s"></primary-stat>\r\n    <span class="wound-type">Medium</span><primary-stat value.two-way="model.mediumWounds" min="0" size="s"></primary-stat>\r\n    <span class="wound-type">Heavy</span><primary-stat value.two-way="model.heavyWounds" min="0" size="s"></primary-stat>\r\n</div>\r\n<footer></footer>',nN=iN,sN=[I,l,h];let rN;function oN(t){rN||(rN=uh.define({name:eN,template:iN,dependencies:sN})),t.register(rN)}let aN=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),pM)}};aN=kL([Jc(W),CL("design:paramtypes",[Ng])],aN);var lN=i(4397),cN={};cN.styleTagTransform=UL(),cN.setAttributes=PL(),cN.insert=IL().bind(null,"head"),cN.domAPI=TL(),cN.insertStyleElement=ML(),$L()(lN.Z,cN),lN.Z&&lN.Z.locals&&lN.Z.locals;const hN="confidence-block",uN='\r\n\r\n<primary-stat size="l" min="0" value.two-way="model.score" mode="primary-angled" title="Confidence Points"></primary-stat>',dN=uN,pN=[I];let fN;function vN(t){fN||(fN=uh.define({name:hN,template:uN,dependencies:pN})),t.register(fN)}let gN=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.confidence}),mM)}};gN=kL([Jc(Z),CL("design:paramtypes",[Ng])],gN);var mN=i(7804),bN={};bN.styleTagTransform=UL(),bN.setAttributes=PL(),bN.insert=IL().bind(null,"head"),bN.domAPI=TL(),bN.insertStyleElement=ML(),$L()(mN.Z,bN),mN.Z&&mN.Z.locals&&mN.Z.locals;const yN="active-magic-list",wN='\r\n\r\n\r\n\r\n\r\n<title text="ACTIVE MAGIC"></title>\r\n<div class="container">\r\n    <div class="active-magic grid" repeat.for="magic of model">\r\n        <checkbox size="s" mode="angled" value.two-way="magic.active" title="Active"></checkbox>\r\n        <input class="name" type="text" value.bind="magic.name" placeholder="Name">\r\n        <primary-stat mode="secondary" value.two-way="magic.penetration" min="0" size="s" title="Penetration" readonly.bind="!magic.active" color-mode="${magic.active ? \'color\' : \'monochrome\'}"></primary-stat>\r\n    </div>\r\n    <input class="add-magic-input" type="text" placeholder="Add active magic" keyup.delegate="keyPressed($event)" value.two-way="newMagicText">\r\n</div>\r\n<footer></footer>',xN=wN,kN=[l,h,I,N];let SN;function CN(t){SN||(SN=uh.define({name:yN,template:wN,dependencies:kN})),t.register(SN)}let AN=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.activeMagic}),yM),this.newMagicText="",this.keyPressed=t=>{this.model||(this.model=[]),"Enter"==t.key&&this.newMagicText&&(this.model.push({name:this.newMagicText,penetration:0,active:!0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newMagicText="")}}};AN=kL([Jc(Q),CL("design:paramtypes",[Ng])],AN);const $N="stats",EN='\r\n\r\n\r\n\r\n\r\n\r\n\r\n<abilities-block></abilities-block>\r\n<characteristics-block></characteristics-block>\r\n<fatigue-block></fatigue-block>\r\n<damage-block></damage-block>\r\n<confidence-block></confidence-block>\r\n<active-magic-list></active-magic-list>\r\n\r\n<div style="clear: both;"></div>',TN=EN,RN=[F,H,q,K,_,G];let IN;function ON(t){IN||(IN=uh.define({name:$N,template:EN,dependencies:RN})),t.register(IN)}let PN=class{};PN=kL([Jc(X)],PN);var LN=i(5185),MN={};MN.styleTagTransform=UL(),MN.setAttributes=PL(),MN.insert=IL().bind(null,"head"),MN.domAPI=TL(),MN.insertStyleElement=ML(),$L()(LN.Z,MN),LN.Z&&LN.Z.locals&&LN.Z.locals;const jN="arts-block",UN='\r\n\r\n\r\n\r\n\r\n<title text="ARTS"></title>\r\n<div class="container grid">\r\n    <checkbox size="xs" mode="angled" value.two-way="model.creo.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.creo.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.creo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.creo.level === 0 ? \'untrained\' : \'\'}">Creo</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.animal.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.animal.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.animal.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span  class="name text ${model.animal.level === 0 ? \'untrained\' : \'\'}">Animal</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.ignem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.ignem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.ignem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.ignem.level === 0 ? \'untrained\' : \'\'}">Ignem</span>\r\n\r\n   \r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.intellego.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.intellego.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.intellego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.intellego.level === 0 ? \'untrained\' : \'\'}">Intellego</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.aquam.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.aquam.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.aquam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.aquam.level === 0 ? \'untrained\' : \'\'}">Aquam</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.imaginem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.imaginem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.imaginem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.imaginem.level === 0 ? \'untrained\' : \'\'}">Imaginem</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.muto.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.muto.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.muto.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.muto.level === 0 ? \'untrained\' : \'\'}">Muto</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.auram.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.auram.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.auram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.auram.level === 0 ? \'untrained\' : \'\'}">Auram</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.mentem.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.mentem.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.mentem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.mentem.level === 0 ? \'untrained\' : \'\'}">Mentem</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.perdo.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.perdo.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.perdo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.perdo.level === 0 ? \'untrained\' : \'\'}">Perdo</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.corpus.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.corpus.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.corpus.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.corpus.level === 0 ? \'untrained\' : \'\'}">Corpus</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.terram.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.terram.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.terram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.terram.level === 0 ? \'untrained\' : \'\'}">Terram</span>\r\n\r\n\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.rego.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="primary-angled" value.two-way="model.rego.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.rego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.rego.level === 0 ? \'untrained\' : \'\'}">Rego</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.herbam.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.herbam.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.herbam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.herbam.level === 0 ? \'untrained\' : \'\'}">Herbam</span>\r\n\r\n    <span></span>\r\n\r\n    <checkbox size="xs" mode="angled" value.two-way="model.vim.puissant" title="Puissant Art"></checkbox>\r\n    <primary-stat class="level" mode="secondary-angled" value.two-way="model.vim.level" min="0" size="s" title="Level"></primary-stat>\r\n    <primary-stat class="xp" mode="secondary" value.two-way="model.vim.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n    <span class="name text ${model.vim.level === 0 ? \'untrained\' : \'\'}">Vim</span>\r\n</div>\r\n<footer></footer>',BN=UN,NN=[l,h,I,N];let VN;function FN(t){VN||(VN=uh.define({name:jN,template:UN,dependencies:NN})),t.register(VN)}let DN=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.arts}),fM)}};DN=kL([Jc(J),CL("design:paramtypes",[Ng])],DN);var HN=i(2244),zN={};zN.styleTagTransform=UL(),zN.setAttributes=PL(),zN.insert=IL().bind(null,"head"),zN.domAPI=TL(),zN.insertStyleElement=ML(),$L()(HN.Z,zN),HN.Z&&HN.Z.locals&&HN.Z.locals;const qN="spellcasting-modifiers-block",WN='\r\n\r\n\r\n\r\n\r\n<title text="SPELLCASTING STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Aura</span>\r\n        <span class="text">Stamina Specialisation</span>\r\n        <span class="text">Good Cycle</span>\r\n        <span class="text">Loud Voice</span>\r\n        <span class="text">Large Gestures</span>\r\n\r\n        <span class="text">Arts</span>\r\n        <span class="text">Ceremonial</span>\r\n        <span class="text">Talisman Bonus</span>\r\n        <span class="text">Similar Spell</span>\r\n        <span class="text">Focus</span>\r\n        <span class="text">Casting Total</span>\r\n\r\n\r\n        <primary-stat value.two-way="model.aura" mode="secondary" prefix-plus.bind="true"></primary-stat></primary-stat>\r\n        <checkbox value.two-way="model.staminaSpecialisation" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.cyclicMagicVirtue" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.loudVoice" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.largeGestures" mode="angled"></checkbox>\r\n\r\n        <input class="arts" type="text" value.bind="model.arts" placeholder="Arts">\r\n        <checkbox value.two-way="model.ceremonial" mode="angled" color-mode="monochrome"></checkbox>\r\n        <primary-stat value.two-way="model.talismanBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.similarFomulaicSpellBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n        <checkbox value.two-way="model.focus" mode="angled" color-mode="monochrome"></checkbox>\r\n        <primary-stat value.two-way="model.spontaneousCastingTotal" mode="primary-angled" readonly.bind="true" prefix-plus.bind="true" color-mode="monochrome"></primary-stat>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',KN=WN,ZN=[l,h,I,N];let _N;function QN(t){_N||(_N=uh.define({name:qN,template:WN,dependencies:ZN})),t.register(_N)}let GN=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellcastingStats}),CM)}};GN=kL([Jc(et),CL("design:paramtypes",[Ng])],GN);var XN=i(7624),YN={};YN.styleTagTransform=UL(),YN.setAttributes=PL(),YN.insert=IL().bind(null,"head"),YN.domAPI=TL(),YN.insertStyleElement=ML(),$L()(XN.Z,YN),XN.Z&&XN.Z.locals&&XN.Z.locals;const JN="spell-list",tV='\r\n\r\n\r\n\r\n\r\n<title text="SPELLS"></title>\r\n<div class="container">\r\n    <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n        <span class="form-header"></span>\r\n        <input class="name" type="text" value.bind="spell.name" placeholder="Name">\r\n        <checkbox size="xs" value.two-way="spell.focus" title="Focus"></checkbox>\r\n        <checkbox size="xs" value.two-way="spell.ritual" title="Ritual"></checkbox>\r\n        <input class="arts" type="text" value.bind="spell.arts" placeholder="Arts">\r\n        <input class="prerequisites" type="text" value.bind="spell.prerequisites"  placeholder="Prereq" title="Prerequisites">\r\n        <span class="casting-total-label numbers text">+${spell.castingTotal}</span>\r\n        <primary-stat class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></primary-stat>\r\n        <primary-stat class="attunement-bonus" mode="secondary" value.two-way="spell.attunementBonus" min="0" size="xs" color-mode="monochrome" title="Attunement bonus"></primary-stat>\r\n        <input class="attunement" type="text" value.bind="spell.attunement" placeholder="Attunement">\r\n        <input class="masteries" type="text" value.bind="spell.masteries" placeholder="Masteries">\r\n        <primary-stat class="mastery-level" mode="secondary" value.two-way="spell.masteryLevel" min="0" size="s" color-mode="monochrome" title="Mastery level"></primary-stat>\r\n        <primary-stat class="xp" mode="secondary" value.two-way="spell.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></primary-stat>\r\n        <input class="range" type="text" value.bind="spell.range" placeholder="Range">\r\n        <input class="duration" type="text" value.bind="spell.duration" placeholder="Duration">\r\n        <input class="target" type="text" value.bind="spell.target" placeholder="Target">\r\n        <input class="notes" type="text" value.bind="spell.notes" placeholder="Notes" title="${spell.notes}">\r\n        <input class="sigil" type="text" value.bind="spell.sigil" placeholder="Sigil" title="${spell.sigil}">\r\n        <input class="page" type="text" value.bind="spell.pageNumber" placeholder="Page">\r\n        <input class="book" type="text" value.bind="spell.sourceBook" placeholder="Book">\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add spell" keyup.delegate="keyPressed($event)" value.two-way="newSpellText">\r\n</div>\r\n<footer></footer>',eV=tV,iV=[l,h,N,I];let nV;function sV(t){nV||(nV=uh.define({name:JN,template:tV,dependencies:iV})),t.register(nV)}let rV=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spells}),vM),this.newSpellText="",this.keyPressed=t=>{"Enter"==t.key&&this.newSpellText&&(this.model.push({name:this.newSpellText,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,notes:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))),this.newSpellText="")}}};rV=kL([Jc(nt),CL("design:paramtypes",[Ng])],rV);var oV=i(7266),aV={};aV.styleTagTransform=UL(),aV.setAttributes=PL(),aV.insert=IL().bind(null,"head"),aV.domAPI=TL(),aV.insertStyleElement=ML(),$L()(oV.Z,aV),oV.Z&&oV.Z.locals&&oV.Z.locals;const lV="sigil",cV='<div class="container" drop.delegate="onDrop($event)" active-drag.class="dragging" dragenter.delegate="dragging = true" dragleave.delegate="dragging = false">\r\n    <div class="sigil-image-placeholder" if.bind="!model"></div>\r\n    <img class="sigil-image" if.bind="model" src="${model}"/>\r\n</div>',hV=cV,uV=[];let dV;function pV(t){dV||(dV=uh.define({name:lV,template:cV,dependencies:uV})),t.register(dV)}let fV=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.sigil}),EM),this.dragging=!1,this.onDrop=t=>{var e=t.dataTransfer.getData("text");if(console.log(e),1!=t.dataTransfer.items.length)return;let i=t.dataTransfer.items[0];if("file"==i.kind&&i.type.startsWith("image")){var n=new FileReader;n.onload=()=>{this.model=n.result,this.dragging=!1},n.readAsDataURL(i.getAsFile())}}}};fV=kL([Jc(rt),CL("design:paramtypes",[Ng])],fV);const vV="magic",gV='\r\n\r\n\r\n\r\n\r\n<arts-block></arts-block>\r\n<spellcasting-modifiers-block></spellcasting-modifiers-block>\r\n<spell-list></spell-list>\r\n<sigil></sigil>\r\n\r\n<div style="clear: both;"></div>',mV=gV,bV=[tt,it,st,ot];let yV;function wV(t){yV||(yV=uh.define({name:vV,template:gV,dependencies:bV})),t.register(yV)}let xV=class{};xV=kL([Jc(at)],xV);var kV=i(8412),SV={};SV.styleTagTransform=UL(),SV.setAttributes=PL(),SV.insert=IL().bind(null,"head"),SV.domAPI=TL(),SV.insertStyleElement=ML(),$L()(kV.Z,SV),kV.Z&&kV.Z.locals&&kV.Z.locals;const CV="lab-stats",AV='\r\n\r\n\r\n\r\n<title text="LAB STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Size</span>\r\n        <span class="text">Refinement</span>\r\n        <span class="text">Occupied Size</span>\r\n        <span class="text">Effective Safety</span>\r\n        <span class="text">Living Conditions Modifier</span>\r\n        <span class="text">Specialisation 1</span>\r\n        <span class="text">Specialisation 2</span>\r\n        <span class="text">Art 1 (Any)</span>\r\n        <span class="text">Art 2 (Any)</span>\r\n        <span class="text">Art 3 (Form)</span>\r\n        <span class="text">Art 4 (Form)</span>\r\n\r\n        <primary-stat value.two-way="model.size" mode="primary-angled" min="-3"></primary-stat>\r\n        <primary-stat value.two-way="model.refinement" mode="primary-angled" min="0"></primary-stat>\r\n        <primary-stat value.two-way="model.occupiedSize" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.effectiveSafety" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></primary-stat>\r\n        <primary-stat value.two-way="model.livingConditionsModifier" mode="secondary-angled" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.specialisation1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.specialisation2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art3.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat value.two-way="model.art4.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></primary-stat>\r\n\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <input class="modifier-selector" type="text" value.bind="model.specialisation1.name" placeholder="Modifier">\r\n        <input class="modifier-selector" type="text" value.bind="model.specialisation2.name" placeholder="Modifier">\r\n        <input class="modifier-selector" type="text" value.bind="model.art1.name" placeholder="Modifier">\r\n        <input class="modifier-selector" type="text" value.bind="model.art2.name" placeholder="Modifier">\r\n        <input class="modifier-selector" type="text" value.bind="model.art3.name" placeholder="Modifier">\r\n        <input class="modifier-selector" type="text" value.bind="model.art4.name" placeholder="Modifier">\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',$V=AV,EV=[l,h,I];let TV;function RV(t){TV||(TV=uh.define({name:CV,template:AV,dependencies:EV})),t.register(TV)}let IV=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),kM)}};IV=kL([Jc(ct),CL("design:paramtypes",[Ng])],IV);var OV=i(4467),PV={};PV.styleTagTransform=UL(),PV.setAttributes=PL(),PV.insert=IL().bind(null,"head"),PV.domAPI=TL(),PV.insertStyleElement=ML(),$L()(OV.Z,PV),OV.Z&&OV.Z.locals&&OV.Z.locals;const LV="research-projects",MV='\r\n\r\n\r\n\r\n\r\n<title text="RESEARCH PROJECTS"></title>\r\n<div class="container">\r\n    <primary-stat class="aura-bonus" mode="secondary" value.two-way="model.auraBonus" size="s" title="Aura Bonus" prefix-plus.bind="true"></primary-stat>\r\n\r\n    <div class="project grid" repeat.for="project of model.researchProjects">\r\n        <input class="name" type="text" value.bind="project.name" placeholder="Name">\r\n        <input class="arts" type="text" value.bind="project.arts" placeholder="Arts">\r\n        <input class="prerequisites" type="text" value.bind="project.prerequisites" placeholder="Prereq">\r\n        <primary-stat class="level" mode="secondary" value.two-way="project.level" min="1" size="m" title="Level"></primary-stat>\r\n\r\n        <checkbox value.two-way="project.focus" title="Focus"></checkbox>\r\n        <primary-stat class="specialisation-bonus" mode="secondary" value.two-way="project.specialisationBonus" min="0" size="s" title="Lab Specialisation Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <checkbox value.two-way="project.intelligenceSpecialisation" title="Intelligence Specialisation"></checkbox>\r\n        <checkbox value.two-way="project.magicTheorySpecialisation" title="Magic Theory Specialisation"></checkbox>\r\n        <checkbox value.two-way="project.talisman" title="Talisman"></checkbox>\r\n        <primary-stat class="similar-research-bonus" mode="secondary" value.two-way="project.similarResearchBonus" min="0" size="s" title="Similar Research Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <input class="material" type="text" value.bind="project.material" placeholder="Material">\r\n        <primary-stat class="material-bonus" mode="secondary" value.two-way="project.materialBonus" min="0" size="s" title="Material Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <input class="shape" type="text" value.bind="project.shape" placeholder="Shape">\r\n        <primary-stat class="shape-bonus" mode="secondary" value.two-way="project.shapeBonus" min="0" size="s" title="Shape Bonus" prefix-plus.bind="true"></primary-stat>\r\n        <primary-stat class="lab-assistant-bonus" mode="secondary" value.two-way="project.labAssistantBonus" min="0" size="s" title="Lab Assistant Bonus" prefix-plus.bind="true"></primary-stat>\r\n        \r\n        <primary-stat class="total" mode="primary" readonly.bind="true" value.two-way="project.labTotal" min="0" size="m" title="Lab Total"></primary-stat>\r\n        <primary-stat class="surplus" mode="secondary" readonly.bind="true" value.two-way="project.surplusLabTotal" min="0" size="s" title="Surplus Lab Total"></primary-stat>\r\n        <primary-stat class="accumulated-total" mode="secondary" value.two-way="project.accumulatedLabTotal" min="0" size="s" title="Accumulated Lab Total"></primary-stat>\r\n        \r\n        <input class="description" type="text" value.bind="project.description" placeholder="Description" title="${project.description}">\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add project" keyup.delegate="keyPressed($event)" value.two-way="newProjectText">\r\n</div>\r\n<footer></footer>',jV=MV,UV=[l,h,N,I];let BV;function NV(t){BV||(BV=uh.define({name:LV,template:MV,dependencies:UV})),t.register(BV)}let VV=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),kM),this.newProjectText="",this.keyPressed=t=>{"Enter"==t.key&&this.newProjectText&&(this.model.researchProjects||(this.model.researchProjects=[]),this.model.researchProjects.push({name:this.newProjectText,description:"",accumulatedLabTotal:0,surplusLabTotal:0,artModifier:0,arts:"",prerequisites:"",focus:!1,labTotal:0,labAssistantBonus:0,magicTheorySpecialisation:!1,intelligenceSpecialisation:!0,material:"",materialBonus:0,shape:"",shapeBonus:0,similarResearchBonus:0,specialisationBonus:0,talisman:!1,level:1}),this.newProjectText="")}}};VV=kL([Jc(ut),CL("design:paramtypes",[Ng])],VV);var FV=i(6964),DV={};DV.styleTagTransform=UL(),DV.setAttributes=PL(),DV.insert=IL().bind(null,"head"),DV.domAPI=TL(),DV.insertStyleElement=ML(),$L()(FV.Z,DV),FV.Z&&FV.Z.locals&&FV.Z.locals;const HV="lab-modifications-list",zV='\r\n\r\n\r\n\r\n\r\n<title text="LAB MODIFICATIONS"></title>\r\n<div class="container">\r\n    <input class="add-item-input add-modifier-input" type="text" keyup.delegate="keyPressed($event, \'modifier\')" value.two-way="newModifierText" title="Add Modifier Column">\r\n    <div class="modifier-titles">\r\n        <input type="text" repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.bind="modifier.name" title="${modifier.name}">\r\n    </div>\r\n\r\n    <label class="text title">VIRTUES</label>\r\n    <div class="virtue grid" repeat.for="virtue of model.virtues">\r\n        <input class="name" type="text" value.bind="virtue.name" placeholder="Name">\r\n        <input class="category" type="text" value.bind="virtue.category" placeholder="Category">\r\n        <input class="description" type="text" value.bind="virtue.description" placeholder="Description">\r\n        <primary-stat class="cost" mode="secondary" value.two-way="virtue.cost" min="0" size="s" title="Cost"></primary-stat>\r\n        <primary-stat class="modifier" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of virtue.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></primary-stat>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add virtue" keyup.delegate="keyPressed($event, \'virtue\')" value.two-way="newVirtueText">\r\n\r\n    <label class="text title">FLAWS</label>\r\n    <div class="flaw grid" repeat.for="flaw of model.flaws">\r\n        <input class="name" type="text" value.bind="flaw.name" placeholder="Name">\r\n        <input class="category" type="text" value.bind="flaw.category" placeholder="Category">\r\n        <input class="description" type="text" value.bind="flaw.description" placeholder="Description">\r\n        <primary-stat class="cost" mode="secondary" value.two-way="flaw.cost" max="0" size="s" title="Cost"></primary-stat>\r\n        <primary-stat class="modifier" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of flaw.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></primary-stat>\r\n    </div>\r\n    <input class="add-item-input" type="text" placeholder="Add flaw" keyup.delegate="keyPressed($event, \'flaw\')" value.two-way="newFlawText">\r\n\r\n    <div class="modifier-totals">\r\n        <span class="numbers modifier-total" repeat.for="total of totals" class="modifier-title text">${total}</span>\r\n    </div>\r\n</div>\r\n<footer></footer>',qV=zV,WV=[l,h,N,I];let KV;function ZV(t){KV||(KV=uh.define({name:HV,template:zV,dependencies:WV})),t.register(KV)}let _V=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),kM),this.newVirtueText="",this.newFlawText="",this.newModifierText="",this.keyPressed=(t,e)=>{"Enter"==t.key&&("virtue"==e&&this.newVirtueText&&(this.model.virtues.push({name:this.newVirtueText,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Virtue"}),this.model.virtues.sort(((t,e)=>t.name.localeCompare(e.name))),this.newVirtueText=""),"flaw"==e&&this.newFlawText&&(this.model.flaws.push({name:this.newFlawText,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Flaw"}),this.model.flaws.sort(((t,e)=>t.name.localeCompare(e.name))),this.newFlawText=""),"modifier"==e&&this.newModifierText&&(this.model.availableModifiers.push({name:this.newModifierText}),this.newModifierText=""))}}get totals(){return this.model?DM(this.model).map((t=>t.rating)):[]}};_V=kL([Jc(pt),CL("design:paramtypes",[Ng])],_V);const QV="lab",GV='\r\n\r\n\r\n\r\n<lab-stats></lab-stats>\r\n<research-projects></research-projects>\r\n<lab-modifications-list></lab-modifications-list>\r\n\r\n<div style="clear: both;"></div>',XV=GV,YV=[ht,dt,ft];let JV;function tF(t){JV||(JV=uh.define({name:QV,template:GV,dependencies:YV})),t.register(JV)}let eF=class{};eF=kL([Jc(vt)],eF);const iF="gear",nF='\r\n\r\n<div style="clear: both;"></div>',sF=nF,rF=[];let oF;function aF(t){oF||(oF=uh.define({name:iF,template:nF,dependencies:rF})),t.register(oF)}let lF=class{};lF=kL([Jc(mt)],lF);var cF=i(8840),hF={};hF.styleTagTransform=UL(),hF.setAttributes=PL(),hF.insert=IL().bind(null,"head"),hF.domAPI=TL(),hF.insertStyleElement=ML(),$L()(cF.Z,hF),cF.Z&&cF.Z.locals&&cF.Z.locals;const uF="xp-list",dF='\r\n\r\n\r\n<title text="XP ENTRIES"></title>\r\n<div class="container">\r\n    <div class="xp-entry grid" repeat.for="entry of planningEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <input class="description" type="text" value.bind="entry.description" placeholder="Description">\r\n        <input class="xp" type="text" value.bind="entry.xp" placeholder="XP">\r\n        <input class="correspondence" type="text" value.bind="entry.correspondence" placeholder="Correspondence">\r\n        <input class="area-lore" type="text" value.bind="entry.areaLore" placeholder="Area Lore">\r\n        <input class="plans" type="text" value.bind="entry.plans" placeholder="Plans">\r\n    </div>\r\n\r\n    <div class="separator"></div>\r\n\r\n    <div class="past-xp-entry grid" repeat.for="entry of pastEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <input class="description" type="text" value.bind="entry.description" placeholder="Description">\r\n        <input class="xp" type="text" value.bind="entry.xp" placeholder="XP">\r\n        <input class="correspondence" type="text" value.bind="entry.correspondence" placeholder="Correspondence">\r\n        <input class="area-lore" type="text" value.bind="entry.areaLore" placeholder="Area Lore">\r\n    </div>\r\n</div>\r\n<footer></footer>',pF=dF,fF=[l,h];let vF;function gF(t){vF||(vF=uh.define({name:uF,template:dF,dependencies:fF})),t.register(vF)}let mF=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.xpEntries}),wM)}get planningEntries(){return this.model?this.model.filter((t=>t.planningMode)):[]}get pastEntries(){return this.model?this.model.filter((t=>!t.planningMode)):[]}};mF=kL([Jc(yt),CL("design:paramtypes",[Ng])],mF);var bF=i(2012),yF={};yF.styleTagTransform=UL(),yF.setAttributes=PL(),yF.insert=IL().bind(null,"head"),yF.domAPI=TL(),yF.insertStyleElement=ML(),$L()(bF.Z,yF),bF.Z&&bF.Z.locals&&bF.Z.locals;const wF="age-block",xF='\r\n\r\n\r\n<div class="container grid">\r\n    <primary-stat class="small-text" mode="secondary-angled" size="m" value.two-way="model.birthYear" min="0" max="2000" title="Birth Year"></primary-stat>\r\n    <div>\r\n        <primary-stat mode="secondary" size="s" value.two-way="model.age" readonly.bind="true" min="0" title="Age"></primary-stat>\r\n        <primary-stat mode="secondary" size="s" value.two-way="model.apparentAge" min="0" title="Apparent Age"></primary-stat>\r\n    </div>\r\n    <primary-stat class="small-text" mode="secondary-angled" size="m" value.two-way="model.currentYear" min="0" max="2000" title="Current Year"></primary-stat>\r\n\r\n    <primary-stat mode="secondary" size="s" value.two-way="model.livingConditionModifier" prefix-plus.bind="true" title="Living condition modifier"></primary-stat>\r\n    <primary-stat mode="primary" value.two-way="model.ageingRollModifier" prefix-plus.bind="true" title="Ageing roll bonus" readonly.bind="true"></primary-stat>\r\n    <primary-stat mode="secondary" size="s" value.two-way="model.longevityModifier" min="0" prefix-plus.bind="true" title="Longevity ritual modifier"></primary-stat>\r\n\r\n    <checkbox class="left" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 1" title="Decrepitude level 1"></checkbox>\r\n    <primary-stat mode="primary" value.two-way="model.decrepitudePoints" min="0" title="Decrepitude points"></primary-stat>\r\n    <checkbox class="right" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 5" title="Decrepitude level 5"></checkbox>\r\n\r\n    <checkbox class="right top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 2" title="Decrepitude level 2"></checkbox>\r\n    <checkbox class="bottom" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 3" title="Decrepitude level 3"></checkbox>\r\n    <checkbox class="left top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 4" title="Decrepitude level 4"></checkbox>\r\n</div>',kF=xF,SF=[I,N];let CF;function AF(t){CF||(CF=uh.define({name:wF,template:xF,dependencies:SF})),t.register(CF)}let $F=class extends zM{constructor(t){super(t,(t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.ageing}),gM)}};$F=kL([Jc(xt),CL("design:paramtypes",[Ng])],$F);const EF="progression",TF='\r\n\r\n\r\n<age-block></age-block>\r\n<xp-list></xp-list>\r\n\r\n<div style="clear: both;"></div>',RF=TF,IF=[wt,kt];let OF;function PF(t){OF||(OF=uh.define({name:EF,template:TF,dependencies:IF})),t.register(OF)}let LF=class{};LF=kL([Jc(St)],LF);const MF="my-app",jF='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<page-header></page-header>\r\n\r\n<au-viewport name="main" default="description"></au-viewport>\r\n\r\n<rune-edge></rune-edge>\r\n\r\n<button click.delegate="undo()" disabled.bind="state.past.length == 0">Undo</button>\r\n<button click.delegate="redo()" disabled.bind="state.future.length == 0">Redo</button>\r\n<button click.delegate="export()">Export</button>\r\n<button click.delegate="import()">Import</button>\r\n<button click.delegate="newCharacter()">Create New Character</button>\r\n<character-type-selector></character-type-selector>\r\n\r\n<input type=\'file\' accept=\'.json\' files.bind="selectedFiles" ref="fileInput" style="display: none;"><br>',UF=jF,BF=[s,o,w,U,Y,lt,gt,bt,b,Ct];let NF;function VF(t){NF||(NF=uh.define({name:MF,template:jF,dependencies:BF})),t.register(NF)}let FF=class{constructor(t){this.store=t,this.undo=()=>{this.store.dispatch(kg,-1)},this.redo=()=>{this.store.dispatch(kg,1)},this.export=()=>{!function(t,e){const i=document.createElement("a"),n=e.split(".").pop();i.href=URL.createObjectURL(new Blob([t],{type:`text/${"txt"===n?"plain":n}`})),i.download=e,i.click(),i.remove()}(JSON.stringify(this.state.present.character,null,4),"character sheet.json")},this.import=()=>{this.fileInput.click(),this.fileInput.onchange=this.change},this.newCharacter=()=>{this.store.dispatch(sM)},this.change=()=>{this.theFile.text().then((t=>this.store.dispatch(SM,t)))},this.store.registerAction("rehydrateFromLocalStorage",Og),this.store.registerAction("createNewCharacter",sM),this.store.registerAction("loadCharacter",rM),this.store.registerAction("importCharacter",SM),this.store.registerAction("updateCharacteristics",oM),this.store.registerAction("updateName",aM),this.store.registerAction("updateAbilities",lM),this.store.registerAction("updateVirtues",hM),this.store.registerAction("updateFlaws",uM),this.store.registerAction("updateDescription",dM),this.store.registerAction("updatePhysicalStatus",pM),this.store.registerAction("updateArts",fM),this.store.registerAction("updateSpells",vM),this.store.registerAction("updatePersonalityTraits",cM),this.store.registerAction("updateAgeing",gM),this.store.registerAction("updateConfidence",mM),this.store.registerAction("updateWarping",bM),this.store.registerAction("updateActiveMagic",yM),this.store.registerAction("updateXpEntries",wM),this.store.registerAction("updateNotes",xM),this.store.registerAction("updateLab",kM),this.store.registerAction("updateSpellcastingStats",CM),this.store.registerAction("updateCharacterType",AM),this.store.registerAction("updateBackground",$M),this.store.registerAction("updateSigil",EM),t.registerMiddleware(Ig,Eg.After,{key:"character-sheets"}),t.dispatch(Og,"character-sheets")}get theFile(){return this.selectedFiles&&this.selectedFiles.length>0?this.selectedFiles[0]:null}};FF=kL([Jc(At),Fg(),CL("design:paramtypes",[Ng])],FF),Qv.register(Dg.withInitialState({character:null}).withOptions({history:{undoable:!0,limit:20}})).register(xL).app(FF).start(),window.addEventListener("dragover",(function(t){t.preventDefault()}),!1),window.addEventListener("drop",(function(t){t.preventDefault()}),!1)})()})();