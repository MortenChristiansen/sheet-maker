/*! For license information please see entry.e358e2a35ed71bdcbda9.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={2661:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".add-item-input-field {\r\n    margin-top: 15px;\r\n    width: 250px;\r\n    border-bottom-style: dashed !important;\r\n    display: block;\r\n}",""]);const a=o},288:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8390),n.b),h=new URL(n(3208),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"checkbox {\r\n    display: inline-block;\r\n}\r\n\r\ncheckbox > .container:not(.readonly) {\r\n    cursor: pointer;\r\n}\r\n\r\ncheckbox .container {\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\ncheckbox .container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncheckbox .container.s {\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n\r\ncheckbox .container.xs {\r\n    width: 13px;\r\n    height: 13px;\r\n}\r\n\r\ncheckbox .container.checked {\r\n    background-image: url("+d+");\r\n}\r\n\r\ncheckbox .container.unchecked {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},1187:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7786),n.b),h=o()(s()),u=l()(c);h.push([t.id,"cross-button {\r\n    display: inline-block;\r\n}\r\n\r\ncross-button .button-container {\r\n    width: 30px;\r\n    height: 30px;\r\n    background-size: contain;\r\n    background-image: url("+u+");\r\n}\r\n\r\ncross-button .button-container.angled {\r\n    transform: rotate(45deg);\r\n}\r\n\r\ncross-button .button-container:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}\r\n\r\ncross-button .button-container.angled:hover {\r\n    cursor: pointer;\r\n    transform: rotate(45deg) scale(1.1);\r\n}",""]);const d=h},3055:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(5404),n.b),h=new URL(n(3320),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"dialog-box {\r\n    display: block;\r\n}\r\n\r\ndialog-box .dialog-container {\r\n    padding: 20px;\r\n    filter: drop-shadow(8px 8px 10px rgba(0, 0, 0, 0.571));\r\n}\r\n\r\ndialog-box  .inner-container {\r\n    margin: 10px 20px;\r\n}\r\n\r\ndialog-box .dialog-container.m {\r\n    width: 1083px;\r\n    height: 763px;\r\n    background-image: url("+d+");\r\n}\r\n\r\ndialog-box .dialog-container.s {\r\n    width: 614px;\r\n    height: 418px;\r\n    background-image: url("+p+");\r\n}\r\n\r\n/* Fixes rendering error for the built in dialog UI, which does not work with scrolling */\r\nau-dialog-overlay {\r\n    position: fixed !important;\r\n}\r\nau-dialog-container {\r\n    position: fixed !important;\r\n    z-index: 3;\r\n}\r\n",""]);const f=u},6436:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3082),n.b),h=o()(s()),u=l()(c);h.push([t.id,"droppable-image {\r\n    display: block;\r\n    width: 100%;\r\n    height: 98%; /* 100% lets a white edge out below */\r\n}\r\n\r\ndroppable-image {\r\n    display: block;\r\n    text-align: center;\r\n}\r\n\r\ndroppable-image > .container {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\ndroppable-image > .container .image-placeholder {\r\n    width: 70px;\r\n    height: 35px;\r\n    background-size: contain;\r\n    background-image: url("+u+");\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\ndroppable-image > .container .image {\r\n    mix-blend-mode: multiply;\r\n    pointer-events: none;\r\n}\r\n\r\ndroppable-image > .container.active-drag {\r\n    opacity: 0.6;\r\n}",""]);const d=h},2001:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n}\r\n\r\nlist .list-entry {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},9909:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(164),n.b),h=new URL(n(2),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"radio-button {\r\n    display: inline-block;\r\n    cursor: pointer;\r\n}\r\n\r\nradio-button .container {\r\n    background-size: contain;\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nradio-button .container.selected {\r\n    background-image: url("+d+");\r\n}\r\n\r\nradio-button .container.unselected {\r\n    background-image: url("+p+");\r\n}",""]);const f=u},6286:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".project-details {\r\n    display: grid;\r\n    grid-template-columns: 200px auto 200px auto;\r\n    grid-auto-rows: 1fr;\r\n    margin-bottom: 348px;\r\n}\r\n\r\n.project-details > * {\r\n    align-self: center;\r\n    justify-content: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\n.project-details stat-box .container {\r\n    margin-left: unset;\r\n    margin-right: unset;\r\n}\r\n\r\n.project-details input[type=text] {\r\n    margin-right: 20px;\r\n}",""]);const a=o},4235:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,".spell-details {\r\n    display: grid;\r\n    grid-template-columns: 200px auto;\r\n    grid-auto-rows: 1fr;\r\n    margin-bottom: 80px;\r\n}\r\n\r\n.spell-details > * {\r\n    align-self: center;\r\n    justify-content: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\n.spell-details stat-box .container {\r\n    margin-left: unset;\r\n    margin-right: unset;\r\n}\r\n",""]);const a=o},1365:(t,e,n)=>{n.d(e,{Z:()=>b});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(8801),n.b),h=new URL(n(9462),n.b),u=new URL(n(3473),n.b),d=new URL(n(2867),n.b),p=o()(s()),f=l()(c),g=l()(h),v=l()(u),m=l()(d);p.push([t.id,"stat-box {\r\n    display: inline-block;\r\n}\r\n\r\nstat-box .container.fade {\r\n    opacity: 0.4;\r\n}\r\n\r\nstat-box .container {\r\n    width: 60px;\r\n    height: 60px;\r\n    background-size: contain;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\nstat-box .header {\r\n    display: inline-block;\r\n    text-align: center;\r\n    width: 60px;\r\n    font-size: 13px;\r\n    color: #446;\r\n    line-height: 120%;\r\n}\r\n\r\nstat-box > .container:not(.readonly) {\r\n    cursor: -webkit-grab;\r\n    cursor: grab;\r\n}\r\n\r\nstat-box .container.l {\r\n    width: 90px;\r\n    height: 90px;\r\n    font-size: 30px;\r\n}\r\n\r\nstat-box .header.l {\r\n    width: 90px;\r\n    font-size: 15px;\r\n}\r\n\r\nstat-box .container.s {\r\n    width: 45px;\r\n    height: 45px;\r\n    font-size: 13px;\r\n}\r\n\r\nstat-box .header.s {\r\n    width: 45px;\r\n    font-size: 10px;\r\n}\r\n\r\nstat-box .container.xs {\r\n    width: 36px;\r\n    height: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nstat-box .header.xs {\r\n    width: 36px;\r\n    font-size: 10px;\r\n}\r\n\r\nstat-box .container.primary {\r\n    background-image: url("+f+");\r\n}\r\n\r\nstat-box .container.primary-angled {\r\n    background-image: url("+g+");\r\n}\r\n\r\nstat-box .container.secondary {\r\n    background-image: url("+v+");\r\n    width: 44px;\r\n    height: 44px;\r\n}\r\nstat-box .container.secondary.s {\r\n    width: 33px;\r\n    height: 33px;\r\n}\r\nstat-box .container.secondary.xs {\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n\r\nstat-box .header.secondary {\r\n    width: 44px;\r\n}\r\nstat-box .header.secondary.s {\r\n    width: 33px;\r\n}\r\nstat-box .header.secondary.xs {\r\n    width: 24px;\r\n}\r\n\r\nstat-box .container.secondary-angled {\r\n    background-image: url("+m+");\r\n}\r\n\r\nstat-box .container.active {\r\n    cursor: -webkit-grabbing;\r\n    cursor: grabbing;\r\n}\r\n\r\nstat-box .container .content {\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\nstat-box .overlay {\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 1;\r\n}",""]);const b=p},1247:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7552),n.b),h=o()(s()),u=l()(c);h.push([t.id,"stat-info-button {\r\n    display: inline-block;\r\n    width: 25px;\r\n    height: 25px;\r\n}\r\n\r\nstat-info-button:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}\r\n\r\nstat-info-button .button {\r\n    opacity: 0.5;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-image: url("+u+");\r\n    background-size: contain;\r\n}\r\n\r\nstat-info-button .button.active {\r\n    opacity: 1;\r\n}",""]);const d=h},8831:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(5815),n.b),h=o()(s()),u=l()(c);h.push([t.id,"symbol {\r\n    display: inline-block;\r\n}\r\n\r\n.symbol-container {\r\n    width: 30px;\r\n    height: 30px;\r\n    background-size: contain;\r\n\r\n    transform: scale(1);\r\n    transition-duration: 0.1s;\r\n    transition-property: transform;\r\n}\r\n\r\n.symbol-container.three-dots {\r\n    background-image: url("+u+");\r\n}\r\n\r\n.symbol-container:hover {\r\n    cursor: pointer;\r\n    transform: scale(1.1);\r\n}",""]);const d=h},835:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box {\r\n    display: block;\r\n    width: 300px;\r\n}\r\n\r\ntext-box > .container {\r\n    margin: 0 10px 0 10px;\r\n}\r\n\r\ntext-box textarea {\r\n    font-family: 'Estonia', cursive;\r\n    font-size: 30px;\r\n    background-color: transparent;\r\n    font-weight: bold;\r\n    padding: 5px;\r\n\r\n    width: 100%;\r\n    border: none;\r\n    overflow: auto;\r\n    outline: none;\r\n    box-shadow: none;\r\n\r\n    resize: none;\r\n}",""]);const a=o},2495:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-box.text-dialog-input textarea {\r\n    height: 230px;\r\n    width: 405px;\r\n    padding: 7px;\r\n}\r\n\r\ntext-box.text-dialog-input .container {\r\n    margin: 0;\r\n}\r\n\r\n.dialog-container.m text-box.text-dialog-input textarea {\r\n    height: 653px;\r\n    width: 1028px;\r\n}",""]);const a=o},4280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"text-field .input {\r\n    text-overflow: ellipsis;\r\n    display: inline-block;\r\n}",""]);const a=o},6140:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"footer {\r\n    display: block;\r\n}\r\n\r\nfooter .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1) scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block; \r\n    transform: scaleY(-1);\r\n    align-self: center;\r\n}\r\n\r\nfooter .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n}",""]);const f=u},6392:(t,e,n)=>{n.d(e,{Z:()=>$});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(5903),n.b),h=new URL(n(3011),n.b),u=new URL(n(9420),n.b),d=new URL(n(429),n.b),p=new URL(n(9614),n.b),f=new URL(n(1636),n.b),g=new URL(n(2690),n.b),v=new URL(n(3126),n.b),m=new URL(n(977),n.b),b=o()(s()),w=l()(c),y=l()(h),x=l()(u),k=l()(d),S=l()(p),A=l()(f),C=l()(g),E=l()(v),T=l()(m);b.push([t.id,"page-header {\r\n    display: block;\r\n    position: relative;\r\n    z-index: 1;\r\n}\r\n\r\npage-header .page-links {\r\n    height: 161px;\r\n    left: 50px;\r\n    bottom: -110px;\r\n    position: absolute;\r\n    width: 100%;\r\n}\r\n\r\npage-header .page-link {\r\n    width: 206px;\r\n    height: 100px;\r\n    display: inline-block;\r\n    margin-right: -15px;\r\n\r\n    transform: translateY(0);\r\n    transition-duration: 0.3s;\r\n    transition-property: transform;\r\n}\r\n\r\npage-header .page-link.active {\r\n    transform: translateY(-20px);\r\n    cursor: default;\r\n}\r\n\r\npage-header .page-link:not(.active):hover {\r\n    transform: translateY(-20px);\r\n}\r\n\r\npage-header .magic {\r\n    background-image: url("+w+");\r\n}\r\npage-header .stats {\r\n    background-image: url("+y+");\r\n}\r\npage-header .lab {\r\n    background-image: url("+x+");\r\n}\r\npage-header .notes {\r\n    background-image: url("+k+");\r\n}\r\npage-header .enchantments {\r\n    background-image: url("+S+");\r\n}\r\npage-header .description {\r\n    background-image: url("+A+");\r\n}\r\npage-header .belongings {\r\n    background-image: url("+C+");\r\n}\r\npage-header .progression {\r\n    background-image: url("+E+");\r\n}\r\npage-header .settings {\r\n    background-image: url("+T+");\r\n}\r\n",""]);const $=b},1525:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(7283),n.b),h=o()(s()),u=l()(c);h.push([t.id,"rune-edge {\r\n    display: block;\r\n    width: 100%;\r\n    height: 20px;\r\n    background-size: contain;\r\n    background-repeat: repeat-x;\r\n    background-image: url("+u+");\r\n    margin: 45px 0;\r\n}",""]);const d=h},1939:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(3356),n.b),h=new URL(n(1668),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"title {\r\n    display: block;\r\n    height: auto;\r\n}\r\n\r\ntitle .text {\r\n    font-size: 18px;\r\n    color: darkred;\r\n    padding: 0 4px;\r\n    display: inline-block;\r\n}\r\n\r\ntitle .line {\r\n    background-image: url("+d+");\r\n    background-repeat: repeat-x;\r\n    background-size: contain;\r\n    height: 4px;\r\n    width: 100%;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-start {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    transform: scaleX(-1);\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .line-end {\r\n    background-image: url("+p+");\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    height: 18px;\r\n    width: 13px;\r\n    display: inline-block;\r\n    margin-top: 15px;\r\n    align-self: center;\r\n}\r\n\r\ntitle .grid {\r\n    display: grid;\r\n    grid-template-columns: auto 1fr auto auto auto 1fr auto;\r\n    grid-template-rows: 1fr;\r\n    \r\n}",""]);const f=u},1138:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(9811),n.b),h=new URL(n(7210),n.b),u=o()(s()),d=l()(c),p=l()(h);u.push([t.id,"html {\n  height: 100%;\n}\n\n.message {\n  background-color: red;\n}\n\nbody {\n  font-family: 'Eagle Lake', cursive;\n  font-size: 20px;\n  color: darkred;\n  filter: drop-shadow(8px 8px 10px rgba(0, 0, 0, 0.571));\n  margin: 0;\n  height: 100%;\n\n  /* https://heropatterns.com/ */\n  background-color: #300606;\n  background-image: url("+d+");\n}\n\nmy-app {\n  display: grid;\n  grid-template-columns: 1fr 2200px 1fr;\n  grid-template-rows: 1fr 1100px 1fr;\n  width: 100%;\n  height: 100%;\n}\n\npage-header {\n  grid-column: 2;\n  grid-column-end: 2;\n  grid-row: 1;\n  grid-row-end: 1;\n}\n\n.main-paper {\n  background-image:  url("+p+");\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 100%;\n  width: 100%;\n  height: 100%;\n  grid-column: 2;\n  grid-column-end: 2;\n  grid-row: 2;\n  grid-row-end: 2;\n  position: relative;\n  z-index: 2;\n  pointer-events: none;\n}\n\n.page-view {\n  pointer-events: all;\n  margin: 40px;\n}\n\n.error-indicator {\n  grid-column: 3;\n  grid-column-end: 3;\n  grid-row: 3;\n  grid-row-end: 3;\n\n  background-color: red;\n  border-radius: 50%;\n  width: 10px;\n  height: 10px;\n\n  -webkit-animation-name: pulse;\n\n          animation-name: pulse;\n  -webkit-animation-duration: 2.0s;\n          animation-duration: 2.0s;\n  -webkit-animation-timing-function: ease-out;\n          animation-timing-function: ease-out;\n  -webkit-animation-direction: alternate;\n          animation-direction: alternate;\n  -webkit-animation-iteration-count: infinite;\n          animation-iteration-count: infinite;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n\n@-webkit-keyframes pulse {\n  0% {\n      transform: scale(.7);\n  }\n\n  100% {\n      transform: scale(1.3);\n  }\n}\n\n@keyframes pulse {\n  0% {\n      transform: scale(.7);\n  }\n\n  100% {\n      transform: scale(1.3);\n  }\n}\n\n\n.buttons {\n  grid-column: 2;\n  grid-column-end: 2;\n  grid-row: 3;\n  grid-row-end: 3;\n\n  margin-left: 30px;\n}\n\n.numbers {\n  font-family: 'MedievalSharp', cursive;\n}\n\n/*\nfont-family: 'Amatic SC', cursive;\nfont-family: 'Eagle Lake', cursive;\nfont-family: 'Estonia', cursive;\nfont-family: 'Fleur De Leah', cursive;\nfont-family: 'IM Fell DW Pica SC', serif;\nfont-family: 'IM Fell English SC', serif;\nfont-family: 'MedievalSharp', cursive;\n*/\n\n.monochrome {\n  filter: grayscale(100%);\n}\n\n.text {\n    font-size: 16px;\n    color: #446;\n}\n\ninput[type=\"text\"] {\n  border: none;\n  border-bottom: 2px solid #cbc1ad;\n  background: none;\n  padding: 0px 6px;\n  font-family: 'Estonia', cursive;\n  font-size: 30px;\n  font-weight: bold;\n  text-indent: 5px;\n}\n\ninput[type=\"text\"]:focus {\n  outline: none;\n}\n\ninput[type=\"text\"].specialisation {\n  text-align: center;\n  width: 150px;\n  color: #568;\n}\n\n::-moz-placeholder {\n  color: #aaa;\n  opacity: 1; /* Firefox */\n}\n\n::placeholder {\n  color: #aaa;\n  opacity: 1; /* Firefox */\n}\n\n@-webkit-keyframes fadeIn {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@keyframes fadeIn {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@-webkit-keyframes fadeOut {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n@keyframes fadeOut {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n}\n\n.disable-scrolling {\n  overflow: hidden;\n}\n\n/* Buttons */\n\nbutton {\n  background-color: #446;\n  color: #bbb;\n  padding: 8px 16px;\n  border-radius: 5px;\n  font-family: 'Eagle Lake', cursive;\n  border: none;\n}\n\nbutton:hover {\n  background-color: rgb(87, 87, 140);\n}\n\nbutton:disabled {\n  background-color: rgb(39, 39, 53);\n}\n\n/* Scrollbars */\n\n/* width */\n::-webkit-scrollbar {\n  width: 10px;\n}\n\n/* Track */\n::-webkit-scrollbar-track {\n  box-shadow: inset 0 0 5px grey;\n  border-radius: 10px;\n}\n\n/* Handle */\n::-webkit-scrollbar-thumb {\n  background: darkred;\n  border-radius: 10px;\n}\n",""]);const f=u},3298:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"",""]);const a=o},4321:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"description {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-template-rows: -webkit-min-content 1fr;\r\n    grid-template-rows: min-content 1fr;\r\n    grid-auto-flow: column;\r\n}\r\n\r\ndescription > * {\r\n  grid-row: 2;\r\n  position: relative;\r\n}\r\n\r\ndescription > name-block {\r\n    grid-row: 1;\r\n    grid-column-start: 3;\r\n    grid-column-end: span 2;\r\n    justify-self: center;\r\n}\r\ndescription > avatar-small-block {\r\n    justify-self: center;\r\n    grid-column-start: 5;\r\n    grid-column-end: span 2;\r\n}\r\ndescription > description-block {\r\n    grid-column-start: 3;\r\n    grid-column-end: span 2;\r\n    height: 290px;\r\n}\r\ndescription > description-block text-box {\r\n    height: 290px;\r\n    height: 198px;\r\n}\r\ndescription > description-block text-box textarea {\r\n    height: 198px;\r\n}\r\ndescription > avatar-full-block {\r\n    grid-column-start: 1;\r\n    grid-column-end: span 2;\r\n    margin-top: 290px;\r\n    justify-self: center;\r\n}\r\ndescription > .virtues {\r\n    grid-column: 5;\r\n    margin-top: 300px;\r\n}\r\ndescription > .flaws {\r\n    grid-column: 6;\r\n    margin-top: 300px;\r\n}\r\ndescription > .flaws input[type=text], description > .virtues input[type=text] {\r\n    width: 274px;\r\n}\r\ndescription > personality-traits-list {\r\n    grid-column-start: 1;\r\n    grid-column-end: span 2;\r\n}\r\ndescription > background-block {\r\n    grid-column-start: 3;\r\n    grid-column-end: span 2;\r\n    margin-top: 290px;\r\n}\r\ndescription > background-block text-box {\r\n    height: 690px;\r\n    height: 598px;\r\n}\r\ndescription > background-block text-box textarea {\r\n    height: 598px;\r\n}",""]);const a=o},9294:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"",""]);const a=o},2492:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"",""]);const a=o},8376:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"",""]);const a=o},6617:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"",""]);const a=o},8467:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"",""]);const a=o},2988:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"",""]);const a=o},3459:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"",""]);const a=o},927:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"abilities-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 1534px;\r\n    float: left;\r\n}\r\n\r\nabilities-block > .container {\r\n    margin: 0 25px 20px 20px;\r\n}\r\n\r\nabilities-block .ability {\r\n    display: inline-block;\r\n}\r\n\r\nabilities-block .puissant-label {\r\n    display: inline-block;\r\n    width: 40px;\r\n}\r\n\r\nabilities-block .ability > * {\r\n    display: inline-block;\r\n}\r\n\r\nabilities-block .ability .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .name {\r\n    opacity: 0.4;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability .specialisation {\r\n    width: 150px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nabilities-block .ability.untrained .specialisation {\r\n    opacity: 0;\r\n}\r\n\r\nabilities-block .add-item-input-field {\r\n    width: 200px;\r\n}",""]);const a=o},7804:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"active-magic-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nactive-magic-list > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nactive-magic-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nactive-magic-list > .container > .grid > * {\r\n    align-self: end;\r\n    margin: 1px 2px;\r\n}\r\nactive-magic-list > .container > .grid > checkbox {\r\n    margin-bottom: 10px;\r\n}\r\nactive-magic-list > .container > .grid > stat-info-button {\r\n    margin-bottom: 6px;\r\n    margin-left: 6px;\r\n}",""]);const a=o},2012:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"age-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nage-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-template-rows: auto auto auto 60px;\r\n}\r\n\r\nage-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 4px;\r\n}\r\n\r\nage-block > .grid > .left {\r\n    justify-self: left;\r\n}\r\n\r\nage-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nage-block > .grid > .bottom {\r\n    align-self: end;\r\n}\r\n\r\nage-block > .grid > .top {\r\n    align-self: baseline;\r\n}\r\n\r\nage-block .small-text {\r\n    font-size: 14px;\r\n}",""]);const a=o},5185:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"arts-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\narts-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto 40px auto auto auto  10px auto auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\narts-block > .grid > * {\r\n    align-self: center;\r\n    justify-self: left;\r\n    margin: 1px 2px;\r\n}\r\n\r\narts-block .untrained {\r\n    opacity: 0.4;\r\n}",""]);const a=o},3370:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(9374),n.b),h=o()(s()),u=l()(c);h.push([t.id,"avatar-full-block {\r\n    display: block;\r\n    margin: 20px 40px 40px 20px;\r\n    background-image: url("+u+");\r\n    background-size: contain;\r\n    filter: drop-shadow(4px 4px 5px rgba(0, 0, 0, 0.371));\r\n    height: 600px;\r\n    width: 330px;\r\n    background-repeat: no-repeat;\r\n    padding: 30px;\r\n}\r\n\r\navatar-full-block droppable-image > .container .image-placeholder {\r\n    display: none;\r\n}\r\n\r\navatar-full-block .image {\r\n    max-width: 343px;\r\n    max-height: 590px;\r\n}",""]);const d=h},5363:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(2386),n.b),h=o()(s()),u=l()(c);h.push([t.id,"avatar-small-block {\r\n    display: block;\r\n    margin: 20px 40px 40px 20px;\r\n    background-image: url("+u+");\r\n    background-size: contain;\r\n    filter: drop-shadow(4px 4px 5px rgba(0, 0, 0, 0.371));\r\n    height: 241px;\r\n    background-repeat: no-repeat;\r\n    padding: 31px;\r\n    width: 243px;\r\n    margin-top: -6px;\r\n}\r\n\r\navatar-small-block droppable-image > .container .image-placeholder {\r\n    display: none;\r\n}\r\n\r\n\r\navatar-small-block .image {\r\n    max-width: 230px;\r\n    max-height: 230px;\r\n}",""]);const d=h},3260:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"background-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n}\r\n\r\nbackground-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nbackground-block text-box textarea {\r\n    height: 740px;\r\n}",""]);const a=o},8985:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"carried-belongings-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 630px;\r\n    float: left;\r\n}\r\n\r\ncarried-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\ncarried-belongings-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},6767:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"character-type-selector {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    height: -webkit-fit-content;\r\n    height: -moz-fit-content;\r\n    height: fit-content;\r\n    color: #446;\r\n    margin: 20px;\r\n}\r\n\r\ncharacter-type-selector .container > * {\r\n    vertical-align: middle;\r\n}",""]);const a=o},3292:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"characteristics-block {\r\n    display: block;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    color: #446;\r\n    margin: 0 20px 20px 0;\r\n    float: left;\r\n}\r\n\r\ncharacteristics-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\ncharacteristics-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto;\r\n    grid-template-rows: 1fr 1fr;\r\n}\r\n\r\ncharacteristics-block .grid > * {\r\n    align-self: center;\r\n}\r\n\r\ncharacteristics-block .grid .text.left-col {\r\n    justify-self: right;\r\n}\r\n\r\ncharacteristics-block .grid .text{\r\n    justify-self: left;\r\n    margin-left: 3px;\r\n    margin-right: 3px;\r\n}\r\n\r\n\r\ncharacteristics-block .grid stat-box {\r\n    margin: 1px;\r\n}\r\n\r\ncharacteristics-block footer {\r\n    margin-top: 5px;\r\n}\r\n\r\ncharacteristics-block .specialisation {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},4397:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"confidence-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},6903:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"damage-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 280px;\r\n    float: left;\r\n}\r\n\r\ndamage-block > .container {\r\n    padding: 10px 30px;\r\n    text-align: center;\r\n}\r\n\r\ndamage-block .wound-type:nth-child(1) {\r\n    display: inline-block;\r\n    margin-left: 0;\r\n}\r\n",""]);const a=o},3845:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"description-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n}\r\n\r\ndescription-block text-box {\r\n    width: 100%;\r\n}",""]);const a=o},912:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"familiar-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nfamiliar-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nfamiliar-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto ;\r\n    grid-template-rows: 1fr;\r\n}\r\n\r\nfamiliar-block > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nfamiliar-block > .grid > .arts {\r\n    width: 50px;\r\n    text-align: center;\r\n}\r\n\r\nfamiliar-block > .container > .description {\r\n    width: 700px;\r\n}\r\n\r\nfamiliar-block .block {\r\n    text-align: center;\r\n}\r\n\r\nfamiliar-block .effect .usages, familiar-block .effect .range, familiar-block .effect .duration, familiar-block .effect .target, familiar-block .effect .arts {\r\n    width: 150px;\r\n}\r\n\r\nfamiliar-block .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},1459:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"fatigue-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 280px;\r\n    float: left;\r\n}\r\n\r\nfatigue-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nfatigue-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr auto auto;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;\r\n}\r\n\r\nfatigue-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nfatigue-block > .grid > .right {\r\n    justify-self: right;\r\n}\r\n\r\nfatigue-block radio-button {\r\n    margin-left: 5px;\r\n}",""]);const a=o},2820:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-description-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 600px;\r\n    float: left;\r\n}\r\n\r\nlab-description-block text-box {\r\n    width: 100%;\r\n}\r\n\r\nlab-description-block text-box textarea {\r\n    height: 198px;\r\n}",""]);const a=o},6964:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,'lab-modifications-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    min-width: 845px;\r\n    float: left;\r\n}\r\n\r\nlab-modifications-list > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-modifications-list > .container > .items > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nlab-modifications-list > .container > .items > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nlab-modifications-list .add-item-input-field {\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .container > .title {\r\n    display: block;\r\n    margin-top: 30px;\r\n}\r\n\r\nlab-modifications-list .grid > .name {\r\n    width: 200px;\r\n}\r\n\r\nlab-modifications-list .grid > .category {\r\n    width: 100px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .grid > .description {\r\n    width: 400px;\r\n}\r\n\r\nlab-modifications-list .items {\r\n    overflow-y: auto;\r\n    height: 124px;\r\n}\r\n\r\nlab-modifications-list .add-item-input-field.add-modifier-input {\r\n    position: absolute;\r\n    right: 45px;\r\n    top: -25px;\r\n    width: 60px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .modifier {\r\n    margin: 0 4px;\r\n}\r\n\r\nlab-modifications-list .modifier-titles {\r\n    position: absolute;\r\n    right: 13px;\r\n    top: 5px;\r\n}\r\n\r\nlab-modifications-list .modifier-title {\r\n    font-size: 9px;\r\n    display: inline-block;\r\n    width: 35px;\r\n    text-align: center;\r\n    font-family: "Eagle Lake", cursive;\r\n    border-bottom: none;\r\n    padding: 0;\r\n    font-weight: unset;\r\n    text-overflow: ellipsis;\r\n    text-indent: 0;\r\n}\r\n\r\n\r\nlab-modifications-list .modifier-totals {\r\n    position: absolute;\r\n    right: 8px;\r\n    bottom: 10px;\r\n}\r\n\r\nlab-modifications-list .modifier-total {\r\n    font-size: 16px;\r\n    display: inline-block;\r\n    width: 29px;\r\n    margin: 6px;\r\n    text-align: center;\r\n}\r\n\r\nlab-modifications-list .block {\r\n    margin-top: 5px;\r\n    position: relative;\r\n}\r\n\r\nlab-modifications-list .last-block .modifier-titles  {\r\n    top: -65px;\r\n}',""]);const a=o},8412:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"lab-stats {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nlab-stats > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nlab-stats > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 110px 110px 110px 110px 110px 110px 110px 110px 110px 110px 110px 110px;\r\n    grid-auto-rows: auto auto auto;\r\n}\r\n\r\nlab-stats > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n}\r\n\r\nlab-stats > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nlab-stats .modifier-selector {\r\n    text-align: center;\r\n    width: 90px;\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},4769:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"magic-items-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 2061px;\r\n    float: left;\r\n}\r\n\r\nmagic-items-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nmagic-items-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content auto;\r\n    grid-template-columns: min-content min-content min-content min-content auto;\r\n    grid-auto-rows: auto auto;\r\n}\r\n\r\nmagic-items-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nmagic-items-block .magic-item > .effects {\r\n    grid-column-start: 1;\r\n    grid-column-end: 6;\r\n}\r\n\r\nmagic-items-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\nmagic-items-block .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nmagic-items-block .effect .usages, magic-items-block .effect .range, magic-items-block .effect .duration, magic-items-block .effect .target, magic-items-block .effect .arts {\r\n    width: 150px;\r\n}\r\n\r\nmagic-items-block .magic-item {\r\n    border-left: 3px solid darkred;\r\n    margin-bottom: 20px;\r\n    padding: 0 10px;\r\n}",""]);const a=o},1589:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"name-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n}\r\n\r\nname-block input[type=text] {\r\n    text-align: center;\r\n}",""]);const a=o},3349:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"notes-block {\r\n    display: block;\r\n    width: 630px;\r\n    float: left;\r\n    margin: 0 20px 20px 0;\r\n}\r\n\r\nnotes-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nnotes-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},280:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"npc-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 700px;\r\n    float: left;\r\n}\r\n\r\nnpc-list > .container {\r\n    padding: 10px;\r\n    position: relative;\r\n}\r\n\r\nnpc-list .npcs {\r\n    overflow-y: auto;\r\n    height: 884px;\r\n}\r\n\r\nnpc-list > .container > .npcs > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nnpc-list > .container > .npcs > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nnpc-list .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nnpc-list .description {\r\n    width: 410px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nnpc-list .add-item-input-field {\r\n    width: 200px;\r\n}",""]);const a=o},5555:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"personality-traits-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    height: 440px;\r\n}\r\n\r\npersonality-traits-list > .container {\r\n    margin-bottom: 20px;\r\n}\r\n\r\npersonality-traits-list stat-box {\r\n    margin-left: 10px;\r\n}\r\n\r\npersonality-traits-list .trait {\r\n    display: inline-block;\r\n    width: 303px;\r\n    margin-left: 40px;\r\n}\r\n\r\npersonality-traits-list .trait > * {\r\n    text-align: left;\r\n}\r\n\r\npersonality-traits-list .trait input[type=text] {\r\n    width: 230px;\r\n}",""]);const a=o},5889:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"physical-penalty-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}",""]);const a=o},7600:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"quest-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 700px;\r\n    float: left;\r\n}\r\n\r\nquest-list > .container {\r\n    padding: 10px;\r\n    position: relative;\r\n}\r\n\r\nquest-list .quests {\r\n    overflow-y: auto;\r\n    height: 884px;\r\n}\r\n\r\nquest-list > .container > .quests > .grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nquest-list > .container > .quests > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nquest-list .name {\r\n    width: 580px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nquest-list .priority {\r\n    margin-left: 10px !important;\r\n}\r\n\r\nquest-list .add-item-input-field {\r\n    width: 600px;\r\n}",""]);const a=o},4467:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"research-projects {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 2035px;\r\n    float: left;\r\n}\r\n\r\nresearch-projects > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nresearch-projects .projects {\r\n    height: 142px;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n}\r\n\r\nresearch-projects .block {\r\n    text-align: center;\r\n}\r\n\r\nresearch-projects > .container > .projects > .grid {\r\n    display: inline-grid;\r\n    grid-template-columns: -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content -webkit-min-content;\r\n    grid-template-columns: min-content min-content min-content min-content min-content min-content min-content min-content min-content;\r\n    grid-auto-rows: 1fr;\r\n    margin-right: 20px;\r\n}\r\n\r\nresearch-projects > .container > .projects > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\n\r\nresearch-projects .arts, research-projects .prerequisites {\r\n    width: 50px;\r\n    text-align: center;\r\n}\r\n\r\nresearch-projects .material, research-projects .shape {\r\n    width: 150px;\r\n    text-align: center;\r\n}\r\n",""]);const a=o},5204:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"sanctum-belongings-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 630px;\r\n    float: left;\r\n}\r\n\r\nsanctum-belongings-block text-box {\r\n    width: 100%;\r\n}\r\n\r\n\r\nsanctum-belongings-block text-box textarea {\r\n    height: 940px;\r\n}",""]);const a=o},7266:(t,e,n)=>{n.d(e,{Z:()=>d});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r),a=n(1667),l=n.n(a),c=new URL(n(9462),n.b),h=o()(s()),u=l()(c);h.push([t.id,"sigil {\r\n    display: block;\r\n    height: -webkit-fit-content;\r\n    height: -moz-fit-content;\r\n    height: fit-content;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nsigil droppable-image {\r\n    width: 130px;\r\n    height: 130px;\r\n    background-size: contain;\r\n    background-image: url("+u+");\r\n}\r\n\r\nsigil .image {\r\n    width: 70px;\r\n}",""]);const d=h},7624:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-list > .container {\r\n    padding: 10px;\r\n    padding-right: 0;\r\n}\r\n\r\nspell-list .spells {\r\n    height: 582px;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    padding-left: 25px;\r\n}\r\n\r\nspell-list > .container > .spells > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-list > .container > .spells > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-list .add-item-input-field {\r\n    width: 300px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-list  > .container > .spells > .grid input[type=text].range,\r\nspell-list  > .container > .spells > .grid input[type=text].duration,\r\nspell-list  > .container > .spells > .grid input[type=text].target {\r\n    width: 50px;\r\n}\r\n\r\nspell-list .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-list .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-list .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-list .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-list .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-list .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-list .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-list .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-list .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-list .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-list .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-list .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #aaa;\r\n}\r\n\r\nspell-list .co-form ~ .co-form .form-header::before,\r\nspell-list .an-form ~ .an-form .form-header::before,\r\nspell-list .au-form ~ .au-form .form-header::before,\r\nspell-list .aq-form ~ .aq-form .form-header::before,\r\nspell-list .he-form ~ .he-form .form-header::before,\r\nspell-list .vi-form ~ .vi-form .form-header::before,\r\nspell-list .te-form ~ .te-form .form-header::before,\r\nspell-list .ig-form ~ .ig-form .form-header::before,\r\nspell-list .me-form ~ .me-form .form-header::before,\r\nspell-list .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}\r\n",""]);const a=o},6073:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spell-wishlist {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nspell-wishlist .spells {\r\n    height: 582px;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    padding-left: 25px;\r\n}\r\n\r\nspell-wishlist > .container {\r\n    padding: 10px;\r\n    padding-right: 0;\r\n}\r\n\r\nspell-wishlist > .container > .spells > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nspell-wishlist > .container > .spells > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspell-wishlist .add-item-input-field {\r\n    width: 300px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text] {\r\n    width: 100px;\r\n    text-align: center;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].name {\r\n    width: 300px;\r\n    text-align: left;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].notes {\r\n    width: 300px;\r\n    text-align: left;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].arts {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].prerequisites {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].page {\r\n    width: 50px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid .casting-total-label {\r\n    width: 25px;\r\n}\r\n\r\nspell-wishlist  > .container > .spells > .grid input[type=text].sigil {\r\n    width: 200px;\r\n}\r\n\r\nspell-wishlist .spell {\r\n    position: relative;\r\n}\r\n\r\nspell-wishlist .co-form .form-header::before {\r\n    content: 'Co';\r\n}\r\nspell-wishlist .an-form .form-header::before {\r\n    content: 'An';\r\n}\r\nspell-wishlist .au-form .form-header::before {\r\n    content: 'Au';\r\n}\r\nspell-wishlist .aq-form .form-header::before {\r\n    content: 'Aq';\r\n}\r\nspell-wishlist .he-form .form-header::before {\r\n    content: 'He';\r\n}\r\nspell-wishlist .vi-form .form-header::before {\r\n    content: 'Vi';\r\n}\r\nspell-wishlist .te-form .form-header::before {\r\n    content: 'Te';\r\n}\r\nspell-wishlist .ig-form .form-header::before {\r\n    content: 'Ig';\r\n}\r\nspell-wishlist .me-form .form-header::before {\r\n    content: 'Me';\r\n}\r\nspell-wishlist .im-form .form-header::before {\r\n    content: 'Im';\r\n}\r\n\r\nspell-wishlist .form-header::before {\r\n    position: absolute;\r\n    left: -25px;\r\n    top: 5px;\r\n    font-size: 16px;\r\n    color: #aaa;\r\n}\r\n\r\nspell-wishlist .co-form ~ .co-form .form-header::before,\r\nspell-wishlist .an-form ~ .an-form .form-header::before,\r\nspell-wishlist .au-form ~ .au-form .form-header::before,\r\nspell-wishlist .aq-form ~ .aq-form .form-header::before,\r\nspell-wishlist .he-form ~ .he-form .form-header::before,\r\nspell-wishlist .vi-form ~ .vi-form .form-header::before,\r\nspell-wishlist .te-form ~ .te-form .form-header::before,\r\nspell-wishlist .ig-form ~ .ig-form .form-header::before,\r\nspell-wishlist .me-form ~ .me-form .form-header::before,\r\nspell-wishlist .im-form ~ .im-form .form-header::before {\r\n    content: '';\r\n}",""]);const a=o},2244:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"spellcasting-modifiers-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 1000px;\r\n    float: left;\r\n}\r\n\r\nspellcasting-modifiers-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-rows: 1fr 1fr;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > * {\r\n    align-self: center;\r\n    justify-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid > .text {\r\n    font-size: 10px;\r\n    text-align: center;\r\n}\r\n\r\nspellcasting-modifiers-block > .container > .grid .arts {\r\n    width: 60px;\r\n    text-align: center;\r\n}",""]);const a=o},6019:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"talisman-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: 2062px;\r\n    float: left;\r\n}\r\n\r\ntalisman-block .effects .description {\r\n    width: 750px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .container > .description {\r\n    width: 800px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block > .container {\r\n    padding: 10px 30px;\r\n    position: relative;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .effects.grid {\r\n    display: grid;\r\n    grid-template-columns: -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content -webkit-max-content;\r\n    grid-template-columns: max-content max-content max-content max-content max-content max-content max-content max-content max-content max-content;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\ntalisman-block > .container .bonus.grid > *, talisman-block > .container .effects.grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\ntalisman-block .bonuses, talisman-block .effects {\r\n    margin-top: 30px;\r\n}\r\n\r\ntalisman-block .bonuses .name {\r\n    text-overflow: ellipsis;\r\n}\r\n\r\ntalisman-block .effect .notes {\r\n    width: 400px;\r\n}\r\n\r\ntalisman-block .effect .usages, talisman-block .effect .range, talisman-block .effect .duration, talisman-block .effect .target, talisman-block .effect .arts {\r\n    width: 150px;\r\n}",""]);const a=o},1860:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"vis-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: left;\r\n}\r\n\r\nvis-block > .container {\r\n    padding: 10px 30px;\r\n}\r\n\r\nvis-block > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nvis-block > .grid > * {\r\n    align-self: center;\r\n}\r\n\r\nvis-block .add-item-input-field {\r\n    width: 100px;\r\n}\r\n\r\nvis-block .name {\r\n    width: 100px;\r\n}\r\n\r\nvis-block .income, vis-block .notes {\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},2410:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"warping-block {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    width: 318px;\r\n    position: absolute;\r\n    left: 44px;\r\n    top: 315px;\r\n}\r\n\r\nwarping-block > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nwarping-block > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nwarping-block .warping-level {\r\n    text-align: center;\r\n}\r\n\r\nwarping-block .name {\r\n    width: 200px;\r\n    text-overflow: ellipsis;\r\n}",""]);const a=o},8840:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(8081),s=n.n(i),r=n(3645),o=n.n(r)()(s());o.push([t.id,"xp-list {\r\n    display: block;\r\n    margin: 0 20px 20px 0;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n    float: right;\r\n}\r\n\r\nxp-list > .container {\r\n    height: 955px;\r\n    overflow-y: auto;\r\n}\r\n\r\nxp-list > .container > .grid {\r\n    display: grid;\r\n    grid-template-columns: 70px 100px auto auto auto auto auto;\r\n    grid-auto-rows: 1fr;\r\n}\r\n\r\nxp-list > .container > .grid.past-xp-entry {\r\n    grid-template-columns: 70px 100px auto auto auto auto;\r\n    width: -webkit-fit-content;\r\n    width: -moz-fit-content;\r\n    width: fit-content;\r\n}\r\n\r\nxp-list > .container > .grid > * {\r\n    align-self: center;\r\n    margin: 1px 2px;\r\n}\r\n\r\nxp-list .description, xp-list .plans {\r\n    width: 370px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nxp-list .xp {\r\n    width: 450px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nxp-list .correspondence, xp-list .area-lore  {\r\n    width: 150px;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\nxp-list .separator {\r\n    height: 40px;\r\n}\r\n\r\nxp-list .center-button-box {\r\n    text-align: center;\r\n}",""]);const a=o},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,s,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},1667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:t=>{t.exports=function(t){return t[1]}},3379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],h=r[c]||0,u="".concat(c," ").concat(h);r[c]=h+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=s(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var r=i(t=t||[],s=s||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=n(r[o]);e[a].references--}for(var l=i(t,s),c=0;c<r.length;c++){var h=n(r[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=l}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},9811:t=>{t.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 56 28%27 width=%2756%27 height=%2728%27%3E%3Cpath fill=%27%23000000%27 fill-opacity=%270.59%27 d=%27M56 26v2h-7.75c2.3-1.27 4.94-2 7.75-2zm-26 2a2 2 0 1 0-4 0h-4.09A25.98 25.98 0 0 0 0 16v-2c.67 0 1.34.02 2 .07V14a2 2 0 0 0-2-2v-2a4 4 0 0 1 3.98 3.6 28.09 28.09 0 0 1 2.8-3.86A8 8 0 0 0 0 6V4a9.99 9.99 0 0 1 8.17 4.23c.94-.95 1.96-1.83 3.03-2.63A13.98 13.98 0 0 0 0 0h7.75c2 1.1 3.73 2.63 5.1 4.45 1.12-.72 2.3-1.37 3.53-1.93A20.1 20.1 0 0 0 14.28 0h2.7c.45.56.88 1.14 1.29 1.74 1.3-.48 2.63-.87 4-1.15-.11-.2-.23-.4-.36-.59H26v.07a28.4 28.4 0 0 1 4 0V0h4.09l-.37.59c1.38.28 2.72.67 4.01 1.15.4-.6.84-1.18 1.3-1.74h2.69a20.1 20.1 0 0 0-2.1 2.52c1.23.56 2.41 1.2 3.54 1.93A16.08 16.08 0 0 1 48.25 0H56c-4.58 0-8.65 2.2-11.2 5.6 1.07.8 2.09 1.68 3.03 2.63A9.99 9.99 0 0 1 56 4v2a8 8 0 0 0-6.77 3.74c1.03 1.2 1.97 2.5 2.79 3.86A4 4 0 0 1 56 10v2a2 2 0 0 0-2 2.07 28.4 28.4 0 0 1 2-.07v2c-9.2 0-17.3 4.78-21.91 12H30zM7.75 28H0v-2c2.81 0 5.46.73 7.75 2zM56 20v2c-5.6 0-10.65 2.3-14.28 6h-2.7c4.04-4.89 10.15-8 16.98-8zm-39.03 8h-2.69C10.65 24.3 5.6 22 0 22v-2c6.83 0 12.94 3.11 16.97 8zm15.01-.4a28.09 28.09 0 0 1 2.8-3.86 8 8 0 0 0-13.55 0c1.03 1.2 1.97 2.5 2.79 3.86a4 4 0 0 1 7.96 0zm14.29-11.86c1.3-.48 2.63-.87 4-1.15a25.99 25.99 0 0 0-44.55 0c1.38.28 2.72.67 4.01 1.15a21.98 21.98 0 0 1 36.54 0zm-5.43 2.71c1.13-.72 2.3-1.37 3.54-1.93a19.98 19.98 0 0 0-32.76 0c1.23.56 2.41 1.2 3.54 1.93a15.98 15.98 0 0 1 25.68 0zm-4.67 3.78c.94-.95 1.96-1.83 3.03-2.63a13.98 13.98 0 0 0-22.4 0c1.07.8 2.09 1.68 3.03 2.63a9.99 9.99 0 0 1 16.34 0z%27%3E%3C/path%3E%3C/svg%3E"},8390:(t,e,n)=>{t.exports=n.p+"3747d62d05f8f09fb741.png"},3208:(t,e,n)=>{t.exports=n.p+"b037ca7f505f5c048bae.png"},164:(t,e,n)=>{t.exports=n.p+"5c3d1b2ce7bb3793be6e.png"},2:(t,e,n)=>{t.exports=n.p+"2b9f9a8912419b0f4b69.png"},2867:(t,e,n)=>{t.exports=n.p+"fe3a2cf273f4367e50c9.png"},3473:(t,e,n)=>{t.exports=n.p+"60e08010af0453fec957.png"},9462:(t,e,n)=>{t.exports=n.p+"c945e6443b532c587958.png"},8801:(t,e,n)=>{t.exports=n.p+"8a70e34efeda3124235b.png"},2690:(t,e,n)=>{t.exports=n.p+"655dfafec0c29f96b457.png"},1636:(t,e,n)=>{t.exports=n.p+"23490230891f2ec2ff67.png"},9614:(t,e,n)=>{t.exports=n.p+"c803e3dc1beea0f5f1bd.png"},9420:(t,e,n)=>{t.exports=n.p+"9a4458cec57a5f2e20be.png"},5903:(t,e,n)=>{t.exports=n.p+"bfee95e80e68772d2294.png"},429:(t,e,n)=>{t.exports=n.p+"b005e768cef6d6b3f86a.png"},3126:(t,e,n)=>{t.exports=n.p+"b10651e4e1c12543ab81.png"},977:(t,e,n)=>{t.exports=n.p+"700215e7aecd99dc76fa.png"},3011:(t,e,n)=>{t.exports=n.p+"3c63a168bc70cd2daa99.png"},7786:(t,e,n)=>{t.exports=n.p+"ec23475cb092652acfea.png"},3082:(t,e,n)=>{t.exports=n.p+"dd674023209c7164b31e.png"},3320:(t,e,n)=>{t.exports=n.p+"60e9cbcdcaf1332fd7e6.png"},5404:(t,e,n)=>{t.exports=n.p+"15fc2188c91a64ee7eec.png"},7283:(t,e,n)=>{t.exports=n.p+"33cbb501e4e522021025.png"},9374:(t,e,n)=>{t.exports=n.p+"cc53e7b9ee2a3fde6dfa.png"},7552:(t,e,n)=>{t.exports=n.p+"6b7b936e3906da3a44fa.png"},1668:(t,e,n)=>{t.exports=n.p+"92bd8516e50642f8233a.png"},3356:(t,e,n)=>{t.exports=n.p+"5bd76dab3a9d835f39f2.png"},7210:(t,e,n)=>{t.exports=n.p+"08d49720c6fb4a0489a6.png"},2386:(t,e,n)=>{t.exports=n.p+"3e5030eb950dc72517ee.png"},5815:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAOFElEQVR4nO2debTVVRXHvzjrc0o7UGopDolK4ZSKijwVKZcRzrrQzJEQy0ZNM2tbmkMuo2ywdGkKqGlphjhh+RQTTEyRLE1T0TD0UDk+BBRbW/Zb3QXv3fs702+6+7PWW++P9zvn7N99+55hTweKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoijh9NPPcEUIZksAIwAMkZ9NAKwLYD0AbwN4DcB8AI8DmA1gGoBZBLu0bO9SFKpYAsGsAeAYAOMA7ODRxcsArgPwM4J9MomQFUIVa5lSHQrgYgCbRuryNgDfINjZkfqrHG2tWASzJoDLZKaKzbsAJgL4GsHaYt80f9pWsQiG90tTAeyReKgFAMYT7I2JxykVbalYBLM6gLsA7JXjsL8A8AWCXZzjmIWxUju8ZC9cmrNSMWMBTCeYjXIetxDabsYimAMB3FygCM8B2I9gny5QhuS0lWLJZv1vEU9/vvC+a0SdT43tthSeUgKlYt4P4G6C2a4EsiShbWYsghkgVvIBJRCnh3kAhhPsP8ohTjzaYsYimFUB3FAypWI2BjCFYNYpgSxRaZel8JICToFZ2QbAJIKp1epRe8UimBMBfL4EojTj02yhL6947tR6j0UwowHcVJEv0CIA2xPsEyWQJZjaKhbBjBBn8KqRu54sVvT/iD9wAwBbAxgmM8/6AX3PYBcTwb4bUd5CWKXqL9CEsxIo1a0APtPLP346gCsk9OY4AN8FsKFH/0MBHALg15HkLYxazlgEYyQ+KjY7EeyfM4w/QJRjT4/x2SK/DcG+nUD+3Kjr5n14gj7/mEWp8J5i2ZcAfALA/R7jcPTqKI92paKuipXCoj3Z5WGC7QZwmOzFXDklgfy5UlfF2iJyf28C+K1rI4KdL/stV/YlmI0jv0Ou1FWx1o3c3ziC/Zdn2ytEMV05IJ74+aOK1ZorCHaSb2OCfYMdzh5NRwbIXDh1VayFkfrh2KkvRegn06Z/OXwyhUpDXRVrUaR+TiJYn2Vsef7p0WYgwawdYexCqKtixciKuZNgfZaw3vCxpPcrYTRGZuqqWHMj9HFRhD568HXzrBdRhlypq2I9E6GP6RH66GGgZ7u1IsqQK3VVrIcj9BFzttjRs90rEWXIlVoqFsE+5WnxbmRYHFlMfwC7eTb32fSXgjoH+t0V2D6WW+UoACt7tHuOYHXGKiG/CxSJ3SqHh3Qg6WanezaPdSIthDorFsdOvRHYB8dY7RTQ/nsAPuDZ9qaAcQuntopFsK9zkkJgN+tI/t/u7uObgwKs9hyTdadn21JQ92SKSz2Nk42wDeoeghmbtQHBsAP5VwFjXlj16oC1T1glmOsBHBGpOw6dOZVgX+hjLP48vyLGVd8v7Rz2ExLsO2GiFks7KNYg+WfFiu9/C8A1AH4J4KGeEGKC2VqKuHUG9M3KtDvB/imSrIXRFin2BHM+gDMSdL1IityuBuCDEfo7m2DPjdBP4bRLJjRHcaaoj7C6FBmJoVS/AXBehH5KQTsVBdmFEyJKmvLGS9/eEidfC3wswpWkC93zOtHRXcLITFaqkRJpWhvaRrGwTLlmdKKDIw22L4E4EOv6KIJ9tQSyRKUda5COLYm7hE+QB9RRqdDGVZPXEpfP3gUMz6HOpxDs1QWMnRttWTVZNslsHb8l56H58DCk7kqFdttjNdKF7rc70XGDzNp7JZ69XxG/Idd5D40TqwR6l87/Sx79HMDmkbtmK/1PAZxLsP+N3HepUcUSpATRaeLrC6lxxbwuGdDfD8igrjSqWMshuXwnADjWwyzxCIArAVwtYTttiypWEwiG3TWfBPAxAB8F0F+SLNaUWelFcXCzkfO+upR5VBRFURRFURRFURRFURRFUQJIbnknmI9I9AD/3gQAp0stlZ/XGh59Xf72qtQQZQfuv6XW1d+rflNDu5FEsQhmFfG3nczxRxG6ZEV7CMA0Thol2L9E6FNJSHTFIpih4ogdlFDuRyV9fhLBLk44juJJVMUimJMA/CTBrVt9weWyzyDYkDoJSgKiKRbBnCxBbUUwlcNcCHZBOykJwXAG9k6y3dhUSib1k60Dp5MtkAvNeZ/6RJ7Rq1EUi2AOBHBzjL4CmCdZL7MLliMpBNMB4GAAXBRuP8nGzgpng88E8IDE3z+W6tLNYMUimM1YQKklVTR8yhxNsF0lkCUqBLORxM2fFCHCtYcXJKGEq+jcG/PkHaRYBMNZPreXLLuYlauTYB8pgSzBEAwr0ZlcPgnAGgmHWiC3/V9CsME3e3grFsHwBv3HkgBaNubLxd0vlVC2zBDM0fLPNjkOy/f+HNhXDbCseCkWwXxI9lQh9TlTc7vsuSp3cbcse1cVuBLMk1n/ad8OnBNWCWZXALNKrlTM/lIKu1IQzGjZsxa5veBLOLtkAvHCacYimH0ATKnQVRzPsyspxp4hNQSzslRZ9i3fnQL2cAz1qYSTecaSstS3Vux+lw8DOLoEcjSFYNaTz7ZMSsUMlvxIZzIplqz5UyXtKQVvSrIoO6u/w07niGOcmEjmmJwvaWZl5AiC+aKrXC2XQqkEPFX2LClg88AIgn2oYUxW+EMATACwUYQxNyPYGFfNRYdgtpU9VZnraLA/dmeCnZO1QZYZ69CESsV8rlGpsKwazFKCvVESRe+JMMaICH2k4vwKFGdh19FEMTFloqliyWx1TkKBJxLs9X2Pbzke61MA/ho4jvPNEnkgJbxHlVG2XmB/5DezPtxqxtoTwDaxJRTYRjK+1UNSy+qEwLG2Dmyfiq9WrMzB6eLCa0krxTrEceCZMsNsB+B4ALdJVOjysAFu/6zHWILlfu91lKWRrQLaJoFghshnVCXYpXRhFnlblaYe6vDSrEQHNQTe8fJ1FcFsIAp6sMx+MwB8nWCfd/xAuUjacMc2PXR4tkvJhIR7K45iuBbAhnLajFn363CC+XarAiitFCvrXcYvs72ot2hOiQG6XH5CmBnQtlSKRTAjA69G6YslorDUUzNewsSP41pdEa8jPrXVNqbVUvi+jAP9IIeKdSHX2JYtEePMyP3xHTzX8YpAsKc3XkTAoTAEe7mcsB+MNN4YUdg+aaVYCzMOlMelja9leCZF26jI3irWbLVQynoPItgxBNvntS6y9eCtRJ+ncAd45tu12eOtlsJXMwbwPRNB2FaExCLZHOTLyrGOzz8osxEbUefKJervyP9loctKwT5TCcXZIIKTezeJQu2VVoo1X3IBW8EvmXop7B/QthSV9sQu6HJ3Is9Ih/URG+VVipLvQSSYcXK4CvmyNj1pt1oKs/rsYtx+1YotAto+noN8WRji+FlNDg246w2CfTZCjftNm/2xlWJlDfTKw7I9OKBtWWLgXc0lExPJwfw+sH3TqNZYipXSl9jDLp7t2Ah7X3xxvHAJjnxTbH6peDaw3w2b/THWUjg6JNowI8M8291cokA/F9cSp2YtSShLqHG2qSsqlmKt/N7SnQiC4WVwgGfvP0ollwdN9yXLETMmrTdSlkBoFd3w3lE2a3bx8QSzXxyxVsA3dv0PBDsrkUw+uHgA5ieWJTSqomlWdZZ4LBef3mSC2dLh+ZaIhfezHk3Z1uMc+ZiYtR26fyuVKASzM4B9A7tpmlqXRbFcXCl8UphGMDGn2eM8zRkTSljuyOXSyxiRsysgdwaF+m3RaqnOolgPOA7I8TozCCb0G8EfAhtev+XRlJMuzwodPwEu2S7DxaAaDckEmhzp6uKmW4wsinWZRC+4sL7MXBPkNlNn5EO4KqPlv5F5Er5TxpSv5xye5QqIX441cEMm0MGRupzW7I8tFUvuLPbZq/STdnMI5ihJkMiE7NOmeAQaLpAAQtdYr7xwPeldLO6XIAhmmMzisTKB7ifYpoeLzFMtwbAj9MgAYXi/c784UufKzNITdbCaZN9uK5vK4R5Z2nMlpb4s7psVIJixcuGmK3zV73kE+5TjeIMlTt3FP5mFI1sVu3NRrHUBPAwg6qkvEhy2fGjZC68RzMDASJBZEvYyqbeCJ5JFM1i+mJxdtUeYxL3CM9/HOZOq2UOuKfbbSySnS7GvlCwRw+zFValFSjCPRNg8LxY/4pPinN9Mwo8HZohYCYGVaQ/JQWiK86mDYMbIyaJoeBkdRbBl8QNmgmDGS53WKsJXEWcqA+BRbcZe65JflpARVVMq4RoHb0aZmOliwvFyRHahe3onOtjvtUNBL34HwV5U0NhBdKF7cSc6lpS4VkNvcEzYSLEQZMJ5xmqAj8F3J3yZvlgktTirDC+FVSnC22PCedGlkbdiyWZ5dMTMjywsXZYhYp/McczoSDjMMbIJLzO8j93Hx4QTFJPThe4lnei4VvxaqZfFV9hqTLBTEo+TC13ofqkTHWx7O6ikIrKdcV+XCjONBGfisnJ1ofuWTnSwT3HnBIVY3xXbDZfZfjRy34XShe7HOtGxitQFKxOzRamcDLKNxHZyriTfwPGSOxeyh+ONIlt3f0iwodVmSg3BXMBlB0oiI5uSxjYmvfqQrNIJwfSXkw/Xf9hRjHh9pXAtlpPH85I/dwfXxapC7dBYEAzbhy4osPoMx9ifSrBXxugs15eQWKC1GwLeOJjtDZ/iqXVEQo2ulNqpqeBIlTniu31MEmY46mIe5xzGGrNKtZnaAgkzOk1MKrGuNoGsBuMI9vY8PkdVrJIiCsZRCWMkQ8nXP7tUEkrOznNlUMWqALKF2FUqLA6RDJtBGe6F5KXuxOVrvOaBKlZFkQjbzSWGbUuJcthKfrPJ5zyJ+tC7tBVFURRFURRFURRFURRFURRFURRFURRFURRFURRFURRFqSQA/geGDEyPNc77PgAAAABJRU5ErkJggg=="}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/sheet-maker/",n.b=document.baseURI||self.location.href,n.nc=void 0;var i={};(()=>{n.d(i,{n:()=>uB});var t={};n.r(t),n.d(t,{default:()=>uA,dependencies:()=>dA,name:()=>cA,register:()=>fA,template:()=>hA});var e={};n.r(e),n.d(e,{AvatarSmallBlock:()=>kC});var s={};n.r(s),n.d(s,{default:()=>TC,dependencies:()=>$C,name:()=>CC,register:()=>RC,template:()=>EC});var r={};n.r(r),n.d(r,{AvatarFullBlock:()=>OC});var o={};n.r(o),n.d(o,{default:()=>BC,dependencies:()=>NC,name:()=>MC,register:()=>FC,template:()=>UC});var a={};n.r(a),n.d(a,{DescriptionBlock:()=>VC});var l={};n.r(l),n.d(l,{default:()=>zC,dependencies:()=>qC,name:()=>DC,register:()=>KC,template:()=>ZC});var c={};n.r(c),n.d(c,{VirtuesList:()=>WC});var h={};n.r(h),n.d(h,{default:()=>GC,dependencies:()=>XC,name:()=>QC,register:()=>JC,template:()=>_C});var u={};n.r(u),n.d(u,{FlawsList:()=>tE});var d={};n.r(d),n.d(d,{default:()=>rE,dependencies:()=>oE,name:()=>iE,register:()=>lE,template:()=>sE});var p={};n.r(p),n.d(p,{PersonalityTraitsList:()=>cE});var f={};n.r(f),n.d(f,{default:()=>fE,dependencies:()=>gE,name:()=>dE,register:()=>mE,template:()=>pE});var g={};n.r(g),n.d(g,{NameBlock:()=>bE});var v={};n.r(v),n.d(v,{default:()=>SE,dependencies:()=>AE,name:()=>xE,register:()=>EE,template:()=>kE});var m={};n.r(m),n.d(m,{BackgroundBlock:()=>TE});var b={};n.r(b),n.d(b,{default:()=>RE,dependencies:()=>OE,name:()=>$E,register:()=>LE,template:()=>IE});var w={};n.r(w),n.d(w,{Description:()=>ME});var y={};n.r(y),n.d(y,{default:()=>DE,dependencies:()=>ZE,name:()=>FE,register:()=>qE,template:()=>VE});var x={};n.r(x),n.d(x,{AbilitiesBlock:()=>HE});var k={};n.r(k),n.d(k,{default:()=>GE,dependencies:()=>XE,name:()=>QE,register:()=>JE,template:()=>_E});var S={};n.r(S),n.d(S,{CharacteristicsBlock:()=>tT});var A={};n.r(A),n.d(A,{default:()=>rT,dependencies:()=>oT,name:()=>iT,register:()=>lT,template:()=>sT});var C={};n.r(C),n.d(C,{FatigueBlock:()=>cT});var E={};n.r(E),n.d(E,{default:()=>fT,dependencies:()=>gT,name:()=>dT,register:()=>mT,template:()=>pT});var T={};n.r(T),n.d(T,{DamageBlock:()=>bT});var $={};n.r($),n.d($,{default:()=>ST,dependencies:()=>AT,name:()=>xT,register:()=>ET,template:()=>kT});var I={};n.r(I),n.d(I,{ConfidenceBlock:()=>TT});var R={};n.r(R),n.d(R,{default:()=>PT,dependencies:()=>LT,name:()=>RT,register:()=>UT,template:()=>OT});var O={};n.r(O),n.d(O,{ActiveMagicList:()=>BT});var P={};n.r(P),n.d(P,{default:()=>DT,dependencies:()=>ZT,name:()=>FT,register:()=>qT,template:()=>VT});var L={};n.r(L),n.d(L,{PhysicalPenaltyBlock:()=>HT});var M={};n.r(M),n.d(M,{default:()=>QT,dependencies:()=>_T,name:()=>KT,register:()=>XT,template:()=>WT});var U={};n.r(U),n.d(U,{Stats:()=>YT});var B={};n.r(B),n.d(B,{default:()=>r$,dependencies:()=>o$,name:()=>i$,register:()=>l$,template:()=>s$});var N={};n.r(N),n.d(N,{ArtsBlock:()=>c$});var j={};n.r(j),n.d(j,{default:()=>f$,dependencies:()=>g$,name:()=>d$,register:()=>m$,template:()=>p$});var F={};n.r(F),n.d(F,{SpellcastingModifiersBlock:()=>b$});var V={};n.r(V),n.d(V,{default:()=>S$,dependencies:()=>A$,name:()=>x$,register:()=>E$,template:()=>k$});var D={};n.r(D),n.d(D,{default:()=>O$,dependencies:()=>P$,name:()=>I$,register:()=>M$,template:()=>R$});var Z={};n.r(Z),n.d(Z,{SpellList:()=>N$});var z={};n.r(z),n.d(z,{default:()=>Z$,dependencies:()=>z$,name:()=>V$,register:()=>H$,template:()=>D$});var q={};n.r(q),n.d(q,{SpellWishlist:()=>K$});var H={};n.r(H),n.d(H,{default:()=>X$,dependencies:()=>Y$,name:()=>_$,register:()=>tI,template:()=>G$});var K={};n.r(K),n.d(K,{Sigil:()=>eI});var W={};n.r(W),n.d(W,{default:()=>sI,dependencies:()=>rI,name:()=>nI,register:()=>aI,template:()=>iI});var Q={};n.r(Q),n.d(Q,{Magic:()=>lI});var _={};n.r(_),n.d(_,{default:()=>gI,dependencies:()=>vI,name:()=>pI,register:()=>bI,template:()=>fI});var G={};n.r(G),n.d(G,{LabStats:()=>wI});var X={};n.r(X),n.d(X,{default:()=>AI,dependencies:()=>CI,name:()=>kI,register:()=>TI,template:()=>SI});var Y={};n.r(Y),n.d(Y,{default:()=>PI,dependencies:()=>LI,name:()=>RI,register:()=>UI,template:()=>OI});var J={};n.r(J),n.d(J,{ResearchProjects:()=>jI});var tt={};n.r(tt),n.d(tt,{default:()=>zI,dependencies:()=>qI,name:()=>DI,register:()=>KI,template:()=>ZI});var et={};n.r(et),n.d(et,{LabModificationsList:()=>WI});var nt={};n.r(nt),n.d(nt,{default:()=>YI,dependencies:()=>JI,name:()=>GI,register:()=>eR,template:()=>XI});var it={};n.r(it),n.d(it,{LabDescriptionBlock:()=>nR});var st={};n.r(st),n.d(st,{default:()=>rR,dependencies:()=>oR,name:()=>iR,register:()=>lR,template:()=>sR});var rt={};n.r(rt),n.d(rt,{Lab:()=>cR});var ot={};n.r(ot),n.d(ot,{default:()=>vR,dependencies:()=>mR,name:()=>fR,register:()=>wR,template:()=>gR});var at={};n.r(at),n.d(at,{CarriedBelongingsBlock:()=>yR});var lt={};n.r(lt),n.d(lt,{default:()=>CR,dependencies:()=>ER,name:()=>SR,register:()=>$R,template:()=>AR});var ct={};n.r(ct),n.d(ct,{SanctumBelongingsBlock:()=>IR});var ht={};n.r(ht),n.d(ht,{default:()=>MR,dependencies:()=>UR,name:()=>PR,register:()=>NR,template:()=>LR});var ut={};n.r(ut),n.d(ut,{VisBlock:()=>jR});var dt={};n.r(dt),n.d(dt,{default:()=>DR,dependencies:()=>ZR,name:()=>FR,register:()=>qR,template:()=>VR});var pt={};n.r(pt),n.d(pt,{Belongings:()=>HR});var ft={};n.r(ft),n.d(ft,{default:()=>YR,dependencies:()=>JR,name:()=>GR,register:()=>eO,template:()=>XR});var gt={};n.r(gt),n.d(gt,{NotesBlock:()=>nO});var vt={};n.r(vt),n.d(vt,{default:()=>aO,dependencies:()=>lO,name:()=>rO,register:()=>hO,template:()=>oO});var mt={};n.r(mt),n.d(mt,{QuestList:()=>uO});var bt={};n.r(bt),n.d(bt,{default:()=>vO,dependencies:()=>mO,name:()=>fO,register:()=>wO,template:()=>gO});var wt={};n.r(wt),n.d(wt,{NpcList:()=>yO});var yt={};n.r(yt),n.d(yt,{default:()=>SO,dependencies:()=>AO,name:()=>xO,register:()=>EO,template:()=>kO});var xt={};n.r(xt),n.d(xt,{Notes:()=>TO});var kt={};n.r(kt),n.d(kt,{default:()=>MO,dependencies:()=>UO,name:()=>PO,register:()=>NO,template:()=>LO});var St={};n.r(St),n.d(St,{XpList:()=>jO});var At={};n.r(At),n.d(At,{default:()=>zO,dependencies:()=>qO,name:()=>DO,register:()=>KO,template:()=>ZO});var Ct={};n.r(Ct),n.d(Ct,{AgeBlock:()=>WO});var Et={};n.r(Et),n.d(Et,{default:()=>YO,dependencies:()=>JO,name:()=>GO,register:()=>eP,template:()=>XO});var Tt={};n.r(Tt),n.d(Tt,{WarpingBlock:()=>nP});var $t={};n.r($t),n.d($t,{default:()=>rP,dependencies:()=>oP,name:()=>iP,register:()=>lP,template:()=>sP});var It={};n.r(It),n.d(It,{Progression:()=>cP});var Rt={};n.r(Rt),n.d(Rt,{default:()=>vP,dependencies:()=>mP,name:()=>fP,register:()=>wP,template:()=>gP});var Ot={};n.r(Ot),n.d(Ot,{TalismanBlock:()=>yP});var Pt={};n.r(Pt),n.d(Pt,{default:()=>CP,dependencies:()=>EP,name:()=>SP,register:()=>$P,template:()=>AP});var Lt={};n.r(Lt),n.d(Lt,{MagicItemsBlock:()=>IP});var Mt={};n.r(Mt),n.d(Mt,{default:()=>MP,dependencies:()=>UP,name:()=>PP,register:()=>NP,template:()=>LP});var Ut={};n.r(Ut),n.d(Ut,{FamiliarBlock:()=>jP});var Bt={};n.r(Bt),n.d(Bt,{default:()=>DP,dependencies:()=>ZP,name:()=>FP,register:()=>qP,template:()=>VP});var Nt={};n.r(Nt),n.d(Nt,{Enchantments:()=>HP});var jt={};n.r(jt),n.d(jt,{default:()=>YP,dependencies:()=>JP,name:()=>GP,register:()=>eL,template:()=>XP});var Ft={};n.r(Ft),n.d(Ft,{CharacterTypeSelector:()=>nL});var Vt={};n.r(Vt),n.d(Vt,{default:()=>rL,dependencies:()=>oL,name:()=>iL,register:()=>lL,template:()=>sL});var Dt={};n.r(Dt),n.d(Dt,{Settings:()=>cL});var Zt={};n.r(Zt),n.d(Zt,{default:()=>dL,dependencies:()=>pL,name:()=>hL,register:()=>gL,template:()=>uL});var zt={};n.r(zt),n.d(zt,{default:()=>xL,dependencies:()=>kL,name:()=>wL,register:()=>AL,template:()=>yL});var qt={};n.r(qt),n.d(qt,{default:()=>OL,dependencies:()=>PL,name:()=>IL,register:()=>ML,template:()=>RL});var Ht={};n.r(Ht),n.d(Ht,{default:()=>VL,dependencies:()=>DL,name:()=>jL,register:()=>zL,template:()=>FL});var Kt={};n.r(Kt),n.d(Kt,{default:()=>_L,dependencies:()=>GL,name:()=>WL,register:()=>YL,template:()=>QL});var Wt={};n.r(Wt),n.d(Wt,{default:()=>sM,dependencies:()=>rM,name:()=>nM,register:()=>aM,template:()=>iM});var Qt={};n.r(Qt),n.d(Qt,{default:()=>pM,dependencies:()=>fM,name:()=>uM,register:()=>vM,template:()=>dM});var _t={};n.r(_t),n.d(_t,{default:()=>kM,dependencies:()=>SM,name:()=>yM,register:()=>CM,template:()=>xM});var Gt={};n.r(Gt),n.d(Gt,{default:()=>OM,dependencies:()=>PM,name:()=>IM,register:()=>MM,template:()=>RM});var Xt={};n.r(Xt),n.d(Xt,{default:()=>VM,dependencies:()=>DM,name:()=>jM,register:()=>zM,template:()=>FM});var Yt={};n.r(Yt),n.d(Yt,{default:()=>_M,dependencies:()=>GM,name:()=>WM,register:()=>YM,template:()=>QM});var Jt={};n.r(Jt),n.d(Jt,{default:()=>sU,dependencies:()=>rU,name:()=>nU,register:()=>aU,template:()=>iU});var te={};n.r(te),n.d(te,{default:()=>pU,dependencies:()=>fU,name:()=>uU,register:()=>vU,template:()=>dU});var ee={};n.r(ee),n.d(ee,{default:()=>kU,dependencies:()=>SU,name:()=>yU,register:()=>CU,template:()=>xU});var ne={};n.r(ne),n.d(ne,{default:()=>PU,dependencies:()=>LU,name:()=>RU,register:()=>UU,template:()=>OU});var ie={};n.r(ie),n.d(ie,{default:()=>DU,dependencies:()=>ZU,name:()=>FU,register:()=>qU,template:()=>VU});var se={};n.r(se),n.d(se,{default:()=>GU,dependencies:()=>XU,name:()=>QU,register:()=>JU,template:()=>_U});var re={};function oe(t){return"object"==typeof t&&null!==t||"function"==typeof t}function ae(t){return null==t}n.r(re),n.d(re,{default:()=>rB,dependencies:()=>oB,name:()=>iB,register:()=>lB,template:()=>sB});let le=new WeakMap;function ce(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function he(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function ue(t,e,n){let i=le.get(t);if(void 0===i){if(!n)return;i=new Map,le.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function de(t,e,n){const i=ue(e,n,!1);return void 0!==i&&i.has(t)}function pe(t,e,n){if(de(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&pe(t,i,n)}function fe(t,e,n){const i=ue(e,n,!1);if(void 0!==i)return i.get(t)}function ge(t,e,n){if(de(t,e,n))return fe(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?ge(t,i,n):void 0}function ve(t,e,n,i){ue(n,i,!0).set(t,e)}function me(t,e){const n=[],i=ue(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function be(t,e){const n=me(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=be(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}function we(t,e){return function(n,i){if(!oe(n))throw ce("@metadata",[t,e,n,i],"target",n,"Object or Function");ve(t,e,n,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(i))}}function ye(t,e,n,i){if(void 0!==n){if(!Array.isArray(t))throw ce("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if(!oe(e))throw ce("Metadata.decorate",[t,e,n,i],"target",e,"Object or Function");if(!oe(i)&&!ae(i))throw ce("Metadata.decorate",[t,e,n,i],"attributes",i,"Object, Function, null, or undefined");return null===i&&(i=void 0),function(t,e,n,i){for(let s=t.length-1;s>=0;--s){const r=(0,t[s])(e,n,i);if(!ae(r)){if(!oe(r))throw ce("DecorateProperty",[t,e,n,i],"decorated",r,"Object, Function, null, or undefined");i=r}}return i}(t,e,n=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(n),i)}if(!Array.isArray(t))throw ce("Metadata.decorate",[t,e,n,i],"decorators",t,"Array");if("function"!=typeof e)throw ce("Metadata.decorate",[t,e,n,i],"target",e,"Function");return function(t,e){for(let n=t.length-1;n>=0;--n){const i=(0,t[n])(e);if(!ae(i)){if("function"!=typeof i)throw ce("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function xe(t,e,n,i){if(!oe(n))throw ce("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return ve(t,e,n,he(i))}function ke(t,e,n){if(!oe(e))throw ce("Metadata.has",[t,e,n],"target",e,"Object or Function");return pe(t,e,he(n))}function Se(t,e,n){if(!oe(e))throw ce("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return de(t,e,he(n))}function Ae(t,e,n){if(!oe(e))throw ce("Metadata.get",[t,e,n],"target",e,"Object or Function");return ge(t,e,he(n))}function Ce(t,e,n){if(!oe(e))throw ce("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return fe(t,e,he(n))}function Ee(t,e){if(!oe(t))throw ce("Metadata.getKeys",[t,e],"target",t,"Object or Function");return be(t,he(e))}function Te(t,e){if(!oe(t))throw ce("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return me(t,he(e))}function $e(t,e,n){if(!oe(e))throw ce("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=ue(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,he(n))}const Ie={define:xe,has:ke,hasOwn:Se,get:Ae,getOwn:Ce,getKeys:Ee,getOwnKeys:Te,delete:$e};function Re(t,e,n,i,s){if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:s,value:n}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}const Oe="[[$au]]";function Pe(t,e,n){Re(t,Oe,le,e,n),Re(t,"metadata",we,e,n),Re(t,"decorate",ye,e,n),Re(t,"defineMetadata",xe,e,n),Re(t,"hasMetadata",ke,e,n),Re(t,"hasOwnMetadata",Se,e,n),Re(t,"getMetadata",Ae,e,n),Re(t,"getOwnMetadata",Ce,e,n),Re(t,"getMetadataKeys",Ee,e,n),Re(t,"getOwnMetadataKeys",Te,e,n),Re(t,"deleteMetadata",$e,e,n)}const Le=Ie.getOwn,Me=Ie.hasOwn,Ue=Ie.define,Be=t=>"function"==typeof t,Ne=t=>"string"==typeof t,je=()=>Object.create(null),Fe={};function Ve(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=Fe[t];if(void 0!==e)return e;const n=t.length;if(0===n)return Fe[t]=!1;let i=0,s=0;for(;s<n;++s)if(i=t.charCodeAt(s),0===s&&48===i&&n>1||i<48||i>57)return Fe[t]=!1;return Fe[t]=!0}default:return!1}}function De(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function Ze(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const ze=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(je(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function n(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const i=t.length;if(0===i)return t;let s,r=!1,o="",a="",l=0,c=t.charAt(0),h=n(c),u=0;for(;u<i;++u)s=l,a=c,l=h,c=t.charAt(u+1),h=n(c),0===l?o.length>0&&(r=!0):(!r&&o.length>0&&2===l&&(r=3===s||3===h),o+=e(a,r),r=!1);return o}}(),qe=function(){const t=je();function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=ze(n,e)),i}}(),He=function(){const t=je();return function(e){let n=t[e];return void 0===n&&(n=qe(e),n.length>0&&(n=n[0].toUpperCase()+n.slice(1)),t[e]=n),n}}(),Ke=function(){const t=je();function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=ze(n,e)),i}}();function We(t){const{length:e}=t,n=Array(e);let i=0;for(;i<e;++i)n[i]=t[i];return n}const Qe={};function _e(t){return void 0===Qe[t]&&(Qe[t]=0),++Qe[t]}function Ge(t,e){return t-e}function Xe(t,e,n){return{configurable:!0,enumerable:n.enumerable,get(){const t=n.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:n.enumerable}),t}}}function Ye(...t){const e=[];let n=0;const i=t.length;let s,r=0,o=0;for(;o<i;++o)if(s=t[o],void 0!==s){r=s.length;let t=0;for(;t<r;++t)e[n++]=s[t]}return e}function Je(...t){const e=t.length;let n,i=0;for(;e>i;++i)if(n=t[i],void 0!==n)return n;throw new Error("No default value found")}const tn=function(){const t=Function.prototype,e=Object.getPrototypeOf,n=new WeakMap;let i,s=t,r=0;return function(o){if(i=n.get(o),void 0===i)for(n.set(o,i=[s=o]),r=0;(s=e(s))!==t;)i[++r]=s;return i}}();function en(...t){return Object.assign(je(),...t)}const nn=function(){const t=new WeakMap;let e=!1,n="",i=0;return function(s){return e=t.get(s),void 0===e&&(n=s.toString(),i=n.length,e=i>=29&&i<=100&&125===n.charCodeAt(i-1)&&n.charCodeAt(i-2)<=32&&93===n.charCodeAt(i-3)&&101===n.charCodeAt(i-4)&&100===n.charCodeAt(i-5)&&111===n.charCodeAt(i-6)&&99===n.charCodeAt(i-7)&&32===n.charCodeAt(i-8)&&101===n.charCodeAt(i-9)&&118===n.charCodeAt(i-10)&&105===n.charCodeAt(i-11)&&116===n.charCodeAt(i-12)&&97===n.charCodeAt(i-13)&&110===n.charCodeAt(i-14)&&88===n.charCodeAt(i-15),t.set(s,e)),e}}();function sn(t,e){return t instanceof Promise?t.then(e):e(t)}function rn(...t){let e,n,i,s=0,r=t.length;for(;s<r;++s)e=t[s],(e=t[s])instanceof Promise&&(void 0===n?n=e:void 0===i?i=[n,e]:i.push(e));return void 0===i?n:Promise.all(i)}const on="au:annotation",an=(t,e)=>void 0===e?`${on}:${t}`:`${on}:${t}:${e}`,ln=(t,e)=>{const n=Le(on,t);void 0===n?Ue(on,[e],t):n.push(e)},cn=Object.freeze({name:"au:annotation",appendTo:ln,set(t,e,n){Ue(an(e),n,t)},get:(t,e)=>Le(an(e),t),getKeys(t){let e=Le(on,t);return void 0===e&&Ue(on,e=[],t),e},isKey:t=>t.startsWith(on),keyFor:an}),hn="au:resource",un=Object.freeze({name:hn,appendTo(t,e){const n=Le(hn,t);void 0===n?Ue(hn,[e],t):n.push(e)},has:t=>Me(hn,t),getAll(t){const e=Le(hn,t);return void 0===e?ni:e.map((e=>Le(e,t)))},getKeys(t){let e=Le(hn,t);return void 0===e&&Ue(hn,e=[],t),e},isKey:t=>t.startsWith(hn),keyFor:(t,e)=>void 0===e?`${hn}:${t}`:`${hn}:${t}:${e}`}),dn={annotation:cn,resource:un},pn=Object.prototype.hasOwnProperty;function fn(t,e,n,i){let s=Le(an(t),n);return void 0===s?(s=e[t],void 0===s?(s=n[t],void 0!==s&&pn.call(n,t)?s:i()):s):s}function gn(t,e,n){let i=Le(an(t),e);return void 0===i?(i=e[t],void 0!==i&&pn.call(e,t)?i:n()):i}function vn(t,e,n){const i=e[t];return void 0===i?n():i}!function(t,e=!0,n=!1,i=!0,s=!0){if(function(t){return Oe in t}(t)){if(t[Oe]===le)return;if(t[Oe]instanceof WeakMap)return void(le=t[Oe]);throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const r=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`)}n&&Pe(t,i,s)}else Pe(t,i,s)}(Reflect,!1,!1);class mn{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,Gn(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:n,key:i}=this;return this.container=this.key=void 0,n.registerResolver(i,new Nn(i,t,e))}}function bn(t){const e=t.slice(),n=Object.keys(t),i=n.length;let s;for(let r=0;r<i;++r)s=n[r],Ve(s)||(e[s]=t[s]);return e}const wn={none(t){throw Error(`AUR0002:${t.toString()}`)},singleton:t=>new Nn(t,1,t),transient:t=>new Nn(t,2,t)};class yn{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){var e,n;return void 0===t||t===yn.DEFAULT?yn.DEFAULT:new yn(null!==(e=t.inheritParentResources)&&void 0!==e&&e,null!==(n=t.defaultResolver)&&void 0!==n?n:wn.singleton)}}yn.DEFAULT=yn.from({});const xn={createContainer:t=>new Wn(null,yn.from(t)),getDesignParamtypes:t=>Le("design:paramtypes",t),getAnnotationParamtypes(t){const e=an("di:paramtypes");return Le(e,t)},getOrCreateAnnotationParamTypes:Sn,getDependencies:kn,createInterface(t,e){const n=Be(t)?t:e,i=Ne(t)?t:void 0,s=function(t,e,n){if(null==t||void 0!==new.target)throw new Error(`AUR0001:${s.friendlyName}`);Sn(t)[n]=s};return s.$isInterface=!0,s.friendlyName=null==i?"(anonymous)":i,null!=n&&(s.register=function(t,e){return n(new mn(t,null!=e?e:s))}),s.toString=function(){return`InterfaceSymbol<${s.friendlyName}>`},s},inject:(...t)=>function(e,n,i){if("number"==typeof i){const n=Sn(e),s=t[0];void 0!==s&&(n[i]=s)}else if(n){const i=Sn(e.constructor),s=t[0];void 0!==s&&(i[n]=s)}else if(i){const e=Sn(i.value);let n;for(let i=0;i<t.length;++i)n=t[i],void 0!==n&&(e[i]=n)}else{const n=Sn(e);let i;for(let e=0;e<t.length;++e)i=t[e],void 0!==i&&(n[e]=i)}},transient:t=>(t.register=function(e){return Xn.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=Rn)=>(t.register=function(e){return Xn.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)};function kn(t){const e=an("di:dependencies");let n=Le(e,t);if(void 0===n){const i=t.inject;if(void 0===i){const e=xn.getDesignParamtypes(t),i=xn.getAnnotationParamtypes(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);n=Be(e)&&e!==Function.prototype?bn(kn(e)):[]}else n=bn(i);else if(void 0===i)n=bn(e);else{n=bn(e);let t,s=i.length,r=0;for(;r<s;++r)t=i[r],void 0!==t&&(n[r]=t);const o=Object.keys(i);let a;for(r=0,s=o.length,r=0;r<s;++r)a=o[r],Ve(a)||(n[a]=i[a])}}else n=bn(i);Ue(e,n,t),ln(t,e)}return n}function Sn(t){const e=an("di:paramtypes");let n=Le(e,t);return void 0===n&&(Ue(e,n=[],t),ln(t,e)),n}const An=xn.createInterface("IContainer"),Cn=An;function En(t){return function(e){const n=function(t,e,i){xn.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return t(e,n,i)},n}}const Tn=xn.inject;function $n(t){return xn.transient(t)}function In(t){return null==t?$n:$n(t)}const Rn={scoped:!1},On=function(t,e){e=!!e;const n=function(t,e,i){xn.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return((t,e,n,i)=>n.getAll(t,i))(t,0,i,e)},n},Pn=(En(((t,e,n)=>()=>n.get(t))),En(((t,e,n)=>n.has(t,!0)?n.get(t):void 0)));function Ln(t,e,n){xn.inject(Ln)(t,e,n)}function Mn(t,e,n){return e.getFactory(t).construct(n)}var Un,Bn;Ln.$isResolver=!0,Ln.resolve=()=>{},En(((t,e,n)=>(...i)=>e.getFactory(t).construct(n,i))),En(((t,e,n)=>{const i=Mn(t,e,n),s=new Yn(String(t),i);return n.registerResolver(t,s,!0),i})),En(((t,e,n)=>Mn(t,e,n))),(Bn=Un||(Un={}))[Bn.instance=0]="instance",Bn[Bn.singleton=1]="singleton",Bn[Bn.transient=2]="transient",Bn[Bn.callback=3]="callback",Bn[Bn.array=4]="array",Bn[Bn.alias=5]="alias";class Nn{constructor(t,e,n){this.key=t,this.strategy=e,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`AUR0003:${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const n=t.getFactory(this.state);if(null===n)throw new Error(`AUR0004:${String(this.key)}`);return n.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`AUR0005:${this.strategy}`)}}getFactory(t){var e,n,i;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(i=null===(n=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===n?void 0:n.call(e,t))&&void 0!==i?i:null;default:return null}}}function jn(t){return this.get(t)}function Fn(t,e){return e(t)}class Vn{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let n;return n=void 0===e?new this.Type(...this.dependencies.map(jn,t)):new this.Type(...this.dependencies.map(jn,t),...e),null==this.transformers?n:this.transformers.reduce(Fn,n)}registerTransformer(t){var e;(null!==(e=this.transformers)&&void 0!==e?e:this.transformers=[]).push(t)}}const Dn={$isResolver:!0,resolve:(t,e)=>e};function Zn(t){return Be(t.register)}function zn(t){return function(t){return Zn(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}function qn(t){return void 0!==t.prototype}const Hn=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]);let Kn=0;class Wn{constructor(t,e){this.parent=t,this.config=e,this.id=++Kn,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=je()):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign(je(),t.res,this.root.res):this.res=je()),this.u.set(An,Dn)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw new Error(`AUR0006:${t.map(String)}`);let e,n,i,s,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],oe(e))if(Zn(e))e.register(this);else if(dn.resource.has(e)){const t=dn.resource.getAll(e);if(1===t.length)t[0].register(this);else for(s=0,r=t.length;r>s;)t[s].register(this),++s}else if(qn(e))Xn.singleton(e,e).register(this);else for(n=Object.keys(e),s=0,r=n.length;s<r;++s)i=e[n[s]],oe(i)&&(Zn(i)?i.register(this):this.register(i));return--this.t,this}registerResolver(t,e,n=!1){Jn(t);const i=this.u,s=i.get(t);if(null==s){if(i.set(t,e),function(t){return Ne(t)&&t.indexOf(":")>0}(t)){if(void 0!==this.res[t])throw new Error(`AUR0007:${t}`);this.res[t]=e}}else s instanceof Nn&&4===s.strategy?s.state.push(e):i.set(t,new Nn(t,4,[s,e]));return n&&this.i.set(t,e),e}registerTransformer(t,e){const n=this.getResolver(t);if(null==n)return!1;if(n.getFactory){const t=n.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(Jn(t),void 0!==t.resolve)return t;let n,i=this;for(;null!=i;){if(n=i.u.get(t),null!=n)return n;if(null==i.parent){const n=zn(t)?this:i;return e?this.R(t,n):null}i=i.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(Jn(t),t.$isResolver)return t.resolve(this,this);let e,n=this;for(;null!=n;){if(e=n.u.get(t),null!=e)return e.resolve(n,this);if(null==n.parent){const i=zn(t)?this:n;return e=this.R(t,i),e.resolve(n,this)}n=n.parent}throw new Error(`AUR0008:${String(t)}`)}getAll(t,e=!1){Jn(t);const n=this;let i,s=n;if(e){let e=ni;for(;null!=s;)i=s.u.get(t),null!=i&&(e=e.concat(ti(i,s,n))),s=s.parent;return e}for(;null!=s;){if(i=s.u.get(t),null!=i)return ti(i,s,n);if(s=s.parent,null==s)return ni}return ni}invoke(t,e){if(nn(t))throw ei(t);return void 0===e?new t(...kn(t).map(jn,this)):new t(...kn(t).map(jn,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(nn(t))throw ei(t);this.h.set(t,e=new Vn(t,kn(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===yn.DEFAULT?new Wn(this,this.config):new Wn(this,yn.from({...this.config,inheritParentResources:!1})):new Wn(this,yn.from(null!=t?t:this.config))}disposeResolvers(){const t=this.u,e=this.i;let n,i;for([i,n]of e.entries())n.dispose(),t.delete(i);e.clear()}find(t,e){const n=t.keyFrom(e);let i=this.res[n];if(void 0===i&&(i=this.root.res[n],void 0===i))return null;if(null===i)return null;if(Be(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const n=Le(t.name,e.Type);return void 0===n?null:n}return null}create(t,e){var n,i;const s=t.keyFrom(e);let r=this.res[s];return void 0===r?(r=this.root.res[s],void 0===r?null:null!==(n=r.resolve(this.root,this))&&void 0!==n?n:null):null!==(i=r.resolve(this,this))&&void 0!==i?i:null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}R(t,e){if(!Be(t))throw new Error(`AUR0009:${t}`);if(Hn.has(t.name))throw new Error(`AUR0010:${t.name}`);if(Zn(t)){const n=t.register(e,t);if(!(n instanceof Object)||null==n.resolve){const n=e.u.get(t);if(null!=n)return n;throw new Error("AUR0011")}return n}if(dn.resource.has(t)){const n=dn.resource.getAll(t);if(1===n.length)n[0].register(e);else{const t=n.length;for(let i=0;i<t;++i)n[i].register(e)}const i=e.u.get(t);if(null!=i)return i;throw new Error("AUR0011")}if(t.$isInterface)throw new Error(`AUR0012:${t.friendlyName}`);{const n=this.config.defaultResolver(t,e);return e.u.set(t,n),n}}}class Qn{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const _n=new WeakMap;function Gn(t){return function(e,n,i){let s=_n.get(e);if(void 0===s&&_n.set(e,s=new WeakMap),s.has(i))return s.get(i);const r=t(e,n,i);return s.set(i,r),r}}const Xn={instance:(t,e)=>new Nn(t,0,e),singleton:(t,e)=>new Nn(t,1,e),transient:(t,e)=>new Nn(t,2,e),callback:(t,e)=>new Nn(t,3,e),cachedCallback:(t,e)=>new Nn(t,3,Gn(e)),aliasTo:(t,e)=>new Nn(e,5,t),defer:(t,...e)=>new Qn(t,e)};class Yn{constructor(t,e){this.C=null,this.$=t,void 0!==e&&(this.C=e)}get friendlyName(){return this.$}prepare(t){this.C=t}get $isResolver(){return!0}resolve(){if(null==this.C)throw new Error(`AUR0013:${this.$}`);return this.C}dispose(){this.C=null}}function Jn(t){if(null==t)throw new Error("AUR0014")}function ti(t,e,n){if(t instanceof Nn&&4===t.strategy){const i=t.state;let s=i.length;const r=new Array(s);for(;s--;)r[s]=i[s].resolve(e,n);return r}return[t.resolve(e,n)]}function ei(t){return new Error(`AUR0015:${t.name}`)}const ni=Object.freeze([]),ii=Object.freeze({});function si(){}const ri=xn.createInterface("IPlatform");function oi(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function ai(t,e){return function(n,i){e(n,i,t)}}var li,ci;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(li||(li={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(ci||(ci={}));const hi=xn.createInterface("ILogConfig",(t=>t.instance(new mi(0,3)))),ui=xn.createInterface("ISink"),di=xn.createInterface("ILogEventFactory",(t=>t.singleton(xi))),pi=xn.createInterface("ILogger",(t=>t.singleton(Si))),fi=xn.createInterface("ILogScope"),gi=Object.freeze({key:an("logger-sink-handles"),define(t,e){return Ue(this.key,e.handles,t.prototype),t},getHandles(t){return Ie.get(this.key,t)}}),vi=en({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class mi{constructor(t,e){this.colorOptions=t,this.level=e}}const bi=function(){const t=[en({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),en({TRC:vi.grey("TRC"),DBG:vi.grey("DBG"),INF:vi.white("INF"),WRN:vi.yellow("WRN"),ERR:vi.red("ERR"),FTL:vi.red("FTL"),QQQ:vi.grey("???")})];return function(e,n){return e<=0?t[n].TRC:e<=1?t[n].DBG:e<=2?t[n].INF:e<=3?t[n].WRN:e<=4?t[n].ERR:e<=5?t[n].FTL:t[n].QQQ}}();function wi(t,e){return 0===e?new Date(t).toISOString():vi.grey(new Date(t).toISOString())}class yi{constructor(t,e,n,i,s,r){this.severity=t,this.message=e,this.optionalParams=n,this.scope=i,this.colorOptions=s,this.timestamp=r}toString(){const{severity:t,message:e,scope:n,colorOptions:i,timestamp:s}=this;return 0===n.length?`${wi(s,i)} [${bi(t,i)}] ${e}`:`${wi(s,i)} [${bi(t,i)} ${function(t,e){return 0===e?t.join("."):t.map(vi.cyan).join(".")}(n,i)}] ${e}`}}let xi=class{constructor(t){this.config=t}createLogEvent(t,e,n,i){return new yi(e,n,i,t.scope,this.config.colorOptions,Date.now())}};xi=oi([ai(0,hi)],xi);let ki=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const n=t.optionalParams;if(void 0===n||0===n.length){const n=t.toString();switch(t.severity){case 0:case 1:return e.debug(n);case 2:return e.info(n);case 3:return e.warn(n);case 4:case 5:return e.error(n)}}else{let i=t.toString(),s=0;for(;i.includes("%s");)i=i.replace("%s",String(n[s++]));switch(t.severity){case 0:case 1:return e.debug(i,...n.slice(s));case 2:return e.info(i,...n.slice(s));case 3:return e.warn(i,...n.slice(s));case 4:case 5:return e.error(i,...n.slice(s))}}}}static register(e){Xn.singleton(ui,t).register(e)}};ki=oi([ai(0,ri)],ki);let Si=class t{constructor(t,e,n,i=[],s=null){var r,o,a,l,c,h;let u,d,p,f,g,v;if(this.config=t,this.factory=e,this.scope=i,this.scopedLoggers=je(),null===s){this.root=this,this.parent=this,u=this.traceSinks=[],d=this.debugSinks=[],p=this.infoSinks=[],f=this.warnSinks=[],g=this.errorSinks=[],v=this.fatalSinks=[];for(const t of n){const e=gi.getHandles(t);(null===(r=null==e?void 0:e.includes(0))||void 0===r||r)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&d.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&p.push(t),(null===(l=null==e?void 0:e.includes(3))||void 0===l||l)&&f.push(t),(null===(c=null==e?void 0:e.includes(4))||void 0===c||c)&&g.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&v.push(t)}}else this.root=s.root,this.parent=s,u=this.traceSinks=s.traceSinks,d=this.debugSinks=s.debugSinks,p=this.infoSinks=s.infoSinks,f=this.warnSinks=s.warnSinks,g=this.errorSinks=s.errorSinks,v=this.fatalSinks=s.fatalSinks}trace(t,...e){this.config.level<=0&&this.emit(this.traceSinks,0,t,e)}debug(t,...e){this.config.level<=1&&this.emit(this.debugSinks,1,t,e)}info(t,...e){this.config.level<=2&&this.emit(this.infoSinks,2,t,e)}warn(t,...e){this.config.level<=3&&this.emit(this.warnSinks,3,t,e)}error(t,...e){this.config.level<=4&&this.emit(this.errorSinks,4,t,e)}fatal(t,...e){this.config.level<=5&&this.emit(this.fatalSinks,5,t,e)}scopeTo(e){const n=this.scopedLoggers;let i=n[e];return void 0===i&&(i=n[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),i}emit(t,e,n,i){const s=Be(n)?n():n,r=this.factory.createLogEvent(this,e,s,i);for(let e=0,n=t.length;e<n;++e)t[e].handleEvent(r)}};function Ai(t){return t}oi([Xe],Si.prototype,"trace",null),oi([Xe],Si.prototype,"debug",null),oi([Xe],Si.prototype,"info",null),oi([Xe],Si.prototype,"warn",null),oi([Xe],Si.prototype,"error",null),oi([Xe],Si.prototype,"fatal",null),Si=oi([ai(0,hi),ai(1,di),ai(2,On(ui)),ai(3,Pn(fi)),ai(4,Ln)],Si),en({create:({level:t=3,colorOptions:e=0,sinks:n=[]}={})=>en({register(i){i.register(Xn.instance(hi,new mi(e,t)));for(const t of n)Be(t)?i.register(Xn.singleton(ui,t)):i.register(t);return i}})}),xn.createInterface((t=>t.singleton(Ei)));class Ci{constructor(t){this.$transform=t,this.A=new Map,this.j=new Map}transform(t){if(t instanceof Promise)return this.I(t);if("object"==typeof t&&null!==t)return this.O(t);throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`)}I(t){if(this.A.has(t))return this.A.get(t);const e=t.then((t=>this.O(t)));return this.A.set(t,e),e.then((e=>{this.A.set(t,e)})),e}O(t){if(this.j.has(t))return this.j.get(t);const e=this.$transform(this.M(t));return this.j.set(t,e),e instanceof Promise&&e.then((e=>{this.j.set(t,e)})),e}M(t){let e,n,i,s;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;n=Be(e.register),i=!1,s=ni;break;case"function":n=Be(e.register),i=void 0!==e.prototype,s=dn.resource.getAll(e);break;default:continue}r.push(new $i(o,e,n,i,s))}return new Ti(t,r)}}class Ei{constructor(){this.transformers=new Map}load(t,e=Ai){const n=this.transformers;let i=n.get(e);return void 0===i&&n.set(e,i=new Ci(e)),i.transform(t)}dispose(){this.transformers.clear()}}class Ti{constructor(t,e){this.raw=t,this.items=e}}class $i{constructor(t,e,n,i,s){this.key=t,this.value=e,this.isRegistry=n,this.isConstructable=i,this.definitions=s}}class Ii{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}const Ri=xn.createInterface("IEventAggregator",(t=>t.singleton(Oi)));class Oi{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw new Error(`Invalid channel name or instance: ${t}.`);if(Ne(t)){let n=this.eventLookup[t];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)n[i](e,t)}}else{const e=this.messageHandlers.slice();let n=e.length;for(;n-- >0;)e[n].handle(t)}}subscribe(t,e){if(!t)throw new Error(`Invalid channel name or type: ${t}.`);let n,i;return Ne(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),n=e,i=this.eventLookup[t]):(n=new Ii(t,e),i=this.messageHandlers),i.push(n),{dispose(){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const n=this.subscribe(t,(function(t,i){n.dispose(),e(t,i)}));return n}}const Pi=Object.prototype.hasOwnProperty,Li=Reflect.defineProperty,Mi=t=>"function"==typeof t,Ui=t=>"string"==typeof t;function Bi(t,e,n){return Li(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function Ni(t,e,n,i=!1){!i&&Pi.call(t,e)||Bi(t,e,n)}const ji=()=>Object.create(null),Fi=Ie.getOwn,Vi=Ie.hasOwn,Di=Ie.define,Zi=dn.annotation.keyFor,zi=dn.resource.keyFor,qi=dn.resource.appendTo;function Hi(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Xn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class Ki{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Pi.call(t,e)&&(this[e]=t[e])}static create(t,e){return new Ki(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class Wi{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new Wi(null,t,null==e?Qi.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new Wi(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new Wi(t,e,Qi.create(e),!1)}}class Qi{constructor(t){this.bindingContext=t}static create(t){return new Qi(t)}}const _i=xn.createInterface("ISignaler",(t=>t.singleton(Gi)));class Gi{constructor(){this.signals=ji()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var Xi;function Yi(t){return function(e){return ss.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(Xi||(Xi={}));class Ji{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;Ui(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===es;return new Ji(e,Je(is(e,"name"),n),Ye(is(e,"aliases"),i.aliases,e.aliases),ss.keyFrom(n),fn("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Xn.singleton(n,e).register(t);break;case 2:Xn.instance(n,new ts(t,e)).register(t)}Xn.aliasTo(n,e).register(t),Hi(i,ss,n,t)}}class ts{constructor(t,e){this.ctn=t,this.Type=e,this.deps=xn.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class es{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{Li(es.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const ns=zi("binding-behavior"),is=(t,e)=>Fi(Zi(e),t),ss=Object.freeze({name:ns,keyFrom:t=>`${ns}:${t}`,isType:t=>Mi(t)&&Vi(ns,t),define(t,e){const n=Ji.create(t,e);return Di(ns,n,n.Type),Di(ns,n,n),qi(e,ns),n.Type},getDefinition(t){const e=Fi(ns,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){Di(Zi(e),n,t)},getAnnotation:is});function rs(t){return function(e){return cs.define(t,e)}}class os{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return Ui(t)?(n=t,i={name:n}):(n=t.name,i=t),new os(e,Je(ls(e,"name"),n),Ye(ls(e,"aliases"),i.aliases,e.aliases),cs.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Xn.singleton(n,e).register(t),Xn.aliasTo(n,e).register(t),Hi(i,cs,n,t)}}const as=zi("value-converter"),ls=(t,e)=>Fi(Zi(e),t),cs=Object.freeze({name:as,keyFrom:t=>`${as}:${t}`,isType:t=>Mi(t)&&Vi(as,t),define(t,e){const n=os.create(t,e);return Di(as,n,n.Type),Di(as,n,n),qi(e,as),n.Type},getDefinition(t){const e=Fi(as,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){Di(Zi(e),n,t)},getAnnotation:ls});var hs;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(hs||(hs={}));class us{constructor(){this.text=""}static unparse(t){const e=new us;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",Ui(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class ds{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class ps{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=ss.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof ts)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(Mi(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return us.unparse(this)}}class fs{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=cs.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(_i);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(_i);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return us.unparse(this)}}class gs{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return us.unparse(this)}}class vs{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return us.unparse(this)}}class ms{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return us.unparse(this)}}ms.$this=new ms(0),ms.$parent=new ms(1);class bs{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=Ki.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=Ki.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return us.unparse(this)}}class ws{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return us.unparse(this)}}class ys{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return us.unparse(this)}}class xs{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=Ki.get(e,this.name,this.ancestor,t),o=Fs(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return us.unparse(this)}}class ks{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=Fs(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return us.unparse(this)}}class Ss{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(Mi(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return us.unparse(this)}}class As{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!Mi(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(De(s)||De(r))return(s||0)+(r||0);if(Ze(s)||Ze(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return us.unparse(this)}}class Cs{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return us.unparse(this)}}class Es{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return us.unparse(this)}}Es.$undefined=new Es(void 0),Es.$null=new Es(null),Es.$true=new Es(!0),Es.$false=new Es(!1),Es.$empty=new Es("");class Ts{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return us.unparse(this)}}Ts.$empty=new Ts(ni);class $s{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return us.unparse(this)}}$s.$empty=new $s(ni,ni);class Is{constructor(t,e=ni){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return us.unparse(this)}}Is.$empty=new Is([""]);class Rs{constructor(t,e,n,i=ni){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!Mi(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return us.unparse(this)}}class Os{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return us.unparse(this)}}class Ps{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return us.unparse(this)}}class Ls{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return us.unparse(this)}}const Ms=Object.prototype.toString;class Us{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(Ms.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${Ms.call(e)}`)}}iterate(t,e,n){switch(Ms.call(e)){case"[object Array]":return Vs(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;Vs(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;Vs(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;Vs(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${Ms.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return us.unparse(this)}}class Bs{constructor(t,e=ni){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return us.unparse(this)}}class Ns{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,Wi.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return us.unparse(this)}}class js{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,Wi.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return us.unparse(this)}}function Fs(t,e,n){const i=null==e?null:e[n];if(Mi(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function Vs(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}const Ds=xn.createInterface("ICoercionConfiguration");var Zs,zs,qs,Hs,Ks,Ws;function Qs(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function _s(t){return null==t?Gs:Gs(t)}function Gs(t){const e=t.prototype;Li(e,"subs",{get:Ys}),Ni(e,"subscribe",Js),Ni(e,"unsubscribe",tr)}!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(Zs||(Zs={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(zs||(zs={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(qs||(qs={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(Hs||(Hs={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(Ks||(Ks={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(Ws||(Ws={}));class Xs{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function Ys(){return Bi(this,"subs",new Xs)}function Js(t){return this.subs.add(t)}function tr(t){return this.subs.remove(t)}function er(t){return null==t?nr:nr(t)}function nr(t){const e=t.prototype;Li(e,"queue",{get:sr})}class ir{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(rr)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function sr(){return ir.instance}function rr(t,e,n){n.delete(t),t.flush()}ir.instance=new ir;class or{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&Ve(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){ur=this.h,this.h=this.v,this.subs.notify(this.v,ur,this.f)}}class ar{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){ur=this.h,this.h=this.v,this.subs.notify(this.v,ur,this.f)}}function lr(t){const e=t.prototype;Ni(e,"subscribe",cr,!0),Ni(e,"unsubscribe",hr,!0),er(t),_s(t)}function cr(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function hr(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let ur;lr(or),lr(ar);const dr=new WeakMap;function pr(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function fr(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function gr(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function vr(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,b,w,y,x,k,S,A=0,C=0;for(;;){if(i-n<=10)return void gr(t,e,n,i,s);A=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[A],h=e[A],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,b=n+1,w=i-1,t[A]=t[b],e[A]=e[b],t[b]=v,e[b]=m;t:for(C=b+1;C<w;C++)if(y=t[C],x=e[C],k=s(y,v),k<0)t[C]=t[b],e[C]=e[b],t[b]=y,e[b]=x,b++;else if(k>0){do{if(w--,w==C)break t;S=t[w],k=s(S,v)}while(k>0);t[C]=t[w],e[C]=e[w],t[w]=y,e[w]=x,k<0&&(y=t[C],x=e[C],t[C]=t[b],e[C]=e[b],t[b]=y,e[b]=x,b++)}i-w<b-n?(vr(t,e,w,i,s),i=b):(vr(t,e,n,b,s),n=w)}}const mr=Array.prototype,br=mr.push,wr=mr.unshift,yr=mr.pop,xr=mr.shift,kr=mr.splice,Sr=mr.reverse,Ar=mr.sort,Cr=["push","unshift","pop","shift","splice","reverse","sort"],Er={push:function(...t){const e=dr.get(this);if(void 0===e)return br.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=dr.get(this);if(void 0===e)return wr.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;wr.apply(e.indexMap,i);const r=wr.apply(this,t);return e.notify(),r},pop:function(){const t=dr.get(this);if(void 0===t)return yr.call(this);const e=t.indexMap,n=yr.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),yr.call(e),t.notify(),n},shift:function(){const t=dr.get(this);if(void 0===t)return xr.call(this);const e=t.indexMap,n=xr.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),xr.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=dr.get(this);if(void 0===i)return kr.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;kr.call(a,e,n,...i)}else kr.apply(a,t);const h=kr.apply(this,t);return i.notify(),h},reverse:function(){const t=dr.get(this);if(void 0===t)return Sr.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=dr.get(this);if(void 0===e)return Ar.call(this,t),this;const n=this.length;if(n<2)return this;vr(this,e.indexMap,0,n,fr);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&Mi(t)||(t=pr),vr(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of Cr)Li(Er[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Tr=!1;class $r{constructor(t){this.type=18,Tr||(Tr=!0,function(){for(const t of Cr)!0!==mr[t].observing&&Bi(mr,t,Er[t])}()),this.indexObservers={},this.collection=t,this.indexMap=Qs(t.length),this.lenObs=void 0,dr.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=Qs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new or(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new Ir(this,t)}}class Ir{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Rr(t){let e=dr.get(t);return void 0===e&&(e=new $r(t)),e}_s($r),_s(Ir);const Or=new WeakMap,Pr=Set.prototype,Lr=Pr.add,Mr=Pr.clear,Ur=Pr.delete,Br=["add","clear","delete"],Nr={add:function(t){const e=Or.get(this);if(void 0===e)return Lr.call(this,t),this;const n=this.size;return Lr.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=Or.get(this);if(void 0===t)return Mr.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Mr.call(this),e.length=0,t.notify()}},delete:function(t){const e=Or.get(this);if(void 0===e)return Ur.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Ur.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},jr={writable:!0,enumerable:!1,configurable:!0};for(const t of Br)Li(Nr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Fr=!1;class Vr{constructor(t){this.type=34,Fr||(Fr=!0,function(){for(const t of Br)!0!==Pr[t].observing&&Li(Pr,t,{...jr,value:Nr[t]})}()),this.collection=t,this.indexMap=Qs(t.size),this.lenObs=void 0,Or.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Qs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new ar(this)}}function Dr(t){let e=Or.get(t);return void 0===e&&(e=new Vr(t)),e}_s(Vr);const Zr=new WeakMap,zr=Map.prototype,qr=zr.set,Hr=zr.clear,Kr=zr.delete,Wr=["set","clear","delete"],Qr={set:function(t,e){const n=Zr.get(this);if(void 0===n)return qr.call(this,t,e),this;const i=this.get(t),s=this.size;if(qr.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=Zr.get(this);if(void 0===t)return Hr.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Hr.call(this),e.length=0,t.notify()}},delete:function(t){const e=Zr.get(this);if(void 0===e)return Kr.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Kr.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},_r={writable:!0,enumerable:!1,configurable:!0};for(const t of Wr)Li(Qr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Gr=!1;class Xr{constructor(t){this.type=66,Gr||(Gr=!0,function(){for(const t of Wr)!0!==zr[t].observing&&Li(zr,t,{..._r,value:Qr[t]})}()),this.collection=t,this.indexMap=Qs(t.size),this.lenObs=void 0,Zr.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=Qs(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new ar(this)}}function Yr(t){let e=Zr.get(t);return void 0===e&&(e=new Xr(t)),e}function Jr(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function to(){return Bi(this,"obs",new ro(this))}function eo(t){let e;if(t instanceof Array)e=Rr(t);else if(t instanceof Set)e=Dr(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=Yr(t)}this.obs.add(e)}function no(t){this.obs.add(t)}function io(){throw new Error("AUR2011:handleChange")}function so(){throw new Error("AUR2012:handleCollectionChange")}_s(Xr);class ro{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(ao,this),this.count=this.o.size}clearAll(){this.o.forEach(oo,this),this.o.clear(),this.count=0}}function oo(t,e){e.unsubscribe(this)}function ao(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function lo(t){const e=t.prototype;return Ni(e,"observe",Jr,!0),Ni(e,"observeCollection",eo,!0),Ni(e,"subscribeTo",no,!0),Li(e,"obs",{get:to}),Ni(e,"handleChange",io),Ni(e,"handleCollectionChange",so),t}function co(t){return null==t?lo:lo(t)}lo(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}});const ho=xn.createInterface("IExpressionParser",(t=>t.singleton(uo)));class uo{constructor(){this.u=ji(),this.A=ji(),this.U=ji()}parse(t,e){let n;switch(e){case 16:return new ds(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return Es.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return Co.ip=t,Co.length=t.length,Co.index=0,Co.O=t.charCodeAt(0),Eo(Co,0,61,void 0===e?8:e)}}var po,fo,go,vo;function mo(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(po||(po={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(fo||(fo={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(go||(go={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(vo||(vo={}));const bo=Es.$false,wo=Es.$true,yo=Es.$null,xo=Es.$undefined,ko=ms.$this,So=ms.$parent;var Ao;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(Ao||(Ao={}));const Co=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function Eo(t,e,n,i){if(16===i)return new ds(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),$o(t);const i=Eo(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(mo(Io(t)));break;default:s+=String.fromCharCode(t.O)}Io(t)}return n.length?(e.push(s),new Bs(e,n)):null}(t);if($o(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=Uo[63&t.$];$o(t),s=new Cs(n,Eo(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if($o(t),e++,!Lo(t,16393)){if(524288&t.$){const t=511&e;s=0===t?ko:1===t?So:new ms(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new Ls(t.L):(s=new bs(t.L,511&e),e=1024),t.R=!0,$o(t);break;case 3076:t.R=!1,$o(t),s=ko,e=512;break;case 671751:$o(t),s=Eo(t,0,62,i),Mo(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new Ns(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch($o(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return Mo(t,1835022),n;function o(){""!==i?(e.push(new js(new ws(ko,i),new ys(ko,new Es(r++)),void 0)),i=""):r++}}(t):function(t,e,n){$o(t);const i=new Array;for(;1835022!==t.$;)if(Lo(t,1572876)){if(i.push(xo),1835022===t.$)break}else{if(i.push(Eo(t,e,62,-3&n)),!Lo(t,1572876))break;if(1835022===t.$)break}return Mo(t,1835022),2&n?new Os(i):(t.R=!1,new Ts(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for($o(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)$o(t),Mo(t,1572879),i.push(Eo(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;$o(t),Lo(t,1572879)?i.push(Eo(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(Eo(t,0,450,-3&e)))}}1835018!==t.$&&Mo(t,1572876)}return Mo(t,1835018),2&e?new Ps(n,i):(t.R=!1,new $s(n,i))}(t,i),e=0;break;case 540714:s=new Is([t.L]),t.R=!1,$o(t),e=0;break;case 540715:s=To(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new Es(t.L),t.R=!1,$o(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=Uo[63&t.$],t.R=!1,$o(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);$o(t);const n=e,i=Eo(t,0,61,0);return new Us(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,$o(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,$o(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new bs(r,s.ancestor):new ws(s,r);continue;case 671757:t.R=!0,$o(t),e=4096,s=new ys(s,Eo(t,0,62,i)),Mo(t,1835022);break;case 671751:for(t.R=!1,$o(t);1835019!==t.$&&(n.push(Eo(t,0,62,i)),Lo(t,1572876)););Mo(t,1835019),s=1024&e?new xs(r,n,s.ancestor):2048&e?new ks(s,r,n):new Ss(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new Rs(o,o,s),$o(t);break;case 540715:s=To(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;$o(t),s=new As(Uo[63&r],s,Eo(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(Lo(t,1572880)){const n=Eo(t,e,62,i);Mo(t,1572879),s=new vs(s,n,Eo(t,e,62,i)),t.R=!1}if(62<n)return s;if(Lo(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new gs(s,Eo(t,e,62,i))}if(61<n)return s;for(;Lo(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;$o(t);const r=new Array;for(;Lo(t,1572879);)r.push(Eo(t,e,62,i));s=new fs(s,n,r)}for(;Lo(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;$o(t);const r=new Array;for(;Lo(t,1572879);)r.push(Eo(t,e,62,i));s=new ps(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function To(t,e,n,i,s){const r=[t.L];Mo(t,540715);const o=[Eo(t,e,62,n)];for(;540714!==(t.$=Po(t));)r.push(t.L),Mo(t,540715),o.push(Eo(t,e,62,n));return r.push(t.L),t.R=!1,s?($o(t),new Rs(r,r,i,o)):($o(t),new Is(r,o))}function $o(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=zo[t.O](t)))return;t.$=1572864}function Io(t){return t.O=t.ip.charCodeAt(++t.index)}function Ro(t,e){let n=t.O;if(!1===e){do{n=Io(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=Io(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=Io(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function Oo(t){let e=!0,n="";for(;96!==Io(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(mo(Io(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return Io(t),t.L=n,e?540714:540715}function Po(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,Oo(t)}function Lo(t,e){return t.$===e&&($o(t),!0)}function Mo(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);$o(t)}const Uo=[bo,wo,yo,xo,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Bo=ji();Bo.true=2049,Bo.null=2050,Bo.false=2048,Bo.undefined=2051,Bo.$this=3076,Bo.$parent=3078,Bo.in=1640799,Bo.instanceof=1640800,Bo.typeof=34851,Bo.void=34852,Bo.of=1051180;const No=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],jo=[48,58];function Fo(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function Vo(t){return e=>(Io(e),t)}const Do=t=>{throw new Error(`AUR0168:${t.ip}`)};Do.notMapped=!0,Fo(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const Zo=new Uint8Array(65535);Fo(Zo,null,No,1),Fo(Zo,null,jo,1);const zo=new Array(65535);zo.fill(Do,0,65535),Fo(zo,null,[0,33,127,161],(t=>(Io(t),null))),Fo(zo,null,No,(function(t){for(;Zo[Io(t)];);const e=Bo[t.L=t.P];return void 0===e?1024:e})),Fo(zo,null,jo,(t=>Ro(t,!1))),zo[34]=zo[39]=t=>function(t){const e=t.O;Io(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),Io(t),n=mo(t.O),Io(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);Io(t)}const r=t.ip.slice(s,t.index);Io(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),zo[96]=t=>Oo(t),zo[33]=t=>61!==Io(t)?32809:61!==Io(t)?1638680:(Io(t),1638682),zo[61]=t=>61!==Io(t)?1048616:61!==Io(t)?1638679:(Io(t),1638681),zo[38]=t=>38!==Io(t)?1572883:(Io(t),1638614),zo[124]=t=>124!==Io(t)?1572884:(Io(t),1638549),zo[46]=t=>Io(t)<=57&&t.O>=48?Ro(t,!0):16393,zo[60]=t=>61!==Io(t)?1638747:(Io(t),1638749),zo[62]=t=>61!==Io(t)?1638748:(Io(t),1638750),zo[37]=Vo(1638886),zo[40]=Vo(671751),zo[41]=Vo(1835019),zo[42]=Vo(1638885),zo[43]=Vo(623009),zo[44]=Vo(1572876),zo[45]=Vo(623010),zo[47]=Vo(1638887),zo[58]=Vo(1572879),zo[63]=Vo(1572880),zo[91]=Vo(671757),zo[93]=Vo(1835022),zo[123]=Vo(131080),zo[125]=Vo(1835018);let qo=null;const Ho=[];let Ko=!1;function Wo(){return qo}function Qo(t){if(null==t)throw new Error("AUR0206");if(null==qo)return qo=t,Ho[0]=qo,void(Ko=!0);if(qo===t)throw new Error("AUR0207");Ho.push(t),qo=t,Ko=!0}function _o(t){if(null==t)throw new Error("AUR0208");if(qo!==t)throw new Error("AUR0209");Ho.pop(),qo=Ho.length>0?Ho[Ho.length-1]:null,Ko=null!=qo}const Go=Object.freeze({get current(){return qo},get connecting(){return Ko},enter:Qo,exit:_o,pause:function(){Ko=!1},resume:function(){Ko=!0}}),Xo=Reflect.get,Yo=Object.prototype.toString,Jo=new WeakMap;function ta(t){switch(Yo.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const ea="__raw__";function na(t){return ta(t)?ia(t):t}function ia(t){var e;return null!==(e=Jo.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?la:t instanceof Map||t instanceof Set?Oa:aa,n=new Proxy(t,e);return Jo.set(t,n),n}(t)}function sa(t){var e;return null!==(e=t[ea])&&void 0!==e?e:t}function ra(t){return ta(t)&&t[ea]||t}function oa(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const aa={get(t,e,n){if(e===ea)return t;const i=Wo();return!Ko||oa(e)||null==i?Xo(t,e,n):(i.observe(t,e),na(Xo(t,e,n)))}},la={get(t,e,n){if(e===ea)return t;const i=Wo();if(!Ko||oa(e)||null==i)return Xo(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return ca;case"includes":return da;case"indexOf":return pa;case"lastIndexOf":return fa;case"every":return ha;case"filter":return ua;case"find":return va;case"findIndex":return ga;case"flat":return ma;case"flatMap":return ba;case"join":return wa;case"push":return xa;case"pop":return ya;case"reduce":return Ia;case"reduceRight":return Ra;case"reverse":return Ca;case"shift":return ka;case"unshift":return Sa;case"slice":return $a;case"splice":return Aa;case"some":return Ea;case"sort":return Ta;case"keys":return Fa;case"values":case Symbol.iterator:return Va;case"entries":return Da}return i.observe(t,e),na(Xo(t,e,n))},ownKeys(t){var e;return null===(e=Wo())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function ca(t,e){var n;const i=sa(this),s=i.map(((n,i)=>ra(t.call(e,na(n),i,this))));return null===(n=Wo())||void 0===n||n.observeCollection(i),na(s)}function ha(t,e){var n;const i=sa(this),s=i.every(((n,i)=>t.call(e,na(n),i,this)));return null===(n=Wo())||void 0===n||n.observeCollection(i),s}function ua(t,e){var n;const i=sa(this),s=i.filter(((n,i)=>ra(t.call(e,na(n),i,this))));return null===(n=Wo())||void 0===n||n.observeCollection(i),na(s)}function da(t){var e;const n=sa(this),i=n.includes(ra(t));return null===(e=Wo())||void 0===e||e.observeCollection(n),i}function pa(t){var e;const n=sa(this),i=n.indexOf(ra(t));return null===(e=Wo())||void 0===e||e.observeCollection(n),i}function fa(t){var e;const n=sa(this),i=n.lastIndexOf(ra(t));return null===(e=Wo())||void 0===e||e.observeCollection(n),i}function ga(t,e){var n;const i=sa(this),s=i.findIndex(((n,i)=>ra(t.call(e,na(n),i,this))));return null===(n=Wo())||void 0===n||n.observeCollection(i),s}function va(t,e){var n;const i=sa(this),s=i.find(((e,n)=>t(na(e),n,this)),e);return null===(n=Wo())||void 0===n||n.observeCollection(i),na(s)}function ma(){var t;const e=sa(this);return null===(t=Wo())||void 0===t||t.observeCollection(e),na(e.flat())}function ba(t,e){var n;const i=sa(this);return null===(n=Wo())||void 0===n||n.observeCollection(i),ia(i.flatMap(((n,i)=>na(t.call(e,na(n),i,this)))))}function wa(t){var e;const n=sa(this);return null===(e=Wo())||void 0===e||e.observeCollection(n),n.join(t)}function ya(){return na(sa(this).pop())}function xa(...t){return sa(this).push(...t)}function ka(){return na(sa(this).shift())}function Sa(...t){return sa(this).unshift(...t)}function Aa(...t){return na(sa(this).splice(...t))}function Ca(...t){var e;const n=sa(this),i=n.reverse();return null===(e=Wo())||void 0===e||e.observeCollection(n),na(i)}function Ea(t,e){var n;const i=sa(this),s=i.some(((n,i)=>ra(t.call(e,na(n),i,this))));return null===(n=Wo())||void 0===n||n.observeCollection(i),s}function Ta(t){var e;const n=sa(this),i=n.sort(t);return null===(e=Wo())||void 0===e||e.observeCollection(n),na(i)}function $a(t,e){var n;const i=sa(this);return null===(n=Wo())||void 0===n||n.observeCollection(i),ia(i.slice(t,e))}function Ia(t,e){var n;const i=sa(this),s=i.reduce(((e,n,i)=>t(e,na(n),i,this)),e);return null===(n=Wo())||void 0===n||n.observeCollection(i),na(s)}function Ra(t,e){var n;const i=sa(this),s=i.reduceRight(((e,n,i)=>t(e,na(n),i,this)),e);return null===(n=Wo())||void 0===n||n.observeCollection(i),na(s)}const Oa={get(t,e,n){if(e===ea)return t;const i=Wo();if(!Ko||oa(e)||null==i)return Xo(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Na;case"delete":return ja;case"forEach":return Pa;case"add":if(t instanceof Set)return Ba;break;case"get":if(t instanceof Map)return Ma;break;case"set":if(t instanceof Map)return Ua;break;case"has":return La;case"keys":return Fa;case"values":return Va;case"entries":return Da;case Symbol.iterator:return t instanceof Map?Da:Va}return na(Xo(t,e,n))}};function Pa(t,e){var n;const i=sa(this);return null===(n=Wo())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,na(n),na(i),this)}))}function La(t){var e;const n=sa(this);return null===(e=Wo())||void 0===e||e.observeCollection(n),n.has(ra(t))}function Ma(t){var e;const n=sa(this);return null===(e=Wo())||void 0===e||e.observeCollection(n),na(n.get(ra(t)))}function Ua(t,e){return na(sa(this).set(ra(t),ra(e)))}function Ba(t){return na(sa(this).add(ra(t)))}function Na(){return na(sa(this).clear())}function ja(t){return na(sa(this).delete(ra(t)))}function Fa(){var t;const e=sa(this);null===(t=Wo())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:na(e),done:i}},[Symbol.iterator](){return this}}}function Va(){var t;const e=sa(this);null===(t=Wo())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:na(e),done:i}},[Symbol.iterator](){return this}}}function Da(){var t;const e=sa(this);null===(t=Wo())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[na(e[0]),na(e[1])],done:i}},[Symbol.iterator](){return this}}}const Za=Object.freeze({getProxy:ia,getRaw:sa,wrap:na,unwrap:ra,rawKey:ea});class za{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new za(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,Li(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!Mi(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){qa=this.ov,this.ov=this.v,this.subs.notify(this.v,qa,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return Qo(this),this.v=ra(this.get.call(this.up?na(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,_o(this)}}}let qa;co(za),_s(za),er(za);const Ha=xn.createInterface("IDirtyChecker",(t=>t.singleton(Qa))),Ka={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},Wa={persistent:!0};class Qa{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(Ka.disabled)return;if(++this.j<Ka.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(Ka.throw)throw new Error(`AUR0222:${e}`);return new _a(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,Wa))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}Qa.inject=[ri],er(Qa);class _a{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}_s(_a);class Ga{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Xa{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}}let Ya;class Ja{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){Ya=this.ov,this.ov=this.v,this.subs.notify(this.v,Ya,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Li(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(Li(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class tl{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=Mi(n);const s=t[e];this.cb=Mi(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){Ya=this.ov,this.ov=this.v,this.subs.notify(this.v,Ya,this.f)}}_s(Ja),_s(tl),er(Ja),er(tl);const el=new Xa,nl=xn.createInterface("IObserverLocator",(t=>t.singleton(rl))),il=xn.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(pi).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new sl)))));class sl{handles(){return!1}getObserver(){return el}getAccessor(){return el}}class rl{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):el}getArrayObserver(t){return Rr(t)}getMapObserver(t){return Yr(t)}getSetObserver(t){return Dr(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new Ga(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return Rr(t).getLengthObserver();break;case"size":if(t instanceof Map)return Yr(t).getLengthObserver();if(t instanceof Set)return Dr(t).getLengthObserver();break;default:if(t instanceof Array&&Ve(e))return Rr(t).getIndexObserver(Number(e))}let o=al(t,e);if(void 0===o){let n=ol(t);for(;null!==n&&(o=al(n,e),void 0===o);)n=ol(n)}if(void 0!==o&&!Pi.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?za.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new Ja(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(Li(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}rl.inject=[Ha,il];const ol=Object.getPrototypeOf,al=Object.getOwnPropertyDescriptor;xn.createInterface("IObservation",(t=>t.singleton(ll)));class ll{constructor(t){this.oL=t}static get inject(){return[nl]}run(t){const e=new cl(this.oL,t);return e.run(),e}}class cl{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Qo(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,_o(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}co(cl);const hl=new Map;function ul(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}class dl{constructor(t,e={}){var n,i,s,r,o,a,l,c,h,u,d,p,f;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,this.decodeURI="decodeURI"in e?e.decodeURI:t.decodeURI,this.decodeURIComponent="decodeURIComponent"in e?e.decodeURIComponent:t.decodeURIComponent,this.encodeURI="encodeURI"in e?e.encodeURI:t.encodeURI,this.encodeURIComponent="encodeURIComponent"in e?e.encodeURIComponent:t.encodeURIComponent,this.Date="Date"in e?e.Date:t.Date,this.Reflect="Reflect"in e?e.Reflect:t.Reflect,this.clearInterval="clearInterval"in e?e.clearInterval:null!==(i=null===(n=t.clearInterval)||void 0===n?void 0:n.bind(t))&&void 0!==i?i:ul("clearInterval"),this.clearTimeout="clearTimeout"in e?e.clearTimeout:null!==(r=null===(s=t.clearTimeout)||void 0===s?void 0:s.bind(t))&&void 0!==r?r:ul("clearTimeout"),this.queueMicrotask="queueMicrotask"in e?e.queueMicrotask:null!==(a=null===(o=t.queueMicrotask)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:ul("queueMicrotask"),this.setInterval="setInterval"in e?e.setInterval:null!==(c=null===(l=t.setInterval)||void 0===l?void 0:l.bind(t))&&void 0!==c?c:ul("setInterval"),this.setTimeout="setTimeout"in e?e.setTimeout:null!==(u=null===(h=t.setTimeout)||void 0===h?void 0:h.bind(t))&&void 0!==u?u:ul("setTimeout"),this.console="console"in e?e.console:t.console,this.performanceNow="performanceNow"in e?e.performanceNow:null!==(f=null===(p=null===(d=t.performance)||void 0===d?void 0:d.now)||void 0===p?void 0:p.bind(t.performance))&&void 0!==f?f:ul("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new fl(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let n=hl.get(t);return void 0===n&&hl.set(t,n=new dl(t,e)),n}static set(t,e){hl.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}function pl(t){return t.persistent}class fl{constructor(t,e,n){this.platform=t,this.$request=e,this.$cancel=n,this.t=void 0,this.i=0,this.processing=[],this.pending=[],this.delayed=[],this.flushRequested=!1,this.h=void 0,this.taskPool=[],this.u=0,this.T=0,this.$=0,this.I=()=>{this.flushRequested||(this.flushRequested=!0,this.T=this.platform.performanceNow(),this.$request())},this.M=new yl(t.console)}get isEmpty(){return 0===this.i&&0===this.processing.length&&0===this.pending.length&&0===this.delayed.length}get P(){return 0===this.i&&this.processing.every(pl)&&this.pending.every(pl)&&this.delayed.every(pl)}flush(t=this.platform.performanceNow()){if(this.flushRequested=!1,this.$=t,void 0===this.t){if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}let e;for(;this.processing.length>0;)if((e=this.processing.shift()).run(),1===e.status){if(!0===e.suspend)return this.t=e,void this.I();++this.i}if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}if((this.processing.length>0||this.delayed.length>0||this.i>0)&&this.I(),void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}}else this.I()}cancel(){this.flushRequested&&(this.$cancel(),this.flushRequested=!1)}async yield(){this.isEmpty||(void 0===this.h&&(this.h=Cl()),await this.h)}queueTask(t,e){const{delay:n,preempt:i,persistent:s,reusable:r,suspend:o}={...xl,...e};if(i){if(n>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(s)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}0===this.processing.length&&this.I();const a=this.platform.performanceNow();let l;if(r){const e=this.taskPool,c=this.u-1;c>=0?(l=e[c],e[c]=void 0,this.u=c,l.reuse(a,n,i,s,o,t)):l=new wl(this.M,this,a,a+n,i,s,o,r,t)}else l=new wl(this.M,this,a,a+n,i,s,o,r,t);return i?this.processing[this.processing.length]=l:0===n?this.pending[this.pending.length]=l:this.delayed[this.delayed.length]=l,l}remove(t){let e=this.processing.indexOf(t);if(e>-1)this.processing.splice(e,1);else if(e=this.pending.indexOf(t),e>-1)this.pending.splice(e,1);else{if(e=this.delayed.indexOf(t),!(e>-1))throw new Error(`Task #${t.id} could not be found`);this.delayed.splice(e,1)}}returnToPool(t){this.taskPool[this.u++]=t}resetPersistentTask(t){t.reset(this.platform.performanceNow()),t.createdTime===t.queueTime?this.pending[this.pending.length]=t:this.delayed[this.delayed.length]=t}completeAsyncTask(t){var e;if(!0===t.suspend){if(this.t!==t)throw new Error(`Async task completion mismatch: suspenderTask=${null===(e=this.t)||void 0===e?void 0:e.id}, task=${t.id}`);this.t=void 0}else--this.i;if(void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class gl extends Error{constructor(t){super("Task was canceled."),this.task=t}}let vl=0;var ml,bl;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(ml||(ml={}));class wl{constructor(t,e,n,i,s,r,o,a,l){this.taskQueue=e,this.createdTime=n,this.queueTime=i,this.preempt=s,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=l,this.id=++vl,this.R=void 0,this.A=void 0,this.q=void 0,this.C=0,this.M=t}get result(){const t=this.q;if(void 0===t)switch(this.C){case 0:{const t=this.q=Cl();return this.R=t.resolve,this.A=t.reject,t}case 1:throw new Error("Trying to await task from within task will cause a deadlock.");case 2:return this.q=Promise.resolve();case 3:return this.q=Promise.reject(new gl(this))}return t}get status(){return this.C}run(t=this.taskQueue.platform.performanceNow()){if(0!==this.C)throw new Error(`Cannot run task in ${this.C} state`);const{persistent:e,reusable:n,taskQueue:i,callback:s,R:r,A:o,createdTime:a}=this;let l;this.C=1;try{l=s(t-a),l instanceof Promise?l.then((t=>{this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),i.completeAsyncTask(this),void 0!==r&&r(t),!this.persistent&&n&&i.returnToPool(this)})).catch((t=>{if(this.persistent||this.dispose(),i.completeAsyncTask(this),void 0===o)throw t;o(t)})):(this.persistent?i.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),void 0!==r&&r(l),!this.persistent&&n&&i.returnToPool(this))}catch(t){if(this.persistent||this.dispose(),void 0===o)throw t;o(t)}}cancel(){if(0===this.C){const t=this.taskQueue,e=this.reusable,n=this.A;return t.remove(this),t.isEmpty&&t.cancel(),this.C=3,this.dispose(),e&&t.returnToPool(this),void 0!==n&&n(new gl(this)),!0}return!(1!==this.C||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.C=0,this.R=void 0,this.A=void 0,this.q=void 0}reuse(t,e,n,i,s,r){this.createdTime=t,this.queueTime=t+e,this.preempt=n,this.persistent=i,this.suspend=s,this.callback=r,this.C=0}dispose(){this.callback=void 0,this.R=void 0,this.A=void 0,this.q=void 0}}class yl{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,n){if(e instanceof fl){const i=`processing=${e.processing.length} pending=${e.pending.length} delayed=${e.delayed.length} flushReq=${e.flushRequested} susTask=${!!e.t}`;this.console.log(`${t}[Q.${n}] ${i}`)}else{const i=e.id,s=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,l=e.persistent,c=e.suspend,h=function(t){switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}}(e.C),u=`id=${i} created=${s} queue=${r} preempt=${o} persistent=${l} reusable=${a} status=${h} suspend=${c}`;this.console.log(`${t}[T.${n}] ${u}`)}}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(bl||(bl={}));const xl={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let kl,Sl;function Al(t,e){kl=t,Sl=e}function Cl(){const t=new Promise(Al);return t.resolve=kl,t.reject=Sl,t}const El=new Map;class Tl extends dl{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver,window,document,location,history,navigator,customElements".split(",").forEach((n=>{this[n]=n in e?e[n]:t[n]})),"fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((n=>{var i,s;this[n]=n in e?e[n]:null!==(s=null===(i=t[n])||void 0===i?void 0:i.bind(t))&&void 0!==s?s:function(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}(n)})),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new fl(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new fl(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let n=El.get(t);return void 0===n&&El.set(t,n=new Tl(t,e)),n}static set(t,e){El.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}function $l(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function Il(t,e){return function(n,i){e(n,i,t)}}const Rl=Ie.getOwn,Ol=Ie.hasOwn,Pl=Ie.define,{annotation:Ll,resource:Ml}=dn,Ul=Ll.keyFor,Bl=Ml.keyFor,Nl=Ml.appendTo,jl=Ll.appendTo,Fl=Ll.getKeys,Vl=()=>Object.create(null),Dl=Object.prototype.hasOwnProperty,Zl=Vl(),zl=(t,e,n)=>{if(!0===Zl[e])return!0;if(!Kl(e))return!1;const i=e.slice(0,5);return Zl[e]="aria-"===i||"data-"===i||n.isStandardSvgAttribute(t,e)},ql=t=>t instanceof Promise,Hl=t=>"function"==typeof t,Kl=t=>"string"==typeof t,Wl=Object.defineProperty,Ql=t=>{throw t};function _l(t,e){let n;function i(t,e){arguments.length>1&&(n.property=e),Pl(Xl,Jl.create(e,t,n),t.constructor,e),jl(t.constructor,Yl.keyFrom(e))}return arguments.length>1?(n={},void i(t,e)):Kl(t)?(n={},i):(n=void 0===t?{}:t,i)}function Gl(t){return t.startsWith(Xl)}const Xl=Ul("bindable"),Yl=Object.freeze({name:Xl,keyFrom:t=>`${Xl}:${t}`,from(t,...e){const n={},i=Array.isArray;function s(e){n[e]=Jl.create(e,t)}function r(e,i){n[e]=i instanceof Jl?i:Jl.create(e,t,i)}return e.forEach((function(t){i(t)?t.forEach(s):t instanceof Jl?n[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>r(e,t[e])))})),n},for(t){let e;const n={add(i){let s,r;return Kl(i)?(s=i,r={property:s}):(s=i.property,r=i),e=Jl.create(s,t,r),Ol(Xl,t,s)||jl(t,Yl.keyFrom(s)),Pl(Xl,e,t,s),n},mode:t=>(e.mode=t,n),callback:t=>(e.callback=t,n),attribute:t=>(e.attribute=t,n),primary:()=>(e.primary=!0,n),set:t=>(e.set=t,n)};return n},getAll(t){const e=Xl.length+1,n=[],i=tn(t);let s,r,o,a,l=i.length,c=0;for(;--l>=0;)for(o=i[l],s=Fl(o).filter(Gl),r=s.length,a=0;a<r;++a)n[c++]=Rl(Xl,o,s[a].slice(e));return n}});class Jl{constructor(t,e,n,i,s,r){this.attribute=t,this.callback=e,this.mode=n,this.primary=i,this.property=s,this.set=r}static create(t,e,n={}){return new Jl(Je(n.attribute,Ke(t)),Je(n.callback,`${t}Changed`),Je(n.mode,Zs.toView),Je(n.primary,!1),Je(n.property,t),Je(n.set,function(t,e,n={}){var i,s,r;const o=null!==(s=null!==(i=n.type)&&void 0!==i?i:Reflect.getMetadata("design:type",e,t))&&void 0!==s?s:null;if(null==o)return si;let a;switch(o){case Number:case Boolean:case String:case BigInt:a=o;break;default:{const t=o.coerce;a="function"==typeof t?t.bind(o):null!==(r=tc.for(o))&&void 0!==r?r:si;break}}return a===si?a:function(t,e){return function(n,i){var s;return(null==i?void 0:i.enableCoercion)?(null!=e?e:null===(s=null==i?void 0:i.coerceNullish)||void 0===s||!s)&&null==n?n:t(n,i):n}}(a,n.nullable)}(t,e,n)))}}const tc={key:Ul("coercer"),define(t,e){Pl(tc.key,t[e].bind(t),t)},for:t=>Rl(tc.key,t)};class ec{constructor(t,e,n,i,s,r){this.set=i,this.$controller=s,this.t=r,this.v=void 0,this.ov=void 0,this.f=0;const o=t[n],a=t.propertyChanged,l=this.i=Hl(o),c=this.u=Hl(a),h=this.hs=i!==si;let u;this.o=t,this.k=e,this.cb=l?o:si,this.C=c?a:si,void 0!==this.cb||c||h?(this.iO=!0,u=t[e],this.v=h&&void 0!==u?i(u,this.t):u,this.A()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t,e){this.hs&&(t=this.set(t,this.t));const n=this.v;if(this.iO){if(Object.is(t,n))return;this.v=t,this.ov=n,this.f=e,(null==this.$controller||this.$controller.isBound)&&(this.i&&this.cb.call(this.o,t,n,e),this.u&&this.C.call(this.o,this.k,t,n,e)),this.queue.add(this)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.t):this.o[this.k],this.A()),this.subs.add(t)}flush(){nc=this.ov,this.ov=this.v,this.subs.notify(this.v,nc,this.f)}A(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t,0)}})}}let nc;_s(ec),er(ec);class ic{constructor(t,e,n,i){if(this.chars=t,this.repeat=e,this.isSymbol=n,this.isInverted=i,i)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.B;break;default:this.has=this.I}else switch(t.length){case 0:this.has=this.T;break;case 1:this.has=this.P;break;default:this.has=this.$}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}$(t){return this.chars.includes(t)}P(t){return this.chars===t}T(t){return!1}I(t){return!this.chars.includes(t)}B(t){return this.chars!==t}R(t){return!0}}class sc{constructor(){this.parts=ni,this.O="",this.L={},this.q={}}get pattern(){const t=this.O;return""===t?null:t}set pattern(t){null==t?(this.O="",this.parts=ni):(this.O=t,this.parts=this.q[t])}append(t,e){const n=this.L;void 0===n[t]?n[t]=e:n[t]+=e}next(t){const e=this.L;let n;void 0!==e[t]&&(n=this.q,void 0===n[t]?n[t]=[e[t]]:n[t].push(e[t]),e[t]=void 0)}}class rc{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,n=e.length;let i=null,s=0;for(;s<n;++s)if(i=e[s],t.equals(i.charSpec))return i;return null}append(t,e){const n=this.patterns;n.includes(e)||n.push(e);let i=this.findChild(t);return null==i&&(i=new rc(t,e),this.nextStates.push(i),t.repeat&&i.nextStates.push(i)),i}findMatches(t,e){const n=[],i=this.nextStates,s=i.length;let r=0,o=null,a=0,l=0;for(;a<s;++a)if(o=i[a],o.charSpec.has(t))if(n.push(o),r=o.patterns.length,l=0,o.charSpec.isSymbol)for(;l<r;++l)e.next(o.patterns[l]);else for(;l<r;++l)e.append(o.patterns[l],t);return n}}class oc{constructor(t){this.text=t;const e=this.len=t.length,n=this.specs=[];let i=0;for(;e>i;++i)n.push(new ic(t[i],!1,!1,!1))}eachChar(t){const e=this.len,n=this.specs;let i=0;for(;e>i;++i)t(n[i])}}class ac{constructor(t){this.text="PART",this.spec=new ic(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class lc{constructor(t){this.text=t,this.spec=new ic(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class cc{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const hc=xn.createInterface("ISyntaxInterpreter",(t=>t.singleton(uc)));class uc{constructor(){this.rootState=new rc(null),this.initialStates=[this.rootState]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let n,i,s,r,o,a,l,c,h=0;for(;e>h;){for(n=this.rootState,i=t[h],s=i.pattern,r=new cc,o=this.parse(i,r),a=o.length,l=t=>{n=n.append(t,s)},c=0;a>c;++c)o[c].eachChar(l);n.types=r,n.isEndpoint=!0,++h}}interpret(t){const e=new sc,n=t.length;let i,s=this.initialStates,r=0;for(;r<n&&(s=this.getNextStates(s,t.charAt(r),e),0!==s.length);++r);return s=s.filter(dc),s.length>0&&(s.sort(pc),i=s[0],i.charSpec.isSymbol||e.next(i.pattern),e.pattern=i.pattern),e}getNextStates(t,e,n){const i=[];let s=null;const r=t.length;let o=0;for(;o<r;++o)s=t[o],i.push(...s.findMatches(e,n));return i}parse(t,e){const n=[],i=t.pattern,s=i.length,r=t.symbols;let o=0,a=0,l="";for(;o<s;)l=i.charAt(o),0!==r.length&&r.includes(l)?o!==a?(n.push(new oc(i.slice(a,o))),++e.statics,a=o):(n.push(new lc(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===l&&"PART"===i.slice(o,o+4)?(a=o+=4,n.push(new ac(r)),++e.dynamics):++o;return a!==o&&(n.push(new oc(i.slice(a,o))),++e.statics),n}}function dc(t){return t.isEndpoint}function pc(t,e){const n=t.types,i=e.types;return n.statics!==i.statics?i.statics-n.statics:n.dynamics!==i.dynamics?i.dynamics-n.dynamics:n.symbols!==i.symbols?i.symbols-n.symbols:0}class fc{constructor(t,e,n,i){this.rawName=t,this.rawValue=e,this.target=n,this.command=i}}const gc=xn.createInterface("IAttributePattern"),vc=xn.createInterface("IAttributeParser",(t=>t.singleton(mc)));class mc{constructor(t,e){this.U={},this._=t;const n=this.F={},i=e.reduce(((t,e)=>{const i=kc(e.constructor);return i.forEach((t=>n[t.pattern]=e)),t.concat(i)}),ni);t.add(i)}parse(t,e){let n=this.U[t];null==n&&(n=this.U[t]=this._.interpret(t));const i=n.pattern;return null==i?new fc(t,e,t,null):this.F[i][i](t,e,n.parts)}}function bc(...t){return function(e){return Sc.define(t,e)}}mc.inject=[hc,On(gc)];class wc{constructor(t){this.Type=t,this.name=void 0}register(t){Xn.singleton(gc,this.Type).register(t)}}const yc=Bl("attribute-pattern"),xc="attribute-pattern-definitions",kc=t=>dn.annotation.get(t,xc),Sc=Object.freeze({name:yc,definitionAnnotationKey:xc,define(t,e){const n=new wc(e);return Pl(yc,n,e),Nl(e,yc),dn.annotation.set(e,xc,t),jl(e,xc),e},getPatternDefinitions:kc});let Ac=class{"PART.PART"(t,e,n){return new fc(t,e,n[0],n[1])}"PART.PART.PART"(t,e,n){return new fc(t,e,n[0],n[2])}};Ac=$l([bc({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],Ac);let Cc=class{ref(t,e,n){return new fc(t,e,"element","ref")}"PART.ref"(t,e,n){return new fc(t,e,n[0],"ref")}};Cc=$l([bc({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],Cc);let Ec=class{":PART"(t,e,n){return new fc(t,e,n[0],"bind")}};Ec=$l([bc({pattern:":PART",symbols:":"})],Ec);let Tc=class{"@PART"(t,e,n){return new fc(t,e,n[0],"trigger")}};Tc=$l([bc({pattern:"@PART",symbols:"@"})],Tc);let $c=class{"...$attrs"(t,e,n){return new fc(t,e,"","...$attrs")}};$c=$l([bc({pattern:"...$attrs",symbols:""})],$c);const Ic=ri,Rc=xn.createInterface("ISVGAnalyzer",(t=>t.singleton(Oc)));class Oc{isStandardSvgAttribute(t,e){return!1}}const Pc=xn.createInterface("IAttrMapper",(t=>t.singleton(Lc)));class Lc{constructor(t){this.svg=t,this.fns=[],this.N=Vl(),this.W=Vl(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[Rc]}useMapping(t){var e,n;let i,s,r,o;for(r in t)for(o in i=t[r],s=null!==(e=(n=this.N)[r])&&void 0!==e?e:n[r]=Vl(),i){if(void 0!==s[o])throw Mc(o,r);s[o]=i[o]}}useGlobalMapping(t){const e=this.W;for(const n in t){if(void 0!==e[n])throw Mc(n,"*");e[n]=t[n]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((n=>n(t,e)))}map(t,e){var n,i,s;return null!==(s=null!==(i=null===(n=this.N[t.nodeName])||void 0===n?void 0:n[e])&&void 0!==i?i:this.W[e])&&void 0!==s?s:zl(t,e,this.svg)?e:null}}function Mc(t,e){return new Error(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}class Uc{constructor(t,e,n,i,s){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=s,this.interceptor=this,this.isBound=!1,this.targetObserver=i.getAccessor(e,n)}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(e,"$event"),n}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.targetObserver.setValue((t=>this.interceptor.callSource(t)),t,this.target,this.targetProperty),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t,this.target,this.targetProperty),this.isBound=!1)}observe(t,e){}handleChange(t,e,n){}}class Bc{constructor(t,e,n){this.type=7,this.v=null,this.ov=null,this.H=!1,this.f=0,this.o=t,this.G=e,this.X=n}getValue(){return this.v}setValue(t,e){this.v=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H)switch(this.H=!1,this.ov=this.v,this.X){case"class":this.o.classList.toggle(this.G,!!this.v);break;case"style":{let t="",e=this.v;Kl(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.G,e,t);break}default:null==this.v?this.o.removeAttribute(this.X):this.o.setAttribute(this.X,String(this.v))}}handleMutation(t){let e=!1;for(let n=0,i=t.length;i>n;++n){const i=t[n];if("attributes"===i.type&&i.attributeName===this.G){e=!0;break}}if(e){let t;switch(this.X){case"class":t=this.o.classList.contains(this.G);break;case"style":t=this.o.style.getPropertyValue(this.G);break;default:throw new Error(`AUR0651:${this.X}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.H=!1,this.f=0,this.queue.add(this))}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.G),Nc(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&jc(this.o,this)}flush(){Dc=this.ov,this.ov=this.v,this.subs.notify(this.v,Dc,this.f)}}_s(Bc),er(Bc);const Nc=(t,e,n)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(Fc)).observe(e,{attributes:!0}),e.$eMObs.add(n)},jc=(t,e)=>{const n=t.$eMObs;return!(!n||!n.delete(e)||(0===n.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},Fc=t=>{t[0].target.$eMObs.forEach(Vc,t)};function Vc(t){t.handleMutation(this)}let Dc;class Zc{constructor(t){this.b=t}handleChange(t,e,n){const i=this.b;t!==i.sourceExpression.evaluate(n,i.$scope,i.locator,null)&&i.updateSource(t,n)}}const{oneTime:zc,toView:qc,fromView:Hc}=Zs,Kc=qc|zc,Wc={reusable:!1,preempt:!0};class Qc{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.targetAttribute=n,this.targetProperty=i,this.mode=s,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=e,this.p=o.get(Ic),this.oL=r}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;n|=this.persistentFlags;const i=this.mode,s=this.interceptor,r=this.sourceExpression,o=this.$scope,a=this.locator,l=this.targetObserver,c=0==(2&n)&&(4&l.type)>0;let h,u=!1;(10082!==r.$kind||this.obs.count>1)&&(u=0==(i&zc),u&&this.obs.version++,t=r.evaluate(n,o,a,s),u&&this.obs.clear()),t!==this.value&&(this.value=t,c?(h=this.task,this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,s.updateTarget(t,n)}),Wc),null==h||h.cancel()):s.updateTarget(t,n))}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);let s=this.targetObserver;s||(s=this.targetObserver=new Bc(this.target,this.targetProperty,this.targetAttribute)),i=this.sourceExpression;const r=this.mode,o=this.interceptor;let a=!1;r&Kc&&(a=(r&qc)>0,o.updateTarget(this.value=i.evaluate(t,e,this.locator,a?o:null),t)),r&Hc&&s.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new Zc(o)),this.isBound=!0}$unbind(t){var e;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.obs.clearAll(),this.isBound=!1)}}co(Qc);const{toView:_c}=Zs,Gc={reusable:!1,preempt:!0};class Xc{constructor(t,e,n,i,s,r,o){this.interpolation=e,this.target=n,this.targetProperty=i,this.mode=s,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.oL=t,this.targetObserver=t.getAccessor(n,i);const a=e.expressions,l=this.partBindings=Array(a.length),c=a.length;let h=0;for(;c>h;++h)l[h]=new Yc(a[h],n,i,r,t,this)}updateTarget(t,e){const n=this.partBindings,i=this.interpolation.parts,s=n.length;let r="",o=0;if(1===s)r=i[0]+n[0].value+i[1];else for(r=i[0];s>o;++o)r+=n[o].value+i[o+1];const a=this.targetObserver;let l;0==(2&e)&&(4&a.type)>0?(l=this.task,this.task=this.taskQueue.queueTask((()=>{this.task=null,a.setValue(r,e,this.target,this.targetProperty)}),Gc),null==l||l.cancel(),l=null):a.setValue(r,e,this.target,this.targetProperty)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].$bind(t,e);this.updateTarget(void 0,t)}$unbind(t){var e;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const n=this.partBindings,i=n.length;let s=0;for(;i>s;++s)n[s].interceptor.$unbind(t);null===(e=this.task)||void 0===e||e.cancel(),this.task=null}}class Yc{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.locator=i,this.owner=r,this.interceptor=this,this.mode=Zs.toView,this.value="",this.task=null,this.isBound=!1,this.oL=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.sourceExpression,s=this.obs;let r=!1;10082===i.$kind&&1===s.count||(r=(this.mode&_c)>0,r&&s.version++,t=i.evaluate(n,this.$scope,this.locator,r?this.interceptor:null),r&&s.clear()),t!=this.value&&(this.value=t,t instanceof Array&&this.observeCollection(t),this.owner.updateTarget(t,n))}handleCollectionChange(t,e){this.owner.updateTarget(void 0,e)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&_c)>0?this.interceptor:null),this.value instanceof Array&&this.observeCollection(this.value)}$unbind(t){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll())}}co(Yc);class Jc{constructor(t,e,n,i,s,r){this.sourceExpression=t,this.target=e,this.locator=n,this.p=s,this.strict=r,this.interceptor=this,this.mode=Zs.toView,this.value="",this.task=null,this.isBound=!1,this.oL=i}updateTarget(t,e){var n,i;const s=this.target,r=this.p.Node,o=this.value;this.value=t,o instanceof r&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o)),t instanceof r?(s.textContent="",null===(i=s.parentNode)||void 0===i||i.insertBefore(t,s)):s.textContent=String(t)}handleChange(t,e,n){var i;if(!this.isBound)return;const s=this.sourceExpression,r=this.obs;let o=!1;if(10082===s.$kind&&1===r.count||(o=(this.mode&_c)>0,o&&r.version++,n|=this.strict?1:0,t=s.evaluate(n,this.$scope,this.locator,o?this.interceptor:null),o&&r.clear()),t===this.value)return null===(i=this.task)||void 0===i||i.cancel(),void(this.task=null);0==(2&n)?this.queueUpdate(t,n):this.updateTarget(t,n)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),t|=this.strict?1:0;const n=this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&_c)>0?this.interceptor:null);n instanceof Array&&this.observeCollection(n),this.updateTarget(n,t)}$unbind(t){var e;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),null===(e=this.task)||void 0===e||e.cancel(),this.task=null)}queueUpdate(t,e){const n=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(t,e)}),Gc),null==n||n.cancel()}}co(Jc);class th{constructor(t,e,n,i,s=!1){this.sourceExpression=t,this.targetProperty=e,this.locator=i,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.target=null,this.oL=n,this.Y=s}handleChange(t,e,n){if(!this.isBound)return;const i=this.target,s=this.targetProperty,r=i[s];this.obs.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),this.obs.clear(),t!==r&&(i[s]=t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.target=this.Y?e.bindingContext:e.overrideContext;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|t,e,this.locator,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),this.isBound=!1}}co(th);const{oneTime:eh,toView:nh,fromView:ih}=Zs,sh=nh|eh,rh={reusable:!1,preempt:!0};class oh{constructor(t,e,n,i,s,r,o){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.mode=i,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null,this.oL=s}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,n){if(!this.isBound)return;const i=0==(2&(n|=this.persistentFlags))&&(4&this.targetObserver.type)>0,s=this.obs;let r=!1;(10082!==this.sourceExpression.$kind||s.count>1)&&(r=this.mode>eh,r&&s.version++,t=this.sourceExpression.evaluate(n,this.$scope,this.locator,this.interceptor),r&&s.clear()),i?(ah=this.task,this.task=this.taskQueue.queueTask((()=>{this.interceptor.updateTarget(t,n),this.task=null}),rh),null==ah||ah.cancel(),ah=null):this.interceptor.updateTarget(t,n)}$bind(t,e){var n;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}t|=1,this.persistentFlags=97&t,this.$scope=e;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor);const s=this.oL,r=this.mode;let o=this.targetObserver;o||(o=r&ih?s.getObserver(this.target,this.targetProperty):s.getAccessor(this.target,this.targetProperty),this.targetObserver=o),i=this.sourceExpression;const a=this.interceptor,l=(r&nh)>0;r&sh&&a.updateTarget(i.evaluate(t,e,this.locator,l?a:null),t),r&ih&&(o.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new Zc(a)),l||a.updateSource(o.getValue(this.target,this.targetProperty),t)),this.isBound=!0}$unbind(t){this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,ah=this.task,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=ah&&(ah.cancel(),ah=this.task=null),this.obs.clearAll(),this.isBound=!1)}}co(oh);let ah=null;class lh{constructor(t,e,n){this.sourceExpression=t,this.target=e,this.locator=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(t,this.$scope,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,null)===this.target&&e.assign(t,this.$scope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const ch=xn.createInterface("IAppTask");class hh{constructor(t,e,n){this.c=void 0,this.slot=t,this.k=e,this.cb=n}register(t){return this.c=t.register(Xn.instance(ch,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const uh=Object.freeze({beforeCreate:dh("beforeCreate"),hydrating:dh("hydrating"),hydrated:dh("hydrated"),beforeActivate:dh("beforeActivate"),afterActivate:dh("afterActivate"),beforeDeactivate:dh("beforeDeactivate"),afterDeactivate:dh("afterDeactivate")});function dh(t){return function(e,n){return Hl(n)?new hh(t,e,n):new hh(t,null,e)}}function ph(t){return t.startsWith(fh)}const fh=Ul("children-observer"),gh=Object.freeze({name:fh,keyFrom:t=>`${fh}:${t}`,from(...t){const e={},n=Array.isArray;function i(t){e[t]=mh.create(t)}function s(t,n){e[t]=mh.create(t,n)}return t.forEach((function(t){n(t)?t.forEach(i):t instanceof mh?e[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>s(e,t)))})),e},getAll(t){const e=fh.length+1,n=[],i=tn(t);let s,r,o,a=i.length,l=0;for(;--a>=0;){o=i[a],s=Fl(o).filter(ph),r=s.length;for(let t=0;t<r;++t)n[l++]=Rl(fh,o,s[t].slice(e))}return n}}),vh={childList:!0};class mh{constructor(t,e,n,i,s,r){this.callback=t,this.property=e,this.options=n,this.query=i,this.filter=s,this.map=r}static create(t,e={}){var n;return new mh(Je(e.callback,`${t}Changed`),Je(e.property,t),null!==(n=e.options)&&void 0!==n?n:vh,e.query,e.filter,e.map)}}class bh{constructor(t,e,n,i,s=wh,r=yh,o=xh,a){this.controller=t,this.obj=e,this.propertyKey=n,this.query=s,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[i],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){var t;this.observing||(this.observing=!0,this.children=this.get(),(null!==(t=this.observer)&&void 0!==t?t:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.Z()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=ni)}Z(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(t,e,n,i){var s;const r=e(t),o=r.length,a=[];let l,c,h,u=0;for(;u<o;++u)l=r[u],c=Wh.for(l,kh),h=null!==(s=null==c?void 0:c.viewModel)&&void 0!==s?s:null,n(l,c,h)&&a.push(i(l,c,h));return a}(this.controller,this.query,this.filter,this.map)}}function wh(t){return t.host.childNodes}function yh(t,e,n){return!!n}function xh(t,e,n){return n}_s()(bh);const kh={optional:!0};function Sh(t){return function(e){return Ih.define(t,e)}}function Ah(t){return function(e){return Ih.define(Kl(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class Ch{constructor(t,e,n,i,s,r,o,a,l,c){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.defaultBindingMode=s,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=l,this.dependencies=c}get type(){return 2}static create(t,e){let n,i;return Kl(t)?(n=t,i={name:n}):(n=t.name,i=t),new Ch(e,Je($h(e,"name"),n),Ye($h(e,"aliases"),i.aliases,e.aliases),Ih.keyFrom(n),Je($h(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,Zs.toView),Je($h(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Yl.from(e,...Yl.getAll(e),$h(e,"bindables"),e.bindables,i.bindables),Je($h(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),Ye(Ph.getAnnotation(e),e.watches),Ye($h(e,"dependencies"),i.dependencies,e.dependencies))}register(t){const{Type:e,key:n,aliases:i}=this;Xn.transient(n,e).register(t),Xn.aliasTo(n,e).register(t),Hi(i,Ih,n,t)}}const Eh=Bl("custom-attribute"),Th=t=>`${Eh}:${t}`,$h=(t,e)=>Rl(Ul(e),t),Ih=Object.freeze({name:Eh,keyFrom:Th,isType:t=>Hl(t)&&Ol(Eh,t),for(t,e){var n;return null!==(n=ld(t,Th(e)))&&void 0!==n?n:void 0},define(t,e){const n=Ch.create(t,e);return Pl(Eh,n,n.Type),Pl(Eh,n,n),Nl(e,Eh),n.Type},getDefinition(t){const e=Rl(Eh,t);if(void 0===e)throw new Error(`AUR0759:${t.name}`);return e},annotate(t,e,n){Pl(Ul(e),n,t)},getAnnotation:$h}),Rh=ni,Oh=Ul("watch"),Ph=Object.freeze({name:Oh,add(t,e){let n=Rl(Oh,t);null==n&&Pl(Oh,n=[],t),n.push(e)},getAnnotation(t){var e;return null!==(e=Rl(Oh,t))&&void 0!==e?e:Rh}});function Lh(t){return function(e){return Wh.define(t,e)}}function Mh(t){if(void 0===t)return function(t){Hh(t,"containerless",!0)};Hh(t,"containerless",!0)}const Uh=new WeakMap;class Bh{constructor(t,e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v,m,b,w,y){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.cache=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=g,this.shadowOptions=v,this.hasSlots=m,this.enhance=b,this.watches=w,this.processContent=y}get type(){return 1}static create(t,e=null){if(null===e){const n=t;if(Kl(n))throw new Error(`AUR0761:${t}`);const i=vn("name",n,qh);return e=Hl(n.Type)?n.Type:Wh.generateType(He(i)),new Bh(e,i,Ye(n.aliases),vn("key",n,(()=>Wh.keyFrom(i))),vn("cache",n,jh),vn("capture",n,Vh),vn("template",n,Fh),Ye(n.instructions),Ye(n.dependencies),vn("injectable",n,Fh),vn("needsCompile",n,Dh),Ye(n.surrogates),Yl.from(e,n.bindables),gh.from(n.childrenObservers),vn("containerless",n,Vh),vn("isStrictBinding",n,Vh),vn("shadowOptions",n,Fh),vn("hasSlots",n,Vh),vn("enhance",n,Vh),vn("watches",n,Zh),gn("processContent",e,Fh))}if(Kl(t))return new Bh(e,t,Ye(Kh(e,"aliases"),e.aliases),Wh.keyFrom(t),gn("cache",e,jh),gn("capture",e,Vh),gn("template",e,Fh),Ye(Kh(e,"instructions"),e.instructions),Ye(Kh(e,"dependencies"),e.dependencies),gn("injectable",e,Fh),gn("needsCompile",e,Dh),Ye(Kh(e,"surrogates"),e.surrogates),Yl.from(e,...Yl.getAll(e),Kh(e,"bindables"),e.bindables),gh.from(...gh.getAll(e),Kh(e,"childrenObservers"),e.childrenObservers),gn("containerless",e,Vh),gn("isStrictBinding",e,Vh),gn("shadowOptions",e,Fh),gn("hasSlots",e,Vh),gn("enhance",e,Vh),Ye(Ph.getAnnotation(e),e.watches),gn("processContent",e,Fh));const n=vn("name",t,qh);return new Bh(e,n,Ye(Kh(e,"aliases"),t.aliases,e.aliases),Wh.keyFrom(n),fn("cache",t,e,jh),fn("capture",t,e,Vh),fn("template",t,e,Fh),Ye(Kh(e,"instructions"),t.instructions,e.instructions),Ye(Kh(e,"dependencies"),t.dependencies,e.dependencies),fn("injectable",t,e,Fh),fn("needsCompile",t,e,Dh),Ye(Kh(e,"surrogates"),t.surrogates,e.surrogates),Yl.from(e,...Yl.getAll(e),Kh(e,"bindables"),e.bindables,t.bindables),gh.from(...gh.getAll(e),Kh(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),fn("containerless",t,e,Vh),fn("isStrictBinding",t,e,Vh),fn("shadowOptions",t,e,Fh),fn("hasSlots",t,e,Vh),fn("enhance",t,e,Vh),Ye(t.watches,Ph.getAnnotation(e),e.watches),fn("processContent",t,e,Fh))}static getOrCreate(t){if(t instanceof Bh)return t;if(Uh.has(t))return Uh.get(t);const e=Bh.create(t);return Uh.set(t,e),Pl(zh,e,e.Type),e}register(t){const{Type:e,key:n,aliases:i}=this;t.has(n,!1)||(Xn.transient(n,e).register(t),Xn.aliasTo(n,e).register(t),Hi(i,Wh,n,t))}}const Nh={name:void 0,searchParents:!1,optional:!1},jh=()=>0,Fh=()=>null,Vh=()=>!1,Dh=()=>!0,Zh=()=>ni,zh=Bl("custom-element"),qh=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),Hh=(t,e,n)=>{Pl(Ul(e),n,t)},Kh=(t,e)=>Rl(Ul(e),t),Wh=Object.freeze({name:zh,keyFrom:t=>`${zh}:${t}`,isType:t=>Hl(t)&&Ol(zh,t),for(t,e=Nh){if(void 0===e.name&&!0!==e.searchParents){const n=ld(t,zh);if(null===n){if(!0===e.optional)return null;throw new Error("AUR0762")}return n}if(void 0!==e.name){if(!0!==e.searchParents){const n=ld(t,zh);if(null===n)throw new Error("AUR0763");return n.is(e.name)?n:void 0}let n=t,i=!1;for(;null!==n;){const t=ld(n,zh);if(null!==t&&(i=!0,t.is(e.name)))return t;n=gd(n)}if(i)return;throw new Error("AUR0764")}let n=t;for(;null!==n;){const t=ld(n,zh);if(null!==t)return t;n=gd(n)}throw new Error("AUR0765")},define(t,e){const n=Bh.create(t,e);return Pl(zh,n,n.Type),Pl(zh,n,n),Nl(n.Type,zh),n.Type},getDefinition(t){const e=Rl(zh,t);if(void 0===e)throw new Error(`AUR0760:${t.name}`);return e},annotate:Hh,getAnnotation:Kh,generateName:qh,createInjectable(){const t=function(e,n,i){return xn.getOrCreateAnnotationParamTypes(e)[i]=t,e};return t.register=function(e){return{resolve:(e,n)=>n.has(t,!0)?n.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(n,i=e){const s=class{};return t.value=n,Reflect.defineProperty(s,"name",t),i!==e&&Object.assign(s.prototype,i),s}}()});Ul("processContent");class Qh{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.J={},this.tt=0,this.H=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}K(){if(this.H){this.H=!1;const t=this.value,e=this.J,n=_h(t);let i=this.tt;if(this.ov=t,n.length>0&&this.it(n),this.tt+=1,0===i)return;i-=1;for(const t in e)Dl.call(e,t)&&e[t]===i&&this.obj.classList.remove(t)}}it(t){const e=this.obj,n=t.length;let i,s=0;for(;s<n;s++)i=t[s],0!==i.length&&(this.J[i]=this.tt,e.classList.add(i))}}function _h(t){if(Kl(t))return Gh(t);if("object"!=typeof t)return ni;if(t instanceof Array){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(..._h(t[i]));return n}return ni}const e=[];let n;for(n in t)Boolean(t[n])&&(n.includes(" ")?e.push(...Gh(n)):e.push(n));return e}function Gh(t){const e=t.match(/\S+/g);return null===e?ni:e}xn.createInterface("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>eu.supported(t.get(Ic))?t.get(Xh):t.get(Yh)))));class Xh{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new eu(this.p,t,this.cache,e)}}Xh.inject=[Ic];class Yh{constructor(t){this.p=t}createStyles(t,e){return new nu(this.p,t,e)}}Yh.inject=[Ic];const Jh=xn.createInterface("IShadowDOMStyles"),tu=xn.createInterface("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:si})));class eu{constructor(t,e,n,i=null){this.sharedStyles=i,this.styleSheets=e.map((e=>{let i;return e instanceof t.CSSStyleSheet?i=e:(i=n.get(e),void 0===i&&(i=new t.CSSStyleSheet,i.replaceSync(e),n.set(e,i))),i}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class nu{constructor(t,e,n=null){this.p=t,this.localStyles=e,this.sharedStyles=n}applyTo(t){const e=this.localStyles,n=this.p;for(let i=e.length-1;i>-1;--i){const s=n.document.createElement("style");s.innerHTML=e[i],t.prepend(s)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:iu,exit:su}=Go,{wrap:ru,unwrap:ou}=Za;class au{constructor(t,e,n,i,s){this.obj=t,this.get=n,this.cb=i,this.useProxy=s,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.value,n=this.compute();Object.is(n,e)||this.cb.call(t,n,e,t)}compute(){this.running=!0,this.obs.version++;try{return iu(this),this.value=ou(this.get.call(void 0,this.useProxy?ru(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,su(this)}}}class lu{constructor(t,e,n,i,s){this.scope=t,this.locator=e,this.oL=n,this.expression=i,this.callback=s,this.interceptor=this,this.isBound=!1,this.obj=t.bindingContext}handleChange(t){const e=this.expression,n=this.obj,i=this.value;10082===e.$kind&&1===this.obs.count||(this.obs.version++,t=e.evaluate(0,this.scope,this.locator,this),this.obs.clear()),Object.is(t,i)||(this.value=t,this.callback.call(n,t,i,n))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,this.locator,this),this.obs.clear())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.value=void 0)}}co(au),co(lu);const cu=xn.createInterface("ILifecycleHooks");class hu{constructor(t,e){this.definition=t,this.instance=e}}class uu{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const n=new Set;let i=e.prototype;for(;i!==Object.prototype;){for(const t of Object.getOwnPropertyNames(i))"constructor"!==t&&n.add(t);i=Object.getPrototypeOf(i)}return new uu(e,n)}register(t){Xn.singleton(cu,this.Type).register(t)}}const du=new WeakMap,pu=Ul("lifecycle-hooks"),fu=Object.freeze({name:pu,define(t,e){const n=uu.create(t,e);return Pl(pu,n,e),Nl(e,pu),n.Type},resolve(t){let e=du.get(t);if(void 0===e){du.set(t,e=new gu);const n=t.root,i=n.id===t.id?t.getAll(cu):t.has(cu,!1)?n.getAll(cu).concat(t.getAll(cu)):n.getAll(cu);let s,r,o,a,l;for(s of i)for(a of(r=Rl(pu,s.constructor),o=new hu(r,s),r.propertyNames))l=e[a],void 0===l?e[a]=[o]:l.push(o)}return e}});class gu{}const vu=xn.createInterface("IViewFactory");class mu{constructor(t,e){this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=mu.maxCacheSize:Kl(t)&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t){const e=this.cache;let n;return null!=e&&e.length>0?(n=e.pop(),n):(n=Ru.$view(this,t),n)}}mu.maxCacheSize=65535;const bu=new WeakSet;function wu(t){return!bu.has(t)}function yu(t){return bu.add(t),Bh.create(t)}const xu=Bl("views"),ku=Object.freeze({name:xu,has:t=>Hl(t)&&(Ol(xu,t)||"$views"in t),get(t){if(Hl(t)&&"$views"in t){const e=t.$views.filter(wu).map(yu);for(const n of e)ku.add(t,n)}let e=Rl(xu,t);return void 0===e&&Pl(xu,e=[],t),e},add(t,e){const n=Bh.create(e);let i=Rl(xu,t);return void 0===i?Pl(xu,i=[n],t):i.push(n),i}}),Su=xn.createInterface("IViewLocator",(t=>t.singleton(Au)));class Au{constructor(){this.et=new WeakMap,this.st=new Map}getViewComponentForObject(t,e){if(t){const n=ku.has(t.constructor)?ku.get(t.constructor):[],i=Hl(e)?e(t,n):this.nt(n,e);return this.rt(t,n,i)}return null}rt(t,e,n){let i,s=this.et.get(t);if(void 0===s?(s={},this.et.set(t,s)):i=s[n],void 0===i){const r=this.ot(t,e,n);i=Wh.define(Wh.getDefinition(r),class extends r{constructor(){super(t)}}),s[n]=i}return i}ot(t,e,n){let i,s=this.st.get(t.constructor);if(void 0===s?(s={},this.st.set(t.constructor,s)):i=s[n],void 0===i){i=Wh.define(this.lt(e,n),class{constructor(t){this.viewModel=t}define(t,e,n){const i=this.viewModel;if(t.scope=Wi.fromParent(t.scope,i),void 0!==i.define)return i.define(t,e,n)}});const r=i.prototype;"hydrating"in t&&(r.hydrating=function(t){this.viewModel.hydrating(t)}),"hydrated"in t&&(r.hydrated=function(t){this.viewModel.hydrated(t)}),"created"in t&&(r.created=function(t){this.viewModel.created(t)}),"binding"in t&&(r.binding=function(t,e,n){return this.viewModel.binding(t,e,n)}),"bound"in t&&(r.bound=function(t,e,n){return this.viewModel.bound(t,e,n)}),"attaching"in t&&(r.attaching=function(t,e,n){return this.viewModel.attaching(t,e,n)}),"attached"in t&&(r.attached=function(t,e){return this.viewModel.attached(t,e)}),"detaching"in t&&(r.detaching=function(t,e,n){return this.viewModel.detaching(t,e,n)}),"unbinding"in t&&(r.unbinding=function(t,e,n){return this.viewModel.unbinding(t,e,n)}),"dispose"in t&&(r.dispose=function(){this.viewModel.dispose()}),s[n]=i}return i}nt(t,e){return e||(1===t.length?t[0].name:"default-view")}lt(t,e){const n=t.find((t=>t.name===e));if(void 0===n)throw new Error(`Could not find view: ${e}`);return n}}const Cu=xn.createInterface("IRendering",(t=>t.singleton(Eu)));class Eu{constructor(t){this.ht=new WeakMap,this.ct=new WeakMap,this.ut=(this.ft=t.root).get(Ic),this.dt=new bd(this.ut,this.ut.document.createDocumentFragment())}get renderers(){return null==this.rs?this.rs=this.ft.getAll(np,!1).reduce(((t,e)=>(t[e.target]=e,t)),Vl()):this.rs}compile(t,e,n){if(!1!==t.needsCompile){const i=this.ht,s=e.get(ep);let r=i.get(t);return null==r?i.set(t,r=s.compile(t,e,n)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new mu(e,Bh.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new bd(this.ut,t.template);let e;const n=this.ct;if(n.has(t))e=n.get(t);else{const i=this.ut,s=i.document,r=t.template;let o;null===r?e=null:r instanceof i.Node?"TEMPLATE"===r.nodeName?e=s.adoptNode(r.content):(e=s.adoptNode(s.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=s.createElement("template"),Kl(r)&&(o.innerHTML=r),s.adoptNode(e=o.content)),n.set(t,e)}return null==e?this.dt:new bd(this.ut,e.cloneNode(!0))}render(t,e,n,i){const s=n.instructions,r=this.renderers,o=e.length;if(e.length!==s.length)throw new Error(`AUR0757:${o}<>${s.length}`);let a,l,c,h=0,u=0,d=0;if(o>0)for(;o>h;){for(a=s[h],c=e[h],u=0,d=a.length;d>u;)l=a[u],r[l.type].render(t,c,l),++u;++h}if(null!=i&&(a=n.surrogates,(d=a.length)>0))for(u=0;d>u;)l=a[u],r[l.type].render(t,i,l),++u}}var Tu;Eu.inject=[An],function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(Tu||(Tu={}));const $u={optional:!0},Iu=new WeakMap;class Ru{constructor(t,e,n,i,s,r,o){switch(this.container=t,this.vmKind=e,this.definition=n,this.viewFactory=i,this.viewModel=s,this.host=r,this.id=_e("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.vt=!1,this.gt=ni,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.wt=0,this.bt=0,this.xt=0,this.location=o,this.r=t.root.get(Cu),e){case 1:case 0:this.hooks=new Bu(s);break;case 2:this.hooks=Bu.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var t;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(t=this.parent.definition)||void 0===t?void 0:t.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(t){return Iu.get(t)}static getCachedOrThrow(t){const e=Ru.getCached(t);if(void 0===e)throw new Error(`AUR0500:${t}`);return e}static $el(t,e,n,i,s,r=null){if(Iu.has(e))return Iu.get(e);s=null!=s?s:Wh.getDefinition(e.constructor);const o=new Ru(t,0,s,null,e,n,r),a=t.get(Pn(Zu));return s.dependencies.length>0&&t.register(...s.dependencies),t.registerResolver(Zu,new Yn("IHydrationContext",new zu(o,i,a))),Iu.set(e,o),null!=i&&!1===i.hydrate||o.hE(i,a),o}static $attr(t,e,n,i){if(Iu.has(e))return Iu.get(e);i=null!=i?i:Ih.getDefinition(e.constructor);const s=new Ru(t,1,i,null,e,n,null);return i.dependencies.length>0&&t.register(...i.dependencies),Iu.set(e,s),s.yt(),s}static $view(t,e){const n=new Ru(t.container,2,null,t,null,null,null);return n.parent=null!=e?e:null,n.kt(),n}hE(t,e){const n=this.container,i=(this.flags,this.viewModel);let s=this.definition;if(this.scope=Wi.create(i,null,!0),s.watches.length>0&&Uu(this,n,s,i),Pu(this,s,0,i),this.gt=function(t,e,n){const i=e.childrenObservers,s=Object.getOwnPropertyNames(i),r=s.length;if(r>0){const e=Ou(n),o=[];let a,l,c=0;for(;c<r;++c)a=s[c],null==e[a]&&(l=i[a],o[o.length]=e[a]=new bh(t,n,a,l.callback,l.query,l.filter,l.map,l.options));return o}return ni}(this,s,i),this.hooks.hasDefine){const t=i.define(this,e,s);void 0!==t&&t!==s&&(s=Bh.getOrCreate(t))}this.lifecycleHooks=fu.resolve(n),s.register(n),null!==s.injectable&&n.registerResolver(s.injectable,new Yn("definition.injectable",i)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){void 0!==this.lifecycleHooks.hydrating&&this.lifecycleHooks.hydrating.forEach(Ku,this),this.hooks.hasHydrating&&this.viewModel.hydrating(this);const e=this.Ct=this.r.compile(this.definition,this.container,t),{shadowOptions:n,isStrictBinding:i,hasSlots:s}=e,r=this.location;if(this.isStrictBinding=i,null!==(this.hostController=Wh.for(this.host,$u))&&(this.host=this.container.root.get(Ic).document.createElement(this.definition.name)),cd(this.host,Wh.name,this),cd(this.host,this.definition.key,this),null!==n||s){if(null!=r)throw new Error("AUR0501");cd(this.shadowRoot=this.host.attachShadow(null!=n?n:Nu),Wh.name,this),cd(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=r?(cd(r,Wh.name,this),cd(r,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.lifecycleHooks.hydrated&&this.lifecycleHooks.hydrated.forEach(Wu,this),this.hooks.hasHydrated&&this.viewModel.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Ct,this.host),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(Hu,this),this.hooks.hasCreated&&this.viewModel.created(this)}yt(){const t=this.definition,e=this.viewModel;t.watches.length>0&&Uu(this,this.container,t,e),Pu(this,t,this.flags,e),e.$controller=this,this.lifecycleHooks=fu.resolve(this.container),void 0!==this.lifecycleHooks.created&&this.lifecycleHooks.created.forEach(Hu,this),this.hooks.hasCreated&&this.viewModel.created(this)}kt(){this.Ct=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Ct.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Ct)).findTargets(),this.Ct,void 0)}activate(t,e,n,i){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`AUR0502:${this.name}`);default:throw new Error(`AUR0503:${this.name} ${Vu(this.state)}`)}switch(this.parent=e,n|=2,this.vmKind){case 0:this.scope.parentScope=null!=i?i:null;break;case 1:this.scope=null!=i?i:null;break;case 2:if(null==i)throw new Error("AUR0504");this.hasLockedScope||(this.scope=i)}let s;return this.isStrictBinding&&(n|=1),this.$initiator=t,this.$flags=n,this.At(),2!==this.vmKind&&null!=this.lifecycleHooks.binding&&(s=rn(...this.lifecycleHooks.binding.map(Qu,this))),this.hooks.hasBinding&&(s=rn(s,this.viewModel.binding(this.$initiator,this.parent,this.$flags))),s instanceof Promise?(this.Rt(),s.then((()=>{this.bind()})).catch((t=>{this.St(t)})),this.$promise):(this.bind(),this.$promise)}bind(){let t,e=0,n=this.gt.length;if(n>0)for(;n>e;)this.gt[e].start(),++e;if(null!==this.bindings)for(e=0,n=this.bindings.length;n>e;)this.bindings[e].$bind(this.$flags,this.scope),++e;if(2!==this.vmKind&&null!=this.lifecycleHooks.bound&&(t=rn(...this.lifecycleHooks.bound.map(_u,this))),this.hooks.hasBound&&(t=rn(t,this.viewModel.bound(this.$initiator,this.parent,this.$flags))),t instanceof Promise)return this.Rt(),void t.then((()=>{this.isBound=!0,this.Et()})).catch((t=>{this.St(t)}));this.isBound=!0,this.Et()}Bt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Et(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Bt(this.host);break;case 3:this.hostController.Bt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(Jh,!1)?t.get(Jh):t.get(tu)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.lifecycleHooks.attaching&&(t=rn(...this.lifecycleHooks.attaching.map(Gu,this))),this.hooks.hasAttaching&&(t=rn(t,this.viewModel.attaching(this.$initiator,this.parent,this.$flags))),t instanceof Promise&&(this.Rt(),this.At(),t.then((()=>{this.It()})).catch((t=>{this.St(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.It()}deactivate(t,e,n){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`AUR0505:${this.name} ${Vu(this.state)}`)}this.$initiator=t,this.$flags=n,t===this&&this.Tt();let i,s=0;if(this.gt.length)for(;s<this.gt.length;++s)this.gt[s].stop();if(null!==this.children)for(s=0;s<this.children.length;++s)this.children[s].deactivate(t,this,n);if(2!==this.vmKind&&null!=this.lifecycleHooks.detaching&&(i=rn(...this.lifecycleHooks.detaching.map(Yu,this))),this.hooks.hasDetaching&&(i=rn(i,this.viewModel.detaching(this.$initiator,this.parent,this.$flags))),i instanceof Promise&&(this.Rt(),t.Tt(),i.then((()=>{t.Dt()})).catch((e=>{t.St(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Dt(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=4|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].$unbind(t);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}16==(16&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.Pt()}Rt(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Rt())}Pt(){void 0!==this.$promise&&(td=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,td(),td=void 0)}St(t){void 0!==this.$promise&&(ed=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,ed(t),ed=void 0),this.$initiator!==this&&this.parent.St(t)}At(){++this.wt,this.$initiator!==this&&this.parent.At()}It(){if(0==--this.wt){if(2!==this.vmKind&&null!=this.lifecycleHooks.attached&&(nd=rn(...this.lifecycleHooks.attached.map(Xu,this))),this.hooks.hasAttached&&(nd=rn(nd,this.viewModel.attached(this.$initiator,this.$flags))),nd instanceof Promise)return this.Rt(),nd.then((()=>{this.state=2,this.Pt(),this.$initiator!==this&&this.parent.It()})).catch((t=>{this.St(t)})),void(nd=void 0);nd=void 0,this.state=2,this.Pt()}this.$initiator!==this&&this.parent.It()}Tt(){++this.bt}Dt(){if(0==--this.bt){this.$t(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),2!==e.vmKind&&null!=e.lifecycleHooks.unbinding&&(t=rn(...e.lifecycleHooks.unbinding.map(Ju,this))),e.hooks.hasUnbinding&&(e.debug&&e.logger.trace("unbinding()"),t=rn(t,e.viewModel.unbinding(e.$initiator,e.parent,e.$flags))),t instanceof Promise&&(this.Rt(),this.$t(),t.then((()=>{this.Ot()})).catch((t=>{this.St(t)}))),t=void 0,e=e.next;this.Ot()}}$t(){++this.xt}Ot(){if(0==--this.xt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return Ih.getDefinition(this.viewModel.constructor).name===t;case 0:return Wh.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(cd(t,Wh.name,this),cd(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(cd(t,Wh.name,this),cd(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(cd(t,Wh.name,this),cd(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(qu),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(Iu.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}}function Ou(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function Pu(t,e,n,i){const s=e.bindables,r=Object.getOwnPropertyNames(s),o=r.length;if(o>0){let e,n,a=0;const l=Ou(i),c=t.container,h=c.has(Ds,!0)?c.get(Ds):null;for(;a<o;++a)e=r[a],void 0===l[e]&&(n=s[e],l[e]=new ec(i,e,n.callback,n.set,t,h))}}const Lu=new Map,Mu=t=>{let e=Lu.get(t);return null==e&&(e=new bs(t,0),Lu.set(t,e)),e};function Uu(t,e,n,i){const s=e.get(nl),r=e.get(ho),o=n.watches,a=0===t.vmKind?t.scope:Wi.create(i,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if(({expression:c,callback:h}=o[d]),h=Hl(h)?h:Reflect.get(i,h),!Hl(h))throw new Error(`AUR0506:${String(h)}`);Hl(c)?t.addBinding(new au(i,s,c,h,!0)):(u=Kl(c)?r.parse(c,8):Mu(c),t.addBinding(new lu(a,e,s,u,h)))}}class Bu{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}Bu.none=new Bu({});const Nu={mode:"open"};var ju,Fu;function Vu(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(ju||(ju={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(Fu||(Fu={}));const Du=xn.createInterface("IController"),Zu=xn.createInterface("IHydrationContext");class zu{constructor(t,e,n){this.instruction=e,this.parent=n,this.controller=t}}function qu(t){t.dispose()}function Hu(t){t.instance.created(this.viewModel,this)}function Ku(t){t.instance.hydrating(this.viewModel,this)}function Wu(t){t.instance.hydrated(this.viewModel,this)}function Qu(t){return t.instance.binding(this.viewModel,this.$initiator,this.parent,this.$flags)}function _u(t){return t.instance.bound(this.viewModel,this.$initiator,this.parent,this.$flags)}function Gu(t){return t.instance.attaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Xu(t){return t.instance.attached(this.viewModel,this.$initiator,this.$flags)}function Yu(t){return t.instance.detaching(this.viewModel,this.$initiator,this.parent,this.$flags)}function Ju(t){return t.instance.unbinding(this.viewModel,this.$initiator,this.parent,this.$flags)}let td,ed,nd;const id=xn.createInterface("IAppRoot"),sd=xn.createInterface("IWorkTracker",(t=>t.singleton(rd)));class rd{constructor(t){this.Lt=0,this.qt=null,this.Pt=null,this.Ut=t.scopeTo("WorkTracker")}start(){this.Ut.trace(`start(stack:${this.Lt})`),++this.Lt}finish(){if(this.Ut.trace(`finish(stack:${this.Lt})`),0==--this.Lt){const t=this.Pt;null!==t&&(this.Pt=this.qt=null,t())}}wait(){if(this.Ut.trace(`wait(stack:${this.Lt})`),null===this.qt){if(0===this.Lt)return Promise.resolve();this.qt=new Promise((t=>{this.Pt=t}))}return this.qt}}rd.inject=[pi];class od{constructor(t,e,n,i){this.config=t,this.platform=e,this.container=n,this.controller=void 0,this._t=void 0,this.host=t.host,this.work=n.get(sd),i.prepare(this),n.registerResolver(e.HTMLElement,n.registerResolver(e.Element,n.registerResolver(hd,new Yn("ElementResolver",t.host)))),this._t=sn(this.Ft("beforeCreate"),(()=>{const e=t.component,i=n.createChild();let s;s=Wh.isType(e)?this.container.get(e):t.component;const r={hydrate:!1,projections:null},o=this.controller=Ru.$el(i,s,this.host,r);return o.hE(r,null),sn(this.Ft("hydrating"),(()=>(o.hS(null),sn(this.Ft("hydrated"),(()=>{o.hC(),this._t=void 0})))))}))}activate(){return sn(this._t,(()=>sn(this.Ft("beforeActivate"),(()=>sn(this.controller.activate(this.controller,null,2,void 0),(()=>this.Ft("afterActivate")))))))}deactivate(){return sn(this.Ft("beforeDeactivate"),(()=>sn(this.controller.deactivate(this.controller,null,0),(()=>this.Ft("afterDeactivate")))))}Ft(t){return rn(...this.container.getAll(ch).reduce(((e,n)=>(n.slot===t&&e.push(n.run()),e)),[]))}dispose(){var t;null===(t=this.controller)||void 0===t||t.dispose()}}class ad{}function ld(t,e){var n,i;return null!==(i=null===(n=t.$au)||void 0===n?void 0:n[e])&&void 0!==i?i:null}function cd(t,e,n){var i,s;(null!==(i=(s=t).$au)&&void 0!==i?i:s.$au=new ad)[e]=n}const hd=xn.createInterface("INode"),ud=xn.createInterface("IEventTarget",(t=>t.cachedCallback((t=>t.has(id,!0)?t.get(id).host:t.get(Ic).document)))),dd=xn.createInterface("IRenderLocation");var pd;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(pd||(pd={}));const fd=new WeakMap;function gd(t){if(fd.has(t))return fd.get(t);let e=0,n=t.nextSibling;for(;null!==n;){if(8===n.nodeType)switch(n.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return n}n=n.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Wh.for(t);if(void 0===e)return null;if(2===e.mountTarget)return gd(e.host)}return t.parentNode}function vd(t){if(md(t))return t;const e=t.ownerDocument.createComment("au-end"),n=t.ownerDocument.createComment("au-start");return null!==t.parentNode&&(t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(n,e)),e.$start=n,e}function md(t){return"au-end"===t.textContent}class bd{constructor(t,e){this.platform=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const n=e.querySelectorAll(".au");let i,s=0,r=n.length,o=this.targets=Array(r);for(;r>s;)i=n[s],"AU-M"===i.nodeName?o[s]=vd(i):o[s]=i,++s;const a=e.childNodes,l=this.childNodes=Array(r=a.length);for(s=0;r>s;)l[s]=a[s],++s;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e,n=this.firstChild;const i=this.lastChild;for(;null!=n&&(e=n.nextSibling,t.appendChild(n),n!==i);)n=e}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let n,i=this.firstChild;for(;null!==i&&(n=i.nextSibling,t.appendChild(i),i!==e);)i=n}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let n,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(n=i.nextSibling,e.insertBefore(i,t),i!==s);)i=n}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,md(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}const wd=xn.createInterface("IWindow",(t=>t.callback((t=>t.get(Ic).window)))),yd=xn.createInterface("ILocation",(t=>t.callback((t=>t.get(wd).location)))),xd=xn.createInterface("IHistory",(t=>t.callback((t=>t.get(wd).history)))),kd={[Hs.capturing]:{capture:!0},[Hs.bubbling]:{capture:!1}};class Sd{constructor(t,e,n){this.prevent=t,this.strategy=e,this.expAsHandler=n}}class Ad{constructor(t,e,n,i,s,r,o){this.platform=t,this.targetEvent=e,this.sourceExpression=n,this.target=i,this.eventDelegator=s,this.locator=r,this.Vt=o,this.interceptor=this,this.isBound=!1,this.handler=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;let n=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);if(delete e.$event,this.Vt.expAsHandler){if(!Hl(n))throw new Error(`Handler of "${this.targetEvent}" event is not a function.`);n=n(t)}return!0!==n&&this.Vt.prevent&&t.preventDefault(),n}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e;const n=this.sourceExpression;n.hasBind&&n.bind(t,e,this.interceptor),this.Vt.strategy===Hs.none?this.target.addEventListener(this.targetEvent,this):this.handler=this.eventDelegator.addEventListener(this.locator.get(ud),this.target,this.targetEvent,this,kd[this.Vt.strategy]),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.Vt.strategy===Hs.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observe(t,e){}handleChange(t,e,n){}}const Cd={capture:!1};class Ed{constructor(t,e,n=Cd){this.Mt=t,this.jt=e,this.Vt=n,this.Nt=0,this.Wt=new Map,this.Ht=new Map}zt(){1==++this.Nt&&this.Mt.addEventListener(this.jt,this,this.Vt)}Gt(){0==--this.Nt&&this.Mt.removeEventListener(this.jt,this,this.Vt)}dispose(){this.Nt>0&&(this.Nt=0,this.Mt.removeEventListener(this.jt,this,this.Vt)),this.Wt.clear(),this.Ht.clear()}Xt(t){const e=!0===this.Vt.capture?this.Wt:this.Ht;let n=e.get(t);return void 0===n&&e.set(t,n=Vl()),n}handleEvent(t){const e=!0===this.Vt.capture?this.Wt:this.Ht,n=t.composedPath();!0===this.Vt.capture&&n.reverse();for(const i of n){const n=e.get(i);if(void 0===n)continue;const s=n[this.jt];if(void 0!==s&&(Hl(s)?s(t):s.handleEvent(t),!0===t.cancelBubble))return}}}class Td{constructor(t,e,n,i){this.Kt=t,this.Yt=e,this.jt=n,t.zt(),e[n]=i}dispose(){this.Kt.Gt(),this.Yt[this.jt]=void 0}}class $d{constructor(t){this.config=t,this.target=null,this.handler=null}subscribe(t,e){let n;for(n of(this.target=t,this.handler=e,this.config.events))t.addEventListener(n,e)}dispose(){const{target:t,handler:e}=this;let n;if(null!==t&&null!==e)for(n of this.config.events)t.removeEventListener(n,e);this.target=this.handler=null}}const Id=xn.createInterface("IEventDelegator",(t=>t.singleton(Rd)));class Rd{constructor(){this.Zt=Vl()}addEventListener(t,e,n,i,s){var r,o;const a=null!==(r=(o=this.Zt)[n])&&void 0!==r?r:o[n]=new Map;let l=a.get(t);return void 0===l&&a.set(t,l=new Ed(t,n,s)),new Td(l,l.Xt(e),n,i)}dispose(){for(const t in this.Zt){const e=this.Zt[t];for(const t of e.values())t.dispose();e.clear()}}}xn.createInterface("IProjections");const Od=xn.createInterface("IAuSlotsInfo");class Pd{constructor(t){this.projectedSlots=t}}var Ld;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}(Ld||(Ld={}));const Md=xn.createInterface("Instruction");function Ud(t){const e=t.type;return Kl(e)&&2===e.length}class Bd{constructor(t,e){this.from=t,this.to=e}get type(){return"rf"}}class Nd{constructor(t,e,n){this.from=t,this.to=e,this.mode=n}get type(){return"rg"}}class jd{constructor(t,e){this.from=t,this.to=e}get type(){return"rk"}}class Fd{constructor(t,e){this.from=t,this.to=e}get type(){return"rh"}}class Vd{constructor(t,e){this.from=t,this.to=e}get type(){return"rj"}}class Dd{constructor(t,e){this.value=t,this.to=e}get type(){return"re"}}class Zd{constructor(t,e,n,i,s,r){this.res=t,this.alias=e,this.props=n,this.projections=i,this.containerless=s,this.captures=r,this.auSlot=null}get type(){return"ra"}}class zd{constructor(t,e,n){this.res=t,this.alias=e,this.props=n}get type(){return"rb"}}class qd{constructor(t,e,n,i){this.def=t,this.res=e,this.alias=n,this.props=i}get type(){return"rc"}}class Hd{constructor(t,e){this.instructions=t,this.toBindingContext=e}get type(){return"rd"}}class Kd{constructor(t,e){this.from=t,this.to=e}get type(){return"ri"}}class Wd{constructor(t,e){this.from=t,this.strict=e}get type(){return"ha"}}class Qd{constructor(t,e,n,i){this.from=t,this.to=e,this.preventDefault=n,this.strategy=i}get type(){return"hb"}}class _d{constructor(t,e){this.value=t,this.to=e}get type(){return"he"}}class Gd{constructor(t){this.value=t,this.type="hf"}}class Xd{constructor(t){this.value=t,this.type="hg"}}class Yd{constructor(t,e,n){this.attr=t,this.from=e,this.to=n}get type(){return"hc"}}class Jd{get type(){return"hs"}}class tp{constructor(t){this.instructions=t}get type(){return"hp"}}const ep=xn.createInterface("ITemplateCompiler"),np=xn.createInterface("IRenderer");function ip(t){return function(e){return e.register=function(t){Xn.singleton(np,this).register(t)},Wl(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function sp(t,e,n){return Kl(e)?t.parse(e,n):e}function rp(t){return null!=t.viewModel?t.viewModel:t}let op=class{render(t,e,n){const i=rp(e);void 0!==i.$observers&&void 0!==i.$observers[n.to]?i.$observers[n.to].setValue(n.value,2):i[n.to]=n.value}};op=$l([ip("re")],op);let ap=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[Cu,Ic]}render(t,e,n){let i,s,r,o;const a=n.res,l=n.projections,c=t.container;if("string"==typeof a){if(i=c.find(Wh,a),null==i)throw new Error(`AUR0752:${a}@${t.name}`)}else i=a;const h=n.containerless||i.containerless?vd(e):null,u=function(t,e,n,i,s,r){const o=e.container.createChild();return o.registerResolver(t.HTMLElement,o.registerResolver(t.Element,o.registerResolver(hd,new Yn("ElementResolver",n)))),o.registerResolver(Du,new Yn(Op,e)),o.registerResolver(Md,new Yn(Pp,i)),o.registerResolver(dd,null==s?Np:new Bp(s)),o.registerResolver(vu,jp),o.registerResolver(Od,null==r?Fp:new Yn(Lp,r)),o}(this.p,t,e,n,h,null==l?void 0:new Pd(Object.keys(l)));s=i.Type,r=u.invoke(s),u.registerResolver(s,new Yn(i.key,r)),o=Ru.$el(u,r,e,n,i,h),cd(e,i.key,o);const d=this.r.renderers,p=n.props,f=p.length;let g,v=0;for(;f>v;)g=p[v],d[g.type].render(t,o,g),++v;t.addChild(o)}};ap=$l([ip("ra")],ap);let lp=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[Cu,Ic]}render(t,e,n){let i,s=t.container;if("string"==typeof n.res){if(i=s.find(Ih,n.res),null==i)throw new Error(`AUR0753:${n.res}@${t.name}`)}else i=n.res;const r=Up(this.p,i,t,e,n,void 0,void 0),o=Ru.$attr(r.ctn,r.vm,e,i);cd(e,i.key,o);const a=this.r.renderers,l=n.props,c=l.length;let h,u=0;for(;c>u;)h=l[u],a[h.type].render(t,o,h),++u;t.addChild(o)}};lp=$l([ip("rb")],lp);let cp=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[Cu,Ic]}render(t,e,n){var i,s;let r,o=t.container;if("string"==typeof n.res){if(r=o.find(Ih,n.res),null==r)throw new Error(`AUR0754:${n.res}@${t.name}`)}else r=n.res;const a=this.r.getViewFactory(n.def,o),l=vd(e),c=Up(this.p,r,t,e,n,a,l),h=Ru.$attr(c.ctn,c.vm,e,r);cd(l,r.key,h),null===(s=(i=c.vm).link)||void 0===s||s.call(i,t,h,e,n);const u=this.r.renderers,d=n.props,p=d.length;let f,g=0;for(;p>g;)f=d[g],u[f.type].render(t,h,f),++g;t.addChild(h)}};cp=$l([ip("rc")],cp);let hp=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){e.remove();const i=n.instructions,s=n.toBindingContext,r=t.container,o=i.length;let a,l,c,h=0;for(;o>h;)a=i[h],l=sp(this.ep,a.from,8),c=new th(l,a.to,this.oL,r,s),t.addBinding(38962===l.$kind?bp(c,l,r):c),++h}};hp.inject=[ho,nl],hp=$l([ip("rd")],hp);let up=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=sp(this.ep,n.from,12),s=new Uc(i,rp(e),n.to,this.oL,t.container);t.addBinding(38962===i.$kind?bp(s,i,t.container):s)}};up.inject=[ho,nl],up=$l([ip("rh")],up);let dp=class{constructor(t){this.ep=t}render(t,e,n){const i=sp(this.ep,n.from,8),s=new lh(i,function(t,e){if("element"===e)return t;switch(e){case"controller":return Wh.for(t);case"view":throw new Error("AUR0750");case"view-model":return Wh.for(t).viewModel;default:{const n=Ih.for(t,e);if(void 0!==n)return n.viewModel;const i=Wh.for(t,{name:e});if(void 0===i)throw new Error(`AUR0751:${e}`);return i.viewModel}}}(e,n.to),t.container);t.addBinding(38962===i.$kind?bp(s,i,t.container):s)}};dp.inject=[ho],dp=$l([ip("rj")],dp);let pp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=sp(this.ep,n.from,1),r=new Xc(this.oL,s,rp(e),n.to,Zs.toView,i,this.p.domWriteQueue),o=r.partBindings,a=o.length;let l,c=0;for(;a>c;++c)l=o[c],38962===l.sourceExpression.$kind&&(o[c]=bp(l,l.sourceExpression,i));t.addBinding(r)}};pp.inject=[ho,nl,Ic],pp=$l([ip("rf")],pp);let fp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=sp(this.ep,n.from,8),s=new oh(i,rp(e),n.to,n.mode,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?bp(s,i,t.container):s)}};fp.inject=[ho,nl,Ic],fp=$l([ip("rg")],fp);let gp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=sp(this.ep,n.from,2),s=new oh(i,rp(e),n.to,Zs.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.iterable.$kind?bp(s,i.iterable,t.container):s)}};gp.inject=[ho,nl,Ic],gp=$l([ip("rk")],gp);let vp=0;const mp=[];function bp(t,e,n){for(;e instanceof ps;)mp[vp++]=e,e=e.expression;for(;vp>0;){const e=mp[--vp],i=n.get(e.behaviorKey);i instanceof ts&&(t=i.construct(t,e))}return mp.length=0,t}let wp=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=t.container,s=e.nextSibling,r=e.parentNode,o=this.p.document,a=sp(this.ep,n.from,1),l=a.parts,c=a.expressions,h=c.length;let u,d,p=0,f=l[0];for(""!==f&&r.insertBefore(o.createTextNode(f),s);h>p;++p)d=c[p],u=new Jc(d,r.insertBefore(o.createTextNode(""),s),i,this.oL,this.p,n.strict),t.addBinding(38962===d.$kind?bp(u,d,i):u),f=l[p+1],""!==f&&r.insertBefore(o.createTextNode(f),s);"AU-M"===e.nodeName&&e.remove()}};wp.inject=[ho,nl,Ic],wp=$l([ip("ha")],wp);const yp=xn.createInterface("IListenerBehaviorOptions",(t=>t.singleton(xp)));class xp{constructor(){this.expAsHandler=!1}}let kp=class{constructor(t,e,n,i){this.ep=t,this.Jt=e,this.p=n,this.Qt=i}render(t,e,n){const i=sp(this.ep,n.from,4),s=new Ad(this.p,n.to,i,e,this.Jt,t.container,new Sd(n.preventDefault,n.strategy,this.Qt.expAsHandler));t.addBinding(38962===i.$kind?bp(s,i,t.container):s)}};kp.inject=[ho,Id,Ic,yp],kp=$l([ip("hb")],kp);let Sp=class{render(t,e,n){e.setAttribute(n.to,n.value)}};Sp=$l([ip("he")],Sp);let Ap=class{render(t,e,n){!function(t,e){const n=e.length;let i=0;for(let s=0;s<n;++s)32===e.charCodeAt(s)?(s!==i&&t.add(e.slice(i,s)),i=s+1):s+1===n&&t.add(e.slice(i))}(e.classList,n.value)}};Ap=$l([ip("hf")],Ap);let Cp=class{render(t,e,n){e.style.cssText+=n.value}};Cp=$l([ip("hg")],Cp);let Ep=class{constructor(t,e,n){this.ep=t,this.oL=e,this.p=n}render(t,e,n){const i=sp(this.ep,n.from,8),s=new oh(i,e.style,n.to,Zs.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===i.$kind?bp(s,i,t.container):s)}};Ep.inject=[ho,nl,Ic],Ep=$l([ip("hd")],Ep);let Tp=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,n){const i=sp(this.ep,n.from,8),s=new Qc(i,e,n.attr,n.to,Zs.toView,this.oL,t.container);t.addBinding(38962===i.$kind?bp(s,i,t.container):s)}};Tp.inject=[ho,nl],Tp=$l([ip("hc")],Tp);let $p=class{constructor(t,e){this.ti=t,this.r=e}static get inject(){return[ep,Cu]}render(t,e,n){const i=t.container.get(Zu),s=this.r.renderers,r=t=>{let e=t,n=i;for(;null!=n&&e>0;)n=n.parent,--e;if(null==n)throw new Error("No scope context for spread binding.");return n},o=n=>{var i,a;const l=r(n),c=Rp(l),h=this.ti.compileSpread(l.controller.definition,null!==(a=null===(i=l.instruction)||void 0===i?void 0:i.captures)&&void 0!==a?a:ni,l.controller.container,e);let u;for(u of h)switch(u.type){case"hs":o(n+1);break;case"hp":s[u.instructions.type].render(c,Wh.for(e),u.instructions);break;default:s[u.type].render(c,e,u)}t.addBinding(c)};o(0)}};$p=$l([ip("hs")],$p);class Ip{constructor(t,e){this.ii=t,this.ei=e,this.interceptor=this,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}$bind(t,e){var n;if(this.isBound)return;this.isBound=!0;const i=this.$scope=null!==(n=this.ei.controller.scope.parentScope)&&void 0!==n?n:void 0;if(null==i)throw new Error("Invalid spreading. Context scope is null/undefined");this.ii.forEach((e=>e.$bind(t,i)))}$unbind(t){this.ii.forEach((e=>e.$unbind(t))),this.isBound=!1}addBinding(t){this.ii.push(t)}addChild(t){if(1!==t.vmKind)throw new Error("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}}const Rp=t=>new Ip([],t),Op="IController",Pp="IInstruction",Lp="IAuSlotsInfo";class Mp{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw new Error("AUR7055");if(!Kl(t.name)||0===t.name.length)throw new Error("AUR0756");return t}}function Up(t,e,n,i,s,r,o,a){const l=n.container.createChild();return l.registerResolver(t.HTMLElement,l.registerResolver(t.Element,l.registerResolver(hd,new Yn("ElementResolver",i)))),n=n instanceof Ru?n:n.ctrl,l.registerResolver(Du,new Yn(Op,n)),l.registerResolver(Md,new Yn(Pp,s)),l.registerResolver(dd,null==o?Np:new Yn("IRenderLocation",o)),l.registerResolver(vu,null==r?jp:new Mp(r)),l.registerResolver(Od,null==a?Fp:new Yn(Lp,a)),{vm:l.invoke(e.Type),ctn:l}}class Bp{constructor(t){this.l=t}get name(){return"IRenderLocation"}get $isResolver(){return!0}resolve(){return this.l}}const Np=new Bp(null),jp=new Mp(null),Fp=new Yn(Lp,new Pd(ni));var Vp;function Dp(t){return function(e){return Kp.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(Vp||(Vp={}));class Zp{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.type=s}static create(t,e){let n,i;return Kl(t)?(n=t,i={name:n}):(n=t.name,i=t),new Zp(e,Je(Hp(e,"name"),n),Ye(Hp(e,"aliases"),i.aliases,e.aliases),qp(n),Je(Hp(e,"type"),i.type,e.type,null))}register(t){const{Type:e,key:n,aliases:i}=this;Xn.singleton(n,e).register(t),Xn.aliasTo(n,e).register(t),Hi(i,Kp,n,t)}}const zp=Bl("binding-command"),qp=t=>`${zp}:${t}`,Hp=(t,e)=>Rl(Ul(e),t),Kp=Object.freeze({name:zp,keyFrom:qp,define(t,e){const n=Zp.create(t,e);return Pl(zp,n,n.Type),Pl(zp,n,n),Nl(e,zp),n.Type},getAnnotation:Hp});let Wp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"one-time"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:qe(n):(""===i&&1===t.def.type&&(i=qe(n)),n=t.bindable.property),new Nd(this.ep.parse(i,8),n,Zs.oneTime)}};Wp.inject=[Pc,ho],Wp=$l([Dp("one-time")],Wp);let Qp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"to-view"}build(t){var e;let n=t.attr.target,i=t.attr.rawValue;return null==t.bindable?n=null!==(e=this.m.map(t.node,n))&&void 0!==e?e:qe(n):(""===i&&1===t.def.type&&(i=qe(n)),n=t.bindable.property),new Nd(this.ep.parse(i,8),n,Zs.toView)}};Qp.inject=[Pc,ho],Qp=$l([Dp("to-view")],Qp);let _p=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"from-view"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:qe(i):(""===s&&1===t.def.type&&(s=qe(i)),i=t.bindable.property),new Nd(this.ep.parse(s,8),i,Zs.fromView)}};_p.inject=[Pc,ho],_p=$l([Dp("from-view")],_p);let Gp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"two-way"}build(t){var e;const n=t.attr;let i=n.target,s=n.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:qe(i):(""===s&&1===t.def.type&&(s=qe(i)),i=t.bindable.property),new Nd(this.ep.parse(s,8),i,Zs.twoWay)}};Gp.inject=[Pc,ho],Gp=$l([Dp("two-way")],Gp);let Xp=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"bind"}build(t){var e;const n=t.attr,i=t.bindable;let s,r,o=n.target,a=n.rawValue;return null==i?(r=this.m.isTwoWay(t.node,o)?Zs.twoWay:Zs.toView,o=null!==(e=this.m.map(t.node,o))&&void 0!==e?e:qe(o)):(""===a&&1===t.def.type&&(a=qe(o)),s=t.def.defaultBindingMode,r=i.mode===Zs.default||null==i.mode?null==s||s===Zs.default?Zs.toView:s:i.mode,o=i.property),new Nd(this.ep.parse(a,8),o,r)}};Xp.inject=[Pc,ho],Xp=$l([Dp("bind")],Xp);let Yp=class{constructor(t){this.type=0,this.ep=t}get name(){return"call"}build(t){const e=null===t.bindable?qe(t.attr.target):t.bindable.property;return new Fd(this.ep.parse(t.attr.rawValue,12),e)}};Yp.inject=[ho],Yp=$l([Dp("call")],Yp);let Jp=class{constructor(t){this.type=0,this.ep=t}get name(){return"for"}build(t){const e=null===t.bindable?qe(t.attr.target):t.bindable.property;return new jd(this.ep.parse(t.attr.rawValue,2),e)}};Jp.inject=[ho],Jp=$l([Dp("for")],Jp);let tf=class{constructor(t){this.type=1,this.ep=t}get name(){return"trigger"}build(t){return new Qd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!0,Hs.none)}};tf.inject=[ho],tf=$l([Dp("trigger")],tf);let ef=class{constructor(t){this.type=1,this.ep=t}get name(){return"delegate"}build(t){return new Qd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Hs.bubbling)}};ef.inject=[ho],ef=$l([Dp("delegate")],ef);let nf=class{constructor(t){this.type=1,this.ep=t}get name(){return"capture"}build(t){return new Qd(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,Hs.capturing)}};nf.inject=[ho],nf=$l([Dp("capture")],nf);let sf=class{constructor(t){this.type=1,this.ep=t}get name(){return"attr"}build(t){return new Yd(t.attr.target,this.ep.parse(t.attr.rawValue,8),t.attr.target)}};sf.inject=[ho],sf=$l([Dp("attr")],sf);let rf=class{constructor(t){this.type=1,this.ep=t}get name(){return"style"}build(t){return new Yd("style",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};rf.inject=[ho],rf=$l([Dp("style")],rf);let of=class{constructor(t){this.type=1,this.ep=t}get name(){return"class"}build(t){return new Yd("class",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};of.inject=[ho],of=$l([Dp("class")],of);let af=class{constructor(t){this.type=1,this.ep=t}get name(){return"ref"}build(t){return new Vd(this.ep.parse(t.attr.rawValue,8),t.attr.target)}};af.inject=[ho],af=$l([Dp("ref")],af);let lf=class{constructor(){this.type=1}get name(){return"...$attrs"}build(t){return new Jd}};lf=$l([Dp("...$attrs")],lf);const cf=xn.createInterface("ITemplateElementFactory",(t=>t.singleton(uf))),hf={};class uf{constructor(t){this.p=t,this.si=t.document.createElement("template")}createTemplate(t){var e;if(Kl(t)){let e=hf[t];if(void 0===e){const n=this.si;n.innerHTML=t;const i=n.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.si=this.p.document.createElement("template"),e=n):(n.content.removeChild(i),e=i),hf[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.p.document.createElement("template");return e.content.appendChild(t),e}return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.cloneNode(!0)}}uf.inject=[Ic];class df{constructor(t,e,n,i,s,r){this.hasSlot=!1,this.Ci=Vl();const o=null!==i;this.c=e,this.root=null===s?this:s,this.def=t,this.ci=n,this.parent=i,this.ni=o?i.ni:e.get(cf),this.di=o?i.di:e.get(vc),this.ep=o?i.ep:e.get(ho),this.m=o?i.m:e.get(Pc),this.Ut=o?i.Ut:e.get(pi),this.p=o?i.p:e.get(Ic),this.localEls=o?i.localEls:new Set,this.rows=null!=r?r:[]}ki(t){var e,n;(null!==(e=(n=this.root).deps)&&void 0!==e?e:n.deps=[]).push(t),this.root.c.register(t)}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}hi(t){return this.c.find(Wh,t)}ui(t){return this.c.find(Ih,t)}xi(t){return new df(this.def,this.c,this.ci,this,this.root,t)}ai(t){if(this.root!==this)return this.root.ai(t);const e=t.command;if(null===e)return null;let n=this.Ci[e];if(void 0===n){if(n=this.c.create(Kp,e),null===n)throw new Error(`AUR0713:${e}`);this.Ci[e]=n}return n}}function pf(t){const e=t.length;let n=0,i=0;for(;e>i;){if(n=t.charCodeAt(i),92===n)++i;else{if(58===n)return!0;if(36===n&&123===t.charCodeAt(i+1))return!1}++i}return!1}function ff(){mf.node=mf.attr=mf.bindable=mf.def=null}const gf={projections:null},vf={name:"unnamed"},mf={node:null,attr:null,bindable:null,def:null},bf=Object.assign(Vl(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),wf={checkbox:1,radio:1},yf=new WeakMap;class xf{constructor(t,e,n){this.attrs=t,this.bindables=e,this.primary=n}static from(t,e){let n=yf.get(t);if(null==n){const i=t.bindables,s=Vl(),r=e?void 0===t.defaultBindingMode?Zs.default:t.defaultBindingMode:Zs.default;let o,a,l,c,h=!1;for(a in i){if(o=i[a],c=o.attribute,!0===o.primary){if(h)throw new Error(`AUR0714:${t.name}`);h=!0,l=o}else h||null!=l||(l=o);s[c]=Jl.create(a,t.Type,o)}null==o&&e&&(l=s.value=Jl.create("value",t.Type,{mode:r})),yf.set(t,n=new xf(s,i,l))}return n}}var kf;!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(kf||(kf={}));const Sf=Object.freeze(["property","attribute","mode"]),Af="as-custom-element";function Cf(t,e){const n=t.getAttribute(Af);if(null===n||""===n)throw new Error("AUR0715");if(e.has(n))throw new Error(`AUR0716:${n}`);return e.add(n),t.removeAttribute(Af),n}function Ef(t){switch(t.getAttribute("mode")){case"oneTime":return Zs.oneTime;case"toView":return Zs.toView;case"fromView":return Zs.fromView;case"twoWay":return Zs.twoWay;default:return Zs.default}}const Tf=xn.createInterface("ITemplateCompilerHooks"),$f=new WeakMap,If=Bl("compiler-hooks");Object.freeze({name:If,define(t){let e=$f.get(t);return void 0===e&&($f.set(t,e=new Rf(t)),Pl(If,e,t),Nl(t,If)),t}});class Rf{constructor(t){this.Type=t}get name(){return""}register(t){t.register(Xn.singleton(Tf,this.Type))}}const Of=Wh.generateName,Pf="default",Lf="au-slot";class Mf{constructor(t){this.mode=t,this.Ai=new Map}bind(t,e,n){this.Ai.set(n,n.mode),n.mode=this.mode}unbind(t,e,n){n.mode=this.Ai.get(n),this.Ai.delete(n)}}class Uf extends Mf{constructor(){super(Zs.oneTime)}}class Bf extends Mf{constructor(){super(Zs.toView)}}class Nf extends Mf{constructor(){super(Zs.fromView)}}class jf extends Mf{constructor(){super(Zs.twoWay)}}Yi("oneTime")(Uf),Yi("toView")(Bf),Yi("fromView")(Nf),Yi("twoWay")(jf);class Ff extends es{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(ri).taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(t,e,n)}updateSource(t,e){this.queueTask((()=>this.binding.updateSource(t,e)))}queueTask(t){const e=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,t())),this.opts),null==e||e.cancel()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.binding.$unbind(t)}}Yi("debounce")(Ff);class Vf{constructor(t){this.Yt=new Map,this.Ri=t}bind(t,e,n,...i){if(!("handleChange"in n))throw new Error("AUR0817");if(0===i.length)throw new Error("AUR0818");let s;for(s of(this.Yt.set(n,i),i))this.Ri.addSignalListener(s,n)}unbind(t,e,n){const i=this.Yt.get(n);let s;for(s of(this.Yt.delete(n),i))this.Ri.removeSignalListener(s,n)}}Vf.inject=[_i],Yi("signal")(Vf);class Df extends es{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.p=t.locator.get(ri),this.Si=this.p.taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.Ei((()=>this.binding.callSource(t)))}handleChange(t,e,n){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.p.performanceNow()),this.binding.handleChange(t,e,n)}updateSource(t,e){this.Ei((()=>this.binding.updateSource(t,e)))}Ei(t){const e=this.opts,n=this.p,i=this.lastCall+e.delay-n.performanceNow();if(i>0){const s=this.task;e.delay=i,this.task=this.Si.queueTask((()=>{this.lastCall=n.performanceNow(),this.task=null,e.delay=this.delay,t()}),e),null==s||s.cancel()}else this.lastCall=n.performanceNow(),t()}$bind(t,e){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=this.delay=isNaN(n)?200:n}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,super.$unbind(t)}}Yi("throttle")(Df);const Zf=new class{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,n,i){null==t?n.removeAttribute(i):n.setAttribute(i,t)}};class zf{bind(t,e,n){n.targetObserver=Zf}unbind(t,e,n){}}function qf(t){const e=t.composedPath()[0];if(this.target===e)return this.selfEventCallSource(t)}Yi("attr")(zf);class Hf{bind(t,e,n){if(!n.callSource||!n.targetEvent)throw new Error("AUR0801");n.selfEventCallSource=n.callSource,n.callSource=qf}unbind(t,e,n){n.callSource=n.selfEventCallSource,n.selfEventCallSource=null}}Yi("self")(Hf);const Kf=Vl();class Wf{constructor(t){this.ns=t,this.type=6}static forNs(t){var e;return null!==(e=Kf[t])&&void 0!==e?e:Kf[t]=new Wf(t)}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,n,i){null==t?n.removeAttributeNS(this.ns,i):n.setAttributeNS(this.ns,i,t)}}function Qf(t,e){return t===e}class _f{constructor(t,e,n,i){this.handler=n,this.type=7,this.v=void 0,this.ov=void 0,this.Bi=void 0,this.Ii=void 0,this.f=0,this.o=t,this.oL=i}getValue(){return this.v}setValue(t,e){const n=this.v;t!==n&&(this.v=t,this.ov=n,this.f=e,this.Ti(),this.Di(),this.queue.add(this))}handleCollectionChange(t,e){this.Di()}handleChange(t,e,n){this.Di()}Di(){const t=this.v,e=this.o,n=Dl.call(e,"model")?e.model:e.value,i="radio"===e.type,s=void 0!==e.matcher?e.matcher:Qf;if(i)e.checked=!!s(t,n);else if(!0===t)e.checked=!0;else{let i=!1;if(t instanceof Array)i=-1!==t.findIndex((t=>!!s(t,n)));else if(t instanceof Set){for(const e of t)if(s(e,n)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(s(t,n)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.o,n=Dl.call(e,"model")?e.model:e.value,i=e.checked,s=void 0!==e.matcher?e.matcher:Qf;if("checkbox"===e.type){if(t instanceof Array){const e=t.findIndex((t=>!!s(t,n)));return void(i&&-1===e?t.push(n):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===s(e,n)){r=e;break}return void(i&&r===e?t.add(n):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===s(t,n)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=n}this.v=t,this.queue.add(this)}start(){this.handler.subscribe(this.o,this),this.Ti()}stop(){var t,e;this.handler.dispose(),null===(t=this.Bi)||void 0===t||t.unsubscribe(this),this.Bi=void 0,null===(e=this.Ii)||void 0===e||e.unsubscribe(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.start()}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.stop()}flush(){Gf=this.ov,this.ov=this.v,this.subs.notify(this.v,Gf,this.f)}Ti(){var t,e,n,i,s,r,o;const a=this.o;null===(s=null!==(t=this.Ii)&&void 0!==t?t:this.Ii=null!==(n=null===(e=a.$observers)||void 0===e?void 0:e.model)&&void 0!==n?n:null===(i=a.$observers)||void 0===i?void 0:i.value)||void 0===s||s.subscribe(this),null===(r=this.Bi)||void 0===r||r.unsubscribe(this),this.Bi=void 0,"checkbox"===a.type&&(null===(o=this.Bi=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))||void 0===o||o.subscribe(this))}}let Gf;_s(_f),er(_f);const Xf={childList:!0,subtree:!0,characterData:!0};function Yf(t,e){return t===e}class Jf{constructor(t,e,n,i){this.type=7,this.v=void 0,this.ov=void 0,this.H=!1,this.Pi=void 0,this.$i=void 0,this.iO=!1,this.o=t,this.oL=i,this.handler=n}getValue(){return this.iO?this.v:this.o.multiple?function(t){const e=[];if(0===t.length)return e;const n=t.length;let i,s=0;for(;n>s;)i=t[s],i.selected&&(e[e.length]=Dl.call(i,"model")?i.model:i.value),++s;return e}(this.o.options):this.o.value}setValue(t,e){this.ov=this.v,this.v=t,this.H=t!==this.ov,this.Oi(t instanceof Array?t:null),0==(64&e)&&this.K()}K(){this.H&&(this.H=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var t;const e=this.v,n=this.o,i=Array.isArray(e),s=null!==(t=n.matcher)&&void 0!==t?t:Yf,r=n.options;let o=r.length;for(;o-- >0;){const t=r[o],n=Dl.call(t,"model")?t.model:t.value;t.selected=i?-1!==e.findIndex((t=>!!s(n,t))):!!s(n,e)}}syncValue(){const t=this.o,e=t.options,n=e.length,i=this.v;let s=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||Yf,a=[];for(;s<n;)r=e[s],r.selected&&a.push(Dl.call(r,"model")?r.model:r.value),++s;let l;for(s=0;s<i.length;)l=i[s],-1===a.findIndex((t=>!!o(l,t)))?i.splice(s,1):++s;for(s=0;s<a.length;)l=a[s],-1===i.findIndex((t=>!!o(l,t)))&&i.push(l),++s;return!1}let r,o=null;for(;s<n;){if(r=e[s],r.selected){o=Dl.call(r,"model")?r.model:r.value;break}++s}return this.ov=this.v,this.v=o,!0}Li(){(this.$i=new this.o.ownerDocument.defaultView.MutationObserver(this.qi.bind(this))).observe(this.o,Xf),this.Oi(this.v instanceof Array?this.v:null),this.iO=!0}Ui(){var t;this.$i.disconnect(),null===(t=this.Pi)||void 0===t||t.unsubscribe(this),this.$i=this.Pi=void 0,this.iO=!1}Oi(t){var e;if(null===(e=this.Pi)||void 0===e||e.unsubscribe(this),this.Pi=void 0,null!=t){if(!this.o.multiple)throw new Error("AUR0654");(this.Pi=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}qi(t){this.syncOptions(),this.syncValue()&&this.queue.add(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.Li())}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.handler.dispose(),this.Ui())}flush(){tg=this.ov,this.ov=this.v,this.subs.notify(this.v,tg,0)}}let tg,eg;_s(Jf),er(Jf);class ng{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.styles={},this.version=0,this.H=!1}getValue(){return this.obj.style.cssText}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(64&e)&&this.K()}_i(t){const e=[],n=/url\([^)]+$/;let i,s,r,o,a=0,l="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),l+=t.substring(a,i),a=i+1,n.test(l)?l+=";":(s=l.indexOf(":"),r=l.substring(0,s).trim(),o=l.substring(s+1).trim(),e.push([r,o]),l="");return e}Fi(t){let e,n;const i=[];for(n in t)if(e=t[n],null!=e)if(Kl(e)){if(n.startsWith("--")){i.push([n,e]);continue}i.push([Ke(n),e])}else i.push(...this.Vi(e));return i}Mi(t){const e=t.length;if(e>0){const n=[];let i=0;for(;e>i;++i)n.push(...this.Vi(t[i]));return n}return ni}Vi(t){return Kl(t)?this._i(t):t instanceof Array?this.Mi(t):t instanceof Object?this.Fi(t):ni}K(){if(this.H){this.H=!1;const t=this.value,e=this.styles,n=this.Vi(t);let i,s,r,o,a=this.version;this.ov=t;let l=0;const c=n.length;for(;l<c;++l)s=n[l],r=s[0],o=s[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Dl.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let n="";null!=e&&Hl(e.indexOf)&&e.includes("!important")&&(n="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,n)}bind(t){this.value=this.ov=this.obj.style.cssText}}class ig{constructor(t,e,n){this.handler=n,this.type=7,this.v="",this.ov="",this.H=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.H=!0,this.handler.config.readonly||0!=(64&e)||this.K(e))}K(t){var e;this.H&&(this.H=!1,this.o[this.k]=null!==(e=this.v)&&void 0!==e?e:this.handler.config.default,0==(2&t)&&this.queue.add(this))}handleEvent(){this.ov=this.v,this.v=this.o[this.k],this.ov!==this.v&&(this.H=!1,this.queue.add(this))}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.v=this.ov=this.o[this.k])}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.handler.dispose()}flush(){eg=this.ov,this.ov=this.v,this.subs.notify(this.v,eg,0)}}_s(ig),er(ig);const sg="http://www.w3.org/1999/xlink",rg="http://www.w3.org/XML/1998/namespace",og="http://www.w3.org/2000/xmlns/",ag=Object.assign(Vl(),{"xlink:actuate":["actuate",sg],"xlink:arcrole":["arcrole",sg],"xlink:href":["href",sg],"xlink:role":["role",sg],"xlink:show":["show",sg],"xlink:title":["title",sg],"xlink:type":["type",sg],"xml:lang":["lang",rg],"xml:space":["space",rg],xmlns:["xmlns",og],"xmlns:xlink":["xlink",og]}),lg=new Xa;lg.type=6;class cg{constructor(t){var e;this.type=null!==(e=t.type)&&void 0!==e?e:ig,this.events=t.events,this.readonly=t.readonly,this.default=t.default}}class hg{constructor(t,e,n,i){this.locator=t,this.platform=e,this.dirtyChecker=n,this.svgAnalyzer=i,this.allowDirtyCheck=!0,this.ji=Vl(),this.Ni=Vl(),this.Wi=Vl(),this.Hi=Vl();const s=["change","input"],r={events:s,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:s,default:0},checked:{type:_f,events:s},files:{events:s,readonly:!0}},SELECT:{value:{type:Jf,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){Xn.aliasTo(il,hg).register(t),Xn.singleton(il,hg).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,n){var i,s;const r=this.ji;let o;if(Kl(t))o=null!==(i=r[t])&&void 0!==i?i:r[t]=Vl(),null==o[e]?o[e]=new cg(n):ug(t,e);else for(const n in t){o=null!==(s=r[n])&&void 0!==s?s:r[n]=Vl();const i=t[n];for(e in i)null==o[e]?o[e]=new cg(i[e]):ug(n,e)}}useConfigGlobal(t,e){const n=this.Ni;if("object"==typeof t)for(const e in t)null==n[e]?n[e]=new cg(t[e]):ug("*",e);else null==n[t]?n[t]=new cg(e):ug("*",t)}getAccessor(t,e,n){var i;if(e in this.Hi||e in(null!==(i=this.Wi[t.tagName])&&void 0!==i?i:ii))return this.getObserver(t,e,n);switch(e){case"src":case"href":case"role":return Zf;default:{const n=ag[e];return void 0!==n?Wf.forNs(n[1]):zl(t,e,this.svgAnalyzer)?Zf:lg}}}overrideAccessor(t,e){var n,i,s,r;let o;if(Kl(t))o=null!==(n=(s=this.Wi)[t])&&void 0!==n?n:s[t]=Vl(),o[e]=!0;else for(const e in t)for(const n of t[e])o=null!==(i=(r=this.Wi)[e])&&void 0!==i?i:r[e]=Vl(),o[n]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Hi[e]=!0}getObserver(t,e,n){var i,s;switch(e){case"role":return Zf;case"class":return new Qh(t);case"css":case"style":return new ng(t)}const r=null!==(s=null===(i=this.ji[t.tagName])||void 0===i?void 0:i[e])&&void 0!==s?s:this.Ni[e];if(null!=r)return new r.type(t,e,new $d(r),n,this.locator);const o=ag[e];if(void 0!==o)return Wf.forNs(o[1]);if(zl(t,e,this.svgAnalyzer))return Zf;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw new Error(`AUR0652:${String(e)}`)}return new Ja(t,e)}}function ug(t,e){throw new Error(`AUR0653:${String(e)}@${t}`)}hg.inject=[Cn,Ic,Ha,Rc];class dg{constructor(t){this.oL=t}bind(t,e,n,...i){if(0===i.length)throw new Error("AUR0802");if(n.mode!==Zs.twoWay&&n.mode!==Zs.fromView)throw new Error("AUR0803");const s=this.oL.getObserver(n.target,n.targetProperty);if(!s.handler)throw new Error("AUR0804");n.targetObserver=s;const r=s.handler;s.originalHandler=r,s.handler=new $d(new cg({default:r.config.default,events:i,readonly:r.config.readonly}))}unbind(t,e,n){n.targetObserver.handler.dispose(),n.targetObserver.handler=n.targetObserver.originalHandler,n.targetObserver.originalHandler=null}}dg.inject=[nl],Yi("updateTrigger")(dg);class pg{constructor(t,e){this.zi=t,this.p=e,this.Gi=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Xi():this.Gi=!0}attached(){this.Gi&&(this.Gi=!1,this.Xi()),this.zi.addEventListener("focus",this),this.zi.addEventListener("blur",this)}afterDetachChildren(){const t=this.zi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Ki||(this.value=!1)}Xi(){const t=this.zi,e=this.Ki,n=this.value;n&&!e?t.focus():!n&&e&&t.blur()}get Ki(){return this.zi===this.p.document.activeElement}}pg.inject=[hd,Ic],$l([_l({mode:Zs.twoWay})],pg.prototype,"value",void 0),Sh("focus")(pg);let fg=class{constructor(t,e,n){this.el=t,this.p=e,this.Yi=!1,this.Zi=null,this.$val="",this.$prio="",this.update=()=>{this.Zi=null,Boolean(this.value)!==this.Ji&&(this.Ji===this.Qi?(this.Ji=!this.Qi,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Ji=this.Qi,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.Ji=this.Qi="hide"!==n.alias}binding(){this.Yi=!0,this.update()}detaching(){var t;this.Yi=!1,null===(t=this.Zi)||void 0===t||t.cancel(),this.Zi=null}valueChanged(){this.Yi&&null===this.Zi&&(this.Zi=this.p.domWriteQueue.queueTask(this.update))}};$l([_l],fg.prototype,"value",void 0),fg=$l([Il(0,hd),Il(1,Ic),Il(2,Md)],fg),function(...t){return function(e){const n=Zi("aliases"),i=Fi(n,e);void 0===i?Di(n,t,e):i.push(...t)}}("hide")(fg),Sh("show")(fg);class gg{constructor(t,e,n){this.id=_e("au$component"),this.strict=!1,this.p=n,this.te=n.document.createElement("div"),this.view=t.create(),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)fd.set(t,e);else{const n=t.childNodes;for(let t=0,i=n.length;t<i;++t)fd.set(n[t],e)}}(this.view.nodes,e)}attaching(t,e,n){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const i=this.te=this.ie();return this.view.setHost(i),this.ee(t,i,n)}detaching(t,e,n){return this.se(t,this.te,n)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.te,n=this.te=this.ie();if(e===n)return;this.view.setHost(n);const i=sn(this.se(null,n,t.flags),(()=>this.ee(null,n,t.flags)));i instanceof Promise&&i.catch((t=>{throw t}))}ee(t,e,n){const{activating:i,callbackContext:s,view:r}=this;return r.setHost(e),sn(null==i?void 0:i.call(s,e,r),(()=>this.ne(t,e,n)))}ne(t,e,n){const{$controller:i,view:s}=this;return null!==t?sn(s.activate(null!=t?t:s,i,n,i.scope),(()=>this.re(e))):(s.nodes.appendTo(e),this.re(e))}re(t){const{activated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}se(t,e,n){const{deactivating:i,callbackContext:s,view:r}=this;return sn(null==i?void 0:i.call(s,e,r),(()=>this.oe(t,e,n)))}oe(t,e,n){const{$controller:i,view:s}=this;return null!==t?sn(s.deactivate(t,i,n),(()=>this.le(e))):(s.nodes.remove(),this.le(e))}le(t){const{deactivated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}ie(){const t=this.p,e=t.document;let n=this.target,i=this.renderContext;if(""===n){if(this.strict)throw new Error("AUR0811");return e.body}if(Kl(n)){let s=e;Kl(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(s=i),n=s.querySelector(n)}if(n instanceof t.Node)return n;if(null==n){if(this.strict)throw new Error("AUR0812");return e.body}return n}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}gg.inject=[vu,dd,Ic],$l([_l({primary:!0})],gg.prototype,"target",void 0),$l([_l({callback:"targetChanged"})],gg.prototype,"renderContext",void 0),$l([_l()],gg.prototype,"strict",void 0),$l([_l()],gg.prototype,"deactivating",void 0),$l([_l()],gg.prototype,"activating",void 0),$l([_l()],gg.prototype,"deactivated",void 0),$l([_l()],gg.prototype,"activated",void 0),$l([_l()],gg.prototype,"callbackContext",void 0),Ah("portal")(gg);class vg extends class{constructor(t,e,n){this.fs=n,this.id=_e("au$component"),this.view=t.create().setLocation(e)}attaching(t,e,n){const{$controller:i}=this;return this.view.activate(t,i,n|this.fs,i.scope)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}{constructor(t,e){super(t,e,32)}}vg.inject=[vu,dd],Ah("observe-shallow")(vg);class mg{constructor(t,e,n){this.ifFactory=t,this.location=e,this.work=n,this.id=_e("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.he=!1,this.ae=0}attaching(t,e,n){let i;const s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;return sn(this.pending,(()=>{var e;o()&&(this.pending=void 0,i=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=i&&(i.setLocation(this.location),this.pending=sn(i.activate(t,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e,n){return this.he=!0,sn(this.pending,(()=>{var e;this.he=!1,this.pending=void 0,null===(e=this.view)||void 0===e||e.deactivate(t,this.$controller,n)}))}valueChanged(t,e,n){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;this.work.start();const i=this.view,s=this.$controller,r=this.ae++,o=()=>!this.he&&this.ae===r+1;let a;return sn(sn(this.pending,(()=>this.pending=sn(null==i?void 0:i.deactivate(i,s,n),(()=>{var e;if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=a))return a.setLocation(this.location),sn(a.activate(a,s,n,s.scope),(()=>{o()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var t,e;null===(t=this.ifView)||void 0===t||t.dispose(),null===(e=this.elseView)||void 0===e||e.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}mg.inject=[vu,dd,sd],$l([_l],mg.prototype,"value",void 0),$l([_l({set:t=>""===t||!!t&&"false"!==t})],mg.prototype,"cache",void 0),Ah("if")(mg);class bg{constructor(t){this.factory=t,this.id=_e("au$component")}link(t,e,n,i){const s=t.children,r=s[s.length-1];if(r instanceof mg)r.elseFactory=this.factory;else{if(!(r.viewModel instanceof mg))throw new Error("AUR0810");r.viewModel.elseFactory=this.factory}}}function wg(t){t.dispose()}bg.inject=[vu],Ah({name:"else"})(bg);const yg=[38962,36913];class xg{constructor(t,e,n){this.l=t,this.ce=e,this.f=n,this.id=_e("au$component"),this.views=[],this.key=void 0,this.ue=void 0,this.fe=!1,this.de=!1,this.me=null,this.ve=void 0,this.ge=!1}binding(t,e,n){const i=this.ce.bindings,s=i.length;let r,o,a=0;for(;s>a;++a)if(r=i[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.sourceExpression,this.pe=r;let t=o.iterable;for(;null!=t&&yg.includes(t.$kind);)t=t.expression,this.fe=!0;this.me=t;break}this.we(n);const l=o.declaration;(this.ge=90137===l.$kind||106521===l.$kind)||(this.local=l.evaluate(n,this.$controller.scope,r.locator,null))}attaching(t,e,n){return this.be(n),this.xe(t,n)}detaching(t,e,n){return this.we(n),this.ye(t,n)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.we(t),this.be(t);const n=sn(this.ye(null,t),(()=>this.xe(null,t)));n instanceof Promise&&n.catch(Ql)}handleCollectionChange(t,e){const{$controller:n}=this;if(n.isActive){if(this.fe){if(this.de)return;return this.de=!0,this.items=this.forOf.iterable.evaluate(e,n.scope,this.pe.locator,null),void(this.de=!1)}if(e|=n.flags,this.be(e),void 0===t){const t=sn(this.ye(null,e),(()=>this.xe(null,e)));t instanceof Promise&&t.catch(Ql)}else{const n=this.views.length,i=function(t){let e=0,n=0,i=0;const s=function(t){const e=t.slice();return e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t),r=s.length;for(;i<r;++i){for(;s.deletedItems[n]<=i-e;)++n,--e;-2===s[i]?++e:s[i]+=e}return s}(t);if(i.deletedItems.length>0){i.deletedItems.sort(Ge);const t=sn(this.ke(i,e),(()=>this.Ce(n,i,e)));t instanceof Promise&&t.catch(Ql)}else this.Ce(n,i,e)}}}we(t){var e;const n=this.$controller.scope;let i=this.Ae,s=this.fe;s&&(i=this.Ae=null!==(e=this.me.evaluate(t,n,this.pe.locator,null))&&void 0!==e?e:null,s=this.fe=!Object.is(this.items,i));const r=this.ue;if(4&t)void 0!==r&&r.unsubscribe(this);else if(this.$controller.isActive){const t=this.ue=function(t){let e;return t instanceof Array?e=Rr(t):t instanceof Map?e=Yr(t):t instanceof Set&&(e=Dr(t)),e}(s?i:this.items);r!==t&&r&&r.unsubscribe(this),t&&t.subscribe(this)}}be(t){const e=this.items;if(e instanceof Array)return void(this.ve=e);if(void 0===this.forOf)return;const n=[];this.forOf.iterate(t,e,((t,e,i)=>{n[e]=i})),this.ve=n}xe(t,e){let n,i,s,r;const{$controller:o,f:a,local:l,l:c,items:h}=this,u=o.scope,d=this.forOf,p=d.count(e,h),f=this.views=Array(p);if(d.iterate(e,h,((h,g,v)=>{s=f[g]=a.create().setLocation(c),s.nodes.unlink(),this.ge?d.declaration.assign(e,r=Wi.fromParent(u,Ki.create()),this.pe.locator,v):r=Wi.fromParent(u,Ki.create(l,v)),Cg(r.overrideContext,g,p),i=s.activate(null!=t?t:s,o,e,r),i instanceof Promise&&(null!=n?n:n=[]).push(i)})),void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ye(t,e){let n,i,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),i=s.deactivate(null!=t?t:s,a,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}ke(t,e){let n,i,s;const{$controller:r,views:o}=this,a=t.deletedItems,l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),i=s.deactivate(s,r,e),i instanceof Promise&&(null!=n?n:n=[]).push(i);c=0;let h=0;for(;l>c;++c)h=a[c]-c,o.splice(h,1);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}Ce(t,e,n){var i;let s,r,o,a,l=0;const{$controller:c,f:h,local:u,ve:d,l:p,views:f}=this,g=e.length;for(;g>l;++l)-2===e[l]&&(o=h.create(),f.splice(l,0,o));if(f.length!==g)throw new Error(`AUR0814:${f.length}!=${g}`);const v=c.scope,m=e.length;!function(t,e){const n=t.slice(),i=e.length;let s=0,r=0;for(;s<i;)r=e[s],-2!==r&&(t[s]=n[r]),++s}(f,e);const b=function(t){const e=t.length;e>kg&&(kg=e,Sg=new Int32Array(e),Ag=new Int32Array(e));let n=0,i=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=Sg[n],s=t[o],-2!==s&&s<i){Ag[r]=o,Sg[++n]=r;continue}for(a=0,l=n;a<l;)c=a+l>>1,s=t[Sg[c]],-2!==s&&s<i?a=c+1:l=c;s=t[Sg[a]],(i<s||-2===s)&&(a>0&&(Ag[r]=Sg[a-1]),Sg[a]=r)}r=++n;const h=new Int32Array(r);for(i=Sg[n-1];n-- >0;)h[n]=i,i=Ag[i];for(;r-- >0;)Sg[r]=0;return h}(e),w=b.length;let y,x=w-1;for(l=m-1;l>=0;--l)o=f[l],y=f[l+1],o.nodes.link(null!==(i=null==y?void 0:y.nodes)&&void 0!==i?i:p),-2===e[l]?(this.ge?this.forOf.declaration.assign(n,a=Wi.fromParent(v,Ki.create()),this.pe.locator,d[l]):a=Wi.fromParent(v,Ki.create(u,d[l])),Cg(a.overrideContext,l,m),o.setLocation(p),r=o.activate(o,c,n,a),r instanceof Promise&&(null!=s?s:s=[]).push(r)):x<0||1===w||l!==b[x]?(Cg(o.scope.overrideContext,l,m),o.nodes.insertBefore(o.location)):(t!==m&&Cg(o.scope.overrideContext,l,m),--x);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(wg),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}xg.inject=[dd,Du,vu],$l([_l],xg.prototype,"items",void 0),Ah("repeat")(xg);let kg=16,Sg=new Int32Array(kg),Ag=new Int32Array(kg);function Cg(t,e,n){const i=0===e,s=e===n-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=s,t.$middle=!i&&!s,t.$even=r,t.$odd=!r,t.$length=n}class Eg{constructor(t,e){this.id=_e("au$component"),this.id=_e("au$component"),this.view=t.create().setLocation(e)}valueChanged(t,e,n){const i=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(i.isActive&&null!=s)for(r=Wi.fromParent(i.scope,void 0===t?{}:t),a=s.length;a>o;++o)s[o].$bind(2,r)}attaching(t,e,n){const{$controller:i,value:s}=this,r=Wi.fromParent(i.scope,void 0===s?{}:s);return this.view.activate(t,i,n,r)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Eg.inject=[vu,dd],$l([_l],Eg.prototype,"value",void 0),Ah("with")(Eg);let Tg=class{constructor(t,e){this.f=t,this.l=e,this.id=_e("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return this.queue((()=>i.activate(t,s,n,s.scope))),this.queue((()=>this.swap(t,n,this.value))),this.promise}detaching(t,e,n){return this.queue((()=>this.view.deactivate(t,this.$controller,n))),this.promise}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}valueChanged(t,e,n){this.$controller.isActive&&this.queue((()=>this.swap(null,n,this.value)))}caseChanged(t,e){this.queue((()=>this.Re(t,e)))}Re(t,e){const n=t.isMatch(this.value,e),i=this.activeCases,s=i.length;if(!n)return s>0&&i[0].id===t.id?this.Se(null,e):void 0;if(s>0&&i[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,n=e.indexOf(t);for(let t=n,i=e.length;t<i&&o;t++){const n=e[t];r.push(n),o=n.fallThrough}}else r.push(t);return sn(this.Se(null,e,r),(()=>(this.activeCases=r,this.Ee(null,e))))}swap(t,e,n){const i=[];let s=!1;for(const t of this.cases)if((s||t.isMatch(n,e))&&(i.push(t),s=t.fallThrough),i.length>0&&!s)break;const r=this.defaultCase;return 0===i.length&&void 0!==r&&i.push(r),sn(this.activeCases.length>0?this.Se(t,e,i):void 0,(()=>{if(this.activeCases=i,0!==i.length)return this.Ee(t,e)}))}Ee(t,e){const n=this.$controller;if(!n.isActive)return;const i=this.activeCases,s=i.length;if(0===s)return;const r=n.scope;return 1===s?i[0].activate(t,e,r):rn(...i.map((n=>n.activate(t,e,r))))}Se(t,e,n=[]){const i=this.activeCases,s=i.length;if(0!==s){if(1===s){const s=i[0];return n.includes(s)?void 0:(i.length=0,s.deactivate(t,e))}return sn(rn(...i.reduce(((i,s)=>(n.includes(s)||i.push(s.deactivate(t,e)),i)),[])),(()=>{i.length=0}))}}queue(t){const e=this.promise;let n;n=this.promise=sn(sn(e,t),(()=>{this.promise===n&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};$l([_l],Tg.prototype,"value",void 0),Tg=$l([Ah("switch"),Il(0,vu),Il(1,dd)],Tg);let $g=class{constructor(t,e,n,i){this.f=t,this.Be=e,this.l=n,this.id=_e("au$component"),this.fallThrough=!1,this.view=void 0,this.Ie=i.config.level<=1,this.Ut=i.scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,n,i){const s=t.parent,r=null==s?void 0:s.viewModel;if(!(r instanceof Tg))throw new Error("AUR0815");this.$switch=r,this.linkToSwitch(r)}detaching(t,e,n){return this.deactivate(t,n)}isMatch(t,e){this.Ut.debug("isMatch()");const n=this.value;return Array.isArray(n)?(void 0===this.ue&&(this.ue=this.Te(e,n)),n.includes(t)):n===t}valueChanged(t,e,n){var i;Array.isArray(t)?(null===(i=this.ue)||void 0===i||i.unsubscribe(this),this.ue=this.Te(n,t)):void 0!==this.ue&&this.ue.unsubscribe(this),this.$switch.caseChanged(this,n)}handleCollectionChange(t,e){this.$switch.caseChanged(this,e)}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(null!=t?t:i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(null!=t?t:n,this.$controller,e)}dispose(){var t,e;null===(t=this.ue)||void 0===t||t.unsubscribe(this),null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Te(t,e){const n=this.Be.getArrayObserver(e);return n.subscribe(this),n}accept(t){var e;return!0===this.$controller.accept(t)||(null===(e=this.view)||void 0===e?void 0:e.accept(t))}};$g.inject=[vu,nl,dd,pi],$l([_l],$g.prototype,"value",void 0),$l([_l({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:Zs.oneTime})],$g.prototype,"fallThrough",void 0),$g=$l([Ah("case")],$g);let Ig=class extends $g{linkToSwitch(t){if(void 0!==t.defaultCase)throw new Error("AUR0816");t.defaultCase=this}};Ig=$l([Ah("default-case")],Ig);let Rg=class{constructor(t,e,n,i){this.f=t,this.l=e,this.p=n,this.id=_e("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=i.scopeTo("promise.resolve")}link(t,e,n,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,n){const i=this.view,s=this.$controller;return sn(i.activate(t,s,n,this.viewScope=Wi.fromParent(s.scope,{})),(()=>this.swap(t,n)))}valueChanged(t,e,n){this.$controller.isActive&&this.swap(null,n)}swap(t,e){var n,i;const s=this.value;if(!(s instanceof Promise))return void this.logger.warn(`The value '${String(s)}' is not a promise. No change will be done.`);const r=this.p.domWriteQueue,o=this.fulfilled,a=this.rejected,l=this.pending,c=this.viewScope;let h;const u={reusable:!1},d=()=>{rn(h=(this.preSettledTask=r.queueTask((()=>rn(null==o?void 0:o.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==l?void 0:l.activate(t,e,c))),u)).result.catch((t=>{if(!(t instanceof gl))throw t})),s.then((n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>rn(null==l?void 0:l.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==o?void 0:o.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())}),(n=>{if(this.value!==s)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>rn(null==l?void 0:l.deactivate(t,e),null==o?void 0:o.deactivate(t,e),null==a?void 0:a.activate(t,e,c,n))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())})))};1===(null===(n=this.postSettledTask)||void 0===n?void 0:n.status)?this.postSettlePromise.then(d):(null===(i=this.postSettledTask)||void 0===i||i.cancel(),d())}detaching(t,e,n){var i,s;return null===(i=this.preSettledTask)||void 0===i||i.cancel(),null===(s=this.postSettledTask)||void 0===s||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};$l([_l],Rg.prototype,"value",void 0),Rg=$l([Ah("promise"),Il(0,vu),Il(1,dd),Il(2,Ic),Il(3,pi)],Rg);let Og=class{constructor(t,e){this.f=t,this.l=e,this.id=_e("au$component"),this.view=void 0}link(t,e,n,i){Mg(t).pending=this}activate(t,e,n){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};$l([_l({mode:Zs.toView})],Og.prototype,"value",void 0),Og=$l([Ah("pending"),Il(0,vu),Il(1,dd)],Og);let Pg=class{constructor(t,e){this.f=t,this.l=e,this.id=_e("au$component"),this.view=void 0}link(t,e,n,i){Mg(t).fulfilled=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};$l([_l({mode:Zs.fromView})],Pg.prototype,"value",void 0),Pg=$l([Ah("then"),Il(0,vu),Il(1,dd)],Pg);let Lg=class{constructor(t,e){this.f=t,this.l=e,this.id=_e("au$component"),this.view=void 0}link(t,e,n,i){Mg(t).rejected=this}activate(t,e,n,i){this.value=i;let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e,n)}deactivate(t,e){const n=this.view;if(void 0!==n&&n.isActive)return n.deactivate(n,this.$controller,e)}detaching(t,e,n){return this.deactivate(t,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};function Mg(t){const e=t.parent,n=null==e?void 0:e.viewModel;if(n instanceof Rg)return n;throw new Error("AUR0813")}$l([_l({mode:Zs.fromView})],Lg.prototype,"value",void 0),Lg=$l([Ah("catch"),Il(0,vu),Il(1,dd)],Lg);let Ug=class{"promise.resolve"(t,e,n){return new fc(t,e,"promise","bind")}};Ug=$l([bc({pattern:"promise.resolve",symbols:""})],Ug);let Bg=class{then(t,e,n){return new fc(t,e,"then","from-view")}};Bg=$l([bc({pattern:"then",symbols:""})],Bg);let Ng=class{catch(t,e,n){return new fc(t,e,"catch","from-view")}};Ng=$l([bc({pattern:"catch",symbols:""})],Ng);class jg{constructor(t,e,n){this.node=t,this.instructions=e,this.De=n,this.Pe=void 0}get definition(){return void 0===this.Pe&&(this.Pe=Bh.create({name:Wh.generateName(),template:this.node,needsCompile:Kl(this.node),instructions:this.instructions,dependencies:this.De})),this.Pe}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return t.root.get(Cu).getViewFactory(this.definition,t.createChild().register(...this.De))}mergeInto(t,e,n){t.appendChild(this.node),e.push(...this.instructions),n.push(...this.De)}}function Fg(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const o=n[r];switch(typeof o){case"string":e.appendChild(t.document.createTextNode(o));break;case"object":o instanceof t.Node?e.appendChild(o):"mergeInto"in o&&o.mergeInto(e,i,s)}}}function Vg(t,e){const n=e.to;return void 0!==n&&"subject"!==n&&"composing"!==n&&(t[n]=e),t}class Dg{constructor(t,e,n,i){this.p=t,this.$e=e,this.Oe=n,this.r=i,this.id=_e("au$component"),this.component=void 0,this.composing=!1,this.view=void 0,this.Le=void 0,this.qe=e.props.reduce(Vg,{})}attaching(t,e,n){const{component:i,view:s}=this;return void 0===s||this.Le!==i?(this.Le=i,this.composing=!0,this.compose(void 0,i,t,n)):this.compose(s,i,t,n)}detaching(t,e,n){return this.oe(this.view,t,n)}componentChanged(t,e,n){const{$controller:i}=this;if(!i.isActive)return;if(this.Le===t)return;this.Le=t,this.composing=!0,n|=i.flags;const s=sn(this.oe(this.view,null,n),(()=>this.compose(void 0,t,null,n)));s instanceof Promise&&s.catch((t=>{throw t}))}compose(t,e,n,i){return sn(void 0===t?sn(e,(t=>this.Ue(t,i))):t,(t=>this.ne(this.view=t,n,i)))}oe(t,e,n){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,n)}ne(t,e,n){const{$controller:i}=this;return sn(null==t?void 0:t.activate(null!=e?e:t,i,n,i.scope),(()=>{this.composing=!1}))}Ue(t,e){const n=this._e(t,e);if(n)return n.setLocation(this.$controller.location),n.lockScope(this.$controller.scope),n}_e(t,e){if(!t)return;const n=this.Oe.controller.container;if("object"==typeof t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(n);if("create"in t)return t.create();if("template"in t)return this.r.getViewFactory(Bh.getOrCreate(t),n).create()}if(Kl(t)){const e=n.find(Wh,t);if(null==e)throw new Error(`AUR0809:${t}`);t=e.Type}return function(t,e,n,i){if(Kl(e))return function(t,e,n,i){const s=[],r=[],o=[],a=t.document.createElement(e);let l=!1;return n&&Object.keys(n).forEach((t=>{const e=n[t];Ud(e)?(l=!0,s.push(e)):a.setAttribute(t,e)})),l&&(a.className="au",r.push(s)),i&&Fg(t,a,i,r,o),new jg(a,r,o)}(t,e,n,i);if(Wh.isType(e))return function(t,e,n,i){const s=Wh.getDefinition(e),r=[],o=[r],a=[],l=[],c=s.bindables,h=t.document.createElement(s.name);return h.className="au",a.includes(e)||a.push(e),r.push(new Zd(s,void 0,l,null,!1,void 0)),n&&Object.keys(n).forEach((t=>{const e=n[t];Ud(e)?l.push(e):void 0===c[t]?l.push(new _d(e,t)):l.push(new Dd(e,t))})),i&&Fg(t,h,i,o,a),new jg(h,o,a)}(t,e,n,i);throw new Error("Invalid Tag or Type.")}(this.p,t,this.qe,this.$controller.host.childNodes).createView(n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Dg.inject=[Ic,Md,Zu,Cu],$l([_l],Dg.prototype,"component",void 0),$l([_l({mode:Zs.fromView})],Dg.prototype,"composing",void 0),Lh({name:"au-render",template:null,containerless:!0,capture:!0})(Dg);class Zg{constructor(t,e,n,i,s,r,o){this.c=t,this.parent=e,this.host=n,this.l=i,this.p=s,this.scopeBehavior="auto",this.Fe=void 0,this.r=t.get(Cu),this.$e=r,this.Ve=o}static get inject(){return[An,Du,hd,dd,Ic,Md,In(qg)]}get pending(){return this.Me}get composition(){return this.Fe}attaching(t,e,n){return this.Me=sn(this.queue(new Hg(this.view,this.viewModel,this.model,void 0),t),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)}))}detaching(t){const e=this.Fe,n=this.Me;return this.Ve.invalidate(),this.Fe=this.Me=void 0,sn(n,(()=>null==e?void 0:e.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Fe?this.Me=sn(this.Me,(()=>sn(this.queue(new Hg(this.view,this.viewModel,this.model,t),void 0),(t=>{this.Ve.isCurrent(t)&&(this.Me=void 0)})))):this.Fe.update(this.model)}queue(t,e){const n=this.Ve,i=this.Fe;return sn(n.create(t),(t=>n.isCurrent(t)?sn(this.compose(t),(s=>n.isCurrent(t)?sn(s.activate(e),(()=>n.isCurrent(t)?(this.Fe=s,sn(null==i?void 0:i.deactivate(e),(()=>t))):sn(s.controller.deactivate(s.controller,this.$controller,4),(()=>(s.controller.dispose(),t))))):(s.controller.dispose(),t))):t))}compose(t){let e,n,i;const{view:s,viewModel:r,model:o}=t.change,{c:a,host:l,$controller:c,l:h}=this,u=this.getDef(r),d=a.createChild(),p=null==h?l.parentNode:h.parentNode;if(null!==u){if(u.containerless)throw new Error("AUR0806");null==h?(n=l,i=()=>{}):(n=p.insertBefore(this.p.document.createElement(u.name),h),i=()=>{n.remove()}),e=this.getVm(d,r,n)}else n=null==h?l:h,e=this.getVm(d,r,n);const f=()=>{if(null!==u){const s=Ru.$el(d,e,n,{projections:this.$e.projections},u);return new Qg(s,(t=>s.activate(null!=t?t:s,c,2,c.scope.parentScope)),(t=>sn(s.deactivate(null!=t?t:s,c,4),i)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}{const i=Bh.create({name:Wh.generateName(),template:s}),r=this.r.getViewFactory(i,d),o=Ru.$view(r,c),a="auto"===this.scopeBehavior?Wi.fromParent(this.parent.scope,e):Wi.create(e);return md(n)?o.setLocation(n):o.setHost(n),new Qg(o,(t=>o.activate(null!=t?t:o,c,2,a)),(t=>o.deactivate(null!=t?t:o,c,4)),(t=>{var n;return null===(n=e.activate)||void 0===n?void 0:n.call(e,t)}),t)}};return"activate"in e?sn(e.activate(o),(()=>f())):f()}getVm(t,e,n){if(null==e)return new zg;if("object"==typeof e)return e;const i=this.p,s=md(n);t.registerResolver(i.Element,t.registerResolver(hd,new Yn("ElementResolver",s?null:n))),t.registerResolver(dd,new Yn("IRenderLocation",s?n:null));const r=t.invoke(e);return t.registerResolver(e,new Yn("au-compose.viewModel",r)),r}getDef(t){const e=Hl(t)?t:null==t?void 0:t.constructor;return Wh.isType(e)?Wh.getDefinition(e):null}}$l([_l],Zg.prototype,"view",void 0),$l([_l],Zg.prototype,"viewModel",void 0),$l([_l],Zg.prototype,"model",void 0),$l([_l({set:t=>{if("scoped"===t||"auto"===t)return t;throw new Error("AUR0805")}})],Zg.prototype,"scopeBehavior",void 0),Lh("au-compose")(Zg);class zg{}class qg{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return sn(t.load(),(t=>new Wg(++this.id,t)))}invalidate(){this.id++}}class Hg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}load(){return ql(this.view)||ql(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new Kg(t,e,this.model,this.src))):new Kg(this.view,this.viewModel,this.model,this.src)}}class Kg{constructor(t,e,n,i){this.view=t,this.viewModel=e,this.model=n,this.src=i}}class Wg{constructor(t,e){this.id=t,this.change=e}}class Qg{constructor(t,e,n,i,s){this.controller=t,this.start=e,this.stop=n,this.update=i,this.context=s,this.state=0}activate(t){if(0!==this.state)throw new Error(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw new Error("AUR0808");default:this.state=-1}}}class _g{constructor(t,e,n,i){var s,r;let o;this.je=null,this.Ne=null;const a=e.auSlot,l=null===(r=null===(s=n.instruction)||void 0===s?void 0:s.projections)||void 0===r?void 0:r[a.name];null==l?(o=i.getViewFactory(a.fallback,n.controller.container),this.We=!1):(o=i.getViewFactory(l,n.parent.controller.container),this.We=!0),this.Oe=n,this.view=o.create().setLocation(t)}static get inject(){return[dd,Md,Zu,Cu]}binding(t,e,n){var i;let s;this.je=this.$controller.scope.parentScope,this.We&&(s=this.Oe.controller.scope.parentScope,(this.Ne=Wi.fromParent(s,s.bindingContext)).overrideContext.$host=null!==(i=this.expose)&&void 0!==i?i:this.je.bindingContext)}attaching(t,e,n){return this.view.activate(t,this.$controller,n,this.We?this.Ne:this.je)}detaching(t,e,n){return this.view.deactivate(t,this.$controller,n)}exposeChanged(t){this.We&&null!=this.Ne&&(this.Ne.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}$l([_l],_g.prototype,"expose",void 0),Lh({name:"au-slot",template:null,containerless:!0})(_g);const Gg=xn.createInterface("ISanitizer",(t=>t.singleton(class{sanitize(){throw new Error('"sanitize" method not implemented')}})));let Xg=class{constructor(t){this.He=t}toView(t){return null==t?null:this.He.sanitize(t)}};Xg=$l([Il(0,Gg)],Xg),rs("sanitize")(Xg);let Yg=class{constructor(t){this.ze=t}toView(t,e){return this.ze.getViewComponentForObject(t,e)}};Yg=$l([Il(0,Su)],Yg),rs("view")(Yg);const Jg=Ff,tv=Uf,ev=Bf,nv=Nf,iv=Vf,sv=Df,rv=jf,ov=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return Xn.singleton(ep,this).register(t)}compile(t,e,n){var i,s,r,o;const a=Bh.getOrCreate(t);if(null===a.template||void 0===a.template)return a;if(!1===a.needsCompile)return a;null!=n||(n=gf);const l=new df(t,e,n,null,null,void 0),c=Kl(a.template)||!t.enhance?l.ni.createTemplate(a.template):a.template,h="TEMPLATE"===c.nodeName&&null!=c.content,u=h?c.content:c,d=e.get(function(t){function e(t,n,i){xn.inject(e)(t,n,i)}return e.$isResolver=!0,e.resolve=function(e,n){return n.root===n?n.getAll(t,!1):n.has(t,!1)?n.getAll(t,!1).concat(n.root.getAll(t,!1)):n.root.getAll(t,!1)},e}(Tf)),p=d.length;let f=0;if(p>0)for(;p>f;)null===(s=(i=d[f]).compiling)||void 0===s||s.call(i,c),++f;if(c.hasAttribute(Af))throw new Error("AUR0701");return this.ri(u,l),this.oi(u,l),Bh.create({...t,name:t.name||Of(),dependencies:(null!==(r=t.dependencies)&&void 0!==r?r:ni).concat(null!==(o=l.deps)&&void 0!==o?o:ni),instructions:l.rows,surrogates:h?this.li(c,l):ni,template:c,hasSlots:l.hasSlot,needsCompile:!1})}compileSpread(t,e,n,i){var s;const r=new df(t,n,gf,null,null,void 0),o=[],a=r.hi(i.nodeName.toLowerCase()),l=null!==a,c=r.ep,h=e.length;let u,d,p,f,g,v,m,b,w,y,x=0,k=null,S=null;for(;h>x;++x)if(u=e[x],w=u.target,y=u.rawValue,S=r.ai(u),null!==S&&(1&S.type)>0)mf.node=i,mf.attr=u,mf.bindable=null,mf.def=null,o.push(S.build(mf));else if(k=r.ui(w),null===k)if(null===S){if(m=c.parse(y,1),l&&(f=xf.from(a,!1),g=f.attrs[w],void 0!==g)){m=c.parse(y,1),o.push(new tp(null==m?new Dd(y,g.property):new Bd(m,g.property)));continue}if(null!=m)o.push(new Bd(m,null!==(s=r.m.map(i,w))&&void 0!==s?s:qe(w)));else switch(w){case"class":o.push(new Gd(y));break;case"style":o.push(new Xd(y));break;default:o.push(new _d(y,w))}}else{if(l&&(f=xf.from(a,!1),g=f.attrs[w],void 0!==g)){mf.node=i,mf.attr=u,mf.bindable=g,mf.def=a,o.push(new tp(S.build(mf)));continue}mf.node=i,mf.attr=u,mf.bindable=null,mf.def=null,o.push(S.build(mf))}else{if(k.isTemplateController)throw new Error(`AUR0703:${w}`);f=xf.from(k,!0),b=!1===k.noMultiBindings&&null===S&&pf(y),b?p=this.fi(i,y,k,r):(v=f.primary,null===S?(m=c.parse(y,1),p=[null===m?new Dd(y,v.property):new Bd(m,v.property)]):(mf.node=i,mf.attr=u,mf.bindable=v,mf.def=k,p=[S.build(mf)])),(null!=d?d:d=[]).push(new zd(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(w)?w:void 0,p))}return ff(),null!=d?d.concat(o):o}li(t,e){var n;const i=[],s=t.attributes,r=e.ep;let o,a,l,c,h,u,d,p,f,g,v,m,b=s.length,w=0,y=null,x=null;for(;b>w;++w){if(o=s[w],a=o.name,l=o.value,c=e.di.parse(a,l),v=c.target,m=c.rawValue,bf[v])throw new Error(`AUR0702:${a}`);if(x=e.ai(c),null!==x&&(1&x.type)>0)mf.node=t,mf.attr=c,mf.bindable=null,mf.def=null,i.push(x.build(mf));else if(y=e.ui(v),null===y)if(null===x)if(f=r.parse(m,1),null!=f)t.removeAttribute(a),--w,--b,i.push(new Bd(f,null!==(n=e.m.map(t,v))&&void 0!==n?n:qe(v)));else switch(a){case"class":i.push(new Gd(m));break;case"style":i.push(new Xd(m));break;default:i.push(new _d(m,a))}else mf.node=t,mf.attr=c,mf.bindable=null,mf.def=null,i.push(x.build(mf));else{if(y.isTemplateController)throw new Error(`AUR0703:${v}`);d=xf.from(y,!0),g=!1===y.noMultiBindings&&null===x&&pf(m),g?u=this.fi(t,m,y,e):(p=d.primary,null===x?(f=r.parse(m,1),u=[null===f?new Dd(m,p.property):new Bd(f,p.property)]):(mf.node=t,mf.attr=c,mf.bindable=p,mf.def=y,u=[x.build(mf)])),t.removeAttribute(a),--w,--b,(null!=h?h:h=[]).push(new zd(this.resolveResources?y:y.name,null!=y.aliases&&y.aliases.includes(v)?v:void 0,u))}}return ff(),null!=h?h.concat(i):i}oi(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.mi(t,e):this.vi(t,e);case 3:return this.gi(t,e);case 11:{let n=t.firstChild;for(;null!==n;)n=this.oi(n,e);break}}return t.nextSibling}mi(t,e){const n=t.attributes,i=n.length,s=[],r=e.ep;let o,a,l,c,h,u,d,p,f=!1,g=0;for(;i>g;++g)if(o=n[g],l=o.name,c=o.value,"to-binding-context"!==l){if(a=e.di.parse(l,c),u=a.target,d=a.rawValue,h=e.ai(a),null!==h)switch(h.name){case"to-view":case"bind":s.push(new Kd(r.parse(d,8),qe(u)));continue;default:throw new Error(`AUR0704:${a.command}`)}p=r.parse(d,1),s.push(new Kd(null===p?new Es(d):p,qe(u)))}else f=!0;return e.rows.push([new Hd(s,f)]),this.pi(t).nextSibling}vi(t,e){var n,i,s,r,o,a,l,c,h,u;const d=t.nextSibling,p=(null!==(n=t.getAttribute("as-element"))&&void 0!==n?n:t.nodeName).toLowerCase(),f=e.hi(p),g=null!==f,v=g&&null!=f.shadowOptions,m=!!(null==f?void 0:f.capture),b=m?[]:ni,w=e.ep,y=this.debug?si:()=>{t.removeAttribute(S),--Z,--D};let x,k,S,A,C,E,T,$,I,R,O,P,L,M,U,B,N,j,F,V=t.attributes,D=V.length,Z=0,z=null,q=!1,H=null,K=!0,W=!1;if("slot"===p){if(null==e.root.def.shadowOptions)throw new Error(`AUR0717:${e.root.def.name}`);e.root.hasSlot=!0}if(g&&(K=null===(i=f.processContent)||void 0===i?void 0:i.call(f.Type,t,e.p),V=t.attributes,D=V.length),e.root.def.enhance&&t.classList.contains("au"))throw new Error("AUR0705");for(;D>Z;++Z){switch(k=V[Z],S=k.name,A=k.value,S){case"as-element":case"containerless":y(),W||(W="containerless"===S);continue}if(C=e.di.parse(S,A),H=e.ai(C),N=C.target,j=C.rawValue,m){if(null!=H&&1&H.type){y(),b.push(C);continue}if("au-slot"!==N&&(U=xf.from(f,!1),null==U.attrs[N]&&!(null===(s=e.ui(N))||void 0===s?void 0:s.isTemplateController))){y(),b.push(C);continue}}if(null!==H&&1&H.type)mf.node=t,mf.attr=C,mf.bindable=null,mf.def=null,(null!=E?E:E=[]).push(H.build(mf)),y();else if(z=e.ui(N),null===z)if(null!==H)y(),g&&(U=xf.from(f,!1),$=U.attrs[N],void 0!==$)?(mf.node=t,mf.attr=C,mf.bindable=$,mf.def=f,(null!=T?T:T=[]).push(H.build(mf))):(mf.node=t,mf.attr=C,mf.bindable=null,mf.def=null,(null!=E?E:E=[]).push(H.build(mf)));else{if(g&&(U=xf.from(f,!1),$=U.attrs[N],void 0!==$)){L=w.parse(j,1),(null!=T?T:T=[]).push(null==L?new Dd(j,$.property):new Bd(L,$.property)),y();continue}L=w.parse(j,1),null!=L&&(y(),(null!=E?E:E=[]).push(new Bd(L,null!==(r=e.m.map(t,N))&&void 0!==r?r:qe(N))))}else U=xf.from(z,!0),q=!1===z.noMultiBindings&&null===H&&pf(j),q?R=this.fi(t,j,z,e):(B=U.primary,null===H?(L=w.parse(j,1),R=[null===L?new Dd(j,B.property):new Bd(L,B.property)]):(mf.node=t,mf.attr=C,mf.bindable=B,mf.def=z,R=[H.build(mf)])),y(),z.isTemplateController?(null!=O?O:O=[]).push(new qd(vf,this.resolveResources?z:z.name,void 0,R)):(null!=I?I:I=[]).push(new zd(this.resolveResources?z:z.name,null!=z.aliases&&z.aliases.includes(N)?N:void 0,R))}if(ff(),this.wi(t)&&null!=E&&E.length>1&&this.bi(t,E),g&&(M=new Zd(this.resolveResources?f:f.name,void 0,null!=T?T:ni,null,W,b),p===Lf)){const n=t.getAttribute("name")||Pf,i=e.h("template"),s=e.xi();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?t.removeChild(r):i.content.appendChild(r),r=t.firstChild;this.oi(i.content,s),M.auSlot={name:n,fallback:Bh.create({name:Of(),template:i,instructions:s.rows,needsCompile:!1})},t=this.yi(t,e)}if(null==E&&null==M&&null==I||(x=ni.concat(null!=M?M:ni,null!=I?I:ni,null!=E?E:ni),this.pi(t)),null!=O){let n;D=O.length-1,Z=D,P=O[Z],this.yi(t,e),"TEMPLATE"===t.nodeName?n=t:(n=e.h("template"),n.content.appendChild(t));const i=n,s=e.xi(null==x?[]:[x]);let r,a,h,u,d,m,b,w,y=0,k=0,S=t.firstChild,A=!1;if(!1!==K)for(;null!==S;)if(a=1===S.nodeType?S.getAttribute(Lf):null,null!==a&&S.removeAttribute(Lf),g)r=S.nextSibling,v||(A=3===S.nodeType&&""===S.textContent.trim(),A||(null!==(o=(l=null!=u?u:u={})[c=a||Pf])&&void 0!==o?o:l[c]=[]).push(S),t.removeChild(S)),S=r;else{if(null!==a)throw a=a||Pf,new Error(`AUR0706:${p}[${a}]`);S=S.nextSibling}if(null!=u){for(a in h={},u){for(n=e.h("template"),d=u[a],y=0,k=d.length;k>y;++y)m=d[y],"TEMPLATE"===m.nodeName?m.attributes.length>0?n.content.appendChild(m):n.content.appendChild(m.content):n.content.appendChild(m);w=e.xi(),this.oi(n.content,w),h[a]=Bh.create({name:Of(),template:n,instructions:w.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=h}if(g&&(W||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!W&&!1!==K,F)if("TEMPLATE"===t.nodeName)this.oi(t.content,s);else for(S=t.firstChild;null!==S;)S=this.oi(S,s);for(P.def=Bh.create({name:Of(),template:i,instructions:s.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});Z-- >0;)P=O[Z],n=e.h("template"),b=e.h("au-m"),b.classList.add("au"),n.content.appendChild(b),P.def=Bh.create({name:Of(),template:n,needsCompile:!1,instructions:[[O[Z+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([P])}else{null!=x&&e.rows.push(x);let n,i,s,r,o,l,c,d=t.firstChild,m=null,b=!1,w=0,y=0;if(!1!==K)for(;null!==d;)if(i=1===d.nodeType?d.getAttribute(Lf):null,null!==i&&d.removeAttribute(Lf),g)n=d.nextSibling,v||(b=3===d.nodeType&&""===d.textContent.trim(),b||(null!==(a=(h=null!=s?s:s={})[u=i||Pf])&&void 0!==a?a:h[u]=[]).push(d),t.removeChild(d)),d=n;else{if(null!==i)throw i=i||Pf,new Error(`AUR0706:${p}[${i}]`);d=d.nextSibling}if(null!=s){for(i in m={},s){for(l=e.h("template"),r=s[i],w=0,y=r.length;y>w;++w)o=r[w],"TEMPLATE"===o.nodeName?o.attributes.length>0?l.content.appendChild(o):l.content.appendChild(o.content):l.content.appendChild(o);c=e.xi(),this.oi(l.content,c),m[i]=Bh.create({name:Of(),template:l,instructions:c.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}M.projections=m}if(g&&(W||f.containerless)&&this.yi(t,e),F=!g||!f.containerless&&!W&&!1!==K,F&&t.childNodes.length>0)for(d=t.firstChild;null!==d;)d=this.oi(d,e)}return d}gi(t,e){let n="",i=t;for(;null!==i&&3===i.nodeType;)n+=i.textContent,i=i.nextSibling;const s=e.ep.parse(n,1);if(null===s)return i;const r=t.parentNode;for(r.insertBefore(this.pi(e.h("au-m")),t),e.rows.push([new Wd(s,!!e.def.isStrictBinding)]),t.textContent="",i=t.nextSibling;null!==i&&3===i.nodeType;)r.removeChild(i),i=t.nextSibling;return t.nextSibling}fi(t,e,n,i){const s=xf.from(n,!0),r=e.length,o=[];let a,l,c,h,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){l=e.slice(p,g);break}if(void 0===l&&(l=e.slice(p)),h=i.di.parse(a,l),u=i.ai(h),d=s.attrs[h.target],null==d)throw new Error(`AUR0707:${n.name}.${h.target}`);for(null===u?(c=i.ep.parse(l,1),o.push(null===c?new Dd(l,d.property):new Bd(c,d.property))):(mf.node=t,mf.attr=h,mf.bindable=d,mf.def=n,o.push(u.build(mf)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,l=void 0}return ff(),o}ri(t,e){var n,i;const s=t,r=We(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===s.childElementCount)throw new Error("AUR0708");const a=new Set,l=[];for(const t of r){if(t.parentNode!==s)throw new Error("AUR0709");const n=Cf(t,a),i=class{},r=t.content,o=We(r.querySelectorAll("bindable")),c=Yl.for(i),h=new Set,u=new Set;for(const t of o){if(t.parentNode!==r)throw new Error("AUR0710");const e=t.getAttribute("property");if(null===e)throw new Error("AUR0711");const n=t.getAttribute("attribute");if(null!==n&&u.has(n)||h.has(e))throw new Error(`AUR0712:${e}+${n}`);null!==n&&u.add(n),h.add(e),c.add({property:e,attribute:null!=n?n:void 0,mode:Ef(t)}),t.getAttributeNames().filter((t=>!Sf.includes(t))).length,r.removeChild(t)}l.push(i),e.ki(Wh.define({name:n,template:t},i)),s.removeChild(t)}let c=0;const h=l.length;for(;h>c;++c)Wh.getDefinition(l[c]).dependencies.push(...null!==(n=e.def.dependencies)&&void 0!==n?n:ni,...null!==(i=e.deps)&&void 0!==i?i:ni)}wi(t){return"INPUT"===t.nodeName&&1===wf[t.type]}bi(t,e){if("INPUT"===t.nodeName){const t=e;let n,i,s,r=0;for(let e=0;e<t.length&&r<3;e++)switch(s=t[e],s.to){case"model":case"value":case"matcher":n=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==n&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}pi(t){return t.classList.add("au"),t}yi(t,e){const n=t.parentNode,i=e.h("au-m");return this.pi(n.insertBefore(i,t)),n.removeChild(t),i}},hg],av=[Cc,Ac,$c],lv=[Xp,Wp,_p,Qp,Gp,Yp,Jp,af,tf,ef,nf,of,rf,sf,lf],cv=[Jg,tv,ev,nv,iv,sv,rv,Xg,Yg,vg,mg,bg,xg,Eg,Tg,$g,Ig,Rg,Og,Pg,Lg,Ug,Bg,Ng,zf,Hf,dg,Dg,Zg,gg,pg,fg,_g],hv=[fp,gp,up,dp,pp,op,ap,lp,cp,hp,kp,Tp,Sp,Ap,Cp,Ep,wp,$p],uv=function t(e){return{optionsProvider:e,register(t){const n={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(n),t.register(Xn.instance(Ds,n.coercingOptions),...ov,...cv,...av,...lv,...hv)},customize:n=>t(null!=n?n:e)}}(si),dv=xn.createInterface("IAurelia");var pv;!function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(pv||(pv={}));const fv=xn.createInterface("IDialogService"),gv=xn.createInterface("IDialogController"),vv=xn.createInterface("IDialogDomRenderer"),mv=xn.createInterface("IDialogDom"),bv=xn.createInterface("IDialogGlobalSettings");class wv{constructor(t,e){this.wasCancelled=t,this.dialog=e}static create(t,e){return new wv(t,e)}}class yv{constructor(t,e){this.status=t,this.value=e}static create(t,e){return new yv(t,e)}}var xv;!function(t){t.Ok="ok",t.Error="error",t.Cancel="cancel",t.Abort="abort"}(xv||(xv={}));class kv{constructor(t,e){this.p=t,this.ctn=e,this.closed=new Promise(((t,e)=>{this.Pt=t,this.St=e}))}static get inject(){return[Ic,An]}activate(t){var e;const n=this.ctn.createChild(),{model:i,template:s,rejectOnCancel:r}=t,o=n.get(vv),a=null!==(e=t.host)&&void 0!==e?e:this.p.document.body,l=this.dom=o.render(a,t),c=n.has(ud,!0)?n.get(ud):null,h=l.contentHost;return this.settings=t,null!=c&&c.contains(a)||n.register(Xn.instance(ud,a)),n.register(Xn.instance(hd,h),Xn.instance(mv,l)),new Promise((e=>{var s,r;const o=Object.assign(this.cmp=this.getOrCreateVm(n,t,h),{$dialog:this});e(null===(r=null===(s=o.canActivate)||void 0===s?void 0:s.call(o,i))||void 0===r||r)})).then((e=>{var o;if(!0!==e){if(l.dispose(),r)throw Av(null,"Dialog activation rejected");return wv.create(!0,this)}const a=this.cmp;return sn(null===(o=a.activate)||void 0===o?void 0:o.call(a,i),(()=>{var e;const i=this.controller=Ru.$el(n,a,h,null,Bh.create(null!==(e=this.getDefinition(a))&&void 0!==e?e:{name:Wh.generateName(),template:s}));return sn(i.activate(i,null,2),(()=>{var e;return l.overlay.addEventListener(null!==(e=t.mouseEvent)&&void 0!==e?e:"click",this),wv.create(!1,this)}))}))}),(t=>{throw l.dispose(),t}))}deactivate(t,e){if(this.es)return this.es;let n=!0;const{controller:i,dom:s,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,l=yv.create(t,e),c=new Promise((c=>{var h,u;c(sn(null===(u=null===(h=r.canDeactivate)||void 0===h?void 0:h.call(r,l))||void 0===u||u,(c=>{var h;if(!0!==c){if(n=!1,this.es=void 0,a)throw Av(null,"Dialog cancellation rejected");return yv.create("abort")}return sn(null===(h=r.deactivate)||void 0===h?void 0:h.call(r,l),(()=>sn(i.deactivate(i,null,4),(()=>(s.dispose(),s.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===t?this.St(Av(e,"Dialog cancelled with a rejection on cancel")):this.Pt(l),l)))))})))})).catch((t=>{throw this.es=void 0,t}));return this.es=n?c:void 0,c}ok(t){return this.deactivate("ok",t)}cancel(t){return this.deactivate("cancel",t)}error(t){const e=function(t){const e=new Error;return e.wasCancelled=!1,e.value=t,e}(t);return new Promise((t=>{var n,i;return t(sn(null===(i=(n=this.cmp).deactivate)||void 0===i?void 0:i.call(n,yv.create("error",e)),(()=>sn(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.St(e)})))))}))}handleEvent(t){this.settings.overlayDismiss&&!this.dom.contentHost.contains(t.target)&&this.cancel()}getOrCreateVm(t,e,n){const i=e.component;if(null==i)return new Sv;if("object"==typeof i)return i;const s=this.p;return t.registerResolver(s.HTMLElement,t.registerResolver(s.Element,t.registerResolver(hd,new Yn("ElementResolver",n)))),t.invoke(i)}getDefinition(t){const e=Hl(t)?t:null==t?void 0:t.constructor;return Wh.isType(e)?Wh.getDefinition(e):null}}class Sv{}function Av(t,e){const n=new Error(e);return n.wasCancelled=!0,n.value=t,n}class Cv{static from(...t){return Object.assign(new Cv,...t).ls().os()}load(){const t=this,e=this.component,n=this.template,i=rn(null==e?void 0:sn(e(),(e=>{t.component=e})),Hl(n)?sn(n(),(e=>{t.template=e})):void 0);return i instanceof Promise?i.then((()=>t)):t}ls(){if(null==this.component&&null==this.template)throw new Error("AUR0903");return this}os(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function Ev(t,e){return this.then((n=>n.dialog.closed.then(t,e)),e)}const Tv="position:absolute;width:100%;height:100%;top:0;left:0;";class $v{constructor(t){this.p=t,this.wrapperCss=`${Tv} display:flex;`,this.overlayCss=Tv,this.hostCss="position:relative;margin:auto;"}static register(t){Xn.singleton(vv,this).register(t)}render(t){const e=this.p.document,n=(t,n)=>{const i=e.createElement(t);return i.style.cssText=n,i},i=t.appendChild(n("au-dialog-container",this.wrapperCss)),s=i.appendChild(n("au-dialog-overlay",this.overlayCss)),r=i.appendChild(n("div",this.hostCss));return new Iv(i,s,r)}}$v.inject=[Ic];class Iv{constructor(t,e,n){this.wrapper=t,this.overlay=e,this.contentHost=n}dispose(){this.wrapper.remove()}}function Rv(t,e){return{settingsProvider:t,register:n=>n.register(...e,uh.beforeCreate((()=>t(n.get(bv))))),customize:(t,n)=>Rv(t,null!=n?n:e)}}Rv((()=>{throw new Error("AUR0904")}),[class{static register(t){t.register(Xn.singleton(bv,this))}}]);const Ov=Rv(si,[class{constructor(t,e,n){this.ft=t,this.p=e,this.ss=n,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const t=this.dlgs;return t.length>0?t[t.length-1]:null}static get inject(){return[An,Ic,bv]}static register(t){t.register(Xn.singleton(fv,this),uh.beforeDeactivate(fv,(t=>sn(t.closeAll(),(t=>{if(t.length>0)throw new Error(`AUR0901:${t.length}`)})))))}open(t){return function(t){return t.whenClosed=Ev,t}(new Promise((e=>{var n;const i=Cv.from(this.ss,t),s=null!==(n=i.container)&&void 0!==n?n:this.ft.createChild();e(sn(i.load(),(t=>{const e=s.invoke(kv);return s.register(Xn.instance(gv,e)),s.register(Xn.callback(kv,(()=>{throw new Error("AUR0902")}))),sn(e.activate(t),(t=>{if(!t.wasCancelled){1===this.dlgs.push(e)&&this.p.window.addEventListener("keydown",this);const t=()=>this.remove(e);e.closed.then(t,t)}return t}))})))})))}closeAll(){return Promise.all(Array.from(this.dlgs).map((t=>t.settings.rejectOnCancel?t.cancel().then((()=>null)):t.cancel().then((e=>"cancel"===e.status?null:t))))).then((t=>t.filter((t=>!!t))))}remove(t){const e=this.dlgs,n=e.indexOf(t);n>-1&&this.dlgs.splice(n,1),0===e.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(t){const e=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(t);if(null==e)return;const n=this.top;if(null===n||0===n.settings.keyboard.length)return;const i=n.settings.keyboard;"Escape"===e&&i.includes(e)?n.cancel():"Enter"===e&&i.includes(e)&&n.ok()}},class{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(t){Xn.singleton(bv,this).register(t)}},$v]);xn.createInterface((t=>t.singleton(Pv)));class Pv{constructor(t,e,n){this.ctn=t,this.p=e,this.r=n}define(t,e,n){if(!t.includes("-"))throw new Error('Invalid web-components custom element name. It must include a "-"');let i;if(null==e)throw new Error("Invalid custom element definition");if(i="function"==typeof e?Wh.isType(e)?Wh.getDefinition(e):Bh.create(Wh.generateName(),e):Bh.getOrCreate(e),i.containerless)throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");const s=(null==n?void 0:n.extends)?this.p.document.createElement(n.extends).constructor:HTMLElement,r=this.ctn,o=this.r,a=i.bindables,l=this.p;class c extends s{auInit(){if(this.auInited)return;this.auInited=!0;const t=r.createChild();t.registerResolver(l.HTMLElement,t.registerResolver(l.Element,t.registerResolver(hd,new Yn("ElementProvider",this))));const e=o.compile(i,t,{projections:null}),n=t.invoke(e.Type),s=this.auCtrl=Ru.$el(t,n,this,null,e);cd(this,e.key,s)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null,0)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null,0)}adoptedCallback(){this.auInit()}attributeChangedCallback(t,e,n){this.auInit(),this.auCtrl.viewModel[t]=n}}c.observedAttributes=Object.keys(a);for(const t in a)Object.defineProperty(c.prototype,t,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[t]},set(e){this.auInited||this.auInit(),this.auCtrl.viewModel[t]=e}});return this.p.customElements.define(t,c,n),c}}Pv.inject=[An,Ic,Cu];const Lv=Tl.getOrCreate(globalThis);class Mv extends class{constructor(t=xn.createContainer()){if(this.container=t,this.ir=!1,this.Ge=!1,this.Xe=!1,this.Ke=void 0,this.next=void 0,this.Ye=void 0,this.Ze=void 0,t.has(dv,!0))throw new Error("AUR0768");t.registerResolver(dv,new Yn("IAurelia",this)),t.registerResolver(id,this.Je=new Yn("IAppRoot"))}get isRunning(){return this.ir}get isStarting(){return this.Ge}get isStopping(){return this.Xe}get root(){if(null==this.Ke){if(null==this.next)throw new Error("AUR0767");return this.next}return this.Ke}register(...t){return this.container.register(...t),this}app(t){return this.next=new od(t,this.Qe(t.host),this.container,this.Je),this}enhance(t,e){var n;const i=null!==(n=t.container)&&void 0!==n?n:this.container.createChild(),s=t.host,r=this.Qe(s),o=t.component;let a;Hl(o)?(i.registerResolver(r.HTMLElement,i.registerResolver(r.Element,i.registerResolver(hd,new Yn("ElementResolver",s)))),a=i.invoke(o)):a=o,i.registerResolver(ud,new Yn("IEventTarget",s)),e=null!=e?e:null;const l=Ru.$el(i,a,s,null,Bh.create({name:Wh.generateName(),template:s,enhance:!0}));return sn(l.activate(l,e,2),(()=>l))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}Qe(t){let e;if(this.container.has(Ic,!1))e=this.container.get(Ic);else{if(null===t.ownerDocument.defaultView)throw new Error("AUR0769");e=new Tl(t.ownerDocument.defaultView),this.container.register(Xn.instance(Ic,e))}return e}start(t=this.next){if(null==t)throw new Error("AUR0770");return this.Ye instanceof Promise?this.Ye:this.Ye=sn(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.Je.prepare(this.Ke=t),this.Ge=!0,sn(t.activate(),(()=>{this.ir=!0,this.Ge=!1,this.Ye=void 0,this.ts(t,"au-started",t.host)})))))}stop(t=!1){if(this.Ze instanceof Promise)return this.Ze;if(!0===this.ir){const e=this.Ke;return this.ir=!1,this.Xe=!0,this.Ze=sn(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.Ke=void 0,this.Je.dispose(),this.Xe=!1,this.ts(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.Xe)throw new Error("AUR0771");this.container.dispose()}ts(t,e,n){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});n.dispatchEvent(i)}}{constructor(t=function(){return xn.createContainer().register(Xn.instance(Ic,Lv),uv)}()){super(t)}static start(t){return(new Mv).start(t)}static app(t){return(new Mv).app(t)}static enhance(t,e){return(new Mv).enhance(t,e)}static register(...t){return(new Mv).register(...t)}app(t){if(Wh.isType(t)){const e=Wh.getDefinition(t);let n=document.querySelector(e.name);return null===n&&(n=document.body),super.app({host:n,component:t})}return super.app(t)}}var Uv=function(t,e){return Uv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Uv(t,e)};function Bv(t,e){function n(){this.constructor=t}Uv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Nv(t){return"function"==typeof t}var jv=!1,Fv={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,jv=t},get useDeprecatedSynchronousErrorHandling(){return jv}};function Vv(t){setTimeout((function(){throw t}),0)}var Dv={closed:!0,next:function(t){},error:function(t){if(Fv.useDeprecatedSynchronousErrorHandling)throw t;Vv(t)},complete:function(){}},Zv=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function zv(t){return null!==t&&"object"==typeof t}var qv=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Hv=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,i=n._parentOrParents,s=n._ctorUnsubscribe,r=n._unsubscribe,o=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(var a=0;a<i.length;++a)i[a].remove(this);if(Nv(r)){s&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof qv?Kv(t.errors):[t]}}if(Zv(o)){a=-1;for(var l=o.length;++a<l;){var c=o[a];if(zv(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof qv?e=e.concat(Kv(t.errors)):e.push(t)}}}if(e)throw new qv(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=n._parentOrParents;if(null===s)n._parentOrParents=this;else if(s instanceof t){if(s===this)return n;n._parentOrParents=[s,this]}else{if(-1!==s.indexOf(this))return n;s.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Kv(t){return t.reduce((function(t,e){return t.concat(e instanceof qv?e.errors:e)}),[])}var Wv=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Qv=function(t){function e(n,i,s){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=Dv;break;case 1:if(!n){r.destination=Dv;break}if("object"==typeof n){n instanceof e?(r.syncErrorThrowable=n.syncErrorThrowable,r.destination=n,n.add(r)):(r.syncErrorThrowable=!0,r.destination=new _v(r,n));break}default:r.syncErrorThrowable=!0,r.destination=new _v(r,n,i,s)}return r}return Bv(e,t),e.prototype[Wv]=function(){return this},e.create=function(t,n,i){var s=new e(t,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Hv),_v=function(t){function e(e,n,i,s){var r,o=t.call(this)||this;o._parentSubscriber=e;var a=o;return Nv(n)?r=n:n&&(r=n.next,i=n.error,s=n.complete,n!==Dv&&(Nv((a=Object.create(n)).unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=r,o._error=i,o._complete=s,o}return Bv(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Fv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=Fv.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Vv(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Vv(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};Fv.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Fv.useDeprecatedSynchronousErrorHandling)throw t;Vv(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!Fv.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return Fv.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Vv(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Qv),Gv=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Xv(t){return t}function Yv(t){return 0===t.length?Xv:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Jv=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,s=function(t,e,n){if(t){if(t instanceof Qv)return t;if(t[Wv])return t[Wv]()}return t||e||n?new Qv(t,e,n):new Qv(Dv)}(t,e,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Fv.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Fv.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Fv.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,i=e.destination,s=e.isStopped;if(n||s)return!1;t=i&&i instanceof Qv?i:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=tm(e))((function(e,i){var s;s=n.subscribe((function(e){try{t(e)}catch(t){i(t),s&&s.unsubscribe()}}),i,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Gv]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Yv(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=tm(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function tm(t){if(t||(t=Fv.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var em=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),nm=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return Bv(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(Hv),im=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return Bv(e,t),e}(Qv),sm=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Bv(e,t),e.prototype[Wv]=function(){return new im(this)},e.prototype.lift=function(t){var e=new rm(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new em;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new em;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),s=0;s<n;s++)i[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new em;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new em;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new em;return this.hasError?(t.error(this.thrownError),Hv.EMPTY):this.isStopped?(t.complete(),Hv.EMPTY):(this.observers.push(t),new nm(this,t))},e.prototype.asObservable=function(){var t=new Jv;return t.source=this,t},e.create=function(t,e){return new rm(t,e)},e}(Jv),rm=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return Bv(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):Hv.EMPTY},e}(sm),om=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return Bv(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new em;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(sm);function am(t,e){if(!cm(t))throw Error("Provided state is not of type StateHistory");return e>0?function(t,e){if(e<0||e>=t.future.length)return t;const{past:n,future:i,present:s}=t;return{past:[...n,s,...i.slice(0,e)],present:i[e],future:i.slice(e+1)}}(t,e-1):e<0?function(t,e){if(e<0||e>=t.past.length)return t;const{past:n,future:i,present:s}=t,r=n.slice(0,e),o=[...n.slice(e+1),s,...i];return{past:r,present:n[e],future:o}}(t,t.past.length+e):t}function lm(t,e){return{...t,past:[...t.past,t.present],present:e,future:[]}}function cm(t){return void 0!==t.present&&void 0!==t.future&&void 0!==t.past&&Array.isArray(t.future)&&Array.isArray(t.past)}function hm(t,e){return function(n,i){e(n,i,t)}}const um="aurelia-store-state";var dm,pm,fm;function gm(t,e,n){const i=bm.container.get(wd).localStorage;if(void 0!==i){const e=void 0!==(null==n?void 0:n.key)?n.key:um;i.setItem(e,JSON.stringify(t))}}function vm(t,e){const n=bm.container.get(wd).localStorage;if(void 0===n)return t;const i=n.getItem(void 0===e?um:e);if(null===i||""===i)return t;try{return JSON.parse(i)}catch(t){}return t}function mm(t,e,n){var i;return(null===(i=t.logDefinitions)||void 0===i?void 0:i.hasOwnProperty(e))&&t.logDefinitions[e]&&Object.values(pm).includes(t.logDefinitions[e])?t.logDefinitions[e]:n}!function(t){t.Before="before",t.After="after"}(dm||(dm={})),function(t){t.trace="trace",t.debug="debug",t.info="info",t.warn="warn",t.error="error"}(pm||(pm={})),function(t){t.StartEnd="startEnd",t.All="all"}(fm||(fm={}));const bm={container:null};class wm extends Error{constructor(t){super(`Tried to dispatch an unregistered action ${void 0!==t&&("string"==typeof t?t:t.name)}`)}}class ym extends Error{}class xm extends Error{}class km extends Error{}let Sm=class{constructor(t,e,n,i){var s,r,o,a;this.initialState=t,this.logger=e,this.t=n,this.devToolsAvailable=!1,this.actions=new Map,this.middlewares=new Map,this.dispatchQueue=[],this.options=null!=i?i:{};const l=!0===(null===(r=null===(s=this.options)||void 0===s?void 0:s.history)||void 0===r?void 0:r.undoable);this._state=new om(t),this.state=this._state.asObservable(),!0!==(null===(a=null===(o=this.options)||void 0===o?void 0:o.devToolsOptions)||void 0===a?void 0:a.disable)&&this.setupDevTools(),l&&this.registerHistoryMethods()}registerMiddleware(t,e,n){this.middlewares.set(t,{placement:e,settings:n})}unregisterMiddleware(t){this.middlewares.has(t)&&this.middlewares.delete(t)}isMiddlewareRegistered(t){return this.middlewares.has(t)}registerAction(t,e){if(0===e.length)throw new xm("The reducer is expected to have one or more parameters, where the first will be the present state");this.actions.set(e,{type:t})}unregisterAction(t){this.actions.has(t)&&this.actions.delete(t)}isActionRegistered(t){return"string"==typeof t?void 0!==Array.from(this.actions).find((e=>e[1].type===t)):this.actions.has(t)}resetToState(t){this._state.next(t)}async dispatch(t,...e){const n=this.lookupAction(t);return n?this.queueDispatch([{reducer:n,params:e}]):Promise.reject(new wm(t))}pipe(t,...e){const n=[],i={dispatch:async()=>this.queueDispatch(n),pipe:(e,...s)=>{const r=this.lookupAction(e);if(!r)throw new wm(t);return n.push({reducer:r,params:s}),i}};return i.pipe(t,...e)}lookupAction(t){if("string"==typeof t){const e=Array.from(this.actions).find((([e,n])=>n.type===t));if(e)return e[0]}else if(this.actions.has(t))return t}async queueDispatch(t){return new Promise(((e,n)=>{this.dispatchQueue.push({actions:t,resolve:e,reject:n}),1===this.dispatchQueue.length&&this.handleQueue()}))}async handleQueue(){if(this.dispatchQueue.length>0){const t=this.dispatchQueue[0];try{await this.internalDispatch(t.actions),t.resolve()}catch(e){t.reject(e)}this.dispatchQueue.shift(),this.handleQueue()}}async internalDispatch(t){var e;const n=t.find((t=>!this.actions.has(t.reducer)));if(n)throw new wm(n.reducer);bm.container.get(wd).performance.mark("dispatch-start");const i=t.map((t=>({type:this.actions.get(t.reducer).type,params:t.params,reducer:t.reducer}))),s={name:i.map((t=>t.type)).join("->"),params:i.reduce(((t,e)=>t.concat(e.params)),[]),pipedActions:i.map((t=>({name:t.type,params:t.params})))};this.options.logDispatchedActions&&this.logger[mm(this.options,"dispatchedActions",pm.info)](`Dispatching: ${s.name}`);const r=await this.executeMiddlewares(this._state.getValue(),dm.Before,s);if(!1===r)return bm.container.get(wd).performance.clearMarks(),void bm.container.get(wd).performance.clearMeasures();let o=r;for(const t of i){if(o=await t.reducer(o,...t.params),!1===o)return bm.container.get(wd).performance.clearMarks(),void bm.container.get(wd).performance.clearMeasures();if(bm.container.get(wd).performance.mark(`dispatch-after-reducer-${t.type}`),!o&&"object"!=typeof o)throw new km("The reducer has to return a new state")}let a=await this.executeMiddlewares(o,dm.After,s);if(!1===a)return bm.container.get(wd).performance.clearMarks(),void bm.container.get(wd).performance.clearMeasures();if(cm(a)&&(null===(e=this.options.history)||void 0===e?void 0:e.limit)&&(a=function(t,e){return cm(t)&&(t.past.length>e&&(t.past=t.past.slice(t.past.length-e)),t.future.length>e&&(t.future=t.future.slice(0,e))),t}(a,this.options.history.limit)),this._state.next(a),bm.container.get(wd).performance.mark("dispatch-end"),this.options.measurePerformance===fm.StartEnd){bm.container.get(wd).performance.measure("startEndDispatchDuration","dispatch-start","dispatch-end");const t=bm.container.get(wd).performance.getEntriesByName("startEndDispatchDuration");this.logger[mm(this.options,"performanceLog",pm.info)](`Total duration ${t[0].duration} of dispatched action ${s.name}:`,t)}else if(this.options.measurePerformance===fm.All){const t=bm.container.get(wd).performance.getEntriesByType("mark"),e=t[t.length-1].startTime-t[0].startTime;this.logger[mm(this.options,"performanceLog",pm.info)](`Total duration ${e} of dispatched action ${s.name}:`,t)}bm.container.get(wd).performance.clearMarks(),bm.container.get(wd).performance.clearMeasures(),this.updateDevToolsState({type:s.name,params:s.params},a)}executeMiddlewares(t,e,n){return Array.from(this.middlewares).filter((t=>t[1].placement===e)).reduce((async(t,i,s)=>{try{const s=await i[0](await t,this._state.getValue(),i[1].settings,n);return!1!==s&&(s||await t)}catch(e){if(this.options.propagateError)throw e;return await t}finally{bm.container.get(wd).performance.mark(`dispatch-${e}-${i[0].name}`)}}),t)}setupDevTools(){this.t.__REDUX_DEVTOOLS_EXTENSION__&&(this.logger[mm(this.options,"devToolsStatus",pm.debug)]("DevTools are available"),this.devToolsAvailable=!0,this.devTools=this.t.__REDUX_DEVTOOLS_EXTENSION__.connect(this.options.devToolsOptions),this.devTools.init(this.initialState),this.devTools.subscribe((t=>{var e,n;if(this.logger[mm(this.options,"devToolsStatus",pm.debug)](`DevTools sent change ${t.type}`),"ACTION"!==t.type||void 0===t.payload){if("DISPATCH"===t.type&&t.payload)switch(t.payload.type){case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return void this._state.next(JSON.parse(t.state));case"COMMIT":return void this.devTools.init(this._state.getValue());case"RESET":return this.devTools.init(this.initialState),void this.resetToState(this.initialState);case"ROLLBACK":{const e=JSON.parse(t.state);return this.resetToState(e),void this.devTools.init(e)}}}else{const i=Array.from(this.actions).find((function([e]){var n;return e.name===(null===(n=t.payload)||void 0===n?void 0:n.name)})),s=null!==(n=this.lookupAction(null===(e=t.payload)||void 0===e?void 0:e.name))&&void 0!==n?n:null==i?void 0:i[0];if(!s)throw new ym("Tried to remotely dispatch an unregistered action");if(!t.payload.args||t.payload.args.length<1)throw new ym("No action arguments provided");this.dispatch(s,...t.payload.args.slice(1).map((t=>JSON.parse(t)))).catch((()=>{throw new ym("Issue when trying to dispatch an action through devtools")}))}})))}updateDevToolsState(t,e){this.devToolsAvailable&&this.devTools&&this.devTools.send(t,e)}registerHistoryMethods(){this.registerAction("jump",am)}};Sm=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}([hm(1,pi),hm(2,wd)],Sm);const Am=t=>t.state;function Cm(t){const e={selector:"function"==typeof t?t:Am,...t};function n(t,e){const n=e(t);return n instanceof Jv?n:t.state}function i(){const t="object"==typeof e.selector,n={[e.target||"state"]:e.selector||Am};return Object.entries({...t?e.selector:n}).map((([n,i])=>{var s,r;return{targets:e.target&&t?[e.target,n]:[n],selector:i,changeHandlers:{[null!==(s=e.onChanged)&&void 0!==s?s:""]:1,[`${null!==(r=e.target)&&void 0!==r?r:n}Changed`]:e.target?0:1,propertyChanged:0}}}))}return function(e){const s="object"==typeof t&&t.setup?e.prototype[t.setup]:e.prototype.binding,r="object"==typeof t&&t.teardown?e.prototype[t.teardown]:e.prototype.unbinding;e.prototype["object"==typeof t&&void 0!==t.setup?t.setup:"binding"]=function(){if("object"==typeof t&&"string"==typeof t.onChanged&&!(t.onChanged in this))throw new Error("Provided onChanged handler does not exist on target VM");const e=Ru.getCached(this)?Ru.getCached(this).container.get(Sm):bm.container.get(Sm);if(this._stateSubscriptions=i().map((t=>n(e,t.selector).subscribe((e=>{const n=t.targets.length-1,i=t.targets.reduce(((t={},e)=>t[e]),this);Object.entries(t.changeHandlers).forEach((([s,r])=>{s in this&&this[s](...[t.targets[n],e,i].slice(r,3))})),t.targets.reduce(((t,i,s)=>(t[i]=s===n?e:t[i]||{},t[i])),this)})))),s)return s.apply(this,arguments)},e.prototype["object"==typeof t&&t.teardown?t.teardown:"unbinding"]=function(){if(this._stateSubscriptions&&Array.isArray(this._stateSubscriptions)&&this._stateSubscriptions.forEach((t=>{t instanceof Hv&&!1===t.closed&&t.unsubscribe()})),r)return r.apply(this,arguments)}}}const Em={withInitialState(t){return Reflect.set(this,"state",t),this},withOptions(t){return Reflect.set(this,"options",t),this},register(t){var e;bm.container=t;const n=Reflect.get(this,"state"),i=Reflect.get(this,"options"),s=t.get(pi),r=t.get(wd);if(!n)throw new Error("initialState must be provided via withInitialState builder method");let o=n;return(null===(e=null==i?void 0:i.history)||void 0===e?void 0:e.undoable)&&!cm(n)&&(o={past:[],present:n,future:[]}),Xn.instance(Sm,new Sm(o,s,r,i)).register(t),t}};function Tm(t){return"object"==typeof t&&null!==t||"function"==typeof t}let $m=new WeakMap;function Im(t,e,n,i,s){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${s}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function Rm(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function Om(t,e,n){let i=$m.get(t);if(void 0===i){if(!n)return;i=new Map,$m.set(t,i)}let s=i.get(e);if(void 0===s){if(!n)return;s=new Map,i.set(e,s)}return s}function Pm(t,e,n){const i=Om(e,n,!1);return void 0!==i&&i.has(t)}function Lm(t,e,n){if(Pm(t,e,n))return!0;const i=Object.getPrototypeOf(e);return null!==i&&Lm(t,i,n)}function Mm(t,e,n){const i=Om(e,n,!1);if(void 0!==i)return i.get(t)}function Um(t,e,n){if(Pm(t,e,n))return Mm(t,e,n);const i=Object.getPrototypeOf(e);return null!==i?Um(t,i,n):void 0}function Bm(t,e){const n=[],i=Om(t,e,!1);if(void 0===i)return n;const s=i.keys();let r=0;for(const t of s)n[r]=t,++r;return n}function Nm(t,e){const n=Bm(t,e),i=Object.getPrototypeOf(t);if(null===i)return n;const s=Nm(i,e),r=n.length;if(0===r)return s;const o=s.length;if(0===o)return n;const a=new Set,l=[];let c,h=0;for(let t=0;t<r;++t)c=n[t],a.has(c)||(a.add(c),l[h]=c,++h);for(let t=0;t<o;++t)c=s[t],a.has(c)||(a.add(c),l[h]=c,++h);return l}const jm={define:function(t,e,n,i){if(!Tm(n))throw Im("Metadata.define",[t,e,n,i],"target",n,"Object or Function");return function(t,e,n,i){Om(n,i,!0).set(t,e)}(t,e,n,Rm(i))},has:function(t,e,n){if(!Tm(e))throw Im("Metadata.has",[t,e,n],"target",e,"Object or Function");return Lm(t,e,Rm(n))},hasOwn:function(t,e,n){if(!Tm(e))throw Im("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return Pm(t,e,Rm(n))},get:function(t,e,n){if(!Tm(e))throw Im("Metadata.get",[t,e,n],"target",e,"Object or Function");return Um(t,e,Rm(n))},getOwn:function(t,e,n){if(!Tm(e))throw Im("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return Mm(t,e,Rm(n))},getKeys:function(t,e){if(!Tm(t))throw Im("Metadata.getKeys",[t,e],"target",t,"Object or Function");return Nm(t,Rm(e))},getOwnKeys:function(t,e){if(!Tm(t))throw Im("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return Bm(t,Rm(e))},delete:function(t,e,n){if(!Tm(e))throw Im("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=Om(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,Rm(n))}};class Fm{constructor(t,e,n){this.path=t,this.caseSensitive=e,this.handler=n}}class Vm{constructor(t,e){this.route=t,this.paramNames=e}}class Dm{constructor(t,e){this.endpoint=t,this.params=e}}class Zm{constructor(t,e,n,i){var s;this.chars=t,this.states=e,this.skippedStates=n,this.result=i,this.head=e[e.length-1],this.endpoint=null===(s=this.head)||void 0===s?void 0:s.endpoint}advance(t){const{chars:e,states:n,skippedStates:i,result:s}=this;let r=null,o=0;const a=n[n.length-1];function l(c,h){if(c.isMatch(t)&&(1==++o?r=c:s.add(new Zm(e.concat(t),n.concat(c),null===h?i:i.concat(h),s))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw new Error(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw new Error("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)l(e,c)}}if(a.isDynamic&&l(a,null),null!==a.nextStates)for(const t of a.nextStates)l(t,null);null!==r&&(n.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&s.remove(this)}finalize(){!function t(e,n){const i=n.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const n of i)if(n.isOptional&&null!==n.endpoint){if(e.push(n),null!==n.nextStates)for(const i of n.nextStates)t(e,i);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:n}=this,i={};for(const t of n.paramNames)i[t]=void 0;for(let n=0,s=t.length;n<s;++n){const s=t[n];if(s.isDynamic){const t=s.segment.name;void 0===i[t]?i[t]=e[n]:i[t]+=e[n]}}return i}compareTo(t){const e=this.states,n=t.states;for(let t=0,i=0,s=Math.max(e.length,n.length);t<s;++t){let s=e[t];if(void 0===s)return 1;let r=n[i];if(void 0===r)return-1;let o=s.segment,a=r.segment;if(null===o){if(null===a){++i;continue}if(void 0===(s=e[++t]))return 1;o=s.segment}else if(null===a){if(void 0===(r=n[++i]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,s=t.skippedStates,r=i.length,o=s.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=i[t],n=s[t];if(e.length<n.length)return 1;if(e.length>n.length)return-1}return 0}}function zm(t){return null!==t.head.endpoint}function qm(t,e){return t.compareTo(e)}class Hm{constructor(t){this.candidates=[],this.candidates=[new Zm([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(zm);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(qm),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const n of e)n.advance(t)}}class Km{constructor(t,e,n){switch(this.prevState=t,this.segment=e,this.value=n,this.nextStates=null,this.endpoint=null,null==e?void 0:e.kind){case 2:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let n,i=this.nextStates;return null===i?(n=void 0,i=this.nextStates=[]):n=null===t?i.find((t=>t.value===e)):i.find((e=>{var n;return null===(n=e.segment)||void 0===n?void 0:n.equals(t)})),void 0===n&&i.push(n=new Km(this,t,e)),n}setEndpoint(t){if(null!==this.endpoint)throw new Error(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(null==e?void 0:e.kind){case 2:return!this.value.includes(t);case 1:return!0;case 3:case void 0:return this.value.includes(t)}}}function Wm(t){return t.length>0}var Qm;!function(t){t[t.star=1]="star",t[t.dynamic=2]="dynamic",t[t.static=3]="static"}(Qm||(Qm={}));class _m{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 3}appendTo(t){const{value:e,value:{length:n}}=this;if(this.caseSensitive)for(let i=0;i<n;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<n;++i){const n=e.charAt(i);t=t.append(this,n.toUpperCase()+n.toLowerCase())}return t}equals(t){return 3===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class Gm{constructor(t,e){this.name=t,this.optional=e}get kind(){return 2}appendTo(t){return t.append(this,"/")}equals(t){return 2===t.kind&&t.optional===this.optional&&t.name===this.name}}class Xm{constructor(t){this.name=t}get kind(){return 1}appendTo(t){return t.append(this,"")}equals(t){return 1===t.kind&&t.name===this.name}}const Ym=Object.prototype.hasOwnProperty,Jm=Reflect.defineProperty,tb=t=>"function"==typeof t,eb=t=>"string"==typeof t;function nb(t,e,n){return Jm(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),n}function ib(t,e,n,i=!1){!i&&Ym.call(t,e)||nb(t,e,n)}const sb=()=>Object.create(null),rb=jm.getOwn,ob=jm.hasOwn,ab=jm.define,lb=dn.annotation.keyFor,cb=dn.resource.keyFor,hb=dn.resource.appendTo;function ub(t,e,n,i){for(let s=0,r=t.length;s<r;++s)Xn.aliasTo(n,e.keyFrom(t[s])).register(i)}Object.freeze({});class db{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Ym.call(t,e)&&(this[e]=t[e])}static create(t,e){return new db(t,e)}static get(t,e,n,i){var s,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(n>0){for(;n>0;)if(n--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(s=a.parentScope)&&void 0!==s?s:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:t.bindingContext||t.overrideContext}}class pb{constructor(t,e,n,i){this.parentScope=t,this.bindingContext=e,this.overrideContext=n,this.isBoundary=i}static create(t,e,n){return new pb(null,t,null==e?fb.create(t):e,null!=n&&n)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new pb(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new pb(t,e,fb.create(e),!1)}}class fb{constructor(t){this.bindingContext=t}static create(t){return new fb(t)}}const gb=xn.createInterface("ISignaler",(t=>t.singleton(vb)));class vb{constructor(){this.signals=sb()}dispatchSignal(t,e){const n=this.signals[t];if(void 0===n)return;let i;for(i of n.keys())i.handleChange(void 0,void 0,e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}var mb;!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(mb||(mb={}));class bb{constructor(t,e,n,i,s){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=s}static create(t,e){let n,i;eb(t)?(n=t,i={name:n}):(n=t.name,i=t);const s=Object.getPrototypeOf(e)===yb;return new bb(e,Je(kb(e,"name"),n),Ye(kb(e,"aliases"),i.aliases,e.aliases),Sb.keyFrom(n),fn("strategy",i,e,(()=>s?2:1)))}register(t){const{Type:e,key:n,aliases:i,strategy:s}=this;switch(s){case 1:Xn.singleton(n,e).register(t);break;case 2:Xn.instance(n,new wb(t,e)).register(t)}Xn.aliasTo(n,e).register(t),ub(i,Sb,n,t)}}class wb{constructor(t,e){this.ctn=t,this.Type=e,this.deps=xn.getDependencies(e)}construct(t,e){const n=this.ctn,i=this.deps;switch(i.length){case 0:return new this.Type(t,e);case 1:return new this.Type(n.get(i[0]),t,e);case 2:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map((t=>n.get(t))),t,e)}}}class yb{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}["isBound","$scope","obs","sourceExpression","locator","oL"].forEach((t=>{Jm(yb.prototype,t,{enumerable:!1,configurable:!0,get:function(){return this.binding[t]}})}));const xb=cb("binding-behavior"),kb=(t,e)=>rb(lb(e),t),Sb=Object.freeze({name:xb,keyFrom:t=>`${xb}:${t}`,isType:t=>tb(t)&&ob(xb,t),define(t,e){const n=bb.create(t,e);return ab(xb,n,n.Type),ab(xb,n,n),hb(e,xb),n.Type},getDefinition(t){const e=rb(xb,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,n){ab(lb(e),n,t)},getAnnotation:kb});class Ab{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,i;return eb(t)?(n=t,i={name:n}):(n=t.name,i=t),new Ab(e,Je(Eb(e,"name"),n),Ye(Eb(e,"aliases"),i.aliases,e.aliases),Tb.keyFrom(n))}register(t){const{Type:e,key:n,aliases:i}=this;Xn.singleton(n,e).register(t),Xn.aliasTo(n,e).register(t),ub(i,Tb,n,t)}}const Cb=cb("value-converter"),Eb=(t,e)=>rb(lb(e),t),Tb=Object.freeze({name:Cb,keyFrom:t=>`${Cb}:${t}`,isType:t=>tb(t)&&ob(Cb,t),define(t,e){const n=Ab.create(t,e);return ab(Cb,n,n.Type),ab(Cb,n,n),hb(e,Cb),n.Type},getDefinition(t){const e=rb(Cb,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,n){ab(lb(e),n,t)},getAnnotation:Eb});var $b;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}($b||($b={}));class Ib{constructor(){this.text=""}static unparse(t){const e=new Ib;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",eb(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:n}=t,i=n.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,n=e.length;t<n;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,n=e.length;t<n;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,n=t.values;this.text+="{";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,n[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:n}=t,i=n.length;this.text+="${",this.text+=e[0];for(let t=0;t<i;t++)n[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const n=t.list,i=n.length;let s,r;for(s=0;s<i;s++)switch(r=n[s],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,n=t.length;e<n;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class Rb{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class Ob{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=Sb.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){return this.expression.assign(t,e,n,i)}bind(t,e,n){this.expression.hasBind&&this.expression.bind(t,e,n);const i=n.locator.get(this.behaviorKey);if(null==i)throw new Error(`AUR0101:${this.name}`);if(!(i instanceof wb)){if(void 0!==n[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);n[this.behaviorKey]=i,i.bind.call(i,t,e,n,...this.args.map((i=>i.evaluate(t,e,n.locator,null))))}}unbind(t,e,n){const i=this.behaviorKey,s=n;void 0!==s[i]&&(tb(s[i].unbind)&&s[i].unbind(t,e,n),s[i]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n)}accept(t){return t.visitBindingBehavior(this)}toString(){return Ib.unparse(this)}}class Pb{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=Tb.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0103:${this.name}`);if(null!==i&&"handleChange"in i){const t=s.signals;if(null!=t){const e=n.get(gb);for(let n=0,s=t.length;n<s;++n)e.addSignalListener(t[n],i)}}return"toView"in s?s.toView(this.expression.evaluate(t,e,n,i),...this.args.map((s=>s.evaluate(t,e,n,i)))):this.expression.evaluate(t,e,n,i)}assign(t,e,n,i){const s=n.get(this.converterKey);if(null==s)throw new Error(`AUR0104:${this.name}`);return"fromView"in s&&(i=s.fromView(i,...this.args.map((i=>i.evaluate(t,e,n,null))))),this.expression.assign(t,e,n,i)}unbind(t,e,n){const i=n.locator.get(this.converterKey);if(void 0===i.signals)return;const s=n.locator.get(gb);for(let t=0;t<i.signals.length;++t)s.removeSignalListener(i.signals[t],n)}accept(t){return t.visitValueConverter(this)}toString(){return Ib.unparse(this)}}class Lb{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,this.value.evaluate(t,e,n,i))}assign(t,e,n,i){return this.value.assign(t,e,n,i),this.target.assign(t,e,n,i)}accept(t){return t.visitAssign(this)}toString(){return Ib.unparse(this)}}class Mb{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i){}accept(t){return t.visitConditional(this)}toString(){return Ib.unparse(this)}}class Ub{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){var s;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(s=null==o?void 0:o.overrideContext)&&void 0!==s?s:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,n,i){}accept(t){return t.visitAccessThis(this)}toString(){return Ib.unparse(this)}}Ub.$this=new Ub(0),Ub.$parent=new Ub(1);class Bb{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=db.get(e,this.name,this.ancestor,t);null!==i&&i.observe(s,this.name);const r=s[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,n,i){var s;if("$host"===this.name)throw new Error("AUR0106");const r=db.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(s=r.$observers)||void 0===s?void 0:s[this.name])?(r.$observers[this.name].setValue(i,t),i):r[this.name]=i}accept(t){return t.visitAccessScope(this)}toString(){return Ib.unparse(this)}}class Nb{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);return 1&t?null==s?s:(null!==i&&i.observe(s,this.name),s[this.name]):(null!==i&&s instanceof Object&&i.observe(s,this.name),s?s[this.name]:"")}assign(t,e,n,i){const s=this.object.evaluate(t,e,n,null);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(i,t):s[this.name]=i:this.object.assign(t,e,n,{[this.name]:i}),i}accept(t){return t.visitAccessMember(this)}toString(){return Ib.unparse(this)}}class jb{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i);if(s instanceof Object){const r=this.key.evaluate(t,e,n,(32&t)>0?null:i);return null!==i&&i.observe(s,r),s[r]}}assign(t,e,n,i){return this.object.evaluate(t,e,n,null)[this.key.evaluate(t,e,n,null)]=i}accept(t){return t.visitAccessKeyed(this)}toString(){return Ib.unparse(this)}}class Fb{constructor(t,e,n=0){this.name=t,this.args=e,this.ancestor=n}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.args.map((s=>s.evaluate(t,e,n,i))),r=db.get(e,this.name,this.ancestor,t),o=iw(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i){}accept(t){return t.visitCallScope(this)}toString(){return Ib.unparse(this)}}class Vb{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.object.evaluate(t,e,n,(32&t)>0?null:i),r=this.args.map((s=>s.evaluate(t,e,n,i))),o=iw(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i){}accept(t){return t.visitCallMember(this)}toString(){return Ib.unparse(this)}}class Db{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.func.evaluate(t,e,n,i);if(tb(s))return s(...this.args.map((s=>s.evaluate(t,e,n,i))));if(8&t||null!=s)throw new Error("AUR0107")}assign(t,e,n,i){}accept(t){return t.visitCallFunction(this)}toString(){return Ib.unparse(this)}}class Zb{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,i)&&this.right.evaluate(t,e,n,i);case"||":return this.left.evaluate(t,e,n,i)||this.right.evaluate(t,e,n,i);case"==":return this.left.evaluate(t,e,n,i)==this.right.evaluate(t,e,n,i);case"===":return this.left.evaluate(t,e,n,i)===this.right.evaluate(t,e,n,i);case"!=":return this.left.evaluate(t,e,n,i)!=this.right.evaluate(t,e,n,i);case"!==":return this.left.evaluate(t,e,n,i)!==this.right.evaluate(t,e,n,i);case"instanceof":{const s=this.right.evaluate(t,e,n,i);return!!tb(s)&&this.left.evaluate(t,e,n,i)instanceof s}case"in":{const s=this.right.evaluate(t,e,n,i);return s instanceof Object&&this.left.evaluate(t,e,n,i)in s}case"+":{const s=this.left.evaluate(t,e,n,i),r=this.right.evaluate(t,e,n,i);if((1&t)>0)return s+r;if(!s||!r){if(De(s)||De(r))return(s||0)+(r||0);if(Ze(s)||Ze(r))return(s||"")+(r||"")}return s+r}case"-":return this.left.evaluate(t,e,n,i)-this.right.evaluate(t,e,n,i);case"*":return this.left.evaluate(t,e,n,i)*this.right.evaluate(t,e,n,i);case"/":return this.left.evaluate(t,e,n,i)/this.right.evaluate(t,e,n,i);case"%":return this.left.evaluate(t,e,n,i)%this.right.evaluate(t,e,n,i);case"<":return this.left.evaluate(t,e,n,i)<this.right.evaluate(t,e,n,i);case">":return this.left.evaluate(t,e,n,i)>this.right.evaluate(t,e,n,i);case"<=":return this.left.evaluate(t,e,n,i)<=this.right.evaluate(t,e,n,i);case">=":return this.left.evaluate(t,e,n,i)>=this.right.evaluate(t,e,n,i);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitBinary(this)}toString(){return Ib.unparse(this)}}class zb{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,i);case"typeof":return typeof this.expression.evaluate(1|t,e,n,i);case"!":return!this.expression.evaluate(t,e,n,i);case"-":return-this.expression.evaluate(t,e,n,i);case"+":return+this.expression.evaluate(t,e,n,i);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,n,i){}accept(t){return t.visitUnary(this)}toString(){return Ib.unparse(this)}}class qb{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return Ib.unparse(this)}}qb.$undefined=new qb(void 0),qb.$null=new qb(null),qb.$true=new qb(!0),qb.$false=new qb(!1),qb.$empty=new qb("");class Hb{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.elements.map((s=>s.evaluate(t,e,n,i)))}assign(t,e,n,i){}accept(t){return t.visitArrayLiteral(this)}toString(){return Ib.unparse(this)}}Hb.$empty=new Hb(ni);class Kb{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s={};for(let r=0;r<this.keys.length;++r)s[this.keys[r]]=this.values[r].evaluate(t,e,n,i);return s}assign(t,e,n,i){}accept(t){return t.visitObjectLiteral(this)}toString(){return Ib.unparse(this)}}Kb.$empty=new Kb(ni,ni);class Wb{constructor(t,e=ni){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){let s=this.cooked[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.cooked[r+1];return s}assign(t,e,n,i){}accept(t){return t.visitTemplate(this)}toString(){return Ib.unparse(this)}}Wb.$empty=new Wb([""]);class Qb{constructor(t,e,n,i=ni){this.cooked=t,this.func=n,this.expressions=i,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const s=this.expressions.map((s=>s.evaluate(t,e,n,i))),r=this.func.evaluate(t,e,n,i);if(!tb(r))throw new Error("AUR0110");return r(this.cooked,...s)}assign(t,e,n,i){}accept(t){return t.visitTaggedTemplate(this)}toString(){return Ib.unparse(this)}}class _b{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return Ib.unparse(this)}}class Gb{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return Ib.unparse(this)}}class Xb{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return Ib.unparse(this)}}const Yb=Object.prototype.toString;class Jb{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i){}count(t,e){switch(Yb.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${Yb.call(e)}`)}}iterate(t,e,n){switch(Yb.call(e)){case"[object Array]":return sw(e,n);case"[object Map]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.entries())n[++i]=e;sw(n,e)}(e,n);case"[object Set]":return function(t,e){const n=Array(t.size);let i=-1;for(const e of t.keys())n[++i]=e;sw(n,e)}(e,n);case"[object Number]":return function(t,e){const n=Array(t);for(let e=0;e<t;++e)n[e]=e;sw(n,e)}(e,n);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${Yb.call(e)}`)}}bind(t,e,n){this.iterable.hasBind&&this.iterable.bind(t,e,n)}unbind(t,e,n){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n)}accept(t){return t.visitForOfStatement(this)}toString(){return Ib.unparse(this)}}class tw{constructor(t,e=ni){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){let s=this.parts[0];for(let r=0;r<this.expressions.length;++r)s+=String(this.expressions[r].evaluate(t,e,n,i)),s+=this.parts[r+1];return s}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,n,i)}${this.parts[1]}`}assign(t,e,n,i){}accept(t){return t.visitInterpolation(this)}toString(){return Ib.unparse(this)}}class ew{constructor(t,e,n,i){this.$kind=t,this.list=e,this.source=n,this.initializer=i}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i){var s;const r=this.list,o=r.length;let a,l;for(a=0;a<o;a++)switch(l=r[a],l.$kind){case 139289:l.assign(t,e,n,i);break;case 90137:case 106521:{if("object"!=typeof i||null===i)throw new Error("AUR0112");let r=l.source.evaluate(t,pb.create(i),n,null);void 0===r&&(r=null===(s=l.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),l.assign(t,e,n,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return Ib.unparse(this)}}class nw{constructor(t,e,n){this.target=t,this.source=e,this.initializer=n}get $kind(){return 139289}evaluate(t,e,n,i){}assign(t,e,n,i){var s;if(null==i)return;if("object"!=typeof i)throw new Error("AUR0112");let r=this.source.evaluate(t,pb.create(i),n,null);void 0===r&&(r=null===(s=this.initializer)||void 0===s?void 0:s.evaluate(t,e,n,null)),this.target.assign(t,e,n,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return Ib.unparse(this)}}function iw(t,e,n){const i=null==e?null:e[n];if(tb(i))return i;if(!(8&t)&&null==i)return null;throw new Error(`AUR0111:${n}`)}function sw(t,e){for(let n=0,i=t.length;n<i;++n)e(t,n,t[n])}var rw,ow,aw,lw,cw,hw;function uw(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}function dw(t){return null==t?pw:pw(t)}function pw(t){const e=t.prototype;Jm(e,"subs",{get:gw}),ib(e,"subscribe",vw),ib(e,"unsubscribe",mw)}xn.createInterface("ICoercionConfiguration"),function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(rw||(rw={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=97]="persistentBindingFlags",t[t.observeLeafPropertiesOnly=32]="observeLeafPropertiesOnly",t[t.noFlush=64]="noFlush",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.dispose=16]="dispose"}(ow||(ow={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(aw||(aw={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(lw||(lw={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(cw||(cw={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(hw||(hw={}));class fw{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,n=e.length;let i=0;for(;i<n;++i)if(e[i]===t)return e.splice(i,1),1===n&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,n){const i=this.s0,s=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==i&&i.handleChange(t,e,n),void 0!==s&&s.handleChange(t,e,n),void 0!==r&&r.handleChange(t,e,n),void 0!==o){const i=o.length;let s,r=0;for(;r<i;++r)s=o[r],void 0!==s&&s.handleChange(t,e,n)}}notifyCollection(t,e){const n=this.s0,i=this.s1,s=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==r){const n=r.length;let i,s=0;for(;s<n;++s)i=r[s],void 0!==i&&i.handleCollectionChange(t,e)}}}function gw(){return nb(this,"subs",new fw)}function vw(t){return this.subs.add(t)}function mw(t){return this.subs.remove(t)}function bw(t){return null==t?ww:ww(t)}function ww(t){const e=t.prototype;Jm(e,"queue",{get:xw})}class yw{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(kw)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function xw(){return yw.instance}function kw(t,e,n){n.delete(t),t.flush()}yw.instance=new yw;class Sw{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const n=this.v;t!==n&&Ve(t)&&(0==(64&e)&&(this.o.length=t),this.v=t,this.h=n,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const n=this.v,i=this.o.length;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){$w=this.h,this.h=this.v,this.subs.notify(this.v,$w,this.f)}}class Aw{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const n=this.v,i=this.o.size;(this.v=i)!==n&&(this.h=n,this.f=e,this.queue.add(this))}flush(){$w=this.h,this.h=this.v,this.subs.notify(this.v,$w,this.f)}}function Cw(t){const e=t.prototype;ib(e,"subscribe",Ew,!0),ib(e,"unsubscribe",Tw,!0),bw(t),dw(t)}function Ew(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function Tw(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let $w;Cw(Sw),Cw(Aw);const Iw=new WeakMap;function Rw(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Ow(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function Pw(t,e,n,i,s){let r,o,a,l,c,h,u;for(h=n+1;h<i;h++){for(r=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],l=e[u],c=s(a,r),c>0);u--)t[u+1]=a,e[u+1]=l;t[u+1]=r,e[u+1]=o}}function Lw(t,e,n,i,s){let r,o,a,l,c,h,u,d,p,f,g,v,m,b,w,y,x,k,S,A=0,C=0;for(;;){if(i-n<=10)return void Pw(t,e,n,i,s);A=n+(i-n>>1),r=t[n],l=e[n],o=t[i-1],c=e[i-1],a=t[A],h=e[A],u=s(r,o),u>0&&(f=r,g=l,r=o,l=c,o=f,c=g),d=s(r,a),d>=0?(f=r,g=l,r=a,l=h,a=o,h=c,o=f,c=g):(p=s(o,a),p>0&&(f=o,g=c,o=a,c=h,a=f,h=g)),t[n]=r,e[n]=l,t[i-1]=a,e[i-1]=h,v=o,m=c,b=n+1,w=i-1,t[A]=t[b],e[A]=e[b],t[b]=v,e[b]=m;t:for(C=b+1;C<w;C++)if(y=t[C],x=e[C],k=s(y,v),k<0)t[C]=t[b],e[C]=e[b],t[b]=y,e[b]=x,b++;else if(k>0){do{if(w--,w==C)break t;S=t[w],k=s(S,v)}while(k>0);t[C]=t[w],e[C]=e[w],t[w]=y,e[w]=x,k<0&&(y=t[C],x=e[C],t[C]=t[b],e[C]=e[b],t[b]=y,e[b]=x,b++)}i-w<b-n?(Lw(t,e,w,i,s),i=b):(Lw(t,e,n,b,s),n=w)}}const Mw=Array.prototype,Uw=Mw.push,Bw=Mw.unshift,Nw=Mw.pop,jw=Mw.shift,Fw=Mw.splice,Vw=Mw.reverse,Dw=Mw.sort,Zw=["push","unshift","pop","shift","splice","reverse","sort"],zw={push:function(...t){const e=Iw.get(this);if(void 0===e)return Uw.apply(this,t);const n=this.length,i=t.length;if(0===i)return n;this.length=e.indexMap.length=n+i;let s=n;for(;s<this.length;)this[s]=t[s-n],e.indexMap[s]=-2,s++;return e.notify(),this.length},unshift:function(...t){const e=Iw.get(this);if(void 0===e)return Bw.apply(this,t);const n=t.length,i=new Array(n);let s=0;for(;s<n;)i[s++]=-2;Bw.apply(e.indexMap,i);const r=Bw.apply(this,t);return e.notify(),r},pop:function(){const t=Iw.get(this);if(void 0===t)return Nw.call(this);const e=t.indexMap,n=Nw.call(this),i=e.length-1;return e[i]>-1&&e.deletedItems.push(e[i]),Nw.call(e),t.notify(),n},shift:function(){const t=Iw.get(this);if(void 0===t)return jw.call(this);const e=t.indexMap,n=jw.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),jw.call(e),t.notify(),n},splice:function(...t){const e=t[0],n=t[1],i=Iw.get(this);if(void 0===i)return Fw.apply(this,t);const s=this.length,r=0|e,o=r<0?Math.max(s+r,0):Math.min(r,s),a=i.indexMap,l=t.length,c=0===l?0:1===l?s-o:n;if(c>0){let t=o;const e=t+c;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(l>2){const t=l-2,i=new Array(t);let s=0;for(;s<t;)i[s++]=-2;Fw.call(a,e,n,...i)}else Fw.apply(a,t);const h=Fw.apply(this,t);return i.notify(),h},reverse:function(){const t=Iw.get(this);if(void 0===t)return Vw.call(this),this;const e=this.length,n=e/2|0;let i=0;for(;i!==n;){const n=e-i-1,s=this[i],r=t.indexMap[i],o=this[n],a=t.indexMap[n];this[i]=o,t.indexMap[i]=a,this[n]=s,t.indexMap[n]=r,i++}return t.notify(),this},sort:function(t){const e=Iw.get(this);if(void 0===e)return Dw.call(this,t),this;const n=this.length;if(n<2)return this;Lw(this,e.indexMap,0,n,Ow);let i=0;for(;i<n&&void 0!==this[i];)i++;return void 0!==t&&tb(t)||(t=Rw),Lw(this,e.indexMap,0,i,t),e.notify(),this}};for(const t of Zw)Jm(zw[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let qw=!1;class Hw{constructor(t){this.type=18,qw||(qw=!0,function(){for(const t of Zw)!0!==Mw[t].observing&&nb(Mw,t,zw[t])}()),this.indexObservers={},this.collection=t,this.indexMap=uw(t.length),this.lenObs=void 0,Iw.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=uw(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Sw(this)}getIndexObserver(t){var e,n;return null!==(e=(n=this.indexObservers)[t])&&void 0!==e?e:n[t]=new Kw(this,t)}}class Kw{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,s=n.indexMap;s[i]>-1&&s.deletedItems.push(s[i]),s[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.value,s=this.value=this.getValue();i!==s&&this.subs.notify(s,i,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Ww(t){let e=Iw.get(t);return void 0===e&&(e=new Hw(t)),e}dw(Hw),dw(Kw);const Qw=new WeakMap,_w=Set.prototype,Gw=_w.add,Xw=_w.clear,Yw=_w.delete,Jw=["add","clear","delete"],ty={add:function(t){const e=Qw.get(this);if(void 0===e)return Gw.call(this,t),this;const n=this.size;return Gw.call(this,t),this.size===n||(e.indexMap[n]=-2,e.notify()),this},clear:function(){const t=Qw.get(this);if(void 0===t)return Xw.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;Xw.call(this),e.length=0,t.notify()}},delete:function(t){const e=Qw.get(this);if(void 0===e)return Yw.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=Yw.call(this,t);return!0===s&&e.notify(),s}n++}return!1}},ey={writable:!0,enumerable:!1,configurable:!0};for(const t of Jw)Jm(ty[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ny=!1;class iy{constructor(t){this.type=34,ny||(ny=!0,function(){for(const t of Jw)!0!==_w[t].observing&&Jm(_w,t,{...ey,value:ty[t]})}()),this.collection=t,this.indexMap=uw(t.size),this.lenObs=void 0,Qw.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=uw(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Aw(this)}}function sy(t){let e=Qw.get(t);return void 0===e&&(e=new iy(t)),e}dw(iy);const ry=new WeakMap,oy=Map.prototype,ay=oy.set,ly=oy.clear,cy=oy.delete,hy=["set","clear","delete"],uy={set:function(t,e){const n=ry.get(this);if(void 0===n)return ay.call(this,t,e),this;const i=this.get(t),s=this.size;if(ay.call(this,t,e),this.size===s){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[s]=-2,n.notify(),this},clear:function(){const t=ry.get(this);if(void 0===t)return ly.call(this);if(this.size>0){const e=t.indexMap;let n=0;for(const t of this.keys())e[n]>-1&&e.deletedItems.push(e[n]),n++;ly.call(this),e.length=0,t.notify()}},delete:function(t){const e=ry.get(this);if(void 0===e)return cy.call(this,t);if(0===this.size)return!1;let n=0;const i=e.indexMap;for(const s of this.keys()){if(s===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const s=cy.call(this,t);return!0===s&&e.notify(),s}++n}return!1}},dy={writable:!0,enumerable:!1,configurable:!0};for(const t of hy)Jm(uy[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let py=!1;class fy{constructor(t){this.type=66,py||(py=!0,function(){for(const t of hy)!0!==oy[t].observing&&Jm(oy,t,{...dy,value:uy[t]})}()),this.collection=t,this.indexMap=uw(t.size),this.lenObs=void 0,ry.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=uw(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Aw(this)}}function gy(t){let e=ry.get(t);return void 0===e&&(e=new fy(t)),e}function vy(t,e){const n=this.oL.getObserver(t,e);this.obs.add(n)}function my(){return nb(this,"obs",new ky(this))}function by(t){let e;if(t instanceof Array)e=Ww(t);else if(t instanceof Set)e=sy(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=gy(t)}this.obs.add(e)}function wy(t){this.obs.add(t)}function yy(){throw new Error("AUR2011:handleChange")}function xy(){throw new Error("AUR2012:handleCollectionChange")}dw(fy);class ky{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,n){return this.b.interceptor.handleChange(t,e,n)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(Ay,this),this.count=this.o.size}clearAll(){this.o.forEach(Sy,this),this.o.clear(),this.count=0}}function Sy(t,e){e.unsubscribe(this)}function Ay(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function Cy(t){const e=t.prototype;return ib(e,"observe",vy,!0),ib(e,"observeCollection",by,!0),ib(e,"subscribeTo",wy,!0),Jm(e,"obs",{get:my}),ib(e,"handleChange",yy),ib(e,"handleCollectionChange",xy),t}function Ey(t){return null==t?Cy:Cy(t)}Cy(class{constructor(t,e,n,i){this.key=t,this.binding=e,this.oL=n,this.locator=i,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,n){this.binding[this.key](t,e,n)}}),xn.createInterface("IExpressionParser",(t=>t.singleton(Ty)));class Ty{constructor(){this.u=sb(),this.A=sb(),this.U=sb()}parse(t,e){let n;switch(e){case 16:return new Rb(t);case 1:return n=this.U[t],void 0===n&&(n=this.U[t]=this.$parse(t,e)),n;case 2:return n=this.A[t],void 0===n&&(n=this.A[t]=this.$parse(t,e)),n;default:if(0===t.length){if((12&e)>0)return qb.$empty;throw new Error("AUR0169")}return n=this.u[t],void 0===n&&(n=this.u[t]=this.$parse(t,e)),n}}$parse(t,e){return Vy.ip=t,Vy.length=t.length,Vy.index=0,Vy.O=t.charCodeAt(0),Dy(Vy,0,61,void 0===e?8:e)}}var $y,Iy,Ry,Oy;function Py(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}($y||($y={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(Iy||(Iy={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(Ry||(Ry={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(Oy||(Oy={}));const Ly=qb.$false,My=qb.$true,Uy=qb.$null,By=qb.$undefined,Ny=Ub.$this,jy=Ub.$parent;var Fy;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(Fy||(Fy={}));const Vy=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function Dy(t,e,n,i){if(16===i)return new Rb(t.ip);if(0===t.index){if(1&i)return function(t){const e=[],n=[],i=t.length;let s="";for(;t.index<i;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(s),s="",t.index+=2,t.O=t.ip.charCodeAt(t.index),zy(t);const i=Dy(t,0,61,1);n.push(i);continue}s+="$";break;case 92:s+=String.fromCharCode(Py(qy(t)));break;default:s+=String.fromCharCode(t.O)}qy(t)}return n.length?(e.push(s),new tw(e,n)):null}(t);if(zy(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let s;if(t.R=448>n,32768&t.$){const n=Gy[63&t.$];zy(t),s=new zb(n,Dy(t,e,449,i)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(zy(t),e++,!Qy(t,16393)){if(524288&t.$){const t=511&e;s=0===t?Ny:1===t?jy:new Ub(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&i?s=new Xb(t.L):(s=new Bb(t.L,511&e),e=1024),t.R=!0,zy(t);break;case 3076:t.R=!1,zy(t),s=Ny,e=512;break;case 671751:zy(t),s=Dy(t,0,62,i),_y(t,1835019),e=0;break;case 671757:s=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],n=new ew(90137,e,void 0,void 0);let i="",s=!0,r=0;for(;s;)switch(zy(t),t.$){case 1835022:s=!1,o();break;case 1572876:o();break;case 1024:i=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return _y(t,1835022),n;function o(){""!==i?(e.push(new nw(new Nb(Ny,i),new jb(Ny,new qb(r++)),void 0)),i=""):r++}}(t):function(t,e,n){zy(t);const i=new Array;for(;1835022!==t.$;)if(Qy(t,1572876)){if(i.push(By),1835022===t.$)break}else{if(i.push(Dy(t,e,62,-3&n)),!Qy(t,1572876))break;if(1835022===t.$)break}return _y(t,1835022),2&n?new _b(i):(t.R=!1,new Hb(i))}(t,e,i),e=0;break;case 131080:s=function(t,e){const n=new Array,i=new Array;for(zy(t);1835018!==t.$;){if(n.push(t.L),12288&t.$)zy(t),_y(t,1572879),i.push(Dy(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:n,$:s,index:r}=t;zy(t),Qy(t,1572879)?i.push(Dy(t,0,62,-3&e)):(t.O=n,t.$=s,t.index=r,i.push(Dy(t,0,450,-3&e)))}}1835018!==t.$&&_y(t,1572876)}return _y(t,1835018),2&e?new Gb(n,i):(t.R=!1,new Kb(n,i))}(t,i),e=0;break;case 540714:s=new Wb([t.L]),t.R=!1,zy(t),e=0;break;case 540715:s=Zy(t,e,i,s,!1),e=0;break;case 4096:case 8192:s=new qb(t.L),t.R=!1,zy(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=Gy[63&t.$],t.R=!1,zy(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&i)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);zy(t);const n=e,i=Dy(t,0,61,0);return new Jb(n,i)}(t,s);if(449<n)return s;let r=t.L;for(;(16384&t.$)>0;){const n=[];let o;switch(t.$){case 16393:if(t.R=!0,zy(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,zy(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}s=1024&e?new Bb(r,s.ancestor):new Nb(s,r);continue;case 671757:t.R=!0,zy(t),e=4096,s=new jb(s,Dy(t,0,62,i)),_y(t,1835022);break;case 671751:for(t.R=!1,zy(t);1835019!==t.$&&(n.push(Dy(t,0,62,i)),Qy(t,1572876)););_y(t,1835019),s=1024&e?new Fb(r,n,s.ancestor):2048&e?new Vb(s,r,n):new Db(s,n),e=0;break;case 540714:t.R=!1,o=[t.L],s=new Qb(o,o,s),zy(t);break;case 540715:s=Zy(t,e,i,s,!0)}}}if(448<n)return s;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=n)break;zy(t),s=new Zb(Gy[63&r],s,Dy(t,e,448&r,i)),t.R=!1}if(63<n)return s;if(Qy(t,1572880)){const n=Dy(t,e,62,i);_y(t,1572879),s=new Mb(s,n,Dy(t,e,62,i)),t.R=!1}if(62<n)return s;if(Qy(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);s=new Lb(s,Dy(t,e,62,i))}if(61<n)return s;for(;Qy(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const n=t.L;zy(t);const r=new Array;for(;Qy(t,1572879);)r.push(Dy(t,e,62,i));s=new Pb(s,n,r)}for(;Qy(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const n=t.L;zy(t);const r=new Array;for(;Qy(t,1572879);)r.push(Dy(t,e,62,i));s=new Ob(s,n,r)}if(1572864!==t.$){if(1&i)return s;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return s}function Zy(t,e,n,i,s){const r=[t.L];_y(t,540715);const o=[Dy(t,e,62,n)];for(;540714!==(t.$=Wy(t));)r.push(t.L),_y(t,540715),o.push(Dy(t,e,62,n));return r.push(t.L),t.R=!1,s?(zy(t),new Qb(r,r,i,o)):(zy(t),new Wb(r,o))}function zy(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=sx[t.O](t)))return;t.$=1572864}function qy(t){return t.O=t.ip.charCodeAt(++t.index)}function Hy(t,e){let n=t.O;if(!1===e){do{n=qy(t)}while(n<=57&&n>=48);if(46!==n)return t.L=parseInt(t.P,10),8192;if(n=qy(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=qy(t)}while(n<=57&&n>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function Ky(t){let e=!0,n="";for(;96!==qy(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.O)n+=String.fromCharCode(Py(qy(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);n+=String.fromCharCode(t.O)}return qy(t),t.L=n,e?540714:540715}function Wy(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,Ky(t)}function Qy(t,e){return t.$===e&&(zy(t),!0)}function _y(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);zy(t)}const Gy=[Ly,My,Uy,By,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Xy=sb();Xy.true=2049,Xy.null=2050,Xy.false=2048,Xy.undefined=2051,Xy.$this=3076,Xy.$parent=3078,Xy.in=1640799,Xy.instanceof=1640800,Xy.typeof=34851,Xy.void=34852,Xy.of=1051180;const Yy=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Jy=[48,58];function tx(t,e,n,i){const s=n.length;for(let r=0;r<s;r+=2){const s=n[r];let o=n[r+1];if(o=o>0?o:s+1,t&&t.fill(i,s,o),e)for(let t=s;t<o;t++)e.add(t)}}function ex(t){return e=>(qy(e),t)}const nx=t=>{throw new Error(`AUR0168:${t.ip}`)};nx.notMapped=!0,tx(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const ix=new Uint8Array(65535);tx(ix,null,Yy,1),tx(ix,null,Jy,1);const sx=new Array(65535);sx.fill(nx,0,65535),tx(sx,null,[0,33,127,161],(t=>(qy(t),null))),tx(sx,null,Yy,(function(t){for(;ix[qy(t)];);const e=Xy[t.L=t.P];return void 0===e?1024:e})),tx(sx,null,Jy,(t=>Hy(t,!1))),sx[34]=sx[39]=t=>function(t){const e=t.O;qy(t);let n=0;const i=new Array;let s=t.index;for(;t.O!==e;)if(92===t.O)i.push(t.ip.slice(s,t.index)),qy(t),n=Py(t.O),qy(t),i.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);qy(t)}const r=t.ip.slice(s,t.index);qy(t),i.push(r);const o=i.join("");return t.L=o,4096}(t),sx[96]=t=>Ky(t),sx[33]=t=>61!==qy(t)?32809:61!==qy(t)?1638680:(qy(t),1638682),sx[61]=t=>61!==qy(t)?1048616:61!==qy(t)?1638679:(qy(t),1638681),sx[38]=t=>38!==qy(t)?1572883:(qy(t),1638614),sx[124]=t=>124!==qy(t)?1572884:(qy(t),1638549),sx[46]=t=>qy(t)<=57&&t.O>=48?Hy(t,!0):16393,sx[60]=t=>61!==qy(t)?1638747:(qy(t),1638749),sx[62]=t=>61!==qy(t)?1638748:(qy(t),1638750),sx[37]=ex(1638886),sx[40]=ex(671751),sx[41]=ex(1835019),sx[42]=ex(1638885),sx[43]=ex(623009),sx[44]=ex(1572876),sx[45]=ex(623010),sx[47]=ex(1638887),sx[58]=ex(1572879),sx[63]=ex(1572880),sx[91]=ex(671757),sx[93]=ex(1835022),sx[123]=ex(131080),sx[125]=ex(1835018);let rx=null;const ox=[];let ax=!1;function lx(){return rx}function cx(t){if(null==t)throw new Error("AUR0206");if(null==rx)return rx=t,ox[0]=rx,void(ax=!0);if(rx===t)throw new Error("AUR0207");ox.push(t),rx=t,ax=!0}function hx(t){if(null==t)throw new Error("AUR0208");if(rx!==t)throw new Error("AUR0209");ox.pop(),rx=ox.length>0?ox[ox.length-1]:null,ax=null!=rx}Object.freeze({get current(){return rx},get connecting(){return ax},enter:cx,exit:hx,pause:function(){ax=!1},resume:function(){ax=!0}});const ux=Reflect.get,dx=Object.prototype.toString,px=new WeakMap;function fx(t){switch(dx.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const gx="__raw__";function vx(t){return fx(t)?mx(t):t}function mx(t){var e;return null!==(e=px.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?kx:t instanceof Map||t instanceof Set?Hx:xx,n=new Proxy(t,e);return px.set(t,n),n}(t)}function bx(t){var e;return null!==(e=t.__raw__)&&void 0!==e?e:t}function wx(t){return fx(t)&&t.__raw__||t}function yx(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const xx={get(t,e,n){if(e===gx)return t;const i=lx();return!ax||yx(e)||null==i?ux(t,e,n):(i.observe(t,e),vx(ux(t,e,n)))}},kx={get(t,e,n){if(e===gx)return t;const i=lx();if(!ax||yx(e)||null==i)return ux(t,e,n);switch(e){case"length":return i.observe(t,"length"),t.length;case"map":return Sx;case"includes":return Ex;case"indexOf":return Tx;case"lastIndexOf":return $x;case"every":return Ax;case"filter":return Cx;case"find":return Rx;case"findIndex":return Ix;case"flat":return Ox;case"flatMap":return Px;case"join":return Lx;case"push":return Ux;case"pop":return Mx;case"reduce":return zx;case"reduceRight":return qx;case"reverse":return Fx;case"shift":return Bx;case"unshift":return Nx;case"slice":return Zx;case"splice":return jx;case"some":return Vx;case"sort":return Dx;case"keys":return Jx;case"values":case Symbol.iterator:return tk;case"entries":return ek}return i.observe(t,e),vx(ux(t,e,n))},ownKeys(t){var e;return null===(e=lx())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function Sx(t,e){var n;const i=bx(this),s=i.map(((n,i)=>wx(t.call(e,vx(n),i,this))));return null===(n=lx())||void 0===n||n.observeCollection(i),vx(s)}function Ax(t,e){var n;const i=bx(this),s=i.every(((n,i)=>t.call(e,vx(n),i,this)));return null===(n=lx())||void 0===n||n.observeCollection(i),s}function Cx(t,e){var n;const i=bx(this),s=i.filter(((n,i)=>wx(t.call(e,vx(n),i,this))));return null===(n=lx())||void 0===n||n.observeCollection(i),vx(s)}function Ex(t){var e;const n=bx(this),i=n.includes(wx(t));return null===(e=lx())||void 0===e||e.observeCollection(n),i}function Tx(t){var e;const n=bx(this),i=n.indexOf(wx(t));return null===(e=lx())||void 0===e||e.observeCollection(n),i}function $x(t){var e;const n=bx(this),i=n.lastIndexOf(wx(t));return null===(e=lx())||void 0===e||e.observeCollection(n),i}function Ix(t,e){var n;const i=bx(this),s=i.findIndex(((n,i)=>wx(t.call(e,vx(n),i,this))));return null===(n=lx())||void 0===n||n.observeCollection(i),s}function Rx(t,e){var n;const i=bx(this),s=i.find(((e,n)=>t(vx(e),n,this)),e);return null===(n=lx())||void 0===n||n.observeCollection(i),vx(s)}function Ox(){var t;const e=bx(this);return null===(t=lx())||void 0===t||t.observeCollection(e),vx(e.flat())}function Px(t,e){var n;const i=bx(this);return null===(n=lx())||void 0===n||n.observeCollection(i),mx(i.flatMap(((n,i)=>vx(t.call(e,vx(n),i,this)))))}function Lx(t){var e;const n=bx(this);return null===(e=lx())||void 0===e||e.observeCollection(n),n.join(t)}function Mx(){return vx(bx(this).pop())}function Ux(...t){return bx(this).push(...t)}function Bx(){return vx(bx(this).shift())}function Nx(...t){return bx(this).unshift(...t)}function jx(...t){return vx(bx(this).splice(...t))}function Fx(...t){var e;const n=bx(this),i=n.reverse();return null===(e=lx())||void 0===e||e.observeCollection(n),vx(i)}function Vx(t,e){var n;const i=bx(this),s=i.some(((n,i)=>wx(t.call(e,vx(n),i,this))));return null===(n=lx())||void 0===n||n.observeCollection(i),s}function Dx(t){var e;const n=bx(this),i=n.sort(t);return null===(e=lx())||void 0===e||e.observeCollection(n),vx(i)}function Zx(t,e){var n;const i=bx(this);return null===(n=lx())||void 0===n||n.observeCollection(i),mx(i.slice(t,e))}function zx(t,e){var n;const i=bx(this),s=i.reduce(((e,n,i)=>t(e,vx(n),i,this)),e);return null===(n=lx())||void 0===n||n.observeCollection(i),vx(s)}function qx(t,e){var n;const i=bx(this),s=i.reduceRight(((e,n,i)=>t(e,vx(n),i,this)),e);return null===(n=lx())||void 0===n||n.observeCollection(i),vx(s)}const Hx={get(t,e,n){if(e===gx)return t;const i=lx();if(!ax||yx(e)||null==i)return ux(t,e,n);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Xx;case"delete":return Yx;case"forEach":return Kx;case"add":if(t instanceof Set)return Gx;break;case"get":if(t instanceof Map)return Qx;break;case"set":if(t instanceof Map)return _x;break;case"has":return Wx;case"keys":return Jx;case"values":return tk;case"entries":return ek;case Symbol.iterator:return t instanceof Map?ek:tk}return vx(ux(t,e,n))}};function Kx(t,e){var n;const i=bx(this);return null===(n=lx())||void 0===n||n.observeCollection(i),i.forEach(((n,i)=>{t.call(e,vx(n),vx(i),this)}))}function Wx(t){var e;const n=bx(this);return null===(e=lx())||void 0===e||e.observeCollection(n),n.has(wx(t))}function Qx(t){var e;const n=bx(this);return null===(e=lx())||void 0===e||e.observeCollection(n),vx(n.get(wx(t)))}function _x(t,e){return vx(bx(this).set(wx(t),wx(e)))}function Gx(t){return vx(bx(this).add(wx(t)))}function Xx(){return vx(bx(this).clear())}function Yx(t){return vx(bx(this).delete(wx(t)))}function Jx(){var t;const e=bx(this);null===(t=lx())||void 0===t||t.observeCollection(e);const n=e.keys();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:vx(e),done:i}},[Symbol.iterator](){return this}}}function tk(){var t;const e=bx(this);null===(t=lx())||void 0===t||t.observeCollection(e);const n=e.values();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:vx(e),done:i}},[Symbol.iterator](){return this}}}function ek(){var t;const e=bx(this);null===(t=lx())||void 0===t||t.observeCollection(e);const n=e.entries();return{next(){const t=n.next(),e=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[vx(e[0]),vx(e[1])],done:i}},[Symbol.iterator](){return this}}}Object.freeze({getProxy:mx,getRaw:bx,wrap:vx,unwrap:wx,rawKey:gx});class nk{constructor(t,e,n,i,s){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=n,this.up=i,this.oL=s}static create(t,e,n,i,s){const r=n.get,o=n.set,a=new nk(t,r,o,s,i),l=()=>a.getValue();return l.getObserver=()=>a,Jm(t,e,{enumerable:n.enumerable,configurable:!0,get:l,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!tb(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){ik=this.ov,this.ov=this.v,this.subs.notify(this.v,ik,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return cx(this),this.v=wx(this.get.call(this.up?vx(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,hx(this)}}}let ik;Ey(nk),dw(nk),bw(nk);const sk=xn.createInterface("IDirtyChecker",(t=>t.singleton(ak))),rk={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},ok={persistent:!0};class ak{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(rk.disabled)return;if(++this.j<rk.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let n,i=0;for(;i<e;++i)n=t[i],n.isDirty()&&this.queue.add(n)}}createProperty(t,e){if(rk.throw)throw new Error(`AUR0222:${e}`);return new lk(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,ok))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}ak.inject=[ri],bw(ak);class lk{constructor(t,e,n){this.obj=e,this.key=n,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}dw(lk);class ck{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}let hk;class uk{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){hk=this.ov,this.ov=this.v,this.subs.notify(this.v,hk,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Jm(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(Jm(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class dk{constructor(t,e,n,i){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=n,this.hs=tb(n);const s=t[e];this.cb=tb(s)?s:void 0,this.v=i}getValue(){return this.v}setValue(t,e){var n;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(n=this.cb)||void 0===n||n.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){hk=this.ov,this.ov=this.v,this.subs.notify(this.v,hk,this.f)}}dw(uk),dw(dk),bw(uk),bw(dk);const pk=new class{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,n,i){n[i]=t}},fk=xn.createInterface("IObserverLocator",(t=>t.singleton(mk))),gk=xn.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(pi).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new vk)))));class vk{handles(){return!1}getObserver(){return pk}getAccessor(){return pk}}class mk{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var n,i;return null!==(i=null===(n=t.$observers)||void 0===n?void 0:n[e])&&void 0!==i?i:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var n;const i=null===(n=t.$observers)||void 0===n?void 0:n[e];return void 0!==i?i:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):pk}getArrayObserver(t){return Ww(t)}getMapObserver(t){return gy(t)}getSetObserver(t){return sy(t)}createObserver(t,e){var n,i,s,r;if(!(t instanceof Object))return new ck(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return Ww(t).getLengthObserver();break;case"size":if(t instanceof Map)return gy(t).getLengthObserver();if(t instanceof Set)return sy(t).getLengthObserver();break;default:if(t instanceof Array&&Ve(e))return Ww(t).getIndexObserver(Number(e))}let o=wk(t,e);if(void 0===o){let n=bk(t);for(;null!==n&&(o=wk(n,e),void 0===o);)n=bk(n)}if(void 0!==o&&!Ym.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(i=null===(n=o.get)||void 0===n?void 0:n.getObserver)&&void 0!==i?i:null===(s=o.set)||void 0===s?void 0:s.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?nk.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new uk(t,e)}N(t,e,n){if(this.F.length>0)for(const i of this.F){const s=i.getObserver(t,e,n,this);if(null!=s)return s}return null}V(t,e,n){return!0===n.doNotCache?n:void 0===t.$observers?(Jm(t,"$observers",{value:{[e]:n}}),n):t.$observers[e]=n}}mk.inject=[sk,gk];const bk=Object.getPrototypeOf,wk=Object.getOwnPropertyDescriptor;xn.createInterface("IObservation",(t=>t.singleton(yk)));class yk{constructor(t){this.oL=t}static get inject(){return[fk]}run(t){const e=new xk(this.oL,t);return e.run(),e}}class xk{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{cx(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,hx(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}Ey(xk);class kk{constructor(t,e,n,i={}){this.router=t,this.name=e,this.connectedCE=n,this.options=i,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}get activeContent(){var t;return null!==(t=this.getNextContent())&&void 0!==t?t:this.getContent()}get connectedScope(){var t;return null===(t=this.activeContent)||void 0===t?void 0:t.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){var t,e;return null!==(e=null===(t=this.connectedCE)||void 0===t?void 0:t.$controller)&&void 0!==e?e:null}get isViewport(){return this instanceof _k}get isViewportScope(){return this instanceof zk}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){var n;return this.getContent().delete(),null===(n=this.getNextContent())||void 0===n||n.delete(),!0}canUnload(t){return!0}canLoad(t){return!0}unload(t){}load(t){}}class Sk{constructor(t,e,n,i,s=Xk.create(""),r=Hk.create({instruction:"",fullStateInstruction:""})){var o,a;this.router=t,this.endpoint=e,this.instruction=s,this.navigation=r,this.completed=!1,this.connectedScope=new nS(t,i,n,this),null!==this.router.rootScope&&(null!==(a=null===(o=this.endpoint.connectedScope)||void 0===o?void 0:o.parent)&&void 0!==a?a:this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){var t;null===(t=this.connectedScope.parent)||void 0===t||t.removeChild(this.connectedScope)}}class Ak{constructor(t=null,e="",n=[],i="",s={}){this.match=t,this.matching=e,this.instructions=n,this.remaining=i,this.params=s}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.length>0}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}function Ck(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function Ek(t,e){return function(n,i){e(n,i,t)}}class Tk{static parse(t,e,n,i){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!Tk.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const s=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===s.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);i=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),n=!0);const{instructions:o,remaining:a}=Tk.parse(t,e,r,!1);s[s.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:n,remaining:r}=Tk.parse(t,e,!0,i);s.push(...n),e=r}else if(e.startsWith(t.groupEnd)){n&&(e=e.slice(t.groupEnd.length));let i=0;const r=e.length;for(;i<r;i++){if(e.slice(i,i+t.sibling.length)===t.sibling)return{instructions:s,remaining:e};if(e.slice(i,i+t.groupEnd.length)!==t.groupEnd){if(s.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(i);break}}if(i>=r)return{instructions:s,remaining:e}}else if(e.startsWith(t.sibling)&&!Tk.isAdd(t,e)){if(!n)return{instructions:s,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:n,remaining:i}=Tk.parseOne(t,e);s.push(n),e=i}return{instructions:s,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const n=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let i,s,r,o,a,l=!0;const c=[t.add,t.clear];for(const s of c)if(e===s){i=e,e="",n.shift(),n.shift(),o=t.viewport;break}if(void 0===i)for(const s of c)if(e.startsWith(`${s}${t.viewport}`)){i=s,e=e.slice(`${s}${t.viewport}`.length),n.shift(),n.shift(),o=t.viewport;break}if(void 0===i&&(({token:o,pos:a}=Tk.findNextToken(e,n)),i=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",n.shift(),o===t.parameters&&(({token:o,pos:a}=Tk.findNextToken(e,[t.parametersEnd])),s=e.slice(0,a),e=e.slice(a+o.length),({token:o}=Tk.findNextToken(e,n)),e=e.slice(o.length)),n.shift()),o===t.viewport&&(({token:o,pos:a}=Tk.findNextToken(e,n)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),n.shift(),o===t.noScope&&(l=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(null!=i?i:""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);return{instruction:Xk.create(i,r,s,l),remaining:e}}static findNextToken(t,e){const n={};for(const i of e)t.indexOf(i)>-1&&(n[i]=t.indexOf(i));const i=Math.min(...Object.values(n));for(const t in n)if(n[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}}class $k{constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",n="top-down",i=" > ",s=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=n,this.componentTitleSeparator=i,this.useComponentNames=s,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new $k((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return Ok.for(t).title}apply(t={}){var e,n,i,s,r,o;t="string"==typeof t?{appTitle:t}:t,this.appTitle=null!==(e=t.appTitle)&&void 0!==e?e:this.appTitle,this.appTitleSeparator=null!==(n=t.appTitleSeparator)&&void 0!==n?n:this.appTitleSeparator,this.componentTitleOrder=null!==(i=t.componentTitleOrder)&&void 0!==i?i:this.componentTitleOrder,this.componentTitleSeparator=null!==(s=t.componentTitleSeparator)&&void 0!==s?s:this.componentTitleSeparator,this.useComponentNames=null!==(r=t.useComponentNames)&&void 0!==r?r:this.useComponentNames,this.componentPrefix=null!==(o=t.componentPrefix)&&void 0!==o?o:this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class Ik{constructor(t="@",e="+",n="/",i="(",s=")",r="!",o="(",a=")",l=",",c="=",h="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=n,this.groupStart=i,this.groupEnd=s,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=l,this.parameterKeySeparator=c,this.add=h,this.clear=u,this.action=d}static create(t={}){return new Ik(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return Ok.for(t).separators}apply(t={}){var e,n,i,s,r,o,a,l,c,h,u,d,p;this.viewport=null!==(e=t.viewport)&&void 0!==e?e:this.viewport,this.sibling=null!==(n=t.sibling)&&void 0!==n?n:this.sibling,this.scope=null!==(i=t.scope)&&void 0!==i?i:this.scope,this.groupStart=null!==(s=t.groupStart)&&void 0!==s?s:this.groupStart,this.groupEnd=null!==(r=t.groupEnd)&&void 0!==r?r:this.groupEnd,this.noScope=null!==(o=t.noScope)&&void 0!==o?o:this.noScope,this.parameters=null!==(a=t.parameters)&&void 0!==a?a:this.parameters,this.parametersEnd=null!==(l=t.parametersEnd)&&void 0!==l?l:this.parametersEnd,this.parameterSeparator=null!==(c=t.parameterSeparator)&&void 0!==c?c:this.parameterSeparator,this.parameterKeySeparator=null!==(h=t.parameterKeySeparator)&&void 0!==h?h:this.parameterKeySeparator,this.add=null!==(u=t.add)&&void 0!==u?u:this.add,this.clear=null!==(d=t.clear)&&void 0!==d?d:this.clear,this.action=null!==(p=t.action)&&void 0!==p?p:this.action}}class Rk{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new Rk(t.loadActive,t.viewportNavigating)}static for(t){return Ok.for(t).indicators}apply(t={}){var e,n;this.loadActive=null!==(e=t.loadActive)&&void 0!==e?e:this.loadActive,this.viewportNavigating=null!==(n=t.viewportNavigating)&&void 0!==n?n:this.viewportNavigating}}class Ok{constructor(t=Ik.create(),e=Rk.create(),n=!0,i=null,s=!0,r=0,o=!0,a=!0,l=!0,c=$k.create(),h=["guardedUnload","swapped","completed"],u="attach-next-detach-current"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=n,this.basePath=i,this.useHref=s,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=l,this.title=c,this.navigationSyncStates=h,this.swapOrder=u,this.registrationHooks=[]}static create(t={}){return new Ok(Ik.create(t.separators),Rk.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,$k.create(t.title),t.navigationSyncStates,t.swapOrder)}static for(t){return t instanceof DS?t.options:(t=t instanceof fS?t.configuration:t.get(jS)).options}apply(t){var e,n,i,s,r,o,a,l,c;t=null!=t?t:{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=null!==(e=t.useUrlFragmentHash)&&void 0!==e?e:this.useUrlFragmentHash,this.basePath=null!==(n=t.basePath)&&void 0!==n?n:this.basePath,this.useHref=null!==(i=t.useHref)&&void 0!==i?i:this.useHref,this.statefulHistoryLength=null!==(s=t.statefulHistoryLength)&&void 0!==s?s:this.statefulHistoryLength,this.useDirectRouting=null!==(r=t.useDirectRouting)&&void 0!==r?r:this.useDirectRouting,this.useConfiguredRoutes=null!==(o=t.useConfiguredRoutes)&&void 0!==o?o:this.useConfiguredRoutes,this.additiveInstructionDefault=null!==(a=t.additiveInstructionDefault)&&void 0!==a?a:this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=null!==(l=t.navigationSyncStates)&&void 0!==l?l:this.navigationSyncStates,this.swapOrder=null!==(c=t.swapOrder)&&void 0!==c?c:this.swapOrder,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}var Pk;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(Pk||(Pk={}));class Lk{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new Lk;return e.set(t),e}static parse(t,e,n=!1){if(null==e||0===e.length)return[];const i=Ik.for(t),s=i.parameterSeparator,r=i.parameterKeySeparator;if("string"==typeof e){const t=[],i=e.split(s);for(const e of i){let i,s;[i,s]=e.split(r),void 0===s?(s=n?decodeURIComponent(i):i,i=void 0):n&&(i=decodeURIComponent(i),s=decodeURIComponent(s)),t.push({key:i,value:s})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,n=!1){if(!Array.isArray(e)||0===e.length)return"";const i=Ik.for(t);return e.map((t=>{const e=void 0!==t.key&&n?encodeURIComponent(t.key):t.key,s=n?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==s?e+i.parameterKeySeparator+s:s})).join(i.parameterSeparator)}static contains(t,e){return Object.keys(e).every((n=>e[n]===t[n]))}parameters(t){return Lk.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const n=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==n.length?1===n.length?n[0]:n:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=null!=e?e:[];const n=this.parameters(t),i={};for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const[s]=n.splice(e,1);i[t]=s.value}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const[s]=n.splice(e,1);i[t]=s.value}}for(const t of n.filter((t=>void 0!==t.key)))i[t.key]=t.value;let s=e.length;for(const t of n.filter((t=>void 0===t.key)))i[s++]=t.value;return i}toSortedParameters(t,e){e=e||[];const n=this.parameters(t),i=[];for(const t of e){let e=n.findIndex((e=>e.key===t));if(e>=0){const t={...n.splice(e,1)[0]};t.key=void 0,i.push(t)}else if(e=n.findIndex((t=>void 0===t.key)),e>=0){const t={...n.splice(e,1)[0]};i.push(t)}else i.push({value:void 0})}const s=n.filter((t=>void 0!==t.key));return s.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),i.push(...s),i.push(...n.filter((t=>void 0===t.key))),i}same(t,e,n){const i=null!==n?n.parameters:[],s=this.toSpecifiedParameters(t,i),r=e.toSpecifiedParameters(t,i);return Object.keys(s).every((t=>s[t]===r[t]))&&Object.keys(r).every((t=>r[t]===s[t]))}}class Mk{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new Mk;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return Wh.isType(t.Type)}static isType(t){return Wh.isType(t)}static isInstance(t){return function(t){return oe(t)&&Wh.isType(t.constructor)}(t)}static isAppelation(t){return Mk.isName(t)||Mk.isType(t)||Mk.isInstance(t)}static getName(t){return Mk.isName(t)?t:Mk.isType(t)?Wh.getDefinition(t).name:Mk.getName(t.constructor)}static getType(t){return Mk.isName(t)?null:Mk.isType(t)?t:t.constructor}static getInstance(t){return Mk.isName(t)||Mk.isType(t)?null:t}set(t){let e=null,n=null,i=null,s=null,r=null;t instanceof Promise?s=t:Mk.isName(t)?e=Mk.getName(t):Mk.isType(t)?(e=this.getNewName(t),n=Mk.getType(t)):Mk.isInstance(t)?(e=this.getNewName(Mk.getType(t)),n=Mk.getType(t),i=Mk.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=n,this.instance=i,this.promise=s,this.func=r}resolve(){if(null!==this.func&&this.set(this.func()),this.promise instanceof Promise)return this.promise.then((t=>{if(Mk.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const n=e[0];this.set(t[n])}))}get none(){return!this.isName()&&!this.isType()&&!this.isInstance()}isName(){return!!this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t){if(null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(Wh.keyFrom(this.name),!0)){const e=t.getResolver(Wh.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const n=e.getFactory(t);if(n)return n.Type}}}return null}toInstance(t){if(null!==this.instance)return this.instance;if(null!=t){const e=this.isType()?t.get(this.type):t.get(Wh.keyFrom(this.name));return!this.isType()||e instanceof this.type||console.warn("Failed to instantiate",this.type,e),null!=e?e:null}return null}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?Mk.getName(t):this.name}}function Uk(t,e){const n=[];let i=t.findIndex(e);for(;i>=0;)n.push(t.splice(i,1)[0]),i=t.findIndex(e);return n}function Bk(t,e=!1){return t.filter(((t,n,i)=>(e||null!=t)&&i.indexOf(t)===n))}class Nk{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class jk{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return null==e?void 0:e[0];let s=!1;null===t&&(t=new Fk,s=!0);const r=new Fk(e.shift());return jk.connect(t,r,null!==(i=null==t?void 0:t.runParallel)&&void 0!==i&&i||s),e.length>0&&jk.add(r,!1,...e),s?(jk.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):r}static runParallel(t,...e){var n,i;if(0===(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0))return[];let s=!1;return null===t?(t=new Fk,s=!0):t=jk.connect(t,new Fk,!0),jk.add(t,!0,...e),s&&jk.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?null!==(i=t.result)&&void 0!==i?i:[]:t}static step(t){if(t instanceof Promise)return jk.runners.get(t)}static cancel(t){const e=jk.step(t);void 0!==e&&e.cancel()}static add(t,e,...n){let i=new Fk(n.shift(),e);null!==t&&(i=jk.connect(t,i,e));const s=i;for(;n.length>0;)i=jk.connect(i,new Fk(n.shift(),e),!1);return s}static connect(t,e,n){if(n){const n=t.child;t.child=e,e.parent=t,e.next=n,null!==n&&(n.parent=null,n.previous=e)}else{const n=t.next;t.next=e,e.previous=t,e.next=n,null!==n&&(n.previous=e,n.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)jk.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const n=t.value;jk.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,jk.settlePromise(t),t.isDone=!0,t.isDoing=!1;const n=t.nextToDo();null===n||t.isExited?(t.root.doneAll||t.isExited)&&jk.settlePromise(t.root):jk.process(n)})).catch((t=>{throw t}))})(t,n)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?jk.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&jk.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new Nk,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){var n,i,s,r;if(null!==(i=null===(n=t.finally)||void 0===n?void 0:n.isPending)&&void 0!==i&&i)switch(t.promise=null,e){case"resolve":null===(s=t.finally)||void 0===s||s.resolve(t.result);break;case"reject":null===(r=t.finally)||void 0===r||r.reject(t.result)}}}jk.runners=new WeakMap,jk.roots={};class Fk{constructor(t,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+Fk.id++}get isParallelParent(){var t,e;return null!==(e=null===(t=this.child)||void 0===t?void 0:t.runParallel)&&void 0!==e&&e}get result(){var t,e;if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:null===(e=null===(t=this.child)||void 0===t?void 0:t.tail)||void 0===e?void 0:e.result}let n=this.value;for(;n instanceof Fk;)n=n.result;return n}get asValue(){return this.result}get previousValue(){var t,e,n,i;return this.runParallel?null===(n=null===(e=null===(t=this.head.parent)||void 0===t?void 0:t.parent)||void 0===e?void 0:e.previous)||void 0===n?void 0:n.result:null===(i=this.previous)||void 0===i?void 0:i.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){var e,n;return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,null===(e=this.child)||void 0===e||e.cancel(!1),null===(n=this.next)||void 0===n||n.cancel(!1),!0)}exit(t=!0){var e,n;return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,null===(e=this.child)||void 0===e||e.exit(!1),null===(n=this.next)||void 0===n||n.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){var t;let e=this.next;for(;null!==e;){if(!e.isDoing&&!e.isDone)return e;e=e.next}const n=null!==(t=this.head.parent)&&void 0!==t?t:null;return null!==n&&n.done?n.nextOrUp():null}get path(){var t,e;return`${null!==(e=null===(t=this.head.parent)||void 0===t?void 0:t.path)&&void 0!==e?e:""}/${this.name}`}get tree(){let t="",e=this.head,n=e.parent,i="";for(;null!==n;)i=`${n.path}${i}`,n=n.head.parent;do{if(t+=`${i}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){var t,e,n,i;let s=`${this.path}\n`;return s+=null!==(e=null===(t=this.child)||void 0===t?void 0:t.report)&&void 0!==e?e:"",s+=null!==(i=null===(n=this.next)||void 0===n?void 0:n.report)&&void 0!==i?i:"",s}}Fk.id=0;class Vk{constructor(t,e,n,i,s,r,o,a){this.path=t,this.id=e,this.redirectTo=n,this.instructions=i,this.caseSensitive=s,this.title=r,this.reloadBehavior=o,this.data=a}static isConfigured(t){return jm.hasOwn(Vk.resourceKey,t)||"parameters"in t||"title"in t}static configure(t,e){const n=Vk.create(t,e);return jm.define(Vk.resourceKey,n,e),e}static getConfiguration(t){var e;const n=null!==(e=jm.getOwn(Vk.resourceKey,t))&&void 0!==e?e:{};return Array.isArray(t.parameters)&&(n.parameters=t.parameters),"title"in t&&(n.title=t.title),n instanceof Vk?n:Vk.create(n,t)}static create(t,e=null){var n,i,s,r,o,a,l,c,h;null!==e&&(t=Vk.transferTypeToComponent(t,e)),Wh.isType(t)?t=Vk.getConfiguration(t):null===e&&(t={...t});const u=Vk.transferIndividualIntoInstructions(t);Vk.validateRouteConfiguration(u);let d=u.path;return Array.isArray(d)&&(d=d.join(",")),new Vk(null!==(n=u.path)&&void 0!==n?n:"",null!==(s=null!==(i=u.id)&&void 0!==i?i:d)&&void 0!==s?s:null,null!==(r=u.redirectTo)&&void 0!==r?r:null,null!==(o=u.instructions)&&void 0!==o?o:null,null!==(a=u.caseSensitive)&&void 0!==a&&a,null!==(l=u.title)&&void 0!==l?l:null,null!==(c=u.reloadBehavior)&&void 0!==c?c:null,null!==(h=u.data)&&void 0!==h?h:null)}static transferTypeToComponent(t,e){var n;if(Wh.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const i=null!==(n={...t})&&void 0!==n?n:{};if("component"in i||"instructions"in i)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in i||(i.component=e),"path"in i||"redirectTo"in i||(i.path=Wh.getDefinition(e).name),i}static transferIndividualIntoInstructions(t){var e,n,i,s;if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(null!==(e=t.component)&&void 0!==e?e:null)||null!==(null!==(n=t.viewport)&&void 0!==n?n:null)||null!==(null!==(i=t.parameters)&&void 0!==i?i:null)||null!==(null!==(s=t.children)&&void 0!==s?s:null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}Vk.resourceKey=dn.resource.keyFor("route");const Dk={name:dn.resource.keyFor("routes"),isConfigured:t=>jm.hasOwn(Dk.name,t)||"routes"in t,configure(t,e){const n=t.map((t=>Vk.create(t)));return jm.define(Dk.name,n,e),e},getConfiguration(t){const e=t,n=[],i=jm.getOwn(Dk.name,t);return Array.isArray(i)&&n.push(...i),Array.isArray(e.routes)&&n.push(...e.routes),n.map((t=>t instanceof Vk?t:Vk.create(t)))}};class Zk extends Sk{}class zk extends kk{constructor(t,e,n,i,s,r=null,o={catches:[],source:null}){super(t,e,n),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new Zk(t,this,i,s)),this.catches.length>0&&(this.instruction=Xk.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){var t;return null!==(t=this.options.source)&&void 0!==t?t:null}get catches(){var t;let e=null!==(t=this.options.catches)&&void 0!==t?t:[];return"string"==typeof e&&(e=e.split(",")),e}get default(){if(this.catches.length>0)return this.catches[0]}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.instruction)||void 0===t?void 0:t.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`vs:${this.name}[${s}->${r}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new Zk(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){jk.run(null,(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){var n;const i=this.contents.findIndex((e=>e.navigation===t.navigation));let s=this.contents[i];if(this.remove){const t=new Zk(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(i,1,t),s.delete(),s=t}s.completed=!0;let r=0;for(let t=0,e=i;t<e&&null!==(n=this.contents[0].navigation.completed)&&void 0!==n&&n;t++)r++;this.contents.splice(0,r),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation));if(this.contents.splice(n,1),this.add){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===Xk.clear(this.router)||t===Xk.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&Uk(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){if(null!==this.rootComponentType){const t=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;return Dk.getConfiguration(t)}return null}}class qk{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class Hk extends class{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}{constructor(t={instruction:"",fullStateInstruction:""}){var e,n,i,s,r,o;super(t),this.navigation=new qk,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=null!==(e=t.fromBrowser)&&void 0!==e?e:this.fromBrowser,this.origin=null!==(n=t.origin)&&void 0!==n?n:this.origin,this.replacing=null!==(i=t.replacing)&&void 0!==i?i:this.replacing,this.refreshing=null!==(s=t.refreshing)&&void 0!==s?s:this.refreshing,this.untracked=null!==(r=t.untracked)&&void 0!==r?r:this.untracked,this.historyMovement=null!==(o=t.historyMovement)&&void 0!==o?o:this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){var t,e,n;return null!==(t=this.navigation.back)&&void 0!==t&&t||null!==(e=this.navigation.forward)&&void 0!==e&&e||null!==(n=this.navigation.refresh)&&void 0!==n&&n}static create(t={instruction:"",fullStateInstruction:""}){return new Hk(t)}}class Kk{constructor(){this.map=new Map}set(t,e){const n=this.map.get(t);n instanceof Nk&&n.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof Nk&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new Nk;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof Nk?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof Nk)}clone(){const t=new Kk;return t.map=new Map(this.map),t}}class Wk extends Sk{constructor(t,e,n,i,s=Xk.create(""),r=Hk.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,n,i,s,r),this.router=t,this.instruction=s,this.navigation=r,this.contentStates=new Kk,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==(null==o?void 0:o.container)||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){var t,e;return this.instruction.route instanceof Ak&&null!==(null===(t=this.instruction.route.match)||void 0===t?void 0:t.reloadBehavior)?null===(e=this.instruction.route.match)||void 0===e?void 0:e.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){var e,n;return this.instruction.sameComponent(this.router,t.instruction,!0)&&(null!==(e=this.navigation.query)&&void 0!==e?e:"")===(null!==(n=t.navigation.query)&&void 0!==n?n:"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return Ru.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(n){if(""===(null!=e?e:""))throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`);this.instruction.parameters.set([this.instruction.component.name]),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container))}catch(t){throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`)}}this.contentStates.set("created",void 0),this.contentStates.has("loaded")||!this.instruction.component.instance||this.fromCache&&this.fromHistory||(this.contentController(t).parent=t.controller)}}canLoad(){var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const i=this.instruction.component.instance;if(null==i)return!0;this.contentStates.set("checkedLoad",void 0);const s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"canLoad").map((t=>e=>{const n=t(i,o,this.instruction,this.navigation);return"boolean"==typeof n?(!1===n&&e.exit(),n):"string"==typeof n?(e.exit(),[Xk.create(n,this.endpoint)]):n}));if(0!==a.length){const t=jk.run(null,...a);if(!0!==t)return!1!==t&&("string"==typeof t?[Xk.create(t,this.endpoint)]:t)}if(null==i.canLoad)return!0;const l=i.canLoad(o,this.instruction,this.navigation);return"boolean"==typeof l?l:"string"==typeof l?[Xk.create(l,this.endpoint)]:l}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=Hk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"canUnload").map((n=>i=>{const s=n(e,this.instruction,t);return"boolean"==typeof s?(!1===s&&i.exit(),s):s}));if(0!==n.length){const t=jk.run(null,...n);if(!0!==t)return!1!==t&&t}if(!e.canUnload)return!0;const i=e.canUnload(this.instruction,t);if("boolean"!=typeof i&&!(i instanceof Promise))throw new Error(`Method 'canUnload' in component "${this.instruction.component.name}" needs to return true or false or a Promise resolving to true or false.`);return i}load(t){return jk.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{var t,e,n;if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const i=this.instruction.component.instance,s=null===(n=null===(e=null===(t=this.endpoint.parentViewport)||void 0===t?void 0:t.getTimeContent(this.navigation.timestamp))||void 0===e?void 0:e.instruction)||void 0===n?void 0:n.typeParameters(this.router),r=this.instruction.typeParameters(this.router),o={...this.navigation.parameters,...s,...r},a=this.getLifecycleHooks(i,"load").map((t=>()=>t(i,o,this.instruction,this.navigation)));return 0!==a.length?(null!=i.load&&a.push((()=>i.load(o,this.instruction,this.navigation))),jk.run(null,...a)):null!=i.load?i.load(o,this.instruction,this.navigation):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=Hk.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const n=this.getLifecycleHooks(e,"unload").map((n=>()=>n(e,this.instruction,t)));return 0!==n.length?(null!=e.unload&&n.push((()=>e.unload(this.instruction,t))),jk.run(null,...n)):null!=e.unload?e.unload(this.instruction,t):void 0}activateComponent(t,e,n,i,s,r,o){return jk.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(n)),(()=>{if(this.contentStates.has("activating")||this.contentStates.has("activated"))return;this.contentStates.set("activating",void 0);const t=this.contentController(s);return t.activate(null!=e?e:t,n,i,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,n,i,s,r=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return jk.run(t,(()=>{if(r&&null!==s.element){const t=Array.from(s.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}this.contentStates.delete("activated"),this.contentStates.delete("activating");const t=this.contentController(s);return t.deactivate(null!=e?e:t,n,i)}))}disposeComponent(t,e,n=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance){if(!n)return this.contentStates.delete("created"),this.contentController(t).dispose();e.push(this)}}freeContent(t,e,n,i,s=!1){return jk.run(t,(()=>this.unload(n)),(t=>this.deactivateComponent(t,null,e.controller,0,e,s)),(()=>this.disposeComponent(e,i,s)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t)}toComponentInstance(t){return this.instruction.component.none?null:this.instruction.component.toInstance(t)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}getLifecycleHooks(t,e){var n;return(null!==(n=t.$controller.lifecycleHooks[e])&&void 0!==n?n:[]).map((t=>t.instance[e].bind(t.instance)))}}class Qk{constructor(t=!0,e=[],n="",i="",s=!1,r=!1,o=!1,a=!1,l=!1){this.scope=t,this.usedBy=e,this.fallback=i,this.noLink=s,this.noTitle=r,this.stateful=o,this.forceDescription=a,this.noHistory=l,this.default=void 0,this.default=n}static create(t){const e=new Qk;return void 0!==t&&e.apply(t),e}apply(t){var e,n,i,s,r,o,a,l,c;this.scope=null!==(e=t.scope)&&void 0!==e?e:this.scope,this.usedBy=null!==(n="string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)&&void 0!==n?n:this.usedBy,this.default=null!==(i=t.default)&&void 0!==i?i:this.default,this.fallback=null!==(s=t.fallback)&&void 0!==s?s:this.fallback,this.noLink=null!==(r=t.noLink)&&void 0!==r?r:this.noLink,this.noTitle=null!==(o=t.noTitle)&&void 0!==o?o:this.noTitle,this.stateful=null!==(a=t.stateful)&&void 0!==a?a:this.stateful,this.forceDescription=null!==(l=t.forceDescription)&&void 0!==l?l:this.forceDescription,this.noHistory=null!==(c=t.noHistory)&&void 0!==c?c:this.noHistory}}class _k extends kk{constructor(t,e,n,i,s,r){super(t,e,n),this.contents=[],this.forceRemove=!1,this.options=new Qk,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new Wk(t,this,i,s)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){var t;if(1===this.contents.length)return this.contents[0];let e;for(let n=0,i=this.contents.length;n<i&&null!==(t=this.contents[n].completed)&&void 0!==t&&t;n++)e=this.contents[n];return e}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let n=0,i=this.contents.length;n<i&&!(this.contents[n].navigation.timestamp>t);n++)e=this.contents[n];return e}get parentViewport(){let t=this.connectedScope;for(;null!=(null==t?void 0:t.parent);)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){var t,e,n,i;const s=null!==(e=null===(t=this.getContent())||void 0===t?void 0:t.instruction.component.name)&&void 0!==e?e:"",r=null!==(i=null===(n=this.getNextContent())||void 0===n?void 0:n.instruction.component.name)&&void 0!==i?i:"";return`v:${this.name}[${s}->${r}]`}setNextContent(t,e){var n;t.endpoint.set(this),this.clear=t.isClear(this.router);const i=this.contents[this.contents.length-1],s=new Wk(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,null!==(n=this.connectedCE)&&void 0!==n?n:null);if(this.contents.push(s),s.fromHistory=!(null===s.componentInstance||!e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>s.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(s),1,t),s.fromCache=!0):this.cache.push(s)}return null!==s.componentInstance&&i.componentInstance===s.componentInstance?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):!i.equalComponent(s)||e.navigation.refresh||"refresh"===i.reloadBehavior?this.transitionAction="swap":"disallow"===i.reloadBehavior?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):"reload"===i.reloadBehavior?(i.reload=!0,s.instruction.component.set(i.componentInstance),s.contentStates=i.contentStates.clone(),s.reload=i.reload,this.transitionAction="reload"):this.options.stateful&&i.equalParameters(s)||i.equalParameters(s)?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){var n,i,s,r,o;e=null!=e?e:{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),null!=this.connectionResolve&&this.connectionResolve());const a=(null!==(i=null===(n=this.scope.parent)||void 0===n?void 0:n.endpoint.getRoutes())&&void 0!==i?i:[]).filter((t=>""===t.path)).length>0;if(null===this.getContent().componentInstance&&null==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance)&&(this.options.default||a)){const t=Xk.parse(this.router,null!==(r=this.options.default)&&void 0!==r?r:"");if(0===t.length&&a){const e=null===(o=this.scope.parent)||void 0===o?void 0:o.findInstructions([Xk.create("")],!1,this.router.configuration.options.useConfiguredRoutes);(null==e?void 0:e.foundConfiguration)&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&jk.run(t,(t=>{var e,n;if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),jk.run(t,...e)}return!0}))}async transition(t){var e,n,i,s;const r=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let o=this.parentViewport;null!==o&&"reload"!==o.transitionAction&&"swap"!==o.transitionAction&&(o=null);const a=[e=>{if(this.isActiveNavigation(t))return this.canUnload(e)},e=>{this.isActiveNavigation(t)&&(e.previousValue?this.router.isRestrictedNavigation&&this.getNextContent().createComponent(this.connectedCE,this.options.fallback):t.cancel()),t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==o?t.waitForEndpointState(o,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(e)},e=>{if(this.isActiveNavigation(t)){const n=e.previousValue;if("boolean"!=typeof n)return jk.run(e,(()=>this.router.load(n,{append:!0})),(e=>this.cancelContentChange(t,e)));if(!n)return e.cancel(),void t.cancel()}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],l=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==o?t.waitForEndpointState(o,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],c=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":c.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":c.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":c.push((e=>jk.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":c.push((e=>jk.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}c.push((()=>t.addEndpointState(this,"swapped"))),null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!0),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!0);const h=jk.run(null,(e=>t.setEndpointStep(this,e.root)),...a,...l,...c,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{var e,n,i,s;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,r,!1),null===(s=null===(i=this.connectedCE)||void 0===i?void 0:i.setActivity)||void 0===s||s.call(i,t.navigation.navigation,!1)}));h instanceof Promise&&h.catch((t=>{}))}canUnload(t){return jk.run(t,(t=>this.getContent().connectedScope.canUnload(t)),(t=>{var e,n;return!!t.previousValue&&this.getContent().canUnload(null!==(n=null===(e=this.getNextContent())||void 0===e?void 0:e.navigation)&&void 0!==n?n:null)}))}canLoad(t){return!!this.clear||jk.run(t,(()=>this.waitForConnected()),(()=>(this.getNextContent().createComponent(this.connectedCE,this.options.fallback),this.getNextContent().canLoad())))}load(t){if(!this.clear)return this.getNextContent().load(t)}addContent(t,e){return this.activate(t,null,this.connectedController,0,e)}removeContent(t,e){var n;if(this.isEmpty)return;const i=this.router.statefulHistory||null!==(n=this.options.stateful)&&void 0!==n&&n;return jk.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController,i?0:16)),(()=>i?this.dispose():void 0))}activate(t,e,n,i,s){if(null!==this.activeContent.componentInstance)return jk.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,n,i,this.connectedCE,(()=>null==s?void 0:s.addEndpointState(this,"bound")),null==s?void 0:s.waitForSyncState("bound"))))}deactivate(t,e,n,i){var s;const r=this.getContent();if(null!=(null==r?void 0:r.componentInstance)&&!r.reload&&r.componentInstance!==(null===(s=this.getNextContent())||void 0===s?void 0:s.componentInstance))return r.deactivateComponent(t,e,n,i,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t){return jk.run(t,(t=>this.getContent().connectedScope.unload(t)),(()=>{var t,e;return null!=this.getContent().componentInstance?this.getContent().unload(null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.navigation)&&void 0!==e?e:null):void 0}))}dispose(){var t;null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===(null===(t=this.getNextContent())||void 0===t?void 0:t.componentInstance)||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){var n,i,s,r,o;const a=this.contents.findIndex((e=>e.navigation===t.navigation));let l=this.contents[a];const c=this.contents[a-1];if(this.clear){const t=new Wk(this.router,this,this.owningScope,this.scope.hasScope,void 0,l.navigation);this.contents.splice(a,1,t),l.delete(),l=t}else l.reload=!1;c.delete(),l.completed=!0,this.transitionAction="",l.contentStates.delete("checkedUnload"),l.contentStates.delete("checkedLoad"),this.previousViewportState=null;const h=this.router.configuration.options.indicators.viewportNavigating;null===(i=null===(n=this.connectedCE)||void 0===n?void 0:n.setActivity)||void 0===i||i.call(n,h,!1),null===(r=null===(s=this.connectedCE)||void 0===s?void 0:s.setActivity)||void 0===r||r.call(s,t.navigation.navigation,!1);let u=0;for(let t=0,e=a;t<e&&null!==(o=this.contents[0].navigation.completed)&&void 0!==o&&o;t++)u++;this.contents.splice(0,u),Uk(this.coordinators,(e=>e===t))}cancelContentChange(t,e){const n=this.contents.findIndex((e=>e.navigation===t.navigation)),i=this.contents[n],s=this.contents[n-1];return jk.run(e,(t=>{if(null!=i)return i.freeContent(t,this.connectedCE,i.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)}),(()=>{var e,n,r,o;this.previousViewportState&&Object.assign(this,this.previousViewportState),null==i||i.delete(),null!==i&&this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="",null==s||s.contentStates.delete("checkedUnload"),null==s||s.contentStates.delete("checkedLoad");const a=this.router.configuration.options.indicators.viewportNavigating;null===(n=null===(e=this.connectedCE)||void 0===e?void 0:e.setActivity)||void 0===n||n.call(e,a,!1),null===(o=null===(r=this.connectedCE)||void 0===r?void 0:r.setActivity)||void 0===o||o.call(r,t.navigation.navigation,!1),t.removeEndpoint(this),Uk(this.coordinators,(e=>e===t))}),(()=>null==e?void 0:e.exit()))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const n=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==n)return jk.run(t,(t=>(this.forceRemove=!0,n.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,Uk(this.historyCache,(t=>t===n))}))}getRoutes(){let t=this.getComponentType();if(null===t)return null;t=t.constructor===t.constructor.constructor?t:t.constructor;const e=Dk.getConfiguration(t);return Array.isArray(e)?e:null}getTitle(t){var e,n;if(this.options.noTitle)return"";const i=this.getComponentType();if(null===i)return"";let s="";const r=i.title;if(void 0!==r)if("string"==typeof r)s=r;else{const e=this.getComponentInstance();s=r.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=null!==(e=this.getContentInstruction().component.name)&&void 0!==e?e:"";const i=null!==(n=this.router.configuration.options.title.componentPrefix)&&void 0!==n?n:"";t.startsWith(i)&&(t=t.slice(i.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){var t;let e=null!==(t=this.getContentInstruction().component.type)&&void 0!==t?t:null;return null===e&&(e=Wh.for(this.connectedCE.element).container.componentType),null!=e?e:null}getComponentInstance(){var t;return null!==(t=this.getContentInstruction().component.instance)&&void 0!==t?t:null}getContentInstruction(){var t,e,n;return null!==(n=null!==(e=null===(t=this.getNextContent())||void 0===t?void 0:t.instruction)&&void 0!==e?e:this.getContent().instruction)&&void 0!==n?n:null}clearState(){this.options=Qk.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new Wk(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class Gk{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof _k?"Viewport":this.instance instanceof zk?"ViewportScope":null}static create(t){const e=new Gk;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof kk}static getName(t){return Gk.isName(t)?t:t?t.name:null}static getInstance(t){return Gk.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class Xk{constructor(t,e,n){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.component=Mk.create(t),this.endpoint=Gk.create(e),this.parameters=Lk.create(n)}static create(t,e,n,i=!0,s=null){const r=new Xk(t,e,n);return r.ownsScope=i,r.nextScopeInstructions=s,r}static createClear(t,e){return Xk.create(Xk.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const n=[];for(const i of e)if("string"==typeof i)n.push(...Xk.parse(t,i));else if(i instanceof Xk)n.push(i);else if(i instanceof Promise)n.push(Xk.create(i));else if(Mk.isAppelation(i))n.push(Xk.create(i));else if(Mk.isDefinition(i))n.push(Xk.create(i.Type));else if("component"in i){const e=i,s=Xk.create(e.component,e.viewport,e.parameters);void 0!==e.children&&null!==e.children&&(s.nextScopeInstructions=Xk.from(t,e.children)),n.push(s)}else if("object"==typeof i&&null!==i){const t=Wh.define(i);n.push(Xk.create(t))}else n.push(Xk.create(i));return n}static clear(t){return Ik.for(t).clear}static add(t){return Ik.for(t).add}static parse(t,e){const n=Ik.for(t);let i="";const s=/^[./]+/.exec(e);Array.isArray(s)&&s.length>0&&(i=s[0],e=e.slice(i.length));const r=Tk.parse(n,e,!0,!0).instructions;for(const t of r)t.scopeModifier=i;return r}static stringify(t,e,n=!1,i=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,n,i))).filter((t=>t.length>0)).join(Ik.for(t).sibling)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>Xk.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const n of t)e.push(n),n.hasNextScopeInstructions&&e.push(...Xk.flat(n.nextScopeInstructions));return e}static clone(t,e=!1,n=!1){return t.map((t=>t.clone(e,n)))}static contains(t,e,n,i){return n.every((n=>n.isIn(t,e,i)))}get viewport(){return this.endpoint.instance instanceof _k||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof zk||null===this.endpoint.endpointType?this.endpoint:null}get previous(){var t,e;return null===(e=null===(t=this.endpoint.instance)||void 0===t?void 0:t.getContent())||void 0===e?void 0:e.instruction}isAdd(t){return this.component.name===Ik.for(t).add}isClear(t){return this.component.name===Ik.for(t).clear}isAddAll(t){var e,n;return this.isAdd(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}isClearAll(t){var e,n;return this.isClear(t)&&0===(null!==(n=null===(e=this.endpoint.name)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}get hasNextScopeInstructions(){var t,e;return(null!==(e=null===(t=this.nextScopeInstructions)||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0}typeParameters(t){var e,n;return this.parameters.toSpecifiedParameters(t,null!==(n=null===(e=this.component.type)||void 0===e?void 0:e.parameters)&&void 0!==n?n:[])}sameComponent(t,e,n=!1,i=!1){return!(n&&!this.sameParameters(t,e,i))&&this.component.same(e.component,i)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,n=!1){return!!this.component.same(e.component,n)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,n=!1){var i,s,r,o,a;const l=Ik.for(t);let c=e,h=!1;if(n){const t=null!==(s=null===(i=this.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==(r=null==t?void 0:t.options.noLink)&&void 0!==r&&r)return"";this.needsEndpointDescribed||null!==(o=null==t?void 0:t.options.forceDescription)&&void 0!==o&&o&&null==(null===(a=this.viewportScope)||void 0===a?void 0:a.instance)||(c=!0),(null==t?void 0:t.options.fallback)===this.component.name&&(h=!0),(null==t?void 0:t.options.default)===this.component.name&&(h=!0)}const u=this.nextScopeInstructions;let d=this.scopeModifier;if(null!==this.route){if(!this.routeStart)return Array.isArray(u)?Xk.stringify(t,u,e,n):"";const i=this.route.matching;d+=i.endsWith(l.scope)?i.slice(0,-l.scope.length):i}else d+=this.stringifyShallow(t,c,h);if(Array.isArray(u)&&u.length>0){const i=Xk.stringify(t,u,e,n);i.length>0&&(d+=l.scope,d+=1===u.length?i:`${l.groupStart}${i}${l.groupEnd}`)}return d}clone(t=!1,e=!1,n=!1){var i,s,r,o,a,l;const c=Xk.create(null!==(r=null!==(s=null!==(i=this.component.func)&&void 0!==i?i:this.component.promise)&&void 0!==s?s:this.component.type)&&void 0!==r?r:this.component.name,this.endpoint.name,null!==this.parameters.typedParameters?this.parameters.typedParameters:void 0);return t&&(c.component.set(null!==(a=null!==(o=this.component.instance)&&void 0!==o?o:this.component.type)&&void 0!==a?a:this.component.name),c.endpoint.set(null!==(l=this.endpoint.instance)&&void 0!==l?l:this.endpoint.name)),c.component.name=this.component.name,c.needsEndpointDescribed=this.needsEndpointDescribed,c.route=this.route,c.routeStart=this.routeStart,c.default=this.default,e&&(c.scopeModifier=this.scopeModifier),c.scope=t?this.scope:null,this.hasNextScopeInstructions&&!n&&(c.nextScopeInstructions=Xk.clone(this.nextScopeInstructions,t,e)),c}isIn(t,e,n){const i=e.filter((e=>{var n,i;if(!e.sameComponent(t,this))return!1;const s=null!==(n=e.component.type)&&void 0!==n?n:this.component.type,r=null!==(i=this.component.type)&&void 0!==i?i:e.component.type,o=e.parameters.toSpecifiedParameters(t,null==s?void 0:s.parameters),a=this.parameters.toSpecifiedParameters(t,null==r?void 0:r.parameters);return!!Lk.contains(o,a)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===i.length||n&&this.hasNextScopeInstructions&&!i.some((e=>{var i;return Xk.contains(t,null!==(i=e.nextScopeInstructions)&&void 0!==i?i:[],this.nextScopeInstructions,n)})))}getTitle(t){var e;if(null!==this.route){const n=null===(e=this.route.match)||void 0===e?void 0:e.title;if(null!=n)return this.routeStart?"string"==typeof n?n:n(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){var t,e,n;return{component:null!==(t=this.component.name)&&void 0!==t?t:void 0,viewport:null!==(e=this.endpoint.name)&&void 0!==e?e:void 0,parameters:null!==(n=this.parameters.parametersRecord)&&void 0!==n?n:void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,n=!1){var i;const s=Ik.for(t);let r=n?"":null!==(i=this.component.name)&&void 0!==i?i:"";const o=this.component.type?this.component.type.parameters:null,a=Lk.stringify(t,this.parameters.toSortedParameters(t,o));return a.length>0&&(r+=n?a:`${s.parameters}${a}${s.parametersEnd}`),null==this.endpoint.name||e||(r+=`${s.viewport}${this.endpoint.name}`),this.ownsScope||(r+=s.noScope),r||""}}class Yk{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new Yk(Yk.eventName,t)}}Yk.eventName="au:router:navigation-navigate";let Jk=class{constructor(t,e){this.ea=t,this.container=e,this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=Hk.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.lastNavigationIndex=-1}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){var e,n,i,s;t instanceof Hk||(t=Hk.create(t));const r=new qk;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?r.refresh=!0:(r.first=!0,r.new=!0,this.lastNavigationIndex=0,this.navigations=[Hk.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||null!==(e=t.replacing)&&void 0!==e&&e||null!==(n=t.refreshing)&&void 0!==n&&n?null!==(i=t.refreshing)&&void 0!==i&&i||r.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):null!==(s=t.replacing)&&void 0!==s&&s?(r.replace=!0,r.new=!0,t.index=this.lastNavigationIndex):(r.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?r.forward=!0:t.historyMovement<0&&(r.back=!0)),t.navigation=r,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new Nk,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){var n,i,s,r,o,a,l;if(null!==(n=t.untracked)&&void 0!==n&&n)null!==(i=t.fromBrowser)&&void 0!==i&&i&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(null!==(s=t.replacing)&&void 0!==s&&s)0===(null!==(r=t.historyMovement)&&void 0!==r?r:0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const n=t.index;if(e&&(this.navigations=this.navigations.slice(0,n)),this.navigations[n]=t,(null!==(o=this.options.statefulHistoryLength)&&void 0!==o?o:0)>0){const t=this.navigations.length-(null!==(a=this.options.statefulHistoryLength)&&void 0!==a?a:0);for(const e of this.navigations.slice(n))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,n))}await this.saveState(t.index,!(null!==(l=t.fromBrowser)&&void 0!==l&&l))}}async cancel(t){var e,n,i;null!=this.options.store&&((null===(e=t.navigation)||void 0===e?void 0:e.new)?null!==(n=t.fromBrowser)&&void 0!==n&&n&&await this.options.store.popNavigatorState():0!==(null!==(i=t.historyMovement)&&void 0!==i?i:0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const n=this.navigations[e];return this.navigate(n)}getState(){var t,e;const n=null!=this.options.store?{...this.options.store.state}:{};return{navigations:null!==(t=null==n?void 0:n.navigations)&&void 0!==t?t:[],navigationIndex:null!==(e=null==n?void 0:n.navigationIndex)&&void 0!==e?e:-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>Hk.create(t))),this.lastNavigationIndex=e}async saveState(t,e){var n,i,s,r,o;for(let t=0;t<this.navigations.length;t++)this.navigations[t]=Hk.create(this.navigations[t].toStoredNavigation());if((null!==(n=this.options.statefulHistoryLength)&&void 0!==n?n:0)>0){const t=this.navigations.length-(null!==(i=this.options.statefulHistoryLength)&&void 0!==i?i:0);for(let e=0;e<t;e++){const n=this.navigations[e];"string"==typeof n.instruction&&"string"==typeof n.fullStateInstruction||await this.serializeNavigation(n,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const a={navigations:(null!==(s=this.navigations)&&void 0!==s?s:[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?null===(o=null===(r=this.options)||void 0===r?void 0:r.store)||void 0===o?void 0:o.pushNavigatorState(a):this.options.store.replaceNavigatorState(a)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(Yk.eventName,Yk.create(t))}toStoreableNavigation(t){const e=t instanceof Hk?t.toStoredNavigation():t;return e.instruction=Xk.stringify(this.container,e.instruction),e.fullStateInstruction=Xk.stringify(this.container,e.fullStateInstruction),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let n=[];for(const t of e)"string"!=typeof t.instruction&&n.push(...Xk.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&n.push(...Xk.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));n=Bk(n);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=Xk.stringify(this.container,t.fullStateInstruction)),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=Xk.stringify(this.container,t.instruction)),i=i.filter(((t,e,n)=>null!=t.component.instance&&n.indexOf(t)===e));const s=[];for(const t of i)await this.freeInstructionComponents(t,n,s)}freeInstructionComponents(t,e,n){var i,s;const r=t.component.instance,o=null!==(s=null===(i=t.viewport)||void 0===i?void 0:i.instance)&&void 0!==s?s:null;if(null!==r&&null!==o&&!n.some((t=>t===r))){if(!e.some((t=>t===r)))return jk.run(null,(t=>o.freeContent(t,r)),(()=>{n.push(r)}));if(t.hasNextScopeInstructions)for(const i of t.nextScopeInstructions)return this.freeInstructionComponents(i,e,n)}}};Jk=Ck([Ek(0,Ri),Ek(1,An)],Jk);class tS extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){Uk(this,(e=>e===t))}}class eS{static matchEndpoints(t,e,n,i=!1){const s=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!n.some((e=>t===e.endpoint.instance)))),o=new tS(...e.slice());let a=null;for(eS.matchKnownEndpoints(t.router,"ViewportScope",o,r,s,!1),i||eS.matchKnownEndpoints(t.router,"Viewport",o,r,s,!1),eS.matchViewportScopeSegment(t.router,t,o,r,s);null!==(a=o.next());)a.needsEndpointDescribed=!0;return eS.matchViewportConfiguration(o,r,s),i||eS.matchSpecifiedViewport(o,r,s,!1),eS.matchLastViewport(o,r,s),i&&eS.matchSpecifiedViewport(o,r,s,!1),{matchedInstructions:s,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,n,i,s,r=!1){let o;for(;null!==(o=n.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(eS.matchEndpoint(o,o.endpoint.instance,r),s.push(o),Uk(i,(t=>t===o.endpoint.instance)),n.removeCurrent())}static matchViewportScopeSegment(t,e,n,i,s){let r;for(;null!==(r=n.next());)for(let o of i)if(o instanceof zk&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let n=i.find((t=>t instanceof zk&&t.name===o.name));if(void 0===n||r.isAdd(t)){const t=o.addSourceItem();n=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=n}eS.matchEndpoint(r,o,!1),s.push(r),Uk(i,(t=>t===r.endpoint.instance)),n.removeCurrent();break}}static matchViewportConfiguration(t,e,n){let i;for(;null!==(i=t.next());)for(const s of e)if(s instanceof _k&&(null==s?void 0:s.wantComponent(i.component.name))){eS.matchEndpoint(i,s,!0),n.push(i),Uk(e,(t=>t===i.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,n,i){var s;let r;for(;null!==(r=t.next());){let o=r.endpoint.instance;if(null==o){const t=r.endpoint.name;if(0===(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0))continue;for(const n of e)if(n instanceof _k&&t===n.name){o=n;break}}(null==o?void 0:o.acceptComponent(r.component.name))&&(eS.matchEndpoint(r,o,i),n.push(r),Uk(e,(t=>t===r.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,n){let i;for(;null!==(i=t.next());){const s=[];for(const t of e)t instanceof _k&&t.acceptComponent(i.component.name)&&s.push(t);if(1===s.length){const r=s[0];eS.matchEndpoint(i,r,!0),n.push(i),Uk(e,(t=>t===i.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,n){t.endpoint.set(e),n&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof _k?e.scope:e.scope.scope)}))}}class nS{constructor(t,e,n,i){this.router=t,this.hasScope=e,this.owningScope=n,this.endpointContent=i,this.id=-1,this.parent=null,this.children=[],this.path=null,this.id=++nS.lastId,this.owningScope=null!=n?n:this}static for(t){var e;if(null==t)return null;if(t instanceof nS||t instanceof _k||t instanceof zk)return t.scope;let n;if("res"in t)n=t;else if("container"in t)n=t.container;else if("$controller"in t)n=t.$controller.container;else{const e=Wh.for(t,{searchParents:!0});n=null==e?void 0:e.container}if(null==n)return null;const i=n.has(fS.closestEndpointKey,!0)?n.get(fS.closestEndpointKey):null;return null!==(e=null==i?void 0:i.scope)&&void 0!==e?e:null}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof _k}get isViewportScope(){return this.endpoint instanceof zk}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const n=t.indexOf(e);t.splice(n,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const n=e.indexOf(t);e.splice(n,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,n,i=""){var s,r,o,a;const l=this.router,c=l.configuration.options,h=t.filter((t=>null==t.route));if(h.length>0){const e=this.findInstructions(h,c.useDirectRouting,c.useConfiguredRoutes);!h.some((t=>!t.component.none))||e.foundConfiguration||e.foundInstructions||l.unknownRoute(Xk.stringify(l,h)),t=[...t.filter((t=>null!=t.route)),...e.instructions],t.some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(i=(null!=i?i:"")+e.matching)}const u=t.filter((t=>t.component.isFunction()||t.component.isPromise()));u.length>0&&await Promise.all(u.map((t=>t.component.resolve()))),c.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let d=[];({clearEndpoints:d,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(l))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;const p=[];let f=[],{matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(t,f),m=100;do{m--||l.unresolvedInstructionsError(e,v);const c=[],h=g.map((t=>t.endpoint.instance));g.push(...d.filter((t=>!h.includes(t))).map((t=>Xk.createClear(l,t))));const u=await hS.invokeBeforeNavigation(g,e);if(!1===u)return l.cancelNavigation(e,n),[];if(!0!==u&&u!==g){const t=Xk.flat(g);v=v.filter((e=>!t.includes(e))),g=u}for(const t of g){const o=t.endpoint.instance;if(null!==o){const a=o.setNextContent(t,e);"skip"!==a&&(c.push(o),n.addEndpoint(o));const h=[o];if("swap"===a&&h.push(...o.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),Uk(d,(t=>h.includes(t))),Uk(g,(e=>e!==t&&e.isClear(l)&&h.includes(e.endpoint.instance))),!t.isClear(l)&&(null===(r=null===(s=t.scope)||void 0===s?void 0:s.parent)||void 0===r?void 0:r.isViewportScope)&&(Uk(d,(e=>e===t.scope.parent.endpoint)),Uk(g,(e=>e!==t&&e.isClear(l)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==a&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=o.scope,e.endpoint.instance=null;"skip"!==a||t.hasNextScopeInstructions||p.push(...await o.scope.processInstructions([],e,n,i))}}const b=g.filter((t=>{var e;return"skip"===(null===(e=t.endpoint.instance)||void 0===e?void 0:e.transitionAction)})),w=b.filter((t=>t.hasNextScopeInstructions));if((0===b.length||0===w.length)&&(l.isRestrictedNavigation||n.finalEndpoint(),n.run(),n.hasAllEndpoints)){const t=n.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(n.cancelled)return l.cancelNavigation(e,n),[];for(const t of c)p.every((e=>e!==t))&&p.push(t);if(f.push(...g.splice(0)),v.length>0&&({matchedInstructions:g,remainingInstructions:v}=this.matchEndpoints(v,f)),!l.isRestrictedNavigation&&(g.length>0||v.length>0)&&n.running){const t=n.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===g.length&&0===v.length){const s=[];for(const r of t){if(!r.hasNextScopeInstructions)continue;const t=null!==(a=null===(o=r.endpoint.instance)||void 0===o?void 0:o.scope)&&void 0!==a?a:r.endpoint.scope;s.push(t.processInstructions(r.nextScopeInstructions,e,n,i))}p.push(...(await Promise.all(s)).flat())}if(e.useFullStateInstruction&&(n.appendedInstructions=n.appendedInstructions.filter((t=>!t.default))),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v)),0===g.length&&0===v.length){const t=f.map((t=>{var e,n;return null===(n=(null===(e=t.endpoint.instance)||void 0===e?void 0:e.connectedCE).pendingPromise)||void 0===n?void 0:n.promise})).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:g,earlierMatchedInstructions:f,remainingInstructions:v}=n.dequeueAppendedInstructions(g,f,v))):g=d.map((t=>Xk.createClear(l,t)))}const y=g.filter((t=>t.component.isFunction()||t.component.isPromise()));y.length>0&&await Promise.all(y.map((t=>t.component.resolve())))}while(g.length>0||v.length>0);return p}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.router.configuration.options.useConfiguredRoutes&&this.router.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.router.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const n=Xk.create(Xk.clear(e));return n.scope=this,[n,...t]}return t}getClearAllEndpoints(t){const e=this.router;let n=[];return t.some((t=>{var n;return(null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e)}))&&(n=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>{var n;return!((null!==(n=t.scope)&&void 0!==n?n:this)===this&&t.isClearAll(e))}))),{clearEndpoints:n,instructions:t}}findInstructions(t,e,n){var i,s;const r=this.router;let o=new Ak;if(n&&!Xk.containsSiblings(r,t)){let n=t.filter((t=>t.isClear(r)||t.isClearAll(r)));const a=t.filter((t=>!t.isClear(r)&&!t.isClearAll(r)));if(a.length>0)for(const l of a){const c=this.findMatchingRoute(Xk.stringify(r,a));if(null!==(i=null==c?void 0:c.foundConfiguration)&&void 0!==i&&i)o=c,o.instructions=[...n,...o.instructions],n=[];else{if(!e)throw new Error(`No route found for: ${Xk.stringify(r,t)}!`);o.instructions=[...n,...o.instructions,l],n=[],o.remaining=Xk.stringify(r,null!==(s=l.nextScopeInstructions)&&void 0!==s?s:[])}}else o.instructions=[...n]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${Xk.stringify(r,t)}!`);o.instructions.push(...t)}o.instructions=o.instructions.filter((t=>""!==t.component.name));for(const t of o.instructions)null===t.scope&&(t.scope=this);return o}matchEndpoints(t,e,n=!1){const i=[],s=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)===this})),r=t.filter((t=>{var e;return(null!==(e=t.scope)&&void 0!==e?e:this)!==this})),{matchedInstructions:o,remainingInstructions:a}=eS.matchEndpoints(this,s,e,n);return i.push(...o),r.push(...a),{matchedInstructions:i,remainingInstructions:r}}addEndpoint(t,e,n,i={}){var s,r,o,a;let l=null!==(r=null===(s=this.getOwnedScopes().find((n=>n.type===t&&n.endpoint.name===e)))||void 0===s?void 0:s.endpoint)&&void 0!==r?r:null;return null!=n&&null!=(null==l?void 0:l.connectedCE)&&l.connectedCE!==n&&(l=null!==(a=null===(o=this.getOwnedScopes(!0).find((i=>i.type===t&&i.endpoint.name===e&&i.endpoint.connectedCE===n)))||void 0===o?void 0:o.endpoint)&&void 0!==a?a:null),null==l&&(l="Viewport"===t?new _k(this.router,e,n,this.scope,!!i.scope,i):new zk(this.router,e,n,this.scope,!0,null,i),this.addChild(l.connectedScope)),null!=n&&l.setConnectedCE(n,i),l}removeEndpoint(t,e,n){return!(null===(null!=n?n:null)&&!e.removeEndpoint(t,n)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const n of e.slice())e.push(...n.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const n of e.slice())e.push(...n.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const n of e.slice())if(n.passThroughScope){const i=e.indexOf(n);e.splice(i,1,...n.getOwnedRoutingScopes(t))}return Bk(e)}getRoutingInstructions(t){var e;const n=Bk(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),i=[];for(const s of n){const n=s.instruction.clone(!0,!1,!1);""!==(null!==(e=n.component.name)&&void 0!==e?e:"")&&(n.nextScopeInstructions=s.connectedScope.getRoutingInstructions(t),i.push(n))}return i}canUnload(t){return jk.run(t,(t=>jk.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.canUnload(e):e=>t.canUnload(e))))),(t=>t.previousValue.every((t=>t))))}unload(t){return jk.runParallel(t,...this.children.map((t=>null!==t.endpoint?e=>t.endpoint.unload(e):e=>t.unload(e))))}matchScope(t,e=!1){const n=[];for(const i of t)i.scope===this?n.push(i):e&&i.hasNextScopeInstructions&&n.push(...this.matchScope(i.nextScopeInstructions,e));return n}findMatchingRoute(t){if(this.isViewportScope&&!this.passThroughScope)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());if(this.isViewport)return this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes());for(const e of this.enabledChildren){const n=e.findMatchingRoute(t);if(null!==n)return n}return null}findMatchingRouteInRoutes(t,e){var n,i,s;if(!Array.isArray(e))return null;e=e.map((t=>this.ensureProperRoute(t)));const r=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const n of e)r.push({...t,path:n,handler:t}),""!==n&&r.push({...t,path:`${n}/*remainingPath`,handler:t})}const o=new Ak;(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const a=e.find((e=>e.id===t));let l={params:{},endpoint:{}};if(null!=a)l.endpoint={route:{handler:a}};else{const e=new class{constructor(){this.rootState=new Km(null,null,""),this.cache=new Map}add(t){if(t instanceof Array)for(const e of t)this.$add(e);else this.$add(t);this.cache.clear()}$add(t){const e=t.path,n=new Fm(t.path,!0===t.caseSensitive,t.handler),i=""===e?[""]:e.split("/").filter(Wm),s=[];let r=this.rootState;for(const t of i)switch(r=r.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),n=e?t.slice(1,-1):t.slice(1);s.push(n),r=new Gm(n,e).appendTo(r);break}case"*":{const e=t.slice(1);s.push(e),r=new Xm(e).appendTo(r);break}default:r=new _m(t,n.caseSensitive).appendTo(r)}const o=new Vm(n,s);r.setEndpoint(o)}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new Hm(this.rootState);for(let n=0,i=t.length;n<i;++n){const i=t.charAt(n);if(e.advance(i),e.isEmpty)return null}const n=e.getSolution();if(null===n)return null;const{endpoint:i}=n,s=n.getParams();return new Dm(i,s)}};e.add(r),l=e.recognize(t)}if(null!=l){o.match=l.endpoint.route.handler,o.matching=t;const r={...l.params};if(null!=r.remainingPath&&(o.remaining=r.remainingPath,Reflect.deleteProperty(r,"remainingPath"),o.matching=o.matching.slice(0,o.matching.indexOf(o.remaining))),o.params=r,null!=(null===(n=o.match)||void 0===n?void 0:n.redirectTo)){let t=null===(i=o.match)||void 0===i?void 0:i.redirectTo;return(null!==(s=o.remaining)&&void 0!==s?s:"").length>0&&(t+=`/${o.remaining}`),this.findMatchingRouteInRoutes(t,e)}}if(o.foundConfiguration){o.instructions=Xk.clone(o.match.instructions,!1,!0);const t=o.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(o.params),e.route=o,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}o.instructions.length>0&&(o.instructions[0].routeStart=!0);const e=Xk.parse(this.router,o.remaining);if(e.length>0){let t=o.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return o}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=Xk.from(this.router,t.instructions)),t}}nS.lastId=0;class iS{constructor(t,e,n=0){this.taskQueue=t,this.item=e,this.cost=n,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class sS{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{var e;null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=null!==(e=this.processing.cost)&&void 0!==e?e:0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const n=Array.isArray(t),i=n?t:[t],s=i.map(((t,n)=>Array.isArray(e)?e[n]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of i)r.push(t instanceof iS?t:this.createQueueTask(t,s.shift()));return this.pending.push(...r),this.dequeue(),n?r:r[0]}createQueueTask(t,e){return new iS(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,n){e(n),this.processing=null,this.dequeue()}}let rS=class{constructor(t,e,n,i,s){this.platform=t,this.window=e,this.history=n,this.location=i,this.ea=s,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls=new sS}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){var t,e;const{pathname:n,search:i,hash:s}=this.location,r=null!==(t=this.options.useUrlFragmentHash)&&void 0!==t&&t?s.slice(1):`${n}${i}`,o=null!==(e=this.options.useUrlFragmentHash)&&void 0!==e&&e?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new oS(n,i.slice(1),o,r)}async go(t,e=!1){const n=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const i=n,s=e;this.forwardState({eventTask:i,suppressPopstate:s}),t.resolve()},e=>{const n=this.history,i=t;n.go(i),e.resolve()}],[0,1]),n.wait()}async pushNavigatorState(t){const{title:e,path:n}=t.navigations[t.navigationIndex],i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((s=>{const r=this.history,o=t,a=e||"",l=`${i}${n}`;try{r.pushState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,l),this.setTitle(a)}s.resolve()}),1).wait()}async replaceNavigatorState(t,e,n){const i=t.navigations[t.navigationIndex];null!=e||(e=i.title),null!=n||(n=i.path);const s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((i=>{const r=this.history,o=t,a=e||"",l=`${s}${n}`;try{r.replaceState(o,a,l),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,l),this.setTitle(a)}i.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const n=t;await this.popState(n),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:n}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async i=>{n||this.notifySubscribers(t),null!==e&&await e.execute(),i.resolve()}),1)}notifySubscribers(t){this.ea.publish(aS.eventName,aS.create(this.viewerState,t,this.history.state))}async popState(t){var e,n;await this.go(-1,!0);const i=this.history.state,s=null===(e=null==i?void 0:i.navigations)||void 0===e?void 0:e[null!==(n=null==i?void 0:i.navigationIndex)&&void 0!==n?n:0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(i)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,n){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${n}`)}}};rS=Ck([Ek(0,Ic),Ek(1,wd),Ek(2,xd),Ek(3,yd),Ek(4,Ri)],rS);class oS{constructor(t,e,n,i){this.path=t,this.query=e,this.hash=n,this.instruction=i}}class aS{constructor(t,e,n,i){this.eventName=t,this.viewerState=e,this.event=n,this.state=i}static create(t,e,n){return new aS(aS.eventName,t,e,n)}}aS.eventName="au:router:navigation-state-change";class lS{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class cS{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,n){const i=new cS(t,e);return n.syncStates.forEach((t=>i.addSyncState(t))),i}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new Nk;this.syncStates.set(t,e)}addEndpoint(t){let e=this.entities.find((e=>e.endpoint===t));return void 0!==e||(e=new lS(t),this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this)),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&Uk(this.entities,(t=>t===e))}setEndpointStep(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t)),n.step=e}addEndpointState(t,e){let n=this.entities.find((e=>e.endpoint===t));void 0===n&&(n=this.addEndpoint(t));const i=n.states.get(e);i instanceof Nk&&i.resolve(),n.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const n=this.syncStates.get(t);if(void 0!==n){if(null!==e){const i=this.entities.find((t=>t.endpoint===e));if(null===(null==i?void 0:i.syncPromise)&&n.isPending)return i.syncingState=t,i.syncPromise=new Nk,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),i.syncPromise.promise}return n.isPending?n.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let n=this.entities.find((e=>e.endpoint===t));if(null==n&&(n=this.addEndpoint(t)),n.hasReachedState(e))return;let i=n.states.get(e);return null==i&&(i=new Nk,n.states.set(e,i)),i.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0}cancel(){this.cancelled=!0,this.entities.forEach((t=>{var e,n;const i=t.endpoint.cancelContentChange(this,null!==(n=null===(e=t.step)||void 0===e?void 0:e.current)&&void 0!==n?n:null);i instanceof Promise&&i.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{var t;null===(t=this.navigation.process)||void 0===t||t.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,n){let i=[...this.appendedInstructions];t=[...t],e=[...e],n=[...n];const s=i.filter((t=>!t.default)),r=i.filter((t=>t.default));for(i=s.length>0?[...s]:[...r];i.length>0;){const s=i.shift();Uk(this.appendedInstructions,(t=>t===s));const r=e.some((t=>t.sameEndpoint(s,!0))),o=t.find((t=>t.sameEndpoint(s,!0))),a=n.find((t=>t.sameEndpoint(s,!0)));s.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&Uk(t,(t=>t===o)),void 0!==a&&Uk(n,(t=>t===a)),null!==s.endpoint.instance?t.push(s):n.push(s))}return{matchedInstructions:t,earlierMatchedInstructions:e,remainingInstructions:n}}checkSyncState(t){var e;const n=this.syncStates.get(t);if(void 0!==n&&this.hasAllEndpoints&&n.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const n of this.entities)n.syncingState===t&&(null===(e=n.syncPromise)||void 0===e||e.resolve(),n.syncPromise=null,n.syncingState=null);n.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class hS{constructor(t,e,n){var i,s;this.hook=t,this.id=n,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of null!==(i=e.include)&&void 0!==i?i:[])this.includeTargets.push(new uS(t));for(const t of null!==(s=e.exclude)&&void 0!==s?s:[])this.excludeTargets.push(new uS(t))}static add(t,e){const n=new hS(t,null!=e?e:{},++this.lastIdentity);return this.hooks[n.type].push(n),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const n=this.hooks[e].findIndex((e=>e.id===t));n>=0&&this.hooks[e].splice(n,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,n){let i=n;for(const s of this.hooks[t])if(!s.wantsMatch||s.matches(n))if(i=await s.invoke(e,n),"boolean"==typeof i){if(!i)return!1}else n=i;return i}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}hS.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},hS.lastIdentity=0;class uS{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(Mk.isType(t))this.componentType=t,this.componentName=Mk.getName(t);else{const e=t;null!=e.component&&(this.componentType=Mk.isType(e.component)?Mk.getType(e.component):null,this.componentName=Mk.getName(e.component)),null!=e.viewport&&(this.viewport=Gk.isInstance(e.viewport)?e.viewport:null,this.viewportName=Gk.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(Xk.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class dS{static async getTitle(t,e,n){let i=await hS.invokeTransformTitle(t,e);if("string"!=typeof i){const t=dS.stringifyTitles(i,e,n);i=n.appTitle,i=i.replace(/\${componentTitles}/g,t),i=i.replace(/\${appTitleSeparator}/g,""!==t?n.appTitleSeparator:"")}return i=await hS.invokeTransformTitle(i,e),i}static stringifyTitles(t,e,n){const i=t.map((t=>dS.stringifyTitle(t,e,n))).filter((t=>{var e;return(null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0)>0}));return i.join(" + ")}static stringifyTitle(t,e,n){const i=t.nextScopeInstructions;let s=dS.resolveTitle(t,e,n);if(Array.isArray(i)&&i.length>0){let t=dS.stringifyTitles(i,e,n);t.length>0&&(1!==i.length&&(t=`[ ${t} ]`),s=s.length>0?"top-down"===n.componentTitleOrder?s+n.componentTitleSeparator+t:t+n.componentTitleSeparator+s:t)}return s}static resolveTitle(t,e,n){let i=t.getTitle(e);return null!=n.transformTitle&&(i=n.transformTitle(i,t,e)),i}}const pS=xn.createInterface("IRouter",(t=>t.singleton(fS)));class fS{constructor(t,e,n,i,s,r){this.container=t,this.ea=e,this.navigator=n,this.viewer=i,this.store=s,this.configuration=r,this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.handleNavigatorNavigateEvent=t=>{this.processNavigation(t.navigation).catch((t=>{throw t}))},this.handleNavigatorStateChangeEvent=t=>{var e;if(null!=(null===(e=t.state)||void 0===e?void 0:e.navigationIndex)){const e=Hk.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{var e;this.loadedFirst=!0;const n=this.configuration.options,i=cS.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(i),i.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(wS.eventName,wS.create(t));let s="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await hS.invokeTransformFromUrl(t.instruction,i.navigation);const r=n.basePath;null!==r&&"string"==typeof s&&s.startsWith(r)&&!n.useUrlFragmentHash&&(s=s.slice(r.length)),"/"===s&&(s=""),"string"==typeof s&&(s=""===s?[new Xk("")]:Xk.parse(this,s)),null!==(e=t.scope)&&void 0!==e||(t.scope=this.rootScope.scope);const o=await t.scope.processInstructions(s,t,i);return jk.run(null,(()=>(i.finalEndpoint(),i.waitForSyncState("completed"))),(()=>(i.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&o.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(var t;this.coordinators.length>0&&this.coordinators[0].completed;){const e=this.coordinators.shift();await this.navigator.finalize(e.navigation,!1),this.ea.publish(kS.eventName,kS.create(e.navigation)),this.ea.publish(yS.eventName,yS.create(e.navigation)),null===(t=e.navigation.process)||void 0===t||t.resolve(!0)}}))}}static get inject(){return[An,Ri,Jk,rS,rS,jS]}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw new Error("Router has already been started");this.isActive=!0;const t=this.container.get(id);this.rootScope=new zk(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const n=new URL(t.host.baseURI);e.basePath=n.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.navigatorStateChangeEventSubscription=this.ea.subscribe(aS.eventName,this.handleNavigatorStateChangeEvent),this.navigatorNavigateEventSubscription=this.ea.subscribe(Yk.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(vS.eventName,vS.create())}stop(){if(!this.isActive)throw new Error("Router has not been started");this.ea.publish(mS.eventName,mS.create()),this.navigator.stop(),this.viewer.stop(),this.navigatorStateChangeEventSubscription.dispose(),this.navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,n=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,n}getEndpoint(t,e){var n;return null!==(n=this.allEndpoints(t).find((t=>t.name===e)))&&void 0!==n?n:null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,e,n,i,s){const r=n.container,o=(r.has(fS.closestEndpointKey,!0)?r.get(fS.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=o.addEndpoint(e,i,n,s),Xn.instance(fS.closestEndpointKey,t).register(r)),t}disconnectEndpoint(t,e,n){if(!e.connectedScope.parent.removeEndpoint(t,e,n))throw new Error("Failed to remove endpoint: "+e.name)}async load(t,e){var n,i,s;e=null!=e?e:{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let r=null;if(({instructions:t,scope:r}=this.applyLoadOptions(t,e)),null!==(n=e.append)&&void 0!==n&&n&&(!this.loadedFirst||this.isNavigating))return t=Xk.from(this,t),this.appendInstructions(t,r),Promise.resolve();const o=Hk.create({instruction:t,fullStateInstruction:"",scope:r,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:null!==(i=e.replacing)&&void 0!==i&&i||e.replace,repeating:e.append,fromBrowser:null!==(s=e.fromBrowser)&&void 0!==s&&s,origin:e.origin,completed:!1});return this.navigator.navigate(o)}applyLoadOptions(t,e,n=!0){var i,s,r;"origin"in(e=null!=e?e:{})&&!("context"in e)&&(e.context=e.origin);let o=null!==(s=nS.for(null!==(i=e.context)&&void 0!==i?i:null))&&void 0!==s?s:null;if("string"==typeof t){if(t.startsWith("/"))o=null;else{if(t.startsWith("."))for(t.startsWith("./")&&(t=t.slice(2));t.startsWith("../");)o=null!==(r=null==o?void 0:o.parent)&&void 0!==r?r:o,t=t.slice(3);null!=(null==o?void 0:o.path)&&(t=`${o.path}/${t}`,o=null)}if(!n){t=Xk.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}}else{t=Xk.from(this,t);for(const e of t)null===e.scope&&(e.scope=o)}return{instructions:t,scope:o}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw new Error(`Parameter instructions to checkActivate can not be a string ('${t}')!`);e=null!=e?e:{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>{var e;return null!==(e=t.scope)&&void 0!==e?e:t.scope=this.rootScope.scope}));const n=Bk(t.map((t=>t.scope)));for(const e of n){const n=e.matchScope(t,!1),i=e.matchScope(this.activeComponents,!0);if(!Xk.contains(this,i,n,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(SS.eventName,SS.create(t)),this.ea.publish(yS.eventName,yS.create(t)),function(t){const e=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return e.remainingInstructions=t,console.log(e,e.remainingInstructions),e}(e)}cancelNavigation(t,e){e.cancel(),this.ea.publish(xS.eventName,xS.create(t)),this.ea.publish(yS.eventName,yS.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const n of t)null===n.scope&&(n.scope=e);let n=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){n=this.coordinators[t];break}if(null===n){if(this.loadedFirst)throw Error("Failed to append routing instructions to coordinator");this.appendedInstructions.push(...t)}null==n||n.enqueueAppendedInstructions(t)}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.configuration.options.useConfiguredRoutes&&this.configuration.options.useDirectRouting?new Error("No matching configured route or component found for '"+t+"'"):this.configuration.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}async updateNavigation(t){var e,n,i,s,r,o,a;this.rootScope.scope.reparentRoutingInstructions();const l=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:c}=this.rootScope.scope.matchEndpoints(l,[],!0),h=100;for(;c.length>0;){if(0==h--)throw new Error("Failed to find viewport when updating viewer paths.");c=c.map((t=>{var e;const{matchedInstructions:n}=t.endpoint.instance.scope.matchEndpoints(null!==(e=t.nextScopeInstructions)&&void 0!==e?e:[],[],!0);return n})).flat()}t.timestamp>=(null!==(n=null===(e=this.activeNavigation)||void 0===e?void 0:e.timestamp)&&void 0!==n?n:0)&&(this.activeNavigation=t,this.activeComponents=l);let u=await hS.invokeTransformToUrl(l,t);if("string"!=typeof u&&(u=Xk.stringify(this,u,!1,!0)),u=await hS.invokeTransformToUrl(u,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[n,i]of Object.entries(t.parameters)){n=encodeURIComponent(n),Array.isArray(i)||(i=[i]);for(const t of i)e.append(n,encodeURIComponent(t))}t.query=e.toString()}let d=`${this.configuration.options.basePath}/`;(null===d||""!==u&&"/"===u[0]||this.configuration.options.useUrlFragmentHash)&&(d="");const p=(null!==(s=null===(i=t.query)||void 0===i?void 0:i.length)&&void 0!==s?s:0)>0?"?"+t.query:"",f=(null!==(o=null===(r=t.fragment)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>0?"#"+t.fragment:"";t.path=d+u+p+f;const g=[Xk.create(Xk.clear(this))];if(g.push(...Xk.clone(l,this.statefulHistory)),t.fullStateInstruction=g,null===(null!==(a=t.title)&&void 0!==a?a:null)){const e=await dS.getTitle(l,t,this.configuration.options.title);null!==e&&(t.title=e)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[n,i]=t.split("#");t=n,e.fragment=i}return t}extractQuery(t,e){var n;if("string"==typeof t&&null==e.query){const[n,i]=t.split("?");t=n,e.query=i}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(null!==(n=e.parameters)&&void 0!==n||(e.parameters={}),new URLSearchParams(e.query).forEach(((t,n)=>{n=decodeURIComponent(n),t=decodeURIComponent(t),n in e.parameters?(Array.isArray(e.parameters[n])||(e.parameters[n]=[e.parameters[n]]),e.parameters[n].push(t)):e.parameters[n]=t}))),t}}fS.closestEndpointKey=dn.annotation.keyFor("closest-endpoint");class gS{constructor(t){this.eventName=t}}class vS extends gS{static create(){return new vS(this.eventName)}}vS.eventName="au:router:router-start";class mS extends gS{static create(){return new mS(this.eventName)}}mS.eventName="au:router:router-stop";class bS{constructor(t,e){this.eventName=t,this.navigation=e}}class wS extends bS{static create(t){return new wS(this.eventName,t)}}wS.eventName="au:router:navigation-start";class yS extends bS{static create(t){return new yS(this.eventName,t)}}yS.eventName="au:router:navigation-end";class xS extends bS{static create(t){return new xS(this.eventName,t)}}xS.eventName="au:router:navigation-cancel";class kS extends bS{static create(t){return new kS(this.eventName,t)}}kS.eventName="au:router:navigation-complete";class SS extends bS{static create(t){return new SS(this.eventName,t)}}SS.eventName="au:router:navigation-error";const AS=xn.createInterface("ILinkHandler",(t=>t.singleton(CS)));let CS=class{constructor(t,e){this.window=t,this.router=e}handleEvent(t){this.handleClick(t)}handleClick(t){var e,n;if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const i=t.currentTarget;if(i.hasAttribute("external"))return;const s=null!==(e=i.getAttribute("target"))&&void 0!==e?e:"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const r=Ih.for(i,"load"),o=void 0!==r?r.viewModel.value:null,a=this.router.configuration.options.useHref&&i.hasAttribute("href")?i.getAttribute("href"):null;if(!(null!==o&&0!==o.length||null!==a&&0!==a.length))return;t.preventDefault();let l=null!==(n=null!=o?o:a)&&void 0!==n?n:"";"string"==typeof l&&l.startsWith("#")&&(l=l.slice(1),l.startsWith("/")||(l=`/${l}`)),this.router.load(l,{origin:i}).catch((t=>{throw t}))}};var ES;function TS(t,e,n,i,s=!1){var r;if(s)return""===e;if(n)return e;const o=null!==(r=i.getAttribute(t))&&void 0!==r?r:"";return o.length>0?o:e}function $S(t,e){if(!t.isActive)return new Promise((t=>{const n=e.subscribe(vS.eventName,(()=>{t(),n.dispose()}))}))}function IS(t,e,n,i){var s,r;let o=null===(r=null===(s=Ih.for(n,"considered-active"))||void 0===s?void 0:s.viewModel)||void 0===r?void 0:r.value;void 0===o&&(o=i);const a=t.applyLoadOptions(o,{context:e}),l=Xk.from(t,a.instructions);for(const t of l)null===t.scope&&(t.scope=a.scope);return l}function RS(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return null!=e||(e=t),e}CS=Ck([Ek(0,wd),Ek(1,pS)],CS),function(t){t.default="default",t.disallow="disallow",t.reload="reload",t.refresh="refresh"}(ES||(ES={}));const OS=Wh.createInjectable();let PS=class{constructor(t,e,n,i,s,r){this.router=t,this.element=e,this.container=n,this.ea=i,this.parentViewport=s,this.instruction=r,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1}hydrated(t){this.controller=t,this.container=t.container;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new Nk)),jk.run(null,(()=>$S(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e,n){return this.isBound=!0,jk.run(null,(()=>$S(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{var t;null!=(null===(t=this.endpoint)||void 0===t?void 0:t.activeResolve)&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{var e;if(null!==this.endpoint&&null===this.endpoint.getNextContent())return null===(e=this.endpoint.activate(null,t,this.controller,n,void 0))||void 0===e?void 0:e.asValue}))}detaching(t,e,n){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e,n)}unbinding(t,e,n){if(null!==this.endpoint)return this.disconnect(null)}dispose(){var t;null===(t=this.endpoint)||void 0===t||t.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,n=TS("name",this.name,t,e),i={};i.scope=!TS("no-scope",this.noScope,!1,e,!0),i.usedBy=TS("used-by",this.usedBy,t,e),i.default=TS("default",this.default,t,e),i.fallback=TS("fallback",this.fallback,t,e),i.noLink=TS("no-link",this.noLink,t,e,!0),i.noTitle=TS("no-title",this.noTitle,t,e,!0),i.noHistory=TS("no-history",this.noHistory,t,e,!0),i.stateful=TS("stateful",this.stateful,t,e,!0),Object.keys(i).forEach((t=>{void 0===i[t]&&delete i[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,n,i);const s=this.parentViewport;null!=s&&(Uk(s.pendingChildren,(t=>t===this)),0===s.pendingChildren.length&&null!==s.pendingPromise&&(s.pendingPromise.resolve(),s.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const n=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const i in t)this.element.classList.toggle(`${n}-${i}`,e&&t[i])}};Ck([_l],PS.prototype,"name",void 0),Ck([_l],PS.prototype,"usedBy",void 0),Ck([_l],PS.prototype,"default",void 0),Ck([_l],PS.prototype,"fallback",void 0),Ck([_l],PS.prototype,"noScope",void 0),Ck([_l],PS.prototype,"noLink",void 0),Ck([_l],PS.prototype,"noTitle",void 0),Ck([_l],PS.prototype,"noHistory",void 0),Ck([_l],PS.prototype,"stateful",void 0),PS=Ck([Lh({name:"au-viewport",injectable:OS}),Ek(0,pS),Ek(1,hd),Ek(2,An),Ek(3,Ri),Ek(4,OS),Ek(5,Md)],PS);const LS=Wh.createInjectable();let MS=class{constructor(t,e,n,i,s){this.router=t,this.element=e,this.container=n,this.parent=i,this.parentController=s,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e,n){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e,n){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let n=this.getAttribute("catches",this.catches);void 0!==n&&(e.catches=n),n=this.getAttribute("collection",this.collection,!0),void 0!==n&&(e.collection=n),e.source=this.source||null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,n=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(n)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};Ck([_l],MS.prototype,"name",void 0),Ck([_l],MS.prototype,"catches",void 0),Ck([_l],MS.prototype,"collection",void 0),Ck([_l],MS.prototype,"source",void 0),MS=Ck([Lh({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:LS}),Ek(0,pS),Ek(1,hd),Ek(2,An),Ek(3,LS),Ek(4,Du)],MS);let US=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.hasHref=null,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(yS.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#${t}`),this.element.setAttribute("href",t)}}updateActive(){const t=Ih.for(this.element,"load").parent,e=IS(this.router,t,this.element,this.value);RS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}};Ck([_l({mode:rw.toView})],US.prototype,"value",void 0),US=Ck([Sh("load"),Ek(0,hd),Ek(1,pS),Ek(2,AS),Ek(3,Ri)],US);let BS=class{constructor(t,e,n,i){this.element=t,this.router=e,this.linkHandler=n,this.ea=i,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(yS.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){var t;this.element.removeEventListener("click",this.linkHandler),null===(t=this.routerNavigationSubscription)||void 0===t||t.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=Ih.for(this.element,"href").parent,e=IS(this.router,t,this.element,this.value);RS(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){var t;const e=this.$controller.parent.children;return null!==(t=null==e?void 0:e.some((t=>1===t.vmKind&&t.viewModel instanceof US)))&&void 0!==t&&t}};Ck([_l({mode:rw.toView})],BS.prototype,"value",void 0),BS=Ck([Sh({name:"href",noMultiBindings:!0}),Ek(0,hd),Ek(1,pS),Ek(2,AS),Ek(3,Ri)],BS);let NS=class{};Ck([_l({mode:rw.toView})],NS.prototype,"value",void 0),NS=Ck([Sh("considered-active")],NS);const jS=xn.createInterface("IRouterConfiguration",(t=>t.singleton(DS))),FS=[pS],VS=[PS,MS,US,BS,NS];class DS{static register(t){const e=t.get(jS);return e.options=DS.options,e.options.setRouterConfiguration(e),DS.options=Ok.create(),t.register(...FS,...VS,uh.beforeActivate(pS,DS.configurationCall),uh.afterActivate(pS,(t=>t.initialLoad())),uh.afterDeactivate(pS,(t=>t.stop())))}static customize(t){return void 0===t?(DS.options=Ok.create(),DS.configurationCall=t=>{t.start()}):t instanceof Function?DS.configurationCall=t:(DS.options=Ok.create(),DS.options.apply(t)),DS}static createContainer(){return this.register(xn.createContainer())}static for(t){return t instanceof fS?t.configuration:t.get(jS)}apply(t,e=!1){e&&(this.options=Ok.create()),this.options.apply(t)}addHook(t,e){return hS.add(t,e)}removeHook(t){return hS.remove(t)}removeAllHooks(){return hS.removeAll()}}function ZS(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function zS(t,e){return function(n,i){e(n,i,t)}}function qS(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}DS.options=Ok.create(),DS.configurationCall=t=>{t.start()},Object.create,Object.create;var HS=n(3379),KS=n.n(HS),WS=n(7795),QS=n.n(WS),_S=n(569),GS=n.n(_S),XS=n(3565),YS=n.n(XS),JS=n(9216),tA=n.n(JS),eA=n(4589),nA=n.n(eA),iA=n(1138),sA={};sA.styleTagTransform=nA(),sA.setAttributes=YS(),sA.insert=GS().bind(null,"head"),sA.domAPI=QS(),sA.insertStyleElement=tA(),KS()(iA.Z,sA),iA.Z&&iA.Z.locals&&iA.Z.locals;var rA=n(4321),oA={};oA.styleTagTransform=nA(),oA.setAttributes=YS(),oA.insert=GS().bind(null,"head"),oA.domAPI=QS(),oA.insertStyleElement=tA(),KS()(rA.Z,oA),rA.Z&&rA.Z.locals&&rA.Z.locals;var aA=n(5363),lA={};lA.styleTagTransform=nA(),lA.setAttributes=YS(),lA.insert=GS().bind(null,"head"),lA.domAPI=QS(),lA.insertStyleElement=tA(),KS()(aA.Z,lA),aA.Z&&aA.Z.locals&&aA.Z.locals;const cA="avatar-small-block",hA='<droppable-image value.two-way="model.smallAvatar"></droppable-image>',uA=hA,dA=[];let pA;function fA(t){pA||(pA=Wh.define({name:cA,template:hA,dependencies:dA})),t.register(pA)}const gA={character:{type:"magus",physicalStatus:{fatigue:0,wounds:{lightWounds:0,mediumWounds:0,heavyWounds:0},totalPenalty:0},description:{name:"",description:"",fullAvatar:null,smallAvatar:null},abilities:[],personalityTraits:[],characteristics:{communication:{value:0,specialisation:"",agingPoints:0},dexterity:{value:0,specialisation:"",agingPoints:0},intelligence:{value:0,specialisation:"",agingPoints:0},perception:{value:0,specialisation:"",agingPoints:0},presence:{value:0,specialisation:"",agingPoints:0},quickness:{value:0,specialisation:"",agingPoints:0},stamina:{value:0,specialisation:"",agingPoints:0},strength:{value:0,specialisation:"",agingPoints:0}},flaws:[{name:"",additionalInfo:""}],virtues:[{name:"",additionalInfo:""}],arts:{creo:{level:0,xp:0,puissant:!1},muto:{level:0,xp:0,puissant:!1},rego:{level:0,xp:0,puissant:!1},intellego:{level:0,xp:0,puissant:!1},perdo:{level:0,xp:0,puissant:!1},animal:{level:0,xp:0,puissant:!1},auram:{level:0,xp:0,puissant:!1},aquam:{level:0,xp:0,puissant:!1},ignem:{level:0,xp:0,puissant:!1},terram:{level:0,xp:0,puissant:!1},herbam:{level:0,xp:0,puissant:!1},mentem:{level:0,xp:0,puissant:!1},corpus:{level:0,xp:0,puissant:!1},imaginem:{level:0,xp:0,puissant:!1},vim:{level:0,xp:0,puissant:!1}},spells:[],spellWishlist:[],ageing:{age:25,apparentAge:25,birthYear:1195,currentYear:1220,decrepitudeLevel:0,decrepitudePoints:0,longevityModifier:0,ageingRollModifier:0,livingConditionModifier:0},confidence:{score:3},warping:{warpingPoints:0,warpingLevel:0,ongoingEffects:[]},activeMagic:[],xpEntries:[],notes:"",background:"",lab:{art1:{name:"",rating:0},art2:{name:"",rating:0},art3:{name:"",rating:0},art4:{name:"",rating:0},specialisation1:{name:"",rating:0},specialisation2:{name:"",rating:0},auraBonus:0,description:"",effectiveSafety:0,flaws:[],virtues:[],intelligenceBonus:0,labBaseQuality:0,livingConditionsModifier:0,magicTheory:0,occupiedSize:0,refinement:0,size:0,availableModifiers:[{name:"GQ"},{name:"Safety"},{name:"Health"},{name:"Aesthetics"},{name:"Upkeep"},{name:"Warping"}],researchProjects:[],inventiveGeniusVirtue:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1},spellcastingStats:{arts:"",aura:0,ceremonial:!1,cyclicMagicVirtue:!1,cyclicMagicFlaw:!1,positiveCycle:!1,focus:!1,largeGestures:!1,loudVoice:!1,similarFomulaicSpellBonus:0,spontaneousCastingTotal:0,staminaSpecialisation:!1,talismanBonus:0},sigil:"",belongings:{carried:"",inSanctum:"",vis:[]},talisman:{description:"",investedVis:0,spentVis:0,bonuses:[],effects:[]},magicItems:[],quests:[],npcs:[],familiar:{name:"",arts:"",bronzeBondLevel:0,silverBondLevel:0,goldBondLevel:0,description:"",isSpirit:!1,additionalInfo:"",effects:[]}}};function vA(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if("object"==typeof t){if("function"==typeof t[Symbol.iterator]){const e=[];if(t.length>0)for(const n of t)e.push(vA(n));return e}{const e=Object.keys(t),n={};if(e.length>0)for(const i of e)n[i]=vA(t[i]);return n}}return t}const mA={name:""};function bA(t){return lm(t,vA(gA))}async function wA(t,e){const n=await e.text();return lm(t,JSON.parse(n))}function yA(t,e){const n=vA(t.present);return n.character=e,lm(t,n)}function xA(t,e){console.log("Saving characteristics",e);const n=vA(t.present);return n.character.characteristics=e,aC(n),bC(n),lm(t,n)}function kA(t,e){console.log("Saving abilities",e);const n=vA(t.present);return n.character.abilities=nC(e),bC(n),aC(n),lm(t,n)}function SA(t,e){console.log("Saving personality traits",e);const n=vA(t.present);return n.character.personalityTraits=e,lm(t,n)}function AA(t,e){console.log("Saving virtues",e);const n=vA(t.present);return n.character.virtues=e,function(t){t.character.abilities.forEach((e=>{e.puissant=t.character.virtues.findIndex((t=>t.name==`Puissant ${e.name}`))>=0})),t.character.arts.animal.puissant=t.character.virtues.findIndex((t=>"Puissant Animal"==t.name))>=0,t.character.arts.aquam.puissant=t.character.virtues.findIndex((t=>"Puissant Aquam"==t.name))>=0,t.character.arts.auram.puissant=t.character.virtues.findIndex((t=>"Puissant Auram"==t.name))>=0,t.character.arts.corpus.puissant=t.character.virtues.findIndex((t=>"Puissant Corpus"==t.name))>=0,t.character.arts.creo.puissant=t.character.virtues.findIndex((t=>"Puissant Creo"==t.name))>=0,t.character.arts.herbam.puissant=t.character.virtues.findIndex((t=>"Puissant Herbam"==t.name))>=0,t.character.arts.ignem.puissant=t.character.virtues.findIndex((t=>"Puissant Ignem"==t.name))>=0,t.character.arts.imaginem.puissant=t.character.virtues.findIndex((t=>"Puissant Imaginem"==t.name))>=0,t.character.arts.intellego.puissant=t.character.virtues.findIndex((t=>"Puissant Intellego"==t.name))>=0,t.character.arts.mentem.puissant=t.character.virtues.findIndex((t=>"Puissant Mentem"==t.name))>=0,t.character.arts.muto.puissant=t.character.virtues.findIndex((t=>"Puissant Muto"==t.name))>=0,t.character.arts.perdo.puissant=t.character.virtues.findIndex((t=>"Puissant Perdo"==t.name))>=0,t.character.arts.rego.puissant=t.character.virtues.findIndex((t=>"Puissant Rego"==t.name))>=0,t.character.arts.terram.puissant=t.character.virtues.findIndex((t=>"Puissant Terram"==t.name))>=0,t.character.arts.vim.puissant=t.character.virtues.findIndex((t=>"Puissant Vim"==t.name))>=0}(n),sC(n),aC(n),gC(n),lm(t,n)}function CA(t,e){console.log("Saving flaws",e);const n=vA(t.present);return n.character.flaws=e,aC(n),gC(n),lm(t,n)}function EA(t,e){console.log("Saving description",e);const n=vA(t.present);return n.character.description.description=e,lm(t,n)}function TA(t,e){console.log("Saving name",e);const n=vA(t.present);return n.character.description.name=e,lm(t,n)}function $A(t,e){console.log("Saving small avatar",e);const n=vA(t.present);return n.character.description.smallAvatar=e,lm(t,n)}function IA(t,e){console.log("Saving full avatar",e);const n=vA(t.present);return n.character.description.fullAvatar=e,lm(t,n)}function RA(t,e){console.log("Saving fatigue",e);const n=vA(t.present);return n.character.physicalStatus.fatigue=e,iC(n),aC(n),lm(t,n)}function OA(t,e){console.log("Saving wounds",e);const n=vA(t.present);return n.character.physicalStatus.wounds=e,iC(n),aC(n),lm(t,n)}function PA(t,e){console.log("Saving arts",e);const n=vA(t.present);return n.character.arts=e,aC(n),bC(n),lm(t,n)}function LA(t,e){console.log("Saving spells",e);const n=vA(t.present);return n.character.spells=nC(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),eC(n),aC(n),lm(t,n)}function MA(t,e){console.log("Saving spell wishlist",e);const n=vA(t.present);return n.character.spellWishlist=nC(e).sort(((t,e)=>t.arts.slice(2).localeCompare(e.arts.slice(2)))),eC(n),lm(t,n)}function UA(t,e){console.log("Saving ageing",e);const n=vA(t.present);return n.character.ageing=e,sC(n),function(t){for(t.character.xpEntries||(t.character.xpEntries=[fC(t.character.ageing.currentYear,"Spring"),fC(t.character.ageing.currentYear,"Summer"),fC(t.character.ageing.currentYear,"Fall"),fC(t.character.ageing.currentYear,"Winter")]),t.character.xpEntries=t.character.xpEntries.filter((e=>e.year<t.character.ageing.currentYear+3)),0==t.character.xpEntries.length&&(t.character.xpEntries=[fC(t.character.ageing.currentYear,"Spring"),fC(t.character.ageing.currentYear,"Summer"),fC(t.character.ageing.currentYear,"Fall"),fC(t.character.ageing.currentYear,"Winter")]);t.character.xpEntries[t.character.xpEntries.length-1].year<t.character.ageing.currentYear+3;){let e=t.character.xpEntries[t.character.xpEntries.length-1].year+1;t.character.xpEntries.push(fC(e,"Spring")),t.character.xpEntries.push(fC(e,"Summer")),t.character.xpEntries.push(fC(e,"Fall")),t.character.xpEntries.push(fC(e,"Winter"))}t.character.xpEntries.forEach((e=>e.planningMode=e.year>=t.character.ageing.currentYear))}(n),lm(t,n)}function BA(t,e){console.log("Saving confidence",e);const n=vA(t.present);return n.character.confidence=e,lm(t,n)}function NA(t,e){console.log("Saving warping",e);const n=vA(t.present);return n.character.warping=e,n.character.warping.ongoingEffects=nC(e.ongoingEffects),function(t){t.character.warping.warpingLevel=oC(t.character.warping.warpingPoints,0)}(n),lm(t,n)}function jA(t,e){console.log("Saving active magic",e);const n=vA(t.present);return n.character.activeMagic=nC(e),function(t){t.character.activeMagic.forEach((t=>t.penetration=t.active?t.penetration:0))}(n),lm(t,n)}function FA(t,e){console.log("Saving xp entries",e);const n=vA(t.present);return n.character.xpEntries=e,lm(t,n)}function VA(t,e){console.log("Saving notes",e);const n=vA(t.present);return n.character.notes=e,lm(t,n)}function DA(t,e){console.log("Saving lab",e);const n=vA(t.present);return n.character.lab=e,n.character.lab.virtues=nC(n.character.lab.virtues),n.character.lab.flaws=nC(n.character.lab.flaws),n.character.lab.availableModifiers=n.character.lab.availableModifiers.filter((t=>""!=t.name)),n.character.lab.researchProjects=nC(n.character.lab.researchProjects),gC(n),lm(t,n)}function ZA(t,e){console.log("Importing character");const n=vA(t.present);return n.character=JSON.parse(e),lm(t,n)}function zA(t,e){console.log("Saving spellcasting stats",e);const n=vA(t.present);return n.character.spellcastingStats=e,aC(n),lm(t,n)}function qA(t,e){console.log("Saving character type",e);const n=vA(t.present);return n.character.type=e,aC(n),lm(t,n)}function HA(t,e){console.log("Saving background",e);const n=vA(t.present);return n.character.background=e,lm(t,n)}function KA(t,e){console.log("Saving sigil",e);const n=vA(t.present);return n.character.sigil=e,lm(t,n)}function WA(t,e){console.log("Saving carried belongings",e);const n=vA(t.present);return n.character.belongings.carried=e,lm(t,n)}function QA(t,e){console.log("Saving sanctum belongings",e);const n=vA(t.present);return n.character.belongings.inSanctum=e,lm(t,n)}function _A(t,e){console.log("Saving vis",e);const n=vA(t.present);return n.character.belongings.vis=nC(e),lm(t,n)}function GA(t,e){console.log("Saving talisman",e);const n=vA(t.present);return n.character.talisman=e,n.character.talisman.effects=nC(e.effects),n.character.talisman.bonuses=nC(e.bonuses),lm(t,n)}function XA(t,e){console.log("Saving magic items",e);const n=vA(t.present);return n.character.magicItems=nC(e),n.character.magicItems.forEach((t=>t.effects=nC(t.effects))),lm(t,n)}function YA(t,e){console.log("Saving quests",e);const n=vA(t.present);return n.character.quests=nC(e).sort(((t,e)=>t.priority-e.priority)),lm(t,n)}function JA(t,e){console.log("Saving npcs",e);const n=vA(t.present);return n.character.npcs=nC(e),lm(t,n)}function tC(t,e){console.log("Saving familiar",e);const n=vA(t.present);return n.character.familiar=e,n.character.familiar.effects=nC(e.effects),rC(n),aC(n),lm(t,n)}function eC(t){let e=t.character.spellWishlist.filter((t=>!t.onWishlist)),n=t.character.spells.filter((t=>t.onWishlist));t.character.spellWishlist=t.character.spellWishlist.filter((t=>t.onWishlist)).concat(n),t.character.spells=t.character.spells.filter((t=>!t.onWishlist)).concat(e)}function nC(t){return function(t){return t.sort(((t,e)=>t.name.localeCompare(e.name)))}(t.filter((t=>""!=t.name)))}function iC(t){t.character.physicalStatus.totalPenalty=function(t){let e=t.character.physicalStatus.wounds;return-e.lightWounds+-3*e.mediumWounds+-5*e.heavyWounds}(t)+function(t){let e=t.character.physicalStatus.fatigue;return e<=1?0:2===e?-1:3===e?-3:4===e?-5:0}(t)}function sC(t){rC(t),function(t){t.character.ageing.decrepitudeLevel=oC(t.character.ageing.decrepitudePoints,0)}(t),function(t){t.character.ageing.age=t.character.ageing.currentYear-t.character.ageing.birthYear}(t)}function rC(t){let e=t.character.virtues.findIndex((t=>t.name.indexOf("Strong Faerie Blood")>=0))>=0?3:t.character.virtues.findIndex((t=>t.name.indexOf("Faerie Blood")>=0))>=0?1:0;t.character.ageing.ageingRollModifier=t.character.familiar.bronzeBondLevel+t.character.ageing.livingConditionModifier+t.character.ageing.longevityModifier+t.character.lab.livingConditionsModifier+e-Math.ceil(t.character.ageing.age/10)}function oC(t,e){let n=5*(e+1);return n>t?e:oC(t-n,e+1)}function aC(t){var e;(null===(e=null==t?void 0:t.character)||void 0===e?void 0:e.arts)&&(t.character.spellcastingStats.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.spellcastingStats.spontaneousCastingTotal=function(t){let e=t.character.spellcastingStats;return lC(t)+hC(t,e.arts,"",e.focus)+e.talismanBonus+e.similarFomulaicSpellBonus+(e.ceremonial?cC(t,"Ceremonial"):0)}(t),t.character.spells.forEach((e=>e.castingTotal=function(t,e){return lC(t)+hC(t,e.arts,e.prerequisites,e.focus)+e.attunementBonus+e.masteryLevel+(e.ritual?cC(t,"Ritual"):0)}(t,e))))}function lC(t){var e;let n=t.character.spellcastingStats,i=n.cyclicMagicVirtue?3:0,s=n.cyclicMagicFlaw?-3:0,r=!0===(null===(e=t.character.familiar)||void 0===e?void 0:e.isSpirit)?t.character.familiar.bronzeBondLevel:0;return t.character.characteristics.stamina.value+t.character.physicalStatus.totalPenalty+r+n.aura+(n.positiveCycle?i:s)+(n.staminaSpecialisation?1:0)+(n.largeGestures?1:0)+(n.loudVoice?1:0)}function cC(t,e){var n,i;let s=t.character.abilities.find((t=>"Artes Liberales"==t.name)),r=t.character.abilities.find((t=>"Philosophiae"==t.name)),o=(null==s?void 0:s.specialisation)==e?1:0,a=(null==r?void 0:r.specialisation)==e?1:0,l=(null==s?void 0:s.puissant)?3:0,c=(null==r?void 0:r.puissant)?3:0;return(null!==(n=null==s?void 0:s.level)&&void 0!==n?n:0)+o+l+(null!==(i=null==r?void 0:r.level)&&void 0!==i?i:0)+a+c}function hC(t,e,n,i){let s=uC(t,e),r=dC(t,e);if(null===s||null==r)return 0;let o=uC(t,n),a=dC(t,n),l=Math.min(s,null!=o?o:1e3),c=Math.min(r,null!=a?a:1e3);return l+c+(i?Math.min(l,c):0)}function uC(t,e){let n=t.character.arts;return e.indexOf("Cr")>=0?pC(n.creo):e.indexOf("In")>=0?pC(n.intellego):e.indexOf("Mu")>=0?pC(n.muto):e.indexOf("Pe")>=0?pC(n.perdo):e.indexOf("Re")>=0?pC(n.rego):null}function dC(t,e){let n=t.character.arts;return e.indexOf("An")>=0?pC(n.animal):e.indexOf("Aq")>=0?pC(n.aquam):e.indexOf("Au")>=0?pC(n.auram):e.indexOf("Co")>=0?pC(n.corpus):e.indexOf("He")>=0?pC(n.herbam):e.indexOf("Ig")>=0?pC(n.ignem):e.indexOf("Im")>=0?pC(n.imaginem):e.indexOf("Me")>=0?pC(n.mentem):e.indexOf("Te")>=0?pC(n.terram):e.indexOf("Vi")>=0?pC(n.vim):null}function pC(t){return t.level+(t.puissant?3:0)}function fC(t,e){return{year:t,xp:"",correspondence:"",description:"",plans:"",areaLore:"",season:e,planningMode:!0}}function gC(t){vC(t.character.lab.virtues,t.character.lab.availableModifiers),vC(t.character.lab.flaws,t.character.lab.availableModifiers),function(t){var e,n,i,s,r,o,a,l,c,h,u,d,p,f,g,v;let m=t.character.lab,b=mC(m),w=m.virtues.concat(m.flaws).reduce(((t,e)=>t+e.cost),0);m.occupiedSize=m.size+w-m.refinement;let y=null!==(n=null===(e=b.find((t=>"Safety"==t.name)))||void 0===e?void 0:e.rating)&&void 0!==n?n:0,x=null!==(s=null===(i=b.find((t=>"Health"==t.name)))||void 0===i?void 0:i.rating)&&void 0!==s?s:0;m.livingConditionsModifier=x>=0?Math.floor(x/2):Math.ceil(x/2),m.effectiveSafety=y-Math.max(0,m.occupiedSize)+m.refinement,m.specialisation1.rating=null!==(o=null===(r=b.find((t=>t.name==m.specialisation1.name)))||void 0===r?void 0:r.rating)&&void 0!==o?o:0,m.specialisation2.rating=null!==(l=null===(a=b.find((t=>t.name==m.specialisation2.name)))||void 0===a?void 0:a.rating)&&void 0!==l?l:0,m.art1.rating=null!==(h=null===(c=b.find((t=>t.name==m.art1.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0,m.art2.rating=null!==(d=null===(u=b.find((t=>t.name==m.art2.name)))||void 0===u?void 0:u.rating)&&void 0!==d?d:0,m.art3.rating=null!==(f=null===(p=b.find((t=>t.name==m.art3.name)))||void 0===p?void 0:p.rating)&&void 0!==f?f:0,m.art4.rating=null!==(v=null===(g=b.find((t=>t.name==m.art4.name)))||void 0===g?void 0:g.rating)&&void 0!==v?v:0,t.character.lab.inventiveGeniusVirtue=t.character.virtues.findIndex((t=>"Inventive Genius"==t.name))>=0,t.character.lab.cyclicMagicVirtue=t.character.virtues.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0,t.character.lab.cyclicMagicFlaw=t.character.flaws.findIndex((t=>t.name.startsWith("Cyclic Magic")))>=0}(t),bC(t),rC(t)}function vC(t,e){t.forEach((t=>{let n=t.modifiers.filter((t=>0!=t.rating));t.modifiers=e.map((t=>({name:t.name,rating:0}))),n.forEach((e=>{let n=t.modifiers.findIndex((t=>t.name==e.name));n>=0&&(t.modifiers[n].rating=e.rating)})),t.category.length>1&&("outfitting".startsWith(t.category.toLocaleLowerCase())&&(t.category="Outfitting"),"stucture".startsWith(t.category.toLocaleLowerCase())&&(t.category="Structure"),"supernatural".startsWith(t.category.toLocaleLowerCase())&&(t.category="Supernatural"))}))}function mC(t){return t.availableModifiers.map((e=>({name:e.name,rating:t.virtues.concat(t.flaws).reduce(((t,n)=>t.concat(n.modifiers.filter((t=>t.name==e.name)))),[]).reduce(((t,e)=>t+e.rating),0)})))}function bC(t){let e=t.character.lab,n=e.inventiveGeniusVirtue?3:0,i=e.inventiveGeniusVirtue?6:0,s=e.cyclicMagicVirtue?3:0,r=e.cyclicMagicFlaw?-3:0;e.researchProjects.forEach((o=>{var a,l,c,h;let u=null!==(l=null===(a=t.character.abilities.find((t=>"Magic Theory"==t.name)))||void 0===a?void 0:a.level)&&void 0!==l?l:0,d=null!==(h=null===(c=mC(e).find((t=>"GQ"==t.name)))||void 0===c?void 0:c.rating)&&void 0!==h?h:0;o.artModifier=hC(t,o.arts,o.prerequisites,o.focus),o.labTotal=e.auraBonus+e.labBaseQuality+d+o.artModifier+o.labAssistantBonus+u+Math.max(o.experiment?i:0,o.newWork?n:0)+(o.positiveCycle?s:r)+(o.magicTheorySpecialisation?1:0)+t.character.characteristics.intelligence.value+(o.intelligenceSpecialisation?1:0)+(o.nocturnal?2:0)+o.materialBonus+o.shapeBonus+o.similarResearchBonus+(o.talisman?5:0),o.surplusLabTotal=o.labTotal-o.level}))}let wC=class{constructor(){this.active=!1,this.interacting=!1,this.stopInteraction=function(t,e=300){let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(this,i)}),e)}}((()=>{this.interacting=!1}),1e3),this.store=uB.get(Sm),this.ea=uB.get(Ri)}get typename(){return"BASE"}bound(){this.active=!0,this.checkForChanges(),this.ea.subscribe("ui-interaction",(()=>{this.interacting=!0,this.stopInteraction()}))}unbound(){this.active=!1}checkForChanges(){this.active&&(this.hasChanges()&&this.saveChanges(),setTimeout((()=>{this.checkForChanges()}),2e3))}saveChanges(){}hasChanges(){return!1}};wC=ZS([Cm(),qS("design:paramtypes",[])],wC);class yC extends wC{constructor(t,e){super(),this.pluckModel=t,this.saveAction=e,this.model=void 0,this.modelState=void 0}stateChanged(t,e){if(t.present){let e=this.pluckModel(t.present);if(JSON.stringify(this.modelState)===JSON.stringify(e))return;if(this.modelState=this.pluckModel(t.present),void 0===this.modelState)return;this.modelState=this.transformModel(this.modelState),void 0===this.model&&(this.model=vA(this.pluckModel(t.present))),this.hasChanges()&&(this.model=vA(this.modelState))}}transformModel(t){return t}saveChanges(){this.interacting||this.store.dispatch(this.saveAction,vA(this.model))}hasChanges(){return JSON.stringify(this.modelState)!==JSON.stringify(this.model)}}class xC extends wC{constructor(t,e,n,i){super(),this.pluckModel=t,this.pluckSubModel=e,this.updateSubModel=n,this.saveAction=i,this.model=void 0,this.modelState=void 0}stateChanged(t,e){if(t.present){let e=this.pluckSubModel(this.pluckModel(t.present));if(JSON.stringify(this.modelState)===JSON.stringify(e))return;if(this.modelState=this.pluckSubModel(this.pluckModel(t.present)),void 0===this.modelState)return;void 0===this.model&&(this.model=vA(this.pluckModel(t.present))),this.hasChanges()&&this.updateSubModel(this.model,vA(this.modelState))}}saveChanges(){this.interacting||this.store.dispatch(this.saveAction,vA(this.pluckSubModel(this.model)))}hasChanges(){return void 0!==this.model&&JSON.stringify(this.modelState)!==JSON.stringify(this.pluckSubModel(this.model))}}let kC=class extends xC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),(t=>t.smallAvatar),((t,e)=>t.smallAvatar=e),$A)}};kC=ZS([Lh(t),qS("design:paramtypes",[])],kC);var SC=n(3370),AC={};AC.styleTagTransform=nA(),AC.setAttributes=YS(),AC.insert=GS().bind(null,"head"),AC.domAPI=QS(),AC.insertStyleElement=tA(),KS()(SC.Z,AC),SC.Z&&SC.Z.locals&&SC.Z.locals;const CC="avatar-full-block",EC='<droppable-image value.two-way="model.fullAvatar"></droppable-image>',TC=EC,$C=[];let IC;function RC(t){IC||(IC=Wh.define({name:CC,template:EC,dependencies:$C})),t.register(IC)}let OC=class extends xC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),(t=>t.fullAvatar),((t,e)=>t.fullAvatar=e),IA)}};OC=ZS([Lh(s),qS("design:paramtypes",[])],OC);var PC=n(3845),LC={};LC.styleTagTransform=nA(),LC.setAttributes=YS(),LC.insert=GS().bind(null,"head"),LC.domAPI=QS(),LC.insertStyleElement=tA(),KS()(PC.Z,LC),PC.Z&&PC.Z.locals&&PC.Z.locals;const MC="description-block",UC='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',BC=UC,NC=[];let jC;function FC(t){jC||(jC=Wh.define({name:MC,template:UC,dependencies:NC})),t.register(jC)}let VC=class extends xC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),(t=>t.description),((t,e)=>t.description=e),EA)}};VC=ZS([Lh(o),qS("design:paramtypes",[])],VC);const DC="virtues-list",ZC='<list class="virtues" title="VIRTUES" can-add-items.bind="false" items.two-way="model" has-additional-info.bind="true"></list>',zC=ZC,qC=[];let HC;function KC(t){HC||(HC=Wh.define({name:DC,template:ZC,dependencies:qC})),t.register(HC)}let WC=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.virtues}),AA)}transformModel(t){for(;t.length<15;)t.push({name:"",additionalInfo:""});return t}};WC=ZS([Lh(l),Mh,qS("design:paramtypes",[])],WC);const QC="flaws-list",_C='<list class="flaws" title="FLAWS" can-add-items.bind="false" items.two-way="model" has-additional-info.bind="true"></list>',GC=_C,XC=[];let YC;function JC(t){YC||(YC=Wh.define({name:QC,template:_C,dependencies:XC})),t.register(YC)}let tE=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.flaws}),CA)}transformModel(t){for(;t.length<15;)t.push({name:"",additionalInfo:""});return t}};tE=ZS([Lh(h),Mh,qS("design:paramtypes",[])],tE);var eE=n(5555),nE={};nE.styleTagTransform=nA(),nE.setAttributes=YS(),nE.insert=GS().bind(null,"head"),nE.domAPI=QS(),nE.insertStyleElement=tA(),KS()(eE.Z,nE),eE.Z&&eE.Z.locals&&eE.Z.locals;const iE="personality-traits-list",sE='<title text="PERSONALITY"></title>\r\n<div class="container">\r\n    <div class="trait" repeat.for="trait of model">\r\n        <text-field value.two-way="trait.name"></text-field>\r\n        <stat-box if.bind="trait.name" mode="secondary" size="s" value.two-way="trait.rating" prefix-plus.bind="true"></stat-box>\r\n    </div>\r\n</div>\r\n<footer></footer>',rE=sE,oE=[];let aE;function lE(t){aE||(aE=Wh.define({name:iE,template:sE,dependencies:oE})),t.register(aE)}let cE=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.personalityTraits}),SA)}transformModel(t){for(;t.length<10;)t.push({name:"",rating:0});return t}};cE=ZS([Lh(d),qS("design:paramtypes",[])],cE);var hE=n(1589),uE={};uE.styleTagTransform=nA(),uE.setAttributes=YS(),uE.insert=GS().bind(null,"head"),uE.domAPI=QS(),uE.insertStyleElement=tA(),KS()(hE.Z,uE),hE.Z&&hE.Z.locals&&hE.Z.locals;const dE="name-block",pE='<text-field placeholder="Name" value.two-way="model.name"></text-field>',fE=pE,gE=[];let vE;function mE(t){vE||(vE=Wh.define({name:dE,template:pE,dependencies:gE})),t.register(vE)}let bE=class extends xC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.description}),(t=>t.name),((t,e)=>t.name=e),TA)}};bE=ZS([Lh(f),qS("design:paramtypes",[])],bE);var wE=n(3260),yE={};yE.styleTagTransform=nA(),yE.setAttributes=YS(),yE.insert=GS().bind(null,"head"),yE.domAPI=QS(),yE.insertStyleElement=tA(),KS()(wE.Z,yE),wE.Z&&wE.Z.locals&&wE.Z.locals;const xE="background-block",kE='<text-box title="BACKGROUND" text.two-way="model"></text-box>',SE=kE,AE=[];let CE;function EE(t){CE||(CE=Wh.define({name:xE,template:kE,dependencies:AE})),t.register(CE)}let TE=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.background}),HA)}};TE=ZS([Lh(v),qS("design:paramtypes",[])],TE);const $E="description",IE="\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<name-block></name-block>\r\n<avatar-small-block></avatar-small-block>\r\n<avatar-full-block></avatar-full-block>\r\n<description-block></description-block>\r\n<virtues-list></virtues-list>\r\n<flaws-list></flaws-list>\r\n<personality-traits-list></personality-traits-list>\r\n<background-block></background-block>",RE=IE,OE=[e,r,a,c,u,p,g,m];let PE;function LE(t){PE||(PE=Wh.define({name:$E,template:IE,dependencies:OE})),t.register(PE)}let ME=class{};ME=ZS([Lh(b)],ME);var UE=n(3459),BE={};BE.styleTagTransform=nA(),BE.setAttributes=YS(),BE.insert=GS().bind(null,"head"),BE.domAPI=QS(),BE.insertStyleElement=tA(),KS()(UE.Z,BE),UE.Z&&UE.Z.locals&&UE.Z.locals;var NE=n(927),jE={};jE.styleTagTransform=nA(),jE.setAttributes=YS(),jE.insert=GS().bind(null,"head"),jE.domAPI=QS(),jE.insertStyleElement=tA(),KS()(NE.Z,jE),NE.Z&&NE.Z.locals&&NE.Z.locals;const FE="abilities-block",VE='<title text="ABILITIES"></title>\r\n<div class="container">\r\n    <div class="ability ${item.level === 0 ? \'untrained\' : \'\'}" repeat.for="item of model">\r\n        <text-field class="name" value.two-way="item.name"></text-field>\r\n        <text-field class="specialisation" value.two-way="item.specialisation" placeholder="Specialisation"></text-field>\r\n        <stat-box class="level" mode="secondary" value.two-way="item.level" min="0" size="s" title="Ability level"></stat-box>\r\n        <stat-box class="xp" mode="secondary" value.two-way="item.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n        <span class="puissant-label"><span class="numbers text" if.bind="item.puissant">+2</span></span>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add ability"></add-item-input>\r\n</div>\r\n<footer></footer>',DE=VE,ZE=[];let zE;function qE(t){zE||(zE=Wh.define({name:FE,template:VE,dependencies:ZE})),t.register(zE)}let HE=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.abilities}),kA),this.itemAdded=t=>{this.model.push({name:t,specialisation:"",level:0,xp:0,puissant:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};HE=ZS([Lh(y),qS("design:paramtypes",[])],HE);var KE=n(3292),WE={};WE.styleTagTransform=nA(),WE.setAttributes=YS(),WE.insert=GS().bind(null,"head"),WE.domAPI=QS(),WE.insertStyleElement=tA(),KS()(KE.Z,WE),KE.Z&&KE.Z.locals&&KE.Z.locals;const QE="characteristics-block",_E='<title text="CHARACTERISTICS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.strength.specialisation"></text-field>\r\n        <span class="text left-col">STR</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.strength.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.strength.value"></stat-box>\r\n\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.dexterity.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.dexterity.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">DEX</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.dexterity.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.stamina.specialisation"></text-field>\r\n        <span class="text left-col">STA</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.stamina.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.stamina.value"></stat-box>\r\n        \r\n        <stat-box prefix-plus.bind="true" value.two-way="model.quickness.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.quickness.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">QUI</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.quickness.specialisation"></text-field>\r\n    </div>\r\n    <br/>\r\n    <div class="grid">\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.intelligence.specialisation"></text-field>\r\n        <span class="text left-col">INT</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.intelligence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.intelligence.value"></stat-box>\r\n        \r\n        <stat-box prefix-plus.bind="true" value.two-way="model.presence.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.presence.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">PRE</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.presence.specialisation"></text-field>\r\n\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.perception.specialisation"></text-field>\r\n        <span class="text left-col">PER</span>\r\n        <stat-box size="xs" min="0" value.two-way="model.perception.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <stat-box prefix-plus.bind="true" value.two-way="model.perception.value"></stat-box>\r\n        \r\n        <stat-box prefix-plus.bind="true" value.two-way="model.communication.value"></stat-box>\r\n        <stat-box size="xs" min="0" value.two-way="model.communication.agingPoints" color-mode="monochrome" mode="secondary" title="Aging points"></stat-box>\r\n        <span class="text">COM</span>\r\n        <text-field class="specialisation" placeholder="Specialisation" value.two-way="model.communication.specialisation"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',GE=_E,XE=[];let YE;function JE(t){YE||(YE=Wh.define({name:QE,template:_E,dependencies:XE})),t.register(YE)}let tT=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.characteristics}),xA)}};tT=ZS([Lh(k),qS("design:paramtypes",[])],tT);var eT=n(1459),nT={};nT.styleTagTransform=nA(),nT.setAttributes=YS(),nT.insert=GS().bind(null,"head"),nT.domAPI=QS(),nT.insertStyleElement=tA(),KS()(eT.Z,nT),eT.Z&&eT.Z.locals&&eT.Z.locals;const iT="fatigue-block",sT='<title text="FATIGUE"></title>\r\n<div class="container grid text">\r\n    <span>Fresh (-0)</span><span class="right"></span><radio-button group="fatigue" state="${model.fatigue == 0 ? \'selected\' : \'unselected\'}" value="0"></radio-button>\r\n    <span>Winded (-0)</span><span class="right">2m</span><radio-button group="fatigue" state="${model.fatigue == 1 ? \'selected\' : \'unselected\'}" value="1"></radio-button>\r\n    <span>Weary (-1)</span><span class="right">10m</span><radio-button group="fatigue" state="${model.fatigue == 2 ? \'selected\' : \'unselected\'}" value="2"></radio-button>\r\n    <span>Tired (-3)</span><span class="right">30m</span><radio-button group="fatigue" state="${model.fatigue == 3 ? \'selected\' : \'unselected\'}" value="3"></radio-button>\r\n    <span>Dazed (-5)</span><span class="right">1h</span><radio-button group="fatigue" state="${model.fatigue == 4 ? \'selected\' : \'unselected\'}" value="4"></radio-button>\r\n    <span>Unconscious</span><span class="right">2h</span><radio-button group="fatigue" state="${model.fatigue == 5 ? \'selected\' : \'unselected\'}" value="5"></radio-button>\r\n</div>\r\n<footer></footer>',rT=sT,oT=[];let aT;function lT(t){aT||(aT=Wh.define({name:iT,template:sT,dependencies:oT})),t.register(aT)}let cT=class extends xC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),(t=>t.fatigue),((t,e)=>t.fatigue=e),RA)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"fatigue"==t.group&&(this.model.fatigue=Number.parseInt(t.value))}))}};cT=ZS([Lh(A),qS("design:paramtypes",[])],cT);var hT=n(6903),uT={};uT.styleTagTransform=nA(),uT.setAttributes=YS(),uT.insert=GS().bind(null,"head"),uT.domAPI=QS(),uT.insertStyleElement=tA(),KS()(hT.Z,uT),hT.Z&&hT.Z.locals&&hT.Z.locals;const dT="damage-block",pT='<title text="WOUNDS"></title>\r\n<div class="container text">\r\n    <stat-box header="Light" value.two-way="model.wounds.lightWounds" min="0" size="s"></stat-box>\r\n    <stat-box header="Medium" value.two-way="model.wounds.mediumWounds" min="0" size="s"></stat-box>\r\n    <stat-box header="Heavy" value.two-way="model.wounds.heavyWounds" min="0" size="s"></stat-box>\r\n</div>\r\n<footer></footer>',fT=pT,gT=[];let vT;function mT(t){vT||(vT=Wh.define({name:dT,template:pT,dependencies:gT})),t.register(vT)}let bT=class extends xC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),(t=>t.wounds),((t,e)=>t.wounds=e),OA)}};bT=ZS([Lh(E),qS("design:paramtypes",[])],bT);var wT=n(4397),yT={};yT.styleTagTransform=nA(),yT.setAttributes=YS(),yT.insert=GS().bind(null,"head"),yT.domAPI=QS(),yT.insertStyleElement=tA(),KS()(wT.Z,yT),wT.Z&&wT.Z.locals&&wT.Z.locals;const xT="confidence-block",kT='<stat-box\r\n    header="Confidence Points"\r\n    size="l"\r\n    min="0"\r\n    value.two-way="model.score"\r\n    mode="primary-angled">\r\n</stat-box>',ST=kT,AT=[];let CT;function ET(t){CT||(CT=Wh.define({name:xT,template:kT,dependencies:AT})),t.register(CT)}let TT=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.confidence}),BA)}};TT=ZS([Lh($),qS("design:paramtypes",[])],TT);var $T=n(7804),IT={};IT.styleTagTransform=nA(),IT.setAttributes=YS(),IT.insert=GS().bind(null,"head"),IT.domAPI=QS(),IT.insertStyleElement=tA(),KS()($T.Z,IT),$T.Z&&$T.Z.locals&&$T.Z.locals;const RT="active-magic-list",OT='<title text="ACTIVE MAGIC"></title>\r\n<div class="container">\r\n    <div class="active-magic grid" repeat.for="magic of model">\r\n        <checkbox size="s" mode="angled" value.two-way="magic.active" title="Active"></checkbox>\r\n        <text-field class="name" value.two-way="magic.name" placeholder="Name"></text-field>\r\n        <stat-box header="Pen." show-header.bind="$first" mode="secondary" value.two-way="magic.penetration" min="0" size="s" title="Penetration" readonly.bind="!magic.active" color-mode="${magic.active ? \'color\' : \'monochrome\'}"></stat-box>\r\n        <stat-info-button source.bind="magic" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <add-item-input class="add-magic-input" placeholder="Add active magic" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',PT=OT,LT=[];let MT;function UT(t){MT||(MT=Wh.define({name:RT,template:OT,dependencies:LT})),t.register(MT)}let BT=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.activeMagic}),jA),this.itemAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,penetration:0,active:!0,additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};BT=ZS([Lh(R),qS("design:paramtypes",[])],BT);var NT=n(5889),jT={};jT.styleTagTransform=nA(),jT.setAttributes=YS(),jT.insert=GS().bind(null,"head"),jT.domAPI=QS(),jT.insertStyleElement=tA(),KS()(NT.Z,jT),NT.Z&&NT.Z.locals&&NT.Z.locals;const FT="physical-penalty-block",VT='<stat-box\r\n    header="Physical Penalty"\r\n    size="l"\r\n    value="${model.totalPenalty}"\r\n    readonly.bind="true"\r\n    mode="primary-angled">\r\n</stat-box>',DT=VT,ZT=[];let zT;function qT(t){zT||(zT=Wh.define({name:FT,template:VT,dependencies:ZT})),t.register(zT)}let HT=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.physicalStatus}),null)}};HT=ZS([Lh(P),qS("design:paramtypes",[])],HT);const KT="stats",WT='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<characteristics-block></characteristics-block>\r\n<fatigue-block></fatigue-block>\r\n<damage-block></damage-block>\r\n<confidence-block></confidence-block>\r\n<physical-penalty-block></physical-penalty-block>\r\n<active-magic-list></active-magic-list>\r\n<abilities-block></abilities-block>\r\n\r\n<div style="clear: both;"></div>',QT=WT,_T=[x,S,C,T,I,O,L];let GT;function XT(t){GT||(GT=Wh.define({name:KT,template:WT,dependencies:_T})),t.register(GT)}let YT=class{};YT=ZS([Lh(M)],YT);var JT=n(8376),t$={};t$.styleTagTransform=nA(),t$.setAttributes=YS(),t$.insert=GS().bind(null,"head"),t$.domAPI=QS(),t$.insertStyleElement=tA(),KS()(JT.Z,t$),JT.Z&&JT.Z.locals&&JT.Z.locals;var e$=n(5185),n$={};n$.styleTagTransform=nA(),n$.setAttributes=YS(),n$.insert=GS().bind(null,"head"),n$.domAPI=QS(),n$.insertStyleElement=tA(),KS()(e$.Z,n$),e$.Z&&e$.Z.locals&&e$.Z.locals;const i$="arts-block",s$='<title text="ARTS"></title>\r\n<div class="container grid">\r\n    <stat-box class="level" mode="${model.creo.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.creo.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.creo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.creo.level === 0 ? \'untrained\' : \'\'}">Creo</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.animal.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.animal.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.animal.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span  class="name text ${model.animal.level === 0 ? \'untrained\' : \'\'}">Animal</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.ignem.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.ignem.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.ignem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.ignem.level === 0 ? \'untrained\' : \'\'}">Ignem</span>\r\n\r\n   \r\n\r\n    <stat-box class="level" mode="${model.intellego.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.intellego.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.intellego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.intellego.level === 0 ? \'untrained\' : \'\'}">Intellego</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.aquam.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.aquam.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.aquam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.aquam.level === 0 ? \'untrained\' : \'\'}">Aquam</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.imaginem.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.imaginem.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.imaginem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.imaginem.level === 0 ? \'untrained\' : \'\'}">Imaginem</span>\r\n\r\n\r\n\r\n    <stat-box class="level" mode="${model.muto.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.muto.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.muto.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.muto.level === 0 ? \'untrained\' : \'\'}">Muto</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.auram.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.auram.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.auram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.auram.level === 0 ? \'untrained\' : \'\'}">Auram</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.mentem.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.mentem.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.mentem.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.mentem.level === 0 ? \'untrained\' : \'\'}">Mentem</span>\r\n\r\n\r\n\r\n    <stat-box class="level" mode="${model.perdo.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.perdo.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.perdo.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.perdo.level === 0 ? \'untrained\' : \'\'}">Perdo</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.corpus.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.corpus.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.corpus.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.corpus.level === 0 ? \'untrained\' : \'\'}">Corpus</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.terram.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.terram.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.terram.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.terram.level === 0 ? \'untrained\' : \'\'}">Terram</span>\r\n\r\n\r\n\r\n    <stat-box class="level" mode="${model.rego.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.rego.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.rego.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.rego.level === 0 ? \'untrained\' : \'\'}">Rego</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.herbam.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.herbam.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.herbam.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.herbam.level === 0 ? \'untrained\' : \'\'}">Herbam</span>\r\n\r\n    <span></span>\r\n\r\n    <stat-box class="level" mode="${model.vim.puissant ? \'primary\' : \'secondary\'}-angled" value.two-way="model.vim.level" min="0" size="s" title="Level"></stat-box>\r\n    <stat-box class="xp" mode="secondary" value.two-way="model.vim.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    <span class="name text ${model.vim.level === 0 ? \'untrained\' : \'\'}">Vim</span>\r\n</div>\r\n<footer></footer>',r$=s$,o$=[];let a$;function l$(t){a$||(a$=Wh.define({name:i$,template:s$,dependencies:o$})),t.register(a$)}let c$=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.arts}),PA)}};c$=ZS([Lh(B),qS("design:paramtypes",[])],c$);var h$=n(2244),u$={};u$.styleTagTransform=nA(),u$.setAttributes=YS(),u$.insert=GS().bind(null,"head"),u$.domAPI=QS(),u$.insertStyleElement=tA(),KS()(h$.Z,u$),h$.Z&&h$.Z.locals&&h$.Z.locals;const d$="spellcasting-modifiers-block",p$='<title text="SPELLCASTING STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Aura Bonus</span>\r\n        <span class="text">Stamina Specialisation</span>\r\n        <span class="text" if.bind="showGoodCycle">Good Cycle</span>\r\n        <span class="text">Loud Voice</span>\r\n        <span class="text">Large Gestures</span>\r\n\r\n        <span class="text">Arts</span>\r\n        <span class="text">Ceremonial</span>\r\n        <span class="text">Talisman Bonus</span>\r\n        <span class="text">Similar Spell</span>\r\n        <span class="text">Focus</span>\r\n        <span class="text">Casting Total</span>\r\n\r\n        <span if.bind="!showGoodCycle"></span>\r\n\r\n        <stat-box value.two-way="model.aura" mode="secondary" prefix-plus.bind="true"></stat-box></stat-box>\r\n        <checkbox value.two-way="model.staminaSpecialisation" mode="angled"></checkbox>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="model.positiveCycle" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.loudVoice" mode="angled"></checkbox>\r\n        <checkbox value.two-way="model.largeGestures" mode="angled"></checkbox>\r\n\r\n        <text-field class="arts" value.two-way="model.arts" placeholder="Arts"></text-field>\r\n        <checkbox value.two-way="model.ceremonial" mode="angled" color-mode="monochrome"></checkbox>\r\n        <stat-box value.two-way="model.talismanBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></stat-box>\r\n        <stat-box value.two-way="model.similarFomulaicSpellBonus" mode="secondary" prefix-plus.bind="true" color-mode="monochrome"></stat-box>\r\n        <checkbox value.two-way="model.focus" mode="angled" color-mode="monochrome"></checkbox>\r\n        <stat-box value.two-way="model.spontaneousCastingTotal" mode="primary-angled" readonly.bind="true" prefix-plus.bind="true" color-mode="monochrome"></stat-box>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',f$=p$,g$=[];let v$;function m$(t){v$||(v$=Wh.define({name:d$,template:p$,dependencies:g$})),t.register(v$)}let b$=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellcastingStats}),zA)}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};b$=ZS([Lh(j),qS("design:paramtypes",[])],b$);var w$=n(7624),y$={};y$.styleTagTransform=nA(),y$.setAttributes=YS(),y$.insert=GS().bind(null,"head"),y$.domAPI=QS(),y$.insertStyleElement=tA(),KS()(w$.Z,y$),w$.Z&&w$.Z.locals&&w$.Z.locals;const x$="spell-list",k$='<title text="SPELLS"></title>\r\n<div class="container">\r\n    <div class="spells">\r\n        <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n            <span class="form-header"></span>\r\n            <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n            <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n            <span class="casting-total-label numbers text">+${spell.castingTotal}</span>\r\n            <stat-box class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></stat-box>\r\n            <stat-box class="mastery-level" mode="secondary" value.two-way="spell.masteryLevel" min="0" size="s" color-mode="monochrome" title="Mastery level"></stat-box>\r\n            <text-field class="range" value.two-way="spell.range" placeholder="Range"></text-field>\r\n            <text-field class="duration" value.two-way="spell.duration" placeholder="Duration"></text-field>\r\n            <text-field class="target" value.two-way="spell.target" placeholder="Target"></text-field>\r\n            <text-field class="sigil" value.two-way="spell.sigil" placeholder="Sigil" title="${spell.sigil}"></text-field>\r\n            <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n            <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n            <stat-info-button source.bind="spell" property="additionalInfo"></stat-info-button>\r\n            <symbol click.delegate="editDetails(spell)" title="Edit details"></symbol>\r\n            <cross-button click.delegate="unlearnSpell(spell)" title="Unlearn spell" mode="angled"></cross-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add spell" on-item-added.bind="spellAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',S$=k$,A$=[];let C$;function E$(t){C$||(C$=Wh.define({name:x$,template:k$,dependencies:A$})),t.register(C$)}var T$=n(4235),$$={};$$.styleTagTransform=nA(),$$.setAttributes=YS(),$$.insert=GS().bind(null,"head"),$$.domAPI=QS(),$$.insertStyleElement=tA(),KS()(T$.Z,$$),T$.Z&&T$.Z.locals&&T$.Z.locals;const I$="spell-details-dialog",R$='<dialog-box title="${model.name}" size="s">\r\n    <div class="spell-details">\r\n        <span class="text">Focus</span>\r\n        <checkbox size="xs" value.two-way="model.focus"></checkbox>\r\n\r\n        <span class="text">Ritual Spell</span>\r\n        <checkbox size="xs" value.two-way="model.ritual"></checkbox>\r\n\r\n        <span class="text">Attunement Bonus</span>\r\n        <stat-box class="attunement-bonus" mode="secondary" value.two-way="model.attunementBonus" min="0" size="xs" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Attunement Type</span>\r\n        <text-field class="attunement" value.two-way="model.attunement"></text-field>\r\n\r\n        <span class="text">Masteries</span>\r\n        <text-field class="masteries" value.two-way="model.masteries"></text-field>\r\n\r\n        <span class="text">Mastery XP</span>\r\n        <stat-box class="xp" mode="secondary" value.two-way="model.xp" min="0" size="xs" color-mode="monochrome" title="Excess XP"></stat-box>\r\n    </div>\r\n</dialog-box>',O$=R$,P$=[];let L$;function M$(t){L$||(L$=Wh.define({name:I$,template:R$,dependencies:P$})),t.register(L$)}var U$;let B$=U$=class{activate(t){this.model=t}static open(t,e){let n=uB.get(fv),i=vA(t);n.open({component:()=>U$,overlayDismiss:!0,model:i}).whenClosed((n=>{t.focus=i.focus,t.ritual=i.ritual,t.attunement=i.attunement,t.attunementBonus=i.attunementBonus,t.masteries=i.masteries,t.xp=i.xp,e&&e()}))}};B$=U$=ZS([Lh(D),Mh],B$);let N$=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spells}),LA),this.spellAdded=t=>{this.model.push({name:t,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,additionalInfo:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0,onWishlist:!1}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.editDetails=t=>{B$.open(t)},this.unlearnSpell=t=>{t.onWishlist=!0}}};N$=ZS([Lh(V),qS("design:paramtypes",[])],N$);var j$=n(6073),F$={};F$.styleTagTransform=nA(),F$.setAttributes=YS(),F$.insert=GS().bind(null,"head"),F$.domAPI=QS(),F$.insertStyleElement=tA(),KS()(j$.Z,F$),j$.Z&&j$.Z.locals&&j$.Z.locals;const V$="spell-wishlist",D$='<title text="SPELL WISHLIST"></title>\r\n<div class="container">\r\n    <div class="spells">\r\n        <div class="spell grid ${spell.arts.slice(2).toLowerCase()}-form" repeat.for="spell of model">\r\n            <span class="form-header"></span>\r\n            <text-field class="name" value.two-way="spell.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="spell.arts" placeholder="Arts"></text-field>\r\n            <text-field class="prerequisites" value.two-way="spell.prerequisites"  placeholder="Prereq" title="Prerequisites"></text-field>\r\n            <stat-box class="level" mode="secondary" value.two-way="spell.level" min="0" size="s" title="Spell level"></stat-box>\r\n            <text-field class="page" value.two-way="spell.pageNumber" placeholder="Page"></text-field>\r\n            <text-field class="book" value.two-way="spell.sourceBook" placeholder="Book"></text-field>\r\n            <stat-info-button source.bind="spell" property="additionalInfo"></stat-info-button>\r\n            <cross-button click.delegate="learnSpell(spell)" title="Learn spell"></cross-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add spell" on-item-added.bind="spellAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',Z$=D$,z$=[];let q$;function H$(t){q$||(q$=Wh.define({name:V$,template:D$,dependencies:z$})),t.register(q$)}let K$=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.spellWishlist}),MA),this.spellAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,level:0,xp:0,arts:"",attunement:"",attunementBonus:0,duration:"",focus:!1,ritual:!1,masteries:"",masteryLevel:0,additionalInfo:"",pageNumber:"",prerequisites:"",range:"",sigil:"",sourceBook:"Core",target:"",castingTotal:0,onWishlist:!0}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.learnSpell=t=>{t.onWishlist=!1}}};K$=ZS([Lh(z),qS("design:paramtypes",[])],K$);var W$=n(7266),Q$={};Q$.styleTagTransform=nA(),Q$.setAttributes=YS(),Q$.insert=GS().bind(null,"head"),Q$.domAPI=QS(),Q$.insertStyleElement=tA(),KS()(W$.Z,Q$),W$.Z&&W$.Z.locals&&W$.Z.locals;const _$="sigil",G$='<span class="text title">Sigil</span>\r\n<droppable-image value.two-way="model"></droppable-image>',X$=G$,Y$=[];let J$;function tI(t){J$||(J$=Wh.define({name:_$,template:G$,dependencies:Y$})),t.register(J$)}let eI=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.sigil}),KA),this.dragging=!1,this.onDrop=t=>{if(1!=t.dataTransfer.items.length)return;let e=t.dataTransfer.items[0];if("file"==e.kind&&e.type.startsWith("image")){var n=new FileReader;n.onload=()=>{this.model=n.result,this.dragging=!1},n.readAsDataURL(e.getAsFile())}}}};eI=ZS([Lh(H),qS("design:paramtypes",[])],eI);const nI="magic",iI='\r\n\r\n\r\n\r\n\r\n\r\n<arts-block></arts-block>\r\n<spellcasting-modifiers-block></spellcasting-modifiers-block>\r\n<sigil></sigil>\r\n<div style="clear: both;"></div>\r\n<spell-list></spell-list>\r\n<spell-wishlist></spell-wishlist>\r\n\r\n<div style="clear: both;"></div>',sI=iI,rI=[N,F,Z,q,K];let oI;function aI(t){oI||(oI=Wh.define({name:nI,template:iI,dependencies:rI})),t.register(oI)}let lI=class{};lI=ZS([Lh(W)],lI);var cI=n(2492),hI={};hI.styleTagTransform=nA(),hI.setAttributes=YS(),hI.insert=GS().bind(null,"head"),hI.domAPI=QS(),hI.insertStyleElement=tA(),KS()(cI.Z,hI),cI.Z&&cI.Z.locals&&cI.Z.locals;var uI=n(8412),dI={};dI.styleTagTransform=nA(),dI.setAttributes=YS(),dI.insert=GS().bind(null,"head"),dI.domAPI=QS(),dI.insertStyleElement=tA(),KS()(uI.Z,dI),uI.Z&&uI.Z.locals&&uI.Z.locals;const pI="lab-stats",fI='<title text="LAB STATS"></title>\r\n<div class="container">\r\n    <div class="grid">\r\n        <span class="text">Aura Bonus</span>\r\n        <span class="text">Size</span>\r\n        <span class="text">Refinement</span>\r\n        <span class="text">Occupied Size</span>\r\n        <span class="text">Effective Safety</span>\r\n        <span class="text">Living Conditions Modifier</span>\r\n        <span class="text">Specialisation 1</span>\r\n        <span class="text">Specialisation 2</span>\r\n        <span class="text">Art 1 (Any)</span>\r\n        <span class="text">Art 2 (Any)</span>\r\n        <span class="text">Art 3 (Form)</span>\r\n        <span class="text">Art 4 (Form)</span>\r\n\r\n        <stat-box value.two-way="model.auraBonus" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.size" mode="primary-angled" min="-3"></stat-box>\r\n        <stat-box value.two-way="model.refinement" mode="primary-angled" min="0"></stat-box>\r\n        <stat-box value.two-way="model.occupiedSize" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></stat-box>\r\n        <stat-box value.two-way="model.effectiveSafety" mode="secondary-angled" readonly.bind="true" color-mode="monochrome"></stat-box>\r\n        <stat-box value.two-way="model.livingConditionsModifier" mode="secondary-angled" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.specialisation1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.specialisation2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art1.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art2.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art3.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n        <stat-box value.two-way="model.art4.rating" mode="secondary" readonly.bind="true" color-mode="monochrome" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.specialisation2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art1.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art2.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art3.name" placeholder="Modifier"></text-field>\r\n        <text-field class="modifier-selector" value.two-way="model.art4.name" placeholder="Modifier"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>\r\n',gI=fI,vI=[];let mI;function bI(t){mI||(mI=Wh.define({name:pI,template:fI,dependencies:vI})),t.register(mI)}let wI=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),DA)}};wI=ZS([Lh(_),qS("design:paramtypes",[])],wI);var yI=n(4467),xI={};xI.styleTagTransform=nA(),xI.setAttributes=YS(),xI.insert=GS().bind(null,"head"),xI.domAPI=QS(),xI.insertStyleElement=tA(),KS()(yI.Z,xI),yI.Z&&yI.Z.locals&&yI.Z.locals;const kI="research-projects",SI='<title text="RESEARCH PROJECTS"></title>\r\n<div class="container">\r\n    <div class="projects">\r\n        <div class="project grid" repeat.for="project of model.researchProjects">\r\n            <text-field class="name" value.two-way="project.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="project.arts" placeholder="Arts"></text-field>\r\n            <text-field class="prerequisites" value.two-way="project.prerequisites" placeholder="Prereq"></text-field>\r\n            <stat-box class="level" mode="secondary" value.two-way="project.level" min="1" size="m" title="Level"></stat-box>\r\n\r\n            <stat-box class="total" mode="primary" readonly.bind="true" value.two-way="project.labTotal" min="0" size="s" title="Lab Total"></stat-box>\r\n            <stat-box class="surplus" mode="secondary" readonly.bind="true" value.two-way="project.surplusLabTotal" min="0" size="s" title="Surplus Lab Total"></stat-box>\r\n            <stat-box class="accumulated-total" mode="secondary" value.two-way="project.accumulatedLabTotal" min="0" size="s" title="Accumulated Lab Total"></stat-box>\r\n            \r\n            <symbol click.delegate="editDetails(project)" title="Edit details"></symbol>\r\n            <stat-info-button source.bind="project" property="additionalInfo"></stat-info-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add project" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',AI=SI,CI=[];let EI;function TI(t){EI||(EI=Wh.define({name:kI,template:SI,dependencies:CI})),t.register(EI)}var $I=n(6286),II={};II.styleTagTransform=nA(),II.setAttributes=YS(),II.insert=GS().bind(null,"head"),II.domAPI=QS(),II.insertStyleElement=tA(),KS()($I.Z,II),$I.Z&&$I.Z.locals&&$I.Z.locals;const RI="research-project-details-dialog",OI='<dialog-box title="${model.name}" size="m">\r\n    <div class="project-details">\r\n        <span class="text">Focus</span>\r\n        <checkbox value.two-way="model.focus"></checkbox>\r\n\r\n        <span class="text">Lab Specialisation Bonus</span>\r\n        <stat-box class="specialisation-bonus" mode="secondary" value.two-way="model.specialisationBonus" min="0" size="s" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Intelligence Specialisation</span>\r\n        <checkbox value.two-way="model.intelligenceSpecialisation"></checkbox>\r\n\r\n        <span class="text">Magic Theory Specialisation</span>\r\n        <checkbox value.two-way="model.magicTheorySpecialisation"></checkbox>\r\n\r\n        <span class="text">Talisman</span>\r\n        <checkbox value.two-way="model.talisman"></checkbox>\r\n\r\n        <span if.bind="model.inventiveGeniusVirtue" class="text">New Invention</span>\r\n        <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="model.newWork"></checkbox>\r\n\r\n        <span if.bind="model.inventiveGeniusVirtue" class="text">Experiment</span>\r\n        <checkbox if.bind="model.inventiveGeniusVirtue" value.two-way="model.experiment"></checkbox>\r\n\r\n        <span if.bind="showGoodCycle" class="text">Good Cycle</span>\r\n        <checkbox if.bind="showGoodCycle" value.two-way="model.positiveCycle"></checkbox>\r\n\r\n        <span class="text">Nocturnal</span>\r\n        <checkbox value.two-way="model.nocturnal" title="An “owl,” the maga’s daily cycle is the opposite of most folk — she\r\n        works at night and sleeps during the day. This has the advantage that the night\r\n        is quieter and presents fewer distractions — gain +2 to the Lab Total for\r\n        the season. Due to lack of sunlight and daylight living, however, she suffers a –1\r\n        penalty to her Living Conditions modifier for any year in which she has taken at\r\n        least one Nocturnal season. She also has trouble functioning during the daytime;\r\n        when dawn breaks, she loses a Long-Term Fatigue level and gains one extra botch\r\n        die on all activities for the day. She will likely not appreciate being woken up in\r\n        daylight hours. This routine is commonly taken by characters with the Nocturnal\r\n        Personality Flaw."></checkbox>\r\n\r\n        <span class="text">Similar Research Bonus</span>\r\n        <stat-box class="similar-research-bonus" mode="secondary" value.two-way="model.similarResearchBonus" min="0" size="s" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Lab Assistant Bonus</span>\r\n        <stat-box class="lab-assistant-bonus" mode="secondary" value.two-way="model.labAssistantBonus" min="0" size="s" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Material</span>\r\n        <text-field class="material" value.two-way="model.material"></text-field>\r\n\r\n        <span class="text">Material Bonus</span>\r\n        <stat-box class="material-bonus" mode="secondary" value.two-way="model.materialBonus" min="0" size="s" prefix-plus.bind="true"></stat-box>\r\n\r\n        <span class="text">Shape</span>\r\n        <text-field class="shape" value.two-way="model.shape"></text-field>\r\n\r\n        <span class="text">Shape Bonus</span>\r\n        <stat-box class="shape-bonus" mode="secondary" value.two-way="model.shapeBonus" min="0" size="s" prefix-plus.bind="true"></stat-box>\r\n    </div>\r\n</dialog-box>',PI=OI,LI=[];let MI;function UI(t){MI||(MI=Wh.define({name:RI,template:OI,dependencies:LI})),t.register(MI)}var BI;let NI=BI=class{activate(t){this.model=t}static open(t,e){let n=uB.get(fv),i=vA(t);n.open({component:()=>BI,overlayDismiss:!0,model:i}).whenClosed((n=>{t.focus=i.focus,t.specialisationBonus=i.specialisationBonus,t.intelligenceSpecialisation=i.intelligenceSpecialisation,t.magicTheorySpecialisation=i.magicTheorySpecialisation,t.talisman=i.talisman,t.nocturnal=i.nocturnal,t.similarResearchBonus=i.similarResearchBonus,t.labAssistantBonus=i.labAssistantBonus,t.material=i.material,t.materialBonus=i.materialBonus,t.shape=i.shape,t.shapeBonus=i.shapeBonus,e&&e()}))}};NI=BI=ZS([Lh(Y),Mh],NI);let jI=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),DA),this.itemAdded=t=>{this.model.researchProjects.push({name:t,accumulatedLabTotal:0,surplusLabTotal:0,artModifier:0,arts:"",prerequisites:"",focus:!1,labTotal:0,labAssistantBonus:0,magicTheorySpecialisation:!1,intelligenceSpecialisation:!0,material:"",materialBonus:0,shape:"",shapeBonus:0,similarResearchBonus:0,specialisationBonus:0,talisman:!1,level:1,experiment:!1,newWork:!0,nocturnal:!1,positiveCycle:!1,additionalInfo:""})},this.editDetails=t=>{NI.open(t)}}get showGoodCycle(){return this.model.cyclicMagicVirtue||this.model.cyclicMagicFlaw}};jI=ZS([Lh(X),qS("design:paramtypes",[])],jI);var FI=n(6964),VI={};VI.styleTagTransform=nA(),VI.setAttributes=YS(),VI.insert=GS().bind(null,"head"),VI.domAPI=QS(),VI.insertStyleElement=tA(),KS()(FI.Z,VI),FI.Z&&FI.Z.locals&&FI.Z.locals;const DI="lab-modifications-list",ZI='<title text="LAB MODIFICATIONS"></title>\r\n<div class="container">\r\n    <add-item-input class="add-modifier-input" title="Add Modifier Column" on-item-added.bind="modifierAdded"></add-item-input>\r\n    \r\n    <div class="block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n\r\n        <label class="text title">VIRTUES</label>\r\n        <div class="items">\r\n            <div class="virtue grid" repeat.for="virtue of model.virtues">\r\n                <stat-box class="cost" fade-zero.bind="true" mode="secondary-angled" value.two-way="virtue.cost" min="0" size="xs" title="Cost"></stat-box>\r\n                <text-field class="name" value.two-way="virtue.name" placeholder="Name"></text-field>\r\n                <text-field class="category" value.two-way="virtue.category" placeholder="Category"></text-field>\r\n                <text-field class="description" value.two-way="virtue.description" placeholder="Description"></text-field>\r\n                <stat-box class="modifier" fade-zero.bind="true" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of virtue.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></stat-box>\r\n            </div>\r\n        </div>\r\n        <add-item-input placeholder="Add virtue" on-item-added.bind="virtueAdded"></add-item-input>\r\n    </div>\r\n\r\n    <div class="block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n\r\n        <label class="text title">FLAWS</label>\r\n        <div class="items">\r\n            <div class="flaw grid" repeat.for="flaw of model.flaws">\r\n                <stat-box class="cost" fade-zero.bind="true" mode="secondary-angled" value.two-way="flaw.cost" max="0" size="xs" title="Cost"></stat-box>\r\n                <text-field class="name" value.two-way="flaw.name" placeholder="Name"></text-field>\r\n                <text-field class="category" value.two-way="flaw.category" placeholder="Category"></text-field>\r\n                <text-field class="description" value.two-way="flaw.description" placeholder="Description"></text-field>\r\n                <stat-box class="modifier" fade-zero.bind="true" prefix-plus.bind="true" mode="secondary" repeat.for="modifier of flaw.modifiers" value.two-way="modifier.rating" size="s" title="${modifier.name} modifier" color-mode="monochrome"></stat-box>\r\n            </div>\r\n        </div>\r\n        <add-item-input placeholder="Add flaw" on-item-added.bind="flawAdded"></add-item-input>\r\n    </div>\r\n\r\n    <div class="block last-block">\r\n        <div class="modifier-titles">\r\n            <text-field repeat.for="modifier of model.availableModifiers" class="modifier-title text" value.two-way="modifier.name" title="${modifier.name}"></text-field>\r\n        </div>\r\n        <div class="modifier-totals">\r\n            <span class="numbers modifier-total" repeat.for="total of totals" class="modifier-title text">${total > 0 ? \'+\' : \'\'}${total}</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<footer></footer>',zI=ZI,qI=[];let HI;function KI(t){HI||(HI=Wh.define({name:DI,template:ZI,dependencies:qI})),t.register(HI)}let WI=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),DA),this.virtueAdded=t=>{this.model.virtues.push({name:t,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Virtue"}),this.model.virtues.sort(((t,e)=>t.name.localeCompare(e.name)))},this.flawAdded=t=>{this.model.flaws.push({name:t,category:"Outfitting",cost:0,modifiers:[],notes:"",type:"Flaw"}),this.model.flaws.sort(((t,e)=>t.name.localeCompare(e.name)))},this.modifierAdded=t=>{this.model.availableModifiers.push({name:t})}}get totals(){return this.model?mC(this.model).map((t=>t.rating)):[]}};WI=ZS([Lh(tt),qS("design:paramtypes",[])],WI);var QI=n(2820),_I={};_I.styleTagTransform=nA(),_I.setAttributes=YS(),_I.insert=GS().bind(null,"head"),_I.domAPI=QS(),_I.insertStyleElement=tA(),KS()(QI.Z,_I),QI.Z&&QI.Z.locals&&QI.Z.locals;const GI="lab-description-block",XI='<text-box title="DESCRIPTION" text.two-way="model.description"></text-box>',YI=XI,JI=[];let tR;function eR(t){tR||(tR=Wh.define({name:GI,template:XI,dependencies:JI})),t.register(tR)}let nR=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.lab}),DA)}};nR=ZS([Lh(nt),qS("design:paramtypes",[])],nR);const iR="lab",sR='\r\n\r\n\r\n\r\n\r\n<lab-stats></lab-stats>\r\n<research-projects></research-projects>\r\n<lab-modifications-list></lab-modifications-list>\r\n<lab-description-block></lab-description-block>\r\n\r\n<div style="clear: both;"></div>',rR=sR,oR=[G,J,et,it];let aR;function lR(t){aR||(aR=Wh.define({name:iR,template:sR,dependencies:oR})),t.register(aR)}let cR=class{};cR=ZS([Lh(st)],cR);var hR=n(3298),uR={};uR.styleTagTransform=nA(),uR.setAttributes=YS(),uR.insert=GS().bind(null,"head"),uR.domAPI=QS(),uR.insertStyleElement=tA(),KS()(hR.Z,uR),hR.Z&&hR.Z.locals&&hR.Z.locals;var dR=n(8985),pR={};pR.styleTagTransform=nA(),pR.setAttributes=YS(),pR.insert=GS().bind(null,"head"),pR.domAPI=QS(),pR.insertStyleElement=tA(),KS()(dR.Z,pR),dR.Z&&dR.Z.locals&&dR.Z.locals;const fR="carried-belongings-block",gR='<text-box title="CARRIED" text.two-way="model.carried"></text-box>',vR=gR,mR=[];let bR;function wR(t){bR||(bR=Wh.define({name:fR,template:gR,dependencies:mR})),t.register(bR)}let yR=class extends xC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),(t=>t.carried),((t,e)=>t.carried=e),WA)}};yR=ZS([Lh(ot),qS("design:paramtypes",[])],yR);var xR=n(5204),kR={};kR.styleTagTransform=nA(),kR.setAttributes=YS(),kR.insert=GS().bind(null,"head"),kR.domAPI=QS(),kR.insertStyleElement=tA(),KS()(xR.Z,kR),xR.Z&&xR.Z.locals&&xR.Z.locals;const SR="sanctum-belongings-block",AR='<text-box title="SANCTUM" text.two-way="model.inSanctum"></text-box>',CR=AR,ER=[];let TR;function $R(t){TR||(TR=Wh.define({name:SR,template:AR,dependencies:ER})),t.register(TR)}let IR=class extends xC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),(t=>t.inSanctum),((t,e)=>t.inSanctum=e),QA)}};IR=ZS([Lh(lt),qS("design:paramtypes",[])],IR);var RR=n(1860),OR={};OR.styleTagTransform=nA(),OR.setAttributes=YS(),OR.insert=GS().bind(null,"head"),OR.domAPI=QS(),OR.insertStyleElement=tA(),KS()(RR.Z,OR),RR.Z&&RR.Z.locals&&RR.Z.locals;const PR="vis-block",LR='<title text="VIS"></title>\r\n<div class="container">\r\n    <div class="vis grid" repeat.for="vis of model.vis">\r\n        <text-field class="name" value.two-way="vis.name"></text-field>\r\n        <stat-box class="lab-vis" mode="secondary" value.two-way="vis.amountInLab" min="0" size="s" title="In lab"></stat-box>\r\n        <stat-box class="personal-vis" mode="secondary" value.two-way="vis.amountOnPerson" min="0" size="s" title="On person"></stat-box>\r\n        <text-field class="income" value.two-way="vis.income" placeholder="Income" title="${vis.income}"></text-field>\r\n        <text-field class="notes" value.two-way="vis.notes" placeholder="Notes" title="${vis.notes}"></text-field>\r\n    </div>\r\n    <add-item-input placeholder="Add vis type" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',MR=LR,UR=[];let BR;function NR(t){BR||(BR=Wh.define({name:PR,template:LR,dependencies:UR})),t.register(BR)}let jR=class extends xC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.belongings}),(t=>t.vis),((t,e)=>t.vis=e),_A),this.itemAdded=t=>{this.model||(this.model={carried:"",inSanctum:"",vis:[]}),this.model.vis||(this.model.vis=[]),this.model.vis.push({name:t,amountInLab:0,amountOnPerson:0,income:"",notes:""}),this.model.vis.sort(((t,e)=>t.name.localeCompare(e.name)))}}};jR=ZS([Lh(ht),qS("design:paramtypes",[])],jR);const FR="belongings",VR='\r\n\r\n\r\n\r\n<carried-belongings-block></carried-belongings-block>\r\n<sanctum-belongings-block></sanctum-belongings-block>\r\n<vis-block></vis-block>\r\n\r\n<div style="clear: both;"></div>',DR=VR,ZR=[at,ct,ut];let zR;function qR(t){zR||(zR=Wh.define({name:FR,template:VR,dependencies:ZR})),t.register(zR)}let HR=class{};HR=ZS([Lh(dt)],HR);var KR=n(6617),WR={};WR.styleTagTransform=nA(),WR.setAttributes=YS(),WR.insert=GS().bind(null,"head"),WR.domAPI=QS(),WR.insertStyleElement=tA(),KS()(KR.Z,WR),KR.Z&&KR.Z.locals&&KR.Z.locals;var QR=n(3349),_R={};_R.styleTagTransform=nA(),_R.setAttributes=YS(),_R.insert=GS().bind(null,"head"),_R.domAPI=QS(),_R.insertStyleElement=tA(),KS()(QR.Z,_R),QR.Z&&QR.Z.locals&&QR.Z.locals;const GR="notes-block",XR='<text-box title="NOTES" text.two-way="model"></text-box>',YR=XR,JR=[];let tO;function eO(t){tO||(tO=Wh.define({name:GR,template:XR,dependencies:JR})),t.register(tO)}let nO=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.notes}),VA)}};nO=ZS([Lh(ft),qS("design:paramtypes",[])],nO);var iO=n(7600),sO={};sO.styleTagTransform=nA(),sO.setAttributes=YS(),sO.insert=GS().bind(null,"head"),sO.domAPI=QS(),sO.insertStyleElement=tA(),KS()(iO.Z,sO),iO.Z&&iO.Z.locals&&iO.Z.locals;const rO="quest-list",oO='<title text="QUESTS"></title>\r\n<div class="container">\r\n    <div class="quests">\r\n        <div class="quest grid" repeat.for="quest of model">\r\n            <checkbox mode="angled" size="xs" value.two-way="quest.focused" title="Focused"></checkbox>\r\n            <stat-box class="priority" mode="secondary" value.two-way="quest.priority" min="1" size="xs" title="Priority"></stat-box>\r\n            <text-field class="name" value.two-way="quest.name" placeholder="Name" title="${quest.name}"></text-field>\r\n            <stat-info-button source.bind="quest" property="additionalInfo"></stat-info-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add quest" on-item-added.bind="questAdded">\r\n</div>\r\n<footer></footer>',aO=oO,lO=[];let cO;function hO(t){cO||(cO=Wh.define({name:rO,template:oO,dependencies:lO})),t.register(cO)}let uO=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.quests}),YA),this.questAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,focused:!1,priority:0,additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name))).sort(((t,e)=>t.priority-e.priority))}}};uO=ZS([Lh(vt),qS("design:paramtypes",[])],uO);var dO=n(280),pO={};pO.styleTagTransform=nA(),pO.setAttributes=YS(),pO.insert=GS().bind(null,"head"),pO.domAPI=QS(),pO.insertStyleElement=tA(),KS()(dO.Z,pO),dO.Z&&dO.Z.locals&&dO.Z.locals;const fO="npc-list",gO='<title text="Persons of Interest"></title>\r\n<div class="container">\r\n    <div class="npcs">\r\n        <div class="npc grid" repeat.for="npc of model">\r\n            <text-field class="name" value.two-way="npc.name" placeholder="Name" title="${npc.name}"></text-field>\r\n            <text-field class="description" value.two-way="npc.description" placeholder="Description" title="${npc.description}"></text-field>\r\n            <stat-info-button source.bind="npc" property="additionalInfo"></stat-info-button>\r\n        </div>\r\n    </div>\r\n    <add-item-input placeholder="Add person" on-item-added.bind="npcAdded">\r\n</div>\r\n<footer></footer>',vO=gO,mO=[];let bO;function wO(t){bO||(bO=Wh.define({name:fO,template:gO,dependencies:mO})),t.register(bO)}let yO=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.npcs}),JA),this.npcAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",additionalInfo:""}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))}}};yO=ZS([Lh(bt),qS("design:paramtypes",[])],yO);const xO="notes",kO='\r\n\r\n\r\n\r\n<notes-block></notes-block>\r\n<quest-list></quest-list>\r\n<npc-list></npc-list>\r\n\r\n<div style="clear: both;"></div>',SO=kO,AO=[gt,mt,wt];let CO;function EO(t){CO||(CO=Wh.define({name:xO,template:kO,dependencies:AO})),t.register(CO)}let TO=class{};TO=ZS([Lh(yt)],TO);var $O=n(8467),IO={};IO.styleTagTransform=nA(),IO.setAttributes=YS(),IO.insert=GS().bind(null,"head"),IO.domAPI=QS(),IO.insertStyleElement=tA(),KS()($O.Z,IO),$O.Z&&$O.Z.locals&&$O.Z.locals;var RO=n(8840),OO={};OO.styleTagTransform=nA(),OO.setAttributes=YS(),OO.insert=GS().bind(null,"head"),OO.domAPI=QS(),OO.insertStyleElement=tA(),KS()(RO.Z,OO),RO.Z&&RO.Z.locals&&RO.Z.locals;const PO="xp-list",LO='<title text="XP ENTRIES"></title>\r\n<div class="container">\r\n    <div class="xp-entry grid" repeat.for="entry of planningEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n        <text-field class="plans" value.two-way="entry.plans" placeholder="Plans"></text-field>\r\n    </div>\r\n\r\n    <div class="separator"></div>\r\n    <div class="center-button-box">\r\n        <cross-button click.delegate="deletePreviousEntries()" title="Delete previous entries" mode="angled"></cross-button>\r\n    </div>\r\n\r\n    <div class="past-xp-entry grid" repeat.for="entry of pastEntries">\r\n        <span class="year text"><span if.bind="entry.season == \'Spring\'">${entry.year}</span></span>\r\n        <span class="season text">${entry.season}</span>\r\n        <text-field class="description" value.two-way="entry.description" placeholder="Description"></text-field>\r\n        <text-field class="xp" value.two-way="entry.xp" placeholder="XP"></text-field>\r\n        <text-field class="correspondence" value.two-way="entry.correspondence" placeholder="Correspondence"></text-field>\r\n        <text-field class="area-lore" value.two-way="entry.areaLore" placeholder="Area Lore"></text-field>\r\n    </div>\r\n</div>\r\n<footer></footer>',MO=LO,UO=[];let BO;function NO(t){BO||(BO=Wh.define({name:PO,template:LO,dependencies:UO})),t.register(BO)}let jO=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.xpEntries}),FA),this.deletePreviousEntries=()=>{let t=this.state.present.character.ageing.currentYear;this.model=this.model.filter((e=>e.year>=t))}}get planningEntries(){return this.model?this.model.filter((t=>t.planningMode)):[]}get pastEntries(){return this.model?this.model.filter((t=>!t.planningMode)):[]}};jO=ZS([Lh(kt),qS("design:paramtypes",[])],jO);var FO=n(2012),VO={};VO.styleTagTransform=nA(),VO.setAttributes=YS(),VO.insert=GS().bind(null,"head"),VO.domAPI=QS(),VO.insertStyleElement=tA(),KS()(FO.Z,VO),FO.Z&&FO.Z.locals&&FO.Z.locals;const DO="age-block",ZO='<div class="container grid">\r\n    <stat-box class="small-text" mode="secondary-angled" size="m" value.two-way="model.birthYear" min="0" max="2000" title="Birth Year"></stat-box>\r\n    <div>\r\n        <stat-box mode="secondary" size="s" value.two-way="model.age" readonly.bind="true" min="0" title="Age"></stat-box>\r\n        <stat-box mode="secondary" size="s" value.two-way="model.apparentAge" min="0" title="Apparent Age"></stat-box>\r\n    </div>\r\n    <stat-box class="small-text" mode="secondary-angled" size="m" value.two-way="model.currentYear" min="0" max="2000" title="Current Year"></stat-box>\r\n\r\n    <stat-box mode="secondary" size="s" value.two-way="model.livingConditionModifier" prefix-plus.bind="true" title="Living condition modifier"></stat-box>\r\n    <stat-box mode="primary" value.two-way="model.ageingRollModifier" prefix-plus.bind="true" title="Ageing roll bonus" readonly.bind="true"></stat-box>\r\n    <stat-box mode="secondary" size="s" value.two-way="model.longevityModifier" min="0" prefix-plus.bind="true" title="Longevity ritual modifier"></stat-box>\r\n\r\n    <checkbox class="left" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 1" title="Decrepitude level 1"></checkbox>\r\n    <stat-box mode="primary" value.two-way="model.decrepitudePoints" min="0" title="Decrepitude points"></stat-box>\r\n    <checkbox class="right" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 5" title="Decrepitude level 5"></checkbox>\r\n\r\n    <checkbox class="right top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 2" title="Decrepitude level 2"></checkbox>\r\n    <checkbox class="bottom" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 3" title="Decrepitude level 3"></checkbox>\r\n    <checkbox class="left top" mode="angled" readonly.bind="true" value.bind="model.decrepitudeLevel >= 4" title="Decrepitude level 4"></checkbox>\r\n</div>',zO=ZO,qO=[];let HO;function KO(t){HO||(HO=Wh.define({name:DO,template:ZO,dependencies:qO})),t.register(HO)}let WO=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.ageing}),UA)}};WO=ZS([Lh(At),qS("design:paramtypes",[])],WO);var QO=n(2410),_O={};_O.styleTagTransform=nA(),_O.setAttributes=YS(),_O.insert=GS().bind(null,"head"),_O.domAPI=QS(),_O.insertStyleElement=tA(),KS()(QO.Z,_O),QO.Z&&QO.Z.locals&&QO.Z.locals;const GO="warping-block",XO='<title text="WARPING"></title>\r\n<div class="container">\r\n    <div class="warping-level">\r\n        <stat-box header="WPs" mode="secondary" value.two-way="model.warpingPoints" min="0" max="999" size="s" title="Warping Points"></stat-box>\r\n        <stat-box header="Level" mode="secondary" readonly.bind="true" value.two-way="model.warpingLevel" min="0" size="m" title="Warping Level"></stat-box>\r\n    </div>\r\n    <div class="warping-effect grid" repeat.for="effect of model.ongoingEffects">\r\n        <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n        <stat-box mode="secondary" value.two-way="effect.warpingPointsPerYear" min="1" size="s" title="Warping Points Per Year"></stat-box>\r\n        <span class="text">/yr</span>\r\n    </div>\r\n    <add-item-input placeholder="Add ongoing effect" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',YO=XO,JO=[];let tP;function eP(t){tP||(tP=Wh.define({name:GO,template:XO,dependencies:JO})),t.register(tP)}let nP=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.warping}),NA),this.itemAdded=t=>{this.model.ongoingEffects.push({name:t,warpingPointsPerYear:1}),this.model.ongoingEffects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};nP=ZS([Lh(Et),qS("design:paramtypes",[])],nP);const iP="progression",sP='\r\n\r\n\r\n\r\n<age-block></age-block>\r\n<warping-block></warping-block>\r\n<xp-list></xp-list>\r\n\r\n<div style="clear: both;"></div>',rP=sP,oP=[St,Ct,Tt];let aP;function lP(t){aP||(aP=Wh.define({name:iP,template:sP,dependencies:oP})),t.register(aP)}let cP=class{};cP=ZS([Lh($t)],cP);var hP=n(9294),uP={};uP.styleTagTransform=nA(),uP.setAttributes=YS(),uP.insert=GS().bind(null,"head"),uP.domAPI=QS(),uP.insertStyleElement=tA(),KS()(hP.Z,uP),hP.Z&&hP.Z.locals&&hP.Z.locals;var dP=n(6019),pP={};pP.styleTagTransform=nA(),pP.setAttributes=YS(),pP.insert=GS().bind(null,"head"),pP.domAPI=QS(),pP.insertStyleElement=tA(),KS()(dP.Z,pP),dP.Z&&dP.Z.locals&&dP.Z.locals;const fP="talisman-block",gP='<title text="TALISMAN"></title>\r\n<div class="container">\r\n    <stat-box class="invested-vis" mode="primary" value.two-way="model.investedVis" min="0" size="m" title="Invested vis"></stat-box>\r\n    <stat-box class="spent-vis" mode="secondary" value.two-way="model.spentVis" min="0" max.bind="model.investedVis" size="s" title="Spent vis"></stat-box>\r\n    <text-field class="description" value.two-way="model.description" placeholder="Description" title="${model.description}"></text-field>\r\n\r\n    <div class="bonuses">\r\n        <span class="title text">Bonuses</span>\r\n        <div class="bonus grid" repeat.for="bonus of model.bonuses">\r\n            <checkbox mode="angled" size="xs" value.two-way="bonus.instilled" title="Instilled"></checkbox>\r\n            <text-field class="name" value.two-way="bonus.name" placeholder="Name" title="${bonus.name}"></text-field>\r\n            <stat-box class="bonus-modifier" mode="secondary" value.two-way="bonus.bonus" min="1" size="s" title="Bonus" prefix-plus.bind="true"></stat-box>\r\n            <text-field class="source" value.two-way="bonus.source" placeholder="Source"></text-field>\r\n            <text-field class="notes" value.two-way="bonus.notes" placeholder="Notes" title="${bonus.notes}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="bonusAdded" placeholder="Add bonus"></add-item-input>\r\n    </div>\r\n\r\n    <div class="effects">\r\n        <span class="title text">Effects</span>\r\n        <div class="effect grid" repeat.for="effect of model.effects">\r\n            <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n            <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n            <stat-box class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></stat-box>\r\n            <stat-box class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></stat-box>\r\n            <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n            <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n            <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n            <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n            <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n        </div>\r\n        <add-item-input on-item-added.bind="effectAdded" placeholder="Add effect"></add-item-input>\r\n    </div>\r\n</div>\r\n<footer></footer>',vP=gP,mP=[];let bP;function wP(t){bP||(bP=Wh.define({name:fP,template:gP,dependencies:mP})),t.register(bP)}let yP=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.talisman}),GA),this.bonusAdded=t=>{this.model.bonuses.push({name:t,bonus:1,instilled:!1,source:"",notes:""}),this.model.bonuses.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=t=>{this.model.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),this.model.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};yP=ZS([Lh(Rt),qS("design:paramtypes",[])],yP);var xP=n(4769),kP={};kP.styleTagTransform=nA(),kP.setAttributes=YS(),kP.insert=GS().bind(null,"head"),kP.domAPI=QS(),kP.insertStyleElement=tA(),KS()(xP.Z,kP),xP.Z&&xP.Z.locals&&xP.Z.locals;const SP="magic-items-block",AP='<title text="MAGIC ITEMS"></title>\r\n<div class="container">\r\n    <div class="magic-item grid" repeat.for="magicItem of model">\r\n        <text-field class="name" value.two-way="magicItem.name" placeholder="Name"></text-field>\r\n        <stat-box class="invested-vis" mode="primary" value.two-way="magicItem.investedVis" min="0" size="m" title="Invested vis"></stat-box>\r\n        <stat-box class="spent-vis" mode="secondary" value.two-way="magicItem.spentVis" min="0" max.bind="magicItem.investedVis" size="s" title="Spent vis"></stat-box>\r\n        <text-field class="description" value.two-way="magicItem.description" placeholder="Description" title="${magicItem.description}"></text-field>\r\n        <span></span>\r\n\r\n        <div class="effects">\r\n            <span class="title text">Effects</span>\r\n            <div class="effect grid" repeat.for="effect of magicItem.effects">\r\n                <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n                <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n                <stat-box class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></stat-box>\r\n                <stat-box class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></stat-box>\r\n                <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n                <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n                <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n                <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n                <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n            </div>\r\n            <add-item-input on-item-added.bind="effectAdded" parent.bind="magicItem" placeholder="Add effect"></add-item-input>\r\n        </div>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add items"></add-item-input>\r\n</div>\r\n<footer></footer>',CP=AP,EP=[];let TP;function $P(t){TP||(TP=Wh.define({name:SP,template:AP,dependencies:EP})),t.register(TP)}let IP=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.magicItems}),XA),this.itemAdded=t=>{this.model||(this.model=[]),this.model.push({name:t,description:"",investedVis:0,spentVis:0,effects:[]}),this.model.sort(((t,e)=>t.name.localeCompare(e.name)))},this.effectAdded=(t,e)=>{e.effects.push({name:t,arts:"",description:"",duration:"",level:1,penetration:0,range:"",target:"",usages:""}),e.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};IP=ZS([Lh(Pt),qS("design:paramtypes",[])],IP);var RP=n(912),OP={};OP.styleTagTransform=nA(),OP.setAttributes=YS(),OP.insert=GS().bind(null,"head"),OP.domAPI=QS(),OP.insertStyleElement=tA(),KS()(RP.Z,OP),RP.Z&&RP.Z.locals&&RP.Z.locals;const PP="familiar-block",LP='<title text="FAMILIAR"></title>\r\n<div class="container text">\r\n    <div class="grid">\r\n        <text-field class="name" value.two-way="model.name" placeholder="Name"></text-field>\r\n        <text-field class="arts" value.two-way="model.arts" placeholder="Arts"></text-field>\r\n        <checkbox value.two-way="model.isSpirit" title="Is spirit"></checkbox>\r\n        <stat-info-button source.bind="model" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <text-field class="description" value.two-way="model.description" placeholder="Description"></text-field>\r\n    <div class="block">\r\n        <stat-box header="Bronze" value.two-way="model.bronzeBondLevel" min="0" size="m"></stat-box>\r\n        <stat-box header="Silver" value.two-way="model.silverBondLevel" min="0" size="m"></stat-box>\r\n        <stat-box header="Gold" value.two-way="model.goldBondLevel" min="0" size="m"></stat-box>\r\n    </div>\r\n\r\n    <label class="text title">Powers</label>\r\n    <div class="effect grid" repeat.for="effect of model.effects">\r\n        <text-field class="name" value.two-way="effect.name" placeholder="Name"></text-field>\r\n        <text-field class="arts" value.two-way="effect.arts" placeholder="Arts"></text-field>\r\n        <stat-box class="level" mode="secondary" value.two-way="effect.level" min="1" size="m" title="Level"></stat-box>\r\n        <stat-box class="penetration" mode="secondary" value.two-way="effect.penetration" min="0" size="s" title="Penetration"></stat-box>\r\n        <text-field class="usages" value.two-way="effect.usages" placeholder="Usages"></text-field>\r\n        <text-field class="range" value.two-way="effect.range" placeholder="Range"></text-field>\r\n        <text-field class="duration" value.two-way="effect.duration" placeholder="Duration"></text-field>\r\n        <text-field class="target" value.two-way="effect.target" placeholder="Target"></text-field>\r\n        <text-field class="description" value.two-way="effect.description" placeholder="Description" title="${effect.description}"></text-field>\r\n    </div>\r\n    <add-item-input on-item-added.bind="itemAdded" placeholder="Add power"></add-item-input>\r\n</div>\r\n<footer></footer>',MP=LP,UP=[];let BP;function NP(t){BP||(BP=Wh.define({name:PP,template:LP,dependencies:UP})),t.register(BP)}let jP=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.familiar}),tC),this.itemAdded=t=>{this.model.effects.push({name:t,arts:"",description:"",duration:"",level:0,penetration:0,range:"",target:"",usages:""}),this.model.effects.sort(((t,e)=>t.name.localeCompare(e.name)))}}};jP=ZS([Lh(Mt),qS("design:paramtypes",[])],jP);const FP="enchantments",VP='\r\n\r\n\r\n\r\n<div style="overflow-y: auto; max-height: 1000px;">\r\n    <talisman-block></talisman-block>\r\n    <magic-items-block></magic-items-block>\r\n    <familiar-block></familiar-block>\r\n\r\n    <div style="clear: both;"></div>\r\n</div>',DP=VP,ZP=[Ot,Lt,Ut];let zP;function qP(t){zP||(zP=Wh.define({name:FP,template:VP,dependencies:ZP})),t.register(zP)}let HP=class{};HP=ZS([Lh(Bt)],HP);var KP=n(2988),WP={};WP.styleTagTransform=nA(),WP.setAttributes=YS(),WP.insert=GS().bind(null,"head"),WP.domAPI=QS(),WP.insertStyleElement=tA(),KS()(KP.Z,WP),KP.Z&&KP.Z.locals&&KP.Z.locals;var QP=n(6767),_P={};_P.styleTagTransform=nA(),_P.setAttributes=YS(),_P.insert=GS().bind(null,"head"),_P.domAPI=QS(),_P.insertStyleElement=tA(),KS()(QP.Z,_P),QP.Z&&QP.Z.locals&&QP.Z.locals;const GP="character-type-selector",XP='<div class="container">\r\n    <span>Magus</span> <radio-button group="character-type" state="${model == \'magus\' ? \'selected\' : \'unselected\'}" value="magus"></radio-button>\r\n    <span>Companion</span> <radio-button group="character-type" state="${model == \'companion\' ? \'selected\' : \'unselected\'}" value="companion"></radio-button>\r\n</div>',YP=XP,JP=[];let tL;function eL(t){tL||(tL=Wh.define({name:GP,template:XP,dependencies:JP})),t.register(tL)}let nL=class extends yC{constructor(){super((t=>{var e;return null===(e=t.character)||void 0===e?void 0:e.type}),qA)}bound(){super.bound(),this.ea.subscribe("radio-button-selected",(t=>{"character-type"==t.group&&(this.model=t.value)}))}};nL=ZS([Lh(jt),qS("design:paramtypes",[])],nL);const iL="settings",sL="\r\n\r\n<character-type-selector></character-type-selector>\r\n",rL=sL,oL=[Ft];let aL;function lL(t){aL||(aL=Wh.define({name:iL,template:sL,dependencies:oL})),t.register(aL)}let cL=class{};cL=ZS([Lh(Vt)],cL);const hL="my-app",uL='\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<page-header></page-header>\r\n<div class="main-paper">\r\n    <div class="page-view">\r\n        <au-viewport name="main" default="description"></au-viewport>\r\n    </div>\r\n</div>\r\n<div class="buttons">\r\n    <button click.delegate="undo()" disabled.bind="state.past.length == 0">Undo</button>\r\n    <button click.delegate="redo()" disabled.bind="state.future.length == 0">Redo</button>\r\n    <button click.delegate="save()">Save As</button>\r\n    <button click.delegate="load()">Load</button>\r\n    <button click.delegate="newCharacter()">Create New Character</button>\r\n    \r\n    <input type=\'file\' accept=\'.json\' files.bind="selectedFiles" ref="fileInput" style="display: none;"><br>\r\n</div>\r\n<div class="error-indicator" if.bind="hasError">\r\n</div>',dL=uL,pL=[w,U,Q,rt,pt,xt,It,Nt,Dt];let fL;function gL(t){fL||(fL=Wh.define({name:hL,template:uL,dependencies:pL})),t.register(fL)}let vL=class{constructor(t){this.store=t,this.middlewareRegistered=!1,this.isStandalone=window.matchMedia("(display-mode: standalone)").matches,this.hasError=!1,this.undo=()=>{this.store.dispatch(am,-1)},this.redo=()=>{this.store.dispatch(am,1)},this.save=async()=>{if(this.isStandalone){const t={suggestedName:"character sheet.ars",types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};this.fileHandle=await window.showSaveFilePicker(t),await this.saveFile(this.state),this.middlewareRegistered||(this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),dm.After),this.isInitialized=!0)}else!function(t,e){const n=document.createElement("a"),i=e.split(".").pop();n.href=URL.createObjectURL(new Blob([t],{type:`text/${"txt"===i?"plain":i}`})),n.download=e,n.click(),n.remove()}(JSON.stringify(this.state.present,null,4),"character sheet.ars")},this.load=async()=>{if(this.isStandalone){const t={types:[{description:"ARS character sheet",accept:{"text/json":[".ars"]}}]};let[e]=await window.showOpenFilePicker(t);this.fileHandle=e,this.isInitialized=!1,this.middlewareRegistered||this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),dm.After),this.store.dispatch(wA,await this.fileHandle.getFile())}else this.fileInput.click(),this.fileInput.onchange=this.fileInputChanged},this.newCharacter=async()=>{this.isStandalone&&(this.fileHandle=null),await this.store.dispatch(bA),this.isStandalone&&await this.save()},this.fileInputChanged=()=>{this.theFile.text().then((t=>this.store.dispatch(ZA,t)))},this.isInitialized=!1,this.fileStorageMiddlewareFactory=()=>(this.middlewareRegistered=!0,(t,e,n)=>{this.isInitialized?(console.log("Saving file to disk"),this.saveFile(t).catch((t=>{console.error("Error saving file",t)}))):this.isInitialized=!0}),this.saveFile=async t=>{if(this.fileHandle){var e=await this.fileHandle.createWritable();await e.write(JSON.stringify(t.present,null,4)),await e.close()}else console.log("Could not save - file handle not set")},this.store.registerAction("createNewCharacter",bA),this.store.registerAction("loadCharacter",yA),this.store.registerAction("loadCharacterFromFile",wA),this.store.registerAction("importCharacter",ZA),this.store.registerAction("updateCharacteristics",xA),this.store.registerAction("updateAbilities",kA),this.store.registerAction("updateVirtues",AA),this.store.registerAction("updateFlaws",CA),this.store.registerAction("updateDescription",EA),this.store.registerAction("updateName",TA),this.store.registerAction("updateSmallAvatar",$A),this.store.registerAction("updateFullAvatar",IA),this.store.registerAction("updateFatigue",RA),this.store.registerAction("updateWounds",OA),this.store.registerAction("updateArts",PA),this.store.registerAction("updateSpells",LA),this.store.registerAction("updateSpellWishlist",MA),this.store.registerAction("updatePersonalityTraits",SA),this.store.registerAction("updateAgeing",UA),this.store.registerAction("updateConfidence",BA),this.store.registerAction("updateWarping",NA),this.store.registerAction("updateActiveMagic",jA),this.store.registerAction("updateXpEntries",FA),this.store.registerAction("updateNotes",VA),this.store.registerAction("updateLab",DA),this.store.registerAction("updateSpellcastingStats",zA),this.store.registerAction("updateCharacterType",qA),this.store.registerAction("updateBackground",HA),this.store.registerAction("updateSigil",KA),this.store.registerAction("updateCarriedBelongings",WA),this.store.registerAction("updateSanctumBelongings",QA),this.store.registerAction("updateVis",_A),this.store.registerAction("updateTalisman",GA),this.store.registerAction("updateMagicItems",XA),this.store.registerAction("updateQuests",YA),this.store.registerAction("updateNpcs",JA),this.store.registerAction("updateFamiliar",tC),this.isStandalone?this.registerFileLaunchHandler():(this.store.registerAction("rehydrateFromLocalStorage",vm),t.registerMiddleware(gm,dm.After,{key:"character-sheets"}),t.dispatch(vm,"character-sheets")),window.onerror=(t,e,n)=>(this.hasError=!0,!1)}stateChanged(t,e){var n,i,s;mA.name=null!==(s=null===(i=null===(n=t.present)||void 0===n?void 0:n.character)||void 0===i?void 0:i.description.name)&&void 0!==s?s:""}registerFileLaunchHandler(){let t=window.launchQueue;t&&t.setConsumer((async t=>{const[e]=t.files;if(e){this.fileHandle=e;const t=await e.getFile();t&&(this.store.dispatch(wA,t),this.store.registerMiddleware(this.fileStorageMiddlewareFactory(),dm.After))}}))}get theFile(){return this.selectedFiles&&this.selectedFiles.length>0?this.selectedFiles[0]:null}};vL=ZS([Lh(Zt),Cm(),qS("design:paramtypes",[Sm])],vL);var mL=n(288),bL={};bL.styleTagTransform=nA(),bL.setAttributes=YS(),bL.insert=GS().bind(null,"head"),bL.domAPI=QS(),bL.insertStyleElement=tA(),KS()(mL.Z,bL),mL.Z&&mL.Z.locals&&mL.Z.locals;const wL="checkbox",yL="<div class=\"container ${value ? 'checked' : 'unchecked'} ${readonly ? 'readonly' : ''} ${colorMode} ${size} ${mode}\" pointerup.delegate=\"toggle()\">\r\n</div>",xL=yL,kL=[];let SL;function AL(t){SL||(SL=Wh.define({name:wL,template:yL,dependencies:kL})),t.register(SL)}class CL{constructor(){this.colorMode="color"}}ZS([_l,qS("design:type",String)],CL.prototype,"colorMode",void 0);let EL=class extends CL{constructor(){super(...arguments),this.value=!1,this.size="m",this.mode="regular",this.readonly=!1,this.toggle=()=>{this.readonly||(this.value=!this.value)}}};ZS([_l,qS("design:type",Boolean)],EL.prototype,"value",void 0),ZS([_l,qS("design:type",String)],EL.prototype,"size",void 0),ZS([_l,qS("design:type",String)],EL.prototype,"mode",void 0),ZS([_l,qS("design:type",Boolean)],EL.prototype,"readonly",void 0),EL=ZS([Lh(zt)],EL);var TL=n(2001),$L={};$L.styleTagTransform=nA(),$L.setAttributes=YS(),$L.insert=GS().bind(null,"head"),$L.domAPI=QS(),$L.insertStyleElement=tA(),KS()(TL.Z,$L),TL.Z&&TL.Z.locals&&TL.Z.locals;const IL="list",RL='<title text.bind="title"></title>\r\n<div class="container">\r\n    <div repeat.for="item of items">\r\n        <text-field class="list-entry" value.two-way="item.name" title="${item.name}"></text-field>\r\n        <stat-info-button if.bind="hasAdditionalInfo && item.name" source.bind="item" property="additionalInfo"></stat-info-button>\r\n    </div>\r\n    <add-item-input if.bind="canAddItems" placeholder="Add item" on-item-added.bind="itemAdded"></add-item-input>\r\n</div>\r\n<footer></footer>',OL=RL,PL=[];let LL;function ML(t){LL||(LL=Wh.define({name:IL,template:RL,dependencies:PL})),t.register(LL)}let UL=class{constructor(){this.items=[],this.hasAdditionalInfo=!1,this.canAddItems=!0,this.itemAdded=t=>{this.items.push({name:t,additionalInfo:""}),this.items.sort(((t,e)=>t.name.localeCompare(e.name)))}}};ZS([_l,qS("design:type",String)],UL.prototype,"title",void 0),ZS([_l,qS("design:type",Array)],UL.prototype,"items",void 0),ZS([_l,qS("design:type",Boolean)],UL.prototype,"hasAdditionalInfo",void 0),ZS([_l,qS("design:type",Boolean)],UL.prototype,"canAddItems",void 0),UL=ZS([Lh(qt)],UL);var BL=n(1365),NL={};NL.styleTagTransform=nA(),NL.setAttributes=YS(),NL.insert=GS().bind(null,"head"),NL.domAPI=QS(),NL.insertStyleElement=tA(),KS()(BL.Z,NL),BL.Z&&BL.Z.locals&&BL.Z.locals;const jL="stat-box",FL='<span if.bind="showHeader && header" class="header ${mode} ${size}">${header}</span>\r\n<div class="container ${active === true ? \'active\' : \'\'} ${readonly ? \'readonly\' : \'\'} ${fadeZero && value == 0 ? \'fade\' : \'\'} ${mode} ${colorMode} ${size}"\r\n     pointerdown.delegate="press()"\r\n     ref="containerElement">\r\n    <span class="content numbers">${getValuePrefix()+value}</div>\r\n</div>\r\n<div class="overlay" if.bind="active"  pointerup.delegate="release()" pointermove.delegate="move($event)"></div>',VL=FL,DL=[];let ZL;function zL(t){ZL||(ZL=Wh.define({name:jL,template:FL,dependencies:DL})),t.register(ZL)}let qL=class extends CL{constructor(t){super(),this.ea=t,this.max=99,this.min=-99,this.mode="primary-angled",this.size="m",this.prefixPlus=!1,this.readonly=!1,this.header="",this.showHeader=!0,this.fadeZero=!1,this.active=!1,this.delta=0,this.press=()=>{this.readonly||(this.active=!0,this.originalValue=this.value,this.delta=0,window.addEventListener("pointerout",this.checkPointerOutsideWindow))},this.checkPointerOutsideWindow=t=>{(t.clientY<=0||t.clientX<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(window.removeEventListener("pointerout",this.checkPointerOutsideWindow),this.release())},this.release=()=>{this.readonly||(this.active=!1)},this.move=t=>{if(!this.active||this.readonly)return;this.delta+=t.movementY;let e=Math.round(this.originalValue-this.delta/10);this.value=Math.max(this.min,Math.min(this.max,e)),this.ea.publish("ui-interaction")},this.getValuePrefix=()=>this.prefixPlus&&this.value>0?"+":""}};ZS([_l,qS("design:type",Number)],qL.prototype,"value",void 0),ZS([_l,qS("design:type",Number)],qL.prototype,"max",void 0),ZS([_l,qS("design:type",Number)],qL.prototype,"min",void 0),ZS([_l,qS("design:type",String)],qL.prototype,"mode",void 0),ZS([_l,qS("design:type",String)],qL.prototype,"size",void 0),ZS([_l,qS("design:type",Boolean)],qL.prototype,"prefixPlus",void 0),ZS([_l,qS("design:type",Boolean)],qL.prototype,"readonly",void 0),ZS([_l,qS("design:type",String)],qL.prototype,"header",void 0),ZS([_l,qS("design:type",Boolean)],qL.prototype,"showHeader",void 0),ZS([_l,qS("design:type",Boolean)],qL.prototype,"fadeZero",void 0),qL=ZS([Lh(Ht),zS(0,Ri),qS("design:paramtypes",[Object])],qL);var HL=n(9909),KL={};KL.styleTagTransform=nA(),KL.setAttributes=YS(),KL.insert=GS().bind(null,"head"),KL.domAPI=QS(),KL.insertStyleElement=tA(),KS()(HL.Z,KL),HL.Z&&HL.Z.locals&&HL.Z.locals;const WL="radio-button",QL='<div class="container ${state} ${colorMode}"\r\n     pointerup.delegate="select()"\r\n     ref="element">\r\n</div>',_L=QL,GL=[];let XL;function YL(t){XL||(XL=Wh.define({name:WL,template:QL,dependencies:GL})),t.register(XL)}let JL=class extends CL{constructor(t){super(),this.ea=t,this.state="unselected",this.select=()=>{this.group?this.ea.publish("radio-button-selected",{group:this.group,source:this.element,value:this.value}):this.state="selected"}}bound(){this.ea.subscribe("radio-button-selected",(t=>{this.group==t.group&&(this.state=t.source===this.element?"selected":"unselected")}))}};ZS([_l,qS("design:type",String)],JL.prototype,"state",void 0),ZS([_l,qS("design:type",String)],JL.prototype,"group",void 0),ZS([_l,qS("design:type",String)],JL.prototype,"value",void 0),JL=ZS([Lh(Kt),zS(0,Ri),qS("design:paramtypes",[Object])],JL);var tM=n(835),eM={};eM.styleTagTransform=nA(),eM.setAttributes=YS(),eM.insert=GS().bind(null,"head"),eM.domAPI=QS(),eM.insertStyleElement=tA(),KS()(tM.Z,eM),tM.Z&&tM.Z.locals&&tM.Z.locals;const nM="text-box",iM='<title text.bind="title" if.bind="showBorders"></title>\r\n<div class="container">\r\n    <textarea value.bind="text" cols="32" rows="8" keydown.delegate="onChange()" autocomplete="chrome-off"></textarea>\r\n</div>\r\n<footer if.bind="showBorders"></footer>',sM=iM,rM=[];let oM;function aM(t){oM||(oM=Wh.define({name:nM,template:iM,dependencies:rM})),t.register(oM)}let lM=class{constructor(t){this.ea=t,this.showBorders=!0,this.onChange=()=>{this.ea.publish("ui-interaction")}}};ZS([_l,qS("design:type",String)],lM.prototype,"title",void 0),ZS([_l,qS("design:type",String)],lM.prototype,"text",void 0),ZS([_l,qS("design:type",Boolean)],lM.prototype,"showBorders",void 0),lM=ZS([Lh(Wt),zS(0,Ri),qS("design:paramtypes",[Object])],lM);var cM=n(6140),hM={};hM.styleTagTransform=nA(),hM.setAttributes=YS(),hM.insert=GS().bind(null,"head"),hM.domAPI=QS(),hM.insertStyleElement=tA(),KS()(cM.Z,hM),cM.Z&&cM.Z.locals&&cM.Z.locals;const uM="footer",dM='<div class="grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',pM=dM,fM=[];let gM;function vM(t){gM||(gM=Wh.define({name:uM,template:dM,dependencies:fM})),t.register(gM)}let mM=class{};mM=ZS([Lh(Qt)],mM);var bM=n(1939),wM={};wM.styleTagTransform=nA(),wM.setAttributes=YS(),wM.insert=GS().bind(null,"head"),wM.domAPI=QS(),wM.insertStyleElement=tA(),KS()(bM.Z,wM),bM.Z&&bM.Z.locals&&bM.Z.locals;const yM="title",xM='<div class="title grid">\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n    <span class="text">${text}</span>\r\n    <div class="line-start"></div>\r\n    <div class="line"></div>\r\n    <div class="line-end"></div>\r\n</div>',kM=xM,SM=[];let AM;function CM(t){AM||(AM=Wh.define({name:yM,template:xM,dependencies:SM})),t.register(AM)}let EM=class{};ZS([_l,qS("design:type",String)],EM.prototype,"text",void 0),EM=ZS([Lh(_t)],EM);var TM=n(1525),$M={};$M.styleTagTransform=nA(),$M.setAttributes=YS(),$M.insert=GS().bind(null,"head"),$M.domAPI=QS(),$M.insertStyleElement=tA(),KS()(TM.Z,$M),TM.Z&&TM.Z.locals&&TM.Z.locals;const IM="rune-edge",RM='<div class="container">\r\n</div>',OM=RM,PM=[];let LM;function MM(t){LM||(LM=Wh.define({name:IM,template:RM,dependencies:PM})),t.register(LM)}let UM=class{};UM=ZS([Lh(Gt)],UM);var BM=n(6392),NM={};NM.styleTagTransform=nA(),NM.setAttributes=YS(),NM.insert=GS().bind(null,"head"),NM.domAPI=QS(),NM.insertStyleElement=tA(),KS()(BM.Z,NM),BM.Z&&BM.Z.locals&&BM.Z.locals;const jM="page-header",FM='\r\n\r\n<div class="grid">\r\n    <div class="page-links">\r\n        <a class="page-link description active" href="/description"></a>\r\n        <a class="page-link stats" href="/stats"></a>\r\n        <a class="page-link magic" href="/magic" if.bind="state.present.character.type == \'magus\'"></a>\r\n        <a class="page-link progression" href="/progression"></a>\r\n        <a class="page-link lab" href="/lab" if.bind="state.present.character.type == \'magus\'"></a>\r\n        <a class="page-link belongings" href="/belongings"></a>\r\n        <a class="page-link enchantments" href="/enchantments" if.bind="state.present.character.type == \'magus\'"></a>\r\n        <a class="page-link notes" href="/notes"></a>\r\n        <a class="page-link settings" href="/settings"></a>\r\n    </div>\r\n</div>',VM=FM,DM=[g];let ZM;function zM(t){ZM||(ZM=Wh.define({name:jM,template:FM,dependencies:DM})),t.register(ZM)}let qM=class{};qM=ZS([Lh(Xt),Cm()],qM);var HM=n(4280),KM={};KM.styleTagTransform=nA(),KM.setAttributes=YS(),KM.insert=GS().bind(null,"head"),KM.domAPI=QS(),KM.insertStyleElement=tA(),KS()(HM.Z,KM),HM.Z&&HM.Z.locals&&HM.Z.locals;const WM="text-field",QM='<input type="text" class.bind="class" value.bind="value" placeholder.bind="placeholder" title.bind="title" keydown.delegate="onChange()">\r\n',_M=QM,GM=[];let XM;function YM(t){XM||(XM=Wh.define({name:WM,template:QM,dependencies:GM})),t.register(XM)}let JM=class{constructor(t){this.ea=t,this.placeholder="",this.title="",this.class="",this.onChange=()=>{this.ea.publish("ui-interaction")}}};ZS([_l,qS("design:type",String)],JM.prototype,"value",void 0),ZS([_l,qS("design:type",String)],JM.prototype,"placeholder",void 0),ZS([_l,qS("design:type",String)],JM.prototype,"title",void 0),ZS([_l,qS("design:type",String)],JM.prototype,"class",void 0),JM=ZS([Lh(Yt),Mh,zS(0,Ri),qS("design:paramtypes",[Object])],JM);var tU=n(2661),eU={};eU.styleTagTransform=nA(),eU.setAttributes=YS(),eU.insert=GS().bind(null,"head"),eU.domAPI=QS(),eU.insertStyleElement=tA(),KS()(tU.Z,eU),tU.Z&&tU.Z.locals&&tU.Z.locals;const nU="add-item-input",iU='<input class="add-item-input-field ${class}" type="text" placeholder.bind="placeholder" keyup.delegate="keyPressed($event)" value.two-way="newItemString">',sU=iU,rU=[];let oU;function aU(t){oU||(oU=Wh.define({name:nU,template:iU,dependencies:rU})),t.register(oU)}let lU=class{constructor(){this.placeholder="",this.class="",this.newItemString="",this.keyPressed=t=>{this.onItemAdded&&"Enter"==t.key&&this.newItemString&&(this.parent?this.onItemAdded(this.newItemString,this.parent):this.onItemAdded(this.newItemString),this.newItemString="")}}};ZS([_l,qS("design:type",String)],lU.prototype,"placeholder",void 0),ZS([_l,qS("design:type",Function)],lU.prototype,"onItemAdded",void 0),ZS([_l,qS("design:type",Object)],lU.prototype,"parent",void 0),ZS([_l,qS("design:type",String)],lU.prototype,"class",void 0),lU=ZS([Lh(Jt),Mh],lU);var cU=n(3055),hU={};hU.styleTagTransform=nA(),hU.setAttributes=YS(),hU.insert=GS().bind(null,"head"),hU.domAPI=QS(),hU.insertStyleElement=tA(),KS()(cU.Z,hU),cU.Z&&cU.Z.locals&&cU.Z.locals;const uU="dialog-box",dU='<div class="dialog-container ${size}">\r\n    <div class="inner-container">\r\n        <title text.bind="title"></title>\r\n        <au-slot></au-slot>\r\n        <footer></footer>\r\n    </div>\r\n</div>\r\n',pU=dU,fU=[];let gU;function vU(t){gU||(gU=Wh.define({name:uU,template:dU,dependencies:fU})),t.register(gU)}let mU=class{constructor(t){this.host=t,this.size="m"}attaching(){return document.body.classList.add("disable-scrolling"),this.host.animate([{transform:"scale(0.8)",opacity:"0"},{transform:"scale(1)",opacity:"1"}],{duration:200}).finished}detaching(){return document.body.classList.remove("disable-scrolling"),this.host.animate([{transform:"scale(1)",opacity:"1"},{transform:"scale(0.8)",opacity:"0"}],{duration:200}).finished}};ZS([_l,qS("design:type",String)],mU.prototype,"title",void 0),ZS([_l,qS("design:type",String)],mU.prototype,"size",void 0),mU=ZS([Lh(te),Tn(Element),qS("design:paramtypes",[Element])],mU);var bU=n(2495),wU={};wU.styleTagTransform=nA(),wU.setAttributes=YS(),wU.insert=GS().bind(null,"head"),wU.domAPI=QS(),wU.insertStyleElement=tA(),KS()(bU.Z,wU),bU.Z&&bU.Z.locals&&bU.Z.locals;const yU="text-dialog",xU='<dialog-box title="${model.title}" size="m">\r\n    <text-box class="text-dialog-input" text.two-way="model.value" show-borders.bind="false"></text-box>\r\n</dialog-box>',kU=xU,SU=[];let AU;function CU(t){AU||(AU=Wh.define({name:yU,template:xU,dependencies:SU})),t.register(AU)}var EU;let TU=EU=class{activate(t){this.model=t}static open(t,e){let n=uB.get(fv),i=vA(t);n.open({component:()=>EU,overlayDismiss:!0,model:i}).whenClosed((n=>{t.value=i.value,e()}))}};TU=EU=ZS([Lh(ee),Mh],TU);var $U=n(1247),IU={};IU.styleTagTransform=nA(),IU.setAttributes=YS(),IU.insert=GS().bind(null,"head"),IU.domAPI=QS(),IU.insertStyleElement=tA(),KS()($U.Z,IU),$U.Z&&$U.Z.locals&&$U.Z.locals;const RU="stat-info-button",OU='<div class="button ${isActive ? \'active\' : \'\'}" click.delegate="activate()" title="Additional information">\r\n</div>',PU=OU,LU=[];let MU;function UU(t){MU||(MU=Wh.define({name:RU,template:OU,dependencies:LU})),t.register(MU)}let BU=class{constructor(){this.activate=()=>{let t=this.source[this.property],e={value:null!=t?t:"",title:"INFORMATION"};TU.open(e,(()=>{this.source[this.property]=e.value}))}}get isActive(){let t=this.source[this.property];return null!=t&&t.length>0}};ZS([_l,qS("design:type",Object)],BU.prototype,"source",void 0),ZS([_l,qS("design:type",String)],BU.prototype,"property",void 0),BU=ZS([Lh(ne)],BU);var NU=n(1187),jU={};jU.styleTagTransform=nA(),jU.setAttributes=YS(),jU.insert=GS().bind(null,"head"),jU.domAPI=QS(),jU.insertStyleElement=tA(),KS()(NU.Z,jU),NU.Z&&NU.Z.locals&&NU.Z.locals;const FU="cross-button",VU='<div class="button-container ${mode}">\r\n\r\n</div>',DU=VU,ZU=[];let zU;function qU(t){zU||(zU=Wh.define({name:FU,template:VU,dependencies:ZU})),t.register(zU)}let HU=class{constructor(){this.mode="standard"}};ZS([_l,qS("design:type",String)],HU.prototype,"mode",void 0),HU=ZS([Lh(ie)],HU);var KU=n(8831),WU={};WU.styleTagTransform=nA(),WU.setAttributes=YS(),WU.insert=GS().bind(null,"head"),WU.domAPI=QS(),WU.insertStyleElement=tA(),KS()(KU.Z,WU),KU.Z&&KU.Z.locals&&KU.Z.locals;const QU="symbol",_U='<div class="symbol-container ${icon}">\r\n</div>',GU=_U,XU=[];let YU;function JU(t){YU||(YU=Wh.define({name:QU,template:_U,dependencies:XU})),t.register(YU)}let tB=class{constructor(){this.icon="three-dots"}};ZS([_l,qS("design:type",String)],tB.prototype,"icon",void 0),tB=ZS([Lh(se)],tB);var eB=n(6436),nB={};nB.styleTagTransform=nA(),nB.setAttributes=YS(),nB.insert=GS().bind(null,"head"),nB.domAPI=QS(),nB.insertStyleElement=tA(),KS()(eB.Z,nB),eB.Z&&eB.Z.locals&&eB.Z.locals;const iB="droppable-image",sB='<div class="container" drop.delegate="onDrop($event)" active-drag.class="dragging" dragenter.delegate="dragging = true" dragleave.delegate="dragging = false">\r\n    <div class="image-placeholder" if.bind="!value"></div>\r\n    <img class="image" if.bind="value" src="${value}"/>\r\n</div>',rB=sB,oB=[];let aB;function lB(t){aB||(aB=Wh.define({name:iB,template:sB,dependencies:oB})),t.register(aB)}let cB=class{constructor(){this.dragging=!1,this.onDrop=t=>{if(1!=t.dataTransfer.items.length)return;let e=t.dataTransfer.items[0];if("file"==e.kind&&e.type.startsWith("image")){var n=new FileReader;n.onload=()=>{this.value=n.result,this.dragging=!1},n.readAsDataURL(e.getAsFile())}}}};ZS([_l,qS("design:type",String)],cB.prototype,"value",void 0),cB=ZS([Lh(re)],cB);let hB=Mv.register(Em.withInitialState(gA).withOptions({history:{undoable:!0,limit:1}})).register(DS.customize({title:{transformTitle:(t,e,n)=>mA.name?`${mA.name} - ${t}`:t,appTitle:"${componentTitles}${appTitleSeparator}Sheet Maker"}})).register(Ov).register(EL,UL,qL,JL,lM,JM,lU,mU,TU,BU,HU,tB,cB).register(mM,EM,UM,qM).app(vL);const uB=hB.container;hB.start(),window.addEventListener("dragover",(function(t){t.preventDefault()}),!1),window.addEventListener("drop",(function(t){t.preventDefault()}),!1),!(window.location.href.indexOf("localhost")>=0)&&"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sheet-maker/service-worker.js").then((t=>{console.log("SW registered: ",t)})).catch((t=>{console.log("SW registration failed: ",t)}))}))})()})();